var Z6=Object.defineProperty;var K6=(i,e,t)=>e in i?Z6(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var xi=(i,e,t)=>K6(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();function Vy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var b2={exports:{}},Mp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function J6(){if(Ow)return Mp;Ow=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,r){var o=null;if(r!==void 0&&(o=""+r),a.key!==void 0&&(o=""+a.key),"key"in a){r={};for(var l in a)l!=="key"&&(r[l]=a[l])}else r=a;return a=r.ref,{$$typeof:i,type:n,key:o,ref:a!==void 0?a:null,props:r}}return Mp.Fragment=e,Mp.jsx=t,Mp.jsxs=t,Mp}var zw;function Q6(){return zw||(zw=1,b2.exports=J6()),b2.exports}var s=Q6(),M2={exports:{}},En={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function $6(){if(Gw)return En;Gw=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function g(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,_={};function S(H,ee,ue){this.props=H,this.context=ee,this.refs=_,this.updater=ue||v}S.prototype.isReactComponent={},S.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},S.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function j(){}j.prototype=S.prototype;function A(H,ee,ue){this.props=H,this.context=ee,this.refs=_,this.updater=ue||v}var C=A.prototype=new j;C.constructor=A,M(C,S.prototype),C.isPureReactComponent=!0;var N=Array.isArray;function R(){}var O={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function z(H,ee,ue){var me=ue.ref;return{$$typeof:i,type:H,key:ee,ref:me!==void 0?me:null,props:ue}}function I(H,ee){return z(H.type,ee,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===i}function F(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ue){return ee[ue]})}var q=/\/+/g;function W(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):ee.toString(36)}function ie(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(R,R):(H.status="pending",H.then(function(ee){H.status==="pending"&&(H.status="fulfilled",H.value=ee)},function(ee){H.status==="pending"&&(H.status="rejected",H.reason=ee)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function B(H,ee,ue,me,be){var fe=typeof H;(fe==="undefined"||fe==="boolean")&&(H=null);var ge=!1;if(H===null)ge=!0;else switch(fe){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(H.$$typeof){case i:case e:ge=!0;break;case f:return ge=H._init,B(ge(H._payload),ee,ue,me,be)}}if(ge)return be=be(H),ge=me===""?"."+W(H,0):me,N(be)?(ue="",ge!=null&&(ue=ge.replace(q,"$&/")+"/"),B(be,ee,ue,"",function(st){return st})):be!=null&&(V(be)&&(be=I(be,ue+(be.key==null||H&&H.key===be.key?"":(""+be.key).replace(q,"$&/")+"/")+ge)),ee.push(be)),1;ge=0;var je=me===""?".":me+":";if(N(H))for(var Qe=0;Qe<H.length;Qe++)me=H[Qe],fe=je+W(me,Qe),ge+=B(me,ee,ue,fe,be);else if(Qe=g(H),typeof Qe=="function")for(H=Qe.call(H),Qe=0;!(me=H.next()).done;)me=me.value,fe=je+W(me,Qe++),ge+=B(me,ee,ue,fe,be);else if(fe==="object"){if(typeof H.then=="function")return B(ie(H),ee,ue,me,be);throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ge}function J(H,ee,ue){if(H==null)return H;var me=[],be=0;return B(H,me,"","",function(fe){return ee.call(ue,fe,be++)}),me}function $(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(ue){(H._status===0||H._status===-1)&&(H._status=1,H._result=ue)},function(ue){(H._status===0||H._status===-1)&&(H._status=2,H._result=ue)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var le=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},re={map:J,forEach:function(H,ee,ue){J(H,function(){ee.apply(this,arguments)},ue)},count:function(H){var ee=0;return J(H,function(){ee++}),ee},toArray:function(H){return J(H,function(ee){return ee})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return En.Activity=m,En.Children=re,En.Component=S,En.Fragment=t,En.Profiler=a,En.PureComponent=A,En.StrictMode=n,En.Suspense=u,En.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,En.__COMPILER_RUNTIME={__proto__:null,c:function(H){return O.H.useMemoCache(H)}},En.cache=function(H){return function(){return H.apply(null,arguments)}},En.cacheSignal=function(){return null},En.cloneElement=function(H,ee,ue){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var me=M({},H.props),be=H.key;if(ee!=null)for(fe in ee.key!==void 0&&(be=""+ee.key),ee)!U.call(ee,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ee.ref===void 0||(me[fe]=ee[fe]);var fe=arguments.length-2;if(fe===1)me.children=ue;else if(1<fe){for(var ge=Array(fe),je=0;je<fe;je++)ge[je]=arguments[je+2];me.children=ge}return z(H.type,be,me)},En.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:r,_context:H},H},En.createElement=function(H,ee,ue){var me,be={},fe=null;if(ee!=null)for(me in ee.key!==void 0&&(fe=""+ee.key),ee)U.call(ee,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(be[me]=ee[me]);var ge=arguments.length-2;if(ge===1)be.children=ue;else if(1<ge){for(var je=Array(ge),Qe=0;Qe<ge;Qe++)je[Qe]=arguments[Qe+2];be.children=je}if(H&&H.defaultProps)for(me in ge=H.defaultProps,ge)be[me]===void 0&&(be[me]=ge[me]);return z(H,fe,be)},En.createRef=function(){return{current:null}},En.forwardRef=function(H){return{$$typeof:l,render:H}},En.isValidElement=V,En.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:$}},En.memo=function(H,ee){return{$$typeof:d,type:H,compare:ee===void 0?null:ee}},En.startTransition=function(H){var ee=O.T,ue={};O.T=ue;try{var me=H(),be=O.S;be!==null&&be(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(R,le)}catch(fe){le(fe)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),O.T=ee}},En.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},En.use=function(H){return O.H.use(H)},En.useActionState=function(H,ee,ue){return O.H.useActionState(H,ee,ue)},En.useCallback=function(H,ee){return O.H.useCallback(H,ee)},En.useContext=function(H){return O.H.useContext(H)},En.useDebugValue=function(){},En.useDeferredValue=function(H,ee){return O.H.useDeferredValue(H,ee)},En.useEffect=function(H,ee){return O.H.useEffect(H,ee)},En.useEffectEvent=function(H){return O.H.useEffectEvent(H)},En.useId=function(){return O.H.useId()},En.useImperativeHandle=function(H,ee,ue){return O.H.useImperativeHandle(H,ee,ue)},En.useInsertionEffect=function(H,ee){return O.H.useInsertionEffect(H,ee)},En.useLayoutEffect=function(H,ee){return O.H.useLayoutEffect(H,ee)},En.useMemo=function(H,ee){return O.H.useMemo(H,ee)},En.useOptimistic=function(H,ee){return O.H.useOptimistic(H,ee)},En.useReducer=function(H,ee,ue){return O.H.useReducer(H,ee,ue)},En.useRef=function(H){return O.H.useRef(H)},En.useState=function(H){return O.H.useState(H)},En.useSyncExternalStore=function(H,ee,ue){return O.H.useSyncExternalStore(H,ee,ue)},En.useTransition=function(){return O.H.useTransition()},En.version="19.2.0",En}var Iw;function H0(){return Iw||(Iw=1,M2.exports=$6()),M2.exports}var E=H0();const Uo=Vy(E);var S2={exports:{}},Sp={},_2={exports:{}},w2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function eD(){return kw||(kw=1,(function(i){function e(B,J){var $=B.length;B.push(J);e:for(;0<$;){var le=$-1>>>1,re=B[le];if(0<a(re,J))B[le]=J,B[$]=re,$=le;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var J=B[0],$=B.pop();if($!==J){B[0]=$;e:for(var le=0,re=B.length,H=re>>>1;le<H;){var ee=2*(le+1)-1,ue=B[ee],me=ee+1,be=B[me];if(0>a(ue,$))me<re&&0>a(be,ue)?(B[le]=be,B[me]=$,le=me):(B[le]=ue,B[ee]=$,le=ee);else if(me<re&&0>a(be,$))B[le]=be,B[me]=$,le=me;else break e}}return J}function a(B,J){var $=B.sortIndex-J.sortIndex;return $!==0?$:B.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,x=3,g=!1,v=!1,M=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(B){for(var J=t(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=B)n(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=t(d)}}function N(B){if(M=!1,C(B),!v)if(t(u)!==null)v=!0,R||(R=!0,F());else{var J=t(d);J!==null&&ie(N,J.startTime-B)}}var R=!1,O=-1,U=5,z=-1;function I(){return _?!0:!(i.unstable_now()-z<U)}function V(){if(_=!1,R){var B=i.unstable_now();z=B;var J=!0;try{e:{v=!1,M&&(M=!1,j(O),O=-1),g=!0;var $=x;try{t:{for(C(B),m=t(u);m!==null&&!(m.expirationTime>B&&I());){var le=m.callback;if(typeof le=="function"){m.callback=null,x=m.priorityLevel;var re=le(m.expirationTime<=B);if(B=i.unstable_now(),typeof re=="function"){m.callback=re,C(B),J=!0;break t}m===t(u)&&n(u),C(B)}else n(u);m=t(u)}if(m!==null)J=!0;else{var H=t(d);H!==null&&ie(N,H.startTime-B),J=!1}}break e}finally{m=null,x=$,g=!1}J=void 0}}finally{J?F():R=!1}}}var F;if(typeof A=="function")F=function(){A(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,W=q.port2;q.port1.onmessage=V,F=function(){W.postMessage(null)}}else F=function(){S(V,0)};function ie(B,J){O=S(function(){B(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(B){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var $=x;x=J;try{return B()}finally{x=$}},i.unstable_requestPaint=function(){_=!0},i.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=x;x=B;try{return J()}finally{x=$}},i.unstable_scheduleCallback=function(B,J,$){var le=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?le+$:le):$=le,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=$+re,B={id:f++,callback:J,priorityLevel:B,startTime:$,expirationTime:re,sortIndex:-1},$>le?(B.sortIndex=$,e(d,B),t(u)===null&&B===t(d)&&(M?(j(O),O=-1):M=!0,ie(N,$-le))):(B.sortIndex=re,e(u,B),v||g||(v=!0,R||(R=!0,F()))),B},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(B){var J=x;return function(){var $=x;x=J;try{return B.apply(this,arguments)}finally{x=$}}}})(w2)),w2}var Bw;function tD(){return Bw||(Bw=1,_2.exports=eD()),_2.exports}var j2={exports:{}},ka={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function nD(){if(Fw)return ka;Fw=1;var i=H0();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(u,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:u,containerInfo:d,implementation:f}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ka.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ka.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(u,d,null,f)},ka.flushSync=function(u){var d=o.T,f=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=d,n.p=f,n.d.f()}},ka.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(u,d))},ka.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},ka.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,m=l(f,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?n.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:g}):f==="script"&&n.d.X(u,{crossOrigin:m,integrity:x,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ka.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);n.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(u)},ka.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=l(f,d.crossOrigin);n.d.L(u,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ka.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);n.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(u)},ka.requestFormReset=function(u){n.d.r(u)},ka.unstable_batchedUpdates=function(u,d){return u(d)},ka.useFormState=function(u,d,f){return o.H.useFormState(u,d,f)},ka.useFormStatus=function(){return o.H.useHostTransitionStatus()},ka.version="19.2.0",ka}var Vw;function sD(){if(Vw)return j2.exports;Vw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),j2.exports=nD(),j2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function iD(){if(Hw)return Sp;Hw=1;var i=tD(),e=H0(),t=sD();function n(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function r(c){var h=c,b=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(b=h.return),c=h.return;while(c)}return h.tag===3?b:null}function o(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function l(c){if(c.tag===31){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function u(c){if(r(c)!==c)throw Error(n(188))}function d(c){var h=c.alternate;if(!h){if(h=r(c),h===null)throw Error(n(188));return h!==c?null:c}for(var b=c,w=h;;){var D=b.return;if(D===null)break;var P=D.alternate;if(P===null){if(w=D.return,w!==null){b=w;continue}break}if(D.child===P.child){for(P=D.child;P;){if(P===b)return u(D),c;if(P===w)return u(D),h;P=P.sibling}throw Error(n(188))}if(b.return!==w.return)b=D,w=P;else{for(var X=!1,se=D.child;se;){if(se===b){X=!0,b=D,w=P;break}if(se===w){X=!0,w=D,b=P;break}se=se.sibling}if(!X){for(se=P.child;se;){if(se===b){X=!0,b=P,w=D;break}if(se===w){X=!0,w=P,b=D;break}se=se.sibling}if(!X)throw Error(n(189))}}if(b.alternate!==w)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?c:h}function f(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=f(c),h!==null)return h;c=c.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=V&&c[V]||c["@@iterator"],typeof c=="function"?c:null)}var q=Symbol.for("react.client.reference");function W(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===q?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case M:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList";case z:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case A:return c.displayName||"Context";case j:return(c._context.displayName||"Context")+".Consumer";case C:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case O:return h=c.displayName||null,h!==null?h:W(c.type)||"Memo";case U:h=c._payload,c=c._init;try{return W(c(h))}catch{}}return null}var ie=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},le=[],re=-1;function H(c){return{current:c}}function ee(c){0>re||(c.current=le[re],le[re]=null,re--)}function ue(c,h){re++,le[re]=c.current,c.current=h}var me=H(null),be=H(null),fe=H(null),ge=H(null);function je(c,h){switch(ue(fe,h),ue(be,c),ue(me,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?aw(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=aw(h),c=rw(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}ee(me),ue(me,c)}function Qe(){ee(me),ee(be),ee(fe)}function st(c){c.memoizedState!==null&&ue(ge,c);var h=me.current,b=rw(h,c.type);h!==b&&(ue(be,c),ue(me,b))}function Ve(c){be.current===c&&(ee(me),ee(be)),ge.current===c&&(ee(ge),gp._currentValue=$)}var nt,St;function ze(c){if(nt===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);nt=h&&h[1]||"",St=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+c+St}var ae=!1;function Fe(c,h){if(!c||ae)return"";ae=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(rt){var Je=rt}Reflect.construct(c,[],bt)}else{try{bt.call()}catch(rt){Je=rt}c.call(bt.prototype)}}else{try{throw Error()}catch(rt){Je=rt}(bt=c())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(rt){if(rt&&Je&&typeof rt.stack=="string")return[rt.stack,Je.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),X=P[0],se=P[1];if(X&&se){var Se=X.split(`
`),Xe=se.split(`
`);for(D=w=0;w<Se.length&&!Se[w].includes("DetermineComponentFrameRoot");)w++;for(;D<Xe.length&&!Xe[D].includes("DetermineComponentFrameRoot");)D++;if(w===Se.length||D===Xe.length)for(w=Se.length-1,D=Xe.length-1;1<=w&&0<=D&&Se[w]!==Xe[D];)D--;for(;1<=w&&0<=D;w--,D--)if(Se[w]!==Xe[D]){if(w!==1||D!==1)do if(w--,D--,0>D||Se[w]!==Xe[D]){var mt=`
`+Se[w].replace(" at new "," at ");return c.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",c.displayName)),mt}while(1<=w&&0<=D);break}}}finally{ae=!1,Error.prepareStackTrace=b}return(b=c?c.displayName||c.name:"")?ze(b):""}function We(c,h){switch(c.tag){case 26:case 27:case 5:return ze(c.type);case 16:return ze("Lazy");case 13:return c.child!==h&&h!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return Fe(c.type,!1);case 11:return Fe(c.type.render,!1);case 1:return Fe(c.type,!0);case 31:return ze("Activity");default:return""}}function Pe(c){try{var h="",b=null;do h+=We(c,b),b=c,c=c.return;while(c);return h}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Ge=Object.prototype.hasOwnProperty,$e=i.unstable_scheduleCallback,Ee=i.unstable_cancelCallback,ct=i.unstable_shouldYield,te=i.unstable_requestPaint,Y=i.unstable_now,ve=i.unstable_getCurrentPriorityLevel,Be=i.unstable_ImmediatePriority,Re=i.unstable_UserBlockingPriority,Ae=i.unstable_NormalPriority,yt=i.unstable_LowPriority,gt=i.unstable_IdlePriority,Dt=i.log,Nt=i.unstable_setDisableYieldValue,ke=null,Ie=null;function ft(c){if(typeof Dt=="function"&&Nt(c),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(ke,c)}catch{}}var he=Math.clz32?Math.clz32:pe,Ce=Math.log,ut=Math.LN2;function pe(c){return c>>>=0,c===0?32:31-(Ce(c)/ut|0)|0}var we=256,lt=262144,jt=4194304;function ot(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function qe(c,h,b){var w=c.pendingLanes;if(w===0)return 0;var D=0,P=c.suspendedLanes,X=c.pingedLanes;c=c.warmLanes;var se=w&134217727;return se!==0?(w=se&~P,w!==0?D=ot(w):(X&=se,X!==0?D=ot(X):b||(b=se&~c,b!==0&&(D=ot(b))))):(se=w&~P,se!==0?D=ot(se):X!==0?D=ot(X):b||(b=w&~c,b!==0&&(D=ot(b)))),D===0?0:h!==0&&h!==D&&(h&P)===0&&(P=D&-D,b=h&-h,P>=b||P===32&&(b&4194048)!==0)?h:D}function Tt(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function zt(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var c=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),c}function Zt(c){for(var h=[],b=0;31>b;b++)h.push(c);return h}function An(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function In(c,h,b,w,D,P){var X=c.pendingLanes;c.pendingLanes=b,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=b,c.entangledLanes&=b,c.errorRecoveryDisabledLanes&=b,c.shellSuspendCounter=0;var se=c.entanglements,Se=c.expirationTimes,Xe=c.hiddenUpdates;for(b=X&~b;0<b;){var mt=31-he(b),bt=1<<mt;se[mt]=0,Se[mt]=-1;var Je=Xe[mt];if(Je!==null)for(Xe[mt]=null,mt=0;mt<Je.length;mt++){var rt=Je[mt];rt!==null&&(rt.lane&=-536870913)}b&=~bt}w!==0&&Ss(c,w,0),P!==0&&D===0&&c.tag!==0&&(c.suspendedLanes|=P&~(X&~h))}function Ss(c,h,b){c.pendingLanes|=h,c.suspendedLanes&=~h;var w=31-he(h);c.entangledLanes|=h,c.entanglements[w]=c.entanglements[w]|1073741824|b&261930}function ni(c,h){var b=c.entangledLanes|=h;for(c=c.entanglements;b;){var w=31-he(b),D=1<<w;D&h|c[w]&h&&(c[w]|=h),b&=~D}}function si(c,h){var b=h&-h;return b=(b&42)!==0?1:cs(b),(b&(c.suspendedLanes|h))!==0?0:b}function cs(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Fs(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Ts(){var c=J.p;return c!==0?c:(c=window.event,c===void 0?32:Cw(c.type))}function sn(c,h){var b=J.p;try{return J.p=c,h()}finally{J.p=b}}var Hn=Math.random().toString(36).slice(2),fn="__reactFiber$"+Hn,Z="__reactProps$"+Hn,ce="__reactContainer$"+Hn,_e="__reactEvents$"+Hn,Ye="__reactListeners$"+Hn,at="__reactHandles$"+Hn,it="__reactResources$"+Hn,Ct="__reactMarker$"+Hn;function wt(c){delete c[fn],delete c[Z],delete c[_e],delete c[Ye],delete c[at]}function _t(c){var h=c[fn];if(h)return h;for(var b=c.parentNode;b;){if(h=b[ce]||b[fn]){if(b=h.alternate,h.child!==null||b!==null&&b.child!==null)for(c=hw(c);c!==null;){if(b=c[fn])return b;c=hw(c)}return h}c=b,b=c.parentNode}return null}function K(c){if(c=c[fn]||c[ce]){var h=c.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return c}return null}function xe(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(n(33))}function de(c){var h=c[it];return h||(h=c[it]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ne(c){c[Ct]=!0}var ye=new Set,Ke={};function dt(c,h){Mt(c,h),Mt(c+"Capture",h)}function Mt(c,h){for(Ke[c]=h,c=0;c<h.length;c++)ye.add(h[c])}var At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gt={},kt={};function Bt(c){return Ge.call(kt,c)?!0:Ge.call(Gt,c)?!1:At.test(c)?kt[c]=!0:(Gt[c]=!0,!1)}function Ft(c,h,b){if(Bt(h))if(b===null)c.removeAttribute(h);else{switch(typeof b){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+b)}}function xn(c,h,b){if(b===null)c.removeAttribute(h);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+b)}}function Qt(c,h,b,w){if(w===null)c.removeAttribute(b);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(b);return}c.setAttributeNS(h,b,""+w)}}function rn(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Mn(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function $t(c,h,b){var w=Object.getOwnPropertyDescriptor(c.constructor.prototype,h);if(!c.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var D=w.get,P=w.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return D.call(this)},set:function(X){b=""+X,P.call(this,X)}}),Object.defineProperty(c,h,{enumerable:w.enumerable}),{getValue:function(){return b},setValue:function(X){b=""+X},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function gn(c){if(!c._valueTracker){var h=Mn(c)?"checked":"value";c._valueTracker=$t(c,h,""+c[h])}}function Kt(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var b=h.getValue(),w="";return c&&(w=Mn(c)?c.checked?"true":"false":c.value),c=w,c!==b?(h.setValue(c),!0):!1}function Cn(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var kn=/[\n"\\]/g;function Jt(c){return c.replace(kn,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Ls(c,h,b,w,D,P,X,se){c.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?c.type=X:c.removeAttribute("type"),h!=null?X==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+rn(h)):c.value!==""+rn(h)&&(c.value=""+rn(h)):X!=="submit"&&X!=="reset"||c.removeAttribute("value"),h!=null?On(c,X,rn(h)):b!=null?On(c,X,rn(b)):w!=null&&c.removeAttribute("value"),D==null&&P!=null&&(c.defaultChecked=!!P),D!=null&&(c.checked=D&&typeof D!="function"&&typeof D!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?c.name=""+rn(se):c.removeAttribute("name")}function Ln(c,h,b,w,D,P,X,se){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(c.type=P),h!=null||b!=null){if(!(P!=="submit"&&P!=="reset"||h!=null)){gn(c);return}b=b!=null?""+rn(b):"",h=h!=null?""+rn(h):b,se||h===c.value||(c.value=h),c.defaultValue=h}w=w??D,w=typeof w!="function"&&typeof w!="symbol"&&!!w,c.checked=se?c.checked:!!w,c.defaultChecked=!!w,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(c.name=X),gn(c)}function On(c,h,b){h==="number"&&Cn(c.ownerDocument)===c||c.defaultValue===""+b||(c.defaultValue=""+b)}function as(c,h,b,w){if(c=c.options,h){h={};for(var D=0;D<b.length;D++)h["$"+b[D]]=!0;for(b=0;b<c.length;b++)D=h.hasOwnProperty("$"+c[b].value),c[b].selected!==D&&(c[b].selected=D),D&&w&&(c[b].defaultSelected=!0)}else{for(b=""+rn(b),h=null,D=0;D<c.length;D++){if(c[D].value===b){c[D].selected=!0,w&&(c[D].defaultSelected=!0);return}h!==null||c[D].disabled||(h=c[D])}h!==null&&(h.selected=!0)}}function Is(c,h,b){if(h!=null&&(h=""+rn(h),h!==c.value&&(c.value=h),b==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=b!=null?""+rn(b):""}function _s(c,h,b,w){if(h==null){if(w!=null){if(b!=null)throw Error(n(92));if(ie(w)){if(1<w.length)throw Error(n(93));w=w[0]}b=w}b==null&&(b=""),h=b}b=rn(h),c.defaultValue=b,w=c.textContent,w===b&&w!==""&&w!==null&&(c.value=w),gn(c)}function ca(c,h){if(h){var b=c.firstChild;if(b&&b===c.lastChild&&b.nodeType===3){b.nodeValue=h;return}}c.textContent=h}var ua=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(c,h,b){var w=h.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?w?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":w?c.setProperty(h,b):typeof b!="number"||b===0||ua.has(h)?h==="float"?c.cssFloat=b:c[h]=(""+b).trim():c[h]=b+"px"}function dc(c,h,b){if(h!=null&&typeof h!="object")throw Error(n(62));if(c=c.style,b!=null){for(var w in b)!b.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?c.setProperty(w,""):w==="float"?c.cssFloat="":c[w]="");for(var D in h)w=h[D],h.hasOwnProperty(D)&&b[D]!==w&&Ml(c,D,w)}else for(var P in h)h.hasOwnProperty(P)&&Ml(c,P,h[P])}function Or(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function br(c){return fc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function Ii(){}var zr=null;function hc(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Wa=null,Mr=null;function mc(c){var h=K(c);if(h&&(c=h.stateNode)){var b=c[Z]||null;e:switch(c=h.stateNode,h.type){case"input":if(Ls(c,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),h=b.name,b.type==="radio"&&h!=null){for(b=c;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Jt(""+h)+'"][type="radio"]'),h=0;h<b.length;h++){var w=b[h];if(w!==c&&w.form===c.form){var D=w[Z]||null;if(!D)throw Error(n(90));Ls(w,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(h=0;h<b.length;h++)w=b[h],w.form===c.form&&Kt(w)}break e;case"textarea":Is(c,b.value,b.defaultValue);break e;case"select":h=b.value,h!=null&&as(c,!!b.multiple,h,!1)}}}var pc=!1;function Sl(c,h,b){if(pc)return c(h,b);pc=!0;try{var w=c(h);return w}finally{if(pc=!1,(Wa!==null||Mr!==null)&&(oe(),Wa&&(h=Wa,c=Mr,Mr=Wa=null,mc(h),c)))for(h=0;h<c.length;h++)mc(c[h])}}function Gr(c,h){var b=c.stateNode;if(b===null)return null;var w=b[Z]||null;if(w===null)return null;b=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(b&&typeof b!="function")throw Error(n(231,h,typeof b));return b}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qi=!1;if(Ya)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Qi=!1}var Ir=null,xc=null,Sr=null;function gc(){if(Sr)return Sr;var c,h=xc,b=h.length,w,D="value"in Ir?Ir.value:Ir.textContent,P=D.length;for(c=0;c<b&&h[c]===D[c];c++);var X=b-c;for(w=1;w<=X&&h[b-w]===D[P-w];w++);return Sr=D.slice(c,1<w?1-w:void 0)}function io(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function kr(){return!0}function zo(){return!1}function Us(c){function h(b,w,D,P,X){this._reactName=b,this._targetInst=D,this.type=w,this.nativeEvent=P,this.target=X,this.currentTarget=null;for(var se in c)c.hasOwnProperty(se)&&(b=c[se],this[se]=b?b(P):P[se]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?kr:zo,this.isPropagationStopped=zo,this}return m(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),h}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=Us(Br),da=m({},Br,{view:0,detail:0}),ao=Us(da),vc,Fr,ro,Mi=m({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yd,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ro&&(ro&&c.type==="mousemove"?(vc=c.screenX-ro.screenX,Fr=c.screenY-ro.screenY):Fr=vc=0,ro=c),vc)},movementY:function(c){return"movementY"in c?c.movementY:Fr}}),Hf=Us(Mi),Xs=m({},Mi,{dataTransfer:0}),yc=Us(Xs),gd=m({},da,{relatedTarget:0}),ou=Us(gd),ki=m({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Us(ki),fi=m({},Br,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_r=Us(fi),vd=m({},Br,{data:0}),nm=Us(vd),cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},im={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ug(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=im[c])?!!h[c]:!1}function yd(){return ug}var am=m({},da,{key:function(c){if(c.key){var h=cg[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=io(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?sm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yd,charCode:function(c){return c.type==="keypress"?io(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?io(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),rm=Us(am),dg=m({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qf=Us(dg),fg=m({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yd}),Io=Us(fg),om=m({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ib=Us(om),hg=m({},Mi,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),_l=Us(hg),ko=m({},Br,{newState:0,oldState:0}),lm=Us(ko),cm=[9,13,27,32],bc=Ya&&"CompositionEvent"in window,wl=null;Ya&&"documentMode"in document&&(wl=document.documentMode);var Mc=Ya&&"TextEvent"in window&&!wl,Bi=Ya&&(!bc||wl&&8<wl&&11>=wl),bd=" ",um=!1;function Xf(c,h){switch(c){case"keyup":return cm.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lu(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var jl=!1;function Wf(c,h){switch(c){case"compositionend":return lu(h);case"keypress":return h.which!==32?null:(um=!0,bd);case"textInput":return c=h.data,c===bd&&um?null:c;default:return null}}function mg(c,h){if(jl)return c==="compositionend"||!bc&&Xf(c,h)?(c=gc(),Sr=xc=Ir=null,jl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Bi&&h.locale!=="ko"?null:h.data;default:return null}}var Za={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!Za[c.type]:h==="textarea"}function Yf(c,h,b,w){Wa?Mr?Mr.push(w):Mr=[w]:Wa=w,h=a1(h,"onChange"),0<h.length&&(b=new Go("onChange","change",null,b,w),c.push({event:b,listeners:h}))}var cu=null,uu=null;function fm(c){$3(c,0)}function du(c){var h=xe(c);if(Kt(h))return c}function hm(c,h){if(c==="change")return h}var Md=!1;if(Ya){var Sc;if(Ya){var Ps="oninput"in document;if(!Ps){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),Ps=typeof pg.oninput=="function"}Sc=Ps}else Sc=!1;Md=Sc&&(!document.documentMode||9<document.documentMode)}function xg(){cu&&(cu.detachEvent("onpropertychange",mm),uu=cu=null)}function mm(c){if(c.propertyName==="value"&&du(uu)){var h=[];Yf(h,uu,c,hc(c)),Sl(fm,h)}}function Sd(c,h,b){c==="focusin"?(xg(),cu=h,uu=b,cu.attachEvent("onpropertychange",mm)):c==="focusout"&&xg()}function El(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return du(uu)}function gg(c,h){if(c==="click")return du(h)}function vg(c,h){if(c==="input"||c==="change")return du(h)}function _c(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Os=typeof Object.is=="function"?Object.is:_c;function fu(c,h){if(Os(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var b=Object.keys(c),w=Object.keys(h);if(b.length!==w.length)return!1;for(w=0;w<b.length;w++){var D=b[w];if(!Ge.call(h,D)||!Os(c[D],h[D]))return!1}return!0}function pm(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function xm(c,h){var b=pm(c);c=0;for(var w;b;){if(b.nodeType===3){if(w=c+b.textContent.length,c<=h&&w>=h)return{node:b,offset:h-c};c=w}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=pm(b)}}function Zf(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?Zf(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function Kf(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=Cn(c.document);h instanceof c.HTMLIFrameElement;){try{var b=typeof h.contentWindow.location.href=="string"}catch{b=!1}if(b)c=h.contentWindow;else break;h=Cn(c.document)}return h}function hu(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var yg=Ya&&"documentMode"in document&&11>=document.documentMode,mu=null,Jf=null,pu=null,Ka=!1;function Qf(c,h,b){var w=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Ka||mu==null||mu!==Cn(w)||(w=mu,"selectionStart"in w&&hu(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),pu&&fu(pu,w)||(pu=w,w=a1(Jf,"onSelect"),0<w.length&&(h=new Go("onSelect","select",null,h,b),c.push({event:h,listeners:w}),h.target=mu)))}function Tl(c,h){var b={};return b[c.toLowerCase()]=h.toLowerCase(),b["Webkit"+c]="webkit"+h,b["Moz"+c]="moz"+h,b}var xu={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},_d={},fa={};Ya&&(fa=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function Al(c){if(_d[c])return _d[c];if(!xu[c])return c;var h=xu[c],b;for(b in h)if(h.hasOwnProperty(b)&&b in fa)return _d[c]=h[b];return c}var Ca=Al("animationend"),gm=Al("animationiteration"),oo=Al("animationstart"),gu=Al("transitionrun"),Cl=Al("transitionstart"),vm=Al("transitioncancel"),$f=Al("transitionend"),Bo=new Map,eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eh.push("scrollEnd");function $i(c,h){Bo.set(c,h),dt(h,[c])}var Nl=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Ni=[],wc=0,th=0;function Rl(){for(var c=wc,h=th=wc=0;h<c;){var b=Ni[h];Ni[h++]=null;var w=Ni[h];Ni[h++]=null;var D=Ni[h];Ni[h++]=null;var P=Ni[h];if(Ni[h++]=null,w!==null&&D!==null){var X=w.pending;X===null?D.next=D:(D.next=X.next,X.next=D),w.pending=D}P!==0&&nh(b,D,P)}}function wd(c,h,b,w){Ni[wc++]=c,Ni[wc++]=h,Ni[wc++]=b,Ni[wc++]=w,th|=w,c.lanes|=w,c=c.alternate,c!==null&&(c.lanes|=w)}function vu(c,h,b,w){return wd(c,h,b,w),yu(c)}function Dl(c,h){return wd(c,null,null,h),yu(c)}function nh(c,h,b){c.lanes|=b;var w=c.alternate;w!==null&&(w.lanes|=b);for(var D=!1,P=c.return;P!==null;)P.childLanes|=b,w=P.alternate,w!==null&&(w.childLanes|=b),P.tag===22&&(c=P.stateNode,c===null||c._visibility&1||(D=!0)),c=P,P=P.return;return c.tag===3?(P=c.stateNode,D&&h!==null&&(D=31-he(b),c=P.hiddenUpdates,w=c[D],w===null?c[D]=[h]:w.push(h),h.lane=b|536870912),P):null}function yu(c){if(50<Bc)throw Bc=0,Fc=null,Error(n(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var Ll={};function bg(c,h,b,w){this.tag=c,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(c,h,b,w){return new bg(c,h,b,w)}function ma(c){return c=c.prototype,!(!c||!c.isReactComponent)}function lo(c,h){var b=c.alternate;return b===null?(b=ha(c.tag,h,c.key,c.mode),b.elementType=c.elementType,b.type=c.type,b.stateNode=c.stateNode,b.alternate=c,c.alternate=b):(b.pendingProps=h,b.type=c.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=c.flags&65011712,b.childLanes=c.childLanes,b.lanes=c.lanes,b.child=c.child,b.memoizedProps=c.memoizedProps,b.memoizedState=c.memoizedState,b.updateQueue=c.updateQueue,h=c.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=c.sibling,b.index=c.index,b.ref=c.ref,b.refCleanup=c.refCleanup,b}function ea(c,h){c.flags&=65011714;var b=c.alternate;return b===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=b.childLanes,c.lanes=b.lanes,c.child=b.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=b.memoizedProps,c.memoizedState=b.memoizedState,c.updateQueue=b.updateQueue,c.type=b.type,h=b.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function jd(c,h,b,w,D,P){var X=0;if(w=c,typeof c=="function")ma(c)&&(X=1);else if(typeof c=="string")X=z6(c,b,me.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case z:return c=ha(31,b,h,D),c.elementType=z,c.lanes=P,c;case M:return Fo(b.children,D,P,h);case _:X=8,D|=24;break;case S:return c=ha(12,b,h,D|2),c.elementType=S,c.lanes=P,c;case N:return c=ha(13,b,h,D),c.elementType=N,c.lanes=P,c;case R:return c=ha(19,b,h,D),c.elementType=R,c.lanes=P,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case A:X=10;break e;case j:X=9;break e;case C:X=11;break e;case O:X=14;break e;case U:X=16,w=null;break e}X=29,b=Error(n(130,c===null?"null":typeof c,"")),w=null}return h=ha(X,b,h,D),h.elementType=c,h.type=w,h.lanes=P,h}function Fo(c,h,b,w){return c=ha(7,c,w,h),c.lanes=b,c}function sh(c,h,b){return c=ha(6,c,null,h),c.lanes=b,c}function Mg(c){var h=ha(18,null,null,0);return h.stateNode=c,h}function Vr(c,h,b){return h=ha(4,c.children!==null?c.children:[],c.key,h),h.lanes=b,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var ym=new WeakMap;function Na(c,h){if(typeof c=="object"&&c!==null){var b=ym.get(c);return b!==void 0?b:(h={value:c,source:h,stack:Pe(h)},ym.set(c,h),h)}return{value:c,source:h,stack:Pe(h)}}var Hr=[],jc=0,Ed=null,bu=0,Ja=[],Ra=0,co=null,uo=1,fo="";function Vo(c,h){Hr[jc++]=bu,Hr[jc++]=Ed,Ed=c,bu=h}function bm(c,h,b){Ja[Ra++]=uo,Ja[Ra++]=fo,Ja[Ra++]=co,co=c;var w=uo;c=fo;var D=32-he(w)-1;w&=~(1<<D),b+=1;var P=32-he(h)+D;if(30<P){var X=D-D%5;P=(w&(1<<X)-1).toString(32),w>>=X,D-=X,uo=1<<32-he(h)+D|b<<D|w,fo=P+c}else uo=1<<P|b<<D|w,fo=c}function ih(c){c.return!==null&&(Vo(c,1),bm(c,1,0))}function Ul(c){for(;c===Ed;)Ed=Hr[--jc],Hr[jc]=null,bu=Hr[--jc],Hr[jc]=null;for(;c===co;)co=Ja[--Ra],Ja[Ra]=null,fo=Ja[--Ra],Ja[Ra]=null,uo=Ja[--Ra],Ja[Ra]=null}function Td(c,h){Ja[Ra++]=uo,Ja[Ra++]=fo,Ja[Ra++]=co,uo=h.id,fo=h.overflow,co=c}var Ri=null,As=null,qn=!1,Ho=null,Di=!1,ah=Error(n(519));function Fn(c){var h=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ad(Na(h,c)),ah}function rh(c){var h=c.stateNode,b=c.type,w=c.memoizedProps;switch(h[fn]=c,h[Z]=w,b){case"dialog":Xn("cancel",h),Xn("close",h);break;case"iframe":case"object":case"embed":Xn("load",h);break;case"video":case"audio":for(b=0;b<fp.length;b++)Xn(fp[b],h);break;case"source":Xn("error",h);break;case"img":case"image":case"link":Xn("error",h),Xn("load",h);break;case"details":Xn("toggle",h);break;case"input":Xn("invalid",h),Ln(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Xn("invalid",h);break;case"textarea":Xn("invalid",h),_s(h,w.value,w.defaultValue,w.children)}b=w.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||h.textContent===""+b||w.suppressHydrationWarning===!0||sw(h.textContent,b)?(w.popover!=null&&(Xn("beforetoggle",h),Xn("toggle",h)),w.onScroll!=null&&Xn("scroll",h),w.onScrollEnd!=null&&Xn("scrollend",h),w.onClick!=null&&(h.onclick=Ii),h=!0):h=!1,h||Fn(c,!0)}function Sg(c){for(Ri=c.return;Ri;)switch(Ri.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Ri=Ri.return}}function Ec(c){if(c!==Ri)return!1;if(!qn)return Sg(c),qn=!0,!1;var h=c.tag,b;if((b=h!==3&&h!==27)&&((b=h===5)&&(b=c.type,b=!(b!=="form"&&b!=="button")||a2(c.type,c.memoizedProps)),b=!b),b&&As&&Fn(c),Sg(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));As=fw(c)}else if(h===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));As=fw(c)}else h===27?(h=As,Iu(c.type)?(c=u2,u2=null,As=c):As=h):As=Ri?_o(c.stateNode.nextSibling):null;return!0}function Tc(){As=Ri=null,qn=!1}function Mm(){var c=Ho;return c!==null&&(ra===null?ra=c:ra.push.apply(ra,c),Ho=null),c}function Ad(c){Ho===null?Ho=[c]:Ho.push(c)}var Sm=H(null),qo=null,ta=null;function Xo(c,h,b){ue(Sm,h._currentValue),h._currentValue=b}function wr(c){c._currentValue=Sm.current,ee(Sm)}function Wo(c,h,b){for(;c!==null;){var w=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),c===b)break;c=c.return}}function oh(c,h,b,w){var D=c.child;for(D!==null&&(D.return=c);D!==null;){var P=D.dependencies;if(P!==null){var X=D.child;P=P.firstContext;e:for(;P!==null;){var se=P;P=D;for(var Se=0;Se<h.length;Se++)if(se.context===h[Se]){P.lanes|=b,se=P.alternate,se!==null&&(se.lanes|=b),Wo(P.return,b,c),w||(X=null);break e}P=se.next}}else if(D.tag===18){if(X=D.return,X===null)throw Error(n(341));X.lanes|=b,P=X.alternate,P!==null&&(P.lanes|=b),Wo(X,b,c),X=null}else X=D.child;if(X!==null)X.return=D;else for(X=D;X!==null;){if(X===c){X=null;break}if(D=X.sibling,D!==null){D.return=X.return,X=D;break}X=X.return}D=X}}function Pl(c,h,b,w){c=null;for(var D=h,P=!1;D!==null;){if(!P){if((D.flags&524288)!==0)P=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var X=D.alternate;if(X===null)throw Error(n(387));if(X=X.memoizedProps,X!==null){var se=D.type;Os(D.pendingProps.value,X.value)||(c!==null?c.push(se):c=[se])}}else if(D===ge.current){if(X=D.alternate,X===null)throw Error(n(387));X.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(c!==null?c.push(gp):c=[gp])}D=D.return}c!==null&&oh(h,c,b,w),h.flags|=262144}function Mu(c){for(c=c.firstContext;c!==null;){if(!Os(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Ac(c){qo=c,ta=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Li(c){return _m(qo,c)}function Cd(c,h){return qo===null&&Ac(c),_m(c,h)}function _m(c,h){var b=h._currentValue;if(h={context:h,memoizedValue:b,next:null},ta===null){if(c===null)throw Error(n(308));ta=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else ta=ta.next=h;return b}var _g=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(b,w){c.push(w)}};this.abort=function(){h.aborted=!0,c.forEach(function(b){return b()})}},wg=i.unstable_scheduleCallback,wm=i.unstable_NormalPriority,ln={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new _g,data:new Map,refCount:0}}function Fi(c){c.refCount--,c.refCount===0&&wg(wm,function(){c.controller.abort()})}var Cc=null,Em=0,Yo=0,qr=null;function Su(c,h){if(Cc===null){var b=Cc=[];Em=0,Yo=Kb(),qr={status:"pending",value:void 0,then:function(w){b.push(w)}}}return Em++,h.then(Tm,Tm),h}function Tm(){if(--Em===0&&Cc!==null){qr!==null&&(qr.status="fulfilled");var c=Cc;Cc=null,Yo=0,qr=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function Am(c,h){var b=[],w={status:"pending",value:null,reason:null,then:function(D){b.push(D)}};return c.then(function(){w.status="fulfilled",w.value=h;for(var D=0;D<b.length;D++)(0,b[D])(h)},function(D){for(w.status="rejected",w.reason=D,D=0;D<b.length;D++)(0,b[D])(void 0)}),w}var jg=B.S;B.S=function(c,h){Ou=Y(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&Su(c,h),jg!==null&&jg(c,h)};var Ol=H(null);function ho(){var c=Ol.current;return c!==null?c:ds.pooledCache}function _u(c,h){h===null?ue(Ol,Ol.current):ue(Ol,h.pool)}function lh(){var c=ho();return c===null?null:{parent:ln._currentValue,pool:c}}var zl=Error(n(460)),Nd=Error(n(474)),Xr=Error(n(542)),Rd={then:function(){}};function Eg(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Cm(c,h,b){switch(b=c[b],b===void 0?c.push(h):b!==h&&(h.then(Ii,Ii),h=b),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,Nm(c),c;default:if(typeof h.status=="string")h.then(Ii,Ii);else{if(c=ds,c!==null&&100<c.shellSuspendCounter)throw Error(n(482));c=h,c.status="pending",c.then(function(w){if(h.status==="pending"){var D=h;D.status="fulfilled",D.value=w}},function(w){if(h.status==="pending"){var D=h;D.status="rejected",D.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,Nm(c),c}throw dn=h,zl}}function Nc(c){try{var h=c._init;return h(c._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(dn=b,zl):b}}var dn=null;function ch(){if(dn===null)throw Error(n(459));var c=dn;return dn=null,c}function Nm(c){if(c===zl||c===Xr)throw Error(n(483))}var Gl=null,Il=0;function uh(c){var h=Il;return Il+=1,Gl===null&&(Gl=[]),Cm(Gl,c,h)}function Dd(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function Ld(c,h){throw h.$$typeof===x?Error(n(525)):(c=Object.prototype.toString.call(h),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function wu(c){function h(Le,Te){if(c){var He=Le.deletions;He===null?(Le.deletions=[Te],Le.flags|=16):He.push(Te)}}function b(Le,Te){if(!c)return null;for(;Te!==null;)h(Le,Te),Te=Te.sibling;return null}function w(Le){for(var Te=new Map;Le!==null;)Le.key!==null?Te.set(Le.key,Le):Te.set(Le.index,Le),Le=Le.sibling;return Te}function D(Le,Te){return Le=lo(Le,Te),Le.index=0,Le.sibling=null,Le}function P(Le,Te,He){return Le.index=He,c?(He=Le.alternate,He!==null?(He=He.index,He<Te?(Le.flags|=67108866,Te):He):(Le.flags|=67108866,Te)):(Le.flags|=1048576,Te)}function X(Le){return c&&Le.alternate===null&&(Le.flags|=67108866),Le}function se(Le,Te,He,vt){return Te===null||Te.tag!==6?(Te=sh(He,Le.mode,vt),Te.return=Le,Te):(Te=D(Te,He),Te.return=Le,Te)}function Se(Le,Te,He,vt){var un=He.type;return un===M?mt(Le,Te,He.props.children,vt,He.key):Te!==null&&(Te.elementType===un||typeof un=="object"&&un!==null&&un.$$typeof===U&&Nc(un)===Te.type)?(Te=D(Te,He.props),Dd(Te,He),Te.return=Le,Te):(Te=jd(He.type,He.key,He.props,null,Le.mode,vt),Dd(Te,He),Te.return=Le,Te)}function Xe(Le,Te,He,vt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==He.containerInfo||Te.stateNode.implementation!==He.implementation?(Te=Vr(He,Le.mode,vt),Te.return=Le,Te):(Te=D(Te,He.children||[]),Te.return=Le,Te)}function mt(Le,Te,He,vt,un){return Te===null||Te.tag!==7?(Te=Fo(He,Le.mode,vt,un),Te.return=Le,Te):(Te=D(Te,He),Te.return=Le,Te)}function bt(Le,Te,He){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=sh(""+Te,Le.mode,He),Te.return=Le,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return He=jd(Te.type,Te.key,Te.props,null,Le.mode,He),Dd(He,Te),He.return=Le,He;case v:return Te=Vr(Te,Le.mode,He),Te.return=Le,Te;case U:return Te=Nc(Te),bt(Le,Te,He)}if(ie(Te)||F(Te))return Te=Fo(Te,Le.mode,He,null),Te.return=Le,Te;if(typeof Te.then=="function")return bt(Le,uh(Te),He);if(Te.$$typeof===A)return bt(Le,Cd(Le,Te),He);Ld(Le,Te)}return null}function Je(Le,Te,He,vt){var un=Te!==null?Te.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return un!==null?null:se(Le,Te,""+He,vt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case g:return He.key===un?Se(Le,Te,He,vt):null;case v:return He.key===un?Xe(Le,Te,He,vt):null;case U:return He=Nc(He),Je(Le,Te,He,vt)}if(ie(He)||F(He))return un!==null?null:mt(Le,Te,He,vt,null);if(typeof He.then=="function")return Je(Le,Te,uh(He),vt);if(He.$$typeof===A)return Je(Le,Te,Cd(Le,He),vt);Ld(Le,He)}return null}function rt(Le,Te,He,vt,un){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return Le=Le.get(He)||null,se(Te,Le,""+vt,un);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case g:return Le=Le.get(vt.key===null?He:vt.key)||null,Se(Te,Le,vt,un);case v:return Le=Le.get(vt.key===null?He:vt.key)||null,Xe(Te,Le,vt,un);case U:return vt=Nc(vt),rt(Le,Te,He,vt,un)}if(ie(vt)||F(vt))return Le=Le.get(He)||null,mt(Te,Le,vt,un,null);if(typeof vt.then=="function")return rt(Le,Te,He,uh(vt),un);if(vt.$$typeof===A)return rt(Le,Te,He,Cd(Te,vt),un);Ld(Te,vt)}return null}function en(Le,Te,He,vt){for(var un=null,hs=null,an=Te,Gn=Te=0,Kn=null;an!==null&&Gn<He.length;Gn++){an.index>Gn?(Kn=an,an=null):Kn=an.sibling;var ms=Je(Le,an,He[Gn],vt);if(ms===null){an===null&&(an=Kn);break}c&&an&&ms.alternate===null&&h(Le,an),Te=P(ms,Te,Gn),hs===null?un=ms:hs.sibling=ms,hs=ms,an=Kn}if(Gn===He.length)return b(Le,an),qn&&Vo(Le,Gn),un;if(an===null){for(;Gn<He.length;Gn++)an=bt(Le,He[Gn],vt),an!==null&&(Te=P(an,Te,Gn),hs===null?un=an:hs.sibling=an,hs=an);return qn&&Vo(Le,Gn),un}for(an=w(an);Gn<He.length;Gn++)Kn=rt(an,Le,Gn,He[Gn],vt),Kn!==null&&(c&&Kn.alternate!==null&&an.delete(Kn.key===null?Gn:Kn.key),Te=P(Kn,Te,Gn),hs===null?un=Kn:hs.sibling=Kn,hs=Kn);return c&&an.forEach(function(Hu){return h(Le,Hu)}),qn&&Vo(Le,Gn),un}function pn(Le,Te,He,vt){if(He==null)throw Error(n(151));for(var un=null,hs=null,an=Te,Gn=Te=0,Kn=null,ms=He.next();an!==null&&!ms.done;Gn++,ms=He.next()){an.index>Gn?(Kn=an,an=null):Kn=an.sibling;var Hu=Je(Le,an,ms.value,vt);if(Hu===null){an===null&&(an=Kn);break}c&&an&&Hu.alternate===null&&h(Le,an),Te=P(Hu,Te,Gn),hs===null?un=Hu:hs.sibling=Hu,hs=Hu,an=Kn}if(ms.done)return b(Le,an),qn&&Vo(Le,Gn),un;if(an===null){for(;!ms.done;Gn++,ms=He.next())ms=bt(Le,ms.value,vt),ms!==null&&(Te=P(ms,Te,Gn),hs===null?un=ms:hs.sibling=ms,hs=ms);return qn&&Vo(Le,Gn),un}for(an=w(an);!ms.done;Gn++,ms=He.next())ms=rt(an,Le,Gn,ms.value,vt),ms!==null&&(c&&ms.alternate!==null&&an.delete(ms.key===null?Gn:ms.key),Te=P(ms,Te,Gn),hs===null?un=ms:hs.sibling=ms,hs=ms);return c&&an.forEach(function(Y6){return h(Le,Y6)}),qn&&Vo(Le,Gn),un}function Rs(Le,Te,He,vt){if(typeof He=="object"&&He!==null&&He.type===M&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case g:e:{for(var un=He.key;Te!==null;){if(Te.key===un){if(un=He.type,un===M){if(Te.tag===7){b(Le,Te.sibling),vt=D(Te,He.props.children),vt.return=Le,Le=vt;break e}}else if(Te.elementType===un||typeof un=="object"&&un!==null&&un.$$typeof===U&&Nc(un)===Te.type){b(Le,Te.sibling),vt=D(Te,He.props),Dd(vt,He),vt.return=Le,Le=vt;break e}b(Le,Te);break}else h(Le,Te);Te=Te.sibling}He.type===M?(vt=Fo(He.props.children,Le.mode,vt,He.key),vt.return=Le,Le=vt):(vt=jd(He.type,He.key,He.props,null,Le.mode,vt),Dd(vt,He),vt.return=Le,Le=vt)}return X(Le);case v:e:{for(un=He.key;Te!==null;){if(Te.key===un)if(Te.tag===4&&Te.stateNode.containerInfo===He.containerInfo&&Te.stateNode.implementation===He.implementation){b(Le,Te.sibling),vt=D(Te,He.children||[]),vt.return=Le,Le=vt;break e}else{b(Le,Te);break}else h(Le,Te);Te=Te.sibling}vt=Vr(He,Le.mode,vt),vt.return=Le,Le=vt}return X(Le);case U:return He=Nc(He),Rs(Le,Te,He,vt)}if(ie(He))return en(Le,Te,He,vt);if(F(He)){if(un=F(He),typeof un!="function")throw Error(n(150));return He=un.call(He),pn(Le,Te,He,vt)}if(typeof He.then=="function")return Rs(Le,Te,uh(He),vt);if(He.$$typeof===A)return Rs(Le,Te,Cd(Le,He),vt);Ld(Le,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,Te!==null&&Te.tag===6?(b(Le,Te.sibling),vt=D(Te,He),vt.return=Le,Le=vt):(b(Le,Te),vt=sh(He,Le.mode,vt),vt.return=Le,Le=vt),X(Le)):b(Le,Te)}return function(Le,Te,He,vt){try{Il=0;var un=Rs(Le,Te,He,vt);return Gl=null,un}catch(an){if(an===zl||an===Xr)throw an;var hs=ha(29,an,null,Le.mode);return hs.lanes=vt,hs.return=Le,hs}finally{}}}var Rc=wu(!0),Tg=wu(!1),kl=!1;function Rm(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dm(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function mo(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Zo(c,h,b){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(Yn&2)!==0){var D=w.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),w.pending=h,h=yu(c),nh(c,null,b),h}return wd(c,w,h,b),yu(c)}function Bl(c,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194048)!==0)){var w=h.lanes;w&=c.pendingLanes,b|=w,h.lanes=b,ni(c,b)}}function dh(c,h){var b=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,b===w)){var D=null,P=null;if(b=b.firstBaseUpdate,b!==null){do{var X={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};P===null?D=P=X:P=P.next=X,b=b.next}while(b!==null);P===null?D=P=h:P=P.next=h}else D=P=h;b={baseState:w.baseState,firstBaseUpdate:D,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},c.updateQueue=b;return}c=b.lastBaseUpdate,c===null?b.firstBaseUpdate=h:c.next=h,b.lastBaseUpdate=h}var Lm=!1;function Ud(){if(Lm){var c=qr;if(c!==null)throw c}}function Dc(c,h,b,w){Lm=!1;var D=c.updateQueue;kl=!1;var P=D.firstBaseUpdate,X=D.lastBaseUpdate,se=D.shared.pending;if(se!==null){D.shared.pending=null;var Se=se,Xe=Se.next;Se.next=null,X===null?P=Xe:X.next=Xe,X=Se;var mt=c.alternate;mt!==null&&(mt=mt.updateQueue,se=mt.lastBaseUpdate,se!==X&&(se===null?mt.firstBaseUpdate=Xe:se.next=Xe,mt.lastBaseUpdate=Se))}if(P!==null){var bt=D.baseState;X=0,mt=Xe=Se=null,se=P;do{var Je=se.lane&-536870913,rt=Je!==se.lane;if(rt?(Vn&Je)===Je:(w&Je)===Je){Je!==0&&Je===Yo&&(Lm=!0),mt!==null&&(mt=mt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var en=c,pn=se;Je=h;var Rs=b;switch(pn.tag){case 1:if(en=pn.payload,typeof en=="function"){bt=en.call(Rs,bt,Je);break e}bt=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=pn.payload,Je=typeof en=="function"?en.call(Rs,bt,Je):en,Je==null)break e;bt=m({},bt,Je);break e;case 2:kl=!0}}Je=se.callback,Je!==null&&(c.flags|=64,rt&&(c.flags|=8192),rt=D.callbacks,rt===null?D.callbacks=[Je]:rt.push(Je))}else rt={lane:Je,tag:se.tag,payload:se.payload,callback:se.callback,next:null},mt===null?(Xe=mt=rt,Se=bt):mt=mt.next=rt,X|=Je;if(se=se.next,se===null){if(se=D.shared.pending,se===null)break;rt=se,se=rt.next,rt.next=null,D.lastBaseUpdate=rt,D.shared.pending=null}}while(!0);mt===null&&(Se=bt),D.baseState=Se,D.firstBaseUpdate=Xe,D.lastBaseUpdate=mt,P===null&&(D.shared.lanes=0),lr|=X,c.lanes=X,c.memoizedState=bt}}function po(c,h){if(typeof c!="function")throw Error(n(191,c));c.call(h)}function Vi(c,h){var b=c.callbacks;if(b!==null)for(c.callbacks=null,c=0;c<b.length;c++)po(b[c],h)}var Qa=H(null),pa=H(0);function Um(c,h){c=li,ue(pa,c),ue(Qa,h),li=c|h.baseLanes}function Pm(){ue(pa,li),ue(Qa,Qa.current)}function na(){li=pa.current,ee(Qa),ee(pa)}var Si=H(null),jr=null;function Fl(c){var h=c.alternate;ue(Ws,Ws.current&1),ue(Si,c),jr===null&&(h===null||Qa.current!==null||h.memoizedState!==null)&&(jr=c)}function Om(c){ue(Ws,Ws.current),ue(Si,c),jr===null&&(jr=c)}function Ag(c){c.tag===22?(ue(Ws,Ws.current),ue(Si,c),jr===null&&(jr=c)):Ko()}function Ko(){ue(Ws,Ws.current),ue(Si,Si.current)}function $a(c){ee(Si),jr===c&&(jr=null),ee(Ws)}var Ws=H(0);function fh(c){for(var h=c;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||l2(b)||c2(b)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Da=0,vn=null,vs=null,hi=null,hh=!1,xo=!1,Lc=!1,mh=0,Pd=0,go=null,kb=0;function Ys(){throw Error(n(321))}function zm(c,h){if(h===null)return!1;for(var b=0;b<h.length&&b<c.length;b++)if(!Os(c[b],h[b]))return!1;return!0}function Gm(c,h,b,w,D,P){return Da=P,vn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,B.H=c===null||c.memoizedState===null?Yg:Tu,Lc=!1,P=b(w,D),Lc=!1,xo&&(P=Ng(h,b,w,D)),Cg(c),P}function Cg(c){B.H=kd;var h=vs!==null&&vs.next!==null;if(Da=0,hi=vs=vn=null,hh=!1,Pd=0,go=null,h)throw Error(n(300));c===null||zs||(c=c.dependencies,c!==null&&Mu(c)&&(zs=!0))}function Ng(c,h,b,w){vn=c;var D=0;do{if(xo&&(go=null),Pd=0,xo=!1,25<=D)throw Error(n(301));if(D+=1,hi=vs=null,c.updateQueue!=null){var P=c.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}B.H=Bd,P=h(b,w)}while(xo);return P}function Bb(){var c=B.H,h=c.useState()[0];return h=typeof h.then=="function"?zd(h):h,c=c.useState()[0],(vs!==null?vs.memoizedState:null)!==c&&(vn.flags|=1024),h}function Im(){var c=mh!==0;return mh=0,c}function km(c,h,b){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~b}function Bm(c){if(hh){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}hh=!1}Da=0,hi=vs=vn=null,xo=!1,Pd=mh=0,go=null}function xa(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?vn.memoizedState=hi=c:hi=hi.next=c,hi}function ii(){if(vs===null){var c=vn.alternate;c=c!==null?c.memoizedState:null}else c=vs.next;var h=hi===null?vn.memoizedState:hi.next;if(h!==null)hi=h,vs=c;else{if(c===null)throw vn.alternate===null?Error(n(467)):Error(n(310));vs=c,c={memoizedState:vs.memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},hi===null?vn.memoizedState=hi=c:hi=hi.next=c}return hi}function Od(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zd(c){var h=Pd;return Pd+=1,go===null&&(go=[]),c=Cm(go,c,h),h=vn,(hi===null?h.memoizedState:hi.next)===null&&(h=h.alternate,B.H=h===null||h.memoizedState===null?Yg:Tu),c}function ph(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return zd(c);if(c.$$typeof===A)return Li(c)}throw Error(n(438,String(c)))}function Fm(c){var h=null,b=vn.updateQueue;if(b!==null&&(h=b.memoCache),h==null){var w=vn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(D){return D.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),b===null&&(b=Od(),vn.updateQueue=b),b.memoCache=h,b=h.data[h.index],b===void 0)for(b=h.data[h.index]=Array(c),w=0;w<c;w++)b[w]=I;return h.index++,b}function Jo(c,h){return typeof h=="function"?h(c):h}function xh(c){var h=ii();return Vm(h,vs,c)}function Vm(c,h,b){var w=c.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=b;var D=c.baseQueue,P=w.pending;if(P!==null){if(D!==null){var X=D.next;D.next=P.next,P.next=X}h.baseQueue=D=P,w.pending=null}if(P=c.baseState,D===null)c.memoizedState=P;else{h=D.next;var se=X=null,Se=null,Xe=h,mt=!1;do{var bt=Xe.lane&-536870913;if(bt!==Xe.lane?(Vn&bt)===bt:(Da&bt)===bt){var Je=Xe.revertLane;if(Je===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,gesture:null,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),bt===Yo&&(mt=!0);else if((Da&Je)===Je){Xe=Xe.next,Je===Yo&&(mt=!0);continue}else bt={lane:0,revertLane:Xe.revertLane,gesture:null,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Se===null?(se=Se=bt,X=P):Se=Se.next=bt,vn.lanes|=Je,lr|=Je;bt=Xe.action,Lc&&b(P,bt),P=Xe.hasEagerState?Xe.eagerState:b(P,bt)}else Je={lane:bt,revertLane:Xe.revertLane,gesture:Xe.gesture,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Se===null?(se=Se=Je,X=P):Se=Se.next=Je,vn.lanes|=bt,lr|=bt;Xe=Xe.next}while(Xe!==null&&Xe!==h);if(Se===null?X=P:Se.next=se,!Os(P,c.memoizedState)&&(zs=!0,mt&&(b=qr,b!==null)))throw b;c.memoizedState=P,c.baseState=X,c.baseQueue=Se,w.lastRenderedState=P}return D===null&&(w.lanes=0),[c.memoizedState,w.dispatch]}function gh(c){var h=ii(),b=h.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=c;var w=b.dispatch,D=b.pending,P=h.memoizedState;if(D!==null){b.pending=null;var X=D=D.next;do P=c(P,X.action),X=X.next;while(X!==D);Os(P,h.memoizedState)||(zs=!0),h.memoizedState=P,h.baseQueue===null&&(h.baseState=P),b.lastRenderedState=P}return[P,w]}function Hm(c,h,b){var w=vn,D=ii(),P=qn;if(P){if(b===void 0)throw Error(n(407));b=b()}else b=h();var X=!Os((vs||D).memoizedState,b);if(X&&(D.memoizedState=b,zs=!0),D=D.queue,Zm(Xm.bind(null,w,D,c),[c]),D.getSnapshot!==h||X||hi!==null&&hi.memoizedState.tag&1){if(w.flags|=2048,ju(9,{destroy:void 0},qm.bind(null,w,D,b,h),null),ds===null)throw Error(n(349));P||(Da&127)!==0||Rg(w,h,b)}return b}function Rg(c,h,b){c.flags|=16384,c={getSnapshot:h,value:b},h=vn.updateQueue,h===null?(h=Od(),vn.updateQueue=h,h.stores=[c]):(b=h.stores,b===null?h.stores=[c]:b.push(c))}function qm(c,h,b,w){h.value=b,h.getSnapshot=w,Wm(h)&&vh(c)}function Xm(c,h,b){return b(function(){Wm(h)&&vh(c)})}function Wm(c){var h=c.getSnapshot;c=c.value;try{var b=h();return!Os(c,b)}catch{return!0}}function vh(c){var h=Dl(c,2);h!==null&&y(h,c,2)}function Gd(c){var h=xa();if(typeof c=="function"){var b=c;if(c=b(),Lc){ft(!0);try{b()}finally{ft(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:c},h}function Dg(c,h,b,w){return c.baseState=b,Vm(c,vs,typeof w=="function"?w:Jo)}function Fb(c,h,b,w,D){if(Qo(c))throw Error(n(485));if(c=h.action,c!==null){var P={payload:D,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){P.listeners.push(X)}};B.T!==null?b(!0):P.isTransition=!1,w(P),b=h.pending,b===null?(P.next=h.pending=P,Lg(h,P)):(P.next=b.next,h.pending=b.next=P)}}function Lg(c,h){var b=h.action,w=h.payload,D=c.state;if(h.isTransition){var P=B.T,X={};B.T=X;try{var se=b(D,w),Se=B.S;Se!==null&&Se(X,se),Ug(c,h,se)}catch(Xe){yh(c,h,Xe)}finally{P!==null&&X.types!==null&&(P.types=X.types),B.T=P}}else try{P=b(D,w),Ug(c,h,P)}catch(Xe){yh(c,h,Xe)}}function Ug(c,h,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(w){Ym(c,h,w)},function(w){return yh(c,h,w)}):Ym(c,h,b)}function Ym(c,h,b){h.status="fulfilled",h.value=b,Pg(h),c.state=b,h=c.pending,h!==null&&(b=h.next,b===h?c.pending=null:(b=b.next,h.next=b,Lg(c,b)))}function yh(c,h,b){var w=c.pending;if(c.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=b,Pg(h),h=h.next;while(h!==w)}c.action=null}function Pg(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function Og(c,h){return h}function zg(c,h){if(qn){var b=ds.formState;if(b!==null){e:{var w=vn;if(qn){if(As){t:{for(var D=As,P=Di;D.nodeType!==8;){if(!P){D=null;break t}if(D=_o(D.nextSibling),D===null){D=null;break t}}P=D.data,D=P==="F!"||P==="F"?D:null}if(D){As=_o(D.nextSibling),w=D.data==="F!";break e}}Fn(w)}w=!1}w&&(h=b[0])}}return b=xa(),b.memoizedState=b.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:h},b.queue=w,b=Wg.bind(null,vn,w),w.dispatch=b,w=Gd(!1),P=Id.bind(null,vn,!1,w.queue),w=xa(),D={state:h,dispatch:null,action:c,pending:null},w.queue=D,b=Fb.bind(null,vn,D,P,b),D.dispatch=b,w.memoizedState=c,[h,b,!1]}function Gg(c){var h=ii();return Ig(h,vs,c)}function Ig(c,h,b){if(h=Vm(c,h,Og)[0],c=xh(Jo)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=zd(h)}catch(X){throw X===zl?Xr:X}else w=h;h=ii();var D=h.queue,P=D.dispatch;return b!==h.memoizedState&&(vn.flags|=2048,ju(9,{destroy:void 0},Vb.bind(null,D,b),null)),[w,P,c]}function Vb(c,h){c.action=h}function kg(c){var h=ii(),b=vs;if(b!==null)return Ig(h,b,c);ii(),h=h.memoizedState,b=ii();var w=b.queue.dispatch;return b.memoizedState=c,[h,w,!1]}function ju(c,h,b,w){return c={tag:c,create:b,deps:w,inst:h,next:null},h=vn.updateQueue,h===null&&(h=Od(),vn.updateQueue=h),b=h.lastEffect,b===null?h.lastEffect=c.next=c:(w=b.next,b.next=c,c.next=w,h.lastEffect=c),c}function Bg(){return ii().memoizedState}function bh(c,h,b,w){var D=xa();vn.flags|=c,D.memoizedState=ju(1|h,{destroy:void 0},b,w===void 0?null:w)}function Mh(c,h,b,w){var D=ii();w=w===void 0?null:w;var P=D.memoizedState.inst;vs!==null&&w!==null&&zm(w,vs.memoizedState.deps)?D.memoizedState=ju(h,P,b,w):(vn.flags|=c,D.memoizedState=ju(1|h,P,b,w))}function Fg(c,h){bh(8390656,8,c,h)}function Zm(c,h){Mh(2048,8,c,h)}function Vg(c){vn.flags|=4;var h=vn.updateQueue;if(h===null)h=Od(),vn.updateQueue=h,h.events=[c];else{var b=h.events;b===null?h.events=[c]:b.push(c)}}function Hg(c){var h=ii().memoizedState;return Vg({ref:h,nextImpl:c}),function(){if((Yn&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}function qg(c,h){return Mh(4,2,c,h)}function er(c,h){return Mh(4,4,c,h)}function Km(c,h){if(typeof h=="function"){c=c();var b=h(c);return function(){typeof b=="function"?b():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function Sh(c,h,b){b=b!=null?b.concat([c]):null,Mh(4,4,Km.bind(null,h,c),b)}function _h(){}function Jm(c,h){var b=ii();h=h===void 0?null:h;var w=b.memoizedState;return h!==null&&zm(h,w[1])?w[0]:(b.memoizedState=[c,h],c)}function Qm(c,h){var b=ii();h=h===void 0?null:h;var w=b.memoizedState;if(h!==null&&zm(h,w[1]))return w[0];if(w=c(),Lc){ft(!0);try{c()}finally{ft(!1)}}return b.memoizedState=[w,h],w}function $m(c,h,b){return b===void 0||(Da&1073741824)!==0&&(Vn&261930)===0?c.memoizedState=h:(c.memoizedState=b,c=p(),vn.lanes|=c,lr|=c,b)}function ep(c,h,b,w){return Os(b,h)?b:Qa.current!==null?(c=$m(c,b,w),Os(c,h)||(zs=!0),c):(Da&42)===0||(Da&1073741824)!==0&&(Vn&261930)===0?(zs=!0,c.memoizedState=b):(c=p(),vn.lanes|=c,lr|=c,h)}function tp(c,h,b,w,D){var P=J.p;J.p=P!==0&&8>P?P:8;var X=B.T,se={};B.T=se,Id(c,!1,h,b);try{var Se=D(),Xe=B.S;if(Xe!==null&&Xe(se,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var mt=Am(Se,w);Eu(c,h,mt,va(c))}else Eu(c,h,w,va(c))}catch(bt){Eu(c,h,{then:function(){},status:"rejected",reason:bt},va())}finally{J.p=P,X!==null&&se.types!==null&&(X.types=se.types),B.T=X}}function Hb(){}function np(c,h,b,w){if(c.tag!==5)throw Error(n(476));var D=Xg(c).queue;tp(c,D,h,$,b===null?Hb:function(){return sp(c),b(w)})}function Xg(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:$},next:null};var b={};return h.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:b},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function sp(c){var h=Xg(c);h.next===null&&(h=c.alternate.memoizedState),Eu(c,h.next.queue,{},va())}function ip(){return Li(gp)}function Hi(){return ii().memoizedState}function ap(){return ii().memoizedState}function qb(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var b=va();c=mo(b);var w=Zo(h,c,b);w!==null&&(y(w,h,b),Bl(w,h,b)),h={cache:jm()},c.payload=h;return}h=h.return}}function Xb(c,h,b){var w=va();b={lane:w,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Qo(c)?Uc(h,b):(b=vu(c,h,b,w),b!==null&&(y(b,c,w),La(b,h,w)))}function Wg(c,h,b){var w=va();Eu(c,h,b,w)}function Eu(c,h,b,w){var D={lane:w,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(Qo(c))Uc(h,D);else{var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=h.lastRenderedReducer,P!==null))try{var X=h.lastRenderedState,se=P(X,b);if(D.hasEagerState=!0,D.eagerState=se,Os(se,X))return wd(c,h,D,0),ds===null&&Rl(),!1}catch{}finally{}if(b=vu(c,h,D,w),b!==null)return y(b,c,w),La(b,h,w),!0}return!1}function Id(c,h,b,w){if(w={lane:2,revertLane:Kb(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},Qo(c)){if(h)throw Error(n(479))}else h=vu(c,b,w,2),h!==null&&y(h,c,2)}function Qo(c){var h=c.alternate;return c===vn||h!==null&&h===vn}function Uc(c,h){xo=hh=!0;var b=c.pending;b===null?h.next=h:(h.next=b.next,b.next=h),c.pending=h}function La(c,h,b){if((b&4194048)!==0){var w=h.lanes;w&=c.pendingLanes,b|=w,h.lanes=b,ni(c,b)}}var kd={readContext:Li,use:ph,useCallback:Ys,useContext:Ys,useEffect:Ys,useImperativeHandle:Ys,useLayoutEffect:Ys,useInsertionEffect:Ys,useMemo:Ys,useReducer:Ys,useRef:Ys,useState:Ys,useDebugValue:Ys,useDeferredValue:Ys,useTransition:Ys,useSyncExternalStore:Ys,useId:Ys,useHostTransitionStatus:Ys,useFormState:Ys,useActionState:Ys,useOptimistic:Ys,useMemoCache:Ys,useCacheRefresh:Ys};kd.useEffectEvent=Ys;var Yg={readContext:Li,use:ph,useCallback:function(c,h){return xa().memoizedState=[c,h===void 0?null:h],c},useContext:Li,useEffect:Fg,useImperativeHandle:function(c,h,b){b=b!=null?b.concat([c]):null,bh(4194308,4,Km.bind(null,h,c),b)},useLayoutEffect:function(c,h){return bh(4194308,4,c,h)},useInsertionEffect:function(c,h){bh(4,2,c,h)},useMemo:function(c,h){var b=xa();h=h===void 0?null:h;var w=c();if(Lc){ft(!0);try{c()}finally{ft(!1)}}return b.memoizedState=[w,h],w},useReducer:function(c,h,b){var w=xa();if(b!==void 0){var D=b(h);if(Lc){ft(!0);try{b(h)}finally{ft(!1)}}}else D=h;return w.memoizedState=w.baseState=D,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:D},w.queue=c,c=c.dispatch=Xb.bind(null,vn,c),[w.memoizedState,c]},useRef:function(c){var h=xa();return c={current:c},h.memoizedState=c},useState:function(c){c=Gd(c);var h=c.queue,b=Wg.bind(null,vn,h);return h.dispatch=b,[c.memoizedState,b]},useDebugValue:_h,useDeferredValue:function(c,h){var b=xa();return $m(b,c,h)},useTransition:function(){var c=Gd(!1);return c=tp.bind(null,vn,c.queue,!0,!1),xa().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,b){var w=vn,D=xa();if(qn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=h(),ds===null)throw Error(n(349));(Vn&127)!==0||Rg(w,h,b)}D.memoizedState=b;var P={value:b,getSnapshot:h};return D.queue=P,Fg(Xm.bind(null,w,P,c),[c]),w.flags|=2048,ju(9,{destroy:void 0},qm.bind(null,w,P,b,h),null),b},useId:function(){var c=xa(),h=ds.identifierPrefix;if(qn){var b=fo,w=uo;b=(w&~(1<<32-he(w)-1)).toString(32)+b,h="_"+h+"R_"+b,b=mh++,0<b&&(h+="H"+b.toString(32)),h+="_"}else b=kb++,h="_"+h+"r_"+b.toString(32)+"_";return c.memoizedState=h},useHostTransitionStatus:ip,useFormState:zg,useActionState:zg,useOptimistic:function(c){var h=xa();h.memoizedState=h.baseState=c;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=b,h=Id.bind(null,vn,!0,b),b.dispatch=h,[c,h]},useMemoCache:Fm,useCacheRefresh:function(){return xa().memoizedState=qb.bind(null,vn)},useEffectEvent:function(c){var h=xa(),b={impl:c};return h.memoizedState=b,function(){if((Yn&2)!==0)throw Error(n(440));return b.impl.apply(void 0,arguments)}}},Tu={readContext:Li,use:ph,useCallback:Jm,useContext:Li,useEffect:Zm,useImperativeHandle:Sh,useInsertionEffect:qg,useLayoutEffect:er,useMemo:Qm,useReducer:xh,useRef:Bg,useState:function(){return xh(Jo)},useDebugValue:_h,useDeferredValue:function(c,h){var b=ii();return ep(b,vs.memoizedState,c,h)},useTransition:function(){var c=xh(Jo)[0],h=ii().memoizedState;return[typeof c=="boolean"?c:zd(c),h]},useSyncExternalStore:Hm,useId:Hi,useHostTransitionStatus:ip,useFormState:Gg,useActionState:Gg,useOptimistic:function(c,h){var b=ii();return Dg(b,vs,c,h)},useMemoCache:Fm,useCacheRefresh:ap};Tu.useEffectEvent=Hg;var Bd={readContext:Li,use:ph,useCallback:Jm,useContext:Li,useEffect:Zm,useImperativeHandle:Sh,useInsertionEffect:qg,useLayoutEffect:er,useMemo:Qm,useReducer:gh,useRef:Bg,useState:function(){return gh(Jo)},useDebugValue:_h,useDeferredValue:function(c,h){var b=ii();return vs===null?$m(b,c,h):ep(b,vs.memoizedState,c,h)},useTransition:function(){var c=gh(Jo)[0],h=ii().memoizedState;return[typeof c=="boolean"?c:zd(c),h]},useSyncExternalStore:Hm,useId:Hi,useHostTransitionStatus:ip,useFormState:kg,useActionState:kg,useOptimistic:function(c,h){var b=ii();return vs!==null?Dg(b,vs,c,h):(b.baseState=c,[c,b.queue.dispatch])},useMemoCache:Fm,useCacheRefresh:ap};Bd.useEffectEvent=Hg;function Au(c,h,b,w){h=c.memoizedState,b=b(w,h),b=b==null?h:m({},h,b),c.memoizedState=b,c.lanes===0&&(c.updateQueue.baseState=b)}var Fd={enqueueSetState:function(c,h,b){c=c._reactInternals;var w=va(),D=mo(w);D.payload=h,b!=null&&(D.callback=b),h=Zo(c,D,w),h!==null&&(y(h,c,w),Bl(h,c,w))},enqueueReplaceState:function(c,h,b){c=c._reactInternals;var w=va(),D=mo(w);D.tag=1,D.payload=h,b!=null&&(D.callback=b),h=Zo(c,D,w),h!==null&&(y(h,c,w),Bl(h,c,w))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var b=va(),w=mo(b);w.tag=2,h!=null&&(w.callback=h),h=Zo(c,w,b),h!==null&&(y(h,c,b),Bl(h,c,b))}};function Zg(c,h,b,w,D,P,X){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,P,X):h.prototype&&h.prototype.isPureReactComponent?!fu(b,w)||!fu(D,P):!0}function Kg(c,h,b,w){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,w),h.state!==c&&Fd.enqueueReplaceState(h,h.state,null)}function qi(c,h){var b=h;if("ref"in h){b={};for(var w in h)w!=="ref"&&(b[w]=h[w])}if(c=c.defaultProps){b===h&&(b=m({},b));for(var D in c)b[D]===void 0&&(b[D]=c[D])}return b}function rp(c){Nl(c)}function Jg(c){console.error(c)}function wh(c){Nl(c)}function jh(c,h){try{var b=c.onUncaughtError;b(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function Qg(c,h,b){try{var w=c.onCaughtError;w(b.value,{componentStack:b.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function op(c,h,b){return b=mo(b),b.tag=3,b.payload={element:null},b.callback=function(){jh(c,h)},b}function Cu(c){return c=mo(c),c.tag=3,c}function Ua(c,h,b,w){var D=b.type.getDerivedStateFromError;if(typeof D=="function"){var P=w.value;c.payload=function(){return D(P)},c.callback=function(){Qg(h,b,w)}}var X=b.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(c.callback=function(){Qg(h,b,w),typeof D!="function"&&(So===null?So=new Set([this]):So.add(this));var se=w.stack;this.componentDidCatch(w.value,{componentStack:se!==null?se:""})})}function tr(c,h,b,w,D){if(b.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=b.alternate,h!==null&&Pl(h,b,D,!0),b=Si.current,b!==null){switch(b.tag){case 31:case 13:return jr===null?_n():b.alternate===null&&fs===0&&(fs=3),b.flags&=-257,b.flags|=65536,b.lanes=D,w===Rd?b.flags|=16384:(h=b.updateQueue,h===null?b.updateQueue=new Set([w]):h.add(w),Wb(c,w,D)),!1;case 22:return b.flags|=65536,w===Rd?b.flags|=16384:(h=b.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},b.updateQueue=h):(b=h.retryQueue,b===null?h.retryQueue=new Set([w]):b.add(w)),Wb(c,w,D)),!1}throw Error(n(435,b.tag))}return Wb(c,w,D),_n(),!1}if(qn)return h=Si.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=D,w!==ah&&(c=Error(n(422),{cause:w}),Ad(Na(c,b)))):(w!==ah&&(h=Error(n(423),{cause:w}),Ad(Na(h,b))),c=c.current.alternate,c.flags|=65536,D&=-D,c.lanes|=D,w=Na(w,b),D=op(c.stateNode,w,D),dh(c,D),fs!==4&&(fs=2)),!1;var P=Error(n(520),{cause:w});if(P=Na(P,b),Jr===null?Jr=[P]:Jr.push(P),fs!==4&&(fs=2),h===null)return!0;w=Na(w,b),b=h;do{switch(b.tag){case 3:return b.flags|=65536,c=D&-D,b.lanes|=c,c=op(b.stateNode,w,c),dh(b,c),!1;case 1:if(h=b.type,P=b.stateNode,(b.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(So===null||!So.has(P))))return b.flags|=65536,D&=-D,b.lanes|=D,D=Cu(D),Ua(D,c,b,w),dh(b,D),!1}b=b.return}while(b!==null);return!1}var Eh=Error(n(461)),zs=!1;function Zs(c,h,b,w){h.child=c===null?Tg(h,null,b,w):Rc(h,c.child,b,w)}function Vd(c,h,b,w,D){b=b.render;var P=h.ref;if("ref"in w){var X={};for(var se in w)se!=="ref"&&(X[se]=w[se])}else X=w;return Ac(h),w=Gm(c,h,b,X,P,D),se=Im(),c!==null&&!zs?(km(c,h,D),Zr(c,h,D)):(qn&&se&&ih(h),h.flags|=1,Zs(c,h,w,D),h.child)}function Hd(c,h,b,w,D){if(c===null){var P=b.type;return typeof P=="function"&&!ma(P)&&P.defaultProps===void 0&&b.compare===null?(h.tag=15,h.type=P,nr(c,h,P,w,D)):(c=jd(b.type,null,w,h,h.mode,D),c.ref=h.ref,c.return=h,h.child=c)}if(P=c.child,!Hl(c,D)){var X=P.memoizedProps;if(b=b.compare,b=b!==null?b:fu,b(X,w)&&c.ref===h.ref)return Zr(c,h,D)}return h.flags|=1,c=lo(P,w),c.ref=h.ref,c.return=h,h.child=c}function nr(c,h,b,w,D){if(c!==null){var P=c.memoizedProps;if(fu(P,w)&&c.ref===h.ref)if(zs=!1,h.pendingProps=w=P,Hl(c,D))(c.flags&131072)!==0&&(zs=!0);else return h.lanes=c.lanes,Zr(c,h,D)}return Nu(c,h,b,w,D)}function sr(c,h,b,w){var D=w.children,P=c!==null?c.memoizedState:null;if(c===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((h.flags&128)!==0){if(P=P!==null?P.baseLanes|b:b,c!==null){for(w=h.child=c.child,D=0;w!==null;)D=D|w.lanes|w.childLanes,w=w.sibling;w=D&~P}else w=0,h.child=null;return vo(c,h,P,b,w)}if((b&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&_u(h,P!==null?P.cachePool:null),P!==null?Um(h,P):Pm(),Ag(h);else return w=h.lanes=536870912,vo(c,h,P!==null?P.baseLanes|b:b,b,w)}else P!==null?(_u(h,P.cachePool),Um(h,P),Ko(),h.memoizedState=null):(c!==null&&_u(h,null),Pm(),Ko());return Zs(c,h,D,b),h.child}function Wr(c,h){return c!==null&&c.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function vo(c,h,b,w,D){var P=ho();return P=P===null?null:{parent:ln._currentValue,pool:P},h.memoizedState={baseLanes:b,cachePool:P},c!==null&&_u(h,null),Pm(),Ag(h),c!==null&&Pl(c,h,w,!0),h.childLanes=D,null}function Er(c,h){return h=Ru({mode:h.mode,children:h.children},c.mode),h.ref=c.ref,c.child=h,h.return=c,h}function Ui(c,h,b){return Rc(h,c.child,null,b),c=Er(h,h.pendingProps),c.flags|=2,$a(h),h.memoizedState=null,c}function qd(c,h,b){var w=h.pendingProps,D=(h.flags&128)!==0;if(h.flags&=-129,c===null){if(qn){if(w.mode==="hidden")return c=Er(h,w),h.lanes=536870912,Wr(null,c);if(Om(h),(c=As)?(c=dw(c,Di),c=c!==null&&c.data==="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:co!==null?{id:uo,overflow:fo}:null,retryLane:536870912,hydrationErrors:null},b=Mg(c),b.return=h,h.child=b,Ri=h,As=null)):c=null,c===null)throw Fn(h);return h.lanes=536870912,null}return Er(h,w)}var P=c.memoizedState;if(P!==null){var X=P.dehydrated;if(Om(h),D)if(h.flags&256)h.flags&=-257,h=Ui(c,h,b);else if(h.memoizedState!==null)h.child=c.child,h.flags|=128,h=null;else throw Error(n(558));else if(zs||Pl(c,h,b,!1),D=(b&c.childLanes)!==0,zs||D){if(w=ds,w!==null&&(X=si(w,b),X!==0&&X!==P.retryLane))throw P.retryLane=X,Dl(c,X),y(w,c,X),Eh;_n(),h=Ui(c,h,b)}else c=P.treeContext,As=_o(X.nextSibling),Ri=h,qn=!0,Ho=null,Di=!1,c!==null&&Td(h,c),h=Er(h,w),h.flags|=4096;return h}return c=lo(c.child,{mode:w.mode,children:w.children}),c.ref=h.ref,h.child=c,c.return=h,c}function Yr(c,h){var b=h.ref;if(b===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(c===null||c.ref!==b)&&(h.flags|=4194816)}}function Nu(c,h,b,w,D){return Ac(h),b=Gm(c,h,b,w,void 0,D),w=Im(),c!==null&&!zs?(km(c,h,D),Zr(c,h,D)):(qn&&w&&ih(h),h.flags|=1,Zs(c,h,b,D),h.child)}function sa(c,h,b,w,D,P){return Ac(h),h.updateQueue=null,b=Ng(h,w,b,D),Cg(c),w=Im(),c!==null&&!zs?(km(c,h,P),Zr(c,h,P)):(qn&&w&&ih(h),h.flags|=1,Zs(c,h,b,P),h.child)}function Xi(c,h,b,w,D){if(Ac(h),h.stateNode===null){var P=Ll,X=b.contextType;typeof X=="object"&&X!==null&&(P=Li(X)),P=new b(w,P),h.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Fd,h.stateNode=P,P._reactInternals=h,P=h.stateNode,P.props=w,P.state=h.memoizedState,P.refs={},Rm(h),X=b.contextType,P.context=typeof X=="object"&&X!==null?Li(X):Ll,P.state=h.memoizedState,X=b.getDerivedStateFromProps,typeof X=="function"&&(Au(h,b,X,w),P.state=h.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(X=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),X!==P.state&&Fd.enqueueReplaceState(P,P.state,null),Dc(h,w,P,D),Ud(),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(c===null){P=h.stateNode;var se=h.memoizedProps,Se=qi(b,se);P.props=Se;var Xe=P.context,mt=b.contextType;X=Ll,typeof mt=="object"&&mt!==null&&(X=Li(mt));var bt=b.getDerivedStateFromProps;mt=typeof bt=="function"||typeof P.getSnapshotBeforeUpdate=="function",se=h.pendingProps!==se,mt||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(se||Xe!==X)&&Kg(h,P,w,X),kl=!1;var Je=h.memoizedState;P.state=Je,Dc(h,w,P,D),Ud(),Xe=h.memoizedState,se||Je!==Xe||kl?(typeof bt=="function"&&(Au(h,b,bt,w),Xe=h.memoizedState),(Se=kl||Zg(h,b,Se,w,Je,Xe,X))?(mt||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(h.flags|=4194308)):(typeof P.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Xe),P.props=w,P.state=Xe,P.context=X,w=Se):(typeof P.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{P=h.stateNode,Dm(c,h),X=h.memoizedProps,mt=qi(b,X),P.props=mt,bt=h.pendingProps,Je=P.context,Xe=b.contextType,Se=Ll,typeof Xe=="object"&&Xe!==null&&(Se=Li(Xe)),se=b.getDerivedStateFromProps,(Xe=typeof se=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(X!==bt||Je!==Se)&&Kg(h,P,w,Se),kl=!1,Je=h.memoizedState,P.state=Je,Dc(h,w,P,D),Ud();var rt=h.memoizedState;X!==bt||Je!==rt||kl||c!==null&&c.dependencies!==null&&Mu(c.dependencies)?(typeof se=="function"&&(Au(h,b,se,w),rt=h.memoizedState),(mt=kl||Zg(h,b,mt,w,Je,rt,Se)||c!==null&&c.dependencies!==null&&Mu(c.dependencies))?(Xe||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,rt,Se),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,rt,Se)),typeof P.componentDidUpdate=="function"&&(h.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof P.componentDidUpdate!="function"||X===c.memoizedProps&&Je===c.memoizedState||(h.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===c.memoizedProps&&Je===c.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=rt),P.props=w,P.state=rt,P.context=Se,w=mt):(typeof P.componentDidUpdate!="function"||X===c.memoizedProps&&Je===c.memoizedState||(h.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===c.memoizedProps&&Je===c.memoizedState||(h.flags|=1024),w=!1)}return P=w,Yr(c,h),w=(h.flags&128)!==0,P||w?(P=h.stateNode,b=w&&typeof b.getDerivedStateFromError!="function"?null:P.render(),h.flags|=1,c!==null&&w?(h.child=Rc(h,c.child,null,D),h.child=Rc(h,null,b,D)):Zs(c,h,b,D),h.memoizedState=P.state,c=h.child):c=Zr(c,h,D),c}function Jn(c,h,b,w){return Tc(),h.flags|=256,Zs(c,h,b,w),h.child}var ir={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tr(c){return{baseLanes:c,cachePool:lh()}}function Xd(c,h,b){return c=c!==null?c.childLanes&~b:0,h&&(c|=Zn),c}function ar(c,h,b){var w=h.pendingProps,D=!1,P=(h.flags&128)!==0,X;if((X=P)||(X=c!==null&&c.memoizedState===null?!1:(Ws.current&2)!==0),X&&(D=!0,h.flags&=-129),X=(h.flags&32)!==0,h.flags&=-33,c===null){if(qn){if(D?Fl(h):Ko(),(c=As)?(c=dw(c,Di),c=c!==null&&c.data!=="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:co!==null?{id:uo,overflow:fo}:null,retryLane:536870912,hydrationErrors:null},b=Mg(c),b.return=h,h.child=b,Ri=h,As=null)):c=null,c===null)throw Fn(h);return c2(c)?h.lanes=32:h.lanes=536870912,null}var se=w.children;return w=w.fallback,D?(Ko(),D=h.mode,se=Ru({mode:"hidden",children:se},D),w=Fo(w,D,b,null),se.return=h,w.return=h,se.sibling=w,h.child=se,w=h.child,w.memoizedState=Tr(b),w.childLanes=Xd(c,X,b),h.memoizedState=ir,Wr(null,w)):(Fl(h),Vl(h,se))}var Se=c.memoizedState;if(Se!==null&&(se=Se.dehydrated,se!==null)){if(P)h.flags&256?(Fl(h),h.flags&=-257,h=Du(c,h,b)):h.memoizedState!==null?(Ko(),h.child=c.child,h.flags|=128,h=null):(Ko(),se=w.fallback,D=h.mode,w=Ru({mode:"visible",children:w.children},D),se=Fo(se,D,b,null),se.flags|=2,w.return=h,se.return=h,w.sibling=se,h.child=w,Rc(h,c.child,null,b),w=h.child,w.memoizedState=Tr(b),w.childLanes=Xd(c,X,b),h.memoizedState=ir,h=Wr(null,w));else if(Fl(h),c2(se)){if(X=se.nextSibling&&se.nextSibling.dataset,X)var Xe=X.dgst;X=Xe,w=Error(n(419)),w.stack="",w.digest=X,Ad({value:w,source:null,stack:null}),h=Du(c,h,b)}else if(zs||Pl(c,h,b,!1),X=(b&c.childLanes)!==0,zs||X){if(X=ds,X!==null&&(w=si(X,b),w!==0&&w!==Se.retryLane))throw Se.retryLane=w,Dl(c,w),y(X,c,w),Eh;l2(se)||_n(),h=Du(c,h,b)}else l2(se)?(h.flags|=192,h.child=c.child,h=null):(c=Se.treeContext,As=_o(se.nextSibling),Ri=h,qn=!0,Ho=null,Di=!1,c!==null&&Td(h,c),h=Vl(h,w.children),h.flags|=4096);return h}return D?(Ko(),se=w.fallback,D=h.mode,Se=c.child,Xe=Se.sibling,w=lo(Se,{mode:"hidden",children:w.children}),w.subtreeFlags=Se.subtreeFlags&65011712,Xe!==null?se=lo(Xe,se):(se=Fo(se,D,b,null),se.flags|=2),se.return=h,w.return=h,w.sibling=se,h.child=w,Wr(null,w),w=h.child,se=c.child.memoizedState,se===null?se=Tr(b):(D=se.cachePool,D!==null?(Se=ln._currentValue,D=D.parent!==Se?{parent:Se,pool:Se}:D):D=lh(),se={baseLanes:se.baseLanes|b,cachePool:D}),w.memoizedState=se,w.childLanes=Xd(c,X,b),h.memoizedState=ir,Wr(c.child,w)):(Fl(h),b=c.child,c=b.sibling,b=lo(b,{mode:"visible",children:w.children}),b.return=h,b.sibling=null,c!==null&&(X=h.deletions,X===null?(h.deletions=[c],h.flags|=16):X.push(c)),h.child=b,h.memoizedState=null,b)}function Vl(c,h){return h=Ru({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Ru(c,h){return c=ha(22,c,null,h),c.lanes=0,c}function Du(c,h,b){return Rc(h,c.child,null,b),c=Vl(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function Pc(c,h,b){c.lanes|=h;var w=c.alternate;w!==null&&(w.lanes|=h),Wo(c.return,h,b)}function Wd(c,h,b,w,D,P){var X=c.memoizedState;X===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:b,tailMode:D,treeForkCount:P}:(X.isBackwards=h,X.rendering=null,X.renderingStartTime=0,X.last=w,X.tail=b,X.tailMode=D,X.treeForkCount=P)}function Yd(c,h,b){var w=h.pendingProps,D=w.revealOrder,P=w.tail;w=w.children;var X=Ws.current,se=(X&2)!==0;if(se?(X=X&1|2,h.flags|=128):X&=1,ue(Ws,X),Zs(c,h,w,b),w=qn?bu:0,!se&&c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Pc(c,b,h);else if(c.tag===19)Pc(c,b,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(D){case"forwards":for(b=h.child,D=null;b!==null;)c=b.alternate,c!==null&&fh(c)===null&&(D=b),b=b.sibling;b=D,b===null?(D=h.child,h.child=null):(D=b.sibling,b.sibling=null),Wd(h,!1,D,b,P,w);break;case"backwards":case"unstable_legacy-backwards":for(b=null,D=h.child,h.child=null;D!==null;){if(c=D.alternate,c!==null&&fh(c)===null){h.child=D;break}c=D.sibling,D.sibling=b,b=D,D=c}Wd(h,!0,b,null,P,w);break;case"together":Wd(h,!1,null,null,void 0,w);break;default:h.memoizedState=null}return h.child}function Zr(c,h,b){if(c!==null&&(h.dependencies=c.dependencies),lr|=h.lanes,(b&h.childLanes)===0)if(c!==null){if(Pl(c,h,b,!1),(b&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(n(153));if(h.child!==null){for(c=h.child,b=lo(c,c.pendingProps),h.child=b,b.return=h;c.sibling!==null;)c=c.sibling,b=b.sibling=lo(c,c.pendingProps),b.return=h;b.sibling=null}return h.child}function Hl(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&Mu(c)))}function Zd(c,h,b){switch(h.tag){case 3:je(h,h.stateNode.containerInfo),Xo(h,ln,c.memoizedState.cache),Tc();break;case 27:case 5:st(h);break;case 4:je(h,h.stateNode.containerInfo);break;case 10:Xo(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,Om(h),null;break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Fl(h),h.flags|=128,null):(b&h.child.childLanes)!==0?ar(c,h,b):(Fl(h),c=Zr(c,h,b),c!==null?c.sibling:null);Fl(h);break;case 19:var D=(c.flags&128)!==0;if(w=(b&h.childLanes)!==0,w||(Pl(c,h,b,!1),w=(b&h.childLanes)!==0),D){if(w)return Yd(c,h,b);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),ue(Ws,Ws.current),w)break;return null;case 22:return h.lanes=0,sr(c,h,b,h.pendingProps);case 24:Xo(h,ln,c.memoizedState.cache)}return Zr(c,h,b)}function Th(c,h,b){if(c!==null)if(c.memoizedProps!==h.pendingProps)zs=!0;else{if(!Hl(c,b)&&(h.flags&128)===0)return zs=!1,Zd(c,h,b);zs=(c.flags&131072)!==0}else zs=!1,qn&&(h.flags&1048576)!==0&&bm(h,bu,h.index);switch(h.lanes=0,h.tag){case 16:e:{var w=h.pendingProps;if(c=Nc(h.elementType),h.type=c,typeof c=="function")ma(c)?(w=qi(c,w),h.tag=1,h=Xi(null,h,c,w,b)):(h.tag=0,h=Nu(null,h,c,w,b));else{if(c!=null){var D=c.$$typeof;if(D===C){h.tag=11,h=Vd(null,h,c,w,b);break e}else if(D===O){h.tag=14,h=Hd(null,h,c,w,b);break e}}throw h=W(c)||c,Error(n(306,h,""))}}return h;case 0:return Nu(c,h,h.type,h.pendingProps,b);case 1:return w=h.type,D=qi(w,h.pendingProps),Xi(c,h,w,D,b);case 3:e:{if(je(h,h.stateNode.containerInfo),c===null)throw Error(n(387));w=h.pendingProps;var P=h.memoizedState;D=P.element,Dm(c,h),Dc(h,w,null,b);var X=h.memoizedState;if(w=X.cache,Xo(h,ln,w),w!==P.cache&&oh(h,[ln],b,!0),Ud(),w=X.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:X.cache},h.updateQueue.baseState=P,h.memoizedState=P,h.flags&256){h=Jn(c,h,w,b);break e}else if(w!==D){D=Na(Error(n(424)),h),Ad(D),h=Jn(c,h,w,b);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(As=_o(c.firstChild),Ri=h,qn=!0,Ho=null,Di=!0,b=Tg(h,null,w,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Tc(),w===D){h=Zr(c,h,b);break e}Zs(c,h,w,b)}h=h.child}return h;case 26:return Yr(c,h),c===null?(b=gw(h.type,null,h.pendingProps,null))?h.memoizedState=b:qn||(b=h.type,c=h.pendingProps,w=r1(fe.current).createElement(b),w[fn]=h,w[Z]=c,ya(w,b,c),Ne(w),h.stateNode=w):h.memoizedState=gw(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return st(h),c===null&&qn&&(w=h.stateNode=mw(h.type,h.pendingProps,fe.current),Ri=h,Di=!0,D=As,Iu(h.type)?(u2=D,As=_o(w.firstChild)):As=D),Zs(c,h,h.pendingProps.children,b),Yr(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&qn&&((D=w=As)&&(w=w6(w,h.type,h.pendingProps,Di),w!==null?(h.stateNode=w,Ri=h,As=_o(w.firstChild),Di=!1,D=!0):D=!1),D||Fn(h)),st(h),D=h.type,P=h.pendingProps,X=c!==null?c.memoizedProps:null,w=P.children,a2(D,P)?w=null:X!==null&&a2(D,X)&&(h.flags|=32),h.memoizedState!==null&&(D=Gm(c,h,Bb,null,null,b),gp._currentValue=D),Yr(c,h),Zs(c,h,w,b),h.child;case 6:return c===null&&qn&&((c=b=As)&&(b=j6(b,h.pendingProps,Di),b!==null?(h.stateNode=b,Ri=h,As=null,c=!0):c=!1),c||Fn(h)),null;case 13:return ar(c,h,b);case 4:return je(h,h.stateNode.containerInfo),w=h.pendingProps,c===null?h.child=Rc(h,null,w,b):Zs(c,h,w,b),h.child;case 11:return Vd(c,h,h.type,h.pendingProps,b);case 7:return Zs(c,h,h.pendingProps,b),h.child;case 8:return Zs(c,h,h.pendingProps.children,b),h.child;case 12:return Zs(c,h,h.pendingProps.children,b),h.child;case 10:return w=h.pendingProps,Xo(h,h.type,w.value),Zs(c,h,w.children,b),h.child;case 9:return D=h.type._context,w=h.pendingProps.children,Ac(h),D=Li(D),w=w(D),h.flags|=1,Zs(c,h,w,b),h.child;case 14:return Hd(c,h,h.type,h.pendingProps,b);case 15:return nr(c,h,h.type,h.pendingProps,b);case 19:return Yd(c,h,b);case 31:return qd(c,h,b);case 22:return sr(c,h,b,h.pendingProps);case 24:return Ac(h),w=Li(ln),c===null?(D=ho(),D===null&&(D=ds,P=jm(),D.pooledCache=P,P.refCount++,P!==null&&(D.pooledCacheLanes|=b),D=P),h.memoizedState={parent:w,cache:D},Rm(h),Xo(h,ln,D)):((c.lanes&b)!==0&&(Dm(c,h),Dc(h,null,null,b),Ud()),D=c.memoizedState,P=h.memoizedState,D.parent!==w?(D={parent:w,cache:w},h.memoizedState=D,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=D),Xo(h,ln,w)):(w=P.cache,Xo(h,ln,w),w!==D.cache&&oh(h,[ln],b,!0))),Zs(c,h,h.pendingProps.children,b),h.child;case 29:throw h.pendingProps}throw Error(n(156,h.tag))}function Pa(c){c.flags|=4}function ql(c,h,b,w,D){if((h=(c.mode&32)!==0)&&(h=!1),h){if(c.flags|=16777216,(D&335544128)===D)if(c.stateNode.complete)c.flags|=8192;else if(Pt())c.flags|=8192;else throw dn=Rd,Nd}else c.flags&=-16777217}function $o(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Sw(h))if(Pt())c.flags|=8192;else throw dn=Rd,Nd}function Lu(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?It():536870912,c.lanes|=h,cr|=h)}function Kd(c,h){if(!qn)switch(c.tailMode){case"hidden":h=c.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?c.tail=null:b.sibling=null;break;case"collapsed":b=c.tail;for(var w=null;b!==null;)b.alternate!==null&&(w=b),b=b.sibling;w===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function ps(c){var h=c.alternate!==null&&c.alternate.child===c.child,b=0,w=0;if(h)for(var D=c.child;D!==null;)b|=D.lanes|D.childLanes,w|=D.subtreeFlags&65011712,w|=D.flags&65011712,D.return=c,D=D.sibling;else for(D=c.child;D!==null;)b|=D.lanes|D.childLanes,w|=D.subtreeFlags,w|=D.flags,D.return=c,D=D.sibling;return c.subtreeFlags|=w,c.childLanes=b,h}function lp(c,h,b){var w=h.pendingProps;switch(Ul(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(h),null;case 1:return ps(h),null;case 3:return b=h.stateNode,w=null,c!==null&&(w=c.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),wr(ln),Qe(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Ec(h)?Pa(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Mm())),ps(h),null;case 26:var D=h.type,P=h.memoizedState;return c===null?(Pa(h),P!==null?(ps(h),$o(h,P)):(ps(h),ql(h,D,null,w,b))):P?P!==c.memoizedState?(Pa(h),ps(h),$o(h,P)):(ps(h),h.flags&=-16777217):(c=c.memoizedProps,c!==w&&Pa(h),ps(h),ql(h,D,c,w,b)),null;case 27:if(Ve(h),b=fe.current,D=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==w&&Pa(h);else{if(!w){if(h.stateNode===null)throw Error(n(166));return ps(h),null}c=me.current,Ec(h)?rh(h):(c=mw(D,w,b),h.stateNode=c,Pa(h))}return ps(h),null;case 5:if(Ve(h),D=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==w&&Pa(h);else{if(!w){if(h.stateNode===null)throw Error(n(166));return ps(h),null}if(P=me.current,Ec(h))rh(h);else{var X=r1(fe.current);switch(P){case 1:P=X.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:P=X.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":P=X.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":P=X.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":P=X.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof w.is=="string"?X.createElement("select",{is:w.is}):X.createElement("select"),w.multiple?P.multiple=!0:w.size&&(P.size=w.size);break;default:P=typeof w.is=="string"?X.createElement(D,{is:w.is}):X.createElement(D)}}P[fn]=h,P[Z]=w;e:for(X=h.child;X!==null;){if(X.tag===5||X.tag===6)P.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===h)break e;for(;X.sibling===null;){if(X.return===null||X.return===h)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}h.stateNode=P;e:switch(ya(P,D,w),D){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Pa(h)}}return ps(h),ql(h,h.type,c===null?null:c.memoizedProps,h.pendingProps,b),null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==w&&Pa(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(n(166));if(c=fe.current,Ec(h)){if(c=h.stateNode,b=h.memoizedProps,w=null,D=Ri,D!==null)switch(D.tag){case 27:case 5:w=D.memoizedProps}c[fn]=h,c=!!(c.nodeValue===b||w!==null&&w.suppressHydrationWarning===!0||sw(c.nodeValue,b)),c||Fn(h,!0)}else c=r1(c).createTextNode(w),c[fn]=h,h.stateNode=c}return ps(h),null;case 31:if(b=h.memoizedState,c===null||c.memoizedState!==null){if(w=Ec(h),b!==null){if(c===null){if(!w)throw Error(n(318));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(557));c[fn]=h}else Tc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ps(h),c=!1}else b=Mm(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=b),c=!0;if(!c)return h.flags&256?($a(h),h):($a(h),null);if((h.flags&128)!==0)throw Error(n(558))}return ps(h),null;case 13:if(w=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(D=Ec(h),w!==null&&w.dehydrated!==null){if(c===null){if(!D)throw Error(n(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[fn]=h}else Tc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ps(h),D=!1}else D=Mm(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=D),D=!0;if(!D)return h.flags&256?($a(h),h):($a(h),null)}return $a(h),(h.flags&128)!==0?(h.lanes=b,h):(b=w!==null,c=c!==null&&c.memoizedState!==null,b&&(w=h.child,D=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(D=w.alternate.memoizedState.cachePool.pool),P=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==D&&(w.flags|=2048)),b!==c&&b&&(h.child.flags|=8192),Lu(h,h.updateQueue),ps(h),null);case 4:return Qe(),c===null&&e2(h.stateNode.containerInfo),ps(h),null;case 10:return wr(h.type),ps(h),null;case 19:if(ee(Ws),w=h.memoizedState,w===null)return ps(h),null;if(D=(h.flags&128)!==0,P=w.rendering,P===null)if(D)Kd(w,!1);else{if(fs!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(P=fh(c),P!==null){for(h.flags|=128,Kd(w,!1),c=P.updateQueue,h.updateQueue=c,Lu(h,c),h.subtreeFlags=0,c=b,b=h.child;b!==null;)ea(b,c),b=b.sibling;return ue(Ws,Ws.current&1|2),qn&&Vo(h,w.treeForkCount),h.child}c=c.sibling}w.tail!==null&&Y()>ur&&(h.flags|=128,D=!0,Kd(w,!1),h.lanes=4194304)}else{if(!D)if(c=fh(P),c!==null){if(h.flags|=128,D=!0,c=c.updateQueue,h.updateQueue=c,Lu(h,c),Kd(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!qn)return ps(h),null}else 2*Y()-w.renderingStartTime>ur&&b!==536870912&&(h.flags|=128,D=!0,Kd(w,!1),h.lanes=4194304);w.isBackwards?(P.sibling=h.child,h.child=P):(c=w.last,c!==null?c.sibling=P:h.child=P,w.last=P)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=Y(),c.sibling=null,b=Ws.current,ue(Ws,D?b&1|2:b&1),qn&&Vo(h,w.treeForkCount),c):(ps(h),null);case 22:case 23:return $a(h),na(),w=h.memoizedState!==null,c!==null?c.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(b&536870912)!==0&&(h.flags&128)===0&&(ps(h),h.subtreeFlags&6&&(h.flags|=8192)):ps(h),b=h.updateQueue,b!==null&&Lu(h,b.retryQueue),b=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==b&&(h.flags|=2048),c!==null&&ee(Ol),null;case 24:return b=null,c!==null&&(b=c.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),wr(ln),ps(h),null;case 25:return null;case 30:return null}throw Error(n(156,h.tag))}function Ah(c,h){switch(Ul(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return wr(ln),Qe(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Ve(h),null;case 31:if(h.memoizedState!==null){if($a(h),h.alternate===null)throw Error(n(340));Tc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 13:if($a(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(n(340));Tc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return ee(Ws),null;case 4:return Qe(),null;case 10:return wr(h.type),null;case 22:case 23:return $a(h),na(),c!==null&&ee(Ol),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return wr(ln),null;case 25:return null;default:return null}}function Oc(c,h){switch(Ul(h),h.tag){case 3:wr(ln),Qe();break;case 26:case 27:case 5:Ve(h);break;case 4:Qe();break;case 31:h.memoizedState!==null&&$a(h);break;case 13:$a(h);break;case 19:ee(Ws);break;case 10:wr(h.type);break;case 22:case 23:$a(h),na(),c!==null&&ee(Ol);break;case 24:wr(ln)}}function yo(c,h){try{var b=h.updateQueue,w=b!==null?b.lastEffect:null;if(w!==null){var D=w.next;b=D;do{if((b.tag&c)===c){w=void 0;var P=b.create,X=b.inst;w=P(),X.destroy=w}b=b.next}while(b!==D)}}catch(se){ws(h,h.return,se)}}function Ar(c,h,b){try{var w=h.updateQueue,D=w!==null?w.lastEffect:null;if(D!==null){var P=D.next;w=P;do{if((w.tag&c)===c){var X=w.inst,se=X.destroy;if(se!==void 0){X.destroy=void 0,D=h;var Se=b,Xe=se;try{Xe()}catch(mt){ws(D,Se,mt)}}}w=w.next}while(w!==P)}}catch(mt){ws(h,h.return,mt)}}function Xl(c){var h=c.updateQueue;if(h!==null){var b=c.stateNode;try{Vi(h,b)}catch(w){ws(c,c.return,w)}}}function cp(c,h,b){b.props=qi(c.type,c.memoizedProps),b.state=c.memoizedState;try{b.componentWillUnmount()}catch(w){ws(c,h,w)}}function bo(c,h){try{var b=c.ref;if(b!==null){switch(c.tag){case 26:case 27:case 5:var w=c.stateNode;break;case 30:w=c.stateNode;break;default:w=c.stateNode}typeof b=="function"?c.refCleanup=b(w):b.current=w}}catch(D){ws(c,h,D)}}function rr(c,h){var b=c.ref,w=c.refCleanup;if(b!==null)if(typeof w=="function")try{w()}catch(D){ws(c,h,D)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(D){ws(c,h,D)}else b.current=null}function or(c){var h=c.type,b=c.memoizedProps,w=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":b.autoFocus&&w.focus();break e;case"img":b.src?w.src=b.src:b.srcSet&&(w.srcset=b.srcSet)}}catch(D){ws(c,c.return,D)}}function Cr(c,h,b){try{var w=c.stateNode;v6(w,c.type,b,h),w[Z]=h}catch(D){ws(c,c.return,D)}}function mi(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Iu(c.type)||c.tag===4}function Mo(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||mi(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Iu(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Nn(c,h,b){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(c,h):(h=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,h.appendChild(c),b=b._reactRootContainer,b!=null||h.onclick!==null||(h.onclick=Ii));else if(w!==4&&(w===27&&Iu(c.type)&&(b=c.stateNode,h=null),c=c.child,c!==null))for(Nn(c,h,b),c=c.sibling;c!==null;)Nn(c,h,b),c=c.sibling}function rs(c,h,b){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?b.insertBefore(c,h):b.appendChild(c);else if(w!==4&&(w===27&&Iu(c.type)&&(b=c.stateNode),c=c.child,c!==null))for(rs(c,h,b),c=c.sibling;c!==null;)rs(c,h,b),c=c.sibling}function ai(c){var h=c.stateNode,b=c.memoizedProps;try{for(var w=c.type,D=h.attributes;D.length;)h.removeAttributeNode(D[0]);ya(h,w,b),h[fn]=c,h[Z]=b}catch(P){ws(c,c.return,P)}}var Nr=!1,Gs=!1,el=!1,Jd=typeof WeakSet=="function"?WeakSet:Set,Ks=null;function Uu(c,h){if(c=c.containerInfo,s2=h1,c=Kf(c),hu(c)){if("selectionStart"in c)var b={start:c.selectionStart,end:c.selectionEnd};else e:{b=(b=c.ownerDocument)&&b.defaultView||window;var w=b.getSelection&&b.getSelection();if(w&&w.rangeCount!==0){b=w.anchorNode;var D=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{b.nodeType,P.nodeType}catch{b=null;break e}var X=0,se=-1,Se=-1,Xe=0,mt=0,bt=c,Je=null;t:for(;;){for(var rt;bt!==b||D!==0&&bt.nodeType!==3||(se=X+D),bt!==P||w!==0&&bt.nodeType!==3||(Se=X+w),bt.nodeType===3&&(X+=bt.nodeValue.length),(rt=bt.firstChild)!==null;)Je=bt,bt=rt;for(;;){if(bt===c)break t;if(Je===b&&++Xe===D&&(se=X),Je===P&&++mt===w&&(Se=X),(rt=bt.nextSibling)!==null)break;bt=Je,Je=bt.parentNode}bt=rt}b=se===-1||Se===-1?null:{start:se,end:Se}}else b=null}b=b||{start:0,end:0}}else b=null;for(i2={focusedElem:c,selectionRange:b},h1=!1,Ks=h;Ks!==null;)if(h=Ks,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Ks=c;else for(;Ks!==null;){switch(h=Ks,P=h.alternate,c=h.flags,h.tag){case 0:if((c&4)!==0&&(c=h.updateQueue,c=c!==null?c.events:null,c!==null))for(b=0;b<c.length;b++)D=c[b],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&P!==null){c=void 0,b=h,D=P.memoizedProps,P=P.memoizedState,w=b.stateNode;try{var en=qi(b.type,D);c=w.getSnapshotBeforeUpdate(en,P),w.__reactInternalSnapshotBeforeUpdate=c}catch(pn){ws(b,b.return,pn)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,b=c.nodeType,b===9)o2(c);else if(b===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":o2(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(n(163))}if(c=h.sibling,c!==null){c.return=h.return,Ks=c;break}Ks=h.return}}function $g(c,h,b){var w=b.flags;switch(b.tag){case 0:case 11:case 15:tl(c,b),w&4&&yo(5,b);break;case 1:if(tl(c,b),w&4)if(c=b.stateNode,h===null)try{c.componentDidMount()}catch(X){ws(b,b.return,X)}else{var D=qi(b.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(D,h,c.__reactInternalSnapshotBeforeUpdate)}catch(X){ws(b,b.return,X)}}w&64&&Xl(b),w&512&&bo(b,b.return);break;case 3:if(tl(c,b),w&64&&(c=b.updateQueue,c!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=b.child.stateNode;break;case 1:h=b.child.stateNode}try{Vi(c,h)}catch(X){ws(b,b.return,X)}}break;case 27:h===null&&w&4&&ai(b);case 26:case 5:tl(c,b),h===null&&w&4&&or(b),w&512&&bo(b,b.return);break;case 12:tl(c,b);break;case 31:tl(c,b),w&4&&Nh(c,b);break;case 13:tl(c,b),w&4&&up(c,b),w&64&&(c=b.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(b=r6.bind(null,b),E6(c,b))));break;case 22:if(w=b.memoizedState!==null||Nr,!w){h=h!==null&&h.memoizedState!==null||Gs,D=Nr;var P=Gs;Nr=w,(Gs=h)&&!P?us(c,b,(b.subtreeFlags&8772)!==0):tl(c,b),Nr=D,Gs=P}break;case 30:break;default:tl(c,b)}}function Ch(c){var h=c.alternate;h!==null&&(c.alternate=null,Ch(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&wt(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Qn=null,pi=!1;function ia(c,h,b){for(b=b.child;b!==null;)Wl(c,h,b),b=b.sibling}function Wl(c,h,b){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(ke,b)}catch{}switch(b.tag){case 26:Gs||rr(b,h),ia(c,h,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Gs||rr(b,h);var w=Qn,D=pi;Iu(b.type)&&(Qn=b.stateNode,pi=!1),ia(c,h,b),mp(b.stateNode),Qn=w,pi=D;break;case 5:Gs||rr(b,h);case 6:if(w=Qn,D=pi,Qn=null,ia(c,h,b),Qn=w,pi=D,Qn!==null)if(pi)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(b.stateNode)}catch(P){ws(b,h,P)}else try{Qn.removeChild(b.stateNode)}catch(P){ws(b,h,P)}break;case 18:Qn!==null&&(pi?(c=Qn,cw(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,b.stateNode),Bh(c)):cw(Qn,b.stateNode));break;case 4:w=Qn,D=pi,Qn=b.stateNode.containerInfo,pi=!0,ia(c,h,b),Qn=w,pi=D;break;case 0:case 11:case 14:case 15:Ar(2,b,h),Gs||Ar(4,b,h),ia(c,h,b);break;case 1:Gs||(rr(b,h),w=b.stateNode,typeof w.componentWillUnmount=="function"&&cp(b,h,w)),ia(c,h,b);break;case 21:ia(c,h,b);break;case 22:Gs=(w=Gs)||b.memoizedState!==null,ia(c,h,b),Gs=w;break;default:ia(c,h,b)}}function Nh(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{Bh(c)}catch(b){ws(h,h.return,b)}}}function up(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Bh(c)}catch(b){ws(h,h.return,b)}}function e1(c){switch(c.tag){case 31:case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new Jd),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new Jd),h;default:throw Error(n(435,c.tag))}}function ri(c,h){var b=e1(c);h.forEach(function(w){if(!b.has(w)){b.add(w);var D=o6.bind(null,c,w);w.then(D,D)}})}function aa(c,h){var b=h.deletions;if(b!==null)for(var w=0;w<b.length;w++){var D=b[w],P=c,X=h,se=X;e:for(;se!==null;){switch(se.tag){case 27:if(Iu(se.type)){Qn=se.stateNode,pi=!1;break e}break;case 5:Qn=se.stateNode,pi=!1;break e;case 3:case 4:Qn=se.stateNode.containerInfo,pi=!0;break e}se=se.return}if(Qn===null)throw Error(n(160));Wl(P,X,D),Qn=null,pi=!1,P=D.alternate,P!==null&&(P.return=null),D.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Yl(h,c),h=h.sibling}var Oa=null;function Yl(c,h){var b=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:aa(h,c),Js(c),w&4&&(Ar(3,c,c.return),yo(3,c),Ar(5,c,c.return));break;case 1:aa(h,c),Js(c),w&512&&(Gs||b===null||rr(b,b.return)),w&64&&Nr&&(c=c.updateQueue,c!==null&&(w=c.callbacks,w!==null&&(b=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=b===null?w:b.concat(w))));break;case 26:var D=Oa;if(aa(h,c),Js(c),w&512&&(Gs||b===null||rr(b,b.return)),w&4){var P=b!==null?b.memoizedState:null;if(w=c.memoizedState,b===null)if(w===null)if(c.stateNode===null){e:{w=c.type,b=c.memoizedProps,D=D.ownerDocument||D;t:switch(w){case"title":P=D.getElementsByTagName("title")[0],(!P||P[Ct]||P[fn]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=D.createElement(w),D.head.insertBefore(P,D.querySelector("head > title"))),ya(P,w,b),P[fn]=c,Ne(P),w=P;break e;case"link":var X=bw("link","href",D).get(w+(b.href||""));if(X){for(var se=0;se<X.length;se++)if(P=X[se],P.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&P.getAttribute("rel")===(b.rel==null?null:b.rel)&&P.getAttribute("title")===(b.title==null?null:b.title)&&P.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){X.splice(se,1);break t}}P=D.createElement(w),ya(P,w,b),D.head.appendChild(P);break;case"meta":if(X=bw("meta","content",D).get(w+(b.content||""))){for(se=0;se<X.length;se++)if(P=X[se],P.getAttribute("content")===(b.content==null?null:""+b.content)&&P.getAttribute("name")===(b.name==null?null:b.name)&&P.getAttribute("property")===(b.property==null?null:b.property)&&P.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&P.getAttribute("charset")===(b.charSet==null?null:b.charSet)){X.splice(se,1);break t}}P=D.createElement(w),ya(P,w,b),D.head.appendChild(P);break;default:throw Error(n(468,w))}P[fn]=c,Ne(P),w=P}c.stateNode=w}else Mw(D,c.type,c.stateNode);else c.stateNode=yw(D,w,c.memoizedProps);else P!==w?(P===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):P.count--,w===null?Mw(D,c.type,c.stateNode):yw(D,w,c.memoizedProps)):w===null&&c.stateNode!==null&&Cr(c,c.memoizedProps,b.memoizedProps)}break;case 27:aa(h,c),Js(c),w&512&&(Gs||b===null||rr(b,b.return)),b!==null&&w&4&&Cr(c,c.memoizedProps,b.memoizedProps);break;case 5:if(aa(h,c),Js(c),w&512&&(Gs||b===null||rr(b,b.return)),c.flags&32){D=c.stateNode;try{ca(D,"")}catch(en){ws(c,c.return,en)}}w&4&&c.stateNode!=null&&(D=c.memoizedProps,Cr(c,D,b!==null?b.memoizedProps:D)),w&1024&&(el=!0);break;case 6:if(aa(h,c),Js(c),w&4){if(c.stateNode===null)throw Error(n(162));w=c.memoizedProps,b=c.stateNode;try{b.nodeValue=w}catch(en){ws(c,c.return,en)}}break;case 3:if(c1=null,D=Oa,Oa=o1(h.containerInfo),aa(h,c),Oa=D,Js(c),w&4&&b!==null&&b.memoizedState.isDehydrated)try{Bh(h.containerInfo)}catch(en){ws(c,c.return,en)}el&&(el=!1,t1(c));break;case 4:w=Oa,Oa=o1(c.stateNode.containerInfo),aa(h,c),Js(c),Oa=w;break;case 12:aa(h,c),Js(c);break;case 31:aa(h,c),Js(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,ri(c,w)));break;case 13:aa(h,c),Js(c),c.child.flags&8192&&c.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(il=Y()),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,ri(c,w)));break;case 22:D=c.memoizedState!==null;var Se=b!==null&&b.memoizedState!==null,Xe=Nr,mt=Gs;if(Nr=Xe||D,Gs=mt||Se,aa(h,c),Gs=mt,Nr=Xe,Js(c),w&8192)e:for(h=c.stateNode,h._visibility=D?h._visibility&-2:h._visibility|1,D&&(b===null||Se||Nr||Gs||zc(c)),b=null,h=c;;){if(h.tag===5||h.tag===26){if(b===null){Se=b=h;try{if(P=Se.stateNode,D)X=P.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{se=Se.stateNode;var bt=Se.memoizedProps.style,Je=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;se.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(en){ws(Se,Se.return,en)}}}else if(h.tag===6){if(b===null){Se=h;try{Se.stateNode.nodeValue=D?"":Se.memoizedProps}catch(en){ws(Se,Se.return,en)}}}else if(h.tag===18){if(b===null){Se=h;try{var rt=Se.stateNode;D?uw(rt,!0):uw(Se.stateNode,!1)}catch(en){ws(Se,Se.return,en)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;b===h&&(b=null),h=h.return}b===h&&(b=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=c.updateQueue,w!==null&&(b=w.retryQueue,b!==null&&(w.retryQueue=null,ri(c,b))));break;case 19:aa(h,c),Js(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,ri(c,w)));break;case 30:break;case 21:break;default:aa(h,c),Js(c)}}function Js(c){var h=c.flags;if(h&2){try{for(var b,w=c.return;w!==null;){if(mi(w)){b=w;break}w=w.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var D=b.stateNode,P=Mo(c);rs(c,P,D);break;case 5:var X=b.stateNode;b.flags&32&&(ca(X,""),b.flags&=-33);var se=Mo(c);rs(c,se,X);break;case 3:case 4:var Se=b.stateNode.containerInfo,Xe=Mo(c);Nn(c,Xe,Se);break;default:throw Error(n(161))}}catch(mt){ws(c,c.return,mt)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function t1(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;t1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function tl(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)$g(c,h.alternate,h),h=h.sibling}function zc(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Ar(4,h,h.return),zc(h);break;case 1:rr(h,h.return);var b=h.stateNode;typeof b.componentWillUnmount=="function"&&cp(h,h.return,b),zc(h);break;case 27:mp(h.stateNode);case 26:case 5:rr(h,h.return),zc(h);break;case 22:h.memoizedState===null&&zc(h);break;case 30:zc(h);break;default:zc(h)}c=c.sibling}}function us(c,h,b){for(b=b&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,D=c,P=h,X=P.flags;switch(P.tag){case 0:case 11:case 15:us(D,P,b),yo(4,P);break;case 1:if(us(D,P,b),w=P,D=w.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Xe){ws(w,w.return,Xe)}if(w=P,D=w.updateQueue,D!==null){var se=w.stateNode;try{var Se=D.shared.hiddenCallbacks;if(Se!==null)for(D.shared.hiddenCallbacks=null,D=0;D<Se.length;D++)po(Se[D],se)}catch(Xe){ws(w,w.return,Xe)}}b&&X&64&&Xl(P),bo(P,P.return);break;case 27:ai(P);case 26:case 5:us(D,P,b),b&&w===null&&X&4&&or(P),bo(P,P.return);break;case 12:us(D,P,b);break;case 31:us(D,P,b),b&&X&4&&Nh(D,P);break;case 13:us(D,P,b),b&&X&4&&up(D,P);break;case 22:P.memoizedState===null&&us(D,P,b),bo(P,P.return);break;case 30:break;default:us(D,P,b)}h=h.sibling}}function Rh(c,h){var b=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==b&&(c!=null&&c.refCount++,b!=null&&Fi(b))}function nl(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Fi(c))}function _i(c,h,b,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Vs(c,h,b,w),h=h.sibling}function Vs(c,h,b,w){var D=h.flags;switch(h.tag){case 0:case 11:case 15:_i(c,h,b,w),D&2048&&yo(9,h);break;case 1:_i(c,h,b,w);break;case 3:_i(c,h,b,w),D&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Fi(c)));break;case 12:if(D&2048){_i(c,h,b,w),c=h.stateNode;try{var P=h.memoizedProps,X=P.id,se=P.onPostCommit;typeof se=="function"&&se(X,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Se){ws(h,h.return,Se)}}else _i(c,h,b,w);break;case 31:_i(c,h,b,w);break;case 13:_i(c,h,b,w);break;case 23:break;case 22:P=h.stateNode,X=h.alternate,h.memoizedState!==null?P._visibility&2?_i(c,h,b,w):Pu(c,h):P._visibility&2?_i(c,h,b,w):(P._visibility|=2,Zl(c,h,b,w,(h.subtreeFlags&10256)!==0||!1)),D&2048&&Rh(X,h);break;case 24:_i(c,h,b,w),D&2048&&nl(h.alternate,h);break;default:_i(c,h,b,w)}}function Zl(c,h,b,w,D){for(D=D&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var P=c,X=h,se=b,Se=w,Xe=X.flags;switch(X.tag){case 0:case 11:case 15:Zl(P,X,se,Se,D),yo(8,X);break;case 23:break;case 22:var mt=X.stateNode;X.memoizedState!==null?mt._visibility&2?Zl(P,X,se,Se,D):Pu(P,X):(mt._visibility|=2,Zl(P,X,se,Se,D)),D&&Xe&2048&&Rh(X.alternate,X);break;case 24:Zl(P,X,se,Se,D),D&&Xe&2048&&nl(X.alternate,X);break;default:Zl(P,X,se,Se,D)}h=h.sibling}}function Pu(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var b=c,w=h,D=w.flags;switch(w.tag){case 22:Pu(b,w),D&2048&&Rh(w.alternate,w);break;case 24:Pu(b,w),D&2048&&nl(w.alternate,w);break;default:Pu(b,w)}h=h.sibling}}var Qs=8192;function Gc(c,h,b){if(c.subtreeFlags&Qs)for(c=c.child;c!==null;)oi(c,h,b),c=c.sibling}function oi(c,h,b){switch(c.tag){case 26:Gc(c,h,b),c.flags&Qs&&c.memoizedState!==null&&G6(b,Oa,c.memoizedState,c.memoizedProps);break;case 5:Gc(c,h,b);break;case 3:case 4:var w=Oa;Oa=o1(c.stateNode.containerInfo),Gc(c,h,b),Oa=w;break;case 22:c.memoizedState===null&&(w=c.alternate,w!==null&&w.memoizedState!==null?(w=Qs,Qs=16777216,Gc(c,h,b),Qs=w):Gc(c,h,b));break;default:Gc(c,h,b)}}function za(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function ga(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var w=h[b];Ks=w,Qd(w,c)}za(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Ic(c),c=c.sibling}function Ic(c){switch(c.tag){case 0:case 11:case 15:ga(c),c.flags&2048&&Ar(9,c,c.return);break;case 3:ga(c);break;case 12:ga(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,Dh(c)):ga(c);break;default:ga(c)}}function Dh(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var w=h[b];Ks=w,Qd(w,c)}za(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Ar(8,h,h.return),Dh(h);break;case 22:b=h.stateNode,b._visibility&2&&(b._visibility&=-3,Dh(h));break;default:Dh(h)}c=c.sibling}}function Qd(c,h){for(;Ks!==null;){var b=Ks;switch(b.tag){case 0:case 11:case 15:Ar(8,b,h);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var w=b.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Fi(b.memoizedState.cache)}if(w=b.child,w!==null)w.return=b,Ks=w;else e:for(b=c;Ks!==null;){w=Ks;var D=w.sibling,P=w.return;if(Ch(w),w===b){Ks=null;break e}if(D!==null){D.return=P,Ks=D;break e}Ks=P}}}var Lh={getCacheForType:function(c){var h=Li(ln),b=h.data.get(c);return b===void 0&&(b=c(),h.data.set(c,b)),b},cacheSignal:function(){return Li(ln).controller.signal}},Uh=typeof WeakMap=="function"?WeakMap:Map,Yn=0,ds=null,Rn=null,Vn=0,cn=0,Bn=null,jn=!1,zn=!1,ys=!1,li=0,fs=0,lr=0,sl=0,Kr=0,Zn=0,cr=0,Jr=null,ra=null,Ga=!1,il=0,Ou=0,ur=1/0,zu=null,So=null,Hs=0,Qr=null,dr=null,Rr=0,al=0,kc=null,Ph=null,Bc=0,Fc=null;function va(){return(Yn&2)!==0&&Vn!==0?Vn&-Vn:B.T!==null?Kb():Ts()}function p(){if(Zn===0)if((Vn&536870912)===0||qn){var c=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),Zn=c}else Zn=536870912;return c=Si.current,c!==null&&(c.flags|=32),Zn}function y(c,h,b){(c===ds&&(cn===2||cn===9)||c.cancelPendingCommit!==null)&&(Oe(c,0),k(c,Vn,Zn,!1)),An(c,b),((Yn&2)===0||c!==ds)&&(c===ds&&((Yn&2)===0&&(sl|=b),fs===4&&k(c,Vn,Zn,!1)),Kl(c))}function T(c,h,b){if((Yn&6)!==0)throw Error(n(327));var w=!b&&(h&127)===0&&(h&c.expiredLanes)===0||Tt(c,h),D=w?Vc(c,h):Ia(c,h,!0),P=w;do{if(D===0){zn&&!w&&k(c,h,0,!1);break}else{if(b=c.current.alternate,P&&!G(b)){D=Ia(c,h,!1),P=!1;continue}if(D===2){if(P=h,c.errorRecoveryDisabledLanes&P)var X=0;else X=c.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){h=X;e:{var se=c;D=Jr;var Se=se.current.memoizedState.isDehydrated;if(Se&&(Oe(se,X).flags|=256),X=Ia(se,X,!1),X!==2){if(ys&&!Se){se.errorRecoveryDisabledLanes|=P,sl|=P,D=4;break e}P=ra,ra=D,P!==null&&(ra===null?ra=P:ra.push.apply(ra,P))}D=X}if(P=!1,D!==2)continue}}if(D===1){Oe(c,0),k(c,h,0,!0);break}e:{switch(w=c,P=D,P){case 0:case 1:throw Error(n(345));case 4:if((h&4194048)!==h)break;case 6:k(w,h,Zn,!jn);break e;case 2:ra=null;break;case 3:case 5:break;default:throw Error(n(329))}if((h&62914560)===h&&(D=il+300-Y(),10<D)){if(k(w,h,Zn,!jn),qe(w,0,!0)!==0)break e;Rr=h,w.timeoutHandle=ow(L.bind(null,w,b,ra,zu,Ga,h,Zn,sl,cr,jn,P,"Throttled",-0,0),D);break e}L(w,b,ra,zu,Ga,h,Zn,sl,cr,jn,P,null,-0,0)}}break}while(!0);Kl(c)}function L(c,h,b,w,D,P,X,se,Se,Xe,mt,bt,Je,rt){if(c.timeoutHandle=-1,bt=h.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},oi(h,P,bt);var en=(P&62914560)===P?il-Y():(P&4194048)===P?Ou-Y():0;if(en=I6(bt,en),en!==null){Rr=P,c.cancelPendingCommit=en(yn.bind(null,c,h,P,b,w,D,X,se,Se,mt,bt,null,Je,rt)),k(c,P,X,!Xe);return}}yn(c,h,P,b,w,D,X,se,Se)}function G(c){for(var h=c;;){var b=h.tag;if((b===0||b===11||b===15)&&h.flags&16384&&(b=h.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var w=0;w<b.length;w++){var D=b[w],P=D.getSnapshot;D=D.value;try{if(!Os(P(),D))return!1}catch{return!1}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function k(c,h,b,w){h&=~Kr,h&=~sl,c.suspendedLanes|=h,c.pingedLanes&=~h,w&&(c.warmLanes|=h),w=c.expirationTimes;for(var D=h;0<D;){var P=31-he(D),X=1<<P;w[P]=-1,D&=~X}b!==0&&Ss(c,b,h)}function oe(){return(Yn&6)===0?(dp(0),!1):!0}function Me(){if(Rn!==null){if(cn===0)var c=Rn.return;else c=Rn,ta=qo=null,Bm(c),Gl=null,Il=0,c=Rn;for(;c!==null;)Oc(c.alternate,c),c=c.return;Rn=null}}function Oe(c,h){var b=c.timeoutHandle;b!==-1&&(c.timeoutHandle=-1,M6(b)),b=c.cancelPendingCommit,b!==null&&(c.cancelPendingCommit=null,b()),Rr=0,Me(),ds=c,Rn=b=lo(c.current,null),Vn=h,cn=0,Bn=null,jn=!1,zn=Tt(c,h),ys=!1,cr=Zn=Kr=sl=lr=fs=0,ra=Jr=null,Ga=!1,(h&8)!==0&&(h|=h&32);var w=c.entangledLanes;if(w!==0)for(c=c.entanglements,w&=h;0<w;){var D=31-he(w),P=1<<D;h|=c[D],w&=~P}return li=h,Rl(),b}function xt(c,h){vn=null,B.H=kd,h===zl||h===Xr?(h=ch(),cn=3):h===Nd?(h=ch(),cn=4):cn=h===Eh?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Bn=h,Rn===null&&(fs=1,jh(c,Na(h,c.current)))}function Pt(){var c=Si.current;return c===null?!0:(Vn&4194048)===Vn?jr===null:(Vn&62914560)===Vn||(Vn&536870912)!==0?c===jr:!1}function Vt(){var c=B.H;return B.H=kd,c===null?kd:c}function Wt(){var c=B.A;return B.A=Lh,c}function _n(){fs=4,jn||(Vn&4194048)!==Vn&&Si.current!==null||(zn=!0),(lr&134217727)===0&&(sl&134217727)===0||ds===null||k(ds,Vn,Zn,!1)}function Ia(c,h,b){var w=Yn;Yn|=2;var D=Vt(),P=Wt();(ds!==c||Vn!==h)&&(zu=null,Oe(c,h)),h=!1;var X=fs;e:do try{if(cn!==0&&Rn!==null){var se=Rn,Se=Bn;switch(cn){case 8:Me(),X=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(h=!0);var Xe=cn;if(cn=0,Bn=null,Rt(c,se,Se,Xe),b&&zn){X=0;break e}break;default:Xe=cn,cn=0,Bn=null,Rt(c,se,Se,Xe)}}$d(),X=fs;break}catch(mt){xt(c,mt)}while(!0);return h&&c.shellSuspendCounter++,ta=qo=null,Yn=w,B.H=D,B.A=P,Rn===null&&(ds=null,Vn=0,Rl()),X}function $d(){for(;Rn!==null;)De(Rn)}function Vc(c,h){var b=Yn;Yn|=2;var w=Vt(),D=Wt();ds!==c||Vn!==h?(zu=null,ur=Y()+500,Oe(c,h)):zn=Tt(c,h);e:do try{if(cn!==0&&Rn!==null){h=Rn;var P=Bn;t:switch(cn){case 1:cn=0,Bn=null,Rt(c,h,P,1);break;case 2:case 9:if(Eg(P)){cn=0,Bn=null,et(h);break}h=function(){cn!==2&&cn!==9||ds!==c||(cn=7),Kl(c)},P.then(h,h);break e;case 3:cn=7;break e;case 4:cn=5;break e;case 7:Eg(P)?(cn=0,Bn=null,et(h)):(cn=0,Bn=null,Rt(c,h,P,7));break;case 5:var X=null;switch(Rn.tag){case 26:X=Rn.memoizedState;case 5:case 27:var se=Rn;if(X?Sw(X):se.stateNode.complete){cn=0,Bn=null;var Se=se.sibling;if(Se!==null)Rn=Se;else{var Xe=se.return;Xe!==null?(Rn=Xe,on(Xe)):Rn=null}break t}}cn=0,Bn=null,Rt(c,h,P,5);break;case 6:cn=0,Bn=null,Rt(c,h,P,6);break;case 8:Me(),fs=6;break e;default:throw Error(n(462))}}Ze();break}catch(mt){xt(c,mt)}while(!0);return ta=qo=null,B.H=w,B.A=D,Yn=b,Rn!==null?0:(ds=null,Vn=0,Rl(),fs)}function Ze(){for(;Rn!==null&&!ct();)De(Rn)}function De(c){var h=Th(c.alternate,c,li);c.memoizedProps=c.pendingProps,h===null?on(c):Rn=h}function et(c){var h=c,b=h.alternate;switch(h.tag){case 15:case 0:h=sa(b,h,h.pendingProps,h.type,void 0,Vn);break;case 11:h=sa(b,h,h.pendingProps,h.type.render,h.ref,Vn);break;case 5:Bm(h);default:Oc(b,h),h=Rn=ea(h,li),h=Th(b,h,li)}c.memoizedProps=c.pendingProps,h===null?on(c):Rn=h}function Rt(c,h,b,w){ta=qo=null,Bm(h),Gl=null,Il=0;var D=h.return;try{if(tr(c,D,h,b,Vn)){fs=1,jh(c,Na(b,c.current)),Rn=null;return}}catch(P){if(D!==null)throw Rn=D,P;fs=1,jh(c,Na(b,c.current)),Rn=null;return}h.flags&32768?(qn||w===1?c=!0:zn||(Vn&536870912)!==0?c=!1:(jn=c=!0,(w===2||w===9||w===3||w===6)&&(w=Si.current,w!==null&&w.tag===13&&(w.flags|=16384))),Cs(h,c)):on(h)}function on(c){var h=c;do{if((h.flags&32768)!==0){Cs(h,jn);return}c=h.return;var b=lp(h.alternate,h,li);if(b!==null){Rn=b;return}if(h=h.sibling,h!==null){Rn=h;return}Rn=h=c}while(h!==null);fs===0&&(fs=5)}function Cs(c,h){do{var b=Ah(c.alternate,c);if(b!==null){b.flags&=32767,Rn=b;return}if(b=c.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!h&&(c=c.sibling,c!==null)){Rn=c;return}Rn=c=b}while(c!==null);fs=6,Rn=null}function yn(c,h,b,w,D,P,X,se,Se){c.cancelPendingCommit=null;do Oh();while(Hs!==0);if((Yn&6)!==0)throw Error(n(327));if(h!==null){if(h===c.current)throw Error(n(177));if(P=h.lanes|h.childLanes,P|=th,In(c,b,P,X,se,Se),c===ds&&(Rn=ds=null,Vn=0),dr=h,Qr=c,Rr=b,al=P,kc=D,Ph=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,l6(Ae,function(){return H3(),null})):(c.callbackNode=null,c.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=B.T,B.T=null,D=J.p,J.p=2,X=Yn,Yn|=4;try{Uu(c,h,b)}finally{Yn=X,J.p=D,B.T=w}}Hs=1,$n(),wi(),es()}}function $n(){if(Hs===1){Hs=0;var c=Qr,h=dr,b=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||b){b=B.T,B.T=null;var w=J.p;J.p=2;var D=Yn;Yn|=4;try{Yl(h,c);var P=i2,X=Kf(c.containerInfo),se=P.focusedElem,Se=P.selectionRange;if(X!==se&&se&&se.ownerDocument&&Zf(se.ownerDocument.documentElement,se)){if(Se!==null&&hu(se)){var Xe=Se.start,mt=Se.end;if(mt===void 0&&(mt=Xe),"selectionStart"in se)se.selectionStart=Xe,se.selectionEnd=Math.min(mt,se.value.length);else{var bt=se.ownerDocument||document,Je=bt&&bt.defaultView||window;if(Je.getSelection){var rt=Je.getSelection(),en=se.textContent.length,pn=Math.min(Se.start,en),Rs=Se.end===void 0?pn:Math.min(Se.end,en);!rt.extend&&pn>Rs&&(X=Rs,Rs=pn,pn=X);var Le=xm(se,pn),Te=xm(se,Rs);if(Le&&Te&&(rt.rangeCount!==1||rt.anchorNode!==Le.node||rt.anchorOffset!==Le.offset||rt.focusNode!==Te.node||rt.focusOffset!==Te.offset)){var He=bt.createRange();He.setStart(Le.node,Le.offset),rt.removeAllRanges(),pn>Rs?(rt.addRange(He),rt.extend(Te.node,Te.offset)):(He.setEnd(Te.node,Te.offset),rt.addRange(He))}}}}for(bt=[],rt=se;rt=rt.parentNode;)rt.nodeType===1&&bt.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<bt.length;se++){var vt=bt[se];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}h1=!!s2,i2=s2=null}finally{Yn=D,J.p=w,B.T=b}}c.current=h,Hs=2}}function wi(){if(Hs===2){Hs=0;var c=Qr,h=dr,b=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||b){b=B.T,B.T=null;var w=J.p;J.p=2;var D=Yn;Yn|=4;try{$g(c,h.alternate,h)}finally{Yn=D,J.p=w,B.T=b}}Hs=3}}function es(){if(Hs===4||Hs===3){Hs=0,te();var c=Qr,h=dr,b=Rr,w=Ph;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Hs=5:(Hs=0,dr=Qr=null,rl(c,c.pendingLanes));var D=c.pendingLanes;if(D===0&&(So=null),Fs(b),h=h.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(ke,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=B.T,D=J.p,J.p=2,B.T=null;try{for(var P=c.onRecoverableError,X=0;X<w.length;X++){var se=w[X];P(se.value,{componentStack:se.stack})}}finally{B.T=h,J.p=D}}(Rr&3)!==0&&Oh(),Kl(c),D=c.pendingLanes,(b&261930)!==0&&(D&42)!==0?c===Fc?Bc++:(Bc=0,Fc=c):Bc=0,dp(0)}}function rl(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Fi(h)))}function Oh(){return $n(),wi(),es(),H3()}function H3(){if(Hs!==5)return!1;var c=Qr,h=al;al=0;var b=Fs(Rr),w=B.T,D=J.p;try{J.p=32>b?32:b,B.T=null,b=kc,kc=null;var P=Qr,X=Rr;if(Hs=0,dr=Qr=null,Rr=0,(Yn&6)!==0)throw Error(n(331));var se=Yn;if(Yn|=4,Ic(P.current),Vs(P,P.current,X,b),Yn=se,dp(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(ke,P)}catch{}return!0}finally{J.p=D,B.T=w,rl(c,h)}}function q3(c,h,b){h=Na(b,h),h=op(c.stateNode,h,2),c=Zo(c,h,2),c!==null&&(An(c,2),Kl(c))}function ws(c,h,b){if(c.tag===3)q3(c,c,b);else for(;h!==null;){if(h.tag===3){q3(h,c,b);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(So===null||!So.has(w))){c=Na(b,c),b=Cu(2),w=Zo(h,b,2),w!==null&&(Ua(b,w,h,c),An(w,2),Kl(w));break}}h=h.return}}function Wb(c,h,b){var w=c.pingCache;if(w===null){w=c.pingCache=new Uh;var D=new Set;w.set(h,D)}else D=w.get(h),D===void 0&&(D=new Set,w.set(h,D));D.has(b)||(ys=!0,D.add(b),c=a6.bind(null,c,h,b),h.then(c,c))}function a6(c,h,b){var w=c.pingCache;w!==null&&w.delete(h),c.pingedLanes|=c.suspendedLanes&b,c.warmLanes&=~b,ds===c&&(Vn&b)===b&&(fs===4||fs===3&&(Vn&62914560)===Vn&&300>Y()-il?(Yn&2)===0&&Oe(c,0):Kr|=b,cr===Vn&&(cr=0)),Kl(c)}function X3(c,h){h===0&&(h=It()),c=Dl(c,h),c!==null&&(An(c,h),Kl(c))}function r6(c){var h=c.memoizedState,b=0;h!==null&&(b=h.retryLane),X3(c,b)}function o6(c,h){var b=0;switch(c.tag){case 31:case 13:var w=c.stateNode,D=c.memoizedState;D!==null&&(b=D.retryLane);break;case 19:w=c.stateNode;break;case 22:w=c.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(h),X3(c,b)}function l6(c,h){return $e(c,h)}var n1=null,zh=null,Yb=!1,s1=!1,Zb=!1,Gu=0;function Kl(c){c!==zh&&c.next===null&&(zh===null?n1=zh=c:zh=zh.next=c),s1=!0,Yb||(Yb=!0,u6())}function dp(c,h){if(!Zb&&s1){Zb=!0;do for(var b=!1,w=n1;w!==null;){if(c!==0){var D=w.pendingLanes;if(D===0)var P=0;else{var X=w.suspendedLanes,se=w.pingedLanes;P=(1<<31-he(42|c)+1)-1,P&=D&~(X&~se),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(b=!0,K3(w,P))}else P=Vn,P=qe(w,w===ds?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||Tt(w,P)||(b=!0,K3(w,P));w=w.next}while(b);Zb=!1}}function c6(){W3()}function W3(){s1=Yb=!1;var c=0;Gu!==0&&b6()&&(c=Gu);for(var h=Y(),b=null,w=n1;w!==null;){var D=w.next,P=Y3(w,h);P===0?(w.next=null,b===null?n1=D:b.next=D,D===null&&(zh=b)):(b=w,(c!==0||(P&3)!==0)&&(s1=!0)),w=D}Hs!==0&&Hs!==5||dp(c),Gu!==0&&(Gu=0)}function Y3(c,h){for(var b=c.suspendedLanes,w=c.pingedLanes,D=c.expirationTimes,P=c.pendingLanes&-62914561;0<P;){var X=31-he(P),se=1<<X,Se=D[X];Se===-1?((se&b)===0||(se&w)!==0)&&(D[X]=zt(se,h)):Se<=h&&(c.expiredLanes|=se),P&=~se}if(h=ds,b=Vn,b=qe(c,c===h?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w=c.callbackNode,b===0||c===h&&(cn===2||cn===9)||c.cancelPendingCommit!==null)return w!==null&&w!==null&&Ee(w),c.callbackNode=null,c.callbackPriority=0;if((b&3)===0||Tt(c,b)){if(h=b&-b,h===c.callbackPriority)return h;switch(w!==null&&Ee(w),Fs(b)){case 2:case 8:b=Re;break;case 32:b=Ae;break;case 268435456:b=gt;break;default:b=Ae}return w=Z3.bind(null,c),b=$e(b,w),c.callbackPriority=h,c.callbackNode=b,h}return w!==null&&w!==null&&Ee(w),c.callbackPriority=2,c.callbackNode=null,2}function Z3(c,h){if(Hs!==0&&Hs!==5)return c.callbackNode=null,c.callbackPriority=0,null;var b=c.callbackNode;if(Oh()&&c.callbackNode!==b)return null;var w=Vn;return w=qe(c,c===ds?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w===0?null:(T(c,w,h),Y3(c,Y()),c.callbackNode!=null&&c.callbackNode===b?Z3.bind(null,c):null)}function K3(c,h){if(Oh())return null;T(c,h,!0)}function u6(){S6(function(){(Yn&6)!==0?$e(Be,c6):W3()})}function Kb(){if(Gu===0){var c=Yo;c===0&&(c=we,we<<=1,(we&261888)===0&&(we=256)),Gu=c}return Gu}function J3(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:br(""+c)}function Q3(c,h){var b=h.ownerDocument.createElement("input");return b.name=h.name,b.value=h.value,c.id&&b.setAttribute("form",c.id),h.parentNode.insertBefore(b,h),c=new FormData(c),b.parentNode.removeChild(b),c}function d6(c,h,b,w,D){if(h==="submit"&&b&&b.stateNode===D){var P=J3((D[Z]||null).action),X=w.submitter;X&&(h=(h=X[Z]||null)?J3(h.formAction):X.getAttribute("formAction"),h!==null&&(P=h,X=null));var se=new Go("action","action",null,w,D);c.push({event:se,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Gu!==0){var Se=X?Q3(D,X):new FormData(D);np(b,{pending:!0,data:Se,method:D.method,action:P},null,Se)}}else typeof P=="function"&&(se.preventDefault(),Se=X?Q3(D,X):new FormData(D),np(b,{pending:!0,data:Se,method:D.method,action:P},P,Se))},currentTarget:D}]})}}for(var Jb=0;Jb<eh.length;Jb++){var Qb=eh[Jb],f6=Qb.toLowerCase(),h6=Qb[0].toUpperCase()+Qb.slice(1);$i(f6,"on"+h6)}$i(Ca,"onAnimationEnd"),$i(gm,"onAnimationIteration"),$i(oo,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(gu,"onTransitionRun"),$i(Cl,"onTransitionStart"),$i(vm,"onTransitionCancel"),$i($f,"onTransitionEnd"),Mt("onMouseEnter",["mouseout","mouseover"]),Mt("onMouseLeave",["mouseout","mouseover"]),Mt("onPointerEnter",["pointerout","pointerover"]),Mt("onPointerLeave",["pointerout","pointerover"]),dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fp));function $3(c,h){h=(h&4)!==0;for(var b=0;b<c.length;b++){var w=c[b],D=w.event;w=w.listeners;e:{var P=void 0;if(h)for(var X=w.length-1;0<=X;X--){var se=w[X],Se=se.instance,Xe=se.currentTarget;if(se=se.listener,Se!==P&&D.isPropagationStopped())break e;P=se,D.currentTarget=Xe;try{P(D)}catch(mt){Nl(mt)}D.currentTarget=null,P=Se}else for(X=0;X<w.length;X++){if(se=w[X],Se=se.instance,Xe=se.currentTarget,se=se.listener,Se!==P&&D.isPropagationStopped())break e;P=se,D.currentTarget=Xe;try{P(D)}catch(mt){Nl(mt)}D.currentTarget=null,P=Se}}}}function Xn(c,h){var b=h[_e];b===void 0&&(b=h[_e]=new Set);var w=c+"__bubble";b.has(w)||(ew(h,c,2,!1),b.add(w))}function $b(c,h,b){var w=0;h&&(w|=4),ew(b,c,w,h)}var i1="_reactListening"+Math.random().toString(36).slice(2);function e2(c){if(!c[i1]){c[i1]=!0,ye.forEach(function(b){b!=="selectionchange"&&(m6.has(b)||$b(b,!1,c),$b(b,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[i1]||(h[i1]=!0,$b("selectionchange",!1,h))}}function ew(c,h,b,w){switch(Cw(h)){case 2:var D=F6;break;case 8:D=V6;break;default:D=p2}b=D.bind(null,h,b,c),D=void 0,!Qi||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(D=!0),w?D!==void 0?c.addEventListener(h,b,{capture:!0,passive:D}):c.addEventListener(h,b,!0):D!==void 0?c.addEventListener(h,b,{passive:D}):c.addEventListener(h,b,!1)}function t2(c,h,b,w,D){var P=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var X=w.tag;if(X===3||X===4){var se=w.stateNode.containerInfo;if(se===D)break;if(X===4)for(X=w.return;X!==null;){var Se=X.tag;if((Se===3||Se===4)&&X.stateNode.containerInfo===D)return;X=X.return}for(;se!==null;){if(X=_t(se),X===null)return;if(Se=X.tag,Se===5||Se===6||Se===26||Se===27){w=P=X;continue e}se=se.parentNode}}w=w.return}Sl(function(){var Xe=P,mt=hc(b),bt=[];e:{var Je=Bo.get(c);if(Je!==void 0){var rt=Go,en=c;switch(c){case"keypress":if(io(b)===0)break e;case"keydown":case"keyup":rt=rm;break;case"focusin":en="focus",rt=ou;break;case"focusout":en="blur",rt=ou;break;case"beforeblur":case"afterblur":rt=ou;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Io;break;case Ca:case gm:case oo:rt=Aa;break;case $f:rt=Ib;break;case"scroll":case"scrollend":rt=ao;break;case"wheel":rt=_l;break;case"copy":case"cut":case"paste":rt=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=qf;break;case"toggle":case"beforetoggle":rt=lm}var pn=(h&4)!==0,Rs=!pn&&(c==="scroll"||c==="scrollend"),Le=pn?Je!==null?Je+"Capture":null:Je;pn=[];for(var Te=Xe,He;Te!==null;){var vt=Te;if(He=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||He===null||Le===null||(vt=Gr(Te,Le),vt!=null&&pn.push(hp(Te,vt,He))),Rs)break;Te=Te.return}0<pn.length&&(Je=new rt(Je,en,null,b,mt),bt.push({event:Je,listeners:pn}))}}if((h&7)===0){e:{if(Je=c==="mouseover"||c==="pointerover",rt=c==="mouseout"||c==="pointerout",Je&&b!==zr&&(en=b.relatedTarget||b.fromElement)&&(_t(en)||en[ce]))break e;if((rt||Je)&&(Je=mt.window===mt?mt:(Je=mt.ownerDocument)?Je.defaultView||Je.parentWindow:window,rt?(en=b.relatedTarget||b.toElement,rt=Xe,en=en?_t(en):null,en!==null&&(Rs=r(en),pn=en.tag,en!==Rs||pn!==5&&pn!==27&&pn!==6)&&(en=null)):(rt=null,en=Xe),rt!==en)){if(pn=Hf,vt="onMouseLeave",Le="onMouseEnter",Te="mouse",(c==="pointerout"||c==="pointerover")&&(pn=qf,vt="onPointerLeave",Le="onPointerEnter",Te="pointer"),Rs=rt==null?Je:xe(rt),He=en==null?Je:xe(en),Je=new pn(vt,Te+"leave",rt,b,mt),Je.target=Rs,Je.relatedTarget=He,vt=null,_t(mt)===Xe&&(pn=new pn(Le,Te+"enter",en,b,mt),pn.target=He,pn.relatedTarget=Rs,vt=pn),Rs=vt,rt&&en)t:{for(pn=p6,Le=rt,Te=en,He=0,vt=Le;vt;vt=pn(vt))He++;vt=0;for(var un=Te;un;un=pn(un))vt++;for(;0<He-vt;)Le=pn(Le),He--;for(;0<vt-He;)Te=pn(Te),vt--;for(;He--;){if(Le===Te||Te!==null&&Le===Te.alternate){pn=Le;break t}Le=pn(Le),Te=pn(Te)}pn=null}else pn=null;rt!==null&&tw(bt,Je,rt,pn,!1),en!==null&&Rs!==null&&tw(bt,Rs,en,pn,!0)}}e:{if(Je=Xe?xe(Xe):window,rt=Je.nodeName&&Je.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Je.type==="file")var hs=hm;else if(dm(Je))if(Md)hs=vg;else{hs=El;var an=Sd}else rt=Je.nodeName,!rt||rt.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?Xe&&Or(Xe.elementType)&&(hs=hm):hs=gg;if(hs&&(hs=hs(c,Xe))){Yf(bt,hs,b,mt);break e}an&&an(c,Je,Xe),c==="focusout"&&Xe&&Je.type==="number"&&Xe.memoizedProps.value!=null&&On(Je,"number",Je.value)}switch(an=Xe?xe(Xe):window,c){case"focusin":(dm(an)||an.contentEditable==="true")&&(mu=an,Jf=Xe,pu=null);break;case"focusout":pu=Jf=mu=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,Qf(bt,b,mt);break;case"selectionchange":if(yg)break;case"keydown":case"keyup":Qf(bt,b,mt)}var Gn;if(bc)e:{switch(c){case"compositionstart":var Kn="onCompositionStart";break e;case"compositionend":Kn="onCompositionEnd";break e;case"compositionupdate":Kn="onCompositionUpdate";break e}Kn=void 0}else jl?Xf(c,b)&&(Kn="onCompositionEnd"):c==="keydown"&&b.keyCode===229&&(Kn="onCompositionStart");Kn&&(Bi&&b.locale!=="ko"&&(jl||Kn!=="onCompositionStart"?Kn==="onCompositionEnd"&&jl&&(Gn=gc()):(Ir=mt,xc="value"in Ir?Ir.value:Ir.textContent,jl=!0)),an=a1(Xe,Kn),0<an.length&&(Kn=new nm(Kn,c,null,b,mt),bt.push({event:Kn,listeners:an}),Gn?Kn.data=Gn:(Gn=lu(b),Gn!==null&&(Kn.data=Gn)))),(Gn=Mc?Wf(c,b):mg(c,b))&&(Kn=a1(Xe,"onBeforeInput"),0<Kn.length&&(an=new nm("onBeforeInput","beforeinput",null,b,mt),bt.push({event:an,listeners:Kn}),an.data=Gn)),d6(bt,c,Xe,b,mt)}$3(bt,h)})}function hp(c,h,b){return{instance:c,listener:h,currentTarget:b}}function a1(c,h){for(var b=h+"Capture",w=[];c!==null;){var D=c,P=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||P===null||(D=Gr(c,b),D!=null&&w.unshift(hp(c,D,P)),D=Gr(c,h),D!=null&&w.push(hp(c,D,P))),c.tag===3)return w;c=c.return}return[]}function p6(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function tw(c,h,b,w,D){for(var P=h._reactName,X=[];b!==null&&b!==w;){var se=b,Se=se.alternate,Xe=se.stateNode;if(se=se.tag,Se!==null&&Se===w)break;se!==5&&se!==26&&se!==27||Xe===null||(Se=Xe,D?(Xe=Gr(b,P),Xe!=null&&X.unshift(hp(b,Xe,Se))):D||(Xe=Gr(b,P),Xe!=null&&X.push(hp(b,Xe,Se)))),b=b.return}X.length!==0&&c.push({event:h,listeners:X})}var x6=/\r\n?/g,g6=/\u0000|\uFFFD/g;function nw(c){return(typeof c=="string"?c:""+c).replace(x6,`
`).replace(g6,"")}function sw(c,h){return h=nw(h),nw(c)===h}function Ns(c,h,b,w,D,P){switch(b){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||ca(c,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&ca(c,""+w);break;case"className":xn(c,"class",w);break;case"tabIndex":xn(c,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(c,b,w);break;case"style":dc(c,w,P);break;case"data":if(h!=="object"){xn(c,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||b!=="href")){c.removeAttribute(b);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(b);break}w=br(""+w),c.setAttribute(b,w);break;case"action":case"formAction":if(typeof w=="function"){c.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(b==="formAction"?(h!=="input"&&Ns(c,h,"name",D.name,D,null),Ns(c,h,"formEncType",D.formEncType,D,null),Ns(c,h,"formMethod",D.formMethod,D,null),Ns(c,h,"formTarget",D.formTarget,D,null)):(Ns(c,h,"encType",D.encType,D,null),Ns(c,h,"method",D.method,D,null),Ns(c,h,"target",D.target,D,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(b);break}w=br(""+w),c.setAttribute(b,w);break;case"onClick":w!=null&&(c.onclick=Ii);break;case"onScroll":w!=null&&Xn("scroll",c);break;case"onScrollEnd":w!=null&&Xn("scrollend",c);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(b=w.__html,b!=null){if(D.children!=null)throw Error(n(60));c.innerHTML=b}}break;case"multiple":c.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":c.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){c.removeAttribute("xlink:href");break}b=br(""+w),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(b,""+w):c.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(b,""):c.removeAttribute(b);break;case"capture":case"download":w===!0?c.setAttribute(b,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(b,w):c.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?c.setAttribute(b,w):c.removeAttribute(b);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?c.removeAttribute(b):c.setAttribute(b,w);break;case"popover":Xn("beforetoggle",c),Xn("toggle",c),Ft(c,"popover",w);break;case"xlinkActuate":Qt(c,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Qt(c,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Qt(c,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Qt(c,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Qt(c,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Qt(c,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Qt(c,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Qt(c,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Qt(c,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Ft(c,"is",w);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=xd.get(b)||b,Ft(c,b,w))}}function n2(c,h,b,w,D,P){switch(b){case"style":dc(c,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(b=w.__html,b!=null){if(D.children!=null)throw Error(n(60));c.innerHTML=b}}break;case"children":typeof w=="string"?ca(c,w):(typeof w=="number"||typeof w=="bigint")&&ca(c,""+w);break;case"onScroll":w!=null&&Xn("scroll",c);break;case"onScrollEnd":w!=null&&Xn("scrollend",c);break;case"onClick":w!=null&&(c.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ke.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(D=b.endsWith("Capture"),h=b.slice(2,D?b.length-7:void 0),P=c[Z]||null,P=P!=null?P[b]:null,typeof P=="function"&&c.removeEventListener(h,P,D),typeof w=="function")){typeof P!="function"&&P!==null&&(b in c?c[b]=null:c.hasAttribute(b)&&c.removeAttribute(b)),c.addEventListener(h,w,D);break e}b in c?c[b]=w:w===!0?c.setAttribute(b,""):Ft(c,b,w)}}}function ya(c,h,b){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xn("error",c),Xn("load",c);var w=!1,D=!1,P;for(P in b)if(b.hasOwnProperty(P)){var X=b[P];if(X!=null)switch(P){case"src":w=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:Ns(c,h,P,X,b,null)}}D&&Ns(c,h,"srcSet",b.srcSet,b,null),w&&Ns(c,h,"src",b.src,b,null);return;case"input":Xn("invalid",c);var se=P=X=D=null,Se=null,Xe=null;for(w in b)if(b.hasOwnProperty(w)){var mt=b[w];if(mt!=null)switch(w){case"name":D=mt;break;case"type":X=mt;break;case"checked":Se=mt;break;case"defaultChecked":Xe=mt;break;case"value":P=mt;break;case"defaultValue":se=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(n(137,h));break;default:Ns(c,h,w,mt,b,null)}}Ln(c,P,se,Se,Xe,X,D,!1);return;case"select":Xn("invalid",c),w=X=P=null;for(D in b)if(b.hasOwnProperty(D)&&(se=b[D],se!=null))switch(D){case"value":P=se;break;case"defaultValue":X=se;break;case"multiple":w=se;default:Ns(c,h,D,se,b,null)}h=P,b=X,c.multiple=!!w,h!=null?as(c,!!w,h,!1):b!=null&&as(c,!!w,b,!0);return;case"textarea":Xn("invalid",c),P=D=w=null;for(X in b)if(b.hasOwnProperty(X)&&(se=b[X],se!=null))switch(X){case"value":w=se;break;case"defaultValue":D=se;break;case"children":P=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(91));break;default:Ns(c,h,X,se,b,null)}_s(c,w,D,P);return;case"option":for(Se in b)if(b.hasOwnProperty(Se)&&(w=b[Se],w!=null))switch(Se){case"selected":c.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Ns(c,h,Se,w,b,null)}return;case"dialog":Xn("beforetoggle",c),Xn("toggle",c),Xn("cancel",c),Xn("close",c);break;case"iframe":case"object":Xn("load",c);break;case"video":case"audio":for(w=0;w<fp.length;w++)Xn(fp[w],c);break;case"image":Xn("error",c),Xn("load",c);break;case"details":Xn("toggle",c);break;case"embed":case"source":case"link":Xn("error",c),Xn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in b)if(b.hasOwnProperty(Xe)&&(w=b[Xe],w!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:Ns(c,h,Xe,w,b,null)}return;default:if(Or(h)){for(mt in b)b.hasOwnProperty(mt)&&(w=b[mt],w!==void 0&&n2(c,h,mt,w,b,void 0));return}}for(se in b)b.hasOwnProperty(se)&&(w=b[se],w!=null&&Ns(c,h,se,w,b,null))}function v6(c,h,b,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,P=null,X=null,se=null,Se=null,Xe=null,mt=null;for(rt in b){var bt=b[rt];if(b.hasOwnProperty(rt)&&bt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Se=bt;default:w.hasOwnProperty(rt)||Ns(c,h,rt,null,w,bt)}}for(var Je in w){var rt=w[Je];if(bt=b[Je],w.hasOwnProperty(Je)&&(rt!=null||bt!=null))switch(Je){case"type":P=rt;break;case"name":D=rt;break;case"checked":Xe=rt;break;case"defaultChecked":mt=rt;break;case"value":X=rt;break;case"defaultValue":se=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,h));break;default:rt!==bt&&Ns(c,h,Je,rt,w,bt)}}Ls(c,X,se,Se,Xe,mt,P,D);return;case"select":rt=X=se=Je=null;for(P in b)if(Se=b[P],b.hasOwnProperty(P)&&Se!=null)switch(P){case"value":break;case"multiple":rt=Se;default:w.hasOwnProperty(P)||Ns(c,h,P,null,w,Se)}for(D in w)if(P=w[D],Se=b[D],w.hasOwnProperty(D)&&(P!=null||Se!=null))switch(D){case"value":Je=P;break;case"defaultValue":se=P;break;case"multiple":X=P;default:P!==Se&&Ns(c,h,D,P,w,Se)}h=se,b=X,w=rt,Je!=null?as(c,!!b,Je,!1):!!w!=!!b&&(h!=null?as(c,!!b,h,!0):as(c,!!b,b?[]:"",!1));return;case"textarea":rt=Je=null;for(se in b)if(D=b[se],b.hasOwnProperty(se)&&D!=null&&!w.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Ns(c,h,se,null,w,D)}for(X in w)if(D=w[X],P=b[X],w.hasOwnProperty(X)&&(D!=null||P!=null))switch(X){case"value":Je=D;break;case"defaultValue":rt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:D!==P&&Ns(c,h,X,D,w,P)}Is(c,Je,rt);return;case"option":for(var en in b)if(Je=b[en],b.hasOwnProperty(en)&&Je!=null&&!w.hasOwnProperty(en))switch(en){case"selected":c.selected=!1;break;default:Ns(c,h,en,null,w,Je)}for(Se in w)if(Je=w[Se],rt=b[Se],w.hasOwnProperty(Se)&&Je!==rt&&(Je!=null||rt!=null))switch(Se){case"selected":c.selected=Je&&typeof Je!="function"&&typeof Je!="symbol";break;default:Ns(c,h,Se,Je,w,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pn in b)Je=b[pn],b.hasOwnProperty(pn)&&Je!=null&&!w.hasOwnProperty(pn)&&Ns(c,h,pn,null,w,Je);for(Xe in w)if(Je=w[Xe],rt=b[Xe],w.hasOwnProperty(Xe)&&Je!==rt&&(Je!=null||rt!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(n(137,h));break;default:Ns(c,h,Xe,Je,w,rt)}return;default:if(Or(h)){for(var Rs in b)Je=b[Rs],b.hasOwnProperty(Rs)&&Je!==void 0&&!w.hasOwnProperty(Rs)&&n2(c,h,Rs,void 0,w,Je);for(mt in w)Je=w[mt],rt=b[mt],!w.hasOwnProperty(mt)||Je===rt||Je===void 0&&rt===void 0||n2(c,h,mt,Je,w,rt);return}}for(var Le in b)Je=b[Le],b.hasOwnProperty(Le)&&Je!=null&&!w.hasOwnProperty(Le)&&Ns(c,h,Le,null,w,Je);for(bt in w)Je=w[bt],rt=b[bt],!w.hasOwnProperty(bt)||Je===rt||Je==null&&rt==null||Ns(c,h,bt,Je,w,rt)}function iw(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function y6(){if(typeof performance.getEntriesByType=="function"){for(var c=0,h=0,b=performance.getEntriesByType("resource"),w=0;w<b.length;w++){var D=b[w],P=D.transferSize,X=D.initiatorType,se=D.duration;if(P&&se&&iw(X)){for(X=0,se=D.responseEnd,w+=1;w<b.length;w++){var Se=b[w],Xe=Se.startTime;if(Xe>se)break;var mt=Se.transferSize,bt=Se.initiatorType;mt&&iw(bt)&&(Se=Se.responseEnd,X+=mt*(Se<se?1:(se-Xe)/(Se-Xe)))}if(--w,h+=8*(P+X)/(D.duration/1e3),c++,10<c)break}}if(0<c)return h/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var s2=null,i2=null;function r1(c){return c.nodeType===9?c:c.ownerDocument}function aw(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rw(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function a2(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var r2=null;function b6(){var c=window.event;return c&&c.type==="popstate"?c===r2?!1:(r2=c,!0):(r2=null,!1)}var ow=typeof setTimeout=="function"?setTimeout:void 0,M6=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,S6=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(c){return lw.resolve(null).then(c).catch(_6)}:ow;function _6(c){setTimeout(function(){throw c})}function Iu(c){return c==="head"}function cw(c,h){var b=h,w=0;do{var D=b.nextSibling;if(c.removeChild(b),D&&D.nodeType===8)if(b=D.data,b==="/$"||b==="/&"){if(w===0){c.removeChild(D),Bh(h);return}w--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")w++;else if(b==="html")mp(c.ownerDocument.documentElement);else if(b==="head"){b=c.ownerDocument.head,mp(b);for(var P=b.firstChild;P;){var X=P.nextSibling,se=P.nodeName;P[Ct]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&P.rel.toLowerCase()==="stylesheet"||b.removeChild(P),P=X}}else b==="body"&&mp(c.ownerDocument.body);b=D}while(b);Bh(h)}function uw(c,h){var b=c;c=0;do{var w=b.nextSibling;if(b.nodeType===1?h?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(h?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),w&&w.nodeType===8)if(b=w.data,b==="/$"){if(c===0)break;c--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||c++;b=w}while(b)}function o2(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var b=h;switch(h=h.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":o2(b),wt(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}c.removeChild(b)}}function w6(c,h,b,w){for(;c.nodeType===1;){var D=b;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(w){if(!c[Ct])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(P=c.getAttribute("rel"),P==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(P!==D.rel||c.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||c.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||c.getAttribute("title")!==(D.title==null?null:D.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(P=c.getAttribute("src"),(P!==(D.src==null?null:D.src)||c.getAttribute("type")!==(D.type==null?null:D.type)||c.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&P&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var P=D.name==null?null:""+D.name;if(D.type==="hidden"&&c.getAttribute("name")===P)return c}else return c;if(c=_o(c.nextSibling),c===null)break}return null}function j6(c,h,b){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!b||(c=_o(c.nextSibling),c===null))return null;return c}function dw(c,h){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!h||(c=_o(c.nextSibling),c===null))return null;return c}function l2(c){return c.data==="$?"||c.data==="$~"}function c2(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function E6(c,h){var b=c.ownerDocument;if(c.data==="$~")c._reactRetry=h;else if(c.data!=="$?"||b.readyState!=="loading")h();else{var w=function(){h(),b.removeEventListener("DOMContentLoaded",w)};b.addEventListener("DOMContentLoaded",w),c._reactRetry=w}}function _o(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return c}var u2=null;function fw(c){c=c.nextSibling;for(var h=0;c;){if(c.nodeType===8){var b=c.data;if(b==="/$"||b==="/&"){if(h===0)return _o(c.nextSibling);h--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||h++}c=c.nextSibling}return null}function hw(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var b=c.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(h===0)return c;h--}else b!=="/$"&&b!=="/&"||h++}c=c.previousSibling}return null}function mw(c,h,b){switch(h=r1(b),c){case"html":if(c=h.documentElement,!c)throw Error(n(452));return c;case"head":if(c=h.head,!c)throw Error(n(453));return c;case"body":if(c=h.body,!c)throw Error(n(454));return c;default:throw Error(n(451))}}function mp(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);wt(c)}var wo=new Map,pw=new Set;function o1(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Hc=J.d;J.d={f:T6,r:A6,D:C6,C:N6,L:R6,m:D6,X:U6,S:L6,M:P6};function T6(){var c=Hc.f(),h=oe();return c||h}function A6(c){var h=K(c);h!==null&&h.tag===5&&h.type==="form"?sp(h):Hc.r(c)}var Gh=typeof document>"u"?null:document;function xw(c,h,b){var w=Gh;if(w&&typeof h=="string"&&h){var D=Jt(h);D='link[rel="'+c+'"][href="'+D+'"]',typeof b=="string"&&(D+='[crossorigin="'+b+'"]'),pw.has(D)||(pw.add(D),c={rel:c,crossOrigin:b,href:h},w.querySelector(D)===null&&(h=w.createElement("link"),ya(h,"link",c),Ne(h),w.head.appendChild(h)))}}function C6(c){Hc.D(c),xw("dns-prefetch",c,null)}function N6(c,h){Hc.C(c,h),xw("preconnect",c,h)}function R6(c,h,b){Hc.L(c,h,b);var w=Gh;if(w&&c&&h){var D='link[rel="preload"][as="'+Jt(h)+'"]';h==="image"&&b&&b.imageSrcSet?(D+='[imagesrcset="'+Jt(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(D+='[imagesizes="'+Jt(b.imageSizes)+'"]')):D+='[href="'+Jt(c)+'"]';var P=D;switch(h){case"style":P=Ih(c);break;case"script":P=kh(c)}wo.has(P)||(c=m({rel:"preload",href:h==="image"&&b&&b.imageSrcSet?void 0:c,as:h},b),wo.set(P,c),w.querySelector(D)!==null||h==="style"&&w.querySelector(pp(P))||h==="script"&&w.querySelector(xp(P))||(h=w.createElement("link"),ya(h,"link",c),Ne(h),w.head.appendChild(h)))}}function D6(c,h){Hc.m(c,h);var b=Gh;if(b&&c){var w=h&&typeof h.as=="string"?h.as:"script",D='link[rel="modulepreload"][as="'+Jt(w)+'"][href="'+Jt(c)+'"]',P=D;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=kh(c)}if(!wo.has(P)&&(c=m({rel:"modulepreload",href:c},h),wo.set(P,c),b.querySelector(D)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(xp(P)))return}w=b.createElement("link"),ya(w,"link",c),Ne(w),b.head.appendChild(w)}}}function L6(c,h,b){Hc.S(c,h,b);var w=Gh;if(w&&c){var D=de(w).hoistableStyles,P=Ih(c);h=h||"default";var X=D.get(P);if(!X){var se={loading:0,preload:null};if(X=w.querySelector(pp(P)))se.loading=5;else{c=m({rel:"stylesheet",href:c,"data-precedence":h},b),(b=wo.get(P))&&d2(c,b);var Se=X=w.createElement("link");Ne(Se),ya(Se,"link",c),Se._p=new Promise(function(Xe,mt){Se.onload=Xe,Se.onerror=mt}),Se.addEventListener("load",function(){se.loading|=1}),Se.addEventListener("error",function(){se.loading|=2}),se.loading|=4,l1(X,h,w)}X={type:"stylesheet",instance:X,count:1,state:se},D.set(P,X)}}}function U6(c,h){Hc.X(c,h);var b=Gh;if(b&&c){var w=de(b).hoistableScripts,D=kh(c),P=w.get(D);P||(P=b.querySelector(xp(D)),P||(c=m({src:c,async:!0},h),(h=wo.get(D))&&f2(c,h),P=b.createElement("script"),Ne(P),ya(P,"link",c),b.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(D,P))}}function P6(c,h){Hc.M(c,h);var b=Gh;if(b&&c){var w=de(b).hoistableScripts,D=kh(c),P=w.get(D);P||(P=b.querySelector(xp(D)),P||(c=m({src:c,async:!0,type:"module"},h),(h=wo.get(D))&&f2(c,h),P=b.createElement("script"),Ne(P),ya(P,"link",c),b.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(D,P))}}function gw(c,h,b,w){var D=(D=fe.current)?o1(D):null;if(!D)throw Error(n(446));switch(c){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(h=Ih(b.href),b=de(D).hoistableStyles,w=b.get(h),w||(w={type:"style",instance:null,count:0,state:null},b.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){c=Ih(b.href);var P=de(D).hoistableStyles,X=P.get(c);if(X||(D=D.ownerDocument||D,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(c,X),(P=D.querySelector(pp(c)))&&!P._p&&(X.instance=P,X.state.loading=5),wo.has(c)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},wo.set(c,b),P||O6(D,c,b,X.state))),h&&w===null)throw Error(n(528,""));return X}if(h&&w!==null)throw Error(n(529,""));return null;case"script":return h=b.async,b=b.src,typeof b=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=kh(b),b=de(D).hoistableScripts,w=b.get(h),w||(w={type:"script",instance:null,count:0,state:null},b.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,c))}}function Ih(c){return'href="'+Jt(c)+'"'}function pp(c){return'link[rel="stylesheet"]['+c+"]"}function vw(c){return m({},c,{"data-precedence":c.precedence,precedence:null})}function O6(c,h,b,w){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=c.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),ya(h,"link",b),Ne(h),c.head.appendChild(h))}function kh(c){return'[src="'+Jt(c)+'"]'}function xp(c){return"script[async]"+c}function yw(c,h,b){if(h.count++,h.instance===null)switch(h.type){case"style":var w=c.querySelector('style[data-href~="'+Jt(b.href)+'"]');if(w)return h.instance=w,Ne(w),w;var D=m({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return w=(c.ownerDocument||c).createElement("style"),Ne(w),ya(w,"style",D),l1(w,b.precedence,c),h.instance=w;case"stylesheet":D=Ih(b.href);var P=c.querySelector(pp(D));if(P)return h.state.loading|=4,h.instance=P,Ne(P),P;w=vw(b),(D=wo.get(D))&&d2(w,D),P=(c.ownerDocument||c).createElement("link"),Ne(P);var X=P;return X._p=new Promise(function(se,Se){X.onload=se,X.onerror=Se}),ya(P,"link",w),h.state.loading|=4,l1(P,b.precedence,c),h.instance=P;case"script":return P=kh(b.src),(D=c.querySelector(xp(P)))?(h.instance=D,Ne(D),D):(w=b,(D=wo.get(P))&&(w=m({},b),f2(w,D)),c=c.ownerDocument||c,D=c.createElement("script"),Ne(D),ya(D,"link",w),c.head.appendChild(D),h.instance=D);case"void":return null;default:throw Error(n(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,l1(w,b.precedence,c));return h.instance}function l1(c,h,b){for(var w=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=w.length?w[w.length-1]:null,P=D,X=0;X<w.length;X++){var se=w[X];if(se.dataset.precedence===h)P=se;else if(P!==D)break}P?P.parentNode.insertBefore(c,P.nextSibling):(h=b.nodeType===9?b.head:b,h.insertBefore(c,h.firstChild))}function d2(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function f2(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var c1=null;function bw(c,h,b){if(c1===null){var w=new Map,D=c1=new Map;D.set(b,w)}else D=c1,w=D.get(b),w||(w=new Map,D.set(b,w));if(w.has(c))return w;for(w.set(c,null),b=b.getElementsByTagName(c),D=0;D<b.length;D++){var P=b[D];if(!(P[Ct]||P[fn]||c==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var X=P.getAttribute(h)||"";X=c+X;var se=w.get(X);se?se.push(P):w.set(X,[P])}}return w}function Mw(c,h,b){c=c.ownerDocument||c,c.head.insertBefore(b,h==="title"?c.querySelector("head > title"):null)}function z6(c,h,b){if(b===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Sw(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function G6(c,h,b,w){if(b.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var D=Ih(w.href),P=h.querySelector(pp(D));if(P){h=P._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(c.count++,c=u1.bind(c),h.then(c,c)),b.state.loading|=4,b.instance=P,Ne(P);return}P=h.ownerDocument||h,w=vw(w),(D=wo.get(D))&&d2(w,D),P=P.createElement("link"),Ne(P);var X=P;X._p=new Promise(function(se,Se){X.onload=se,X.onerror=Se}),ya(P,"link",w),b.instance=P}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(b,h),(h=b.state.preload)&&(b.state.loading&3)===0&&(c.count++,b=u1.bind(c),h.addEventListener("load",b),h.addEventListener("error",b))}}var h2=0;function I6(c,h){return c.stylesheets&&c.count===0&&f1(c,c.stylesheets),0<c.count||0<c.imgCount?function(b){var w=setTimeout(function(){if(c.stylesheets&&f1(c,c.stylesheets),c.unsuspend){var P=c.unsuspend;c.unsuspend=null,P()}},6e4+h);0<c.imgBytes&&h2===0&&(h2=62500*y6());var D=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&f1(c,c.stylesheets),c.unsuspend)){var P=c.unsuspend;c.unsuspend=null,P()}},(c.imgBytes>h2?50:800)+h);return c.unsuspend=b,function(){c.unsuspend=null,clearTimeout(w),clearTimeout(D)}}:null}function u1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)f1(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var d1=null;function f1(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,d1=new Map,h.forEach(k6,c),d1=null,u1.call(c))}function k6(c,h){if(!(h.state.loading&4)){var b=d1.get(c);if(b)var w=b.get(null);else{b=new Map,d1.set(c,b);for(var D=c.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<D.length;P++){var X=D[P];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(b.set(X.dataset.precedence,X),w=X)}w&&b.set(null,w)}D=h.instance,X=D.getAttribute("data-precedence"),P=b.get(X)||w,P===w&&b.set(null,D),b.set(X,D),this.count++,w=u1.bind(this),D.addEventListener("load",w),D.addEventListener("error",w),P?P.parentNode.insertBefore(D,P.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(D,c.firstChild)),h.state.loading|=4}}var gp={$$typeof:A,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function B6(c,h,b,w,D,P,X,se,Se){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.hiddenUpdates=Zt(null),this.identifierPrefix=w,this.onUncaughtError=D,this.onCaughtError=P,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function _w(c,h,b,w,D,P,X,se,Se,Xe,mt,bt){return c=new B6(c,h,b,X,Se,Xe,mt,bt,se),h=1,P===!0&&(h|=24),P=ha(3,null,null,h),c.current=P,P.stateNode=c,h=jm(),h.refCount++,c.pooledCache=h,h.refCount++,P.memoizedState={element:w,isDehydrated:b,cache:h},Rm(P),c}function ww(c){return c?(c=Ll,c):Ll}function jw(c,h,b,w,D,P){D=ww(D),w.context===null?w.context=D:w.pendingContext=D,w=mo(h),w.payload={element:b},P=P===void 0?null:P,P!==null&&(w.callback=P),b=Zo(c,w,h),b!==null&&(y(b,c,h),Bl(b,c,h))}function Ew(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var b=c.retryLane;c.retryLane=b!==0&&b<h?b:h}}function m2(c,h){Ew(c,h),(c=c.alternate)&&Ew(c,h)}function Tw(c){if(c.tag===13||c.tag===31){var h=Dl(c,67108864);h!==null&&y(h,c,67108864),m2(c,67108864)}}function Aw(c){if(c.tag===13||c.tag===31){var h=va();h=cs(h);var b=Dl(c,h);b!==null&&y(b,c,h),m2(c,h)}}var h1=!0;function F6(c,h,b,w){var D=B.T;B.T=null;var P=J.p;try{J.p=2,p2(c,h,b,w)}finally{J.p=P,B.T=D}}function V6(c,h,b,w){var D=B.T;B.T=null;var P=J.p;try{J.p=8,p2(c,h,b,w)}finally{J.p=P,B.T=D}}function p2(c,h,b,w){if(h1){var D=x2(w);if(D===null)t2(c,h,w,m1,b),Nw(c,w);else if(q6(D,c,h,b,w))w.stopPropagation();else if(Nw(c,w),h&4&&-1<H6.indexOf(c)){for(;D!==null;){var P=K(D);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var X=ot(P.pendingLanes);if(X!==0){var se=P;for(se.pendingLanes|=2,se.entangledLanes|=2;X;){var Se=1<<31-he(X);se.entanglements[1]|=Se,X&=~Se}Kl(P),(Yn&6)===0&&(ur=Y()+500,dp(0))}}break;case 31:case 13:se=Dl(P,2),se!==null&&y(se,P,2),oe(),m2(P,2)}if(P=x2(w),P===null&&t2(c,h,w,m1,b),P===D)break;D=P}D!==null&&w.stopPropagation()}else t2(c,h,w,null,b)}}function x2(c){return c=hc(c),g2(c)}var m1=null;function g2(c){if(m1=null,c=_t(c),c!==null){var h=r(c);if(h===null)c=null;else{var b=h.tag;if(b===13){if(c=o(h),c!==null)return c;c=null}else if(b===31){if(c=l(h),c!==null)return c;c=null}else if(b===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return m1=c,null}function Cw(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case Be:return 2;case Re:return 8;case Ae:case yt:return 32;case gt:return 268435456;default:return 32}default:return 32}}var v2=!1,ku=null,Bu=null,Fu=null,vp=new Map,yp=new Map,Vu=[],H6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nw(c,h){switch(c){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Bu=null;break;case"mouseover":case"mouseout":Fu=null;break;case"pointerover":case"pointerout":vp.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(h.pointerId)}}function bp(c,h,b,w,D,P){return c===null||c.nativeEvent!==P?(c={blockedOn:h,domEventName:b,eventSystemFlags:w,nativeEvent:P,targetContainers:[D]},h!==null&&(h=K(h),h!==null&&Tw(h)),c):(c.eventSystemFlags|=w,h=c.targetContainers,D!==null&&h.indexOf(D)===-1&&h.push(D),c)}function q6(c,h,b,w,D){switch(h){case"focusin":return ku=bp(ku,c,h,b,w,D),!0;case"dragenter":return Bu=bp(Bu,c,h,b,w,D),!0;case"mouseover":return Fu=bp(Fu,c,h,b,w,D),!0;case"pointerover":var P=D.pointerId;return vp.set(P,bp(vp.get(P)||null,c,h,b,w,D)),!0;case"gotpointercapture":return P=D.pointerId,yp.set(P,bp(yp.get(P)||null,c,h,b,w,D)),!0}return!1}function Rw(c){var h=_t(c.target);if(h!==null){var b=r(h);if(b!==null){if(h=b.tag,h===13){if(h=o(b),h!==null){c.blockedOn=h,sn(c.priority,function(){Aw(b)});return}}else if(h===31){if(h=l(b),h!==null){c.blockedOn=h,sn(c.priority,function(){Aw(b)});return}}else if(h===3&&b.stateNode.current.memoizedState.isDehydrated){c.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}c.blockedOn=null}function p1(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var b=x2(c.nativeEvent);if(b===null){b=c.nativeEvent;var w=new b.constructor(b.type,b);zr=w,b.target.dispatchEvent(w),zr=null}else return h=K(b),h!==null&&Tw(h),c.blockedOn=b,!1;h.shift()}return!0}function Dw(c,h,b){p1(c)&&b.delete(h)}function X6(){v2=!1,ku!==null&&p1(ku)&&(ku=null),Bu!==null&&p1(Bu)&&(Bu=null),Fu!==null&&p1(Fu)&&(Fu=null),vp.forEach(Dw),yp.forEach(Dw)}function x1(c,h){c.blockedOn===h&&(c.blockedOn=null,v2||(v2=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,X6)))}var g1=null;function Lw(c){g1!==c&&(g1=c,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){g1===c&&(g1=null);for(var h=0;h<c.length;h+=3){var b=c[h],w=c[h+1],D=c[h+2];if(typeof w!="function"){if(g2(w||b)===null)continue;break}var P=K(b);P!==null&&(c.splice(h,3),h-=3,np(P,{pending:!0,data:D,method:b.method,action:w},w,D))}}))}function Bh(c){function h(Se){return x1(Se,c)}ku!==null&&x1(ku,c),Bu!==null&&x1(Bu,c),Fu!==null&&x1(Fu,c),vp.forEach(h),yp.forEach(h);for(var b=0;b<Vu.length;b++){var w=Vu[b];w.blockedOn===c&&(w.blockedOn=null)}for(;0<Vu.length&&(b=Vu[0],b.blockedOn===null);)Rw(b),b.blockedOn===null&&Vu.shift();if(b=(c.ownerDocument||c).$$reactFormReplay,b!=null)for(w=0;w<b.length;w+=3){var D=b[w],P=b[w+1],X=D[Z]||null;if(typeof P=="function")X||Lw(b);else if(X){var se=null;if(P&&P.hasAttribute("formAction")){if(D=P,X=P[Z]||null)se=X.formAction;else if(g2(D)!==null)continue}else se=X.action;typeof se=="function"?b[w+1]=se:(b.splice(w,3),w-=3),Lw(b)}}}function Uw(){function c(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(X){return D=X})},focusReset:"manual",scroll:"manual"})}function h(){D!==null&&(D(),D=null),w||setTimeout(b,20)}function b(){if(!w&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,D=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(b,100),function(){w=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),D!==null&&(D(),D=null)}}}function y2(c){this._internalRoot=c}v1.prototype.render=y2.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(n(409));var b=h.current,w=va();jw(b,w,c,h,null,null)},v1.prototype.unmount=y2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;jw(c.current,2,null,c,null,null),oe(),h[ce]=null}};function v1(c){this._internalRoot=c}v1.prototype.unstable_scheduleHydration=function(c){if(c){var h=Ts();c={blockedOn:null,target:c,priority:h};for(var b=0;b<Vu.length&&h!==0&&h<Vu[b].priority;b++);Vu.splice(b,0,c),b===0&&Rw(c)}};var Pw=e.version;if(Pw!=="19.2.0")throw Error(n(527,Pw,"19.2.0"));J.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=d(h),c=c!==null?f(c):null,c=c===null?null:c.stateNode,c};var W6={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y1.isDisabled&&y1.supportsFiber)try{ke=y1.inject(W6),Ie=y1}catch{}}return Sp.createRoot=function(c,h){if(!a(c))throw Error(n(299));var b=!1,w="",D=rp,P=Jg,X=wh;return h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(D=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError)),h=_w(c,1,!1,null,null,b,w,null,D,P,X,Uw),c[ce]=h.current,e2(c),new y2(h)},Sp.hydrateRoot=function(c,h,b){if(!a(c))throw Error(n(299));var w=!1,D="",P=rp,X=Jg,se=wh,Se=null;return b!=null&&(b.unstable_strictMode===!0&&(w=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onUncaughtError!==void 0&&(P=b.onUncaughtError),b.onCaughtError!==void 0&&(X=b.onCaughtError),b.onRecoverableError!==void 0&&(se=b.onRecoverableError),b.formState!==void 0&&(Se=b.formState)),h=_w(c,1,!0,h,b??null,w,D,Se,P,X,se,Uw),h.context=ww(null),b=h.current,w=va(),w=cs(w),D=mo(w),D.callback=null,Zo(b,D,w),b=w,h.current.lanes=b,An(h,b),Kl(h),c[ce]=h.current,e2(c),new v1(h)},Sp.version="19.2.0",Sp}var qw;function aD(){if(qw)return S2.exports;qw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),S2.exports=iD(),S2.exports}var hA=aD();const rD=Vy(hA);var Ut=(i=>(i.RIDDLE_ME="RIDDLE_ME",i.TRIVIA_BLAST="TRIVIA_BLAST",i.EMOJI_CODE="EMOJI_CODE",i.LOGIC_SYLLOGISM="LOGIC_SYLLOGISM",i.ODD_ONE_OUT="ODD_ONE_OUT",i.CONNECTIONS="CONNECTIONS",i.FACT_OR_CAP="FACT_OR_CAP",i.STORY_SLEUTH="STORY_SLEUTH",i.SEQUENCE_SPY="SEQUENCE_SPY",i.WORD_ASSOC="WORD_ASSOC",i.MEMORY_MATRIX="MEMORY_MATRIX",i.COLOR_FLOOD="COLOR_FLOOD",i.WORD_TWISTED="WORD_TWISTED",i.MATH_DASH="MATH_DASH",i.PATTERN_MIND="PATTERN_MIND",i.SLIDE_AWAY="SLIDE_AWAY",i.CODE_BREAKER="CODE_BREAKER",i.REACTION_Z="REACTION_Z",i.WHACK_A_MOLE="WHACK_A_MOLE",i.SUDOKU_LITE="SUDOKU_LITE",i.LIGHTS_OUT="LIGHTS_OUT",i.MINE_SWEEPER="MINE_SWEEPER",i.MEMO_PATH="MEMO_PATH",i.PIPE_MASTER="PIPE_MASTER",i.SYMMETRY_DRAW="SYMMETRY_DRAW",i.NUMBER_PATH="NUMBER_PATH",i.LASER_BEAM="LASER_BEAM",i.BALANCE_SCALE="BALANCE_SCALE",i.HANOI_SAGA="HANOI_SAGA",i.MAZE_RUNNER="MAZE_RUNNER",i.LINK_DOTS="LINK_DOTS",i.SOKOBAN_GO="SOKOBAN_GO",i.MERGE_2048="MERGE_2048",i.WATER_SORT="WATER_SORT",i.NONOGRAM="NONOGRAM",i.UNBLOCK_RED="UNBLOCK_RED",i.PEG_JUMP="PEG_JUMP",i.TETRIS_FIT="TETRIS_FIT",i.GEAR_SYSTEM="GEAR_SYSTEM",i.COLOR_MIXER="COLOR_MIXER",i.ROLL_CUBE="ROLL_CUBE",i.BRIDGE_CROSS="BRIDGE_CROSS",i.SHIFT_GRID="SHIFT_GRID",i))(Ut||{});/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lD=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Xw=i=>{const e=lD(i);return e.charAt(0).toUpperCase()+e.slice(1)},mA=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),cD=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=E.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:a="",children:r,iconNode:o,...l},u)=>E.createElement("svg",{ref:u,...uD,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:mA("lucide",a),...!r&&!cD(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,f])=>E.createElement(d,f)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(i,e)=>{const t=E.forwardRef(({className:n,...a},r)=>E.createElement(dD,{ref:r,iconNode:e,className:mA(`lucide-${oD(Xw(i))}`,`lucide-${i}`,n),...a}));return t.displayName=Xw(i),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M15 11a1 1 0 0 0 1 1h2.939a1 1 0 0 1 .75 1.811l-6.835 6.836a1.207 1.207 0 0 1-1.707 0L4.31 13.81a1 1 0 0 1 .75-1.811H8a1 1 0 0 0 1-1V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z",key:"1eaqc3"}]],hD=Xt("arrow-big-down",fD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M13 9a1 1 0 0 1-1-1V5.061a1 1 0 0 0-1.811-.75l-6.835 6.836a1.207 1.207 0 0 0 0 1.707l6.835 6.835a1 1 0 0 0 1.811-.75V16a1 1 0 0 1 1-1h6a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1z",key:"aztept"}]],pD=Xt("arrow-big-left",mD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],gD=Xt("arrow-big-right",xD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M9 13a1 1 0 0 0-1-1H5.061a1 1 0 0 1-.75-1.811l6.836-6.835a1.207 1.207 0 0 1 1.707 0l6.835 6.835a1 1 0 0 1-.75 1.811H16a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z",key:"lh0v7k"}]],yD=Xt("arrow-big-up",vD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],tu=Xt("arrow-down",bD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],SD=Xt("arrow-left-right",MD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ud=Xt("arrow-left",_D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kx=Xt("arrow-right",wD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],q0=Xt("arrow-up",jD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M10 22V7a1 1 0 0 0-1-1H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a1 1 0 0 0-1-1H2",key:"1ah6g2"}],["rect",{x:"14",y:"2",width:"8",height:"8",rx:"1",key:"88lufb"}]],TD=Xt("blocks",ED);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],CD=Xt("bomb",AD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Zp=Xt("book-open",ND);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],dS=Xt("box",RD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],LD=Xt("brain",DD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],PD=Xt("calculator",UD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pA=Xt("check",OD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],GD=Xt("chevron-left",zD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hy=Xt("chevron-right",ID);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BD=Xt("circle-check-big",kD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],VD=Xt("circle-dot",FD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xA=Xt("circle-question-mark",HD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o_=Xt("clock",qD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]],WD=Xt("corner-up-left",XD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]],ZD=Xt("corner-up-right",YD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],JD=Xt("crosshair",KD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$D=Xt("disc",QD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["circle",{cx:"12",cy:"6",r:"1",key:"1bh7o1"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}],["circle",{cx:"12",cy:"18",r:"1",key:"lqb9t5"}]],tL=Xt("divide",eL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],sL=Xt("droplets",nL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qy=Xt("eye",iL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],gA=Xt("flag",aL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],oL=Xt("flip-horizontal",rL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],cL=Xt("gamepad-2",lL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],dL=Xt("git-commit-horizontal",uL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],vA=Xt("grid-3x3",fL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mL=Xt("hash",hL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],xL=Xt("key",pL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Bv=Xt("layers",gL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],yL=Xt("layout-grid",vL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Xy=Xt("lightbulb",bL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],SL=Xt("link",ML);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],yA=Xt("lock",_L);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],jL=Xt("map",wL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],TL=Xt("message-square",EL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],CL=Xt("move",AL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],RL=Xt("navigation",NL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],bA=Xt("palette",DL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12",key:"1y3wsu"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z",key:"110lr1"}],["path",{d:"m2 22 .414-.414",key:"jhxm08"}]],UL=Xt("pipette",LL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],l_=Xt("play",PL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],zL=Xt("puzzle",OL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],MA=Xt("refresh-cw",GL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M16.466 7.5C15.643 4.237 13.952 2 12 2 9.239 2 7 6.477 7 12s2.239 10 5 10c.342 0 .677-.069 1-.2",key:"10n0gc"}],["path",{d:"m15.194 13.707 3.814 1.86-1.86 3.814",key:"16shm9"}],["path",{d:"M19 15.57c-1.804.885-4.274 1.43-7 1.43-5.523 0-10-2.239-10-5s4.477-5 10-5c4.838 0 8.873 1.718 9.8 4",key:"1lxi77"}]],kL=Xt("rotate-3d",IL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mx=Xt("rotate-ccw",BL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],c_=Xt("rotate-cw",FL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],HL=Xt("scale",VL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],XL=Xt("scissors",qL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],YL=Xt("search",WL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],SA=Xt("send",ZL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JL=Xt("settings",KL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],_A=Xt("shapes",QL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],wA=Xt("shuffle",$L);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M11 16.586V19a1 1 0 0 1-1 1H2L18.37 3.63a1 1 0 1 1 3 3l-9.663 9.663a1 1 0 0 1-1.414 0L8 14",key:"1sllp5"}]],t8=Xt("slice",e8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],s8=Xt("smile",n8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ww=Xt("sparkles",i8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],r8=Xt("square-check-big",a8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jA=Xt("star",o8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],EA=Xt("sun",l8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],u8=Xt("trending-up",c8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yw=Xt("triangle-alert",d8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],h8=Xt("trophy",f8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],p8=Xt("truck",m8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],g8=Xt("type",x8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],E2=Xt("wrench",v8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_a=Xt("x",y8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],TA=Xt("zap",b8),AA=30,M8=[{id:"all",label:"",emoji:"",color:"bg-gray-800"},{id:"logic",label:"",emoji:"",color:"bg-blue-500"},{id:"strategy",label:"",emoji:"",color:"bg-orange-500"},{id:"spatial",label:"",emoji:"",color:"bg-pink-500"},{id:"action",label:"",emoji:"",color:"bg-yellow-500"},{id:"word",label:"",emoji:"",color:"bg-green-500"}],Fp=[{id:Ut.RIDDLE_ME,name:"",description:"AI",icon:"HelpCircle",color:"bg-brand-yellow",category:"word",rules:["","","","",""]},{id:Ut.TRIVIA_BLAST,name:"",description:"",icon:"Lightbulb",color:"bg-fuchsia-400",category:"word",rules:["","","",""]},{id:Ut.EMOJI_CODE,name:"",description:"",icon:"Smile",color:"bg-amber-400",category:"word",rules:["","","",""]},{id:Ut.LOGIC_SYLLOGISM,name:"",description:"",icon:"Search",color:"bg-sky-400",category:"word",rules:["AB","","",""]},{id:Ut.CONNECTIONS,name:"",description:"",icon:"Layers",color:"bg-violet-400",category:"word",rules:["","","",""]},{id:Ut.STORY_SLEUTH,name:"",description:"",icon:"MessageSquare",color:"bg-pink-500",category:"word",rules:["","","",""]},{id:Ut.WORD_TWISTED,name:"",description:"",icon:"Type",color:"bg-brand-green",category:"word",rules:["","","",""]},{id:Ut.WORD_ASSOC,name:"",description:"",icon:"Link",color:"bg-teal-400",category:"word",rules:["->","","",""]},{id:Ut.FACT_OR_CAP,name:"",description:"",icon:"CheckSquare",color:"bg-rose-400",category:"word",rules:["","","",""]},{id:Ut.ODD_ONE_OUT,name:"",description:"",icon:"Eye",color:"bg-emerald-400",category:"word",rules:["","","",""]},{id:Ut.WHACK_A_MOLE,name:"",description:"",icon:"Zap",color:"bg-brand-orange",category:"action",rules:["","","",""]},{id:Ut.REACTION_Z,name:"",description:"",icon:"Clock",color:"bg-teal-400",category:"action",rules:["","","",""]},{id:Ut.PATTERN_MIND,name:"",description:"",icon:"Brain",color:"bg-red-400",category:"action",rules:["","","",""]},{id:Ut.MEMO_PATH,name:"",description:"",icon:"Map",color:"bg-cyan-500",category:"action",rules:["","","",""]},{id:Ut.SUDOKU_LITE,name:"",description:"",icon:"Grid",color:"bg-blue-500",category:"logic",rules:["4x414","1-4","2x21-4",""]},{id:Ut.LIGHTS_OUT,name:"",description:"",icon:"Sun",color:"bg-yellow-500",category:"logic",rules:["","",""]},{id:Ut.MINE_SWEEPER,name:"",description:"",icon:"Flag",color:"bg-rose-500",category:"logic",rules:["","8","",""]},{id:Ut.CODE_BREAKER,name:"",description:"",icon:"Lock",color:"bg-lime-500",category:"logic",rules:["4","","","",""]},{id:Ut.MATH_DASH,name:"",description:"",icon:"Hash",color:"bg-brand-purple",category:"logic",rules:["12 + 5","","",""]},{id:Ut.NUMBER_PATH,name:"",description:"",icon:"Hash",color:"bg-blue-400",category:"logic",rules:["","","",""]},{id:Ut.MERGE_2048,name:"",description:"",icon:"Divide",color:"bg-orange-300",category:"logic",rules:["","","2",""]},{id:Ut.BALANCE_SCALE,name:"",description:"",icon:"Scale",color:"bg-emerald-600",category:"logic",rules:["","","",""]},{id:Ut.NONOGRAM,name:"",description:"",icon:"LayoutGrid",color:"bg-stone-500",category:"logic",rules:["","/","331 1",""]},{id:Ut.SEQUENCE_SPY,name:"",description:"",icon:"Search",color:"bg-indigo-400",category:"logic",rules:["","23","",""]},{id:Ut.SLIDE_AWAY,name:"",description:"",icon:"Move",color:"bg-indigo-400",category:"strategy",rules:["","","1, 2, 3...",""]},{id:Ut.HANOI_SAGA,name:"",description:"",icon:"Disc",color:"bg-amber-600",category:"strategy",rules:["","","",""]},{id:Ut.SOKOBAN_GO,name:"",description:"",icon:"Box",color:"bg-orange-500",category:"strategy",rules:["","","",""]},{id:Ut.WATER_SORT,name:"",description:"",icon:"Droplets",color:"bg-cyan-400",category:"strategy",rules:["","","",""]},{id:Ut.UNBLOCK_RED,name:"",description:"",icon:"Truck",color:"bg-red-500",category:"strategy",rules:["","","",""]},{id:Ut.PEG_JUMP,name:"",description:"",icon:"CircleDot",color:"bg-amber-700",category:"strategy",rules:["","","",""]},{id:Ut.MEMORY_MATRIX,name:"",description:"",icon:"Grid",color:"bg-brand-pink",category:"spatial",rules:["","","",""]},{id:Ut.COLOR_FLOOD,name:"",description:"",icon:"Palette",color:"bg-brand-blue",category:"spatial",rules:["","","",""]},{id:Ut.PIPE_MASTER,name:"",description:"",icon:"GitCommit",color:"bg-cyan-600",category:"spatial",rules:["","","",""]},{id:Ut.SYMMETRY_DRAW,name:"",description:"",icon:"Scissors",color:"bg-pink-400",category:"spatial",rules:["","","",""]},{id:Ut.MAZE_RUNNER,name:"",description:"",icon:"Navigation",color:"bg-indigo-500",category:"spatial",rules:["","","",""]},{id:Ut.LINK_DOTS,name:"",description:"",icon:"TrendingUp",color:"bg-purple-500",category:"spatial",rules:["","","",""]},{id:Ut.LASER_BEAM,name:"",description:"",icon:"Crosshair",color:"bg-red-600",category:"spatial",rules:["","90","",""]},{id:Ut.TETRIS_FIT,name:"",description:"",icon:"Shapes",color:"bg-violet-500",category:"spatial",rules:["","","",""]},{id:Ut.GEAR_SYSTEM,name:"",description:"",icon:"Settings",color:"bg-slate-600",category:"spatial",rules:["","","",""]},{id:Ut.COLOR_MIXER,name:"",description:"",icon:"Pipette",color:"bg-fuchsia-500",category:"spatial",rules:["","(R)(G)(B)","",""]},{id:Ut.ROLL_CUBE,name:"",description:"",icon:"Rotate3D",color:"bg-blue-600",category:"spatial",rules:["","","",""]},{id:Ut.BRIDGE_CROSS,name:"",description:"",icon:"Link",color:"bg-sky-600",category:"spatial",rules:["","","",""]},{id:Ut.SHIFT_GRID,name:"",description:"",icon:"ArrowLeftRight",color:"bg-lime-600",category:"spatial",rules:["","","",""]}],S8={Brain:LD,Puzzle:zL,Hash:mL,Palette:bA,Type:g8,Zap:TA,Grid:vA,Eye:qy,Key:xL,MessageSquare:TL,Search:YL,Smile:s8,HelpCircle:xA,Lightbulb:Xy,Layers:Bv,Move:CL,Clock:o_,Lock:yA,CheckSquare:r8,Shuffle:wA,Sun:EA,Flag:gA,Map:jL,GitCommit:dL,Scissors:XL,TrendingUp:u8,Crosshair:JD,Scale:HL,Disc:$D,Navigation:RL,Box:dS,Divide:tL,Droplets:sL,LayoutGrid:yL,Truck:p8,CircleDot:VD,Shapes:_A,Settings:JL,Pipette:UL,Rotate3D:kL,Link:SL,ArrowLeftRight:SD},u_=E.createContext({});function d_(i){const e=E.useRef(null);return e.current===null&&(e.current=i()),e.current}const f_=typeof window<"u",CA=f_?E.useLayoutEffect:E.useEffect,Wy=E.createContext(null);function h_(i,e){i.indexOf(e)===-1&&i.push(e)}function m_(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const su=(i,e,t)=>t>e?e:t<i?i:t;let p_=()=>{};const iu={},NA=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function RA(i){return typeof i=="object"&&i!==null}const DA=i=>/^0[^.\s]+$/u.test(i);function x_(i){let e;return()=>(e===void 0&&(e=i()),e)}const Do=i=>i,_8=(i,e)=>t=>e(i(t)),Bx=(...i)=>i.reduce(_8),px=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};class g_{constructor(){this.subscriptions=[]}add(e){return h_(this.subscriptions,e),()=>m_(this.subscriptions,e)}notify(e,t,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,n);else for(let r=0;r<a;r++){const o=this.subscriptions[r];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sc=i=>i*1e3,Ro=i=>i/1e3;function LA(i,e){return e?i*(1e3/e):0}const UA=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,w8=1e-7,j8=12;function E8(i,e,t,n,a){let r,o,l=0;do o=e+(t-e)/2,r=UA(o,n,a)-i,r>0?t=o:e=o;while(Math.abs(r)>w8&&++l<j8);return o}function Fx(i,e,t,n){if(i===e&&t===n)return Do;const a=r=>E8(r,0,1,i,t);return r=>r===0||r===1?r:UA(a(r),e,n)}const PA=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,OA=i=>e=>1-i(1-e),zA=Fx(.33,1.53,.69,.99),v_=OA(zA),GA=PA(v_),IA=i=>(i*=2)<1?.5*v_(i):.5*(2-Math.pow(2,-10*(i-1))),y_=i=>1-Math.sin(Math.acos(i)),kA=OA(y_),BA=PA(y_),T8=Fx(.42,0,1,1),A8=Fx(0,0,.58,1),FA=Fx(.42,0,.58,1),C8=i=>Array.isArray(i)&&typeof i[0]!="number",VA=i=>Array.isArray(i)&&typeof i[0]=="number",N8={linear:Do,easeIn:T8,easeInOut:FA,easeOut:A8,circIn:y_,circInOut:BA,circOut:kA,backIn:v_,backInOut:GA,backOut:zA,anticipate:IA},R8=i=>typeof i=="string",Zw=i=>{if(VA(i)){p_(i.length===4);const[e,t,n,a]=i;return Fx(e,t,n,a)}else if(R8(i))return N8[i];return i},b1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function D8(i,e){let t=new Set,n=new Set,a=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(d.schedule(f),i()),f(l)}const d={schedule:(f,m=!1,x=!1)=>{const v=x&&a?t:n;return m&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(l=f,a){r=!0;return}a=!0,[t,n]=[n,t],t.forEach(u),t.clear(),a=!1,r&&(r=!1,d.process(f))}};return d}const L8=40;function HA(i,e){let t=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,o=b1.reduce((A,C)=>(A[C]=D8(r),A),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:f,update:m,preRender:x,render:g,postRender:v}=o,M=()=>{const A=iu.useManualTiming?a.timestamp:performance.now();t=!1,iu.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(A-a.timestamp,L8),1)),a.timestamp=A,a.isProcessing=!0,l.process(a),u.process(a),d.process(a),f.process(a),m.process(a),x.process(a),g.process(a),v.process(a),a.isProcessing=!1,t&&e&&(n=!1,i(M))},_=()=>{t=!0,n=!0,a.isProcessing||i(M)};return{schedule:b1.reduce((A,C)=>{const N=o[C];return A[C]=(R,O=!1,U=!1)=>(t||_(),N.schedule(R,O,U)),A},{}),cancel:A=>{for(let C=0;C<b1.length;C++)o[b1[C]].cancel(A)},state:a,steps:o}}const{schedule:ei,cancel:id,state:Ma,steps:T2}=HA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Do,!0);let Cv;function U8(){Cv=void 0}const Pr={now:()=>(Cv===void 0&&Pr.set(Ma.isProcessing||iu.useManualTiming?Ma.timestamp:performance.now()),Cv),set:i=>{Cv=i,queueMicrotask(U8)}},qA=i=>e=>typeof e=="string"&&e.startsWith(i),b_=qA("--"),P8=qA("var(--"),M_=i=>P8(i)?O8.test(i.split("/*")[0].trim()):!1,O8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,X0={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},xx={...X0,transform:i=>su(0,1,i)},M1={...X0,default:1},Kp=i=>Math.round(i*1e5)/1e5,S_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function z8(i){return i==null}const G8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,__=(i,e)=>t=>!!(typeof t=="string"&&G8.test(t)&&t.startsWith(i)||e&&!z8(t)&&Object.prototype.hasOwnProperty.call(t,e)),XA=(i,e,t)=>n=>{if(typeof n!="string")return n;const[a,r,o,l]=n.match(S_);return{[i]:parseFloat(a),[e]:parseFloat(r),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},I8=i=>su(0,255,i),A2={...X0,transform:i=>Math.round(I8(i))},_f={test:__("rgb","red"),parse:XA("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+A2.transform(i)+", "+A2.transform(e)+", "+A2.transform(t)+", "+Kp(xx.transform(n))+")"};function k8(i){let e="",t="",n="",a="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),a=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),a=i.substring(4,5),e+=e,t+=t,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const fS={test:__("#"),parse:k8,transform:_f.transform},Vx=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),$u=Vx("deg"),ic=Vx("%"),Sn=Vx("px"),B8=Vx("vh"),F8=Vx("vw"),Kw={...ic,parse:i=>ic.parse(i)/100,transform:i=>ic.transform(i*100)},g0={test:__("hsl","hue"),parse:XA("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+ic.transform(Kp(e))+", "+ic.transform(Kp(t))+", "+Kp(xx.transform(n))+")"},Oi={test:i=>_f.test(i)||fS.test(i)||g0.test(i),parse:i=>_f.test(i)?_f.parse(i):g0.test(i)?g0.parse(i):fS.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?_f.transform(i):g0.transform(i),getAnimatableNone:i=>{const e=Oi.parse(i);return e.alpha=0,Oi.transform(e)}},V8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function H8(i){var e,t;return isNaN(i)&&typeof i=="string"&&(((e=i.match(S_))==null?void 0:e.length)||0)+(((t=i.match(V8))==null?void 0:t.length)||0)>0}const WA="number",YA="color",q8="var",X8="var(",Jw="${}",W8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gx(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},a=[];let r=0;const l=e.replace(W8,u=>(Oi.test(u)?(n.color.push(r),a.push(YA),t.push(Oi.parse(u))):u.startsWith(X8)?(n.var.push(r),a.push(q8),t.push(u)):(n.number.push(r),a.push(WA),t.push(parseFloat(u))),++r,Jw)).split(Jw);return{values:t,split:l,indexes:n,types:a}}function ZA(i){return gx(i).values}function KA(i){const{split:e,types:t}=gx(i),n=e.length;return a=>{let r="";for(let o=0;o<n;o++)if(r+=e[o],a[o]!==void 0){const l=t[o];l===WA?r+=Kp(a[o]):l===YA?r+=Oi.transform(a[o]):r+=a[o]}return r}}const Y8=i=>typeof i=="number"?0:Oi.test(i)?Oi.getAnimatableNone(i):i;function Z8(i){const e=ZA(i);return KA(i)(e.map(Y8))}const ad={test:H8,parse:ZA,createTransformer:KA,getAnimatableNone:Z8};function C2(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function K8({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let a=0,r=0,o=0;if(!e)a=r=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;a=C2(u,l,i+1/3),r=C2(u,l,i),o=C2(u,l,i-1/3)}return{red:Math.round(a*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:n}}function Fv(i,e){return t=>t>0?e:i}const ui=(i,e,t)=>i+(e-i)*t,N2=(i,e,t)=>{const n=i*i,a=t*(e*e-n)+n;return a<0?0:Math.sqrt(a)},J8=[fS,_f,g0],Q8=i=>J8.find(e=>e.test(i));function Qw(i){const e=Q8(i);if(!e)return!1;let t=e.parse(i);return e===g0&&(t=K8(t)),t}const $w=(i,e)=>{const t=Qw(i),n=Qw(e);if(!t||!n)return Fv(i,e);const a={...t};return r=>(a.red=N2(t.red,n.red,r),a.green=N2(t.green,n.green,r),a.blue=N2(t.blue,n.blue,r),a.alpha=ui(t.alpha,n.alpha,r),_f.transform(a))},hS=new Set(["none","hidden"]);function $8(i,e){return hS.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function eU(i,e){return t=>ui(i,e,t)}function w_(i){return typeof i=="number"?eU:typeof i=="string"?M_(i)?Fv:Oi.test(i)?$w:sU:Array.isArray(i)?JA:typeof i=="object"?Oi.test(i)?$w:tU:Fv}function JA(i,e){const t=[...i],n=t.length,a=i.map((r,o)=>w_(r)(r,e[o]));return r=>{for(let o=0;o<n;o++)t[o]=a[o](r);return t}}function tU(i,e){const t={...i,...e},n={};for(const a in t)i[a]!==void 0&&e[a]!==void 0&&(n[a]=w_(i[a])(i[a],e[a]));return a=>{for(const r in n)t[r]=n[r](a);return t}}function nU(i,e){const t=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const r=e.types[a],o=i.indexes[r][n[r]],l=i.values[o]??0;t[a]=l,n[r]++}return t}const sU=(i,e)=>{const t=ad.createTransformer(e),n=gx(i),a=gx(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?hS.has(i)&&!a.values.length||hS.has(e)&&!n.values.length?$8(i,e):Bx(JA(nU(n,a),a.values),t):Fv(i,e)};function QA(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?ui(i,e,t):w_(i)(i,e)}const iU=i=>{const e=({timestamp:t})=>i(t);return{start:(t=!0)=>ei.update(e,t),stop:()=>id(e),now:()=>Ma.isProcessing?Ma.timestamp:Pr.now()}},$A=(i,e,t=10)=>{let n="";const a=Math.max(Math.round(e/t),2);for(let r=0;r<a;r++)n+=Math.round(i(r/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Vv=2e4;function j_(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<Vv;)e+=t,n=i.next(e);return e>=Vv?1/0:e}function aU(i,e=100,t){const n=t({...i,keyframes:[0,e]}),a=Math.min(j_(n),Vv);return{type:"keyframes",ease:r=>n.next(a*r).value/e,duration:Ro(a)}}const rU=5;function e4(i,e,t){const n=Math.max(e-rU,0);return LA(t-i(n),e-n)}const vi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},R2=.001;function oU({duration:i=vi.duration,bounce:e=vi.bounce,velocity:t=vi.velocity,mass:n=vi.mass}){let a,r,o=1-e;o=su(vi.minDamping,vi.maxDamping,o),i=su(vi.minDuration,vi.maxDuration,Ro(i)),o<1?(a=d=>{const f=d*o,m=f*i,x=f-t,g=mS(d,o),v=Math.exp(-m);return R2-x/g*v},r=d=>{const m=d*o*i,x=m*t+t,g=Math.pow(o,2)*Math.pow(d,2)*i,v=Math.exp(-m),M=mS(Math.pow(d,2),o);return(-a(d)+R2>0?-1:1)*((x-g)*v)/M}):(a=d=>{const f=Math.exp(-d*i),m=(d-t)*i+1;return-R2+f*m},r=d=>{const f=Math.exp(-d*i),m=(t-d)*(i*i);return f*m});const l=5/i,u=cU(a,r,l);if(i=sc(i),isNaN(u))return{stiffness:vi.stiffness,damping:vi.damping,duration:i};{const d=Math.pow(u,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:i}}}const lU=12;function cU(i,e,t){let n=t;for(let a=1;a<lU;a++)n=n-i(n)/e(n);return n}function mS(i,e){return i*Math.sqrt(1-e*e)}const uU=["duration","bounce"],dU=["stiffness","damping","mass"];function ej(i,e){return e.some(t=>i[t]!==void 0)}function fU(i){let e={velocity:vi.velocity,stiffness:vi.stiffness,damping:vi.damping,mass:vi.mass,isResolvedFromDuration:!1,...i};if(!ej(i,dU)&&ej(i,uU))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),a=n*n,r=2*su(.05,1,1-(i.bounce||0))*Math.sqrt(a);e={...e,mass:vi.mass,stiffness:a,damping:r}}else{const t=oU(i);e={...e,...t,mass:vi.mass},e.isResolvedFromDuration=!0}return e}function Hv(i=vi.visualDuration,e=vi.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:a}=t;const r=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:r},{stiffness:u,damping:d,mass:f,duration:m,velocity:x,isResolvedFromDuration:g}=fU({...t,velocity:-Ro(t.velocity||0)}),v=x||0,M=d/(2*Math.sqrt(u*f)),_=o-r,S=Ro(Math.sqrt(u/f)),j=Math.abs(_)<5;n||(n=j?vi.restSpeed.granular:vi.restSpeed.default),a||(a=j?vi.restDelta.granular:vi.restDelta.default);let A;if(M<1){const N=mS(S,M);A=R=>{const O=Math.exp(-M*S*R);return o-O*((v+M*S*_)/N*Math.sin(N*R)+_*Math.cos(N*R))}}else if(M===1)A=N=>o-Math.exp(-S*N)*(_+(v+S*_)*N);else{const N=S*Math.sqrt(M*M-1);A=R=>{const O=Math.exp(-M*S*R),U=Math.min(N*R,300);return o-O*((v+M*S*_)*Math.sinh(U)+N*_*Math.cosh(U))/N}}const C={calculatedDuration:g&&m||null,next:N=>{const R=A(N);if(g)l.done=N>=m;else{let O=N===0?v:0;M<1&&(O=N===0?sc(v):e4(A,N,R));const U=Math.abs(O)<=n,z=Math.abs(o-R)<=a;l.done=U&&z}return l.value=l.done?o:R,l},toString:()=>{const N=Math.min(j_(C),Vv),R=$A(O=>C.next(N*O).value,N,30);return N+"ms "+R},toTransition:()=>{}};return C}Hv.applyToOptions=i=>{const e=aU(i,100,Hv);return i.ease=e.ease,i.duration=sc(e.duration),i.type="keyframes",i};function pS({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:r=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:f}){const m=i[0],x={done:!1,value:m},g=U=>l!==void 0&&U<l||u!==void 0&&U>u,v=U=>l===void 0?u:u===void 0||Math.abs(l-U)<Math.abs(u-U)?l:u;let M=t*e;const _=m+M,S=o===void 0?_:o(_);S!==_&&(M=S-m);const j=U=>-M*Math.exp(-U/n),A=U=>S+j(U),C=U=>{const z=j(U),I=A(U);x.done=Math.abs(z)<=d,x.value=x.done?S:I};let N,R;const O=U=>{g(x.value)&&(N=U,R=Hv({keyframes:[x.value,v(x.value)],velocity:e4(A,U,x.value),damping:a,stiffness:r,restDelta:d,restSpeed:f}))};return O(0),{calculatedDuration:null,next:U=>{let z=!1;return!R&&N===void 0&&(z=!0,C(U),O(U)),N!==void 0&&U>=N?R.next(U-N):(!z&&C(U),x)}}}function hU(i,e,t){const n=[],a=t||iu.mix||QA,r=i.length-1;for(let o=0;o<r;o++){let l=a(i[o],i[o+1]);if(e){const u=Array.isArray(e)?e[o]||Do:e;l=Bx(u,l)}n.push(l)}return n}function mU(i,e,{clamp:t=!0,ease:n,mixer:a}={}){const r=i.length;if(p_(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),e=[...e].reverse());const l=hU(e,n,a),u=l.length,d=f=>{if(o&&f<i[0])return e[0];let m=0;if(u>1)for(;m<i.length-2&&!(f<i[m+1]);m++);const x=px(i[m],i[m+1],f);return l[m](x)};return t?f=>d(su(i[0],i[r-1],f)):d}function pU(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const a=px(0,e,n);i.push(ui(t,1,a))}}function xU(i){const e=[0];return pU(e,i.length-1),e}function gU(i,e){return i.map(t=>t*e)}function vU(i,e){return i.map(()=>e||FA).splice(0,i.length-1)}function Jp({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const a=C8(n)?n.map(Zw):Zw(n),r={done:!1,value:e[0]},o=gU(t&&t.length===e.length?t:xU(e),i),l=mU(o,e,{ease:Array.isArray(a)?a:vU(e,a)});return{calculatedDuration:i,next:u=>(r.value=l(u),r.done=u>=i,r)}}const yU=i=>i!==null;function E_(i,{repeat:e,repeatType:t="loop"},n,a=1){const r=i.filter(yU),l=a<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!l||n===void 0?r[l]:n}const bU={decay:pS,inertia:pS,tween:Jp,keyframes:Jp,spring:Hv};function t4(i){typeof i.type=="string"&&(i.type=bU[i.type])}class T_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const MU=i=>i/100;class A_ extends T_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,a;const{motionValue:t}=this.options;t&&t.updatedAt!==Pr.now()&&this.tick(Pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(n=this.options).onStop)==null||a.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;t4(e);const{type:t=Jp,repeat:n=0,repeatDelay:a=0,repeatType:r,velocity:o=0}=e;let{keyframes:l}=e;const u=t||Jp;u!==Jp&&typeof l[0]!="number"&&(this.mixKeyframes=Bx(MU,QA(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});r==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=j_(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:a,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:f,repeat:m,repeatType:x,repeatDelay:g,type:v,onUpdate:M,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-d*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?S<0:S>a;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let A=this.currentTime,C=n;if(m){const U=Math.min(this.currentTime,a)/l;let z=Math.floor(U),I=U%1;!I&&U>=1&&(I=1),I===1&&z--,z=Math.min(z,m+1),!!(z%2)&&(x==="reverse"?(I=1-I,g&&(I-=g/l)):x==="mirror"&&(C=o)),A=su(0,1,I)*l}const N=j?{done:!1,value:f[0]}:C.next(A);r&&(N.value=r(N.value));let{done:R}=N;!j&&u!==null&&(R=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return O&&v!==pS&&(N.value=E_(f,this.options,_,this.speed)),M&&M(N.value),O&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return Ro(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ro(e)}get time(){return Ro(this.currentTime)}set time(e){var t;e=sc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ro(this.currentTime))}play(){var a,r;if(this.isStopped)return;const{driver:e=iU,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(r=(a=this.options).onPlay)==null||r.call(a);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function SU(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const wf=i=>i*180/Math.PI,xS=i=>{const e=wf(Math.atan2(i[1],i[0]));return gS(e)},_U={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:xS,rotateZ:xS,skewX:i=>wf(Math.atan(i[1])),skewY:i=>wf(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},gS=i=>(i=i%360,i<0&&(i+=360),i),tj=xS,nj=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),sj=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),wU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nj,scaleY:sj,scale:i=>(nj(i)+sj(i))/2,rotateX:i=>gS(wf(Math.atan2(i[6],i[5]))),rotateY:i=>gS(wf(Math.atan2(-i[2],i[0]))),rotateZ:tj,rotate:tj,skewX:i=>wf(Math.atan(i[4])),skewY:i=>wf(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function vS(i){return i.includes("scale")?1:0}function yS(i,e){if(!i||i==="none")return vS(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(t)n=wU,a=t;else{const l=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=_U,a=l}if(!a)return vS(e);const r=n[e],o=a[1].split(",").map(EU);return typeof r=="function"?r(o):o[r]}const jU=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return yS(t,e)};function EU(i){return parseFloat(i.trim())}const W0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Y0=new Set(W0),ij=i=>i===X0||i===Sn,TU=new Set(["x","y","z"]),AU=W0.filter(i=>!TU.has(i));function CU(i){const e=[];return AU.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Nf={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>yS(e,"x"),y:(i,{transform:e})=>yS(e,"y")};Nf.translateX=Nf.x;Nf.translateY=Nf.y;const Rf=new Set;let bS=!1,MS=!1,SS=!1;function n4(){if(MS){const i=Array.from(Rf).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const a=CU(n);a.length&&(t.set(n,a),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=t.get(n);a&&a.forEach(([r,o])=>{var l;(l=n.getValue(r))==null||l.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}MS=!1,bS=!1,Rf.forEach(i=>i.complete(SS)),Rf.clear()}function s4(){Rf.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(MS=!0)})}function NU(){SS=!0,s4(),n4(),SS=!1}class C_{constructor(e,t,n,a,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=a,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Rf.add(this),bS||(bS=!0,ei.read(s4),ei.resolveKeyframes(n4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:a}=this;if(e[0]===null){const r=a==null?void 0:a.get(),o=e[e.length-1];if(r!==void 0)e[0]=r;else if(n&&t){const l=n.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&r===void 0&&a.set(e[0])}SU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Rf.delete(this)}cancel(){this.state==="scheduled"&&(Rf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const RU=i=>i.startsWith("--");function DU(i,e,t){RU(e)?i.style.setProperty(e,t):i.style[e]=t}const LU=x_(()=>window.ScrollTimeline!==void 0),UU={};function PU(i,e){const t=x_(i);return()=>UU[e]??t()}const i4=PU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vp=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,aj={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vp([0,.65,.55,1]),circOut:Vp([.55,0,1,.45]),backIn:Vp([.31,.01,.66,-.59]),backOut:Vp([.33,1.53,.69,.99])};function a4(i,e){if(i)return typeof i=="function"?i4()?$A(i,e):"ease-out":VA(i)?Vp(i):Array.isArray(i)?i.map(t=>a4(t,e)||aj.easeOut):aj[i]}function OU(i,e,t,{delay:n=0,duration:a=300,repeat:r=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const f={[e]:t};u&&(f.offset=u);const m=a4(l,a);Array.isArray(m)&&(f.easing=m);const x={delay:n,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return d&&(x.pseudoElement=d),i.animate(f,x)}function r4(i){return typeof i=="function"&&"applyToOptions"in i}function zU({type:i,...e}){return r4(i)&&i4()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class GU extends T_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:a,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=e,p_(typeof e.type!="string");const d=zU(e);this.animation=OU(t,n,a,d,r),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const f=E_(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):DU(t,n,f),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return Ro(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ro(e)}get time(){return Ro(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=sc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&LU()?(this.animation.timeline=e,Do):t(this)}}const o4={anticipate:IA,backInOut:GA,circInOut:BA};function IU(i){return i in o4}function kU(i){typeof i.ease=="string"&&IU(i.ease)&&(i.ease=o4[i.ease])}const rj=10;class BU extends GU{constructor(e){kU(e),t4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:a,element:r,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new A_({...o,autoplay:!1}),u=sc(this.finishedTime??this.time);t.setWithVelocity(l.sample(u-rj).value,l.sample(u).value,rj),l.stop()}}const oj=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(ad.test(i)||i==="0")&&!i.startsWith("url("));function FU(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function VU(i,e,t,n){const a=i[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const r=i[i.length-1],o=oj(a,e),l=oj(r,e);return!o||!l?!1:FU(i)||(t==="spring"||r4(t))&&n}function _S(i){i.duration=0,i.type="keyframes"}const HU=new Set(["opacity","clipPath","filter","transform"]),qU=x_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XU(i){var f;const{motionValue:e,name:t,repeatDelay:n,repeatType:a,damping:r,type:o}=i;if(!(((f=e==null?void 0:e.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return qU()&&t&&HU.has(t)&&(t!=="transform"||!d)&&!u&&!n&&a!=="mirror"&&r!==0&&o!=="inertia"}const WU=40;class YU extends T_{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:a=0,repeatDelay:r=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:f,...m}){var v;super(),this.stop=()=>{var M,_;this._animation&&(this._animation.stop(),(M=this.stopTimeline)==null||M.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Pr.now();const x={autoplay:e,delay:t,type:n,repeat:a,repeatDelay:r,repeatType:o,name:u,motionValue:d,element:f,...m},g=(f==null?void 0:f.KeyframeResolver)||C_;this.keyframeResolver=new g(l,(M,_,S)=>this.onKeyframesResolved(M,_,x,!S),u,d,f),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,t,n,a){this.keyframeResolver=void 0;const{name:r,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:f}=n;this.resolvedAt=Pr.now(),VU(e,r,o,l)||((iu.instantAnimations||!u)&&(f==null||f(E_(e,n,t))),e[0]=e[e.length-1],_S(n),n.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>WU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},g=!d&&XU(x)?new BU({...x,element:x.motionValue.owner.current}):new A_(x);g.finished.then(()=>this.notifyFinished()).catch(Do),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),NU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ZU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KU(i){const e=ZU.exec(i);if(!e)return[,];const[,t,n,a]=e;return[`--${t??n}`,a]}function l4(i,e,t=1){const[n,a]=KU(i);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const o=r.trim();return NA(o)?parseFloat(o):o}return M_(a)?l4(a,e,t+1):a}function N_(i,e){return(i==null?void 0:i[e])??(i==null?void 0:i.default)??i}const c4=new Set(["width","height","top","left","right","bottom",...W0]),JU={test:i=>i==="auto",parse:i=>i},u4=i=>e=>e.test(i),d4=[X0,Sn,ic,$u,F8,B8,JU],lj=i=>d4.find(u4(i));function QU(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||DA(i):!0}const $U=new Set(["brightness","contrast","saturate","opacity"]);function eP(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(S_)||[];if(!n)return i;const a=t.replace(n,"");let r=$U.has(e)?1:0;return n!==t&&(r*=100),e+"("+r+a+")"}const tP=/\b([a-z-]*)\(.*?\)/gu,wS={...ad,getAnimatableNone:i=>{const e=i.match(tP);return e?e.map(eP).join(" "):i}},cj={...X0,transform:Math.round},nP={rotate:$u,rotateX:$u,rotateY:$u,rotateZ:$u,scale:M1,scaleX:M1,scaleY:M1,scaleZ:M1,skew:$u,skewX:$u,skewY:$u,distance:Sn,translateX:Sn,translateY:Sn,translateZ:Sn,x:Sn,y:Sn,z:Sn,perspective:Sn,transformPerspective:Sn,opacity:xx,originX:Kw,originY:Kw,originZ:Sn},R_={borderWidth:Sn,borderTopWidth:Sn,borderRightWidth:Sn,borderBottomWidth:Sn,borderLeftWidth:Sn,borderRadius:Sn,radius:Sn,borderTopLeftRadius:Sn,borderTopRightRadius:Sn,borderBottomRightRadius:Sn,borderBottomLeftRadius:Sn,width:Sn,maxWidth:Sn,height:Sn,maxHeight:Sn,top:Sn,right:Sn,bottom:Sn,left:Sn,padding:Sn,paddingTop:Sn,paddingRight:Sn,paddingBottom:Sn,paddingLeft:Sn,margin:Sn,marginTop:Sn,marginRight:Sn,marginBottom:Sn,marginLeft:Sn,backgroundPositionX:Sn,backgroundPositionY:Sn,...nP,zIndex:cj,fillOpacity:xx,strokeOpacity:xx,numOctaves:cj},sP={...R_,color:Oi,backgroundColor:Oi,outlineColor:Oi,fill:Oi,stroke:Oi,borderColor:Oi,borderTopColor:Oi,borderRightColor:Oi,borderBottomColor:Oi,borderLeftColor:Oi,filter:wS,WebkitFilter:wS},f4=i=>sP[i];function h4(i,e){let t=f4(i);return t!==wS&&(t=ad),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const iP=new Set(["auto","none","0"]);function aP(i,e,t){let n=0,a;for(;n<i.length&&!a;){const r=i[n];typeof r=="string"&&!iP.has(r)&&gx(r).values.length&&(a=i[n]),n++}if(a&&t)for(const r of e)i[r]=h4(t,a)}class rP extends C_{constructor(e,t,n,a,r){super(e,t,n,a,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),M_(d))){const f=l4(d,t.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!c4.has(n)||e.length!==2)return;const[a,r]=e,o=lj(a),l=lj(r);if(o!==l)if(ij(o)&&ij(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else Nf[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||QU(e[a]))&&n.push(a);n.length&&aP(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(t);a&&a.jump(this.measuredOrigin,!1);const r=n.length-1,o=n[r];n[r]=Nf[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function oP(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const a=(t==null?void 0:t[i])??n.querySelectorAll(i);return a?Array.from(a):[]}return Array.from(i)}const m4=(i,e)=>e&&typeof i=="number"?e.transform(i):i;function p4(i){return RA(i)&&"offsetHeight"in i}const uj=30,lP=i=>!isNaN(parseFloat(i));class cP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var r;const a=Pr.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new g_);const n=this.events[e].add(t);return e==="change"?()=>{n(),ei.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>uj)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,uj);return LA(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function A0(i,e){return new cP(i,e)}const{schedule:D_}=HA(queueMicrotask,!1),dl={x:!1,y:!1};function x4(){return dl.x||dl.y}function uP(i){return i==="x"||i==="y"?dl[i]?null:(dl[i]=!0,()=>{dl[i]=!1}):dl.x||dl.y?null:(dl.x=dl.y=!0,()=>{dl.x=dl.y=!1})}function g4(i,e){const t=oP(i),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[t,a,()=>n.abort()]}function dj(i){return!(i.pointerType==="touch"||x4())}function dP(i,e,t={}){const[n,a,r]=g4(i,t),o=l=>{if(!dj(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const f=m=>{dj(m)&&(d(m),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,a)};return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),r}const v4=(i,e)=>e?i===e?!0:v4(i,e.parentElement):!1,L_=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,fP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hP(i){return fP.has(i.tagName)||i.tabIndex!==-1}const Nv=new WeakSet;function fj(i){return e=>{e.key==="Enter"&&i(e)}}function D2(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mP=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=fj(()=>{if(Nv.has(t))return;D2(t,"down");const a=fj(()=>{D2(t,"up")}),r=()=>D2(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function hj(i){return L_(i)&&!x4()}function pP(i,e,t={}){const[n,a,r]=g4(i,t),o=l=>{const u=l.currentTarget;if(!hj(l))return;Nv.add(u);const d=e(u,l),f=(g,v)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),Nv.has(u)&&Nv.delete(u),hj(g)&&typeof d=="function"&&d(g,{success:v})},m=g=>{f(g,u===window||u===document||t.useGlobalTarget||v4(u,g.target))},x=g=>{f(g,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",x,a)};return n.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),p4(l)&&(l.addEventListener("focus",d=>mP(d,a)),!hP(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function y4(i){return RA(i)&&"ownerSVGElement"in i}function xP(i){return y4(i)&&i.tagName==="svg"}const Ha=i=>!!(i&&i.getVelocity),gP=[...d4,Oi,ad],vP=i=>gP.find(u4(i)),U_=E.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function mj(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function yP(...i){return e=>{let t=!1;const n=i.map(a=>{const r=mj(a,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let a=0;a<n.length;a++){const r=n[a];typeof r=="function"?r():mj(i[a],null)}}}}function bP(...i){return E.useCallback(yP(...i),i)}class MP extends E.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,a=p4(n)&&n.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=a-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function SP({children:i,isPresent:e,anchorX:t,root:n}){const a=E.useId(),r=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=E.useContext(U_),u=bP(r,i==null?void 0:i.ref);return E.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:x,right:g}=o.current;if(e||!r.current||!d||!f)return;const v=t==="left"?`left: ${x}`:`right: ${g}`;r.current.dataset.motionPopId=a;const M=document.createElement("style");l&&(M.nonce=l);const _=n??document.head;return _.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${v}px !important;
            top: ${m}px !important;
          }
        `),()=>{_.contains(M)&&_.removeChild(M)}},[e]),s.jsx(MP,{isPresent:e,childRef:r,sizeRef:o,children:E.cloneElement(i,{ref:u})})}const _P=({children:i,initial:e,isPresent:t,onExitComplete:n,custom:a,presenceAffectsLayout:r,mode:o,anchorX:l,root:u})=>{const d=d_(wP),f=E.useId();let m=!0,x=E.useMemo(()=>(m=!1,{id:f,initial:e,isPresent:t,custom:a,onExitComplete:g=>{d.set(g,!0);for(const v of d.values())if(!v)return;n&&n()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[t,d,n]);return r&&m&&(x={...x}),E.useMemo(()=>{d.forEach((g,v)=>d.set(v,!1))},[t]),E.useEffect(()=>{!t&&!d.size&&n&&n()},[t]),o==="popLayout"&&(i=s.jsx(SP,{isPresent:t,anchorX:l,root:u,children:i})),s.jsx(Wy.Provider,{value:x,children:i})};function wP(){return new Map}function b4(i=!0){const e=E.useContext(Wy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:a}=e,r=E.useId();E.useEffect(()=>{if(i)return a(r)},[i]);const o=E.useCallback(()=>i&&n&&n(r),[r,n,i]);return!t&&n?[!1,o]:[!0]}const S1=i=>i.key||"";function pj(i){const e=[];return E.Children.forEach(i,t=>{E.isValidElement(t)&&e.push(t)}),e}const jP=({children:i,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:r="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,f]=b4(o),m=E.useMemo(()=>pj(i),[i]),x=o&&!d?[]:m.map(S1),g=E.useRef(!0),v=E.useRef(m),M=d_(()=>new Map),[_,S]=E.useState(m),[j,A]=E.useState(m);CA(()=>{g.current=!1,v.current=m;for(let R=0;R<j.length;R++){const O=S1(j[R]);x.includes(O)?M.delete(O):M.get(O)!==!0&&M.set(O,!1)}},[j,x.length,x.join("-")]);const C=[];if(m!==_){let R=[...m];for(let O=0;O<j.length;O++){const U=j[O],z=S1(U);x.includes(z)||(R.splice(O,0,U),C.push(U))}return r==="wait"&&C.length&&(R=C),A(pj(R)),S(m),null}const{forceRender:N}=E.useContext(u_);return s.jsx(s.Fragment,{children:j.map(R=>{const O=S1(R),U=o&&!d?!1:m===j||x.includes(O),z=()=>{if(M.has(O))M.set(O,!0);else return;let I=!0;M.forEach(V=>{V||(I=!1)}),I&&(N==null||N(),A(v.current),o&&(f==null||f()),n&&n())};return s.jsx(_P,{isPresent:U,initial:!g.current||t?void 0:!1,custom:e,presenceAffectsLayout:a,mode:r,root:u,onExitComplete:U?void 0:z,anchorX:l,children:R},O)})})},M4=E.createContext({strict:!1}),xj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},C0={};for(const i in xj)C0[i]={isEnabled:e=>xj[i].some(t=>!!e[t])};function EP(i){for(const e in i)C0[e]={...C0[e],...i[e]}}const TP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qv(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||TP.has(i)}let S4=i=>!qv(i);function AP(i){typeof i=="function"&&(S4=e=>e.startsWith("on")?!qv(e):i(e))}try{AP(require("@emotion/is-prop-valid").default)}catch{}function CP(i,e,t){const n={};for(const a in i)a==="values"&&typeof i.values=="object"||(S4(a)||t===!0&&qv(a)||!e&&!qv(a)||i.draggable&&a.startsWith("onDrag"))&&(n[a]=i[a]);return n}const Yy=E.createContext({});function Zy(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function vx(i){return typeof i=="string"||Array.isArray(i)}const P_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],O_=["initial",...P_];function Ky(i){return Zy(i.animate)||O_.some(e=>vx(i[e]))}function _4(i){return!!(Ky(i)||i.variants)}function NP(i,e){if(Ky(i)){const{initial:t,animate:n}=i;return{initial:t===!1||vx(t)?t:void 0,animate:vx(n)?n:void 0}}return i.inherit!==!1?e:{}}function RP(i){const{initial:e,animate:t}=NP(i,E.useContext(Yy));return E.useMemo(()=>({initial:e,animate:t}),[gj(e),gj(t)])}function gj(i){return Array.isArray(i)?i.join(" "):i}const yx={};function DP(i){for(const e in i)yx[e]=i[e],b_(e)&&(yx[e].isCSSVariable=!0)}function w4(i,{layout:e,layoutId:t}){return Y0.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!yx[i]||i==="opacity")}const LP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UP=W0.length;function PP(i,e,t){let n="",a=!0;for(let r=0;r<UP;r++){const o=W0[r],l=i[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const d=m4(l,R_[o]);if(!u){a=!1;const f=LP[o]||o;n+=`${f}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,a?"":n):a&&(n="none"),n}function z_(i,e,t){const{style:n,vars:a,transformOrigin:r}=i;let o=!1,l=!1;for(const u in e){const d=e[u];if(Y0.has(u)){o=!0;continue}else if(b_(u)){a[u]=d;continue}else{const f=m4(d,R_[u]);u.startsWith("origin")?(l=!0,r[u]=f):n[u]=f}}if(e.transform||(o||t?n.transform=PP(e,i.transform,t):n.transform&&(n.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=r;n.transformOrigin=`${u} ${d} ${f}`}}const G_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function j4(i,e,t){for(const n in e)!Ha(e[n])&&!w4(n,t)&&(i[n]=e[n])}function OP({transformTemplate:i},e){return E.useMemo(()=>{const t=G_();return z_(t,e,i),Object.assign({},t.vars,t.style)},[e])}function zP(i,e){const t=i.style||{},n={};return j4(n,t,i),Object.assign(n,OP(i,e)),n}function GP(i,e){const t={},n=zP(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const IP={offset:"stroke-dashoffset",array:"stroke-dasharray"},kP={offset:"strokeDashoffset",array:"strokeDasharray"};function BP(i,e,t=1,n=0,a=!0){i.pathLength=1;const r=a?IP:kP;i[r.offset]=Sn.transform(-n);const o=Sn.transform(e),l=Sn.transform(t);i[r.array]=`${o} ${l}`}function E4(i,{attrX:e,attrY:t,attrScale:n,pathLength:a,pathSpacing:r=1,pathOffset:o=0,...l},u,d,f){if(z_(i,l,d),u){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:m,style:x}=i;m.transform&&(x.transform=m.transform,delete m.transform),(x.transform||m.transformOrigin)&&(x.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),x.transform&&(x.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),a!==void 0&&BP(m,a,r,o,!1)}const T4=()=>({...G_(),attrs:{}}),A4=i=>typeof i=="string"&&i.toLowerCase()==="svg";function FP(i,e,t,n){const a=E.useMemo(()=>{const r=T4();return E4(r,e,A4(n),i.transformTemplate,i.style),{...r.attrs,style:{...r.style}}},[e]);if(i.style){const r={};j4(r,i.style,i),a.style={...r,...a.style}}return a}const VP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function I_(i){return typeof i!="string"||i.includes("-")?!1:!!(VP.indexOf(i)>-1||/[A-Z]/u.test(i))}function HP(i,e,t,{latestValues:n},a,r=!1){const l=(I_(i)?FP:GP)(e,n,a,i),u=CP(e,typeof i=="string",r),d=i!==E.Fragment?{...u,...l,ref:t}:{},{children:f}=e,m=E.useMemo(()=>Ha(f)?f.get():f,[f]);return E.createElement(i,{...d,children:m})}function vj(i){const e=[{},{}];return i==null||i.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function k_(i,e,t,n){if(typeof e=="function"){const[a,r]=vj(n);e=e(t!==void 0?t:i.custom,a,r)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[a,r]=vj(n);e=e(t!==void 0?t:i.custom,a,r)}return e}function Rv(i){return Ha(i)?i.get():i}function qP({scrapeMotionValuesFromProps:i,createRenderState:e},t,n,a){return{latestValues:XP(t,n,a,i),renderState:e()}}function XP(i,e,t,n){const a={},r=n(i,{});for(const x in r)a[x]=Rv(r[x]);let{initial:o,animate:l}=i;const u=Ky(i),d=_4(i);e&&d&&!u&&i.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const m=f?l:o;if(m&&typeof m!="boolean"&&!Zy(m)){const x=Array.isArray(m)?m:[m];for(let g=0;g<x.length;g++){const v=k_(i,x[g]);if(v){const{transitionEnd:M,transition:_,...S}=v;for(const j in S){let A=S[j];if(Array.isArray(A)){const C=f?A.length-1:0;A=A[C]}A!==null&&(a[j]=A)}for(const j in M)a[j]=M[j]}}}return a}const C4=i=>(e,t)=>{const n=E.useContext(Yy),a=E.useContext(Wy),r=()=>qP(i,e,n,a);return t?r():d_(r)};function B_(i,e,t){var r;const{style:n}=i,a={};for(const o in n)(Ha(n[o])||e.style&&Ha(e.style[o])||w4(o,i)||((r=t==null?void 0:t.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(a[o]=n[o]);return a}const WP=C4({scrapeMotionValuesFromProps:B_,createRenderState:G_});function N4(i,e,t){const n=B_(i,e,t);for(const a in i)if(Ha(i[a])||Ha(e[a])){const r=W0.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[r]=i[a]}return n}const YP=C4({scrapeMotionValuesFromProps:N4,createRenderState:T4}),ZP=Symbol.for("motionComponentSymbol");function v0(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function KP(i,e,t){return E.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):v0(t)&&(t.current=n))},[e])}const F_=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JP="framerAppearId",R4="data-"+F_(JP),D4=E.createContext({});function QP(i,e,t,n,a){var M,_;const{visualElement:r}=E.useContext(Yy),o=E.useContext(M4),l=E.useContext(Wy),u=E.useContext(U_).reducedMotion,d=E.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(i,{visualState:e,parent:r,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,m=E.useContext(D4);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&$P(d.current,t,a,m);const x=E.useRef(!1);E.useInsertionEffect(()=>{f&&x.current&&f.update(t,l)});const g=t[R4],v=E.useRef(!!g&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,g))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,g)));return CA(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),v.current&&f.animationState&&f.animationState.animateChanges())}),E.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,g)}),v.current=!1),f.enteringChildren=void 0)}),f}function $P(i,e,t,n){const{layoutId:a,layout:r,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:f}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:L4(i.parent)),i.projection.setOptions({layoutId:a,layout:r,alwaysMeasureLayout:!!o||l&&v0(l),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:f,layoutScroll:u,layoutRoot:d})}function L4(i){if(i)return i.options.allowProjection!==!1?i.projection:L4(i.parent)}function L2(i,{forwardMotionProps:e=!1}={},t,n){t&&EP(t);const a=I_(i)?YP:WP;function r(l,u){let d;const f={...E.useContext(U_),...l,layoutId:eO(l)},{isStatic:m}=f,x=RP(l),g=a(l,m);if(!m&&f_){tO();const v=nO(f);d=v.MeasureLayout,x.visualElement=QP(i,g,f,n,v.ProjectionNode)}return s.jsxs(Yy.Provider,{value:x,children:[d&&x.visualElement?s.jsx(d,{visualElement:x.visualElement,...f}):null,HP(i,l,KP(g,x.visualElement,u),g,m,e)]})}r.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=E.forwardRef(r);return o[ZP]=i,o}function eO({layoutId:i}){const e=E.useContext(u_).id;return e&&i!==void 0?e+"-"+i:i}function tO(i,e){E.useContext(M4).strict}function nO(i){const{drag:e,layout:t}=C0;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(i)||t!=null&&t.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function sO(i,e){if(typeof Proxy>"u")return L2;const t=new Map,n=(r,o)=>L2(r,o,i,e),a=(r,o)=>n(r,o);return new Proxy(a,{get:(r,o)=>o==="create"?n:(t.has(o)||t.set(o,L2(o,void 0,i,e)),t.get(o))})}function U4({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function iO({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function aO(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function U2(i){return i===void 0||i===1}function jS({scale:i,scaleX:e,scaleY:t}){return!U2(i)||!U2(e)||!U2(t)}function gf(i){return jS(i)||P4(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function P4(i){return yj(i.x)||yj(i.y)}function yj(i){return i&&i!=="0%"}function Xv(i,e,t){const n=i-t,a=e*n;return t+a}function bj(i,e,t,n,a){return a!==void 0&&(i=Xv(i,a,n)),Xv(i,t,n)+e}function ES(i,e=0,t=1,n,a){i.min=bj(i.min,e,t,n,a),i.max=bj(i.max,e,t,n,a)}function O4(i,{x:e,y:t}){ES(i.x,e.translate,e.scale,e.originPoint),ES(i.y,t.translate,t.scale,t.originPoint)}const Mj=.999999999999,Sj=1.0000000000001;function rO(i,e,t,n=!1){const a=t.length;if(!a)return;e.x=e.y=1;let r,o;for(let l=0;l<a;l++){r=t[l],o=r.projectionDelta;const{visualElement:u}=r.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&b0(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,O4(i,o)),n&&gf(r.latestValues)&&b0(i,r.latestValues))}e.x<Sj&&e.x>Mj&&(e.x=1),e.y<Sj&&e.y>Mj&&(e.y=1)}function y0(i,e){i.min=i.min+e,i.max=i.max+e}function _j(i,e,t,n,a=.5){const r=ui(i.min,i.max,a);ES(i,e,t,r,n)}function b0(i,e){_j(i.x,e.x,e.scaleX,e.scale,e.originX),_j(i.y,e.y,e.scaleY,e.scale,e.originY)}function z4(i,e){return U4(aO(i.getBoundingClientRect(),e))}function oO(i,e,t){const n=z4(i,t),{scroll:a}=e;return a&&(y0(n.x,a.offset.x),y0(n.y,a.offset.y)),n}const wj=()=>({translate:0,scale:1,origin:0,originPoint:0}),M0=()=>({x:wj(),y:wj()}),jj=()=>({min:0,max:0}),Ei=()=>({x:jj(),y:jj()}),TS={current:null},G4={current:!1};function lO(){if(G4.current=!0,!!f_)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>TS.current=i.matches;i.addEventListener("change",e),e()}else TS.current=!1}const cO=new WeakMap;function uO(i,e,t){for(const n in e){const a=e[n],r=t[n];if(Ha(a))i.addValue(n,a);else if(Ha(r))i.addValue(n,A0(a,{owner:i}));else if(r!==a)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=i.getStaticValue(n);i.addValue(n,A0(o!==void 0?o:a,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const Ej=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dO{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:r,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=C_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Pr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ei.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=Ky(t),this.isVariantNode=_4(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in m){const g=m[x];u[x]!==void 0&&Ha(g)&&g.set(u[x])}}mount(e){var t;this.current=e,cO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),G4.current||lO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:TS.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),id(this.notifyUpdate),id(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Y0.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ei.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in C0){const t=C0[e];if(!t)continue;const{isEnabled:n,Feature:a}=t;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ei()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Ej.length;n++){const a=Ej[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const r="on"+a,o=e[r];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=uO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=A0(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(NA(n)||DA(n))?n=parseFloat(n):!vP(n)&&ad.test(t)&&(n=h4(e,t)),this.setBaseTarget(e,Ha(n)?n.get():n)),Ha(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const o=k_(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);o&&(n=o[e])}if(t&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ha(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new g_),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){D_.render(this.render)}}class I4 extends dO{constructor(){super(...arguments),this.KeyframeResolver=rP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ha(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function k4(i,{style:e,vars:t},n,a){const r=i.style;let o;for(o in e)r[o]=e[o];a==null||a.applyProjectionStyles(r,n);for(o in t)r.setProperty(o,t[o])}function fO(i){return window.getComputedStyle(i)}class hO extends I4{constructor(){super(...arguments),this.type="html",this.renderInstance=k4}readValueFromInstance(e,t){var n;if(Y0.has(t))return(n=this.projection)!=null&&n.isProjecting?vS(t):jU(e,t);{const a=fO(e),r=(b_(t)?a.getPropertyValue(t):a[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return z4(e,t)}build(e,t,n){z_(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return B_(e,t,n)}}const B4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mO(i,e,t,n){k4(i,e,void 0,n);for(const a in e.attrs)i.setAttribute(B4.has(a)?a:F_(a),e.attrs[a])}class pO extends I4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ei}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Y0.has(t)){const n=f4(t);return n&&n.default||0}return t=B4.has(t)?t:F_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return N4(e,t,n)}build(e,t,n){E4(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,a){mO(e,t,n,a)}mount(e){this.isSVGTag=A4(e.tagName),super.mount(e)}}const xO=(i,e)=>I_(i)?new pO(e):new hO(e,{allowProjection:i!==E.Fragment});function j0(i,e,t){const n=i.getProps();return k_(n,e,t!==void 0?t:n.custom,i)}const AS=i=>Array.isArray(i);function gO(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,A0(t))}function vO(i){return AS(i)?i[i.length-1]||0:i}function yO(i,e){const t=j0(i,e);let{transitionEnd:n={},transition:a={},...r}=t||{};r={...r,...n};for(const o in r){const l=vO(r[o]);gO(i,o,l)}}function bO(i){return!!(Ha(i)&&i.add)}function CS(i,e){const t=i.getValue("willChange");if(bO(t))return t.add(e);if(!t&&iu.WillChange){const n=new iu.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function F4(i){return i.props[R4]}const MO=i=>i!==null;function SO(i,{repeat:e,repeatType:t="loop"},n){const a=i.filter(MO),r=e&&t!=="loop"&&e%2===1?0:a.length-1;return a[r]}const _O={type:"spring",stiffness:500,damping:25,restSpeed:10},wO=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),jO={type:"keyframes",duration:.8},EO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TO=(i,{keyframes:e})=>e.length>2?jO:Y0.has(i)?i.startsWith("scale")?wO(e[1]):_O:EO;function AO({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:a,repeat:r,repeatType:o,repeatDelay:l,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const V_=(i,e,t,n={},a,r)=>o=>{const l=N_(n,i)||{},u=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-sc(u);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:x=>{e.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:i,motionValue:e,element:r?void 0:a};AO(l)||Object.assign(f,TO(i,f)),f.duration&&(f.duration=sc(f.duration)),f.repeatDelay&&(f.repeatDelay=sc(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(_S(f),f.delay===0&&(m=!0)),(iu.instantAnimations||iu.skipAnimations)&&(m=!0,_S(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,m&&!r&&e.get()!==void 0){const x=SO(f.keyframes,l);if(x!==void 0){ei.update(()=>{f.onUpdate(x),f.onComplete()});return}}return l.isSync?new A_(f):new YU(f)};function CO({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function V4(i,e,{delay:t=0,transitionOverride:n,type:a}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(r=n);const u=[],d=a&&i.animationState&&i.animationState.getState()[a];for(const f in l){const m=i.getValue(f,i.latestValues[f]??null),x=l[f];if(x===void 0||d&&CO(d,f))continue;const g={delay:t,...N_(r||{},f)},v=m.get();if(v!==void 0&&!m.isAnimating&&!Array.isArray(x)&&x===v&&!g.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const S=F4(i);if(S){const j=window.MotionHandoffAnimation(S,f,ei);j!==null&&(g.startTime=j,M=!0)}}CS(i,f),m.start(V_(f,m,x,i.shouldReduceMotion&&c4.has(f)?{type:!1}:g,i,M));const _=m.animation;_&&u.push(_)}return o&&Promise.all(u).then(()=>{ei.update(()=>{o&&yO(i,o)})}),u}function H4(i,e,t,n=0,a=1){const r=Array.from(i).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),o=i.size,l=(o-1)*n;return typeof t=="function"?t(r,o):a===1?r*n:l-r*n}function NS(i,e,t={}){var u;const n=j0(i,e,t.type==="exit"?(u=i.presenceContext)==null?void 0:u.custom:void 0);let{transition:a=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(a=t.transitionOverride);const r=n?()=>Promise.all(V4(i,n,t)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:x}=a;return NO(i,e,d,f,m,x,t)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,f]=l==="beforeChildren"?[r,o]:[o,r];return d().then(()=>f())}else return Promise.all([r(),o(t.delay)])}function NO(i,e,t=0,n=0,a=0,r=1,o){const l=[];for(const u of i.variantChildren)u.notify("AnimationStart",e),l.push(NS(u,e,{...o,delay:t+(typeof n=="function"?0:n)+H4(i.variantChildren,u,n,a,r)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function RO(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(r=>NS(i,r,t));n=Promise.all(a)}else if(typeof e=="string")n=NS(i,e,t);else{const a=typeof e=="function"?j0(i,e,t.custom):e;n=Promise.all(V4(i,a,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function q4(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const DO=O_.length;function X4(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?X4(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<DO;t++){const n=O_[t],a=i.props[n];(vx(a)||a===!1)&&(e[n]=a)}return e}const LO=[...P_].reverse(),UO=P_.length;function PO(i){return e=>Promise.all(e.map(({animation:t,options:n})=>RO(i,t,n)))}function OO(i){let e=PO(i),t=Tj(),n=!0;const a=u=>(d,f)=>{var x;const m=j0(i,f,u==="exit"?(x=i.presenceContext)==null?void 0:x.custom:void 0);if(m){const{transition:g,transitionEnd:v,...M}=m;d={...d,...M,...v}}return d};function r(u){e=u(i)}function o(u){const{props:d}=i,f=X4(i.parent)||{},m=[],x=new Set;let g={},v=1/0;for(let _=0;_<UO;_++){const S=LO[_],j=t[S],A=d[S]!==void 0?d[S]:f[S],C=vx(A),N=S===u?j.isActive:null;N===!1&&(v=_);let R=A===f[S]&&A!==d[S]&&C;if(R&&n&&i.manuallyAnimateOnMount&&(R=!1),j.protectedKeys={...g},!j.isActive&&N===null||!A&&!j.prevProp||Zy(A)||typeof A=="boolean")continue;const O=zO(j.prevProp,A);let U=O||S===u&&j.isActive&&!R&&C||_>v&&C,z=!1;const I=Array.isArray(A)?A:[A];let V=I.reduce(a(S),{});N===!1&&(V={});const{prevResolvedValues:F={}}=j,q={...F,...V},W=J=>{U=!0,x.has(J)&&(z=!0,x.delete(J)),j.needsAnimating[J]=!0;const $=i.getValue(J);$&&($.liveStyle=!1)};for(const J in q){const $=V[J],le=F[J];if(g.hasOwnProperty(J))continue;let re=!1;AS($)&&AS(le)?re=!q4($,le):re=$!==le,re?$!=null?W(J):x.add(J):$!==void 0&&x.has(J)?W(J):j.protectedKeys[J]=!0}j.prevProp=A,j.prevResolvedValues=V,j.isActive&&(g={...g,...V}),n&&i.blockInitialAnimation&&(U=!1);const ie=R&&O;U&&(!ie||z)&&m.push(...I.map(J=>{const $={type:S};if(typeof J=="string"&&n&&!ie&&i.manuallyAnimateOnMount&&i.parent){const{parent:le}=i,re=j0(le,J);if(le.enteringChildren&&re){const{delayChildren:H}=re.transition||{};$.delay=H4(le.enteringChildren,i,H)}}return{animation:J,options:$}}))}if(x.size){const _={};if(typeof d.initial!="boolean"){const S=j0(i,Array.isArray(d.initial)?d.initial[0]:d.initial);S&&S.transition&&(_.transition=S.transition)}x.forEach(S=>{const j=i.getBaseTarget(S),A=i.getValue(S);A&&(A.liveStyle=!0),_[S]=j??null}),m.push({animation:_})}let M=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(M=!1),n=!1,M?e(m):Promise.resolve()}function l(u,d){var m;if(t[u].isActive===d)return Promise.resolve();(m=i.variantChildren)==null||m.forEach(x=>{var g;return(g=x.animationState)==null?void 0:g.setActive(u,d)}),t[u].isActive=d;const f=o(u);for(const x in t)t[x].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:r,getState:()=>t,reset:()=>{t=Tj()}}}function zO(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!q4(e,i):!1}function ef(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tj(){return{animate:ef(!0),whileInView:ef(),whileHover:ef(),whileTap:ef(),whileDrag:ef(),whileFocus:ef(),exit:ef()}}class dd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class GO extends dd{constructor(e){super(e),e.animationState||(e.animationState=OO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Zy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let IO=0;class kO extends dd{constructor(){super(...arguments),this.id=IO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const BO={animation:{Feature:GO},exit:{Feature:kO}};function bx(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function Hx(i){return{point:{x:i.pageX,y:i.pageY}}}const FO=i=>e=>L_(e)&&i(e,Hx(e));function Qp(i,e,t,n){return bx(i,e,FO(t),n)}const W4=1e-4,VO=1-W4,HO=1+W4,Y4=.01,qO=0-Y4,XO=0+Y4;function xr(i){return i.max-i.min}function WO(i,e,t){return Math.abs(i-e)<=t}function Aj(i,e,t,n=.5){i.origin=n,i.originPoint=ui(e.min,e.max,i.origin),i.scale=xr(t)/xr(e),i.translate=ui(t.min,t.max,i.origin)-i.originPoint,(i.scale>=VO&&i.scale<=HO||isNaN(i.scale))&&(i.scale=1),(i.translate>=qO&&i.translate<=XO||isNaN(i.translate))&&(i.translate=0)}function $p(i,e,t,n){Aj(i.x,e.x,t.x,n?n.originX:void 0),Aj(i.y,e.y,t.y,n?n.originY:void 0)}function Cj(i,e,t){i.min=t.min+e.min,i.max=i.min+xr(e)}function YO(i,e,t){Cj(i.x,e.x,t.x),Cj(i.y,e.y,t.y)}function Nj(i,e,t){i.min=e.min-t.min,i.max=i.min+xr(e)}function ex(i,e,t){Nj(i.x,e.x,t.x),Nj(i.y,e.y,t.y)}function Co(i){return[i("x"),i("y")]}const Z4=({current:i})=>i?i.ownerDocument.defaultView:null,Rj=(i,e)=>Math.abs(i-e);function ZO(i,e){const t=Rj(i.x,e.x),n=Rj(i.y,e.y);return Math.sqrt(t**2+n**2)}class K4{constructor(e,t,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=O2(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=ZO(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:M}=x,{timestamp:_}=Ma;this.history.push({...M,timestamp:_});const{onStart:S,onMove:j}=this.handlers;g||(S&&S(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,x)},this.handlePointerMove=(x,g)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=P2(g,this.transformPagePoint),ei.update(this.updatePoint,!0)},this.handlePointerUp=(x,g)=>{this.end();const{onEnd:v,onSessionEnd:M,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=O2(x.type==="pointercancel"?this.lastMoveEventInfo:P2(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(x,S),M&&M(x,S)},!L_(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const l=Hx(e),u=P2(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=Ma;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=t;m&&m(e,O2(u,this.history)),this.removeListeners=Bx(Qp(this.contextWindow,"pointermove",this.handlePointerMove),Qp(this.contextWindow,"pointerup",this.handlePointerUp),Qp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),id(this.updatePoint)}}function P2(i,e){return e?{point:e(i.point)}:i}function Dj(i,e){return{x:i.x-e.x,y:i.y-e.y}}function O2({point:i},e){return{point:i,delta:Dj(i,J4(e)),offset:Dj(i,KO(e)),velocity:JO(e,.1)}}function KO(i){return i[0]}function J4(i){return i[i.length-1]}function JO(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const a=J4(i);for(;t>=0&&(n=i[t],!(a.timestamp-n.timestamp>sc(e)));)t--;if(!n)return{x:0,y:0};const r=Ro(a.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const o={x:(a.x-n.x)/r,y:(a.y-n.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function QO(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?ui(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?ui(t,i,n.max):Math.min(i,t)),i}function Lj(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function $O(i,{top:e,left:t,bottom:n,right:a}){return{x:Lj(i.x,t,a),y:Lj(i.y,e,n)}}function Uj(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function ez(i,e){return{x:Uj(i.x,e.x),y:Uj(i.y,e.y)}}function tz(i,e){let t=.5;const n=xr(i),a=xr(e);return a>n?t=px(e.min,e.max-n,i.min):n>a&&(t=px(i.min,i.max-a,e.min)),su(0,1,t)}function nz(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const RS=.35;function sz(i=RS){return i===!1?i=0:i===!0&&(i=RS),{x:Pj(i,"left","right"),y:Pj(i,"top","bottom")}}function Pj(i,e,t){return{min:Oj(i,e),max:Oj(i,t)}}function Oj(i,e){return typeof i=="number"?i:i[e]||0}const iz=new WeakMap;class az{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ei(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Hx(m).point)},o=(m,x)=>{const{drag:g,dragPropagation:v,onDragStart:M}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uP(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Co(S=>{let j=this.getAxisMotionValue(S).get()||0;if(ic.test(j)){const{projection:A}=this.visualElement;if(A&&A.layout){const C=A.layout.layoutBox[S];C&&(j=xr(C)*(parseFloat(j)/100))}}this.originPoint[S]=j}),M&&ei.postRender(()=>M(m,x)),CS(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},l=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:M,onDrag:_}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:S}=x;if(v&&this.currentDirection===null){this.currentDirection=rz(S),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",x.point,S),this.updateAxis("y",x.point,S),this.visualElement.render(),_&&_(m,x)},u=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x,this.stop(m,x),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Co(m=>{var x;return this.getAnimationState(m)==="paused"&&((x=this.getAxisMotionValue(m).animation)==null?void 0:x.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new K4(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:n,contextWindow:Z4(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,a=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ei.postRender(()=>l(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:a}=this.getProps();if(!n||!_1(e,a,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=QO(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,a=this.constraints;e&&v0(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=$O(n.layoutBox,e):this.constraints=!1,this.elastic=sz(t),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Co(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=nz(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!v0(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const r=oO(n,a.root,this.visualElement.getTransformPagePoint());let o=ez(a.layout.layoutBox,r);if(t){const l=t(iO(o));this.hasMutatedConstraints=!!l,l&&(o=U4(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:a,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Co(f=>{if(!_1(f,t,this.currentDirection))return;let m=u&&u[f]||{};o&&(m={min:0,max:0});const x=a?200:1e6,g=a?40:1e7,v={type:"inertia",velocity:n?e[f]:0,bounceStiffness:x,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(f,v)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return CS(this.visualElement,e),n.start(V_(e,n,0,t,this.visualElement,!1))}stopAnimation(){Co(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Co(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[t];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Co(t=>{const{drag:n}=this.getProps();if(!_1(t,n,this.currentDirection))return;const{projection:a}=this.visualElement,r=this.getAxisMotionValue(t);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[t];r.set(e[t]-ui(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!v0(t)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Co(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();a[o]=tz({min:u,max:u},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Co(o=>{if(!_1(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(ui(u,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;iz.set(this.visualElement,this);const e=this.visualElement.current,t=Qp(e,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();v0(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,r=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ei.read(n);const o=bx(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Co(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),t(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:r=!1,dragElastic:o=RS,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:a,dragConstraints:r,dragElastic:o,dragMomentum:l}}}function _1(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function rz(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class oz extends dd{constructor(e){super(e),this.removeGroupControls=Do,this.removeListeners=Do,this.controls=new az(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Do}unmount(){this.removeGroupControls(),this.removeListeners()}}const zj=i=>(e,t)=>{i&&ei.postRender(()=>i(e,t))};class lz extends dd{constructor(){super(...arguments),this.removePointerDownListener=Do}onPointerDown(e){this.session=new K4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:zj(e),onStart:zj(t),onMove:n,onEnd:(r,o)=>{delete this.session,a&&ei.postRender(()=>a(r,o))}}}mount(){this.removePointerDownListener=Qp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gj(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const _p={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(Sn.test(i))i=parseFloat(i);else return i;const t=Gj(i,e.target.x),n=Gj(i,e.target.y);return`${t}% ${n}%`}},cz={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,a=ad.parse(i);if(a.length>5)return n;const r=ad.createTransformer(i),o=typeof a[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;a[0+o]/=l,a[1+o]/=u;const d=ui(l,u,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),r(a)}};let z2=!1;class uz extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:a}=this.props,{projection:r}=e;DP(dz),r&&(t.group&&t.group.add(r),n&&n.register&&a&&n.register(r),z2&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Dv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:a,isPresent:r}=this.props,{projection:o}=n;return o&&(o.isPresent=r,z2=!0,a||e.layoutDependency!==t||t===void 0||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||ei.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),D_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:a}=e;z2=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Q4(i){const[e,t]=b4(),n=E.useContext(u_);return s.jsx(uz,{...i,layoutGroup:n,switchLayoutGroup:E.useContext(D4),isPresent:e,safeToRemove:t})}const dz={borderRadius:{..._p,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_p,borderTopRightRadius:_p,borderBottomLeftRadius:_p,borderBottomRightRadius:_p,boxShadow:cz};function fz(i,e,t){const n=Ha(i)?i:A0(i);return n.start(V_("",n,e,t)),n.animation}const hz=(i,e)=>i.depth-e.depth;class mz{constructor(){this.children=[],this.isDirty=!1}add(e){h_(this.children,e),this.isDirty=!0}remove(e){m_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hz),this.isDirty=!1,this.children.forEach(e)}}function pz(i,e){const t=Pr.now(),n=({timestamp:a})=>{const r=a-t;r>=e&&(id(n),i(r-e))};return ei.setup(n,!0),()=>id(n)}const $4=["TopLeft","TopRight","BottomLeft","BottomRight"],xz=$4.length,Ij=i=>typeof i=="string"?parseFloat(i):i,kj=i=>typeof i=="number"||Sn.test(i);function gz(i,e,t,n,a,r){a?(i.opacity=ui(0,t.opacity??1,vz(n)),i.opacityExit=ui(e.opacity??1,0,yz(n))):r&&(i.opacity=ui(e.opacity??1,t.opacity??1,n));for(let o=0;o<xz;o++){const l=`border${$4[o]}Radius`;let u=Bj(e,l),d=Bj(t,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||kj(u)===kj(d)?(i[l]=Math.max(ui(Ij(u),Ij(d),n),0),(ic.test(d)||ic.test(u))&&(i[l]+="%")):i[l]=d}(e.rotate||t.rotate)&&(i.rotate=ui(e.rotate||0,t.rotate||0,n))}function Bj(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const vz=eC(0,.5,kA),yz=eC(.5,.95,Do);function eC(i,e,t){return n=>n<i?0:n>e?1:t(px(i,e,n))}function Fj(i,e){i.min=e.min,i.max=e.max}function jo(i,e){Fj(i.x,e.x),Fj(i.y,e.y)}function Vj(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function Hj(i,e,t,n,a){return i-=e,i=Xv(i,1/t,n),a!==void 0&&(i=Xv(i,1/a,n)),i}function bz(i,e=0,t=1,n=.5,a,r=i,o=i){if(ic.test(e)&&(e=parseFloat(e),e=ui(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=ui(r.min,r.max,n);i===r&&(l-=e),i.min=Hj(i.min,e,t,l,a),i.max=Hj(i.max,e,t,l,a)}function qj(i,e,[t,n,a],r,o){bz(i,e[t],e[n],e[a],e.scale,r,o)}const Mz=["x","scaleX","originX"],Sz=["y","scaleY","originY"];function Xj(i,e,t,n){qj(i.x,e,Mz,t?t.x:void 0,n?n.x:void 0),qj(i.y,e,Sz,t?t.y:void 0,n?n.y:void 0)}function Wj(i){return i.translate===0&&i.scale===1}function tC(i){return Wj(i.x)&&Wj(i.y)}function Yj(i,e){return i.min===e.min&&i.max===e.max}function _z(i,e){return Yj(i.x,e.x)&&Yj(i.y,e.y)}function Zj(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function nC(i,e){return Zj(i.x,e.x)&&Zj(i.y,e.y)}function Kj(i){return xr(i.x)/xr(i.y)}function Jj(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class wz{constructor(){this.members=[]}add(e){h_(this.members,e),e.scheduleRender()}remove(e){if(m_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let n;for(let a=t;a>=0;a--){const r=this.members[a];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jz(i,e,t){let n="";const a=i.x.translate/e.x,r=i.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((a||r||o)&&(n=`translate3d(${a}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:f,rotateX:m,rotateY:x,skewX:g,skewY:v}=t;d&&(n=`perspective(${d}px) ${n}`),f&&(n+=`rotate(${f}deg) `),m&&(n+=`rotateX(${m}deg) `),x&&(n+=`rotateY(${x}deg) `),g&&(n+=`skewX(${g}deg) `),v&&(n+=`skewY(${v}deg) `)}const l=i.x.scale*e.x,u=i.y.scale*e.y;return(l!==1||u!==1)&&(n+=`scale(${l}, ${u})`),n||"none"}const G2=["","X","Y","Z"],Ez=1e3;let Tz=0;function I2(i,e,t,n){const{latestValues:a}=e;a[i]&&(t[i]=a[i],e.setStaticValue(i,0),n&&(n[i]=0))}function sC(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=F4(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",ei,!(a||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&sC(n)}function iC({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=Tz++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Nz),this.nodes.forEach(Uz),this.nodes.forEach(Pz),this.nodes.forEach(Rz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new mz)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new g_),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=y4(o)&&!xP(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),i){let f,m=0;const x=()=>this.root.updateBlockedByResize=!1;ei.read(()=>{m=window.innerWidth}),i(o,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,f&&f(),f=pz(x,250),Dv.hasAnimatedSinceResize&&(Dv.hasAnimatedSinceResize=!1,this.nodes.forEach(e5)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||kz,{onLayoutAnimationStart:M,onLayoutAnimationComplete:_}=d.getProps(),S=!this.targetLayout||!nC(this.targetLayout,g),j=!m&&x;if(this.options.layoutRoot||this.resumeFrom||j||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...N_(v,"layout"),onPlay:M,onComplete:_};(d.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(f,j)}else m||e5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),id(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Oz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($j);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Lz),this.nodes.forEach(Az),this.nodes.forEach(Cz)):this.nodes.forEach($j),this.clearAllSnapshots();const l=Pr.now();Ma.delta=su(0,1e3/60,l-Ma.timestamp),Ma.timestamp=l,Ma.isProcessing=!0,T2.update.process(Ma),T2.preRender.process(Ma),T2.render.process(Ma),Ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Dz),this.sharedNodes.forEach(zz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ei.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ei.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xr(this.snapshot.measuredBox.x)&&!xr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ei(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!tC(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||gf(this.latestValues)||f)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),Bz(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Ei();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(Fz))){const{scroll:f}=this.root;f&&(y0(l.x,f.offset.x),y0(l.y,f.offset.y))}return l}removeElementScroll(o){var u;const l=Ei();if(jo(l,o),(u=this.scroll)!=null&&u.wasRoot)return l;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:x}=f;f!==this.root&&m&&x.layoutScroll&&(m.wasRoot&&jo(l,o),y0(l.x,m.offset.x),y0(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const u=Ei();jo(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&b0(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),gf(f.latestValues)&&b0(u,f.latestValues)}return gf(this.latestValues)&&b0(u,this.latestValues),u}removeTransform(o){const l=Ei();jo(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!gf(d.latestValues))continue;jS(d.latestValues)&&d.updateSnapshot();const f=Ei(),m=d.measurePageBox();jo(f,m),Xj(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return gf(this.latestValues)&&Xj(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var x;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Ma.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ei(),this.relativeTargetOrigin=Ei(),ex(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),jo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ei(),this.targetWithTransforms=Ei()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jo(this.target,this.layout.layoutBox),O4(this.target,this.targetDelta)):jo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ei(),this.relativeTargetOrigin=Ei(),ex(this.relativeTargetOrigin,this.target,g.target),jo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jS(this.parent.latestValues)||P4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ma.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;jo(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;rO(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ei());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vj(this.prevProjectionDelta.x,this.projectionDelta.x),Vj(this.prevProjectionDelta.y,this.projectionDelta.y)),$p(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!Jj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Jj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=M0(),this.projectionDelta=M0(),this.projectionDeltaWithTransform=M0()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},m=M0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=Ei(),g=u?u.source:void 0,v=this.layout?this.layout.source:void 0,M=g!==v,_=this.getStack(),S=!_||_.members.length<=1,j=!!(M&&!S&&this.options.crossfade===!0&&!this.path.some(Iz));this.animationProgress=0;let A;this.mixTargetDelta=C=>{const N=C/1e3;t5(m.x,o.x,N),t5(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ex(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gz(this.relativeTarget,this.relativeTargetOrigin,x,N),A&&_z(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Ei()),jo(A,this.relativeTarget)),M&&(this.animationValues=f,gz(f,d,this.latestValues,N,j,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,u,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(id(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ei.update(()=>{Dv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=A0(0)),this.currentAnimation=fz(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ez),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:f}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&aC(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Ei();const m=xr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const x=xr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}jo(l,u),b0(l,f),$p(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wz),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&I2("z",o,d,this.animationValues);for(let f=0;f<G2.length;f++)I2(`rotate${G2[f]}`,o,d,this.animationValues),I2(`skew${G2[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Rv(l==null?void 0:l.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Rv(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!gf(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=jz(this.projectionDeltaWithTransform,this.treeScale,f);u&&(m=u(f,m)),o.transform=m;const{x,y:g}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,d.animationValues?o.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in yx){if(f[v]===void 0)continue;const{correct:M,applyTo:_,isCSSVariable:S}=yx[v],j=m==="none"?f[v]:M(f[v],d);if(_){const A=_.length;for(let C=0;C<A;C++)o[_[C]]=j}else S?this.options.visualElement.renderState.vars[v]=j:o[v]=j}this.options.layoutId&&(o.pointerEvents=d===this?Rv(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Qj),this.root.sharedNodes.clear()}}}function Az(i){i.updateLayout()}function Cz(i){var t;const e=((t=i.resumeFrom)==null?void 0:t.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=i.layout,{animationType:r}=i.options,o=e.source!==i.layout.source;r==="size"?Co(m=>{const x=o?e.measuredBox[m]:e.layoutBox[m],g=xr(x);x.min=n[m].min,x.max=x.min+g}):aC(r,e.layoutBox,n)&&Co(m=>{const x=o?e.measuredBox[m]:e.layoutBox[m],g=xr(n[m]);x.max=x.min+g,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[m].max=i.relativeTarget[m].min+g)});const l=M0();$p(l,n,e.layoutBox);const u=M0();o?$p(u,i.applyTransform(a,!0),e.measuredBox):$p(u,n,e.layoutBox);const d=!tC(l);let f=!1;if(!i.resumeFrom){const m=i.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:x,layout:g}=m;if(x&&g){const v=Ei();ex(v,e.layoutBox,x.layoutBox);const M=Ei();ex(M,n,g.layoutBox),nC(v,M)||(f=!0),m.options.layoutRoot&&(i.relativeTarget=M,i.relativeTargetOrigin=v,i.relativeParent=m)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function Nz(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function Rz(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function Dz(i){i.clearSnapshot()}function Qj(i){i.clearMeasurements()}function $j(i){i.isLayoutDirty=!1}function Lz(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function e5(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function Uz(i){i.resolveTargetDelta()}function Pz(i){i.calcProjection()}function Oz(i){i.resetSkewAndRotation()}function zz(i){i.removeLeadSnapshot()}function t5(i,e,t){i.translate=ui(e.translate,0,t),i.scale=ui(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function n5(i,e,t,n){i.min=ui(e.min,t.min,n),i.max=ui(e.max,t.max,n)}function Gz(i,e,t,n){n5(i.x,e.x,t.x,n),n5(i.y,e.y,t.y,n)}function Iz(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const kz={duration:.45,ease:[.4,0,.1,1]},s5=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),i5=s5("applewebkit/")&&!s5("chrome/")?Math.round:Do;function a5(i){i.min=i5(i.min),i.max=i5(i.max)}function Bz(i){a5(i.x),a5(i.y)}function aC(i,e,t){return i==="position"||i==="preserve-aspect"&&!WO(Kj(e),Kj(t),.2)}function Fz(i){var e;return i!==i.root&&((e=i.scroll)==null?void 0:e.wasRoot)}const Vz=iC({attachResizeListener:(i,e)=>bx(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),k2={current:void 0},rC=iC({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!k2.current){const i=new Vz({});i.mount(window),i.setOptions({layoutScroll:!0}),k2.current=i}return k2.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),Hz={pan:{Feature:lz},drag:{Feature:oz,ProjectionNode:rC,MeasureLayout:Q4}};function r5(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,r=n[a];r&&ei.postRender(()=>r(e,Hx(e)))}class qz extends dd{mount(){const{current:e}=this.node;e&&(this.unmount=dP(e,(t,n)=>(r5(this.node,n,"Start"),a=>r5(this.node,a,"End"))))}unmount(){}}class Xz extends dd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bx(bx(this.node.current,"focus",()=>this.onFocus()),bx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function o5(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),r=n[a];r&&ei.postRender(()=>r(e,Hx(e)))}class Wz extends dd{mount(){const{current:e}=this.node;e&&(this.unmount=pP(e,(t,n)=>(o5(this.node,n,"Start"),(a,{success:r})=>o5(this.node,a,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const DS=new WeakMap,B2=new WeakMap,Yz=i=>{const e=DS.get(i.target);e&&e(i)},Zz=i=>{i.forEach(Yz)};function Kz({root:i,...e}){const t=i||document;B2.has(t)||B2.set(t,{});const n=B2.get(t),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(Zz,{root:i,...e})),n[a]}function Jz(i,e,t){const n=Kz(e);return DS.set(i,t),n.observe(i),()=>{DS.delete(i),n.unobserve(i)}}const Qz={some:0,all:1};class $z extends dd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:a="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:Qz[a]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),x=d?f:m;x&&x(u)};return Jz(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(eG(e,t))&&this.startObserver()}unmount(){}}function eG({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const tG={inView:{Feature:$z},tap:{Feature:Wz},focus:{Feature:Xz},hover:{Feature:qz}},nG={layout:{ProjectionNode:rC,MeasureLayout:Q4}},sG={...BO,...tG,...Hz,...nG},ja=sO(sG,xO),iG=({game:i,onClick:e,unlockedLevels:t})=>{const n=S8[i.icon];return s.jsxs(ja.div,{whileHover:{y:-4,boxShadow:"3px 3px 0px 0px rgba(0,0,0,1)"},whileTap:{scale:.98,y:0,boxShadow:"0px 0px 0px 0px rgba(0,0,0,1)"},onClick:e,className:`
        relative cursor-pointer overflow-hidden rounded-2xl border-4 border-black 
        ${i.color} p-6 h-48 flex flex-col justify-between shadow-neo transition-all
      `,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{className:"p-2 bg-black/10 rounded-lg backdrop-blur-sm",children:s.jsx(n,{size:32,className:"text-white",strokeWidth:2.5})}),s.jsxs("div",{className:"bg-white border-2 border-black px-2 py-1 rounded-md text-xs font-bold",children:["LVL ",t]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-black text-white drop-shadow-md mb-1 leading-none",children:i.name.toUpperCase()}),s.jsx("p",{className:"text-xs text-white/90 font-bold leading-tight",children:i.description})]}),s.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/20 rounded-full blur-xl pointer-events-none"})]})},aG=({unlockedMax:i,onSelectLevel:e,onBack:t,gameName:n,gameColor:a})=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),s.jsx("div",{className:"min-h-screen bg-stone-100 p-4 pb-12",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("button",{onClick:t,className:"mb-6 px-5 py-2 bg-white border-4 border-black rounded-full font-bold shadow-neo-sm hover:translate-y-1 hover:shadow-none transition-all text-sm sm:text-base",children:" "}),s.jsx("h1",{className:"text-3xl sm:text-5xl font-black mb-2 text-black tracking-wide",children:n}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-bold mb-6",children:""}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-6 gap-3 sm:gap-4",children:Array.from({length:AA}).map((r,o)=>{const l=o+1,u=l>i,d=l<i;return s.jsx(ja.button,{disabled:u,whileHover:u?{}:{scale:1.05},whileTap:u?{}:{scale:.95},onClick:()=>e(l),className:`
                  aspect-square rounded-xl border-4 border-black flex flex-col items-center justify-center relative
                  ${u?"bg-gray-200 text-gray-400":`${a} text-white shadow-neo`}
                  transition-colors
                `,children:u?s.jsx(yA,{size:20}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xl sm:text-2xl font-black",children:l}),d&&s.jsx("div",{className:"absolute bottom-1 sm:bottom-2",children:s.jsx(jA,{size:12,fill:"white",stroke:"none"})})]})},l)})})]})})),Et=(i,e,t,n)=>({question:i,answer:e,hint:t,options:n}),rG={[Ut.RIDDLE_ME]:[Et("","",""),Et("","",""),Et("","",""),Et("","",""),Et("","",""),Et("","",""),Et("","",""),Et("","","",["","","",""]),Et("","",""),Et("","",""),Et("''","",""),Et("","",""),Et("28","","28"),Et("4-3=5","","",["","",""]),Et("","","",["","",""]),Et("","",""),Et("","",""),Et("5","0",""),Et("","",""),Et("","","")],[Ut.TRIVIA_BLAST]:[Et("","","",["","","",""]),Et("","206","",["200","206","300","108"]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("H2O ","","",["","","",""]),Et("","","",["","","",""]),Et("","30/","",["30/","340/","1000/",""]),Et("","","",["","","",""]),Et("''","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","JK","",["JK","","",""]),Et("","","3",["","","",""])],[Ut.EMOJI_CODE]:[Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("12","","",["","","",""])],[Ut.WORD_TWISTED]:[Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""]),Et("   ","","",["","","",""])],[Ut.ODD_ONE_OUT]:[Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""]),Et("","","",["","","",""])],[Ut.FACT_OR_CAP]:[Et("7","","",["",""]),Et("","","",["",""]),Et("","","",["",""]),Et("","","",["",""]),Et("","","35",["",""]),Et("","","",["",""]),Et("","","",["",""]),Et("24","","23564",["",""]),Et("","","",["",""]),Et("","","",["",""])],[Ut.LOGIC_SYLLOGISM]:[Et("","","",["","",""]),Et("","","",["","",""]),Et("ABBC","AC","",["AC","CA","BA"]),Et("","","",["","",""]),Et("","","",["","",""])],[Ut.CONNECTIONS]:[Et(", , , ","",""),Et(", , , ","",""),Et(", , , ","",""),Et(", , , ","",""),Et(", , , ","",""),Et(", , , ","",""),Et(", , , ","","")],[Ut.WORD_ASSOC]:[Et(" ... ? ... ","",""),Et(" ... ? ... ","",""),Et(" ... ? ... ","",""),Et(" ->   -> ?","",""),Et(" ->   -> ?","",""),Et(" ... ? ... ","",""),Et(" ->   -> ?","","")],[Ut.SEQUENCE_SPY]:[Et("2, 4, 8, 16, ?","32","2",["24","30","32","36"]),Et("1, 1, 2, 3, 5, ?","8","",["6","7","8","9"]),Et("A, C, E, G, ?","I","",["H","I","J","K"]),Et("100, 90, 80, 70, ?","60","10",["60","50","65","55"]),Et(", , , ?","","",["","","",""]),Et("1, 4, 9, 16, ?","25","",["20","24","25","36"]),Et("3, 6, 9, 12, ?","15","3",["13","14","15","16"])],[Ut.STORY_SLEUTH]:[Et("","","",["","","",""]),Et("3015","","30",["","","",""]),Et("","","",["","",""]),Et("","","",["","",""])]},oG=async(i,e)=>{await new Promise(n=>setTimeout(n,300));const t=rG[i];if(t&&t.length>0){const n=(e-1)%t.length,a=t[n];return{id:e,question:a.question||` ${e}`,answer:a.answer||"",options:a.options||[],hint:a.hint||""}}return{id:e,question:` ${i} `,answer:"START",options:[""],hint:""}},lG=({gameType:i,level:e,onComplete:t,onError:n})=>{const[a,r]=E.useState(null),[o,l]=E.useState(!0),[u,d]=E.useState(""),[f,m]=E.useState("neutral"),[x,g]=E.useState(!1);E.useEffect(()=>{let _=!0;return l(!0),r(null),d(""),m("neutral"),g(!1),oG(i,e).then(S=>{_&&(r(S),l(!1))}).catch(S=>{_&&(l(!1),console.error(S),n(""))}),()=>{_=!1}},[i,e,n]);const v=_=>{if(!a)return;const S=M(String(a.answer)),j=M(_);j===S||S.includes(j)||j.length>1&&j.includes(S)?(m("correct"),setTimeout(t,1e3)):(m("incorrect"),setTimeout(()=>m("neutral"),1e3))},M=_=>_.toLowerCase().replace(/\s+/g,"").replace(/[.,!?;:]/g,"");return o?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-black"}),s.jsx("p",{className:"font-bold text-lg animate-pulse",children:"..."})]}):a?s.jsx("div",{className:"w-full max-w-xl mx-auto",children:s.jsxs(ja.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border-4 border-black rounded-2xl p-6 sm:p-8 shadow-neo-lg relative",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-black text-center mb-8 leading-relaxed text-gray-800",children:a.question}),s.jsx("div",{className:"space-y-4",children:a.options&&a.options.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.options.map((_,S)=>s.jsx("button",{onClick:()=>v(_),className:"w-full p-4 bg-stone-50 border-2 border-black rounded-xl font-bold text-lg hover:bg-brand-yellow hover:shadow-neo-sm transition-all text-left active:scale-95",children:_},S))}):s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:u,onChange:_=>d(_.target.value),onKeyDown:_=>_.key==="Enter"&&v(u),placeholder:"...",className:`
                  w-full p-4 pr-16 text-[16px] sm:text-lg font-bold border-4 rounded-xl outline-none transition-colors
                  ${f==="incorrect"?"border-red-500 bg-red-50":"border-black focus:border-brand-blue"}
                  ${f==="correct"?"border-green-500 bg-green-50":""}
                `}),s.jsx("button",{onClick:()=>v(u),className:"absolute right-2 top-2 bottom-2 bg-black text-white px-4 rounded-lg font-bold hover:bg-gray-800 transition-colors flex items-center justify-center",children:s.jsx(SA,{size:20})})]})}),s.jsxs("div",{className:"h-8 mt-4 text-center",children:[f==="incorrect"&&s.jsx("span",{className:"text-red-600 font-black animate-bounce block",children:"!"}),f==="correct"&&s.jsx("span",{className:"text-green-600 font-black block",children:"!"})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-dashed border-gray-300 flex justify-between items-center",children:[s.jsxs("button",{onClick:()=>g(!x),className:"flex items-center gap-2 text-gray-500 font-bold hover:text-brand-purple transition-colors text-sm",children:[s.jsx(Xy,{size:18}),x?"":""]}),x&&s.jsx(ja.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"bg-yellow-100 px-3 py-2 rounded-lg border-2 border-yellow-400 text-sm font-bold text-yellow-800 max-w-[70%]",children:a.hint})]})]})}):null},l5=["","","","","","","","","","","","","","","",""],cG=({level:i,onComplete:e})=>{const[t,n]=E.useState([]),[a,r]=E.useState([]),[o,l]=E.useState(!1);E.useEffect(()=>{const d=Math.min(l5.length,2+Math.floor(i/2)),f=l5.slice(0,d),m=[...f,...f].sort(()=>Math.random()-.5).map((x,g)=>({id:g,content:x,flipped:!1,matched:!1}));n(m),r([]),l(!1)},[i]);const u=d=>{if(o||t[d].flipped||t[d].matched)return;const f=[...t];f[d].flipped=!0,n(f);const m=[...a,d];if(r(m),m.length===2){l(!0);const[x,g]=m;f[x].content===f[g].content?setTimeout(()=>{f[x].matched=!0,f[g].matched=!0,n([...f]),r([]),l(!1),f.every(v=>v.matched)&&e()},500):setTimeout(()=>{f[x].flipped=!1,f[g].flipped=!1,n([...f]),r([]),l(!1)},1e3)}};return s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("div",{className:`grid gap-3 p-4 ${t.length>12?"grid-cols-4 sm:grid-cols-5":"grid-cols-3 sm:grid-cols-4"}`,children:t.map((d,f)=>s.jsxs(ja.button,{initial:{rotateY:0},animate:{rotateY:d.flipped||d.matched?180:0},transition:{duration:.4},onClick:()=>u(f),className:"relative w-16 h-16 sm:w-20 sm:h-20 cursor-pointer perspective-1000",children:[s.jsx("div",{className:`
                absolute inset-0 w-full h-full rounded-xl border-4 border-black shadow-neo-sm flex items-center justify-center text-3xl bg-white
                ${d.flipped||d.matched?"opacity-100":"opacity-0"}
                transition-opacity duration-0
              `,style:{transform:"rotateY(180deg)"},children:d.content}),s.jsx("div",{className:`
                absolute inset-0 w-full h-full rounded-xl border-4 border-black bg-brand-pink flex items-center justify-center
                ${d.flipped||d.matched?"opacity-0":"opacity-100"}
              `,children:s.jsx("span",{className:"text-white font-black text-xl",children:"?"})})]},f))})})},c5=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-orange-500"],uG=({level:i,onComplete:e})=>{const[t,n]=E.useState(6),[a,r]=E.useState([]),[o,l]=E.useState(0),[u,d]=E.useState(25);E.useEffect(()=>{const x=Math.min(14,5+Math.floor(i/4)),g=Math.floor(x*2.5);n(x),d(g),l(0);const v=Array(x).fill(0).map(()=>Array(x).fill(0).map(()=>Math.floor(Math.random()*6)));r(v)},[i]);const f=(x,g,v,M,_)=>{v<0||v>=t||M<0||M>=t||_[v][M]===x&&_[v][M]!==g&&(_[v][M]=g,f(x,g,v+1,M,_),f(x,g,v-1,M,_),f(x,g,v,M+1,_),f(x,g,v,M-1,_))},m=x=>{if(o>=u||a[0][0]===x)return;const g=a.map(_=>[..._]);f(g[0][0],x,0,0,g),r(g),l(_=>_+1);const v=g[0][0];g.every(_=>_.every(S=>S===v))&&e()};return s.jsxs("div",{className:"flex flex-col items-center gap-6 w-full",children:[s.jsxs("div",{className:"text-xl font-bold text-gray-700",children:[": ",o," / ",u]}),s.jsx("div",{className:"border-4 border-black p-1 bg-black rounded-lg shadow-neo",style:{display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,width:"min(85vw, 400px)",height:"min(85vw, 400px)"},children:a.map((x,g)=>x.map((v,M)=>s.jsx("div",{className:`${c5[v]} w-full h-full transition-colors duration-300`},`${g}-${M}`)))}),s.jsx("div",{className:"flex gap-2 sm:gap-4 flex-wrap justify-center px-4",children:c5.map((x,g)=>s.jsx("button",{onClick:()=>m(g),className:`${x} w-10 h-10 sm:w-14 sm:h-14 rounded-full border-4 border-black active:scale-95 transition-transform shadow-neo-sm`},g))}),o>=u&&!a.every(x=>x.every(g=>g===a[0][0]))&&s.jsx("div",{className:"text-red-500 font-black animate-pulse",children:"! ..."})]})},dG=({level:i,onComplete:e})=>{const[t,n]=E.useState({text:"",answer:0}),[a,r]=E.useState([]);E.useEffect(()=>{o()},[i]);const o=()=>{const u=i<5?["+"]:i<15?["+","-"]:["+","-","*"],d=10+i*2,f=u[Math.floor(Math.random()*u.length)],m=Math.floor(Math.random()*d)+1,x=Math.floor(Math.random()*d)+1;let g=`${m} ${f} ${x}`,v=0;f==="+"&&(v=m+x),f==="-"&&(v=m-x),f==="*"&&(v=m*x),n({text:g,answer:v});const M=new Set;for(M.add(v);M.size<4;){const _=Math.floor(Math.random()*10)-5,S=v+_;S!==v&&M.add(S)}r(Array.from(M).sort(()=>Math.random()-.5))},l=u=>{if(u===t.answer)e();else{const d=document.getElementById(`opt-${u}`);d&&(d.classList.add("bg-red-200","border-red-500"),setTimeout(()=>d.classList.remove("bg-red-200","border-red-500"),300))}};return s.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md mx-auto px-4",children:[s.jsxs("div",{className:"bg-white border-4 border-black rounded-2xl p-8 mb-8 w-full text-center shadow-neo",children:[s.jsx("h2",{className:"text-5xl font-black text-brand-purple mb-2",children:t.text}),s.jsx("p",{className:"text-gray-400 font-bold",children:"!"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:a.map((u,d)=>s.jsx("button",{id:`opt-${u}`,onClick:()=>l(u),className:"bg-white border-4 border-black rounded-xl p-6 text-3xl font-bold hover:bg-brand-yellow hover:shadow-neo-sm active:scale-95 transition-all",children:u},d))})]})},fG=({level:i,onComplete:e})=>{const[t,n]=E.useState(0),[a,r]=E.useState(null),[o,l]=E.useState(20),u=9,d=10+Math.floor(i/2),f=Math.max(400,1e3-i*20);return E.useEffect(()=>{const m=setInterval(()=>{l(x=>x<=1?(clearInterval(m),0):x-1)},1e3);return()=>clearInterval(m)},[]),E.useEffect(()=>{if(o===0)return;const m=setInterval(()=>{r(Math.floor(Math.random()*u))},f);return()=>clearInterval(m)},[o,f]),E.useEffect(()=>{t>=d&&e()},[t,d,e]),s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsxs("div",{className:"flex justify-between mb-4 font-black text-xl",children:[s.jsxs("span",{children:[": ",t," / ",d]}),s.jsxs("span",{className:o<5?"text-red-500 animate-pulse":"",children:[": ",o,"s"]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:Array.from({length:u}).map((m,x)=>s.jsx("button",{onClick:()=>{x===a&&o>0&&(n(g=>g+1),r(null))},className:`
              aspect-square rounded-2xl border-b-8 transition-all active:border-b-0 active:translate-y-2 relative overflow-hidden
              ${x===a?"bg-brand-orange border-orange-700":"bg-stone-200 border-stone-300"}
            `,children:x===a&&s.jsx(ja.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center",children:s.jsx(TA,{size:40,className:"text-white drop-shadow-md",fill:"white"})})},x))}),o===0&&t<d&&s.jsx("div",{className:"mt-4 text-red-500 font-bold animate-bounce",children:""})]})},hG=({level:i,onComplete:e})=>{const[t,n]=E.useState("WAIT"),[a,r]=E.useState(0),[o,l]=E.useState(0),u=Math.max(200,500-i*8),d=()=>{n("READY");const m=1e3+Math.random()*3e3;setTimeout(()=>{n(x=>x==="READY"?(r(Date.now()),"GO"):x)},m)},f=()=>{if(t==="WAIT"||t==="SUCCESS")d();else if(t==="READY")n("TOO_SOON");else if(t==="GO"){const m=Date.now()-a;l(m),m<=u?(n("SUCCESS"),setTimeout(e,1e3)):n("WAIT")}else t==="TOO_SOON"&&n("WAIT")};return s.jsx("div",{onMouseDown:f,onTouchStart:f,className:`
        w-full h-64 sm:h-80 rounded-3xl border-4 border-black shadow-neo-lg flex flex-col items-center justify-center cursor-pointer select-none transition-colors duration-200
        ${t==="WAIT"?"bg-blue-100":""}
        ${t==="READY"?"bg-red-500":""}
        ${t==="GO"?"bg-green-500":""}
        ${t==="TOO_SOON"?"bg-yellow-400":""}
        ${t==="SUCCESS"?"bg-brand-pink":""}
      `,children:s.jsxs("div",{className:"text-center pointer-events-none p-4",children:[t==="WAIT"&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-3xl font-black mb-2",children:""}),s.jsxs("p",{className:"font-bold text-gray-500",children:[":  ",u,"ms"]}),o>0&&s.jsxs("p",{className:"mt-2 text-red-500 font-bold",children:[": ",o,"ms (!)"]})]}),t==="READY"&&s.jsx("h3",{className:"text-4xl font-black text-white",children:"..."}),t==="GO"&&s.jsx("h3",{className:"text-6xl font-black text-white",children:"!!!"}),t==="TOO_SOON"&&s.jsx("h3",{className:"text-3xl font-black text-black",children:"! "}),t==="SUCCESS"&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-5xl font-black text-white",children:"!"}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:[o,"ms"]})]})]})})},mG=({level:i,onComplete:e})=>{const[t,n]=E.useState([]),[a,r]=E.useState(0),[o,l]=E.useState(!1),[u,d]=E.useState(null),[f,m]=E.useState("..."),x=["bg-red-500","bg-blue-500","bg-yellow-400","bg-green-500"],g=3+Math.floor(i/3);E.useEffect(()=>{v([])},[]);const v=S=>{const j=Math.floor(Math.random()*4),A=[...S,j];n(A),r(0),M(A)},M=async S=>{l(!0),m("..."),await new Promise(j=>setTimeout(j,800));for(const j of S)d(j),await new Promise(A=>setTimeout(A,500)),d(null),await new Promise(A=>setTimeout(A,200));l(!1),m("!")},_=S=>{o||(d(S),setTimeout(()=>d(null),200),S===t[a]?a===t.length-1?t.length>=g?(m("!"),setTimeout(e,500)):(m("! ..."),setTimeout(()=>v(t),800)):r(j=>j+1):(m("! ..."),setTimeout(()=>{v([])},1e3)))};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"text-2xl font-black mb-6 bg-white px-6 py-2 rounded-full border-2 border-black shadow-neo-sm",children:f}),s.jsx("div",{className:"grid grid-cols-2 gap-4 p-4 bg-black rounded-full border-4 border-black shadow-neo-lg",children:x.map((S,j)=>s.jsx("button",{onClick:()=>_(j),className:`
              w-24 h-24 sm:w-32 sm:h-32 rounded-full transition-all border-4 border-transparent
              ${S}
              ${u===j?"brightness-150 scale-95 border-white":"opacity-90"}
            `},j))}),s.jsxs("div",{className:"mt-6 font-bold text-gray-500",children:[": ",t.length," / ",g]})]})},pG=({level:i,onComplete:e})=>{const t=i<10?3:4,[n,a]=E.useState([]);E.useEffect(()=>{let o=Array.from({length:t*t},(d,f)=>f+1);o[t*t-1]=0;const l=20+i*5;let u=t*t-1;for(let d=0;d<l;d++){const f=[];u%t>0&&f.push(u-1),u%t<t-1&&f.push(u+1),u>=t&&f.push(u-t),u<t*(t-1)&&f.push(u+t);const m=f[Math.floor(Math.random()*f.length)];[o[u],o[m]]=[o[m],o[u]],u=m}a(o)},[i,t]);const r=o=>{const l=n.indexOf(0);if(o===l-1&&l%t!==0||o===l+1&&o%t!==0||o===l-t||o===l+t){const d=[...n];[d[o],d[l]]=[d[l],d[o]],a(d),d.every((m,x)=>x===d.length-1?m===0:m===x+1)&&e()}};return s.jsx("div",{className:"grid gap-2 p-2 bg-black/10 rounded-xl",style:{gridTemplateColumns:`repeat(${t}, 1fr)`,width:"min(90vw, 320px)",height:"min(90vw, 320px)"},children:n.map((o,l)=>s.jsx(ja.button,{layout:!0,onClick:()=>r(l),className:`
            rounded-lg font-black text-2xl flex items-center justify-center border-b-4
            ${o===0?"invisible pointer-events-none":"bg-indigo-500 border-indigo-800 text-white shadow-sm"}
          `,children:o},o===0?"empty":o))})},xG=({level:i,onComplete:e})=>{const[n,a]=E.useState([]);E.useEffect(()=>{const l=Array(25).fill(!1),u=3+Math.min(i,15);for(let d=0;d<u;d++){const f=Math.floor(Math.random()*l.length);r(l,f)}a(l)},[i]);const r=(l,u)=>{const d=u%5,f=Math.floor(u/5),m=(x,g)=>{if(x>=0&&x<5&&g>=0&&g<5){const v=x*5+g;l[v]=!l[v]}};m(f,d),m(f+1,d),m(f-1,d),m(f,d+1),m(f,d-1)},o=l=>{const u=[...n];r(u,l),a(u),u.every(d=>!d)&&e()};return s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 font-bold",children:[s.jsx(EA,{size:20})," ",s.jsx("span",{children:": "})]}),s.jsx("div",{className:"grid gap-2 p-3 bg-gray-800 rounded-xl shadow-neo",style:{gridTemplateColumns:"repeat(5, 1fr)"},children:n.map((l,u)=>s.jsx("button",{onClick:()=>o(u),className:`
              w-10 h-10 sm:w-14 sm:h-14 rounded-full border-4 transition-all duration-300
              ${l?"bg-yellow-400 border-yellow-600 shadow-[0_0_15px_rgba(250,204,21,0.6)]":"bg-gray-700 border-gray-900"}
            `},u))})]})},gG=({level:i,onComplete:e})=>{const n=3+Math.floor(i/2),[a,r]=E.useState([]),[o,l]=E.useState(!1),[u,d]=E.useState("DIG");E.useEffect(()=>{const m=Array(36).fill(null).map(()=>({mine:!1,revealed:!1,count:0,flagged:!1}));let x=0;for(;x<n;){const g=Math.floor(Math.random()*m.length);m[g].mine||(m[g].mine=!0,x++)}for(let g=0;g<m.length;g++){if(m[g].mine)continue;let v=0;const M=g%6,_=Math.floor(g/6);for(let S=-1;S<=1;S++)for(let j=-1;j<=1;j++){const A=M+j,C=_+S;A>=0&&A<6&&C>=0&&C<6&&m[C*6+A].mine&&v++}m[g].count=v}r(m),l(!1)},[i]);const f=m=>{if(o||a[m].revealed||a[m].flagged)return;const x=[...a];if(u==="FLAG"){x[m].flagged=!x[m].flagged,r(x);return}if(x[m].mine){x[m].revealed=!0,r(x),l(!0),setTimeout(()=>alert("Boom!"),100);return}const g=[m];for(;g.length>0;){const M=g.pop();if(!x[M].revealed&&(x[M].revealed=!0,x[M].count===0)){const _=M%6,S=Math.floor(M/6);for(let j=-1;j<=1;j++)for(let A=-1;A<=1;A++){const C=_+A,N=S+j;if(C>=0&&C<6&&N>=0&&N<6){const R=N*6+C;!x[R].revealed&&!x[R].mine&&g.push(R)}}}}r(x),x.filter(M=>!M.mine&&!M.revealed).length===0&&e()};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsx("button",{onClick:()=>d("DIG"),className:`px-4 py-2 rounded-full font-bold border-2 border-black ${u==="DIG"?"bg-brand-yellow":"bg-white"}`,children:" "}),s.jsx("button",{onClick:()=>d("FLAG"),className:`px-4 py-2 rounded-full font-bold border-2 border-black ${u==="FLAG"?"bg-brand-pink text-white":"bg-white"}`,children:" "})]}),s.jsx("div",{className:"grid gap-1 p-2 bg-stone-300 rounded-lg border-4 border-stone-500",style:{gridTemplateColumns:"repeat(6, 1fr)"},children:a.map((m,x)=>s.jsxs("button",{onClick:()=>f(x),className:`
              w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg font-black rounded-md
              ${m.revealed?m.mine?"bg-red-500":"bg-stone-100":"bg-brand-blue border-b-4 border-blue-800 active:border-b-0 active:translate-y-1"}
            `,children:[m.revealed&&m.mine&&s.jsx(CD,{size:20,className:"text-black"}),m.revealed&&!m.mine&&m.count>0&&s.jsx("span",{style:{color:["#3b82f6","#22c55e","#ef4444"][m.count-1]||"purple"},children:m.count}),!m.revealed&&m.flagged&&s.jsx(gA,{size:18,className:"text-white",fill:"white"})]},x))}),o&&s.jsx("div",{className:"mt-4 px-4 py-2 bg-red-500 text-white font-bold rounded-lg animate-pulse",children:"! "})]})},vG=({level:i,onComplete:e})=>{const[t,n]=E.useState(Array(16).fill(0)),[a,r]=E.useState(Array(16).fill(!1)),[o,l]=E.useState(null);E.useEffect(()=>{const d=[1,2,3,4,3,4,1,2,2,1,4,3,4,3,2,1],f=[1,2,3,4].sort(()=>Math.random()-.5),m=d.map(v=>f[v-1]),x=Math.min(10,4+Math.floor(i/3)),g=Array(16).fill(!0);for(let v=0;v<x;v++){let M;do M=Math.floor(Math.random()*16);while(!g[M]);m[M]=0,g[M]=!1}n(m),r(g),l(null)},[i]);const u=d=>{if(o===null||a[o])return;const f=[...t];if(f[o]=d,n(f),!f.includes(0)){let m=!0;for(let x=0;x<4;x++){const g=new Set,v=new Set;for(let M=0;M<4;M++)g.add(f[x*4+M]),v.add(f[M*4+x]);(g.size!==4||v.size!==4)&&(m=!1)}m&&e()}};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"grid grid-cols-4 gap-1 bg-black p-2 rounded-lg mb-6 shadow-neo",children:t.map((d,f)=>s.jsx("button",{onClick:()=>l(f),disabled:a[f],className:`
              w-14 h-14 sm:w-16 sm:h-16 bg-white text-2xl font-bold flex items-center justify-center
              ${a[f]?"text-black bg-stone-200":"text-brand-blue"}
              ${o===f?"ring-4 ring-brand-yellow z-10":""}
              ${f%4===1?"mr-1":""} ${f>=4&&f<8?"mb-1":""} 
              // Add extra spacing for 2x2 boxes visualization
            `,style:{marginRight:f%4===1?"4px":"0",marginBottom:Math.floor(f/4)===1?"4px":"0"},children:d!==0?d:""},f))}),s.jsxs("div",{className:"flex gap-4",children:[[1,2,3,4].map(d=>s.jsx("button",{onClick:()=>u(d),className:"w-12 h-12 rounded-full bg-brand-blue text-white font-bold text-xl border-2 border-black shadow-neo-sm active:scale-95",children:d},d)),s.jsx("button",{onClick:()=>u(0),className:"px-4 h-12 rounded-full bg-red-100 text-red-500 font-bold border-2 border-red-200",children:"X"})]})]})},yG=({level:i,onComplete:e})=>{const t=["red","blue","green","yellow","purple","orange"],a=Math.max(5,12-Math.floor(i/5)),[r,o]=E.useState([]),[l,u]=E.useState([]),[d,f]=E.useState([]);E.useEffect(()=>{const g=Array(4).fill("").map(()=>t[Math.floor(Math.random()*t.length)]);o(g),u([]),f([])},[i]);const m=g=>{d.length<4&&f([...d,g])},x=()=>{if(d.length!==4)return;const g=[],v=[...r],M=[...d];for(let S=0;S<4;S++)M[S]===v[S]&&(g.push("black"),v[S]="",M[S]="checked");for(let S=0;S<4;S++)if(M[S]!=="checked"){const j=v.indexOf(M[S]);j!==-1&&v[j]!==""&&(g.push("white"),v[j]="")}const _=[...l,{code:d,feedback:g}];u(_),f([]),g.filter(S=>S==="black").length===4&&e()};return s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"mb-4 flex justify-between text-sm font-bold text-gray-500",children:[s.jsxs("span",{children:[": ",a-l.length]}),s.jsx("span",{children:""})]}),s.jsx("div",{className:"bg-stone-200 p-4 rounded-xl h-64 overflow-y-auto flex flex-col-reverse gap-2 mb-4 border-inner",children:l.map((g,v)=>s.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded-lg shadow-sm",children:[s.jsx("div",{className:"flex gap-1",children:g.code.map((M,_)=>s.jsx("div",{className:`w-6 h-6 rounded-full bg-${M}-500 border border-black/20`},_))}),s.jsx("div",{className:"grid grid-cols-2 gap-1 w-8",children:g.feedback.map((M,_)=>s.jsx("div",{className:`w-3 h-3 rounded-full ${M==="black"?"bg-black":"bg-gray-300 border border-gray-500"}`},_))})]},v))}),s.jsxs("div",{className:"flex gap-2 justify-center mb-4 h-10",children:[Array(4).fill(null).map((g,v)=>s.jsx("div",{className:`w-10 h-10 rounded-full border-2 border-dashed border-gray-400 ${d[v]?`bg-${d[v]}-500 border-solid border-black`:""}`},v)),s.jsx("button",{onClick:()=>f(d.slice(0,-1)),className:"ml-2 text-gray-400 font-bold",children:""})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[t.map(g=>s.jsx("button",{onClick:()=>m(g),className:`w-12 h-12 rounded-full bg-${g}-500 border-4 border-white shadow-md active:scale-90 transition-transform`},g)),s.jsx("button",{onClick:x,disabled:d.length!==4,className:"w-full mt-2 bg-black text-white py-3 rounded-xl font-bold disabled:opacity-50",children:""})]})]})},bG=({level:i,onComplete:e})=>{const[t,n]=E.useState(""),[a,r]=E.useState([]),[o,l]=E.useState([]),u=["","","","","","","",""];E.useEffect(()=>{const f=u[i%u.length];n(f);const m=f.split("").map((x,g)=>({char:x,id:g}));r(m.sort(()=>Math.random()-.5)),l([])},[i]);const d=f=>{r(x=>x.filter(g=>g.id!==f.id));const m=[...o,f];l(m),m.length===t.length&&(m.map(x=>x.char).join("")===t?setTimeout(e,500):setTimeout(()=>{r(t.split("").map((x,g)=>({char:x,id:g})).sort(()=>Math.random()-.5)),l([])},800))};return s.jsxs("div",{className:"flex flex-col items-center w-full",children:[s.jsxs("div",{className:"flex gap-2 min-h-[80px] items-center justify-center mb-8 border-b-4 border-dashed border-gray-300 w-full pb-4",children:[o.map(f=>s.jsx(ja.div,{layoutId:String(f.id),className:"w-16 h-16 bg-brand-green border-4 border-black rounded-xl flex items-center justify-center text-2xl font-black text-white shadow-neo-sm",children:f.char},f.id)),o.length===0&&s.jsx("span",{className:"text-gray-400 font-bold",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:a.map(f=>s.jsx(ja.button,{layoutId:String(f.id),onClick:()=>d(f),whileHover:{scale:1.1},className:"w-16 h-16 bg-white border-4 border-black rounded-xl flex items-center justify-center text-2xl font-bold text-black shadow-neo",children:f.char},f.id))})]})},MG=({level:i,onComplete:e})=>{const t=4+Math.floor(i/3),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(!1);E.useEffect(()=>{const m=[];for(let x=0;x<t;x++)m.push(Math.floor(Math.random()*16));a(m),o([]),d(m)},[i]);const d=async m=>{u(!0),await new Promise(x=>setTimeout(x,1e3));for(const x of m){const g=document.getElementById(`cell-${x}`);g&&(g.classList.add("bg-brand-cyan","scale-110"),setTimeout(()=>g.classList.remove("bg-brand-cyan","scale-110"),500)),await new Promise(v=>setTimeout(v,600))}u(!1)},f=m=>{if(l)return;const x=n[r.length];if(m===x){const g=[...r,m];o(g),g.length===n.length&&setTimeout(e,500)}else{const g=document.getElementById(`cell-${m}`);g==null||g.classList.add("bg-red-500"),setTimeout(()=>{g==null||g.classList.remove("bg-red-500"),o([]),d(n)},500)}};return s.jsx("div",{className:"grid grid-cols-4 gap-3 p-4 bg-white rounded-2xl border-4 border-black shadow-neo",children:Array.from({length:16}).map((m,x)=>s.jsx("div",{id:`cell-${x}`,onClick:()=>f(x),className:`
            w-14 h-14 sm:w-16 sm:h-16 rounded-lg bg-stone-100 border-2 border-stone-200 transition-all duration-200
            ${r.includes(x)?"bg-brand-cyan border-cyan-600 shadow-inner":""}
            cursor-pointer active:scale-95 flex items-center justify-center
          `,children:r.includes(x)&&s.jsx(pA,{size:20,className:"text-white opacity-50"})},x))})},SG=({level:i,onComplete:e})=>{const[n,a]=E.useState([]);E.useEffect(()=>{const l=Array(16).fill(null).map(()=>({type:Math.random()>.3?Math.floor(Math.random()*2)+1:0,rot:Math.floor(Math.random()*4)*90}));for(let u=0;u<4;u++)l[u*4+1]={type:1,rot:Math.floor(Math.random()*4)*90};a(l)},[i]);const r=l=>{const u=[...n];u[l].rot=(u[l].rot+90)%360,a(u),o(u)},o=l=>{let u=!0;for(let d=0;d<4;d++)l[d*4+1].rot%180!==90&&(u=!1);u&&setTimeout(e,500)};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("p",{className:"mb-4 font-bold text-gray-500",children:" ()"}),s.jsx("div",{className:"grid grid-cols-4 gap-1 bg-cyan-900 p-2 rounded-xl shadow-neo",children:n.map((l,u)=>s.jsx("button",{onClick:()=>r(u),className:"w-14 h-14 sm:w-16 sm:h-16 bg-cyan-100 flex items-center justify-center overflow-hidden rounded-sm",children:s.jsxs(ja.div,{animate:{rotate:l.rot},transition:{duration:.2},className:"w-full h-full flex items-center justify-center",children:[l.type===1&&s.jsx("div",{className:"w-full h-4 bg-cyan-600"}),l.type===2&&s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{className:"absolute top-1/2 left-0 w-1/2 h-4 bg-cyan-600 -mt-2"}),s.jsx("div",{className:"absolute top-0 left-1/2 w-4 h-1/2 bg-cyan-600 -ml-2"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-4 h-4 bg-cyan-600 -mt-2 -ml-2 rounded-full"})]})]})},u))})]})},_G=({level:i,onComplete:e})=>{const[a,r]=E.useState([]),[o,l]=E.useState([]);E.useEffect(()=>{const f=Array(36).fill(!1),m=Array(36).fill(!1);for(let x=0;x<6;x++)for(let g=0;g<3;g++)if(Math.random()>.5){const v=x*6+g;f[v]=!0,m[v]=!0;const M=x*6+(5-g);m[M]=!0}r(m),l(f)},[i]);const u=d=>{if(d%6<3)return;const f=[...o];f[d]=!f[d],l(f),JSON.stringify(f)===JSON.stringify(a)&&e()};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"grid gap-1 p-2 bg-pink-100 border-4 border-pink-400 rounded-lg shadow-neo",style:{gridTemplateColumns:"repeat(6, 1fr)"},children:o.map((d,f)=>{const m=f%6<3;return s.jsx("button",{onClick:()=>u(f),disabled:m,className:`
                w-8 h-8 sm:w-12 sm:h-12 border border-pink-200 transition-colors
                ${d?"bg-pink-600":"bg-white"}
                ${m?"cursor-default opacity-100":"cursor-pointer hover:bg-pink-50"}
                ${f%6===3?"border-l-4 border-l-black":""}
              `},f)})}),s.jsx("p",{className:"mt-4 font-bold text-gray-500",children:""})]})},wG=({level:i,onComplete:e})=>{const[n,a]=E.useState(0),[r,o]=E.useState([]),l=63;E.useEffect(()=>{a(0);const d=[];for(let m=1;m<l;m++)Math.random()>.7&&d.push(m);const f=[1,8];d.forEach((m,x)=>{f.includes(m)&&delete d[x]}),o(d)},[i]);const u=(d,f)=>{const m=n%8,x=Math.floor(n/8),g=m+d,v=x+f;if(g>=0&&g<8&&v>=0&&v<8){const M=v*8+g;r.includes(M)||(a(M),M===l&&e())}};return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("div",{className:"grid gap-0 bg-black border-4 border-black",style:{gridTemplateColumns:"repeat(8, 1fr)",width:"min(80vw, 320px)",height:"min(80vw, 320px)"},children:Array.from({length:64}).map((d,f)=>s.jsxs("div",{className:`w-full h-full ${r.includes(f)?"bg-gray-800":"bg-white"}`,children:[f===n&&s.jsx("div",{className:"w-full h-full bg-blue-500 rounded-full scale-75 transition-all"}),f===l&&s.jsx("div",{className:"w-full h-full bg-green-500 scale-50 rotate-45"})]},f))}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("div",{}),s.jsx("button",{onClick:()=>u(0,-1),className:"p-4 bg-gray-200 rounded-lg font-bold shadow-neo-sm active:translate-y-1",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>u(-1,0),className:"p-4 bg-gray-200 rounded-lg font-bold shadow-neo-sm active:translate-y-1",children:""}),s.jsx("button",{onClick:()=>u(0,1),className:"p-4 bg-gray-200 rounded-lg font-bold shadow-neo-sm active:translate-y-1",children:""}),s.jsx("button",{onClick:()=>u(1,0),className:"p-4 bg-gray-200 rounded-lg font-bold shadow-neo-sm active:translate-y-1",children:""})]})]})},jG=({level:i,onComplete:e})=>{const[n,a]=E.useState([]),[r,o]=E.useState([]);E.useEffect(()=>{const u=Array(36).fill(0);for(let d=0;d<6;d++)u[d]=1,u[30+d]=1,u[d*6]=1,u[d*6+5]=1;u[7]=4,u[8]=2,u[21]=3,a(u),o([])},[i]);const l=(u,d)=>{const f=n.indexOf(4),m=f%6,x=Math.floor(f/6),g=m+u,v=x+d,M=v*6+g;if(n[M]===1)return;const _=[...n];if(_[M]===2||_[M]===5){const S=g+u,A=(v+d)*6+S;if(n[A]===1||n[A]===2||n[A]===5)return;_[A]=_[A]===3?5:2,_[M]=_[M]===5?3:0}_[f]=_[f]===4?0:3,_[f]=0,_[M]=4,a(_),M===21&&setTimeout(e,500)};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"mb-4 text-orange-600 font-bold",children:" (: )"}),s.jsx("div",{className:"grid gap-1 bg-orange-100 p-2 rounded-lg",style:{gridTemplateColumns:"repeat(6, 1fr)"},children:n.map((u,d)=>s.jsxs("div",{className:`w-10 h-10 flex items-center justify-center rounded
               ${u===1?"bg-stone-600":"bg-white"}
               ${u===3?"bg-green-200 border-2 border-green-500":""}
             `,children:[u===4&&s.jsx("div",{className:"text-2xl",children:""}),u===2&&s.jsx("div",{className:"w-8 h-8 bg-orange-500 border-2 border-black flex items-center justify-center",children:""})]},d))}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-6",children:[s.jsx("div",{}),s.jsx("button",{onClick:()=>l(0,-1),className:"p-4 bg-orange-200 rounded-lg shadow-neo-sm",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>l(-1,0),className:"p-4 bg-orange-200 rounded-lg shadow-neo-sm",children:""}),s.jsx("button",{onClick:()=>l(0,1),className:"p-4 bg-orange-200 rounded-lg shadow-neo-sm",children:""}),s.jsx("button",{onClick:()=>l(1,0),className:"p-4 bg-orange-200 rounded-lg shadow-neo-sm",children:""})]})]})},EG=({level:i,onComplete:e})=>{const[n,a]=E.useState(null),[r,o]=E.useState({red:[],blue:[],green:[]}),l={red:[0,24],blue:[4,20],green:[2,10]},u=d=>{let f=null;if(Object.entries(l).forEach(([m,x])=>{x.includes(d)&&(f=m)}),f)a(d),o(m=>({...m,[f]:[d]}));else if(n!==null){let m="";if(Object.entries(r).forEach(([x,g])=>{g.includes(n)&&(m=x)}),m){const x=r[m][r[m].length-1],g=Math.abs(d-x);if(g===1||g===5){o(M=>({...M,[m]:[...M[m],d]})),a(d);const v=l[m];v.includes(d)&&v.find(M=>M!==r[m][0]),Object.values(r).every(M=>M.length>2)&&setTimeout(e,1e3)}}}};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("p",{className:"mb-4 font-bold text-gray-500",children:""}),s.jsx("div",{className:"grid gap-2 bg-gray-200 p-3 rounded-xl",style:{gridTemplateColumns:"repeat(5, 1fr)"},children:Array.from({length:25}).map((d,f)=>{let m="";Object.entries(l).forEach(([g,v])=>{v.includes(f)&&(m=g)});let x="";return Object.entries(r).forEach(([g,v])=>{v.includes(f)&&(x=g)}),s.jsx("div",{onClick:()=>u(f),className:`
                w-12 h-12 rounded-full border-4 flex items-center justify-center cursor-pointer
                ${m?`bg-${m}-500 border-black`:x?`bg-${x}-200 border-${x}-500`:"bg-white border-gray-300"}
              `,children:m&&s.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})},f)})})]})},TG=({level:i,onComplete:e})=>{const t=3+Math.floor(i/5),[n,a]=E.useState([[],[],[]]),[r,o]=E.useState(null);E.useEffect(()=>{const u=[];for(let d=t;d>=1;d--)u.push(d);a([u,[],[]]),o(null)},[i]);const l=u=>{if(r===null)n[u].length>0&&o(u);else{const d=n[r],f=n[u],m=d[d.length-1];if(f.length===0||f[f.length-1]>m){const x=n.map(g=>[...g]);x[r].pop(),x[u].push(m),a(x),o(null),u===2&&x[2].length===t&&e()}else o(null)}};return s.jsxs("div",{className:"flex flex-col items-center w-full",children:[s.jsx("div",{className:"flex justify-around items-end w-full max-w-md h-48 border-b-8 border-amber-900 mb-8 px-4 relative",children:[0,1,2].map(u=>s.jsxs("div",{onClick:()=>l(u),className:`
                relative w-1/3 h-full flex flex-col-reverse items-center cursor-pointer group
                ${r===u?"bg-amber-100/50":""}
              `,children:[s.jsx("div",{className:"absolute bottom-0 w-4 h-40 bg-amber-800 rounded-t-lg -z-10 group-hover:bg-amber-700"}),n[u].map((d,f)=>s.jsx(ja.div,{layoutId:`disk-${d}`,className:`h-8 rounded-full border-2 border-black shadow-sm mb-1 ${r===u&&f===n[u].length-1?"-translate-y-4 border-white":""}`,style:{width:`${30+d*15}px`,backgroundColor:`hsl(${d*40}, 70%, 60%)`}},d))]},u))}),s.jsx("p",{className:"font-bold text-gray-500",children:" ()"})]})},AG=({level:i,onComplete:e})=>{const t=10+i*2,[n,a]=E.useState(0),[r,o]=E.useState([]);E.useEffect(()=>{const u=[];let d=0;for(;d<t;){const f=Math.floor(Math.random()*5)+1;u.push({val:f,used:!1}),d+=f}u.push({val:3,used:!1}),u.push({val:5,used:!1}),o(u.sort(()=>Math.random()-.5)),a(0)},[i]);const l=u=>{const d=[...r];d[u].used=!d[u].used,o(d);const f=d.reduce((m,x)=>x.used?m+x.val:m,0);a(f),f===t&&setTimeout(e,500)};return s.jsxs("div",{className:"flex flex-col items-center w-full",children:[s.jsxs("div",{className:"relative w-64 h-40 mb-8",children:[s.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-4 h-32 bg-gray-800"}),s.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-32 h-4 bg-gray-800 rounded-full"}),s.jsxs(ja.div,{animate:{rotate:(n-t)*2},className:"absolute top-4 left-0 w-full h-2 bg-gray-800 origin-center",children:[s.jsx("div",{className:"absolute left-0 top-0 w-2 h-16 bg-gray-400 origin-top rotate-[-(leftSum-target)*2]",children:s.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-20 h-2 bg-gray-600"})}),s.jsxs("div",{className:"absolute right-0 top-0 w-2 h-16 bg-gray-400 origin-top rotate-[-(leftSum-target)*2]",children:[s.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-20 h-2 bg-gray-600"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-12 h-12 bg-black text-white flex items-center justify-center font-black rounded",children:t})]})]})]}),s.jsxs("div",{className:"font-black text-2xl mb-4 text-emerald-600",children:[": ",n," / : ",t]}),s.jsx("div",{className:"flex gap-3 flex-wrap justify-center",children:r.map((u,d)=>s.jsx("button",{onClick:()=>l(d),className:`
               w-12 h-12 rounded-lg border-b-4 font-bold text-xl transition-transform active:scale-95
               ${u.used?"bg-emerald-500 border-emerald-700 text-white translate-y-2 border-b-0":"bg-stone-100 border-stone-300"}
             `,children:u.val},d))})]})},CG=({level:i,onComplete:e})=>{const[n,a]=E.useState([]),[r,o]=E.useState([]),l=20+i*2;E.useEffect(()=>{a(Array.from({length:16},()=>Math.floor(Math.random()*8)+1)),o([])},[i]);const u=f=>{if(r.length===0)o([f]);else{const m=r[r.length-1],x=Math.abs(f-m);if((x===1&&Math.floor(f/4)===Math.floor(m/4)||x===4)&&!r.includes(f)){const v=[...r,f];o(v);const M=v.reduce((_,S)=>_+n[S],0);M===l&&e(),M>l&&setTimeout(()=>o([]),500)}}},d=r.reduce((f,m)=>f+n[m],0);return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"text-xl font-bold mb-4 flex justify-between w-full max-w-xs",children:[s.jsxs("span",{children:[": ",d]}),s.jsxs("span",{children:[": ",l]})]}),s.jsx("div",{className:"grid gap-2 bg-blue-50 p-4 rounded-xl shadow-neo",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:n.map((f,m)=>s.jsx("button",{onClick:()=>u(m),className:`
                w-14 h-14 rounded-lg font-black text-2xl border-2 transition-all
                ${r.includes(m)?"bg-blue-500 text-white border-blue-700 scale-95":"bg-white border-blue-200 text-blue-500"}
              `,children:f},m))}),s.jsxs("button",{onClick:()=>o([]),className:"mt-4 text-gray-400 font-bold flex items-center gap-2",children:[s.jsx(MA,{size:16})," "]})]})},NG=({level:i,onComplete:e})=>{const[t,n]=E.useState(Array(16).fill(0)),a=Math.pow(2,4+Math.min(i,5));E.useEffect(()=>{let o=Array(16).fill(0);o[0]=2,o[1]=2,n(o)},[i]);const r=o=>{const l=t[o];if(l===0)return;const u=[o-1,o+1,o-4,o+4],d=[...t];for(const f of u)if(f>=0&&f<16&&d[f]===l){d[o]=l*2,d[f]=0;const m=d.map((x,g)=>x===0?g:-1).filter(x=>x!==-1);m.length>0&&(d[m[Math.floor(Math.random()*m.length)]]=2),n(d),l*2>=a&&e();break}};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("p",{className:"mb-4 font-bold text-orange-500",children:[": ",a]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 bg-orange-100 p-3 rounded-xl shadow-neo",children:t.map((o,l)=>s.jsx("button",{onClick:()=>r(l),className:`
               w-14 h-14 rounded-lg font-black text-xl flex items-center justify-center shadow-sm border-b-4
               ${o===0?"bg-orange-50/50 border-transparent":"border-black/20"}
             `,style:{backgroundColor:o>0?`hsl(${10+Math.log2(o)*25}, 80%, 60%)`:void 0,color:o>4?"white":"black"},children:o>0?o:""},l))})]})},RG=({level:i,onComplete:e})=>{const[n,a]=E.useState(Array(25).fill(0)),[r,o]=E.useState([]);E.useEffect(()=>{const d=Array(25).fill(0);d[12]=9,a(d)},[i]);const l=d=>{const f=[...n];f[d]=(f[d]+1)%3,a(f),u(f)},u=d=>{let f=0,m=0,x=1,g=0;const v=[0];let M=0;for(;f>=0&&f<5&&m>=0&&m<5&&M<20;){const _=m*5+f,S=d[_];if(S===1){const j=x;x=-g,g=-j}else if(S===2){const j=x;x=g,g=j}if(f+=x,m+=g,f>=0&&f<5&&m>=0&&m<5&&(v.push(m*5+f),m*5+f===24)){setTimeout(e,500);break}M++}o(v)};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("p",{className:"mb-4 font-bold text-red-500",children:"()"}),s.jsx("div",{className:"grid grid-cols-5 gap-1 bg-gray-900 p-2 rounded-xl shadow-neo",children:n.map((d,f)=>{const m=r.includes(f);return s.jsxs("button",{onClick:()=>l(f),className:`
                  w-12 h-12 flex items-center justify-center border border-gray-700 rounded
                  ${m?"bg-red-900/50":"bg-gray-800"}
                  ${f===0?"ring-2 ring-red-500":""}
                  ${f===24?"ring-2 ring-green-500":""}
                `,children:[d===1&&s.jsx("div",{className:"w-full h-1 bg-blue-400 -rotate-45"}),d===2&&s.jsx("div",{className:"w-full h-1 bg-blue-400 rotate-45"}),m&&s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full shadow-[0_0_10px_red]"})]},f)})})]})},DG=({level:i,onComplete:e})=>{const t=["red","blue","yellow","green"],n=4+Math.min(2,Math.floor(i/5)),a=4,[r,o]=E.useState([]),[l,u]=E.useState(null);E.useEffect(()=>{const f=[];t.slice(0,n-2).forEach(v=>{for(let M=0;M<a;M++)f.push(v)});const x=f.sort(()=>Math.random()-.5),g=[];for(let v=0;v<n;v++)v<n-2?g.push(x.slice(v*a,(v+1)*a)):g.push([]);o(g),u(null)},[i]);const d=f=>{if(l===null)r[f].length>0&&u(f);else{if(l===f){u(null);return}const m=r[l],x=r[f];if(x.length<a){const g=m[m.length-1];if(x.length===0||x[x.length-1]===g){const v=r.map(_=>[..._]);v[l].pop(),v[f].push(g),o(v),u(null),v.every(_=>_.length===0||_.length===a&&_.every(S=>S===_[0]))&&e();return}}u(null)}};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"flex gap-4 justify-center items-end h-48 mb-6",children:r.map((f,m)=>s.jsx("div",{onClick:()=>d(m),className:`
               w-12 sm:w-16 h-40 border-4 border-b-8 border-stone-400 rounded-b-2xl relative flex flex-col-reverse overflow-hidden cursor-pointer transition-transform
               ${l===m?"-translate-y-4 border-stone-600 shadow-lg":""}
               bg-stone-100/50
             `,children:f.map((x,g)=>s.jsx("div",{className:`w-full h-1/4 bg-${x}-500 border-t border-white/20`},g))},m))}),s.jsx("p",{className:"font-bold text-gray-500",children:""})]})},LG=({level:i,onComplete:e})=>{const[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState({rows:[],cols:[]});E.useEffect(()=>{const f=Array(5).fill(0).map(()=>Array(5).fill(!1).map(()=>Math.random()>.5));a(f),o(Array(5).fill(0).map(()=>Array(5).fill(!1)));const m=v=>{const M=[];let _=0;for(let S of v)S?_++:_>0&&(M.push(_),_=0);return _>0&&M.push(_),M.length?M:[0]},x=f.map(v=>m(v)),g=Array(5).fill(0).map((v,M)=>m(f.map(_=>_[M])));u({rows:x,cols:g})},[i]);const d=(f,m)=>{const x=r.map(g=>[...g]);x[f][m]=!x[f][m],o(x),JSON.stringify(x)===JSON.stringify(n)&&e()};return s.jsx("div",{className:"flex flex-col items-center",children:s.jsxs("div",{className:"flex flex-col items-start bg-stone-100 p-4 rounded-xl border-2 border-stone-300",children:[s.jsx("div",{className:"flex ml-[50px] mb-2",children:l.cols.map((f,m)=>s.jsx("div",{className:"w-10 flex flex-col justify-end items-center text-xs font-bold text-gray-600 leading-tight",children:f.map((x,g)=>s.jsx("span",{children:x},g))},m))}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex flex-col mr-2",children:l.rows.map((f,m)=>s.jsx("div",{className:"h-10 flex justify-end items-center gap-1 text-xs font-bold text-gray-600 pr-1",children:f.map((x,g)=>s.jsx("span",{children:x},g))},m))}),s.jsx("div",{className:"grid grid-cols-5 gap-1 bg-gray-300 border-2 border-gray-400",children:r.map((f,m)=>f.map((x,g)=>s.jsx("button",{onClick:()=>d(m,g),className:`w-10 h-10 ${x?"bg-black":"bg-white"} hover:bg-stone-200`},`${m}-${g}`)))})]})]})})},UG=({level:i,onComplete:e})=>{const[t,n]=E.useState([]),[a,r]=E.useState(null);E.useEffect(()=>{n([{id:0,x:0,y:2,w:2,h:1,type:"h",isRed:!0},{id:1,x:2,y:0,w:1,h:3,type:"v",isRed:!1},{id:2,x:2,y:3,w:2,h:1,type:"h",isRed:!1},{id:3,x:4,y:2,w:1,h:2,type:"v",isRed:!1}])},[i]);const o=(l,u)=>{const d=t.map(v=>({...v})),f=d.find(v=>v.id===l);if(!f)return;let m=f.x+(f.type==="h"?u:0),x=f.y+(f.type==="v"?u:0);if(m<0||x<0||m+f.w>6||x+f.h>6)return;d.some(v=>v.id===l?!1:m<v.x+v.w&&m+f.w>v.x&&x<v.y+v.h&&x+f.h>v.y)||(f.x=m,f.y=x,n(d),f.isRed&&f.x===4&&setTimeout(e,500))};return s.jsxs("div",{className:"w-64 h-64 bg-amber-100 relative border-4 border-amber-900 rounded-lg overflow-hidden shadow-neo",children:[s.jsx("div",{className:"absolute right-0 top-[33.33%] w-2 h-[16.66%] bg-green-400/50 z-0"}),t.map(l=>s.jsx(ja.div,{layout:!0,className:`
            absolute rounded-md border-2 flex items-center justify-center shadow-sm cursor-pointer
            ${l.isRed?"bg-red-500 border-red-700 z-20":"bg-yellow-600 border-yellow-800 z-10"}
          `,style:{width:`${l.w*16.66}%`,height:`${l.h*16.66}%`,left:`${l.x*16.66}%`,top:`${l.y*16.66}%`},onClick:()=>r(l.id),children:l.id===a&&s.jsx("div",{className:"absolute inset-0 flex justify-between items-center px-1 opacity-50 pointer-events-none",children:l.type==="h"?s.jsxs(s.Fragment,{children:[s.jsx(tu,{className:"-rotate-90 w-3"}),s.jsx(tu,{className:"rotate-90 w-3"})]}):s.jsxs(s.Fragment,{children:[s.jsx(tu,{className:"rotate-180 w-3"}),s.jsx(tu,{className:"w-3"})]})})},l.id)),a!==null&&s.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 z-30",children:[s.jsx("button",{onClick:l=>{l.stopPropagation(),o(a,-1)},className:"bg-white/80 p-2 rounded-full shadow font-bold",children:" - "}),s.jsx("button",{onClick:l=>{l.stopPropagation(),o(a,1)},className:"bg-white/80 p-2 rounded-full shadow font-bold",children:" + "})]})]})},PG=({level:i,onComplete:e})=>{const[t,n]=E.useState([]),[a,r]=E.useState(null),o=7;E.useEffect(()=>{n([-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1])},[i]);const l=u=>{const d=t[u];if(d===1)r(u);else if(d===0&&a!==null){const f=Math.floor(a/o),m=a%o,x=Math.floor(u/o),g=u%o,v=x-f,M=g-m;if(Math.abs(v)===2&&M===0||Math.abs(M)===2&&v===0){const _=f+v/2,S=m+M/2,j=_*o+S;if(t[j]===1){const A=[...t];A[a]=0,A[j]=0,A[u]=1,n(A),r(null),A.filter(C=>C===1).length===1&&e()}}}};return s.jsx("div",{className:"grid gap-1 bg-amber-200 p-4 rounded-full border-8 border-amber-800 shadow-neo",style:{gridTemplateColumns:"repeat(7, 1fr)"},children:t.map((u,d)=>s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center",children:u!==-1&&s.jsx("button",{onClick:()=>l(d),className:`
                 w-full h-full rounded-full shadow-inner
                 ${u===1?a===d?"bg-blue-500 scale-110":"bg-amber-900":"bg-amber-300/50"}
                 transition-all duration-200
               `})},d))})},OG=({level:i,onComplete:e})=>{const[n,a]=E.useState([]),[r,o]=E.useState(null),l=[[[1,1,1]],[[1,1],[1,1]],[[1,0],[1,1]]];E.useEffect(()=>{a(Array(25).fill(0))},[i]);const u=d=>{if(!r)return;const f=Math.floor(d/5),m=d%5,x=[...n];let g=!0;const v=r.length,M=r[0].length;for(let _=0;_<v;_++)for(let S=0;S<M;S++)if(r[_][S]){const j=f+_,A=m+S;(j>=5||A>=5||x[j*5+A]!==0)&&(g=!1)}if(g){for(let _=0;_<v;_++)for(let S=0;S<M;S++)r[_][S]&&(x[(f+_)*5+(m+S)]=1);a(x),o(null),x.filter(_=>_===1).length>=10&&e()}};return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("div",{className:"grid grid-cols-5 gap-1 bg-gray-800 p-2 rounded shadow-neo",children:n.map((d,f)=>s.jsx("button",{onClick:()=>u(f),className:`w-10 h-10 rounded-sm ${d?"bg-purple-500 border-white/30 border-2":"bg-gray-700"}`},f))}),s.jsx("div",{className:"flex gap-4",children:l.map((d,f)=>s.jsx("button",{onClick:()=>o(d),className:`p-2 bg-gray-200 rounded border-2 ${r===d?"border-purple-600 bg-purple-100":"border-gray-300"}`,children:s.jsx("div",{className:"grid gap-px",style:{gridTemplateColumns:`repeat(${d[0].length}, 10px)`},children:d.flat().map((m,x)=>s.jsx("div",{className:`w-2.5 h-2.5 ${m?"bg-purple-500":"bg-transparent"}`},x))})},f))})]})},zG=({level:i,onComplete:e})=>{const[t,n]=E.useState([{x:50,y:100,r:30,connected:!0},{x:250,y:100,r:30,connected:!1}]),a=()=>{t.length===2&&(n([...t,{x:150,y:100,r:40,connected:!0}]),setTimeout(e,800))};return s.jsxs("div",{className:"relative w-full max-w-xs h-48 bg-slate-200 border-4 border-slate-500 rounded-xl overflow-hidden shadow-neo",onClick:a,children:[t.map((r,o)=>s.jsx(ja.div,{animate:{rotate:r.connected?360:0},transition:{repeat:1/0,duration:2,ease:"linear"},className:`absolute border-4 border-dashed rounded-full flex items-center justify-center ${o===0?"border-green-600 bg-green-200":o===1?"border-red-600 bg-red-200":"border-gray-600 bg-gray-300"}`,style:{width:r.r*2,height:r.r*2,left:r.x-r.r,top:r.y-r.r},children:s.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})},o)),t.length===2&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 font-bold pointer-events-none",children:""})]})},GG=({level:i,onComplete:e})=>{const[t,n]=E.useState([0,0,0]),a=[150,50,200],r=o=>{const l=[...t];l[o]=Math.min(255,l[o]+25),n(l),l.reduce((d,f,m)=>d+Math.abs(f-a[m]),0)<30&&e()};return s.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-xs",children:[s.jsxs("div",{className:"flex gap-4 w-full",children:[s.jsx("div",{className:"flex-1 h-24 rounded-xl border-4 border-black flex items-center justify-center font-bold text-white shadow-neo",style:{backgroundColor:`rgb(${a.join(",")})`},children:""}),s.jsx("div",{className:"flex-1 h-24 rounded-xl border-4 border-black flex items-center justify-center font-bold text-white shadow-neo",style:{backgroundColor:`rgb(${t.join(",")})`},children:""})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>r(0),className:"w-16 h-16 bg-red-500 rounded-full border-4 border-black shadow-neo active:scale-95 text-white font-bold",children:"+"}),s.jsx("button",{onClick:()=>r(1),className:"w-16 h-16 bg-green-500 rounded-full border-4 border-black shadow-neo active:scale-95 text-white font-bold",children:"+"}),s.jsx("button",{onClick:()=>r(2),className:"w-16 h-16 bg-blue-500 rounded-full border-4 border-black shadow-neo active:scale-95 text-white font-bold",children:"+"})]}),s.jsx("button",{onClick:()=>n([0,0,0]),className:"text-sm font-bold text-gray-500 underline",children:""})]})},IG=({level:i,onComplete:e})=>{const[t,n]=E.useState({x:0,y:0}),[a,r]=E.useState(1),o=(l,u)=>{const d=Math.min(3,Math.max(0,t.x+l)),f=Math.min(3,Math.max(0,t.y+u));(d!==t.x||f!==t.y)&&(n({x:d,y:f}),r(Math.floor(Math.random()*6)+1),d===3&&f===3&&e())};return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"grid grid-cols-4 gap-1 bg-gray-300 p-2 rounded-lg border-4 border-gray-500 mb-6",children:Array(16).fill(0).map((l,u)=>{const d=u%4,f=Math.floor(u/4),m=d===t.x&&f===t.y,x=d===3&&f===3;return s.jsx("div",{className:`w-12 h-12 rounded flex items-center justify-center ${x?"bg-green-200 border-2 border-green-500":"bg-white"}`,children:m&&s.jsx(ja.div,{layoutId:"cube",className:"w-10 h-10 bg-blue-500 rounded text-white font-bold flex items-center justify-center text-xl shadow-lg",children:a})},u)})}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("div",{}),s.jsx("button",{onClick:()=>o(0,-1),className:"p-4 bg-blue-100 rounded-lg font-bold shadow-sm border-2 border-blue-200",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>o(-1,0),className:"p-4 bg-blue-100 rounded-lg font-bold shadow-sm border-2 border-blue-200",children:""}),s.jsx("button",{onClick:()=>o(0,1),className:"p-4 bg-blue-100 rounded-lg font-bold shadow-sm border-2 border-blue-200",children:""}),s.jsx("button",{onClick:()=>o(1,0),className:"p-4 bg-blue-100 rounded-lg font-bold shadow-sm border-2 border-blue-200",children:""})]})]})},kG=({level:i,onComplete:e})=>{const[t,n]=E.useState(0),a=2;return s.jsxs("div",{className:"flex items-center gap-0 w-full max-w-xs px-8",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-sky-500 text-white font-black flex items-center justify-center z-10 border-4 border-sky-800 shadow-lg",children:a}),s.jsxs("div",{className:"flex-1 h-20 flex flex-col justify-center items-center cursor-pointer group",onClick:()=>{const r=(t+1)%3;n(r),r===a&&setTimeout(e,500)},children:[s.jsx("div",{className:`w-full h-1 bg-black transition-all ${t>=1?"opacity-100":"opacity-10 group-hover:opacity-30"}`}),s.jsx("div",{className:`w-full h-1 bg-black mt-2 transition-all ${t>=2?"opacity-100":"opacity-0"}`})]}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-sky-500 text-white font-black flex items-center justify-center z-10 border-4 border-sky-800 shadow-lg",children:a})]})},BG=({level:i,onComplete:e})=>{const[t,n]=E.useState([1,2,3,4,5,6,7,8,9]),a=r=>{const o=[...t],l=r*3,u=o[l+2];o[l+2]=o[l+1],o[l+1]=o[l],o[l]=u,n(o),o[0]===1&&o[8]===9&&o[4]===5&&e()};return s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"flex flex-col gap-2",children:[0,1,2].map(r=>s.jsx("button",{onClick:()=>a(r),className:"h-14 flex items-center justify-center bg-lime-200 rounded p-2 shadow-sm border-2 border-lime-500",children:s.jsx(c_,{size:16})},r))}),s.jsx("div",{className:"grid grid-cols-3 gap-1 bg-black p-2 rounded-xl border-4 border-black shadow-neo",children:t.map((r,o)=>s.jsx("div",{className:"w-14 h-14 bg-lime-500 text-white font-black text-xl flex items-center justify-center rounded",children:r},o))})]})},FG=({isOpen:i,onClose:e,title:t,rules:n,color:a})=>s.jsx(jP,{children:i&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:e,children:s.jsxs(ja.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},onClick:r=>r.stopPropagation(),className:"bg-white border-4 border-black rounded-3xl w-full max-w-md shadow-neo-lg overflow-hidden flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:`${a} p-5 border-b-4 border-black flex justify-between items-center relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-center gap-3 z-10",children:[s.jsx("div",{className:"bg-black/20 p-2 rounded-lg text-white",children:s.jsx(Zp,{size:24,strokeWidth:2.5})}),s.jsx("h2",{className:"text-2xl font-black text-white drop-shadow-md",children:t})]}),s.jsx("button",{onClick:e,className:"bg-white/20 hover:bg-white/40 text-white p-2 rounded-xl transition-colors z-10 active:scale-95",children:s.jsx(_a,{size:24,strokeWidth:3})}),s.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-white/20 rounded-full blur-xl"})]}),s.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar bg-stone-50",children:[s.jsx("h3",{className:"text-gray-500 font-bold mb-4 uppercase tracking-wider text-xs",children:""}),s.jsx("ul",{className:"space-y-4",children:n.map((r,o)=>s.jsxs("li",{className:"flex gap-4 text-lg font-bold text-gray-800 leading-relaxed items-start",children:[s.jsx("span",{className:`
                      flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-white font-black shadow-sm mt-0.5
                      ${a.replace("bg-","bg-").replace("400","500").replace("500","600")}
                      ${a==="bg-brand-yellow"?"text-black":""}
                    `,children:o+1}),s.jsx("span",{children:r})]},o))})]}),s.jsx("div",{className:"p-4 bg-white border-t-4 border-gray-100 flex justify-center",children:s.jsx("button",{onClick:e,className:"w-full py-4 bg-black text-white rounded-2xl font-black text-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg hover:shadow-xl",children:""})})]})})}),VG=({gameType:i,level:e,onComplete:t,onBack:n})=>{const[a,r]=E.useState(!1);E.useEffect(()=>{window.scrollTo(0,0)},[]);const o=()=>{switch(i){case Ut.MEMORY_MATRIX:return s.jsx(cG,{level:e,onComplete:t});case Ut.COLOR_FLOOD:return s.jsx(uG,{level:e,onComplete:t});case Ut.MATH_DASH:return s.jsx(dG,{level:e,onComplete:t});case Ut.WHACK_A_MOLE:return s.jsx(fG,{level:e,onComplete:t});case Ut.REACTION_Z:return s.jsx(hG,{level:e,onComplete:t});case Ut.PATTERN_MIND:return s.jsx(mG,{level:e,onComplete:t});case Ut.SLIDE_AWAY:return s.jsx(pG,{level:e,onComplete:t});case Ut.LIGHTS_OUT:return s.jsx(xG,{level:e,onComplete:t});case Ut.MINE_SWEEPER:return s.jsx(gG,{level:e,onComplete:t});case Ut.SUDOKU_LITE:return s.jsx(vG,{level:e,onComplete:t});case Ut.CODE_BREAKER:return s.jsx(yG,{level:e,onComplete:t});case Ut.WORD_TWISTED:return s.jsx(bG,{level:e,onComplete:t});case Ut.MEMO_PATH:return s.jsx(MG,{level:e,onComplete:t});case Ut.PIPE_MASTER:return s.jsx(SG,{level:e,onComplete:t});case Ut.SYMMETRY_DRAW:return s.jsx(_G,{level:e,onComplete:t});case Ut.MAZE_RUNNER:return s.jsx(wG,{level:e,onComplete:t});case Ut.SOKOBAN_GO:return s.jsx(jG,{level:e,onComplete:t});case Ut.LINK_DOTS:return s.jsx(EG,{level:e,onComplete:t});case Ut.HANOI_SAGA:return s.jsx(TG,{level:e,onComplete:t});case Ut.BALANCE_SCALE:return s.jsx(AG,{level:e,onComplete:t});case Ut.NUMBER_PATH:return s.jsx(CG,{level:e,onComplete:t});case Ut.MERGE_2048:return s.jsx(NG,{level:e,onComplete:t});case Ut.LASER_BEAM:return s.jsx(RG,{level:e,onComplete:t});case Ut.WATER_SORT:return s.jsx(DG,{level:e,onComplete:t});case Ut.NONOGRAM:return s.jsx(LG,{level:e,onComplete:t});case Ut.UNBLOCK_RED:return s.jsx(UG,{level:e,onComplete:t});case Ut.PEG_JUMP:return s.jsx(PG,{level:e,onComplete:t});case Ut.TETRIS_FIT:return s.jsx(OG,{level:e,onComplete:t});case Ut.GEAR_SYSTEM:return s.jsx(zG,{level:e,onComplete:t});case Ut.COLOR_MIXER:return s.jsx(GG,{level:e,onComplete:t});case Ut.ROLL_CUBE:return s.jsx(IG,{level:e,onComplete:t});case Ut.BRIDGE_CROSS:return s.jsx(kG,{level:e,onComplete:t});case Ut.SHIFT_GRID:return s.jsx(BG,{level:e,onComplete:t});default:return s.jsx(lG,{gameType:i,level:e,onComplete:t,onError:u=>alert(u)})}},l=Fp.find(u=>u.id===i);return s.jsxs("div",{className:"min-h-screen bg-stone-100 flex flex-col",children:[s.jsxs("div",{className:"p-4 flex justify-between items-center max-w-6xl mx-auto w-full",children:[s.jsxs("button",{onClick:n,className:"font-bold text-gray-500 hover:text-black flex items-center gap-2 text-sm sm:text-base",children:[s.jsx("span",{className:"bg-white border-2 border-black rounded-full w-8 h-8 flex items-center justify-center",children:""}),""]}),s.jsxs("h2",{className:"text-xl sm:text-2xl font-black",children:[" ",e," "]}),s.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-1 px-3 py-1.5 bg-white border-2 border-black rounded-full font-bold text-sm hover:bg-brand-yellow hover:shadow-neo-sm transition-all active:scale-95",children:[s.jsx(xA,{size:18}),s.jsx("span",{className:"hidden sm:inline",children:""})]})]}),s.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 w-full",children:o()}),l&&s.jsx(FG,{isOpen:a,onClose:()=>r(!1),title:l.name,rules:l.rules,color:l.color})]})};function u5(){const[i,e]=E.useState("HOME"),[t,n]=E.useState(null),[a,r]=E.useState(1),[o,l]=E.useState({}),[u,d]=E.useState(!1),[f,m]=E.useState("all");E.useEffect(()=>{const j=localStorage.getItem("mindblock_progress");if(j)l(JSON.parse(j));else{const A={};Fp.forEach(C=>A[C.id]=1),l(A)}},[]);const x=(j,A)=>{const C={...o,[j]:Math.max(A,o[j]||1)};l(C),localStorage.setItem("mindblock_progress",JSON.stringify(C))},g=j=>{n(j),e("LEVEL_SELECT")},v=j=>{r(j),e("GAME")},M=()=>{if(d(!0),t){const j=a+1;j<=AA&&x(t,j)}setTimeout(()=>{d(!1),e("LEVEL_SELECT")},2500)},_=f==="all"?Fp:Fp.filter(j=>j.category===f),S=f==="all"?[..._].sort((j,A)=>{const C=N=>[Ut.PATTERN_MIND,Ut.SUDOKU_LITE,Ut.LIGHTS_OUT,Ut.MINE_SWEEPER,Ut.CODE_BREAKER,Ut.COLOR_FLOOD].includes(N.id)?0:N.category==="word"?2:1;return C(j)-C(A)}):_;if(i==="GAME"&&t)return s.jsxs(s.Fragment,{children:[u&&s.jsx(HG,{}),s.jsx(VG,{gameType:t,level:a,onComplete:M,onBack:()=>e("LEVEL_SELECT")})]});if(i==="LEVEL_SELECT"&&t){const j=Fp.find(A=>A.id===t);return s.jsx(aG,{unlockedMax:o[t]||1,onSelectLevel:v,onBack:()=>e("HOME"),gameName:(j==null?void 0:j.name)||"",gameColor:(j==null?void 0:j.color)||"bg-gray-500"})}return s.jsx("div",{className:"min-h-screen bg-stone-100 p-4 pb-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("header",{className:"mb-6 text-center pt-4",children:[s.jsx("h1",{className:"text-5xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-brand-pink via-brand-yellow to-brand-blue drop-shadow-sm mb-2 tracking-tight",children:""}),s.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-600 mb-6",children:""}),s.jsx("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 mb-8 px-2",children:M8.map(j=>s.jsxs("button",{onClick:()=>m(j.id),className:`
                  px-4 sm:px-6 py-2 sm:py-3 rounded-full font-black text-sm sm:text-base transition-all border-2 border-black
                  ${f===j.id?`${j.color} text-white shadow-neo scale-105`:"bg-white text-gray-500 hover:bg-gray-100 hover:scale-105"}
                `,children:[s.jsx("span",{className:"mr-1 sm:mr-2",children:j.emoji}),j.label]},j.id))})]}),s.jsx(ja.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:S.map(j=>s.jsx(iG,{game:j,unlockedLevels:o[j.id]||1,onClick:()=>g(j.id)},j.id))}),S.length===0&&s.jsx("div",{className:"text-center py-20 text-gray-400 font-bold text-xl",children:""})]})})}const HG=()=>s.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black/20"}),s.jsx("div",{className:"z-10 flex flex-col items-center",children:s.jsx("h1",{className:"text-6xl font-black text-white animate-bounce drop-shadow-lg stroke-black",children:"!"})})]});var Hp=(i=>(i.SPATIAL_PERCEPTION="SPATIAL_PERCEPTION",i.ROTATION_TRANSFORM="ROTATION_TRANSFORM",i.PROJECTION_SHADOW="PROJECTION_SHADOW",i.CONSTRUCTION_ASSEMBLY="CONSTRUCTION_ASSEMBLY",i.LOGIC_PUZZLE="LOGIC_PUZZLE",i.PHYSICS_MECHANISM="PHYSICS_MECHANISM",i))(Hp||{}),ne=(i=>(i.HOME="HOME",i.CATEGORY_LIST="CATEGORY_LIST",i.ARTICLE_DETAIL="ARTICLE_DETAIL",i.GAME_1="GAME_1",i.GAME_2="GAME_2",i.GAME_3="GAME_3",i.GAME_4="GAME_4",i.GAME_5="GAME_5",i.GAME_6="GAME_6",i.GAME_7="GAME_7",i.GAME_8="GAME_8",i.GAME_9="GAME_9",i.GAME_10="GAME_10",i.GAME_11="GAME_11",i.GAME_12="GAME_12",i.GAME_13="GAME_13",i.GAME_14="GAME_14",i.GAME_15="GAME_15",i.GAME_16="GAME_16",i.GAME_17="GAME_17",i.GAME_18="GAME_18",i.GAME_19="GAME_19",i.GAME_20="GAME_20",i.GAME_21="GAME_21",i.GAME_22="GAME_22",i.GAME_23="GAME_23",i.GAME_24="GAME_24",i.GAME_25="GAME_25",i.GAME_26="GAME_26",i.GAME_27="GAME_27",i.GAME_28="GAME_28",i.GAME_29="GAME_29",i.GAME_30="GAME_30",i.GAME_31="GAME_31",i.GAME_32="GAME_32",i.GAME_33="GAME_33",i.GAME_34="GAME_34",i.GAME_35="GAME_35",i.GAME_36="GAME_36",i.GAME_37="GAME_37",i.GAME_38="GAME_38",i.GAME_39="GAME_39",i.GAME_40="GAME_40",i.GAME_41="GAME_41",i.GAME_42="GAME_42",i.GAME_43="GAME_43",i.GAME_44="GAME_44",i.GAME_45="GAME_45",i.GAME_46="GAME_46",i.GAME_47="GAME_47",i.GAME_48="GAME_48",i.GAME_49="GAME_49",i.GAME_50="GAME_50",i.GAME_51="GAME_51",i.GAME_52="GAME_52",i.GAME_53="GAME_53",i.GAME_54="GAME_54",i.GAME_55="GAME_55",i.GAME_56="GAME_56",i.GAME_57="GAME_57",i.GAME_58="GAME_58",i.GAME_59="GAME_59",i.GAME_60="GAME_60",i.GAME_61="GAME_61",i.GAME_62="GAME_62",i.GAME_63="GAME_63",i.GAME_64="GAME_64",i.GAME_65="GAME_65",i.GAME_66="GAME_66",i.GAME_67="GAME_67",i.GAME_68="GAME_68",i.GAME_69="GAME_69",i.GAME_70="GAME_70",i.GAME_71="GAME_71",i.GAME_72="GAME_72",i.GAME_73="GAME_73",i.GAME_74="GAME_74",i.GAME_75="GAME_75",i.GAME_76="GAME_76",i.GAME_77="GAME_77",i.GAME_78="GAME_78",i.GAME_79="GAME_79",i.GAME_80="GAME_80",i.GAME_81="GAME_81",i.GAME_82="GAME_82",i.GAME_83="GAME_83",i.GAME_84="GAME_84",i.GAME_85="GAME_85",i.GAME_86="GAME_86",i.GAME_87="GAME_87",i.GAME_88="GAME_88",i.GAME_89="GAME_89",i.GAME_90="GAME_90",i.GAME_91="GAME_91",i.GAME_92="GAME_92",i.GAME_93="GAME_93",i.GAME_94="GAME_94",i.GAME_95="GAME_95",i.GAME_96="GAME_96",i.GAME_97="GAME_97",i.GAME_98="GAME_98",i.GAME_99="GAME_99",i.GAME_100="GAME_100",i.GAME_101="GAME_101",i.GAME_102="GAME_102",i.GAME_103="GAME_103",i.GAME_104="GAME_104",i.GAME_105="GAME_105",i.GAME_106="GAME_106",i.GAME_107="GAME_107",i.GAME_108="GAME_108",i.GAME_109="GAME_109",i.GAME_110="GAME_110",i.GAME_111="GAME_111",i.GAME_112="GAME_112",i.GAME_113="GAME_113",i.GAME_114="GAME_114",i.GAME_115="GAME_115",i.GAME_116="GAME_116",i.GAME_117="GAME_117",i.GAME_118="GAME_118",i.GAME_119="GAME_119",i.GAME_120="GAME_120",i.GAME_121="GAME_121",i.GAME_122="GAME_122",i.GAME_123="GAME_123",i.GAME_124="GAME_124",i.GAME_125="GAME_125",i.GAME_126="GAME_126",i.GAME_127="GAME_127",i.GAME_128="GAME_128",i.GAME_129="GAME_129",i.GAME_130="GAME_130",i.GAME_131="GAME_131",i.GAME_132="GAME_132",i.GAME_133="GAME_133",i.GAME_134="GAME_134",i.GAME_135="GAME_135",i.GAME_136="GAME_136",i.GAME_137="GAME_137",i.GAME_138="GAME_138",i.GAME_139="GAME_139",i.GAME_140="GAME_140",i.GAME_141="GAME_141",i.GAME_142="GAME_142",i.GAME_143="GAME_143",i.GAME_144="GAME_144",i.GAME_145="GAME_145",i.GAME_146="GAME_146",i))(ne||{});const qG=[{id:ne.GAME_1,title:"",description:"",color:"bg-blue-400",icon:"",difficulty:1},{id:ne.GAME_2,title:"",description:"",color:"bg-indigo-500",icon:"",difficulty:1},{id:ne.GAME_3,title:"",description:"",color:"bg-green-400",icon:"",difficulty:2},{id:ne.GAME_4,title:"",description:"",color:"bg-purple-400",icon:"",difficulty:2},{id:ne.GAME_5,title:"",description:"",color:"bg-orange-400",icon:"",difficulty:2},{id:ne.GAME_6,title:"",description:"",color:"bg-teal-400",icon:"",difficulty:3},{id:ne.GAME_7,title:"",description:"",color:"bg-pink-400",icon:"",difficulty:3},{id:ne.GAME_8,title:"",description:"",color:"bg-emerald-400",icon:"",difficulty:3},{id:ne.GAME_9,title:"",description:"",color:"bg-red-400",icon:"",difficulty:3},{id:ne.GAME_10,title:"",description:"",color:"bg-cyan-400",icon:"",difficulty:2},{id:ne.GAME_11,title:"",description:"",color:"bg-lime-400",icon:"",difficulty:3},{id:ne.GAME_12,title:"",description:"",color:"bg-violet-400",icon:"",difficulty:2},{id:ne.GAME_13,title:"",description:"",color:"bg-fuchsia-400",icon:"",difficulty:3},{id:ne.GAME_14,title:"",description:"",color:"bg-amber-400",icon:"",difficulty:3},{id:ne.GAME_15,title:"",description:"",color:"bg-sky-400",icon:"",difficulty:2},{id:ne.GAME_16,title:"",description:"",color:"bg-rose-400",icon:"",difficulty:3},{id:ne.GAME_17,title:"",description:"",color:"bg-indigo-400",icon:"",difficulty:3},{id:ne.GAME_18,title:"",description:"",color:"bg-teal-500",icon:"",difficulty:3},{id:ne.GAME_19,title:"",description:"",color:"bg-orange-500",icon:"",difficulty:2},{id:ne.GAME_20,title:"",description:"",color:"bg-green-500",icon:"",difficulty:3},{id:ne.GAME_21,title:"",description:"",color:"bg-yellow-500",icon:"",difficulty:3},{id:ne.GAME_22,title:"",description:"",color:"bg-pink-500",icon:"",difficulty:3},{id:ne.GAME_23,title:"",description:"",color:"bg-blue-500",icon:"",difficulty:2},{id:ne.GAME_24,title:"",description:"",color:"bg-emerald-500",icon:"",difficulty:3},{id:ne.GAME_25,title:"",description:"",color:"bg-indigo-600",icon:"",difficulty:2},{id:ne.GAME_26,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:3},{id:ne.GAME_27,title:"",description:"",color:"bg-violet-500",icon:"",difficulty:3},{id:ne.GAME_28,title:"",description:"",color:"bg-lime-500",icon:"",difficulty:3},{id:ne.GAME_29,title:"",description:"",color:"bg-fuchsia-500",icon:"",difficulty:2},{id:ne.GAME_30,title:"",description:"",color:"bg-orange-600",icon:"",difficulty:4},{id:ne.GAME_31,title:"",description:"",color:"bg-sky-500",icon:"",difficulty:3},{id:ne.GAME_32,title:"",description:"",color:"bg-red-500",icon:"",difficulty:4},{id:ne.GAME_33,title:"",description:"",color:"bg-cyan-600",icon:"",difficulty:3},{id:ne.GAME_34,title:"",description:"",color:"bg-green-600",icon:"",difficulty:3},{id:ne.GAME_35,title:"",description:"",color:"bg-amber-500",icon:"",difficulty:3},{id:ne.GAME_36,title:"",description:"",color:"bg-purple-500",icon:"",difficulty:3},{id:ne.GAME_37,title:"",description:"",color:"bg-pink-600",icon:"",difficulty:4},{id:ne.GAME_38,title:"",description:"",color:"bg-blue-600",icon:"",difficulty:3},{id:ne.GAME_39,title:"",description:"",color:"bg-teal-600",icon:"",difficulty:3},{id:ne.GAME_40,title:"",description:"",color:"bg-indigo-700",icon:"",difficulty:3},{id:ne.GAME_41,title:"",description:"",color:"bg-stone-500",icon:"",difficulty:2},{id:ne.GAME_42,title:"",description:"",color:"bg-emerald-600",icon:"",difficulty:3},{id:ne.GAME_43,title:"",description:"",color:"bg-purple-600",icon:"",difficulty:3},{id:ne.GAME_44,title:"",description:"",color:"bg-yellow-600",icon:"",difficulty:3},{id:ne.GAME_45,title:"",description:"",color:"bg-red-600",icon:"",difficulty:4},{id:ne.GAME_46,title:"",description:"",color:"bg-fuchsia-600",icon:"",difficulty:4},{id:ne.GAME_47,title:"",description:"",color:"bg-slate-600",icon:"",difficulty:3},{id:ne.GAME_48,title:"",description:"",color:"bg-orange-500",icon:"",difficulty:3},{id:ne.GAME_49,title:"",description:"",color:"bg-indigo-500",icon:"",difficulty:3},{id:ne.GAME_50,title:"",description:"",color:"bg-green-500",icon:"",difficulty:3},{id:ne.GAME_51,title:"",description:"",color:"bg-yellow-500",icon:"",difficulty:3},{id:ne.GAME_52,title:"",description:"",color:"bg-violet-500",icon:"",difficulty:3},{id:ne.GAME_53,title:"",description:"",color:"bg-blue-500",icon:"",difficulty:3},{id:ne.GAME_54,title:"",description:"",color:"bg-cyan-500",icon:"",difficulty:4},{id:ne.GAME_55,title:"",description:"",color:"bg-red-500",icon:"",difficulty:4},{id:ne.GAME_56,title:"",description:"",color:"bg-purple-500",icon:"",difficulty:4},{id:ne.GAME_57,title:"",description:"",color:"bg-emerald-500",icon:"",difficulty:4},{id:ne.GAME_58,title:"",description:"",color:"bg-pink-500",icon:"",difficulty:4},{id:ne.GAME_59,title:"",description:"",color:"bg-blue-600",icon:"",difficulty:5},{id:ne.GAME_60,title:"",description:"",color:"bg-amber-500",icon:"",difficulty:4},{id:ne.GAME_61,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:3},{id:ne.GAME_62,title:"",description:"",color:"bg-orange-500",icon:"",difficulty:3},{id:ne.GAME_63,title:"",description:"",color:"bg-stone-500",icon:"",difficulty:4},{id:ne.GAME_64,title:"",description:"",color:"bg-fuchsia-600",icon:"",difficulty:3},{id:ne.GAME_65,title:"",description:"",color:"bg-sky-600",icon:"",difficulty:4},{id:ne.GAME_66,title:"",description:"",color:"bg-red-600",icon:"",difficulty:3},{id:ne.GAME_67,title:"",description:"",color:"bg-indigo-600",icon:"",difficulty:3},{id:ne.GAME_68,title:"",description:"",color:"bg-teal-600",icon:"",difficulty:3},{id:ne.GAME_69,title:"",description:"",color:"bg-zinc-600",icon:"",difficulty:4},{id:ne.GAME_70,title:"",description:"",color:"bg-lime-600",icon:"",difficulty:3},{id:ne.GAME_71,title:"",description:"",color:"bg-sky-500",icon:"",difficulty:4},{id:ne.GAME_72,title:"",description:"",color:"bg-fuchsia-500",icon:"",difficulty:3},{id:ne.GAME_73,title:"",description:"",color:"bg-blue-500",icon:"",difficulty:3},{id:ne.GAME_74,title:"",description:"",color:"bg-amber-500",icon:"",difficulty:4},{id:ne.GAME_75,title:"",description:"",color:"bg-green-600",icon:"",difficulty:3},{id:ne.GAME_76,title:"",description:"",color:"bg-stone-600",icon:"",difficulty:5},{id:ne.GAME_77,title:"",description:"",color:"bg-indigo-500",icon:"",difficulty:3},{id:ne.GAME_78,title:"",description:"",color:"bg-amber-600",icon:"",difficulty:3},{id:ne.GAME_79,title:"",description:"",color:"bg-pink-500",icon:"",difficulty:3},{id:ne.GAME_80,title:"",description:"",color:"bg-teal-500",icon:"",difficulty:4},{id:ne.GAME_81,title:"",description:"",color:"bg-orange-500",icon:"",difficulty:3},{id:ne.GAME_82,title:"",description:"",color:"bg-violet-500",icon:"",difficulty:3},{id:ne.GAME_83,title:"",description:"",color:"bg-cyan-600",icon:"",difficulty:4},{id:ne.GAME_84,title:"",description:"",color:"bg-slate-500",icon:"",difficulty:4},{id:ne.GAME_85,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:4},{id:ne.GAME_86,title:"",description:"",color:"bg-emerald-500",icon:"",difficulty:3},{id:ne.GAME_87,title:"",description:"",color:"bg-blue-600",icon:"",difficulty:4},{id:ne.GAME_88,title:"",description:"",color:"bg-yellow-500",icon:"",difficulty:3},{id:ne.GAME_89,title:"",description:"",color:"bg-indigo-500",icon:"",difficulty:3},{id:ne.GAME_90,title:"",description:"",color:"bg-fuchsia-600",icon:"",difficulty:3},{id:ne.GAME_91,title:"",description:"",color:"bg-green-600",icon:"",difficulty:3},{id:ne.GAME_92,title:"",description:"",color:"bg-amber-600",icon:"",difficulty:4},{id:ne.GAME_93,title:"",description:"",color:"bg-teal-600",icon:"",difficulty:3},{id:ne.GAME_94,title:"",description:"",color:"bg-stone-500",icon:"",difficulty:3},{id:ne.GAME_95,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:4},{id:ne.GAME_96,title:"",description:"",color:"bg-indigo-500",icon:"",difficulty:3},{id:ne.GAME_97,title:"",description:"",color:"bg-purple-600",icon:"",difficulty:4},{id:ne.GAME_98,title:"",description:"",color:"bg-red-500",icon:"",difficulty:4},{id:ne.GAME_99,title:"",description:"",color:"bg-sky-500",icon:"",difficulty:4},{id:ne.GAME_100,title:"",description:"",color:"bg-yellow-500",icon:"",difficulty:3},{id:ne.GAME_101,title:"",description:"",color:"bg-lime-600",icon:"",difficulty:5},{id:ne.GAME_102,title:"",description:"",color:"bg-teal-500",icon:"",difficulty:4},{id:ne.GAME_103,title:"",description:"",color:"bg-orange-500",icon:"",difficulty:4},{id:ne.GAME_104,title:"",description:"",color:"bg-blue-500",icon:"",difficulty:3},{id:ne.GAME_105,title:"",description:"",color:"bg-blue-600",icon:"",difficulty:4},{id:ne.GAME_106,title:"",description:"",color:"bg-emerald-600",icon:"",difficulty:4},{id:ne.GAME_107,title:"",description:"",color:"bg-violet-500",icon:"",difficulty:3},{id:ne.GAME_108,title:"",description:"",color:"bg-amber-500",icon:"",difficulty:3},{id:ne.GAME_109,title:"",description:"",color:"bg-indigo-700",icon:"",difficulty:3},{id:ne.GAME_110,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:3},{id:ne.GAME_111,title:"",description:"",color:"bg-teal-600",icon:"",difficulty:4},{id:ne.GAME_112,title:"",description:"",color:"bg-blue-500",icon:"",difficulty:3},{id:ne.GAME_113,title:"",description:"",color:"bg-purple-500",icon:"",difficulty:3},{id:ne.GAME_114,title:"",description:"3D",color:"bg-cyan-500",icon:"",difficulty:4},{id:ne.GAME_115,title:"",description:"",color:"bg-pink-500",icon:"",difficulty:3},{id:ne.GAME_116,title:"",description:"",color:"bg-amber-600",icon:"",difficulty:4},{id:ne.GAME_117,title:"",description:"",color:"bg-red-500",icon:"",difficulty:5},{id:ne.GAME_118,title:"",description:"",color:"bg-blue-600",icon:"",difficulty:3},{id:ne.GAME_119,title:"",description:"",color:"bg-green-600",icon:"",difficulty:3},{id:ne.GAME_120,title:"",description:"",color:"bg-orange-500",icon:"",difficulty:3},{id:ne.GAME_121,title:"",description:"3D",color:"bg-purple-700",icon:"",difficulty:5},{id:ne.GAME_122,title:"",description:"",color:"bg-amber-500",icon:"",difficulty:3},{id:ne.GAME_123,title:"",description:"",color:"bg-cyan-600",icon:"",difficulty:4},{id:ne.GAME_124,title:"",description:"",color:"bg-indigo-600",icon:"",difficulty:4},{id:ne.GAME_125,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:4},{id:ne.GAME_126,title:"",description:"",color:"bg-teal-600",icon:"",difficulty:3},{id:ne.GAME_127,title:"",description:"",color:"bg-slate-600",icon:"",difficulty:4},{id:ne.GAME_128,title:"",description:"",color:"bg-blue-500",icon:"",difficulty:3},{id:ne.GAME_129,title:"",description:"",color:"bg-green-500",icon:"",difficulty:4},{id:ne.GAME_130,title:"",description:"",color:"bg-violet-500",icon:"",difficulty:3},{id:ne.GAME_131,title:"",description:"",color:"bg-cyan-500",icon:"",difficulty:4},{id:ne.GAME_132,title:"",description:"",color:"bg-stone-500",icon:"",difficulty:2},{id:ne.GAME_133,title:"",description:"RGB",color:"bg-violet-600",icon:"",difficulty:3},{id:ne.GAME_134,title:"",description:"",color:"bg-pink-500",icon:"",difficulty:3},{id:ne.GAME_135,title:"",description:"",color:"bg-indigo-500",icon:"",difficulty:2},{id:ne.GAME_136,title:"",description:"",color:"bg-emerald-500",icon:"",difficulty:3},{id:ne.GAME_137,title:"",description:"",color:"bg-blue-600",icon:"",difficulty:4},{id:ne.GAME_138,title:"",description:"",color:"bg-yellow-500",icon:"",difficulty:3},{id:ne.GAME_139,title:"",description:"",color:"bg-orange-600",icon:"",difficulty:3},{id:ne.GAME_140,title:"",description:"",color:"bg-slate-600",icon:"",difficulty:3},{id:ne.GAME_141,title:"",description:"",color:"bg-pink-500",icon:"",difficulty:4},{id:ne.GAME_142,title:"",description:"",color:"bg-indigo-600",icon:"",difficulty:3},{id:ne.GAME_143,title:"",description:"",color:"bg-teal-600",icon:"",difficulty:4},{id:ne.GAME_144,title:"",description:"",color:"bg-sky-500",icon:"",difficulty:4},{id:ne.GAME_145,title:"",description:"",color:"bg-rose-500",icon:"",difficulty:3},{id:ne.GAME_146,title:"",description:"",color:"bg-amber-600",icon:"",difficulty:4}],XG={cube:"",sphere:"",cone:"",cylinder:"",torus:""},Ot=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F"],oC=[{id:Hp.SPATIAL_PERCEPTION,title:"",description:"",color:"bg-blue-500",icon:"",gameIds:[ne.GAME_2,ne.GAME_9,ne.GAME_34,ne.GAME_68,ne.GAME_96,ne.GAME_102,ne.GAME_134,ne.GAME_135,ne.GAME_138]},{id:Hp.ROTATION_TRANSFORM,title:"",description:"",color:"bg-purple-500",icon:"",gameIds:[ne.GAME_8,ne.GAME_10,ne.GAME_14,ne.GAME_37,ne.GAME_40,ne.GAME_54,ne.GAME_58,ne.GAME_60,ne.GAME_77,ne.GAME_81,ne.GAME_82,ne.GAME_113,ne.GAME_116,ne.GAME_117,ne.GAME_120,ne.GAME_126,ne.GAME_128]},{id:Hp.PROJECTION_SHADOW,title:"",description:"",color:"bg-orange-500",icon:"",gameIds:[ne.GAME_4,ne.GAME_17,ne.GAME_24,ne.GAME_31,ne.GAME_44,ne.GAME_52,ne.GAME_59,ne.GAME_64,ne.GAME_76,ne.GAME_79,ne.GAME_85,ne.GAME_129]},{id:Hp.CONSTRUCTION_ASSEMBLY,title:"",description:"",color:"bg-green-500",icon:"",gameIds:[ne.GAME_35,ne.GAME_38,ne.GAME_43,ne.GAME_49,ne.GAME_51,ne.GAME_63,ne.GAME_74,ne.GAME_108,ne.GAME_110]}],WG=[{id:"all",name:"",icon:"",color:"bg-slate-500"},{id:"basic",name:"",icon:"",color:"bg-blue-500"},{id:"view",name:"",icon:"",color:"bg-purple-500"},{id:"transform",name:"",icon:"",color:"bg-orange-500"},{id:"geometry",name:"",icon:"",color:"bg-green-500"},{id:"physics",name:"",icon:"",color:"bg-slate-600"},{id:"application",name:"",icon:"",color:"bg-teal-500"},{id:"advanced",name:"",icon:"",color:"bg-pink-500"}],Lv=[{id:"article-1",title:"",description:"3D",coverImage:"",category:"",categoryId:"basic",readTime:"5",views:1234,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-2",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"6",views:1456,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-3",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"7",views:1678,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-4",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"5",views:1234,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-5",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"8",views:1890,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-6",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"6",views:1567,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-7",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"7",views:2134,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-8",title:"",description:"",coverImage:"",category:"",categoryId:"basic",readTime:"5",views:2456,color:"bg-gradient-to-br from-blue-400 to-blue-600",has3D:!0},{id:"article-9",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"8",views:2156,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-10",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"6",views:1678,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-11",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"6",views:1543,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-12",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"6",views:1432,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-13",title:"",description:'""',coverImage:"",category:"",categoryId:"view",readTime:"8",views:1876,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-14",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"10",views:2234,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-15",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"8",views:1823,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-16",title:"",description:"",coverImage:"",category:"",categoryId:"view",readTime:"7",views:1654,color:"bg-gradient-to-br from-purple-400 to-purple-600",has3D:!0},{id:"article-17",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"7",views:1543,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-18",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"5",views:1234,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-19",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"6",views:1654,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-20",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"6",views:1456,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-21",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"10",views:1876,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-22",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"7",views:1432,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-23",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"9",views:1789,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-24",title:"",description:"",coverImage:"",category:"",categoryId:"transform",readTime:"9",views:987,color:"bg-gradient-to-br from-orange-400 to-orange-600",has3D:!0},{id:"article-25",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"6",views:1567,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-26",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"7",views:1678,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-27",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"6",views:1543,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-28",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"10",views:1654,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-29",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"8",views:1432,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-30",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"7",views:1234,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-31",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"9",views:1876,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-32",title:"",description:"",coverImage:"",category:"",categoryId:"geometry",readTime:"9",views:2034,color:"bg-gradient-to-br from-green-400 to-green-600",has3D:!0},{id:"article-33",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"9",views:2034,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-34",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"7",views:1456,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-35",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"6",views:1567,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-36",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"7",views:1432,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-37",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"6",views:1298,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-38",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"6",views:2156,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-39",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"8",views:1789,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-40",title:"",description:"",coverImage:"",category:"",categoryId:"physics",readTime:"8",views:1654,color:"bg-gradient-to-br from-slate-400 to-slate-600",has3D:!0},{id:"article-41",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"5",views:1876,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-42",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"8",views:2341,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-43",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"8",views:1987,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-44",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"9",views:1789,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-45",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"7",views:2234,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-46",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"6",views:1543,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-47",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"7",views:1678,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-48",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"5",views:1432,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-49",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"6",views:1567,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-50",title:"",description:"",coverImage:"",category:"",categoryId:"application",readTime:"8",views:1890,color:"bg-gradient-to-br from-teal-400 to-teal-600",has3D:!0},{id:"article-51",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"10",views:2567,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-52",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"12",views:2890,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-53",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"10",views:2134,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-54",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"11",views:1987,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-55",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"12",views:1765,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-56",title:"3D",description:"3D",coverImage:"",category:"",categoryId:"advanced",readTime:"15",views:3456,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-57",title:"",description:"VR",coverImage:"",category:"",categoryId:"advanced",readTime:"8",views:2678,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-58",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"10",views:2345,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-59",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"12",views:2123,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0},{id:"article-60",title:"",description:"",coverImage:"",category:"",categoryId:"advanced",readTime:"8",views:1890,color:"bg-gradient-to-br from-pink-400 to-pink-600",has3D:!0}],YG=({emoji:i})=>{const[e,t]=E.useState(0);return E.useEffect(()=>{const n=setInterval(()=>{t(a=>(a+2)%360)},50);return()=>clearInterval(n)},[]),s.jsx("div",{className:"text-6xl transition-transform",style:{transform:`perspective(200px) rotateY(${e}deg)`,transformStyle:"preserve-3d"},children:i})},ZG=({article:i,onClick:e,index:t})=>{const[n,a]=E.useState(!1);return s.jsxs("button",{onClick:e,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),className:"w-full bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] active:scale-95 text-left",style:{animationDelay:`${t*50}ms`,animation:"fadeInUp 0.5s ease-out forwards",opacity:0},children:[s.jsxs("div",{className:`${i.color} p-6 flex items-center justify-center relative overflow-hidden`,children:[s.jsxs("div",{className:"absolute inset-0 opacity-20",children:[s.jsx("div",{className:"absolute w-20 h-20 bg-white/30 rounded-full",style:{animation:"float 3s ease-in-out infinite",top:"10%",left:"10%"}}),s.jsx("div",{className:"absolute w-16 h-16 bg-white/20 rounded-full",style:{animation:"float 4s ease-in-out infinite reverse",bottom:"10%",right:"10%"}})]}),s.jsx("div",{className:`relative z-10 transition-transform duration-500 ${n?"scale-125":""}`,children:n?s.jsx(YG,{emoji:i.coverImage}):s.jsx("span",{className:"text-6xl",children:i.coverImage})}),i.has3D&&s.jsxs("div",{className:"absolute top-2 right-2 bg-white/90 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 text-purple-600",children:[s.jsx(l_,{size:12,fill:"currentColor"}),"3D"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"bg-blue-100 text-blue-600 text-xs font-bold px-2 py-1 rounded-full",children:i.category})}),s.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2 line-clamp-2",children:i.title}),s.jsx("p",{className:"text-slate-500 text-sm mb-3 line-clamp-2",children:i.description}),s.jsxs("div",{className:"flex items-center justify-between text-slate-400 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(o_,{size:14}),s.jsx("span",{children:i.readTime})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qy,{size:14}),s.jsx("span",{children:i.views})]})]}),s.jsxs("div",{className:"mt-3 flex items-center text-blue-500 font-bold text-sm",children:[" ",s.jsx(Hy,{size:16,className:"ml-1"})]})]}),s.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-10px) rotate(180deg); }
        }
      `})]})},KG=({onSelectArticle:i})=>{const[e,t]=E.useState("all"),n=e==="all"?Lv:Lv.filter(a=>a.categoryId===e);return s.jsxs("div",{className:"flex-1 pb-8",children:[s.jsx("div",{className:"mb-4 -mx-2",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 px-2 scrollbar-hide",children:WG.map(a=>s.jsxs("button",{onClick:()=>t(a.id),className:`flex-shrink-0 flex items-center gap-1.5 px-3 py-2 rounded-full text-sm font-bold transition-all ${e===a.id?`${a.color} text-white shadow-lg scale-105`:"bg-white text-slate-600 shadow"}`,children:[s.jsx("span",{children:a.icon}),s.jsx("span",{children:a.name}),a.id!=="all"&&s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${e===a.id?"bg-white/20":"bg-slate-100"}`,children:Lv.filter(r=>r.categoryId===a.id).length})]},a.id))})}),s.jsxs("div",{className:"mb-4 text-slate-500 text-sm",children:[" ",s.jsx("span",{className:"font-bold text-blue-500",children:n.length})," "]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map((a,r)=>s.jsx(ZG,{article:a,index:r,onClick:()=>i(a.id)},a.id))})]})},JG=({onClose:i})=>{const[e,t]=E.useState(0),n=[[[0,1],[1,0],[1,1],[1,2],[1,3],[2,1]],[[0,0],[0,1],[1,1],[1,2],[2,2],[2,3]],[[0,1],[1,0],[1,1],[1,2],[2,1],[3,1]],[[0,0],[1,0],[1,1],[1,2],[2,2],[3,2]]];return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-green-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-slate-100 rounded-xl p-4 mb-4",children:s.jsx("svg",{viewBox:"0 0 200 200",className:"w-full",children:n[e].map(([a,r],o)=>s.jsx("rect",{x:40+r*30,y:40+a*30,width:"28",height:"28",fill:"#22c55e",stroke:"#16a34a",strokeWidth:"2",rx:"2"},o))})}),s.jsxs("p",{className:"text-center text-slate-600 mb-4",children:[" ",e+1," / ",n.length]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>t((e-1+n.length)%n.length),className:"flex-1 bg-slate-200 text-slate-600 py-2 rounded-lg font-bold",children:""}),s.jsx("button",{onClick:()=>t((e+1)%n.length),className:"flex-1 bg-green-500 text-white py-2 rounded-lg font-bold",children:""})]})]})]})})},QG=({onClose:i})=>{const[e,t]=E.useState(0),[n,a]=E.useState("y"),r=()=>{switch(n){case"x":return`rotateX(${e}deg)`;case"y":return`rotateY(${e}deg)`;case"z":return`rotateZ(${e}deg)`}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-purple-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:"3D"}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-slate-100 rounded-xl p-8 mb-4 flex items-center justify-center",style:{perspective:"500px"},children:s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg shadow-lg flex items-center justify-center text-white text-4xl font-bold",style:{transform:r(),transition:"transform 0.3s"},children:"L"})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"text-sm text-slate-600 mb-1 block",children:[": ",e,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:e,onChange:o=>t(parseInt(o.target.value)),className:"w-full"})]}),s.jsx("div",{className:"flex gap-2",children:["x","y","z"].map(o=>s.jsxs("button",{onClick:()=>a(o),className:`flex-1 py-2 rounded-lg font-bold transition-all ${n===o?"bg-purple-500 text-white":"bg-slate-200 text-slate-600"}`,children:[o.toUpperCase(),""]},o))})]})]})})},$G=({onClose:i})=>{const[e,t]=E.useState(Array(8).fill(null).map(()=>Array(8).fill(!1))),n=(r,o)=>{const l=e.map((u,d)=>u.map((f,m)=>d===r&&m===o?!f:f));t(l)},a=()=>{t(Array(8).fill(null).map(()=>Array(8).fill(!1)))};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-orange-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-slate-100 rounded-xl p-2 mb-4",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:e.map((r,o)=>r.map((l,u)=>s.jsx("button",{onClick:()=>n(o,u),className:`aspect-square rounded transition-all ${l?"bg-orange-500":"bg-white border border-slate-300"}`},`${o}-${u}`)))})}),s.jsx("button",{onClick:a,className:"w-full bg-slate-200 text-slate-600 py-2 rounded-lg font-bold",children:""})]})]})})},eI=({onClose:i})=>{const[e,t]=E.useState("cube"),[n,a]=E.useState(""),[r,o]=E.useState(""),[l,u]=E.useState(""),d=()=>{const f=parseFloat(n)||0,m=parseFloat(r)||0,x=parseFloat(l)||0;switch(e){case"cube":return(f*m*x).toFixed(2);case"cylinder":return(Math.PI*f*f*m).toFixed(2);case"sphere":return(4/3*Math.PI*f*f*f).toFixed(2)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-cyan-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex gap-2 mb-4",children:[{id:"cube",label:"",icon:""},{id:"cylinder",label:"",icon:""},{id:"sphere",label:"",icon:""}].map(f=>s.jsxs("button",{onClick:()=>t(f.id),className:`flex-1 py-3 rounded-lg font-bold transition-all flex flex-col items-center ${e===f.id?"bg-cyan-500 text-white":"bg-slate-100 text-slate-600"}`,children:[s.jsx("span",{className:"text-2xl mb-1",children:f.icon}),s.jsx("span",{className:"text-xs",children:f.label})]},f.id))}),s.jsxs("div",{className:"space-y-3 mb-4",children:[e==="cube"&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"number",value:n,onChange:f=>a(f.target.value),placeholder:"",className:"w-full p-3 border rounded-lg"}),s.jsx("input",{type:"number",value:r,onChange:f=>o(f.target.value),placeholder:"",className:"w-full p-3 border rounded-lg"}),s.jsx("input",{type:"number",value:l,onChange:f=>u(f.target.value),placeholder:"",className:"w-full p-3 border rounded-lg"})]}),e==="cylinder"&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"number",value:n,onChange:f=>a(f.target.value),placeholder:"",className:"w-full p-3 border rounded-lg"}),s.jsx("input",{type:"number",value:r,onChange:f=>o(f.target.value),placeholder:"",className:"w-full p-3 border rounded-lg"})]}),e==="sphere"&&s.jsx("input",{type:"number",value:n,onChange:f=>a(f.target.value),placeholder:"",className:"w-full p-3 border rounded-lg"})]}),s.jsxs("div",{className:"bg-cyan-50 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-slate-500 text-sm mb-1",children:""}),s.jsx("p",{className:"text-3xl font-black text-cyan-600",children:d()})]})]})]})})},tI=({onClose:i})=>{const[e,t]=E.useState(Array(10).fill(null).map(()=>Array(10).fill(!1))),[n,a]=E.useState("vertical"),r=(o,l)=>{const u=e.map(d=>[...d]);u[o][l]=!u[o][l],(n==="vertical"||n==="both")&&(u[o][9-l]=u[o][l]),(n==="horizontal"||n==="both")&&(u[9-o][l]=u[o][l]),n==="both"&&(u[9-o][9-l]=u[o][l]),t(u)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-pink-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"bg-slate-100 rounded-xl p-2 mb-4 relative",children:[s.jsx("div",{className:"grid grid-cols-10 gap-0.5",children:e.map((o,l)=>o.map((u,d)=>s.jsx("button",{onClick:()=>r(l,d),className:`aspect-square rounded-sm transition-all ${u?"bg-pink-500":"bg-white"}`},`${l}-${d}`)))}),(n==="vertical"||n==="both")&&s.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-0.5 bg-pink-300 -translate-x-1/2"}),(n==="horizontal"||n==="both")&&s.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-0.5 bg-pink-300 -translate-y-1/2"})]}),s.jsx("div",{className:"flex gap-2 mb-3",children:[{id:"vertical",label:""},{id:"horizontal",label:""},{id:"both",label:""}].map(o=>s.jsx("button",{onClick:()=>a(o.id),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${n===o.id?"bg-pink-500 text-white":"bg-slate-200 text-slate-600"}`,children:o.label},o.id))}),s.jsx("button",{onClick:()=>t(Array(10).fill(null).map(()=>Array(10).fill(!1))),className:"w-full bg-slate-200 text-slate-600 py-2 rounded-lg font-bold",children:""})]})]})})},nI=({onClose:i})=>{const[e,t]=E.useState(25),[n,a]=E.useState(45),[r,o]=E.useState(["#ef4444","#22c55e","#3b82f6","#eab308","#f97316","#8b5cf6"]),[l,u]=E.useState(!1),d=E.useRef({x:0,y:0}),f=v=>{u(!0),d.current={x:v.clientX,y:v.clientY}},m=v=>{if(!l)return;const M=v.clientX-d.current.x,_=v.clientY-d.current.y;a(S=>S+M*.5),t(S=>Math.max(-90,Math.min(90,S-_*.5))),d.current={x:v.clientX,y:v.clientY}},x=v=>{u(!0),d.current={x:v.touches[0].clientX,y:v.touches[0].clientY}},g=v=>{if(!l)return;const M=v.touches[0].clientX-d.current.x,_=v.touches[0].clientY-d.current.y;a(S=>S+M*.5),t(S=>Math.max(-90,Math.min(90,S-_*.5))),d.current={x:v.touches[0].clientX,y:v.touches[0].clientY}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-indigo-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:"3D"}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-slate-900 rounded-xl h-64 flex items-center justify-center cursor-grab active:cursor-grabbing select-none",style:{perspective:"600px"},onMouseDown:f,onMouseMove:m,onMouseUp:()=>u(!1),onMouseLeave:()=>u(!1),onTouchStart:x,onTouchMove:g,onTouchEnd:()=>u(!1),children:s.jsxs("div",{className:"relative w-24 h-24",style:{transformStyle:"preserve-3d",transform:`rotateX(${e}deg) rotateY(${n}deg)`},children:[s.jsx("div",{className:"absolute w-24 h-24 flex items-center justify-center text-white font-bold text-xl border-2 border-white/30",style:{background:r[0],transform:"translateZ(48px)"},children:""}),s.jsx("div",{className:"absolute w-24 h-24 flex items-center justify-center text-white font-bold text-xl border-2 border-white/30",style:{background:r[1],transform:"rotateY(180deg) translateZ(48px)"},children:""}),s.jsx("div",{className:"absolute w-24 h-24 flex items-center justify-center text-white font-bold text-xl border-2 border-white/30",style:{background:r[2],transform:"rotateY(-90deg) translateZ(48px)"},children:""}),s.jsx("div",{className:"absolute w-24 h-24 flex items-center justify-center text-white font-bold text-xl border-2 border-white/30",style:{background:r[3],transform:"rotateY(90deg) translateZ(48px)"},children:""}),s.jsx("div",{className:"absolute w-24 h-24 flex items-center justify-center text-white font-bold text-xl border-2 border-white/30",style:{background:r[4],transform:"rotateX(90deg) translateZ(48px)"},children:""}),s.jsx("div",{className:"absolute w-24 h-24 flex items-center justify-center text-white font-bold text-xl border-2 border-white/30",style:{background:r[5],transform:"rotateX(-90deg) translateZ(48px)"},children:""})]})}),s.jsx("p",{className:"text-center text-slate-500 text-sm mt-2",children:""}),s.jsx("div",{className:"grid grid-cols-6 gap-2 mt-4",children:r.map((v,M)=>s.jsx("input",{type:"color",value:v,onChange:_=>{const S=[...r];S[M]=_.target.value,o(S)},className:"w-full h-10 rounded cursor-pointer"},M))})]})]})})},sI=({onClose:i})=>{const[e,t]=E.useState([{x:0,y:0,z:0},{x:1,y:0,z:0},{x:0,y:1,z:0},{x:0,y:0,z:1}]),n=4,a=(d,f,m)=>{if(d==="top"){const x=e.find(g=>g.x===m&&g.z===f&&g.y===0);t(x?e.filter(g=>!(g.x===m&&g.z===f)):[...e,{x:m,y:0,z:f}])}},r=()=>{const d=Array(n).fill(null).map(()=>Array(n).fill(!1));return e.forEach(f=>{f.x<n&&f.z<n&&(d[f.z][f.x]=!0)}),d},o=()=>{const d=Array(n).fill(null).map(()=>Array(n).fill(!1));return e.forEach(f=>{f.x<n&&f.y<n&&(d[n-1-f.y][f.x]=!0)}),d},l=()=>{const d=Array(n).fill(null).map(()=>Array(n).fill(!1));return e.forEach(f=>{f.z<n&&f.y<n&&(d[n-1-f.y][f.z]=!0)}),d},u=(d,f,m)=>s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-bold text-slate-600 mb-1",children:f}),s.jsx("div",{className:"inline-grid gap-0.5",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:d.map((x,g)=>x.map((v,M)=>s.jsx("button",{onClick:()=>a(m,g,M),className:`w-8 h-8 border transition-all ${v?"bg-blue-500 border-blue-600":"bg-slate-100 border-slate-200"}`},`${g}-${M}`)))})]});return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-violet-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex justify-around mb-4",children:u(r()," ()","top")}),s.jsxs("div",{className:"flex justify-around",children:[u(o(),"","front"),u(l(),"","side")]}),s.jsx("button",{onClick:()=>t([{x:0,y:0,z:0}]),className:"w-full mt-4 bg-slate-200 text-slate-600 py-2 rounded-lg font-bold",children:""})]})]})})},iI=({onClose:i})=>{const[e,t]=E.useState([{x:1,y:0,z:1}]),[n,a]=E.useState(-25),[r,o]=E.useState(45),l=3,u=(f,m)=>{const x=e.filter(g=>g.x===f&&g.z===m).length;x<4&&t([...e,{x:f,y:x,z:m}])},d=(f,m)=>{const x=e.filter(g=>g.x===f&&g.z===m);if(x.length>0){const g=x.reduce((v,M)=>M.y>v.y?M:v);t(e.filter(v=>!(v.x===f&&v.z===m&&v.y===g.y)))}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-emerald-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:"3D"}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-slate-900 rounded-xl h-56 flex items-center justify-center",style:{perspective:"500px"},children:s.jsxs("div",{style:{transformStyle:"preserve-3d",transform:`rotateX(${n}deg) rotateY(${r}deg)`},children:[s.jsx("div",{className:"absolute",style:{transform:"rotateX(90deg) translateZ(-20px)",width:"120px",height:"120px",background:"rgba(100,100,100,0.5)",marginLeft:"-60px",marginTop:"-60px"}}),e.map((f,m)=>s.jsxs("div",{className:"absolute w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 border-2 border-blue-300",style:{transformStyle:"preserve-3d",transform:`translate3d(${(f.x-1)*40}px, ${-f.y*40}px, ${(f.z-1)*40}px)`,boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:[s.jsx("div",{className:"absolute w-full h-full bg-blue-300",style:{transform:"translateZ(20px)"}}),s.jsx("div",{className:"absolute w-full h-full bg-blue-500",style:{transform:"rotateY(90deg) translateZ(20px)"}}),s.jsx("div",{className:"absolute w-full h-full bg-blue-400",style:{transform:"rotateX(90deg) translateZ(20px)"}})]},m))]})}),s.jsxs("div",{className:"flex gap-2 mt-4 mb-2",children:[s.jsx("input",{type:"range",min:"-60",max:"0",value:n,onChange:f=>a(Number(f.target.value)),className:"flex-1"}),s.jsx("input",{type:"range",min:"0",max:"90",value:r,onChange:f=>o(Number(f.target.value)),className:"flex-1"})]}),s.jsx("p",{className:"text-center text-slate-500 text-xs mb-2",children:"/"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array(l).fill(null).map((f,m)=>Array(l).fill(null).map((x,g)=>{const v=e.filter(M=>M.x===g&&M.z===m).length;return s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>u(g,m),className:"flex-1 bg-green-500 text-white py-2 rounded font-bold text-sm",children:"+"}),s.jsx("span",{className:"w-8 text-center py-2 bg-slate-100 rounded font-bold",children:v}),s.jsx("button",{onClick:()=>d(g,m),className:"flex-1 bg-red-500 text-white py-2 rounded font-bold text-sm",children:"-"})]},`${g}-${m}`)}))}),s.jsxs("div",{className:"text-center mt-2 text-slate-600 font-bold",children:[": ",e.length," "]})]})]})})},aI=({onClose:i})=>{const[e,t]=E.useState(50),[n,a]=E.useState("y"),[r,o]=E.useState("cube"),l=()=>{if(r==="cube")return"";if(r==="cylinder")return n==="y"?"":"";if(n==="y"){const u=100-e;return u>80?"":u>40?"":""}return""};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-rose-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"bg-slate-100 rounded-xl h-48 flex items-center justify-center relative overflow-hidden",style:{perspective:"400px"},children:[s.jsxs("div",{className:"relative",style:{transformStyle:"preserve-3d",transform:"rotateX(-20deg) rotateY(30deg)"},children:[r==="cube"&&s.jsxs("div",{className:"w-24 h-24 relative",style:{transformStyle:"preserve-3d"},children:[s.jsx("div",{className:"absolute w-full h-full bg-blue-400/80 border-2 border-blue-500",style:{transform:"translateZ(48px)"}}),s.jsx("div",{className:"absolute w-full h-full bg-blue-500/80 border-2 border-blue-600",style:{transform:"rotateY(90deg) translateZ(48px)"}}),s.jsx("div",{className:"absolute w-full h-full bg-blue-300/80 border-2 border-blue-400",style:{transform:"rotateX(90deg) translateZ(48px)"}})]}),r==="cylinder"&&s.jsx("div",{className:"w-20 h-24 bg-gradient-to-r from-green-400 to-green-500 rounded-full",style:{transform:"rotateX(10deg)"}}),r==="cone"&&s.jsx("div",{className:"w-0 h-0 border-l-[40px] border-r-[40px] border-b-[80px] border-l-transparent border-r-transparent border-b-orange-400"})]}),s.jsx("div",{className:"absolute bg-red-500/30 border-2 border-red-500 border-dashed",style:{width:n==="x"?"4px":"100%",height:n==="y"?"4px":"100%",left:n==="x"?`${e}%`:0,top:n==="y"?`${e}%`:0}})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"text-sm text-slate-600",children:""}),s.jsx("input",{type:"range",min:"10",max:"90",value:e,onChange:u=>t(Number(u.target.value)),className:"w-full"})]}),s.jsx("div",{className:"flex gap-2 mt-3",children:["cube","cylinder","cone"].map(u=>s.jsx("button",{onClick:()=>o(u),className:`flex-1 py-2 rounded-lg font-bold text-sm ${r===u?"bg-rose-500 text-white":"bg-slate-200 text-slate-600"}`,children:u==="cube"?"":u==="cylinder"?"":""},u))}),s.jsx("div",{className:"flex gap-2 mt-2",children:["x","y","z"].map(u=>s.jsxs("button",{onClick:()=>a(u),className:`flex-1 py-2 rounded-lg font-bold ${n===u?"bg-rose-500 text-white":"bg-slate-200 text-slate-600"}`,children:[u.toUpperCase(),""]},u))}),s.jsxs("div",{className:"mt-4 bg-rose-50 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-slate-500 text-sm",children:""}),s.jsx("p",{className:"text-2xl font-black text-rose-600",children:l()})]})]})]})})},rI=({onClose:i})=>{const[e,t]=E.useState(Array(6).fill(null).map(()=>Array(6).fill(!1))),[n,a]=E.useState("vertical"),r=(l,u)=>{const d=e.map((f,m)=>f.map((x,g)=>m===l&&g===u?!x:x));t(d)},o=()=>n==="vertical"?e.map(l=>[...l].reverse()):[...e].reverse();return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-amber-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex gap-4 justify-center mb-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-bold text-slate-600 mb-2",children:" ()"}),s.jsx("div",{className:"inline-grid grid-cols-6 gap-0.5 bg-slate-200 p-1 rounded",children:e.map((l,u)=>l.map((d,f)=>s.jsx("button",{onClick:()=>r(u,f),className:`w-7 h-7 rounded-sm transition-all ${d?"bg-amber-500":"bg-white"}`},`${u}-${f}`)))})]}),s.jsx("div",{className:"flex items-center text-2xl",children:""}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-bold text-slate-600 mb-2",children:""}),s.jsx("div",{className:"inline-grid grid-cols-6 gap-0.5 bg-slate-200 p-1 rounded",children:o().map((l,u)=>l.map((d,f)=>s.jsx("div",{className:`w-7 h-7 rounded-sm ${d?"bg-amber-500":"bg-white"}`},`${u}-${f}`)))})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>a("vertical"),className:`flex-1 py-2 rounded-lg font-bold ${n==="vertical"?"bg-amber-500 text-white":"bg-slate-200 text-slate-600"}`,children:""}),s.jsx("button",{onClick:()=>a("horizontal"),className:`flex-1 py-2 rounded-lg font-bold ${n==="horizontal"?"bg-amber-500 text-white":"bg-slate-200 text-slate-600"}`,children:""})]}),s.jsx("button",{onClick:()=>t(Array(6).fill(null).map(()=>Array(6).fill(!1))),className:"w-full mt-3 bg-slate-200 text-slate-600 py-2 rounded-lg font-bold",children:""})]})]})})},oI=({onClose:i})=>{const[e,t]=E.useState("tetrahedron"),[n,a]=E.useState(0);E.useEffect(()=>{const o=setInterval(()=>a(l=>(l+1)%360),30);return()=>clearInterval(o)},[]);const r={tetrahedron:{name:"",faces:4,vertices:4,edges:6},octahedron:{name:"",faces:8,vertices:6,edges:12},icosahedron:{name:"",faces:20,vertices:12,edges:30}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-fuchsia-500 text-white p-4 flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-lg",children:""}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-full",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-slate-900 rounded-xl h-48 flex items-center justify-center",style:{perspective:"400px"},children:s.jsxs("div",{style:{transform:`rotateX(-20deg) rotateY(${n}deg)`,transformStyle:"preserve-3d"},children:[e==="tetrahedron"&&s.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 100 100",children:[s.jsx("polygon",{points:"50,10 10,80 90,80",fill:"#c084fc",stroke:"#a855f7",strokeWidth:"2"}),s.jsx("polygon",{points:"50,10 50,60 10,80",fill:"#a855f7",stroke:"#9333ea",strokeWidth:"2"}),s.jsx("polygon",{points:"50,10 50,60 90,80",fill:"#9333ea",stroke:"#7c3aed",strokeWidth:"2"})]}),e==="octahedron"&&s.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 100 100",children:[s.jsx("polygon",{points:"50,5 90,50 50,95 10,50",fill:"#c084fc",stroke:"#a855f7",strokeWidth:"2"}),s.jsx("polygon",{points:"50,5 50,50 90,50",fill:"#a855f7",stroke:"#9333ea",strokeWidth:"2"}),s.jsx("polygon",{points:"50,95 50,50 90,50",fill:"#9333ea",stroke:"#7c3aed",strokeWidth:"2"})]}),e==="icosahedron"&&s.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 100 100",children:[s.jsx("polygon",{points:"50,5 80,25 80,75 50,95 20,75 20,25",fill:"#c084fc",stroke:"#a855f7",strokeWidth:"2"}),s.jsx("polygon",{points:"50,5 80,25 50,40",fill:"#a855f7",stroke:"#9333ea",strokeWidth:"2"}),s.jsx("polygon",{points:"50,5 20,25 50,40",fill:"#9333ea",stroke:"#7c3aed",strokeWidth:"2"}),s.jsx("polygon",{points:"50,95 80,75 50,60",fill:"#a855f7",stroke:"#9333ea",strokeWidth:"2"}),s.jsx("polygon",{points:"50,95 20,75 50,60",fill:"#9333ea",stroke:"#7c3aed",strokeWidth:"2"})]})]})}),s.jsx("div",{className:"flex gap-2 mt-4",children:["tetrahedron","octahedron","icosahedron"].map(o=>s.jsx("button",{onClick:()=>t(o),className:`flex-1 py-2 rounded-lg font-bold text-xs ${e===o?"bg-fuchsia-500 text-white":"bg-slate-200 text-slate-600"}`,children:r[o].name},o))}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{className:"bg-fuchsia-50 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs text-slate-500",children:""}),s.jsx("p",{className:"text-2xl font-black text-fuchsia-600",children:r[e].faces})]}),s.jsxs("div",{className:"bg-fuchsia-50 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs text-slate-500",children:""}),s.jsx("p",{className:"text-2xl font-black text-fuchsia-600",children:r[e].vertices})]}),s.jsxs("div",{className:"bg-fuchsia-50 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs text-slate-500",children:""}),s.jsx("p",{className:"text-2xl font-black text-fuchsia-600",children:r[e].edges})]})]})]})]})})},d5=[{id:"legao",name:"",description:"3D",icon:s.jsx(TD,{size:28}),color:"bg-gradient-to-br from-amber-400 to-orange-500",component:()=>null},{id:"cube-viewer",name:"3D",description:"",icon:s.jsx(dS,{size:28}),color:"bg-gradient-to-br from-indigo-400 to-indigo-600",component:nI},{id:"block-stacker",name:"",description:"3D",icon:s.jsx(Bv,{size:28}),color:"bg-gradient-to-br from-emerald-400 to-emerald-600",component:iI},{id:"three-view",name:"",description:"",icon:s.jsx(qy,{size:28}),color:"bg-gradient-to-br from-violet-400 to-violet-600",component:sI},{id:"slicer",name:"",description:"",icon:s.jsx(t8,{size:28}),color:"bg-gradient-to-br from-rose-400 to-rose-600",component:aI},{id:"polyhedron",name:"",description:"",icon:s.jsx(_A,{size:28}),color:"bg-gradient-to-br from-fuchsia-400 to-fuchsia-600",component:oI},{id:"mirror",name:"",description:"",icon:s.jsx(oL,{size:28}),color:"bg-gradient-to-br from-amber-400 to-amber-600",component:rI},{id:"cube-net",name:"",description:"",icon:s.jsx(dS,{size:28}),color:"bg-gradient-to-br from-green-400 to-green-600",component:JG},{id:"rotation",name:"3D",description:"",icon:s.jsx(mx,{size:28}),color:"bg-gradient-to-br from-purple-400 to-purple-600",component:QG},{id:"grid-draw",name:"",description:"",icon:s.jsx(vA,{size:28}),color:"bg-gradient-to-br from-orange-400 to-orange-600",component:$G},{id:"volume",name:"",description:"",icon:s.jsx(PD,{size:28}),color:"bg-gradient-to-br from-cyan-400 to-cyan-600",component:eI},{id:"symmetry",name:"",description:"",icon:s.jsx(bA,{size:28}),color:"bg-gradient-to-br from-pink-400 to-pink-600",component:tI}],lI=()=>{var a;const[i,e]=E.useState(null),t=i?(a=d5.find(r=>r.id===i))==null?void 0:a.component:null,n=r=>{r==="legao"?window.location.href="/legao/index.html":e(r)};return s.jsxs("div",{className:"flex-1 pb-8",children:[t&&i!=="legao"&&s.jsx(t,{onClose:()=>e(null)}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:d5.map(r=>s.jsxs("button",{onClick:()=>n(r.id),className:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] active:scale-95 text-left",children:[s.jsx("div",{className:`${r.color} p-6 flex items-center justify-center text-white`,children:r.icon}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-slate-800 mb-1",children:r.name}),s.jsx("p",{className:"text-slate-500 text-sm",children:r.description})]})]},r.id))})]})},f5=[{id:1,question:"",answer:"",category:"",difficulty:"easy"},{id:2,question:"",answer:"",category:"",difficulty:"easy"},{id:3,question:"",answer:"",category:"",difficulty:"easy"},{id:4,question:"",answer:"",category:"",difficulty:"easy"},{id:5,question:"",answer:"",category:"",difficulty:"medium"},{id:6,question:"",answer:"",category:"",difficulty:"easy"},{id:7,question:"",answer:"3-12",category:"",difficulty:"medium"},{id:8,question:"",answer:"",category:"",difficulty:"easy"},{id:9,question:"",answer:"",category:"",difficulty:"medium"},{id:10,question:"",answer:"",category:"",difficulty:"easy"},{id:11,question:"",answer:"",category:"",difficulty:"hard"},{id:12,question:"",answer:"",category:"",difficulty:"hard"},{id:13,question:"",answer:"Howard Gardner",category:"",difficulty:"medium"},{id:14,question:"",answer:"",category:"",difficulty:"easy"},{id:15,question:"",answer:"",category:"",difficulty:"medium"},{id:16,question:"",answer:"6128",category:"",difficulty:"easy"},{id:17,question:"",answer:"",category:"",difficulty:"easy"},{id:18,question:"",answer:"",category:"",difficulty:"easy"},{id:19,question:"",answer:"321",category:"",difficulty:"easy"},{id:20,question:"",answer:"211",category:"",difficulty:"easy"},{id:21,question:"",answer:"1",category:"",difficulty:"easy"},{id:22,question:"",answer:"",category:"",difficulty:"medium"},{id:23,question:"",answer:"",category:"",difficulty:"medium"},{id:24,question:"",answer:"4",category:"",difficulty:"medium"},{id:25,question:"",answer:"8",category:"",difficulty:"medium"},{id:26,question:"",answer:"",category:"",difficulty:"hard"},{id:27,question:"",answer:"20",category:"",difficulty:"hard"},{id:28,question:"",answer:"5",category:"",difficulty:"hard"},{id:29,question:"",answer:"",category:"",difficulty:"hard"},{id:30,question:"",answer:"V - E + F = 2VEF",category:"",difficulty:"hard"},{id:31,question:"",answer:"6",category:"",difficulty:"medium"},{id:32,question:"",answer:"8",category:"",difficulty:"medium"},{id:33,question:"",answer:"",category:"",difficulty:"medium"},{id:34,question:"",answer:"",category:"",difficulty:"medium"},{id:35,question:"",answer:"",category:"",difficulty:"easy"},{id:36,question:"",answer:"",category:"",difficulty:"easy"},{id:37,question:"",answer:"",category:"",difficulty:"easy"},{id:38,question:"",answer:"",category:"",difficulty:"easy"},{id:39,question:"",answer:"",category:"",difficulty:"easy"},{id:40,question:"",answer:"",category:"",difficulty:"medium"},{id:41,question:'""',answer:"",category:"",difficulty:"medium"},{id:42,question:'""',answer:"",category:"",difficulty:"medium"},{id:43,question:'""',answer:"",category:"",difficulty:"medium"},{id:44,question:"",answer:"",category:"",difficulty:"easy"},{id:45,question:"",answer:"",category:"",difficulty:"easy"},{id:46,question:"",answer:"",category:"",difficulty:"easy"},{id:47,question:"",answer:"",category:"",difficulty:"easy"},{id:48,question:"",answer:"",category:"",difficulty:"easy"},{id:49,question:"",answer:"",category:"",difficulty:"medium"},{id:50,question:"",answer:"",category:"",difficulty:"medium"},{id:51,question:"",answer:"",category:"",difficulty:"easy"},{id:52,question:"",answer:"11",category:"",difficulty:"medium"},{id:53,question:"",answer:"6",category:"",difficulty:"easy"},{id:54,question:"",answer:"",category:"",difficulty:"medium"},{id:55,question:"",answer:"",category:"",difficulty:"easy"},{id:56,question:"",answer:"",category:"",difficulty:"easy"},{id:57,question:"",answer:"",category:"",difficulty:"easy"},{id:58,question:"",answer:"4",category:"",difficulty:"medium"},{id:59,question:"",answer:"23",category:"",difficulty:"medium"},{id:60,question:'"1-4-1"',answer:"41",category:"",difficulty:"medium"},{id:61,question:'"2-3-1"',answer:"231",category:"",difficulty:"medium"},{id:62,question:"",answer:"",category:"",difficulty:"hard"},{id:63,question:"",answer:"",category:"",difficulty:"hard"},{id:64,question:"",answer:"",category:"",difficulty:"medium"},{id:65,question:"",answer:"",category:"",difficulty:"medium"},{id:66,question:"",answer:"",category:"",difficulty:"easy"},{id:67,question:"",answer:"",category:"",difficulty:"easy"},{id:68,question:"",answer:"4",category:"",difficulty:"easy"},{id:69,question:"",answer:"3",category:"",difficulty:"easy"},{id:70,question:"",answer:"",category:"",difficulty:"easy"},{id:71,question:"",answer:"180",category:"",difficulty:"medium"},{id:72,question:"",answer:"",category:"",difficulty:"medium"},{id:73,question:"",answer:"",category:"",difficulty:"medium"},{id:74,question:"",answer:"",category:"",difficulty:"medium"},{id:75,question:"",answer:"",category:"",difficulty:"medium"},{id:76,question:"90",answer:"270",category:"",difficulty:"easy"},{id:77,question:"",answer:"360",category:"",difficulty:"hard"},{id:78,question:"",answer:"60",category:"",difficulty:"hard"},{id:79,question:"",answer:"",category:"",difficulty:"medium"},{id:80,question:'"A"',answer:"",category:"",difficulty:"easy"},{id:81,question:"",answer:"",category:"",difficulty:"easy"},{id:82,question:"",answer:"",category:"",difficulty:"medium"},{id:83,question:"",answer:"",category:"",difficulty:"easy"},{id:84,question:"",answer:"",category:"",difficulty:"hard"},{id:85,question:"",answer:"",category:"",difficulty:"hard"},{id:86,question:"",answer:"",category:"",difficulty:"easy"},{id:87,question:"",answer:"",category:"",difficulty:"easy"},{id:88,question:"",answer:"",category:"",difficulty:"easy"},{id:89,question:"",answer:"",category:"",difficulty:"easy"},{id:90,question:"",answer:"",category:"",difficulty:"medium"},{id:91,question:"GPS",answer:"4",category:"",difficulty:"medium"},{id:92,question:"",answer:"",category:"",difficulty:"easy"},{id:93,question:"",answer:"",category:"",difficulty:"medium"},{id:94,question:"",answer:"",category:"",difficulty:"medium"},{id:95,question:"CAD",answer:"",category:"",difficulty:"medium"},{id:96,question:"3D",answer:"",category:"",difficulty:"medium"},{id:97,question:"VR",answer:"",category:"",difficulty:"hard"},{id:98,question:"",answer:"",category:"",difficulty:"easy"},{id:99,question:"",answer:"",category:"",difficulty:"medium"},{id:100,question:"",answer:"",category:"",difficulty:"easy"}],cI=["","","","","","","",""],uI=({onBack:i})=>{const[e,t]=E.useState(0),[n,a]=E.useState(!1),[r,o]=E.useState(""),[l,u]=E.useState(new Set),[d,f]=E.useState(new Set),m=r===""?f5:f5.filter(N=>N.category===r),x=m[e],g=()=>{a(!1),setTimeout(()=>{t(N=>(N+1)%m.length)},150)},v=()=>{a(!1),setTimeout(()=>{t(N=>(N-1+m.length)%m.length)},150)},M=()=>{a(!1),t(Math.floor(Math.random()*m.length))},_=()=>{x&&(u(N=>new Set([...N,x.id])),f(N=>{const R=new Set(N);return R.delete(x.id),R})),g()},S=()=>{x&&(f(N=>new Set([...N,x.id])),u(N=>{const R=new Set(N);return R.delete(x.id),R})),g()},j=()=>{u(new Set),f(new Set),t(0),a(!1)},A=N=>{switch(N){case"easy":return"bg-green-100 text-green-600";case"medium":return"bg-yellow-100 text-yellow-600";case"hard":return"bg-red-100 text-red-600";default:return"bg-slate-100 text-slate-600"}},C=N=>{switch(N){case"easy":return"";case"medium":return"";case"hard":return"";default:return""}};return x?s.jsxs("div",{className:"flex-1 pb-8",children:[s.jsx("div",{className:"mb-4 -mx-2",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 px-2 scrollbar-hide",children:cI.map(N=>s.jsx("button",{onClick:()=>{o(N),t(0),a(!1)},className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-bold transition-all ${r===N?"bg-purple-500 text-white shadow-lg":"bg-white text-slate-600 shadow"}`,children:N},N))})}),s.jsxs("div",{className:"flex justify-between items-center mb-4 bg-white rounded-xl p-3 shadow",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-slate-500",children:""}),s.jsx("p",{className:"text-lg font-black text-green-500",children:l.size})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-slate-500",children:""}),s.jsxs("p",{className:"text-lg font-black text-purple-500",children:[e+1,"/",m.length]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-slate-500",children:""}),s.jsx("p",{className:"text-lg font-black text-red-500",children:d.size})]})]}),s.jsx("div",{className:"relative h-64 mb-4 cursor-pointer perspective-1000",onClick:()=>a(!n),children:s.jsxs("div",{className:`absolute inset-0 transition-transform duration-500 transform-style-3d ${n?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:[s.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-6 flex flex-col shadow-xl backface-hidden",style:{backfaceVisibility:"hidden"},children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full",children:x.category}),s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${A(x.difficulty)}`,children:C(x.difficulty)})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("p",{className:"text-white text-xl font-bold text-center leading-relaxed",children:x.question})}),s.jsx("p",{className:"text-white/60 text-center text-sm",children:""})]}),s.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 flex flex-col shadow-xl",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[s.jsx(Xy,{size:12}),""]}),s.jsxs("span",{className:"text-white/60 text-xs",children:["#",x.id]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("p",{className:"text-white text-lg font-medium text-center leading-relaxed",children:x.answer})}),s.jsx("p",{className:"text-white/60 text-center text-sm",children:""})]})]})}),s.jsxs("div",{className:"flex justify-center gap-3 mb-4",children:[s.jsx("button",{onClick:v,className:"bg-white p-3 rounded-xl shadow hover:shadow-lg transition-all active:scale-95",children:s.jsx(GD,{size:24,className:"text-slate-600"})}),s.jsx("button",{onClick:S,className:"bg-red-500 p-3 rounded-xl shadow hover:shadow-lg transition-all active:scale-95",children:s.jsx(_a,{size:24,className:"text-white"})}),s.jsx("button",{onClick:_,className:"bg-green-500 p-3 rounded-xl shadow hover:shadow-lg transition-all active:scale-95",children:s.jsx(pA,{size:24,className:"text-white"})}),s.jsx("button",{onClick:g,className:"bg-white p-3 rounded-xl shadow hover:shadow-lg transition-all active:scale-95",children:s.jsx(Hy,{size:24,className:"text-slate-600"})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:M,className:"flex-1 bg-purple-100 text-purple-600 py-3 rounded-xl font-bold flex items-center justify-center gap-2 active:scale-95 transition-all",children:[s.jsx(wA,{size:18}),""]}),s.jsxs("button",{onClick:j,className:"flex-1 bg-slate-100 text-slate-600 py-3 rounded-xl font-bold flex items-center justify-center gap-2 active:scale-95 transition-all",children:[s.jsx(mx,{size:18}),""]})]}),s.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        .transform-style-3d {
          transform-style: preserve-3d;
        }
        .backface-hidden {
          backface-visibility: hidden;
        }
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
      `})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("p",{className:"text-slate-500",children:""})})},dI=({config:i,onClick:e})=>s.jsxs("button",{onClick:e,className:`w-full text-left relative overflow-hidden group rounded-2xl p-4 transition-all duration-300 transform hover:scale-[1.02] active:scale-95 shadow-lg ${i.color}`,children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:rotate-12 group-hover:scale-125",children:s.jsx("span",{className:"text-6xl",children:i.icon})}),s.jsxs("div",{className:"relative z-10 flex items-center gap-3 text-white",children:[s.jsx("span",{className:"text-3xl drop-shadow-md",children:i.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-black drop-shadow-sm",children:i.title}),s.jsx("p",{className:"text-white/80 text-sm",children:i.description})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full",children:[s.jsx("span",{className:"font-bold text-sm",children:i.gameIds.length}),s.jsx(Hy,{size:16})]})]})]}),F2=({icon:i,title:e,color:t})=>s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:`${t} p-2 rounded-xl text-white`,children:i}),s.jsx("h2",{className:"text-xl font-black text-slate-800",children:e})]}),V2=({onSelectCategory:i,onSelectArticle:e})=>{const[t,n]=E.useState(!1),[a,r]=E.useState(""),[o,l]=E.useState(!1),[u,d]=E.useState(!1),[f,m]=E.useState(!1),[x,g]=E.useState(!1),v=()=>{a.trim()&&(n(!1),l(!0),r(""),setTimeout(()=>l(!1),2e3))};return s.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col max-w-md mx-auto relative",children:[t&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-red-500 text-white p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yw,{size:24}),s.jsx("span",{className:"font-bold text-lg",children:""})]}),s.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(_a,{size:24})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("textarea",{value:a,onChange:M=>r(M.target.value),placeholder:"...",className:"w-full h-32 p-3 border-2 border-slate-200 rounded-xl resize-none focus:outline-none focus:border-red-400 text-slate-700"}),s.jsxs("button",{onClick:v,disabled:!a.trim(),className:`w-full mt-3 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${a.trim()?"bg-red-500 text-white active:scale-95":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[s.jsx(SA,{size:18}),""]})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-2xl flex flex-col items-center animate-bounce",children:[s.jsx("div",{className:"bg-green-100 p-4 rounded-full mb-4",children:s.jsx(BD,{size:48,className:"text-green-500"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-1",children:""}),s.jsx("p",{className:"text-slate-500",children:""})]})}),u&&s.jsxs("div",{className:"fixed inset-0 bg-slate-50 z-50 flex flex-col max-w-md mx-auto",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 text-white p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bv,{size:24}),s.jsx("span",{className:"font-bold text-lg",children:""})]}),s.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(_a,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsx(uI,{})})]}),f&&s.jsxs("div",{className:"fixed inset-0 bg-slate-50 z-50 flex flex-col max-w-md mx-auto",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zp,{size:24}),s.jsx("span",{className:"font-bold text-lg",children:""})]}),s.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(_a,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsx(KG,{onSelectArticle:e})})]}),x&&s.jsxs("div",{className:"fixed inset-0 bg-slate-50 z-50 flex flex-col max-w-md mx-auto",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 text-white p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(E2,{size:24}),s.jsx("span",{className:"font-bold text-lg",children:""})]}),s.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(_a,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsx(lI,{})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-8",children:[s.jsxs("header",{className:"mb-6 mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 p-2 rounded-xl text-white",children:s.jsx(h8,{size:28})}),s.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tight",children:""})]}),s.jsx("button",{onClick:()=>n(!0),className:"bg-red-500 text-white p-2 rounded-xl shadow-lg hover:bg-red-600 active:scale-95 transition-all",children:s.jsx(Yw,{size:20})})]}),s.jsx("p",{className:"text-slate-500 font-medium ml-1",children:"3D"})]}),s.jsxs("section",{className:"mb-6",children:[s.jsx(F2,{icon:s.jsx(cL,{size:20}),title:"",color:"bg-blue-500"}),s.jsx("div",{className:"flex flex-col gap-3",children:oC.map(M=>s.jsx(dI,{config:M,onClick:()=>i(M.id)},M.id))})]}),s.jsxs("section",{className:"mb-6",children:[s.jsx(F2,{icon:s.jsx(Zp,{size:20}),title:"",color:"bg-green-500"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>d(!0),className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-4 text-white shadow-lg hover:shadow-xl transition-all active:scale-95",children:[s.jsx(Bv,{size:32,className:"mb-2"}),s.jsx("h3",{className:"font-bold text-left",children:""}),s.jsx("p",{className:"text-white/70 text-xs text-left",children:"100"})]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg hover:shadow-xl transition-all active:scale-95",children:[s.jsx(Zp,{size:32,className:"mb-2"}),s.jsx("h3",{className:"font-bold text-left",children:""}),s.jsx("p",{className:"text-white/70 text-xs text-left",children:""})]})]})]}),s.jsxs("section",{children:[s.jsx(F2,{icon:s.jsx(E2,{size:20}),title:"",color:"bg-orange-500"}),s.jsx("button",{onClick:()=>g(!0),className:"w-full bg-gradient-to-r from-orange-500 to-amber-500 rounded-2xl p-4 text-white shadow-lg hover:shadow-xl transition-all active:scale-95",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:s.jsx(E2,{size:28})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("h3",{className:"font-bold text-lg",children:"3D"}),s.jsx("p",{className:"text-white/80 text-sm",children:""})]}),s.jsx(Hy,{size:24})]})})]})]})]})},fI=({config:i,onClick:e})=>s.jsxs("button",{onClick:e,className:`w-full text-left relative overflow-hidden group rounded-3xl p-6 transition-all duration-300 transform hover:scale-[1.02] active:scale-95 shadow-[0_8px_0_rgba(0,0,0,0.15)] active:shadow-none active:translate-y-2 ${i.color}`,children:[s.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:rotate-12 group-hover:scale-125",children:s.jsx("span",{className:"text-9xl",children:i.icon})}),s.jsxs("div",{className:"relative z-10 flex flex-col h-full text-white",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"text-5xl drop-shadow-md",children:i.icon}),s.jsx("div",{className:"flex gap-1",children:[...Array(i.difficulty)].map((t,n)=>s.jsx(jA,{fill:"currentColor",size:20,className:"text-yellow-300"},n))})]}),s.jsx("h2",{className:"text-3xl font-black mb-1 drop-shadow-sm tracking-wide",children:i.title}),s.jsx("p",{className:"text-white/90 font-medium text-lg leading-snug",children:i.description}),s.jsxs("div",{className:"mt-4 inline-flex items-center bg-white/20 backdrop-blur-sm self-start px-4 py-2 rounded-full font-bold text-sm",children:[" ","->"]})]})]}),hI=({categoryId:i,onSelectGame:e,onBack:t})=>{const n=oC.find(r=>r.id===i),a=n.gameIds.map(r=>qG.find(o=>o.id===r)).filter(r=>r!==void 0);return s.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col max-w-md mx-auto",children:[s.jsxs("header",{className:"mb-8 mt-4",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-slate-500 hover:text-slate-700 transition-colors mb-4",children:[s.jsx(ud,{size:20}),s.jsx("span",{className:"font-medium",children:""})]}),s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:`p-2 rounded-xl text-white ${n.color}`,children:s.jsx("span",{className:"text-2xl",children:n.icon})}),s.jsx("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:n.title})]}),s.jsxs("p",{className:"text-slate-500 font-medium text-lg ml-1",children:[n.description,"  ",a.length,""]})]}),s.jsx("div",{className:"flex-1 flex flex-col gap-6 pb-8",children:a.map(r=>s.jsx(fI,{config:r,onClick:()=>e(r.id)},r.id))}),s.jsx("footer",{className:"text-center text-slate-400 text-sm font-medium py-4",children:"Happy Learning! "})]})},mI={"article-1":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-2":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:'""',image:""}]},"article-3":{sections:[{title:"",content:"",image:""},{title:"",content:"6611",image:""},{title:"",content:"1623",image:""},{title:"",content:"",image:""}]},"article-4":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"180",image:""}]},"article-5":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-6":{sections:[{title:"",content:"",image:""},{title:"",content:"xy(x, y)",image:""},{title:"",content:"xyz(x, y, z)",image:""},{title:"",content:"GPS",image:""}]},"article-7":{sections:[{title:"",content:"",image:""},{title:"",content:"...",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-8":{sections:[{title:"",content:'""',image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:'"AMBULANCE"',image:""}]},"article-9":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"CT",image:""}]},"article-10":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-11":{sections:[{title:"",content:"6128",image:""},{title:"",content:"",image:""},{title:"",content:"913",image:""},{title:"",content:"",image:""}]},"article-12":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"3D",image:""}]},"article-13":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-14":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"=",image:""},{title:"",content:"",image:""}]},"article-15":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-16":{sections:[{title:"",content:"5",image:""},{title:"",content:"446",image:""},{title:"",content:"8612",image:""},{title:"",content:"",image:""}]},"article-17":{sections:[{title:"",content:"",image:""},{title:"",content:"+=+=+=++=",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-18":{sections:[{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]},"article-19":{sections:[{title:"",content:"",image:""},{title:"",content:"7",image:""},{title:"",content:"",image:""},{title:"",content:"3D",image:""}]},"article-20":{sections:[{title:"",content:"381.54",image:""},{title:"",content:"8",image:""},{title:"",content:"",image:""},{title:"",content:"",image:""}]}},pI=({emoji:i,color:e})=>{const[t,n]=E.useState(0),[a,r]=E.useState(0);return E.useEffect(()=>{const o=setInterval(()=>{n(l=>(l+1)%360),r(l=>Math.sin(Date.now()/1e3)*10)},30);return()=>clearInterval(o)},[]),s.jsxs("div",{className:`${e} p-8 flex flex-col items-center justify-center relative overflow-hidden`,children:[s.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((o,l)=>s.jsx("div",{className:"absolute w-4 h-4 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`floatParticle ${3+Math.random()*4}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},l))}),s.jsx("div",{className:"text-8xl mb-4 relative z-10",style:{transform:`perspective(300px) rotateY(${t}deg) rotateX(${a}deg)`,transformStyle:"preserve-3d",textShadow:"0 10px 30px rgba(0,0,0,0.3)"},children:i}),s.jsx("div",{className:"flex items-center gap-2 relative z-10",children:s.jsxs("span",{className:"bg-white/20 text-white text-sm font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[s.jsx(l_,{size:12,fill:"currentColor"}),"3D"]})}),s.jsx("style",{children:`
        @keyframes floatParticle {
          0%, 100% { transform: translateY(0) scale(1); opacity: 0.3; }
          50% { transform: translateY(-20px) scale(1.2); opacity: 0.6; }
        }
      `})]})},xI=({emoji:i,index:e})=>{const[t,n]=E.useState(!1);return E.useEffect(()=>{const a=setTimeout(()=>n(!0),e*200);return()=>clearTimeout(a)},[e]),s.jsxs("div",{className:`bg-gradient-to-br from-blue-100 to-purple-100 p-3 rounded-xl flex-shrink-0 transition-all duration-500 ${t?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,style:{animation:t?"pulse3D 2s ease-in-out infinite":"none",animationDelay:`${e*.1}s`},children:[s.jsx("span",{className:"text-3xl",children:i}),s.jsx("style",{children:`
        @keyframes pulse3D {
          0%, 100% { transform: scale(1) rotateY(0deg); }
          50% { transform: scale(1.1) rotateY(10deg); }
        }
      `})]})},gI=i=>({sections:[{title:"",content:i.description,image:i.coverImage},{title:"",content:`${i.title}`,image:""},{title:"",content:"",image:""},{title:"",content:'""',image:""}]}),vI=({articleId:i,onBack:e})=>{const t=Lv.find(a=>a.id===i),n=mI[i]||(t?gI(t):null);return t?s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx("div",{className:"sticky top-0 bg-white/80 backdrop-blur-md z-10 px-4 py-3 flex items-center justify-between border-b border-slate-100",children:s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-600 hover:text-slate-800 transition-colors",children:[s.jsx(ud,{size:24}),s.jsx("span",{className:"font-medium",children:""})]})}),s.jsx(pI,{emoji:t.coverImage,color:t.color}),s.jsxs("div",{className:"max-w-md mx-auto px-6 py-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("span",{className:"bg-purple-100 text-purple-600 text-xs font-bold px-2 py-1 rounded-full",children:t.category}),t.has3D&&s.jsxs("span",{className:"bg-blue-100 text-blue-600 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[s.jsx(l_,{size:10,fill:"currentColor"}),"3D"]})]}),s.jsx("h1",{className:"text-2xl font-black text-slate-800 mb-3",children:t.title}),s.jsxs("div",{className:"flex items-center gap-4 text-slate-400 text-sm mb-6",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(o_,{size:16}),s.jsx("span",{children:t.readTime})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qy,{size:16}),s.jsxs("span",{children:[t.views," "]})]})]}),s.jsx("p",{className:"text-slate-600 text-lg leading-relaxed mb-8 bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border-l-4 border-blue-500",children:t.description}),s.jsx("div",{className:"space-y-6",children:n.sections.map((a,r)=>s.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:scale-[1.02]",style:{animation:"slideInUp 0.5s ease-out forwards",animationDelay:`${r*.1}s`,opacity:0},children:s.jsxs("div",{className:"flex items-start gap-4",children:[a.image&&s.jsx(xI,{emoji:a.image,index:r}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:a.title}),s.jsx("p",{className:"text-slate-600 leading-relaxed",children:a.content})]})]})},r))}),s.jsxs("div",{className:"mt-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-6 text-white text-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(10)].map((a,r)=>s.jsx("div",{className:"absolute w-8 h-8 border-2 border-white rounded-lg",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`spin3D ${4+Math.random()*4}s linear infinite`,animationDelay:`${Math.random()*2}s`}},r))}),s.jsx("p",{className:"font-bold text-lg mb-2 relative z-10",children:" "}),s.jsx("p",{className:"text-white/90 relative z-10",children:'""'})]}),s.jsx("div",{className:"h-8"})]}),s.jsx("style",{children:`
        @keyframes slideInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes spin3D {
          from { transform: rotate(0deg) rotateX(0deg); }
          to { transform: rotate(360deg) rotateX(360deg); }
        }
      `})]}):s.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center justify-center",children:[s.jsx("p",{className:"text-slate-500",children:""}),s.jsx("button",{onClick:e,className:"mt-4 text-blue-500 font-bold",children:""})]})};var H2={exports:{}},qc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h5;function yI(){return h5||(h5=1,qc.ConcurrentRoot=1,qc.ContinuousEventPriority=8,qc.DefaultEventPriority=32,qc.DiscreteEventPriority=2,qc.IdleEventPriority=268435456,qc.LegacyRoot=0,qc.NoEventPriority=0),qc}var m5;function bI(){return m5||(m5=1,H2.exports=yI()),H2.exports}var Uv=bI();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Z0="181",vf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lC=0,LS=1,cC=2,MI=3,uC=0,Jy=1,tx=2,fl=3,au=0,la=1,Ms=2,pl=0,Df=1,Wv=2,US=3,PS=4,dC=5,ed=100,fC=101,hC=102,mC=103,pC=104,xC=200,gC=201,vC=202,yC=203,Yv=204,Zv=205,bC=206,MC=207,SC=208,_C=209,wC=210,jC=211,EC=212,TC=213,AC=214,Kv=0,Jv=1,Qv=2,Pf=3,$v=4,ey=5,ty=6,ny=7,qx=0,CC=1,NC=2,ac=0,RC=1,DC=2,LC=3,H_=4,UC=5,PC=6,OC=7,OS="attached",zC="detached",rd=300,oc=301,od=302,N0=303,Mx=304,K0=306,Sx=1e3,bi=1001,_x=1002,Wi=1003,q_=1004,SI=1004,S0=1005,_I=1005,ss=1006,nx=1007,wI=1007,tc=1008,zS=1008,gr=1009,Qy=1010,$y=1011,R0=1012,Xx=1013,lc=1014,ti=1015,Ti=1016,eb=1017,tb=1018,D0=1020,X_=35902,W_=35899,Y_=1021,Z_=1022,Ai=1023,L0=1026,U0=1027,Wx=1028,Yx=1029,nb=1030,sb=1031,jI=1032,ib=1033,sx=33776,ix=33777,ax=33778,rx=33779,sy=35840,iy=35841,ay=35842,ry=35843,oy=36196,ly=37492,cy=37496,uy=37808,dy=37809,fy=37810,hy=37811,my=37812,py=37813,xy=37814,gy=37815,vy=37816,yy=37817,by=37818,My=37819,Sy=37820,_y=37821,wy=36492,jy=36494,Ey=36495,Ty=36283,Ay=36284,Cy=36285,Ny=36286,GC=2200,IC=2201,kC=2202,wx=2300,Ry=2301,Pv=2302,jf=2400,Ef=2401,jx=2402,ab=2500,K_=2501,EI=0,TI=1,AI=2,BC=3200,J_=3201,CI=3202,NI=3203,fd=0,FC=1,$c="",Sa="srgb",gl="srgb-linear",Ex="linear",js="srgb",RI=0,bf=7680,DI=7681,LI=7682,UI=7683,PI=34055,OI=34056,zI=5386,GI=512,II=513,kI=514,BI=515,FI=516,VI=517,HI=518,GS=519,VC=512,HC=513,qC=514,Q_=515,XC=516,WC=517,YC=518,ZC=519,Tx=35044,qI=35048,XI=35040,WI=35045,YI=35049,ZI=35041,KI=35046,JI=35050,QI=35042,$I="100",IS="300 es",to=2e3,P0=2001,ek={COMPUTE:"compute",RENDER:"render"},tk={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},nk={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function KC(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const sk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function _0(i,e){return new sk[i](e)}function Ax(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function JC(){const i=Ax("canvas");return i.style.display="block",i}const p5={};let ld=null;function ik(i){ld=i}function ak(){return ld}function Cx(...i){const e="THREE."+i.shift();ld?ld("log",e,...i):console.log(e,...i)}function qt(...i){const e="THREE."+i.shift();ld?ld("warn",e,...i):console.warn(e,...i)}function wn(...i){const e="THREE."+i.shift();ld?ld("error",e,...i):console.error(e,...i)}function O0(...i){const e=i.join(" ");e in p5||(p5[e]=!0,qt(...i))}function rk(i,e,t){return new Promise(function(n,a){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}let cc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const a=n[e];if(a!==void 0){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let r=0,o=a.length;r<o;r++)a[r].call(this,e);e.target=null}}};const Ba=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let x5=1234567;const Lf=Math.PI/180,z0=180/Math.PI;function no(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ba[i&255]+Ba[i>>8&255]+Ba[i>>16&255]+Ba[i>>24&255]+"-"+Ba[e&255]+Ba[e>>8&255]+"-"+Ba[e>>16&15|64]+Ba[e>>24&255]+"-"+Ba[t&63|128]+Ba[t>>8&255]+"-"+Ba[t>>16&255]+Ba[t>>24&255]+Ba[n&255]+Ba[n>>8&255]+Ba[n>>16&255]+Ba[n>>24&255]).toLowerCase()}function bn(i,e,t){return Math.max(e,Math.min(t,i))}function $_(i,e){return(i%e+e)%e}function ok(i,e,t,n,a){return n+(i-e)*(a-n)/(t-e)}function lk(i,e,t){return i!==e?(t-i)/(e-i):0}function ox(i,e,t){return(1-t)*i+t*e}function ck(i,e,t,n){return ox(i,e,1-Math.exp(-t*n))}function uk(i,e=1){return e-Math.abs($_(i,e*2)-e)}function dk(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function fk(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function hk(i,e){return i+Math.floor(Math.random()*(e-i+1))}function mk(i,e){return i+Math.random()*(e-i)}function pk(i){return i*(.5-Math.random())}function xk(i){i!==void 0&&(x5=i);let e=x5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function gk(i){return i*Lf}function vk(i){return i*z0}function yk(i){return(i&i-1)===0&&i!==0}function bk(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Mk(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Sk(i,e,t,n,a){const r=Math.cos,o=Math.sin,l=r(t/2),u=o(t/2),d=r((e+n)/2),f=o((e+n)/2),m=r((e-n)/2),x=o((e-n)/2),g=r((n-e)/2),v=o((n-e)/2);switch(a){case"XYX":i.set(l*f,u*m,u*x,l*d);break;case"YZY":i.set(u*x,l*f,u*m,l*d);break;case"ZXZ":i.set(u*m,u*x,l*f,l*d);break;case"XZX":i.set(l*f,u*v,u*g,l*d);break;case"YXY":i.set(u*g,l*f,u*v,l*d);break;case"ZYZ":i.set(u*v,u*g,l*f,l*d);break;default:qt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function pr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Pn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const ks={DEG2RAD:Lf,RAD2DEG:z0,generateUUID:no,clamp:bn,euclideanModulo:$_,mapLinear:ok,inverseLerp:lk,lerp:ox,damp:ck,pingpong:uk,smoothstep:dk,smootherstep:fk,randInt:hk,randFloat:mk,randFloatSpread:pk,seededRandom:xk,degToRad:gk,radToDeg:vk,isPowerOfTwo:yk,ceilPowerOfTwo:bk,floorPowerOfTwo:Mk,setQuaternionFromProperEuler:Sk,normalize:Pn,denormalize:pr};class pt{constructor(e=0,t=0){pt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6],this.y=a[1]*t+a[4]*n+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=bn(this.x,e.x,t.x),this.y=bn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=bn(this.x,e,t),this.y=bn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(bn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),a=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*a+e.x,this.y=r*a+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wn{constructor(e=0,t=0,n=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=a}static slerpFlat(e,t,n,a,r,o,l){let u=n[a+0],d=n[a+1],f=n[a+2],m=n[a+3],x=r[o+0],g=r[o+1],v=r[o+2],M=r[o+3];if(l<=0){e[t+0]=u,e[t+1]=d,e[t+2]=f,e[t+3]=m;return}if(l>=1){e[t+0]=x,e[t+1]=g,e[t+2]=v,e[t+3]=M;return}if(m!==M||u!==x||d!==g||f!==v){let _=u*x+d*g+f*v+m*M;_<0&&(x=-x,g=-g,v=-v,M=-M,_=-_);let S=1-l;if(_<.9995){const j=Math.acos(_),A=Math.sin(j);S=Math.sin(S*j)/A,l=Math.sin(l*j)/A,u=u*S+x*l,d=d*S+g*l,f=f*S+v*l,m=m*S+M*l}else{u=u*S+x*l,d=d*S+g*l,f=f*S+v*l,m=m*S+M*l;const j=1/Math.sqrt(u*u+d*d+f*f+m*m);u*=j,d*=j,f*=j,m*=j}}e[t]=u,e[t+1]=d,e[t+2]=f,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,a,r,o){const l=n[a],u=n[a+1],d=n[a+2],f=n[a+3],m=r[o],x=r[o+1],g=r[o+2],v=r[o+3];return e[t]=l*v+f*m+u*g-d*x,e[t+1]=u*v+f*x+d*m-l*g,e[t+2]=d*v+f*g+l*x-u*m,e[t+3]=f*v-l*m-u*x-d*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,a){return this._x=e,this._y=t,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,a=e._y,r=e._z,o=e._order,l=Math.cos,u=Math.sin,d=l(n/2),f=l(a/2),m=l(r/2),x=u(n/2),g=u(a/2),v=u(r/2);switch(o){case"XYZ":this._x=x*f*m+d*g*v,this._y=d*g*m-x*f*v,this._z=d*f*v+x*g*m,this._w=d*f*m-x*g*v;break;case"YXZ":this._x=x*f*m+d*g*v,this._y=d*g*m-x*f*v,this._z=d*f*v-x*g*m,this._w=d*f*m+x*g*v;break;case"ZXY":this._x=x*f*m-d*g*v,this._y=d*g*m+x*f*v,this._z=d*f*v+x*g*m,this._w=d*f*m-x*g*v;break;case"ZYX":this._x=x*f*m-d*g*v,this._y=d*g*m+x*f*v,this._z=d*f*v-x*g*m,this._w=d*f*m+x*g*v;break;case"YZX":this._x=x*f*m+d*g*v,this._y=d*g*m+x*f*v,this._z=d*f*v-x*g*m,this._w=d*f*m-x*g*v;break;case"XZY":this._x=x*f*m-d*g*v,this._y=d*g*m-x*f*v,this._z=d*f*v+x*g*m,this._w=d*f*m+x*g*v;break;default:qt("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,a=Math.sin(n);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],a=t[4],r=t[8],o=t[1],l=t[5],u=t[9],d=t[2],f=t[6],m=t[10],x=n+l+m;if(x>0){const g=.5/Math.sqrt(x+1);this._w=.25/g,this._x=(f-u)*g,this._y=(r-d)*g,this._z=(o-a)*g}else if(n>l&&n>m){const g=2*Math.sqrt(1+n-l-m);this._w=(f-u)/g,this._x=.25*g,this._y=(a+o)/g,this._z=(r+d)/g}else if(l>m){const g=2*Math.sqrt(1+l-n-m);this._w=(r-d)/g,this._x=(a+o)/g,this._y=.25*g,this._z=(u+f)/g}else{const g=2*Math.sqrt(1+m-n-l);this._w=(o-a)/g,this._x=(r+d)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const a=Math.min(1,t/n);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,a=e._y,r=e._z,o=e._w,l=t._x,u=t._y,d=t._z,f=t._w;return this._x=n*f+o*l+a*d-r*u,this._y=a*f+o*u+r*l-n*d,this._z=r*f+o*d+n*u-a*l,this._w=o*f-n*l-a*u-r*d,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,a=e._y,r=e._z,o=e._w,l=this.dot(e);l<0&&(n=-n,a=-a,r=-r,o=-o,l=-l);let u=1-t;if(l<.9995){const d=Math.acos(l),f=Math.sin(d);u=Math.sin(u*d)/f,t=Math.sin(t*d)/f,this._x=this._x*u+n*t,this._y=this._y*u+a*t,this._z=this._z*u+r*t,this._w=this._w*u+o*t,this._onChangeCallback()}else this._x=this._x*u+n*t,this._y=this._y*u+a*t,this._z=this._z*u+r*t,this._w=this._w*u+o*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(a*Math.sin(e),a*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,n=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(g5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(g5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*a,this.y=r[1]*t+r[4]*n+r[7]*a,this.z=r[2]*t+r[5]*n+r[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*a+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*a+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*a+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*a+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,a=this.z,r=e.x,o=e.y,l=e.z,u=e.w,d=2*(o*a-l*n),f=2*(l*t-r*a),m=2*(r*n-o*t);return this.x=t+u*d+o*m-l*f,this.y=n+u*f+l*d-r*m,this.z=a+u*m+r*f-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*a,this.y=r[1]*t+r[5]*n+r[9]*a,this.z=r[2]*t+r[6]*n+r[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=bn(this.x,e.x,t.x),this.y=bn(this.y,e.y,t.y),this.z=bn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=bn(this.x,e,t),this.y=bn(this.y,e,t),this.z=bn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(bn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,a=e.y,r=e.z,o=t.x,l=t.y,u=t.z;return this.x=a*u-r*l,this.y=r*o-n*u,this.z=n*l-a*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return q2.copy(this).projectOnVector(e),this.sub(q2)}reflect(e){return this.sub(q2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return t*t+n*n+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const a=Math.sin(t)*e;return this.x=a*Math.sin(n),this.y=Math.cos(t)*e,this.z=a*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const q2=new Q,g5=new Wn;class Tn{constructor(e,t,n,a,r,o,l,u,d){Tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,a,r,o,l,u,d)}set(e,t,n,a,r,o,l,u,d){const f=this.elements;return f[0]=e,f[1]=a,f[2]=l,f[3]=t,f[4]=r,f[5]=u,f[6]=n,f[7]=o,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,r=this.elements,o=n[0],l=n[3],u=n[6],d=n[1],f=n[4],m=n[7],x=n[2],g=n[5],v=n[8],M=a[0],_=a[3],S=a[6],j=a[1],A=a[4],C=a[7],N=a[2],R=a[5],O=a[8];return r[0]=o*M+l*j+u*N,r[3]=o*_+l*A+u*R,r[6]=o*S+l*C+u*O,r[1]=d*M+f*j+m*N,r[4]=d*_+f*A+m*R,r[7]=d*S+f*C+m*O,r[2]=x*M+g*j+v*N,r[5]=x*_+g*A+v*R,r[8]=x*S+g*C+v*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],a=e[2],r=e[3],o=e[4],l=e[5],u=e[6],d=e[7],f=e[8];return t*o*f-t*l*d-n*r*f+n*l*u+a*r*d-a*o*u}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],r=e[3],o=e[4],l=e[5],u=e[6],d=e[7],f=e[8],m=f*o-l*d,x=l*u-f*r,g=d*r-o*u,v=t*m+n*x+a*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/v;return e[0]=m*M,e[1]=(a*d-f*n)*M,e[2]=(l*n-a*o)*M,e[3]=x*M,e[4]=(f*t-a*u)*M,e[5]=(a*r-l*t)*M,e[6]=g*M,e[7]=(n*u-d*t)*M,e[8]=(o*t-n*r)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,a,r,o,l){const u=Math.cos(r),d=Math.sin(r);return this.set(n*u,n*d,-n*(u*o+d*l)+o+e,-a*d,a*u,-a*(-d*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(X2.makeScale(e,t)),this}rotate(e){return this.premultiply(X2.makeRotation(-e)),this}translate(e,t){return this.premultiply(X2.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<9;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const X2=new Tn,v5=new Tn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),y5=new Tn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function _k(){const i={enabled:!0,workingColorSpace:gl,spaces:{},convert:function(a,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===js&&(a.r=nu(a.r),a.g=nu(a.g),a.b=nu(a.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(a.applyMatrix3(this.spaces[r].toXYZ),a.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===js&&(a.r=E0(a.r),a.g=E0(a.g),a.b=E0(a.b))),a},workingToColorSpace:function(a,r){return this.convert(a,this.workingColorSpace,r)},colorSpaceToWorking:function(a,r){return this.convert(a,r,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===$c?Ex:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,r=this.workingColorSpace){return a.fromArray(this.spaces[r].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,r,o){return a.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,r){return O0("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,r)},toWorkingColorSpace:function(a,r){return O0("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,r)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[gl]:{primaries:e,whitePoint:n,transfer:Ex,toXYZ:v5,fromXYZ:y5,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Sa},outputColorSpaceConfig:{drawingBufferColorSpace:Sa}},[Sa]:{primaries:e,whitePoint:n,transfer:js,toXYZ:v5,fromXYZ:y5,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Sa}}}),i}const ts=_k();function nu(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function E0(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Fh;class QC{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Fh===void 0&&(Fh=Ax("canvas")),Fh.width=e.width,Fh.height=e.height;const a=Fh.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),n=Fh}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ax("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const a=n.getImageData(0,0,e.width,e.height),r=a.data;for(let o=0;o<r.length;o++)r[o]=nu(r[o]/255)*255;return n.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(nu(t[n]/255)*255):t[n]=nu(t[n]);return{data:t,width:e.width,height:e.height}}else return qt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let wk=0;class td{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wk++}),this.uuid=no(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let r;if(Array.isArray(a)){r=[];for(let o=0,l=a.length;o<l;o++)a[o].isDataTexture?r.push(W2(a[o].image)):r.push(W2(a[o]))}else r=W2(a);n.url=r}return t||(e.images[this.uuid]=n),n}}function W2(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?QC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(qt("Texture: Unable to serialize Texture."),{})}let jk=0;const Y2=new Q;class Es extends cc{constructor(e=Es.DEFAULT_IMAGE,t=Es.DEFAULT_MAPPING,n=bi,a=bi,r=ss,o=tc,l=Ai,u=gr,d=Es.DEFAULT_ANISOTROPY,f=$c){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jk++}),this.uuid=no(),this.name="",this.source=new td(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=r,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=u,this.offset=new pt(0,0),this.repeat=new pt(1,1),this.center=new pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Y2).x}get height(){return this.source.getSize(Y2).y}get depth(){return this.source.getSize(Y2).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){qt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){qt(`Texture.setValues(): property '${t}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==rd)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Sx:e.x=e.x-Math.floor(e.x);break;case bi:e.x=e.x<0?0:1;break;case _x:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Sx:e.y=e.y-Math.floor(e.y);break;case bi:e.y=e.y<0?0:1;break;case _x:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Es.DEFAULT_IMAGE=null;Es.DEFAULT_MAPPING=rd;Es.DEFAULT_ANISOTROPY=1;class ns{constructor(e=0,t=0,n=0,a=1){ns.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,a){return this.x=e,this.y=t,this.z=n,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*a+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*a+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*a+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*a+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,a,r;const u=e.elements,d=u[0],f=u[4],m=u[8],x=u[1],g=u[5],v=u[9],M=u[2],_=u[6],S=u[10];if(Math.abs(f-x)<.01&&Math.abs(m-M)<.01&&Math.abs(v-_)<.01){if(Math.abs(f+x)<.1&&Math.abs(m+M)<.1&&Math.abs(v+_)<.1&&Math.abs(d+g+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(d+1)/2,C=(g+1)/2,N=(S+1)/2,R=(f+x)/4,O=(m+M)/4,U=(v+_)/4;return A>C&&A>N?A<.01?(n=0,a=.707106781,r=.707106781):(n=Math.sqrt(A),a=R/n,r=O/n):C>N?C<.01?(n=.707106781,a=0,r=.707106781):(a=Math.sqrt(C),n=R/a,r=U/a):N<.01?(n=.707106781,a=.707106781,r=0):(r=Math.sqrt(N),n=O/r,a=U/r),this.set(n,a,r,t),this}let j=Math.sqrt((_-v)*(_-v)+(m-M)*(m-M)+(x-f)*(x-f));return Math.abs(j)<.001&&(j=1),this.x=(_-v)/j,this.y=(m-M)/j,this.z=(x-f)/j,this.w=Math.acos((d+g+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=bn(this.x,e.x,t.x),this.y=bn(this.y,e.y,t.y),this.z=bn(this.z,e.z,t.z),this.w=bn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=bn(this.x,e,t),this.y=bn(this.y,e,t),this.z=bn(this.z,e,t),this.w=bn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(bn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class e3 extends cc{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ss,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new ns(0,0,e,t),this.scissorTest=!1,this.viewport=new ns(0,0,e,t);const a={width:e,height:t,depth:n.depth},r=new Es(a);this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:ss,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let a=0,r=this.textures.length;a<r;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=n,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new td(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ea extends e3{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class rb extends Es{constructor(e=null,t=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ek extends Ea{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new rb(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class ob extends Es{constructor(e=null,t=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tk extends Ea{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ob(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class zi{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=r.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,ol):ol.fromBufferAttribute(r,o),ol.applyMatrix4(e.matrixWorld),this.expandByPoint(ol);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),w1.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),w1.copy(n.boundingBox)),w1.applyMatrix4(e.matrixWorld),this.union(w1)}const a=e.children;for(let r=0,o=a.length;r<o;r++)this.expandByObject(a[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ol),ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wp),j1.subVectors(this.max,wp),Vh.subVectors(e.a,wp),Hh.subVectors(e.b,wp),qh.subVectors(e.c,wp),qu.subVectors(Hh,Vh),Xu.subVectors(qh,Hh),tf.subVectors(Vh,qh);let t=[0,-qu.z,qu.y,0,-Xu.z,Xu.y,0,-tf.z,tf.y,qu.z,0,-qu.x,Xu.z,0,-Xu.x,tf.z,0,-tf.x,-qu.y,qu.x,0,-Xu.y,Xu.x,0,-tf.y,tf.x,0];return!Z2(t,Vh,Hh,qh,j1)||(t=[1,0,0,0,1,0,0,0,1],!Z2(t,Vh,Hh,qh,j1))?!1:(E1.crossVectors(qu,Xu),t=[E1.x,E1.y,E1.z],Z2(t,Vh,Hh,qh,j1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ol).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Xc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Xc=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],ol=new Q,w1=new zi,Vh=new Q,Hh=new Q,qh=new Q,qu=new Q,Xu=new Q,tf=new Q,wp=new Q,j1=new Q,E1=new Q,nf=new Q;function Z2(i,e,t,n,a){for(let r=0,o=i.length-3;r<=o;r+=3){nf.fromArray(i,r);const l=a.x*Math.abs(nf.x)+a.y*Math.abs(nf.y)+a.z*Math.abs(nf.z),u=e.dot(nf),d=t.dot(nf),f=n.dot(nf);if(Math.max(-Math.max(u,d,f),Math.min(u,d,f))>l)return!1}return!0}const Ak=new zi,jp=new Q,K2=new Q;let Yi=class{constructor(e=new Q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Ak.setFromPoints(e).getCenter(n);let a=0;for(let r=0,o=e.length;r<o;r++)a=Math.max(a,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jp.subVectors(e,this.center);const t=jp.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),a=(n-this.radius)*.5;this.center.addScaledVector(jp,a/n),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(K2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jp.copy(e.center).add(K2)),this.expandByPoint(jp.copy(e.center).sub(K2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const Wc=new Q,J2=new Q,T1=new Q,Wu=new Q,Q2=new Q,A1=new Q,$2=new Q;class kf{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wc.copy(this.origin).addScaledVector(this.direction,t),Wc.distanceToSquared(e))}distanceSqToSegment(e,t,n,a){J2.copy(e).add(t).multiplyScalar(.5),T1.copy(t).sub(e).normalize(),Wu.copy(this.origin).sub(J2);const r=e.distanceTo(t)*.5,o=-this.direction.dot(T1),l=Wu.dot(this.direction),u=-Wu.dot(T1),d=Wu.lengthSq(),f=Math.abs(1-o*o);let m,x,g,v;if(f>0)if(m=o*u-l,x=o*l-u,v=r*f,m>=0)if(x>=-v)if(x<=v){const M=1/f;m*=M,x*=M,g=m*(m+o*x+2*l)+x*(o*m+x+2*u)+d}else x=r,m=Math.max(0,-(o*x+l)),g=-m*m+x*(x+2*u)+d;else x=-r,m=Math.max(0,-(o*x+l)),g=-m*m+x*(x+2*u)+d;else x<=-v?(m=Math.max(0,-(-o*r+l)),x=m>0?-r:Math.min(Math.max(-r,-u),r),g=-m*m+x*(x+2*u)+d):x<=v?(m=0,x=Math.min(Math.max(-r,-u),r),g=x*(x+2*u)+d):(m=Math.max(0,-(o*r+l)),x=m>0?r:Math.min(Math.max(-r,-u),r),g=-m*m+x*(x+2*u)+d);else x=o>0?-r:r,m=Math.max(0,-(o*x+l)),g=-m*m+x*(x+2*u)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,m),a&&a.copy(J2).addScaledVector(T1,x),g}intersectSphere(e,t){Wc.subVectors(e.center,this.origin);const n=Wc.dot(this.direction),a=Wc.dot(Wc)-n*n,r=e.radius*e.radius;if(a>r)return null;const o=Math.sqrt(r-a),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,a,r,o,l,u;const d=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,x=this.origin;return d>=0?(n=(e.min.x-x.x)*d,a=(e.max.x-x.x)*d):(n=(e.max.x-x.x)*d,a=(e.min.x-x.x)*d),f>=0?(r=(e.min.y-x.y)*f,o=(e.max.y-x.y)*f):(r=(e.max.y-x.y)*f,o=(e.min.y-x.y)*f),n>o||r>a||((r>n||isNaN(n))&&(n=r),(o<a||isNaN(a))&&(a=o),m>=0?(l=(e.min.z-x.z)*m,u=(e.max.z-x.z)*m):(l=(e.max.z-x.z)*m,u=(e.min.z-x.z)*m),n>u||l>a)||((l>n||n!==n)&&(n=l),(u<a||a!==a)&&(a=u),a<0)?null:this.at(n>=0?n:a,t)}intersectsBox(e){return this.intersectBox(e,Wc)!==null}intersectTriangle(e,t,n,a,r){Q2.subVectors(t,e),A1.subVectors(n,e),$2.crossVectors(Q2,A1);let o=this.direction.dot($2),l;if(o>0){if(a)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Wu.subVectors(this.origin,e);const u=l*this.direction.dot(A1.crossVectors(Wu,A1));if(u<0)return null;const d=l*this.direction.dot(Q2.cross(Wu));if(d<0||u+d>o)return null;const f=-l*Wu.dot($2);return f<0?null:this.at(f/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class mn{constructor(e,t,n,a,r,o,l,u,d,f,m,x,g,v,M,_){mn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,a,r,o,l,u,d,f,m,x,g,v,M,_)}set(e,t,n,a,r,o,l,u,d,f,m,x,g,v,M,_){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=a,S[1]=r,S[5]=o,S[9]=l,S[13]=u,S[2]=d,S[6]=f,S[10]=m,S[14]=x,S[3]=g,S[7]=v,S[11]=M,S[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,a=1/Xh.setFromMatrixColumn(e,0).length(),r=1/Xh.setFromMatrixColumn(e,1).length(),o=1/Xh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,a=e.y,r=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(a),d=Math.sin(a),f=Math.cos(r),m=Math.sin(r);if(e.order==="XYZ"){const x=o*f,g=o*m,v=l*f,M=l*m;t[0]=u*f,t[4]=-u*m,t[8]=d,t[1]=g+v*d,t[5]=x-M*d,t[9]=-l*u,t[2]=M-x*d,t[6]=v+g*d,t[10]=o*u}else if(e.order==="YXZ"){const x=u*f,g=u*m,v=d*f,M=d*m;t[0]=x+M*l,t[4]=v*l-g,t[8]=o*d,t[1]=o*m,t[5]=o*f,t[9]=-l,t[2]=g*l-v,t[6]=M+x*l,t[10]=o*u}else if(e.order==="ZXY"){const x=u*f,g=u*m,v=d*f,M=d*m;t[0]=x-M*l,t[4]=-o*m,t[8]=v+g*l,t[1]=g+v*l,t[5]=o*f,t[9]=M-x*l,t[2]=-o*d,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const x=o*f,g=o*m,v=l*f,M=l*m;t[0]=u*f,t[4]=v*d-g,t[8]=x*d+M,t[1]=u*m,t[5]=M*d+x,t[9]=g*d-v,t[2]=-d,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const x=o*u,g=o*d,v=l*u,M=l*d;t[0]=u*f,t[4]=M-x*m,t[8]=v*m+g,t[1]=m,t[5]=o*f,t[9]=-l*f,t[2]=-d*f,t[6]=g*m+v,t[10]=x-M*m}else if(e.order==="XZY"){const x=o*u,g=o*d,v=l*u,M=l*d;t[0]=u*f,t[4]=-m,t[8]=d*f,t[1]=x*m+M,t[5]=o*f,t[9]=g*m-v,t[2]=v*m-g,t[6]=l*f,t[10]=M*m+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ck,e,Nk)}lookAt(e,t,n){const a=this.elements;return $r.subVectors(e,t),$r.lengthSq()===0&&($r.z=1),$r.normalize(),Yu.crossVectors(n,$r),Yu.lengthSq()===0&&(Math.abs(n.z)===1?$r.x+=1e-4:$r.z+=1e-4,$r.normalize(),Yu.crossVectors(n,$r)),Yu.normalize(),C1.crossVectors($r,Yu),a[0]=Yu.x,a[4]=C1.x,a[8]=$r.x,a[1]=Yu.y,a[5]=C1.y,a[9]=$r.y,a[2]=Yu.z,a[6]=C1.z,a[10]=$r.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,r=this.elements,o=n[0],l=n[4],u=n[8],d=n[12],f=n[1],m=n[5],x=n[9],g=n[13],v=n[2],M=n[6],_=n[10],S=n[14],j=n[3],A=n[7],C=n[11],N=n[15],R=a[0],O=a[4],U=a[8],z=a[12],I=a[1],V=a[5],F=a[9],q=a[13],W=a[2],ie=a[6],B=a[10],J=a[14],$=a[3],le=a[7],re=a[11],H=a[15];return r[0]=o*R+l*I+u*W+d*$,r[4]=o*O+l*V+u*ie+d*le,r[8]=o*U+l*F+u*B+d*re,r[12]=o*z+l*q+u*J+d*H,r[1]=f*R+m*I+x*W+g*$,r[5]=f*O+m*V+x*ie+g*le,r[9]=f*U+m*F+x*B+g*re,r[13]=f*z+m*q+x*J+g*H,r[2]=v*R+M*I+_*W+S*$,r[6]=v*O+M*V+_*ie+S*le,r[10]=v*U+M*F+_*B+S*re,r[14]=v*z+M*q+_*J+S*H,r[3]=j*R+A*I+C*W+N*$,r[7]=j*O+A*V+C*ie+N*le,r[11]=j*U+A*F+C*B+N*re,r[15]=j*z+A*q+C*J+N*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],a=e[8],r=e[12],o=e[1],l=e[5],u=e[9],d=e[13],f=e[2],m=e[6],x=e[10],g=e[14],v=e[3],M=e[7],_=e[11],S=e[15];return v*(+r*u*m-a*d*m-r*l*x+n*d*x+a*l*g-n*u*g)+M*(+t*u*g-t*d*x+r*o*x-a*o*g+a*d*f-r*u*f)+_*(+t*d*m-t*l*g-r*o*m+n*o*g+r*l*f-n*d*f)+S*(-a*l*f-t*u*m+t*l*x+a*o*m-n*o*x+n*u*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],r=e[3],o=e[4],l=e[5],u=e[6],d=e[7],f=e[8],m=e[9],x=e[10],g=e[11],v=e[12],M=e[13],_=e[14],S=e[15],j=m*_*d-M*x*d+M*u*g-l*_*g-m*u*S+l*x*S,A=v*x*d-f*_*d-v*u*g+o*_*g+f*u*S-o*x*S,C=f*M*d-v*m*d+v*l*g-o*M*g-f*l*S+o*m*S,N=v*m*u-f*M*u-v*l*x+o*M*x+f*l*_-o*m*_,R=t*j+n*A+a*C+r*N;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/R;return e[0]=j*O,e[1]=(M*x*r-m*_*r-M*a*g+n*_*g+m*a*S-n*x*S)*O,e[2]=(l*_*r-M*u*r+M*a*d-n*_*d-l*a*S+n*u*S)*O,e[3]=(m*u*r-l*x*r-m*a*d+n*x*d+l*a*g-n*u*g)*O,e[4]=A*O,e[5]=(f*_*r-v*x*r+v*a*g-t*_*g-f*a*S+t*x*S)*O,e[6]=(v*u*r-o*_*r-v*a*d+t*_*d+o*a*S-t*u*S)*O,e[7]=(o*x*r-f*u*r+f*a*d-t*x*d-o*a*g+t*u*g)*O,e[8]=C*O,e[9]=(v*m*r-f*M*r-v*n*g+t*M*g+f*n*S-t*m*S)*O,e[10]=(o*M*r-v*l*r+v*n*d-t*M*d-o*n*S+t*l*S)*O,e[11]=(f*l*r-o*m*r-f*n*d+t*m*d+o*n*g-t*l*g)*O,e[12]=N*O,e[13]=(f*M*a-v*m*a+v*n*x-t*M*x-f*n*_+t*m*_)*O,e[14]=(v*l*a-o*M*a-v*n*u+t*M*u+o*n*_-t*l*_)*O,e[15]=(o*m*a-f*l*a+f*n*u-t*m*u-o*n*x+t*l*x)*O,this}scale(e){const t=this.elements,n=e.x,a=e.y,r=e.z;return t[0]*=n,t[4]*=a,t[8]*=r,t[1]*=n,t[5]*=a,t[9]*=r,t[2]*=n,t[6]*=a,t[10]*=r,t[3]*=n,t[7]*=a,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,a))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),a=Math.sin(t),r=1-n,o=e.x,l=e.y,u=e.z,d=r*o,f=r*l;return this.set(d*o+n,d*l-a*u,d*u+a*l,0,d*l+a*u,f*l+n,f*u-a*o,0,d*u-a*l,f*u+a*o,r*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,a,r,o){return this.set(1,n,r,0,e,1,o,0,t,a,1,0,0,0,0,1),this}compose(e,t,n){const a=this.elements,r=t._x,o=t._y,l=t._z,u=t._w,d=r+r,f=o+o,m=l+l,x=r*d,g=r*f,v=r*m,M=o*f,_=o*m,S=l*m,j=u*d,A=u*f,C=u*m,N=n.x,R=n.y,O=n.z;return a[0]=(1-(M+S))*N,a[1]=(g+C)*N,a[2]=(v-A)*N,a[3]=0,a[4]=(g-C)*R,a[5]=(1-(x+S))*R,a[6]=(_+j)*R,a[7]=0,a[8]=(v+A)*O,a[9]=(_-j)*O,a[10]=(1-(x+M))*O,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,n){const a=this.elements;let r=Xh.set(a[0],a[1],a[2]).length();const o=Xh.set(a[4],a[5],a[6]).length(),l=Xh.set(a[8],a[9],a[10]).length();this.determinant()<0&&(r=-r),e.x=a[12],e.y=a[13],e.z=a[14],ll.copy(this);const d=1/r,f=1/o,m=1/l;return ll.elements[0]*=d,ll.elements[1]*=d,ll.elements[2]*=d,ll.elements[4]*=f,ll.elements[5]*=f,ll.elements[6]*=f,ll.elements[8]*=m,ll.elements[9]*=m,ll.elements[10]*=m,t.setFromRotationMatrix(ll),n.x=r,n.y=o,n.z=l,this}makePerspective(e,t,n,a,r,o,l=to,u=!1){const d=this.elements,f=2*r/(t-e),m=2*r/(n-a),x=(t+e)/(t-e),g=(n+a)/(n-a);let v,M;if(u)v=r/(o-r),M=o*r/(o-r);else if(l===to)v=-(o+r)/(o-r),M=-2*o*r/(o-r);else if(l===P0)v=-o/(o-r),M=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return d[0]=f,d[4]=0,d[8]=x,d[12]=0,d[1]=0,d[5]=m,d[9]=g,d[13]=0,d[2]=0,d[6]=0,d[10]=v,d[14]=M,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,n,a,r,o,l=to,u=!1){const d=this.elements,f=2/(t-e),m=2/(n-a),x=-(t+e)/(t-e),g=-(n+a)/(n-a);let v,M;if(u)v=1/(o-r),M=o/(o-r);else if(l===to)v=-2/(o-r),M=-(o+r)/(o-r);else if(l===P0)v=-1/(o-r),M=-r/(o-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return d[0]=f,d[4]=0,d[8]=0,d[12]=x,d[1]=0,d[5]=m,d[9]=0,d[13]=g,d[2]=0,d[6]=0,d[10]=v,d[14]=M,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<16;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Xh=new Q,ll=new mn,Ck=new Q(0,0,0),Nk=new Q(1,1,1),Yu=new Q,C1=new Q,$r=new Q,b5=new mn,M5=new Wn;class is{constructor(e=0,t=0,n=0,a=is.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,a=this._order){return this._x=e,this._y=t,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const a=e.elements,r=a[0],o=a[4],l=a[8],u=a[1],d=a[5],f=a[9],m=a[2],x=a[6],g=a[10];switch(t){case"XYZ":this._y=Math.asin(bn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(x,d),this._z=0);break;case"YXZ":this._x=Math.asin(-bn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,d)):(this._y=Math.atan2(-m,r),this._z=0);break;case"ZXY":this._x=Math.asin(bn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-m,g),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(u,r));break;case"ZYX":this._y=Math.asin(-bn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(x,g),this._z=Math.atan2(u,r)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(bn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-m,r)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-bn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(x,d),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-f,g),this._y=0);break;default:qt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return b5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(b5,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return M5.setFromEuler(this),this.setFromQuaternion(M5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}is.DEFAULT_ORDER="XYZ";class G0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Rk=0;const S5=new Q,Wh=new Wn,Yc=new mn,N1=new Q,Ep=new Q,Dk=new Q,Lk=new Wn,_5=new Q(1,0,0),w5=new Q(0,1,0),j5=new Q(0,0,1),E5={type:"added"},Uk={type:"removed"},Yh={type:"childadded",child:null},eM={type:"childremoved",child:null};class ls extends cc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Rk++}),this.uuid=no(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ls.DEFAULT_UP.clone();const e=new Q,t=new is,n=new Wn,a=new Q(1,1,1);function r(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new mn},normalMatrix:{value:new Tn}}),this.matrix=new mn,this.matrixWorld=new mn,this.matrixAutoUpdate=ls.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ls.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new G0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Wh.setFromAxisAngle(e,t),this.quaternion.multiply(Wh),this}rotateOnWorldAxis(e,t){return Wh.setFromAxisAngle(e,t),this.quaternion.premultiply(Wh),this}rotateX(e){return this.rotateOnAxis(_5,e)}rotateY(e){return this.rotateOnAxis(w5,e)}rotateZ(e){return this.rotateOnAxis(j5,e)}translateOnAxis(e,t){return S5.copy(e).applyQuaternion(this.quaternion),this.position.add(S5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_5,e)}translateY(e){return this.translateOnAxis(w5,e)}translateZ(e){return this.translateOnAxis(j5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Yc.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?N1.copy(e):N1.set(e,t,n);const a=this.parent;this.updateWorldMatrix(!0,!1),Ep.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yc.lookAt(Ep,N1,this.up):Yc.lookAt(N1,Ep,this.up),this.quaternion.setFromRotationMatrix(Yc),a&&(Yc.extractRotation(a.matrixWorld),Wh.setFromRotationMatrix(Yc),this.quaternion.premultiply(Wh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(wn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(E5),Yh.child=e,this.dispatchEvent(Yh),Yh.child=null):wn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Uk),eM.child=e,this.dispatchEvent(eM),eM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Yc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Yc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Yc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(E5),Yh.child=e,this.dispatchEvent(Yh),Yh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,a=this.children.length;n<a;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const a=this.children;for(let r=0,o=a.length;r<o;r++)a[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ep,e,Dk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ep,Lk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let r=0,o=a.length;r<o;r++)a[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(l=>({...l})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function r(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=r(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let d=0,f=u.length;d<f;d++){const m=u[d];r(e.shapes,m)}else r(e.shapes,u)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,d=this.material.length;u<d;u++)l.push(r(e.materials,this.material[u]));a.material=l}else a.material=r(e.materials,this.material);if(this.children.length>0){a.children=[];for(let l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];a.animations.push(r(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),d=o(e.textures),f=o(e.images),m=o(e.shapes),x=o(e.skeletons),g=o(e.animations),v=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),f.length>0&&(n.images=f),m.length>0&&(n.shapes=m),x.length>0&&(n.skeletons=x),g.length>0&&(n.animations=g),v.length>0&&(n.nodes=v)}return n.object=a,n;function o(l){const u=[];for(const d in l){const f=l[d];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const a=e.children[n];this.add(a.clone())}return this}}ls.DEFAULT_UP=new Q(0,1,0);ls.DEFAULT_MATRIX_AUTO_UPDATE=!0;ls.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const cl=new Q,Zc=new Q,tM=new Q,Kc=new Q,Zh=new Q,Kh=new Q,T5=new Q,nM=new Q,sM=new Q,iM=new Q,aM=new ns,rM=new ns,oM=new ns;class Ur{constructor(e=new Q,t=new Q,n=new Q){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,a){a.subVectors(n,t),cl.subVectors(e,t),a.cross(cl);const r=a.lengthSq();return r>0?a.multiplyScalar(1/Math.sqrt(r)):a.set(0,0,0)}static getBarycoord(e,t,n,a,r){cl.subVectors(a,t),Zc.subVectors(n,t),tM.subVectors(e,t);const o=cl.dot(cl),l=cl.dot(Zc),u=cl.dot(tM),d=Zc.dot(Zc),f=Zc.dot(tM),m=o*d-l*l;if(m===0)return r.set(0,0,0),null;const x=1/m,g=(d*u-l*f)*x,v=(o*f-l*u)*x;return r.set(1-g-v,v,g)}static containsPoint(e,t,n,a){return this.getBarycoord(e,t,n,a,Kc)===null?!1:Kc.x>=0&&Kc.y>=0&&Kc.x+Kc.y<=1}static getInterpolation(e,t,n,a,r,o,l,u){return this.getBarycoord(e,t,n,a,Kc)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(r,Kc.x),u.addScaledVector(o,Kc.y),u.addScaledVector(l,Kc.z),u)}static getInterpolatedAttribute(e,t,n,a,r,o){return aM.setScalar(0),rM.setScalar(0),oM.setScalar(0),aM.fromBufferAttribute(e,t),rM.fromBufferAttribute(e,n),oM.fromBufferAttribute(e,a),o.setScalar(0),o.addScaledVector(aM,r.x),o.addScaledVector(rM,r.y),o.addScaledVector(oM,r.z),o}static isFrontFacing(e,t,n,a){return cl.subVectors(n,t),Zc.subVectors(e,t),cl.cross(Zc).dot(a)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,a){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,n,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return cl.subVectors(this.c,this.b),Zc.subVectors(this.a,this.b),cl.cross(Zc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ur.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ur.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,a,r){return Ur.getInterpolation(e,this.a,this.b,this.c,t,n,a,r)}containsPoint(e){return Ur.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ur.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,a=this.b,r=this.c;let o,l;Zh.subVectors(a,n),Kh.subVectors(r,n),nM.subVectors(e,n);const u=Zh.dot(nM),d=Kh.dot(nM);if(u<=0&&d<=0)return t.copy(n);sM.subVectors(e,a);const f=Zh.dot(sM),m=Kh.dot(sM);if(f>=0&&m<=f)return t.copy(a);const x=u*m-f*d;if(x<=0&&u>=0&&f<=0)return o=u/(u-f),t.copy(n).addScaledVector(Zh,o);iM.subVectors(e,r);const g=Zh.dot(iM),v=Kh.dot(iM);if(v>=0&&g<=v)return t.copy(r);const M=g*d-u*v;if(M<=0&&d>=0&&v<=0)return l=d/(d-v),t.copy(n).addScaledVector(Kh,l);const _=f*v-g*m;if(_<=0&&m-f>=0&&g-v>=0)return T5.subVectors(r,a),l=(m-f)/(m-f+(g-v)),t.copy(a).addScaledVector(T5,l);const S=1/(_+M+x);return o=M*S,l=x*S,t.copy(n).addScaledVector(Zh,o).addScaledVector(Kh,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $C={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zu={h:0,s:0,l:0},R1={h:0,s:0,l:0};function lM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Lt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Sa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ts.colorSpaceToWorking(this,t),this}setRGB(e,t,n,a=ts.workingColorSpace){return this.r=e,this.g=t,this.b=n,ts.colorSpaceToWorking(this,a),this}setHSL(e,t,n,a=ts.workingColorSpace){if(e=$_(e,1),t=bn(t,0,1),n=bn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=lM(o,r,e+1/3),this.g=lM(o,r,e),this.b=lM(o,r,e-1/3)}return ts.colorSpaceToWorking(this,a),this}setStyle(e,t=Sa){function n(r){r!==void 0&&parseFloat(r)<1&&qt("Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=a[1],l=a[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:qt("Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=a[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);qt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Sa){const n=$C[e.toLowerCase()];return n!==void 0?this.setHex(n,t):qt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nu(e.r),this.g=nu(e.g),this.b=nu(e.b),this}copyLinearToSRGB(e){return this.r=E0(e.r),this.g=E0(e.g),this.b=E0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Sa){return ts.workingToColorSpace(Fa.copy(this),e),Math.round(bn(Fa.r*255,0,255))*65536+Math.round(bn(Fa.g*255,0,255))*256+Math.round(bn(Fa.b*255,0,255))}getHexString(e=Sa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ts.workingColorSpace){ts.workingToColorSpace(Fa.copy(this),t);const n=Fa.r,a=Fa.g,r=Fa.b,o=Math.max(n,a,r),l=Math.min(n,a,r);let u,d;const f=(l+o)/2;if(l===o)u=0,d=0;else{const m=o-l;switch(d=f<=.5?m/(o+l):m/(2-o-l),o){case n:u=(a-r)/m+(a<r?6:0);break;case a:u=(r-n)/m+2;break;case r:u=(n-a)/m+4;break}u/=6}return e.h=u,e.s=d,e.l=f,e}getRGB(e,t=ts.workingColorSpace){return ts.workingToColorSpace(Fa.copy(this),t),e.r=Fa.r,e.g=Fa.g,e.b=Fa.b,e}getStyle(e=Sa){ts.workingToColorSpace(Fa.copy(this),e);const t=Fa.r,n=Fa.g,a=Fa.b;return e!==Sa?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(e,t,n){return this.getHSL(Zu),this.setHSL(Zu.h+e,Zu.s+t,Zu.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Zu),e.getHSL(R1);const n=ox(Zu.h,R1.h,t),a=ox(Zu.s,R1.s,t),r=ox(Zu.l,R1.l,t);return this.setHSL(n,a,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,a=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*a,this.g=r[1]*t+r[4]*n+r[7]*a,this.b=r[2]*t+r[5]*n+r[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Fa=new Lt;Lt.NAMES=$C;let Pk=0;class Xa extends cc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Pk++}),this.uuid=no(),this.name="",this.type="Material",this.blending=Df,this.side=au,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Yv,this.blendDst=Zv,this.blendEquation=ed,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Lt(0,0,0),this.blendAlpha=0,this.depthFunc=Pf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=GS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bf,this.stencilZFail=bf,this.stencilZPass=bf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){qt(`Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){qt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Df&&(n.blending=this.blending),this.side!==au&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Yv&&(n.blendSrc=this.blendSrc),this.blendDst!==Zv&&(n.blendDst=this.blendDst),this.blendEquation!==ed&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Pf&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==GS&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==bf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==bf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==bf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(r){const o=[];for(const l in r){const u=r[l];delete u.metadata,o.push(u)}return o}if(t){const r=a(e.textures),o=a(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const a=t.length;n=new Array(a);for(let r=0;r!==a;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class vl extends Xa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.combine=qx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const eu=Ok();function Ok(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let u=0;u<256;++u){const d=u-127;d<-27?(n[u]=0,n[u|256]=32768,a[u]=24,a[u|256]=24):d<-14?(n[u]=1024>>-d-14,n[u|256]=1024>>-d-14|32768,a[u]=-d-1,a[u|256]=-d-1):d<=15?(n[u]=d+15<<10,n[u|256]=d+15<<10|32768,a[u]=13,a[u|256]=13):d<128?(n[u]=31744,n[u|256]=64512,a[u]=24,a[u|256]=24):(n[u]=31744,n[u|256]=64512,a[u]=13,a[u|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let d=u<<13,f=0;for(;(d&8388608)===0;)d<<=1,f-=8388608;d&=-8388609,f+=947912704,r[u]=d|f}for(let u=1024;u<2048;++u)r[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:a,mantissaTable:r,exponentTable:o,offsetTable:l}}function Lr(i){Math.abs(i)>65504&&qt("DataUtils.toHalfFloat(): Value out of range."),i=bn(i,-65504,65504),eu.floatView[0]=i;const e=eu.uint32View[0],t=e>>23&511;return eu.baseTable[t]+((e&8388607)>>eu.shiftTable[t])}function qp(i){const e=i>>10;return eu.uint32View[0]=eu.mantissaTable[eu.offsetTable[e]+(i&1023)]+eu.exponentTable[e],eu.floatView[0]}class Tf{static toHalfFloat(e){return Lr(e)}static fromHalfFloat(e){return qp(e)}}const Pi=new Q,D1=new pt;let zk=0;class Ds{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:zk++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Tx,this.updateRanges=[],this.gpuType=ti,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let a=0,r=this.itemSize;a<r;a++)this.array[e+a]=t.array[n+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)D1.fromBufferAttribute(this,t),D1.applyMatrix3(e),this.setXY(t,D1.x,D1.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix3(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix4(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyNormalMatrix(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.transformDirection(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=pr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Pn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),a=Pn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this}setXYZW(e,t,n,a,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),a=Pn(a,this.array),r=Pn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Tx&&(e.usage=this.usage),e}}class Gk extends Ds{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ik extends Ds{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class kk extends Ds{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Bk extends Ds{constructor(e,t,n){super(new Int16Array(e),t,n)}}class t3 extends Ds{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Fk extends Ds{constructor(e,t,n){super(new Int32Array(e),t,n)}}class n3 extends Ds{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Vk extends Ds{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=qp(this.array[e*this.itemSize]);return this.normalized&&(t=pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=Lr(t),this}getY(e){let t=qp(this.array[e*this.itemSize+1]);return this.normalized&&(t=pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=Lr(t),this}getZ(e){let t=qp(this.array[e*this.itemSize+2]);return this.normalized&&(t=pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=Lr(t),this}getW(e){let t=qp(this.array[e*this.itemSize+3]);return this.normalized&&(t=pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=Lr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.array[e+0]=Lr(t),this.array[e+1]=Lr(n),this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),a=Pn(a,this.array)),this.array[e+0]=Lr(t),this.array[e+1]=Lr(n),this.array[e+2]=Lr(a),this}setXYZW(e,t,n,a,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),a=Pn(a,this.array),r=Pn(r,this.array)),this.array[e+0]=Lr(t),this.array[e+1]=Lr(n),this.array[e+2]=Lr(a),this.array[e+3]=Lr(r),this}}class tn extends Ds{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Hk=0;const Eo=new mn,cM=new ls,Jh=new Q,eo=new zi,Tp=new zi,oa=new Q;class Dn extends cc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Hk++}),this.uuid=no(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(KC(e)?n3:t3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Tn().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Eo.makeRotationFromQuaternion(e),this.applyMatrix4(Eo),this}rotateX(e){return Eo.makeRotationX(e),this.applyMatrix4(Eo),this}rotateY(e){return Eo.makeRotationY(e),this.applyMatrix4(Eo),this}rotateZ(e){return Eo.makeRotationZ(e),this.applyMatrix4(Eo),this}translate(e,t,n){return Eo.makeTranslation(e,t,n),this.applyMatrix4(Eo),this}scale(e,t,n){return Eo.makeScale(e,t,n),this.applyMatrix4(Eo),this}lookAt(e){return cM.lookAt(e),cM.updateMatrix(),this.applyMatrix4(cM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jh).negate(),this.translate(Jh.x,Jh.y,Jh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let a=0,r=e.length;a<r;a++){const o=e[a];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new tn(n,3))}else{const n=Math.min(e.length,t.count);for(let a=0;a<n;a++){const r=e[a];t.setXYZ(a,r.x,r.y,r.z||0)}e.length>t.count&&qt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){wn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){const r=t[n];eo.setFromBufferAttribute(r),this.morphTargetsRelative?(oa.addVectors(this.boundingBox.min,eo.min),this.boundingBox.expandByPoint(oa),oa.addVectors(this.boundingBox.max,eo.max),this.boundingBox.expandByPoint(oa)):(this.boundingBox.expandByPoint(eo.min),this.boundingBox.expandByPoint(eo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&wn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){wn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(e){const n=this.boundingSphere.center;if(eo.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const l=t[r];Tp.setFromBufferAttribute(l),this.morphTargetsRelative?(oa.addVectors(eo.min,Tp.min),eo.expandByPoint(oa),oa.addVectors(eo.max,Tp.max),eo.expandByPoint(oa)):(eo.expandByPoint(Tp.min),eo.expandByPoint(Tp.max))}eo.getCenter(n);let a=0;for(let r=0,o=e.count;r<o;r++)oa.fromBufferAttribute(e,r),a=Math.max(a,n.distanceToSquared(oa));if(t)for(let r=0,o=t.length;r<o;r++){const l=t[r],u=this.morphTargetsRelative;for(let d=0,f=l.count;d<f;d++)oa.fromBufferAttribute(l,d),u&&(Jh.fromBufferAttribute(e,d),oa.add(Jh)),a=Math.max(a,n.distanceToSquared(oa))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&wn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){wn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,a=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ds(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let U=0;U<n.count;U++)l[U]=new Q,u[U]=new Q;const d=new Q,f=new Q,m=new Q,x=new pt,g=new pt,v=new pt,M=new Q,_=new Q;function S(U,z,I){d.fromBufferAttribute(n,U),f.fromBufferAttribute(n,z),m.fromBufferAttribute(n,I),x.fromBufferAttribute(r,U),g.fromBufferAttribute(r,z),v.fromBufferAttribute(r,I),f.sub(d),m.sub(d),g.sub(x),v.sub(x);const V=1/(g.x*v.y-v.x*g.y);isFinite(V)&&(M.copy(f).multiplyScalar(v.y).addScaledVector(m,-g.y).multiplyScalar(V),_.copy(m).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(V),l[U].add(M),l[z].add(M),l[I].add(M),u[U].add(_),u[z].add(_),u[I].add(_))}let j=this.groups;j.length===0&&(j=[{start:0,count:e.count}]);for(let U=0,z=j.length;U<z;++U){const I=j[U],V=I.start,F=I.count;for(let q=V,W=V+F;q<W;q+=3)S(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const A=new Q,C=new Q,N=new Q,R=new Q;function O(U){N.fromBufferAttribute(a,U),R.copy(N);const z=l[U];A.copy(z),A.sub(N.multiplyScalar(N.dot(z))).normalize(),C.crossVectors(R,z);const V=C.dot(u[U])<0?-1:1;o.setXYZW(U,A.x,A.y,A.z,V)}for(let U=0,z=j.length;U<z;++U){const I=j[U],V=I.start,F=I.count;for(let q=V,W=V+F;q<W;q+=3)O(e.getX(q+0)),O(e.getX(q+1)),O(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ds(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,g=n.count;x<g;x++)n.setXYZ(x,0,0,0);const a=new Q,r=new Q,o=new Q,l=new Q,u=new Q,d=new Q,f=new Q,m=new Q;if(e)for(let x=0,g=e.count;x<g;x+=3){const v=e.getX(x+0),M=e.getX(x+1),_=e.getX(x+2);a.fromBufferAttribute(t,v),r.fromBufferAttribute(t,M),o.fromBufferAttribute(t,_),f.subVectors(o,r),m.subVectors(a,r),f.cross(m),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,M),d.fromBufferAttribute(n,_),l.add(f),u.add(f),d.add(f),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(M,u.x,u.y,u.z),n.setXYZ(_,d.x,d.y,d.z)}else for(let x=0,g=t.count;x<g;x+=3)a.fromBufferAttribute(t,x+0),r.fromBufferAttribute(t,x+1),o.fromBufferAttribute(t,x+2),f.subVectors(o,r),m.subVectors(a,r),f.cross(m),n.setXYZ(x+0,f.x,f.y,f.z),n.setXYZ(x+1,f.x,f.y,f.z),n.setXYZ(x+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)oa.fromBufferAttribute(e,t),oa.normalize(),e.setXYZ(t,oa.x,oa.y,oa.z)}toNonIndexed(){function e(l,u){const d=l.array,f=l.itemSize,m=l.normalized,x=new d.constructor(u.length*f);let g=0,v=0;for(let M=0,_=u.length;M<_;M++){l.isInterleavedBufferAttribute?g=u[M]*l.data.stride+l.offset:g=u[M]*f;for(let S=0;S<f;S++)x[v++]=d[g++]}return new Ds(x,f,m)}if(this.index===null)return qt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Dn,n=this.index.array,a=this.attributes;for(const l in a){const u=a[l],d=e(u,n);t.setAttribute(l,d)}const r=this.morphAttributes;for(const l in r){const u=[],d=r[l];for(let f=0,m=d.length;f<m;f++){const x=d[f],g=e(x,n);u.push(g)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const d in u)u[d]!==void 0&&(e[d]=u[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const d=n[u];e.data.attributes[u]=d.toJSON(e.data)}const a={};let r=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],f=[];for(let m=0,x=d.length;m<x;m++){const g=d[m];f.push(g.toJSON(e.data))}f.length>0&&(a[u]=f,r=!0)}r&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const a=e.attributes;for(const d in a){const f=a[d];this.setAttribute(d,f.clone(t))}const r=e.morphAttributes;for(const d in r){const f=[],m=r[d];for(let x=0,g=m.length;x<g;x++)f.push(m[x].clone(t));this.morphAttributes[d]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,f=o.length;d<f;d++){const m=o[d];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const A5=new mn,sf=new kf,L1=new Yi,C5=new Q,U1=new Q,P1=new Q,O1=new Q,uM=new Q,z1=new Q,N5=new Q,G1=new Q;class Bs extends ls{constructor(e=new Dn,t=new vl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=a.length;r<o;r++){const l=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(e,t){const n=this.geometry,a=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(a,e);const l=this.morphTargetInfluences;if(r&&l){z1.set(0,0,0);for(let u=0,d=r.length;u<d;u++){const f=l[u],m=r[u];f!==0&&(uM.fromBufferAttribute(m,e),o?z1.addScaledVector(uM,f):z1.addScaledVector(uM.sub(t),f))}t.add(z1)}return t}raycast(e,t){const n=this.geometry,a=this.material,r=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),L1.copy(n.boundingSphere),L1.applyMatrix4(r),sf.copy(e.ray).recast(e.near),!(L1.containsPoint(sf.origin)===!1&&(sf.intersectSphere(L1,C5)===null||sf.origin.distanceToSquared(C5)>(e.far-e.near)**2))&&(A5.copy(r).invert(),sf.copy(e.ray).applyMatrix4(A5),!(n.boundingBox!==null&&sf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,sf)))}_computeIntersections(e,t,n){let a;const r=this.geometry,o=this.material,l=r.index,u=r.attributes.position,d=r.attributes.uv,f=r.attributes.uv1,m=r.attributes.normal,x=r.groups,g=r.drawRange;if(l!==null)if(Array.isArray(o))for(let v=0,M=x.length;v<M;v++){const _=x[v],S=o[_.materialIndex],j=Math.max(_.start,g.start),A=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let C=j,N=A;C<N;C+=3){const R=l.getX(C),O=l.getX(C+1),U=l.getX(C+2);a=I1(this,S,e,n,d,f,m,R,O,U),a&&(a.faceIndex=Math.floor(C/3),a.face.materialIndex=_.materialIndex,t.push(a))}}else{const v=Math.max(0,g.start),M=Math.min(l.count,g.start+g.count);for(let _=v,S=M;_<S;_+=3){const j=l.getX(_),A=l.getX(_+1),C=l.getX(_+2);a=I1(this,o,e,n,d,f,m,j,A,C),a&&(a.faceIndex=Math.floor(_/3),t.push(a))}}else if(u!==void 0)if(Array.isArray(o))for(let v=0,M=x.length;v<M;v++){const _=x[v],S=o[_.materialIndex],j=Math.max(_.start,g.start),A=Math.min(u.count,Math.min(_.start+_.count,g.start+g.count));for(let C=j,N=A;C<N;C+=3){const R=C,O=C+1,U=C+2;a=I1(this,S,e,n,d,f,m,R,O,U),a&&(a.faceIndex=Math.floor(C/3),a.face.materialIndex=_.materialIndex,t.push(a))}}else{const v=Math.max(0,g.start),M=Math.min(u.count,g.start+g.count);for(let _=v,S=M;_<S;_+=3){const j=_,A=_+1,C=_+2;a=I1(this,o,e,n,d,f,m,j,A,C),a&&(a.faceIndex=Math.floor(_/3),t.push(a))}}}}function qk(i,e,t,n,a,r,o,l){let u;if(e.side===la?u=n.intersectTriangle(o,r,a,!0,l):u=n.intersectTriangle(a,r,o,e.side===au,l),u===null)return null;G1.copy(l),G1.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(G1);return d<t.near||d>t.far?null:{distance:d,point:G1.clone(),object:i}}function I1(i,e,t,n,a,r,o,l,u,d){i.getVertexPosition(l,U1),i.getVertexPosition(u,P1),i.getVertexPosition(d,O1);const f=qk(i,e,t,n,U1,P1,O1,N5);if(f){const m=new Q;Ur.getBarycoord(N5,U1,P1,O1,m),a&&(f.uv=Ur.getInterpolatedAttribute(a,l,u,d,m,new pt)),r&&(f.uv1=Ur.getInterpolatedAttribute(r,l,u,d,m,new pt)),o&&(f.normal=Ur.getInterpolatedAttribute(o,l,u,d,m,new Q),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const x={a:l,b:u,c:d,normal:new Q,materialIndex:0};Ur.getNormal(U1,P1,O1,x.normal),f.face=x,f.barycoord=m}return f}class nn extends Dn{constructor(e=1,t=1,n=1,a=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:a,heightSegments:r,depthSegments:o};const l=this;a=Math.floor(a),r=Math.floor(r),o=Math.floor(o);const u=[],d=[],f=[],m=[];let x=0,g=0;v("z","y","x",-1,-1,n,t,e,o,r,0),v("z","y","x",1,-1,n,t,-e,o,r,1),v("x","z","y",1,1,e,n,t,a,o,2),v("x","z","y",1,-1,e,n,-t,a,o,3),v("x","y","z",1,-1,e,t,n,a,r,4),v("x","y","z",-1,-1,e,t,-n,a,r,5),this.setIndex(u),this.setAttribute("position",new tn(d,3)),this.setAttribute("normal",new tn(f,3)),this.setAttribute("uv",new tn(m,2));function v(M,_,S,j,A,C,N,R,O,U,z){const I=C/O,V=N/U,F=C/2,q=N/2,W=R/2,ie=O+1,B=U+1;let J=0,$=0;const le=new Q;for(let re=0;re<B;re++){const H=re*V-q;for(let ee=0;ee<ie;ee++){const ue=ee*I-F;le[M]=ue*j,le[_]=H*A,le[S]=W,d.push(le.x,le.y,le.z),le[M]=0,le[_]=0,le[S]=R>0?1:-1,f.push(le.x,le.y,le.z),m.push(ee/O),m.push(1-re/U),J+=1}}for(let re=0;re<U;re++)for(let H=0;H<O;H++){const ee=x+H+ie*re,ue=x+H+ie*(re+1),me=x+(H+1)+ie*(re+1),be=x+(H+1)+ie*re;u.push(ee,ue,be),u.push(ue,me,be),$+=6}l.addGroup(g,$,z),g+=$,x+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function I0(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const a=i[t][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(qt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=a.clone():Array.isArray(a)?e[t][n]=a.slice():e[t][n]=a}}return e}function hr(i){const e={};for(let t=0;t<i.length;t++){const n=I0(i[t]);for(const a in n)e[a]=n[a]}return e}function Xk(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function eN(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ts.workingColorSpace}const lb={clone:I0,merge:hr};var Wk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Yk=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zi extends Xa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Wk,this.fragmentShader=Yk,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=I0(e.uniforms),this.uniformsGroups=Xk(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?t.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[a]={type:"m4",value:o.toArray()}:t.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class cb extends ls{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mn,this.projectionMatrix=new mn,this.projectionMatrixInverse=new mn,this.coordinateSystem=to,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ku=new Q,R5=new pt,D5=new pt;let ci=class extends cb{constructor(e=50,t=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=z0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Lf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return z0*2*Math.atan(Math.tan(Lf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Ku.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ku.x,Ku.y).multiplyScalar(-e/Ku.z),Ku.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ku.x,Ku.y).multiplyScalar(-e/Ku.z)}getViewSize(e,t){return this.getViewBounds(e,R5,D5),t.subVectors(D5,R5)}setViewOffset(e,t,n,a,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Lf*.5*this.fov)/this.zoom,n=2*t,a=this.aspect*n,r=-.5*a;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,d=o.fullHeight;r+=o.offsetX*a/u,t-=o.offsetY*n/d,a*=o.width/u,n*=o.height/d}const l=this.filmOffset;l!==0&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+a,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Qh=-90,$h=1;class tN extends ls{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ci(Qh,$h,e,t);a.layers=this.layers,this.add(a);const r=new ci(Qh,$h,e,t);r.layers=this.layers,this.add(r);const o=new ci(Qh,$h,e,t);o.layers=this.layers,this.add(o);const l=new ci(Qh,$h,e,t);l.layers=this.layers,this.add(l);const u=new ci(Qh,$h,e,t);u.layers=this.layers,this.add(u);const d=new ci(Qh,$h,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,a,r,o,l,u]=t;for(const d of t)this.remove(d);if(e===to)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===P0)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,l,u,d,f]=this.children,m=e.getRenderTarget(),x=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,a),e.render(t,r),e.setRenderTarget(n,1,a),e.render(t,o),e.setRenderTarget(n,2,a),e.render(t,l),e.setRenderTarget(n,3,a),e.render(t,u),e.setRenderTarget(n,4,a),e.render(t,d),n.texture.generateMipmaps=M,e.setRenderTarget(n,5,a),e.render(t,f),e.setRenderTarget(m,x,g),e.xr.enabled=v,n.texture.needsPMREMUpdate=!0}}class Zx extends Es{constructor(e=[],t=oc,n,a,r,o,l,u,d,f){super(e,t,n,a,r,o,l,u,d,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class s3 extends Ea{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},a=[n,n,n,n,n,n];this.texture=new Zx(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new nn(5,5,5),r=new Zi({name:"CubemapFromEquirect",uniforms:I0(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:la,blending:pl});r.uniforms.tEquirect.value=t;const o=new Bs(a,r),l=t.minFilter;return t.minFilter===tc&&(t.minFilter=ss),new tN(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,a=!0){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,a);e.setRenderTarget(r)}}class w0 extends ls{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zk={type:"move"};class Ov{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new w0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new w0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new w0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let a=null,r=null,o=null;const l=this._targetRay,u=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const M of e.hand.values()){const _=t.getJointPose(M,n),S=this._getHandJoint(d,M);_!==null&&(S.matrix.fromArray(_.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=_.radius),S.visible=_!==null}const f=d.joints["index-finger-tip"],m=d.joints["thumb-tip"],x=f.position.distanceTo(m.position),g=.02,v=.005;d.inputState.pinching&&x>g+v?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&x<=g-v&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(a=t.getPose(e.targetRaySpace,n),a===null&&r!==null&&(a=r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Zk)))}return l!==null&&(l.visible=a!==null),u!==null&&(u.visible=r!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new w0;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ub{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Lt(e),this.density=t}clone(){return new ub(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class db{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Lt(e),this.near=t,this.far=n}clone(){return new db(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Kx=class extends ls{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new is,this.environmentIntensity=1,this.environmentRotation=new is,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class fb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Tx,this.updateRanges=[],this.version=0,this.uuid=no()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let a=0,r=this.stride;a<r;a++)this.array[e+a]=t.array[n+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fr=new Q;class Of{constructor(e,t,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fr.fromBufferAttribute(this,t),fr.applyMatrix4(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fr.fromBufferAttribute(this,t),fr.applyNormalMatrix(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fr.fromBufferAttribute(this,t),fr.transformDirection(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=pr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Pn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=pr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=pr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=pr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=pr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),a=Pn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this}setXYZW(e,t,n,a,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),a=Pn(a,this.array),r=Pn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this.data.array[e+3]=r,this}clone(e){if(e===void 0){Cx("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return new Ds(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Of(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Cx("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class i3 extends Xa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let e0;const Ap=new Q,t0=new Q,n0=new Q,s0=new pt,Cp=new pt,nN=new mn,k1=new Q,Np=new Q,B1=new Q,L5=new pt,dM=new pt,U5=new pt;class sN extends ls{constructor(e=new i3){if(super(),this.isSprite=!0,this.type="Sprite",e0===void 0){e0=new Dn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new fb(t,5);e0.setIndex([0,1,2,0,2,3]),e0.setAttribute("position",new Of(n,3,0,!1)),e0.setAttribute("uv",new Of(n,2,3,!1))}this.geometry=e0,this.material=e,this.center=new pt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&wn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),t0.setFromMatrixScale(this.matrixWorld),nN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),n0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&t0.multiplyScalar(-n0.z);const n=this.material.rotation;let a,r;n!==0&&(r=Math.cos(n),a=Math.sin(n));const o=this.center;F1(k1.set(-.5,-.5,0),n0,o,t0,a,r),F1(Np.set(.5,-.5,0),n0,o,t0,a,r),F1(B1.set(.5,.5,0),n0,o,t0,a,r),L5.set(0,0),dM.set(1,0),U5.set(1,1);let l=e.ray.intersectTriangle(k1,Np,B1,!1,Ap);if(l===null&&(F1(Np.set(-.5,.5,0),n0,o,t0,a,r),dM.set(0,1),l=e.ray.intersectTriangle(k1,B1,Np,!1,Ap),l===null))return;const u=e.ray.origin.distanceTo(Ap);u<e.near||u>e.far||t.push({distance:u,point:Ap.clone(),uv:Ur.getInterpolation(Ap,k1,Np,B1,L5,dM,U5,new pt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function F1(i,e,t,n,a,r){s0.subVectors(i,t).addScalar(.5).multiply(n),a!==void 0?(Cp.x=r*s0.x-a*s0.y,Cp.y=a*s0.x+r*s0.y):Cp.copy(s0),i.copy(e),i.x+=Cp.x,i.y+=Cp.y,i.applyMatrix4(nN)}const V1=new Q,P5=new Q;class iN extends ls{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,a=t.length;n<a;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const a=this.levels;let r;for(r=0;r<a.length&&!(t<a[r].distance);r++);return a.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const a=t.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,a;for(n=1,a=t.length;n<a;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){V1.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(V1);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){V1.setFromMatrixPosition(e.matrixWorld),P5.setFromMatrixPosition(this.matrixWorld);const n=V1.distanceTo(P5)/e.zoom;t[0].object.visible=!0;let a,r;for(a=1,r=t.length;a<r;a++){let o=t[a].distance;if(t[a].object.visible&&(o-=o*t[a].hysteresis),n>=o)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<r;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let a=0,r=n.length;a<r;a++){const o=n[a];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const O5=new Q,z5=new ns,G5=new ns,Kk=new Q,I5=new mn,H1=new Q,fM=new Yi,k5=new mn,hM=new kf;class aN extends Bs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=OS,this.bindMatrix=new mn,this.bindMatrixInverse=new mn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new zi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,H1),this.boundingBox.expandByPoint(H1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Yi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,H1),this.boundingSphere.expandByPoint(H1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fM.copy(this.boundingSphere),fM.applyMatrix4(a),e.ray.intersectsSphere(fM)!==!1&&(k5.copy(a).invert(),hM.copy(e.ray).applyMatrix4(k5),!(this.boundingBox!==null&&hM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,hM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ns,t=this.geometry.attributes.skinWeight;for(let n=0,a=t.count;n<a;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===OS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===zC?this.bindMatrixInverse.copy(this.bindMatrix).invert():qt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,a=this.geometry;z5.fromBufferAttribute(a.attributes.skinIndex,e),G5.fromBufferAttribute(a.attributes.skinWeight,e),O5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=G5.getComponent(r);if(o!==0){const l=z5.getComponent(r);I5.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(Kk.copy(O5).applyMatrix4(I5),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class a3 extends ls{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lo extends Es{constructor(e=null,t=1,n=1,a,r,o,l,u,d=Wi,f=Wi,m,x){super(null,o,l,u,d,f,a,r,m,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const B5=new mn,Jk=new mn;class hb{constructor(e=[],t=[]){this.uuid=no(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){qt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new mn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new mn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const l=e[r]?e[r].matrixWorld:Jk;B5.multiplyMatrices(l,t[r]),B5.toArray(n,r*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new hb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Lo(t,e,e,Ai,ti);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,a=e.bones.length;n<a;n++){const r=e.bones[n];let o=t[r];o===void 0&&(qt("Skeleton: No bone found with UUID:",r),o=new a3),this.bones.push(o),this.boneInverses.push(new mn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let a=0,r=t.length;a<r;a++){const o=t[a];e.bones.push(o.uuid);const l=n[a];e.boneInverses.push(l.toArray())}return e}}class zf extends Ds{constructor(e,t,n,a=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const i0=new mn,F5=new mn,q1=[],V5=new zi,Qk=new mn,Rp=new Bs,Dp=new Yi;class rN extends Bs{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zf(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,Qk)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new zi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,i0),V5.copy(e.boundingBox).applyMatrix4(i0),this.boundingBox.union(V5)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Yi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,i0),Dp.copy(e.boundingSphere).applyMatrix4(i0),this.boundingSphere.union(Dp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,a=this.morphTexture.source.data.data,r=n.length+1,o=e*r+1;for(let l=0;l<n.length;l++)n[l]=a[o+l]}raycast(e,t){const n=this.matrixWorld,a=this.count;if(Rp.geometry=this.geometry,Rp.material=this.material,Rp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Dp.copy(this.boundingSphere),Dp.applyMatrix4(n),e.ray.intersectsSphere(Dp)!==!1))for(let r=0;r<a;r++){this.getMatrixAt(r,i0),F5.multiplyMatrices(n,i0),Rp.matrixWorld=F5,Rp.raycast(e,q1);for(let o=0,l=q1.length;o<l;o++){const u=q1[o];u.instanceId=r,u.object=this,t.push(u)}q1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new zf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Lo(new Float32Array(a*this.count),a,this.count,Wx,ti));const r=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const l=this.geometry.morphTargetsRelative?1:1-o,u=a*e;r[u]=l,r.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const mM=new Q,$k=new Q,eB=new Tn;class $l{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,a){return this.normal.set(e,t,n),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const a=mM.subVectors(n,t).cross($k.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(mM),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/a;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||eB.getNormalMatrix(e),a=this.coplanarPoint(mM).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const af=new Yi,tB=new pt(.5,.5),X1=new Q;class J0{constructor(e=new $l,t=new $l,n=new $l,a=new $l,r=new $l,o=new $l){this.planes=[e,t,n,a,r,o]}set(e,t,n,a,r,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(a),l[4].copy(r),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=to,n=!1){const a=this.planes,r=e.elements,o=r[0],l=r[1],u=r[2],d=r[3],f=r[4],m=r[5],x=r[6],g=r[7],v=r[8],M=r[9],_=r[10],S=r[11],j=r[12],A=r[13],C=r[14],N=r[15];if(a[0].setComponents(d-o,g-f,S-v,N-j).normalize(),a[1].setComponents(d+o,g+f,S+v,N+j).normalize(),a[2].setComponents(d+l,g+m,S+M,N+A).normalize(),a[3].setComponents(d-l,g-m,S-M,N-A).normalize(),n)a[4].setComponents(u,x,_,C).normalize(),a[5].setComponents(d-u,g-x,S-_,N-C).normalize();else if(a[4].setComponents(d-u,g-x,S-_,N-C).normalize(),t===to)a[5].setComponents(d+u,g+x,S+_,N+C).normalize();else if(t===P0)a[5].setComponents(u,x,_,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),af.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),af.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(af)}intersectsSprite(e){af.center.set(0,0,0);const t=tB.distanceTo(e.center);return af.radius=.7071067811865476+t,af.applyMatrix4(e.matrixWorld),this.intersectsSphere(af)}intersectsSphere(e){const t=this.planes,n=e.center,a=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const a=t[n];if(X1.x=a.normal.x>0?e.max.x:e.min.x,X1.y=a.normal.y>0?e.max.y:e.min.y,X1.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(X1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Jl=new mn,Ql=new J0;class mb{constructor(){this.coordinateSystem=to}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Jl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ql.setFromProjectionMatrix(Jl,a.coordinateSystem,a.reversedDepth),Ql.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Jl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ql.setFromProjectionMatrix(Jl,a.coordinateSystem,a.reversedDepth),Ql.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Jl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ql.setFromProjectionMatrix(Jl,a.coordinateSystem,a.reversedDepth),Ql.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Jl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ql.setFromProjectionMatrix(Jl,a.coordinateSystem,a.reversedDepth),Ql.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Jl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ql.setFromProjectionMatrix(Jl,a.coordinateSystem,a.reversedDepth),Ql.containsPoint(e))return!0}return!1}clone(){return new mb}}function pM(i,e){return i-e}function nB(i,e){return i.z-e.z}function sB(i,e){return e.z-i.z}class iB{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,a){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const l=r[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=a}reset(){this.list.length=0,this.index=0}}const Dr=new mn,aB=new Lt(1,1,1),H5=new J0,rB=new mb,W1=new zi,rf=new Yi,Lp=new Q,q5=new Q,oB=new Q,xM=new iB,Va=new Bs,Y1=[];function lB(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const a=i.count;for(let r=0;r<a;r++)for(let o=0;o<n;o++)e.setComponent(r+t,o,i.getComponent(r,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function of(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class oN extends Bs{constructor(e,t,n=t*2,a){super(new Dn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Lo(t,e,e,Ai,ti);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Lo(t,e,e,Yx,lc);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Lo(t,e,e,Ai,ti);n.colorSpace=ts.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const o=e.getAttribute(r),{array:l,itemSize:u,normalized:d}=o,f=new l.constructor(n*u),m=new Ds(f,u,d);t.setAttribute(r,m)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Ds(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=e.getAttribute(n),r=t.getAttribute(n);if(a.itemSize!==r.itemSize||a.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zi);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Dr),this.getBoundingBoxAt(r,W1).applyMatrix4(Dr),e.union(W1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Dr),this.getBoundingSphereAt(r,rf).applyMatrix4(Dr),e.union(rf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(pM),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Dr.identity().toArray(r.image.data,a*16),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(aB.toArray(o.image.data,a*4),o.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?o.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(pM),u=this._availableGeometryIds.shift(),r[u]=a):(u=this._geometryCount,this._geometryCount++,r.push(a)),this.setGeometryAt(u,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,a=n.getIndex()!==null,r=n.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(a&&o.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,d=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const f in n.attributes){const m=t.getAttribute(f),x=n.getAttribute(f);lB(m,x,u);const g=m.itemSize;for(let v=m.count,M=d;v<M;v++){const _=u+v;for(let S=0;S<g;S++)x.setComponent(_,S,0)}x.needsUpdate=!0,x.addUpdateRange(u*g,d*g)}if(a){const f=l.indexStart,m=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let x=0;x<o.count;x++)r.setX(f+x,u+o.getX(x));for(let x=o.count,g=m;x<g;x++)r.setX(f+x,u);r.needsUpdate=!0,r.addUpdateRange(f,l.reservedIndexCount)}return l.start=a?l.indexStart:l.vertexStart,l.count=a?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let a=0,r=n.length;a<r;a++)n[a].active&&n[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,a=n.map((o,l)=>l).sort((o,l)=>n[o].vertexStart-n[l].vertexStart),r=this.geometry;for(let o=0,l=n.length;o<l;o++){const u=a[o],d=n[u];if(d.active!==!1){if(r.index!==null){if(d.indexStart!==t){const{indexStart:f,vertexStart:m,reservedIndexCount:x}=d,g=r.index,v=g.array,M=e-m;for(let _=f;_<f+x;_++)v[_]=v[_]+M;g.array.copyWithin(t,f,f+x),g.addUpdateRange(t,x),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:f,reservedVertexCount:m}=d,x=r.attributes;for(const g in x){const v=x[g],{array:M,itemSize:_}=v;M.copyWithin(e*_,f*_,(f+m)*_),v.addUpdateRange(e*_,m*_)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=r.index?d.indexStart:d.vertexStart,this._nextIndexStart=r.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const r=new zi,o=n.index,l=n.attributes.position;for(let u=a.start,d=a.start+a.count;u<d;u++){let f=u;o&&(f=o.getX(f)),r.expandByPoint(Lp.fromBufferAttribute(l,f))}a.boundingBox=r}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const r=new Yi;this.getBoundingBoxAt(e,W1),W1.getCenter(r.center);const o=n.index,l=n.attributes.position;let u=0;for(let d=a.start,f=a.start+a.count;d<f;d++){let m=d;o&&(m=o.getX(m)),Lp.fromBufferAttribute(l,m),u=Math.max(u,r.center.distanceToSquared(Lp))}r.radius=Math.sqrt(u),a.boundingSphere=r}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(pM);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),r=new Int32Array(e);of(this._multiDrawCounts,a),of(this._multiDrawStarts,r),this._multiDrawCounts=a,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),of(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),of(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),of(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Dn,this._initializeGeometry(r));const o=this.geometry;r.index&&of(r.index.array,o.index.array);for(const l in r.attributes)of(r.attributes[l].array,o.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,a=this._geometryInfo,r=this.matrixWorld,o=this.geometry;Va.material=this.material,Va.geometry.index=o.index,Va.geometry.attributes=o.attributes,Va.geometry.boundingBox===null&&(Va.geometry.boundingBox=new zi),Va.geometry.boundingSphere===null&&(Va.geometry.boundingSphere=new Yi);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const d=n[l].geometryIndex,f=a[d];Va.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(l,Va.matrixWorld).premultiply(r),this.getBoundingBoxAt(d,Va.geometry.boundingBox),this.getBoundingSphereAt(d,Va.geometry.boundingSphere),Va.raycast(e,Y1);for(let m=0,x=Y1.length;m<x;m++){const g=Y1[m];g.object=this,g.batchId=l,t.push(g)}Y1.length=0}Va.material=null,Va.geometry.index=null,Va.geometry.attributes={},Va.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,a,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=a.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,d=this._multiDrawStarts,f=this._multiDrawCounts,m=this._geometryInfo,x=this.perObjectFrustumCulled,g=this._indirectTexture,v=g.image.data,M=n.isArrayCamera?rB:H5;x&&!n.isArrayCamera&&(Dr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),H5.setFromProjectionMatrix(Dr,n.coordinateSystem,n.reversedDepth));let _=0;if(this.sortObjects){Dr.copy(this.matrixWorld).invert(),Lp.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Dr),q5.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Dr);for(let A=0,C=u.length;A<C;A++)if(u[A].visible&&u[A].active){const N=u[A].geometryIndex;this.getMatrixAt(A,Dr),this.getBoundingSphereAt(N,rf).applyMatrix4(Dr);let R=!1;if(x&&(R=!M.intersectsSphere(rf,n)),!R){const O=m[N],U=oB.subVectors(rf.center,Lp).dot(q5);xM.push(O.start,O.count,U,A)}}const S=xM.list,j=this.customSort;j===null?S.sort(r.transparent?sB:nB):j.call(this,S,n);for(let A=0,C=S.length;A<C;A++){const N=S[A];d[_]=N.start*l,f[_]=N.count,v[_]=N.index,_++}xM.reset()}else for(let S=0,j=u.length;S<j;S++)if(u[S].visible&&u[S].active){const A=u[S].geometryIndex;let C=!1;if(x&&(this.getMatrixAt(S,Dr),this.getBoundingSphereAt(A,rf).applyMatrix4(Dr),C=!M.intersectsSphere(rf,n)),!C){const N=m[A];d[_]=N.start*l,f[_]=N.count,v[_]=S,_++}}g.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,n,a,r,o){this.onBeforeRender(e,null,a,r,o)}}class vr extends Xa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Dy=new Q,Ly=new Q,X5=new mn,Up=new kf,Z1=new Yi,gM=new Q,W5=new Q;class cd extends ls{constructor(e=new Dn,t=new vr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let a=1,r=t.count;a<r;a++)Dy.fromBufferAttribute(t,a-1),Ly.fromBufferAttribute(t,a),n[a]=n[a-1],n[a]+=Dy.distanceTo(Ly);e.setAttribute("lineDistance",new tn(n,1))}else qt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Z1.copy(n.boundingSphere),Z1.applyMatrix4(a),Z1.radius+=r,e.ray.intersectsSphere(Z1)===!1)return;X5.copy(a).invert(),Up.copy(e.ray).applyMatrix4(X5);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=this.isLineSegments?2:1,f=n.index,x=n.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let M=g,_=v-1;M<_;M+=d){const S=f.getX(M),j=f.getX(M+1),A=K1(this,e,Up,u,S,j,M);A&&t.push(A)}if(this.isLineLoop){const M=f.getX(v-1),_=f.getX(g),S=K1(this,e,Up,u,M,_,v-1);S&&t.push(S)}}else{const g=Math.max(0,o.start),v=Math.min(x.count,o.start+o.count);for(let M=g,_=v-1;M<_;M+=d){const S=K1(this,e,Up,u,M,M+1,M);S&&t.push(S)}if(this.isLineLoop){const M=K1(this,e,Up,u,v-1,g,v-1);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=a.length;r<o;r++){const l=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function K1(i,e,t,n,a,r,o){const l=i.geometry.attributes.position;if(Dy.fromBufferAttribute(l,a),Ly.fromBufferAttribute(l,r),t.distanceSqToSegment(Dy,Ly,gM,W5)>n)return;gM.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(gM);if(!(d<e.near||d>e.far))return{distance:d,point:W5.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const Y5=new Q,Z5=new Q;class uc extends cd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let a=0,r=t.count;a<r;a+=2)Y5.fromBufferAttribute(t,a),Z5.fromBufferAttribute(t,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+Y5.distanceTo(Z5);e.setAttribute("lineDistance",new tn(n,1))}else qt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lN extends cd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class r3 extends Xa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const K5=new mn,kS=new kf,J1=new Yi,Q1=new Q;class cN extends ls{constructor(e=new Dn,t=new r3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),J1.copy(n.boundingSphere),J1.applyMatrix4(a),J1.radius+=r,e.ray.intersectsSphere(J1)===!1)return;K5.copy(a).invert(),kS.copy(e.ray).applyMatrix4(K5);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=n.index,m=n.attributes.position;if(d!==null){const x=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=x,M=g;v<M;v++){const _=d.getX(v);Q1.fromBufferAttribute(m,_),J5(Q1,_,u,a,e,t,this)}}else{const x=Math.max(0,o.start),g=Math.min(m.count,o.start+o.count);for(let v=x,M=g;v<M;v++)Q1.fromBufferAttribute(m,v),J5(Q1,v,u,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=a.length;r<o;r++){const l=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function J5(i,e,t,n,a,r,o){const l=kS.distanceSqToPoint(i);if(l<t){const u=new Q;kS.closestPointToPoint(i,u),u.applyMatrix4(n);const d=a.ray.origin.distanceTo(u);if(d<a.near||d>a.far)return;r.push({distance:d,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class uN extends Es{constructor(e,t,n,a,r=ss,o=ss,l,u,d){super(e,t,n,a,r,o,l,u,d),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const f=this;function m(){f.needsUpdate=!0,f._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class cB extends uN{constructor(e,t,n,a,r,o,l,u){super({},e,t,n,a,r,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class uB extends Es{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Wi,this.minFilter=Wi,this.generateMipmaps=!1,this.needsUpdate=!0}}class pb extends Es{constructor(e,t,n,a,r,o,l,u,d,f,m,x){super(null,o,l,u,d,f,a,r,m,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class dB extends pb{constructor(e,t,n,a,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=bi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class fB extends pb{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,oc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bf extends Es{constructor(e,t,n,a,r,o,l,u,d){super(e,t,n,a,r,o,l,u,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xb extends Es{constructor(e,t,n=lc,a,r,o,l=Wi,u=Wi,d,f=L0,m=1){if(f!==L0&&f!==U0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:t,depth:m};super(x,a,r,o,l,u,f,n,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new td(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class o3 extends Es{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class gb extends Dn{constructor(e=1,t=1,n=4,a=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:a,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),r=Math.max(1,Math.floor(r));const o=[],l=[],u=[],d=[],f=t/2,m=Math.PI/2*e,x=t,g=2*m+x,v=n*2+r,M=a+1,_=new Q,S=new Q;for(let j=0;j<=v;j++){let A=0,C=0,N=0,R=0;if(j<=n){const z=j/n,I=z*Math.PI/2;C=-f-e*Math.cos(I),N=e*Math.sin(I),R=-e*Math.cos(I),A=z*m}else if(j<=n+r){const z=(j-n)/r;C=-f+z*t,N=e,R=0,A=m+z*x}else{const z=(j-n-r)/n,I=z*Math.PI/2;C=f+e*Math.sin(I),N=e*Math.cos(I),R=e*Math.sin(I),A=m+x+z*m}const O=Math.max(0,Math.min(1,A/g));let U=0;j===0?U=.5/a:j===v&&(U=-.5/a);for(let z=0;z<=a;z++){const I=z/a,V=I*Math.PI*2,F=Math.sin(V),q=Math.cos(V);S.x=-N*q,S.y=C,S.z=N*F,l.push(S.x,S.y,S.z),_.set(-N*q,R,N*F),_.normalize(),u.push(_.x,_.y,_.z),d.push(I+U,O)}if(j>0){const z=(j-1)*M;for(let I=0;I<a;I++){const V=z+I,F=z+I+1,q=j*M+I,W=j*M+I+1;o.push(V,F,q),o.push(F,W,q)}}}this.setIndex(o),this.setAttribute("position",new tn(l,3)),this.setAttribute("normal",new tn(u,3)),this.setAttribute("uv",new tn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class vb extends Dn{constructor(e=1,t=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:a},t=Math.max(3,t);const r=[],o=[],l=[],u=[],d=new Q,f=new pt;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let m=0,x=3;m<=t;m++,x+=3){const g=n+m/t*a;d.x=e*Math.cos(g),d.y=e*Math.sin(g),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(o[x]/e+1)/2,f.y=(o[x+1]/e+1)/2,u.push(f.x,f.y)}for(let m=1;m<=t;m++)r.push(m,m+1,0);this.setIndex(r),this.setAttribute("position",new tn(o,3)),this.setAttribute("normal",new tn(l,3)),this.setAttribute("uv",new tn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Q0 extends Dn{constructor(e=1,t=1,n=1,a=32,r=1,o=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:a,heightSegments:r,openEnded:o,thetaStart:l,thetaLength:u};const d=this;a=Math.floor(a),r=Math.floor(r);const f=[],m=[],x=[],g=[];let v=0;const M=[],_=n/2;let S=0;j(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(f),this.setAttribute("position",new tn(m,3)),this.setAttribute("normal",new tn(x,3)),this.setAttribute("uv",new tn(g,2));function j(){const C=new Q,N=new Q;let R=0;const O=(t-e)/n;for(let U=0;U<=r;U++){const z=[],I=U/r,V=I*(t-e)+e;for(let F=0;F<=a;F++){const q=F/a,W=q*u+l,ie=Math.sin(W),B=Math.cos(W);N.x=V*ie,N.y=-I*n+_,N.z=V*B,m.push(N.x,N.y,N.z),C.set(ie,O,B).normalize(),x.push(C.x,C.y,C.z),g.push(q,1-I),z.push(v++)}M.push(z)}for(let U=0;U<a;U++)for(let z=0;z<r;z++){const I=M[z][U],V=M[z+1][U],F=M[z+1][U+1],q=M[z][U+1];(e>0||z!==0)&&(f.push(I,V,q),R+=3),(t>0||z!==r-1)&&(f.push(V,F,q),R+=3)}d.addGroup(S,R,0),S+=R}function A(C){const N=v,R=new pt,O=new Q;let U=0;const z=C===!0?e:t,I=C===!0?1:-1;for(let F=1;F<=a;F++)m.push(0,_*I,0),x.push(0,I,0),g.push(.5,.5),v++;const V=v;for(let F=0;F<=a;F++){const W=F/a*u+l,ie=Math.cos(W),B=Math.sin(W);O.x=z*B,O.y=_*I,O.z=z*ie,m.push(O.x,O.y,O.z),x.push(0,I,0),R.x=ie*.5+.5,R.y=B*.5*I+.5,g.push(R.x,R.y),v++}for(let F=0;F<a;F++){const q=N+F,W=V+F;C===!0?f.push(W,W+1,q):f.push(W+1,W,q),U+=3}d.addGroup(S,U,C===!0?1:2),S+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jx extends Q0{constructor(e=1,t=1,n=32,a=1,r=!1,o=0,l=Math.PI*2){super(0,e,t,n,a,r,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:a,openEnded:r,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Jx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hd extends Dn{constructor(e=[],t=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:a};const r=[],o=[];l(a),d(n),f(),this.setAttribute("position",new tn(r,3)),this.setAttribute("normal",new tn(r.slice(),3)),this.setAttribute("uv",new tn(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function l(j){const A=new Q,C=new Q,N=new Q;for(let R=0;R<t.length;R+=3)g(t[R+0],A),g(t[R+1],C),g(t[R+2],N),u(A,C,N,j)}function u(j,A,C,N){const R=N+1,O=[];for(let U=0;U<=R;U++){O[U]=[];const z=j.clone().lerp(C,U/R),I=A.clone().lerp(C,U/R),V=R-U;for(let F=0;F<=V;F++)F===0&&U===R?O[U][F]=z:O[U][F]=z.clone().lerp(I,F/V)}for(let U=0;U<R;U++)for(let z=0;z<2*(R-U)-1;z++){const I=Math.floor(z/2);z%2===0?(x(O[U][I+1]),x(O[U+1][I]),x(O[U][I])):(x(O[U][I+1]),x(O[U+1][I+1]),x(O[U+1][I]))}}function d(j){const A=new Q;for(let C=0;C<r.length;C+=3)A.x=r[C+0],A.y=r[C+1],A.z=r[C+2],A.normalize().multiplyScalar(j),r[C+0]=A.x,r[C+1]=A.y,r[C+2]=A.z}function f(){const j=new Q;for(let A=0;A<r.length;A+=3){j.x=r[A+0],j.y=r[A+1],j.z=r[A+2];const C=_(j)/2/Math.PI+.5,N=S(j)/Math.PI+.5;o.push(C,1-N)}v(),m()}function m(){for(let j=0;j<o.length;j+=6){const A=o[j+0],C=o[j+2],N=o[j+4],R=Math.max(A,C,N),O=Math.min(A,C,N);R>.9&&O<.1&&(A<.2&&(o[j+0]+=1),C<.2&&(o[j+2]+=1),N<.2&&(o[j+4]+=1))}}function x(j){r.push(j.x,j.y,j.z)}function g(j,A){const C=j*3;A.x=e[C+0],A.y=e[C+1],A.z=e[C+2]}function v(){const j=new Q,A=new Q,C=new Q,N=new Q,R=new pt,O=new pt,U=new pt;for(let z=0,I=0;z<r.length;z+=9,I+=6){j.set(r[z+0],r[z+1],r[z+2]),A.set(r[z+3],r[z+4],r[z+5]),C.set(r[z+6],r[z+7],r[z+8]),R.set(o[I+0],o[I+1]),O.set(o[I+2],o[I+3]),U.set(o[I+4],o[I+5]),N.copy(j).add(A).add(C).divideScalar(3);const V=_(N);M(R,I+0,j,V),M(O,I+2,A,V),M(U,I+4,C,V)}}function M(j,A,C,N){N<0&&j.x===1&&(o[A]=j.x-1),C.x===0&&C.z===0&&(o[A]=N/2/Math.PI+.5)}function _(j){return Math.atan2(j.z,-j.x)}function S(j){return Math.atan2(-j.y,Math.sqrt(j.x*j.x+j.z*j.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hd(e.vertices,e.indices,e.radius,e.details)}}class yb extends hd{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yb(e.radius,e.detail)}}const $1=new Q,ev=new Q,vM=new Q,tv=new Ur;class dN extends Dn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),r=Math.cos(Lf*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,d=[0,0,0],f=["a","b","c"],m=new Array(3),x={},g=[];for(let v=0;v<u;v+=3){o?(d[0]=o.getX(v),d[1]=o.getX(v+1),d[2]=o.getX(v+2)):(d[0]=v,d[1]=v+1,d[2]=v+2);const{a:M,b:_,c:S}=tv;if(M.fromBufferAttribute(l,d[0]),_.fromBufferAttribute(l,d[1]),S.fromBufferAttribute(l,d[2]),tv.getNormal(vM),m[0]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,m[1]=`${Math.round(_.x*a)},${Math.round(_.y*a)},${Math.round(_.z*a)}`,m[2]=`${Math.round(S.x*a)},${Math.round(S.y*a)},${Math.round(S.z*a)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let j=0;j<3;j++){const A=(j+1)%3,C=m[j],N=m[A],R=tv[f[j]],O=tv[f[A]],U=`${C}_${N}`,z=`${N}_${C}`;z in x&&x[z]?(vM.dot(x[z].normal)<=r&&(g.push(R.x,R.y,R.z),g.push(O.x,O.y,O.z)),x[z]=null):U in x||(x[U]={index0:d[j],index1:d[A],normal:vM.clone()})}}for(const v in x)if(x[v]){const{index0:M,index1:_}=x[v];$1.fromBufferAttribute(l,M),ev.fromBufferAttribute(l,_),g.push($1.x,$1.y,$1.z),g.push(ev.x,ev.y,ev.z)}this.setAttribute("position",new tn(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class yl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){qt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,a=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(a),t.push(r),a=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let a=0;const r=n.length;let o;t?o=t:o=e*n[r-1];let l=0,u=r-1,d;for(;l<=u;)if(a=Math.floor(l+(u-l)/2),d=n[a]-o,d<0)l=a+1;else if(d>0)u=a-1;else{u=a;break}if(a=u,n[a]===o)return a/(r-1);const f=n[a],x=n[a+1]-f,g=(o-f)/x;return(a+g)/(r-1)}getTangent(e,t){let a=e-1e-4,r=e+1e-4;a<0&&(a=0),r>1&&(r=1);const o=this.getPoint(a),l=this.getPoint(r),u=t||(o.isVector2?new pt:new Q);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Q,a=[],r=[],o=[],l=new Q,u=new mn;for(let g=0;g<=e;g++){const v=g/e;a[g]=this.getTangentAt(v,new Q)}r[0]=new Q,o[0]=new Q;let d=Number.MAX_VALUE;const f=Math.abs(a[0].x),m=Math.abs(a[0].y),x=Math.abs(a[0].z);f<=d&&(d=f,n.set(1,0,0)),m<=d&&(d=m,n.set(0,1,0)),x<=d&&n.set(0,0,1),l.crossVectors(a[0],n).normalize(),r[0].crossVectors(a[0],l),o[0].crossVectors(a[0],r[0]);for(let g=1;g<=e;g++){if(r[g]=r[g-1].clone(),o[g]=o[g-1].clone(),l.crossVectors(a[g-1],a[g]),l.length()>Number.EPSILON){l.normalize();const v=Math.acos(bn(a[g-1].dot(a[g]),-1,1));r[g].applyMatrix4(u.makeRotationAxis(l,v))}o[g].crossVectors(a[g],r[g])}if(t===!0){let g=Math.acos(bn(r[0].dot(r[e]),-1,1));g/=e,a[0].dot(l.crossVectors(r[0],r[e]))>0&&(g=-g);for(let v=1;v<=e;v++)r[v].applyMatrix4(u.makeRotationAxis(a[v],g*v)),o[v].crossVectors(a[v],r[v])}return{tangents:a,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bb extends yl{constructor(e=0,t=0,n=1,a=1,r=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=a,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new pt){const n=t,a=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=a;for(;r>a;)r-=a;r<Number.EPSILON&&(o?r=0:r=a),this.aClockwise===!0&&!o&&(r===a?r=-a:r=r-a);const l=this.aStartAngle+e*r;let u=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),m=Math.sin(this.aRotation),x=u-this.aX,g=d-this.aY;u=x*f-g*m+this.aX,d=x*m+g*f+this.aY}return n.set(u,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fN extends bb{constructor(e,t,n,a,r,o){super(e,t,n,n,a,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function l3(){let i=0,e=0,t=0,n=0;function a(r,o,l,u){i=r,e=l,t=-3*r+3*o-2*l-u,n=2*r-2*o+l+u}return{initCatmullRom:function(r,o,l,u,d){a(o,l,d*(l-r),d*(u-o))},initNonuniformCatmullRom:function(r,o,l,u,d,f,m){let x=(o-r)/d-(l-r)/(d+f)+(l-o)/f,g=(l-o)/f-(u-o)/(f+m)+(u-l)/m;x*=f,g*=f,a(o,l,x,g)},calc:function(r){const o=r*r,l=o*r;return i+e*r+t*o+n*l}}}const nv=new Q,yM=new l3,bM=new l3,MM=new l3;class md extends yl{constructor(e=[],t=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=a}getPoint(e,t=new Q){const n=t,a=this.points,r=a.length,o=(r-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:u===0&&l===r-1&&(l=r-2,u=1);let d,f;this.closed||l>0?d=a[(l-1)%r]:(nv.subVectors(a[0],a[1]).add(a[0]),d=nv);const m=a[l%r],x=a[(l+1)%r];if(this.closed||l+2<r?f=a[(l+2)%r]:(nv.subVectors(a[r-1],a[r-2]).add(a[r-1]),f=nv),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(d.distanceToSquared(m),g),M=Math.pow(m.distanceToSquared(x),g),_=Math.pow(x.distanceToSquared(f),g);M<1e-4&&(M=1),v<1e-4&&(v=M),_<1e-4&&(_=M),yM.initNonuniformCatmullRom(d.x,m.x,x.x,f.x,v,M,_),bM.initNonuniformCatmullRom(d.y,m.y,x.y,f.y,v,M,_),MM.initNonuniformCatmullRom(d.z,m.z,x.z,f.z,v,M,_)}else this.curveType==="catmullrom"&&(yM.initCatmullRom(d.x,m.x,x.x,f.x,this.tension),bM.initCatmullRom(d.y,m.y,x.y,f.y,this.tension),MM.initCatmullRom(d.z,m.z,x.z,f.z,this.tension));return n.set(yM.calc(u),bM.calc(u),MM.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new Q().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Q5(i,e,t,n,a){const r=(n-e)*.5,o=(a-t)*.5,l=i*i,u=i*l;return(2*t-2*n+r+o)*u+(-3*t+3*n-2*r-o)*l+r*i+t}function hB(i,e){const t=1-i;return t*t*e}function mB(i,e){return 2*(1-i)*i*e}function pB(i,e){return i*i*e}function lx(i,e,t,n){return hB(i,e)+mB(i,t)+pB(i,n)}function xB(i,e){const t=1-i;return t*t*t*e}function gB(i,e){const t=1-i;return 3*t*t*i*e}function vB(i,e){return 3*(1-i)*i*i*e}function yB(i,e){return i*i*i*e}function cx(i,e,t,n,a){return xB(i,e)+gB(i,t)+vB(i,n)+yB(i,a)}class c3 extends yl{constructor(e=new pt,t=new pt,n=new pt,a=new pt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new pt){const n=t,a=this.v0,r=this.v1,o=this.v2,l=this.v3;return n.set(cx(e,a.x,r.x,o.x,l.x),cx(e,a.y,r.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hN extends yl{constructor(e=new Q,t=new Q,n=new Q,a=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new Q){const n=t,a=this.v0,r=this.v1,o=this.v2,l=this.v3;return n.set(cx(e,a.x,r.x,o.x,l.x),cx(e,a.y,r.y,o.y,l.y),cx(e,a.z,r.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class u3 extends yl{constructor(e=new pt,t=new pt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mN extends yl{constructor(e=new Q,t=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Q){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d3 extends yl{constructor(e=new pt,t=new pt,n=new pt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new pt){const n=t,a=this.v0,r=this.v1,o=this.v2;return n.set(lx(e,a.x,r.x,o.x),lx(e,a.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f3 extends yl{constructor(e=new Q,t=new Q,n=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Q){const n=t,a=this.v0,r=this.v1,o=this.v2;return n.set(lx(e,a.x,r.x,o.x),lx(e,a.y,r.y,o.y),lx(e,a.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class h3 extends yl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pt){const n=t,a=this.points,r=(a.length-1)*e,o=Math.floor(r),l=r-o,u=a[o===0?o:o-1],d=a[o],f=a[o>a.length-2?a.length-1:o+1],m=a[o>a.length-3?a.length-1:o+2];return n.set(Q5(l,u.x,d.x,f.x,m.x),Q5(l,u.y,d.y,f.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new pt().fromArray(a))}return this}}var Uy=Object.freeze({__proto__:null,ArcCurve:fN,CatmullRomCurve3:md,CubicBezierCurve:c3,CubicBezierCurve3:hN,EllipseCurve:bb,LineCurve:u3,LineCurve3:mN,QuadraticBezierCurve:d3,QuadraticBezierCurve3:f3,SplineCurve:h3});class pN extends yl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Uy[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),a=this.getCurveLengths();let r=0;for(;r<a.length;){if(a[r]>=n){const o=a[r]-n,l=this.curves[r],u=l.getLength(),d=u===0?0:1-o/u;return l.getPointAt(d,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,a=this.curves.length;n<a;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let a=0,r=this.curves;a<r.length;a++){const o=r[a],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let d=0;d<u.length;d++){const f=u[d];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(new Uy[a.type]().fromJSON(a))}return this}}class Py extends pN{constructor(e){super(),this.type="Path",this.currentPoint=new pt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new u3(this.currentPoint.clone(),new pt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,a){const r=new d3(this.currentPoint.clone(),new pt(e,t),new pt(n,a));return this.curves.push(r),this.currentPoint.set(n,a),this}bezierCurveTo(e,t,n,a,r,o){const l=new c3(this.currentPoint.clone(),new pt(e,t),new pt(n,a),new pt(r,o));return this.curves.push(l),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new h3(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,a,r,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,n,a,r,o),this}absarc(e,t,n,a,r,o){return this.absellipse(e,t,n,n,a,r,o),this}ellipse(e,t,n,a,r,o,l,u){const d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+d,t+f,n,a,r,o,l,u),this}absellipse(e,t,n,a,r,o,l,u){const d=new bb(e,t,n,a,r,o,l,u);if(this.curves.length>0){const m=d.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(d);const f=d.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class rc extends Py{constructor(e){super(e),this.uuid=no(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,a=this.holes.length;n<a;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(new Py().fromJSON(a))}return this}}function bB(i,e,t=2){const n=e&&e.length,a=n?e[0]*t:i.length;let r=xN(i,0,a,t,!0);const o=[];if(!r||r.next===r.prev)return o;let l,u,d;if(n&&(r=jB(i,e,r,t)),i.length>80*t){l=i[0],u=i[1];let f=l,m=u;for(let x=t;x<a;x+=t){const g=i[x],v=i[x+1];g<l&&(l=g),v<u&&(u=v),g>f&&(f=g),v>m&&(m=v)}d=Math.max(f-l,m-u),d=d!==0?32767/d:0}return Nx(r,o,t,l,u,d,0),o}function xN(i,e,t,n,a){let r;if(a===OB(i,e,t,n)>0)for(let o=e;o<t;o+=n)r=$5(o/n|0,i[o],i[o+1],r);else for(let o=t-n;o>=e;o-=n)r=$5(o/n|0,i[o],i[o+1],r);return r&&k0(r,r.next)&&(Dx(r),r=r.next),r}function Gf(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(k0(t,t.next)||di(t.prev,t,t.next)===0)){if(Dx(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Nx(i,e,t,n,a,r,o){if(!i)return;!o&&r&&NB(i,n,a,r);let l=i;for(;i.prev!==i.next;){const u=i.prev,d=i.next;if(r?SB(i,n,a,r):MB(i)){e.push(u.i,i.i,d.i),Dx(i),i=d.next,l=d.next;continue}if(i=d,i===l){o?o===1?(i=_B(Gf(i),e),Nx(i,e,t,n,a,r,2)):o===2&&wB(i,e,t,n,a,r):Nx(Gf(i),e,t,n,a,r,1);break}}}function MB(i){const e=i.prev,t=i,n=i.next;if(di(e,t,n)>=0)return!1;const a=e.x,r=t.x,o=n.x,l=e.y,u=t.y,d=n.y,f=Math.min(a,r,o),m=Math.min(l,u,d),x=Math.max(a,r,o),g=Math.max(l,u,d);let v=n.next;for(;v!==e;){if(v.x>=f&&v.x<=x&&v.y>=m&&v.y<=g&&Xp(a,l,r,u,o,d,v.x,v.y)&&di(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function SB(i,e,t,n){const a=i.prev,r=i,o=i.next;if(di(a,r,o)>=0)return!1;const l=a.x,u=r.x,d=o.x,f=a.y,m=r.y,x=o.y,g=Math.min(l,u,d),v=Math.min(f,m,x),M=Math.max(l,u,d),_=Math.max(f,m,x),S=BS(g,v,e,t,n),j=BS(M,_,e,t,n);let A=i.prevZ,C=i.nextZ;for(;A&&A.z>=S&&C&&C.z<=j;){if(A.x>=g&&A.x<=M&&A.y>=v&&A.y<=_&&A!==a&&A!==o&&Xp(l,f,u,m,d,x,A.x,A.y)&&di(A.prev,A,A.next)>=0||(A=A.prevZ,C.x>=g&&C.x<=M&&C.y>=v&&C.y<=_&&C!==a&&C!==o&&Xp(l,f,u,m,d,x,C.x,C.y)&&di(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;A&&A.z>=S;){if(A.x>=g&&A.x<=M&&A.y>=v&&A.y<=_&&A!==a&&A!==o&&Xp(l,f,u,m,d,x,A.x,A.y)&&di(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;C&&C.z<=j;){if(C.x>=g&&C.x<=M&&C.y>=v&&C.y<=_&&C!==a&&C!==o&&Xp(l,f,u,m,d,x,C.x,C.y)&&di(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function _B(i,e){let t=i;do{const n=t.prev,a=t.next.next;!k0(n,a)&&vN(n,t,t.next,a)&&Rx(n,a)&&Rx(a,n)&&(e.push(n.i,t.i,a.i),Dx(t),Dx(t.next),t=i=a),t=t.next}while(t!==i);return Gf(t)}function wB(i,e,t,n,a,r){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&LB(o,l)){let u=yN(o,l);o=Gf(o,o.next),u=Gf(u,u.next),Nx(o,e,t,n,a,r,0),Nx(u,e,t,n,a,r,0);return}l=l.next}o=o.next}while(o!==i)}function jB(i,e,t,n){const a=[];for(let r=0,o=e.length;r<o;r++){const l=e[r]*n,u=r<o-1?e[r+1]*n:i.length,d=xN(i,l,u,n,!1);d===d.next&&(d.steiner=!0),a.push(DB(d))}a.sort(EB);for(let r=0;r<a.length;r++)t=TB(a[r],t);return t}function EB(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=n-a}return t}function TB(i,e){const t=AB(i,e);if(!t)return e;const n=yN(t,i);return Gf(n,n.next),Gf(t,t.next)}function AB(i,e){let t=e;const n=i.x,a=i.y;let r=-1/0,o;if(k0(i,t))return t;do{if(k0(i,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const m=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>r&&(r=m,o=t.x<t.next.x?t:t.next,m===n))return o}t=t.next}while(t!==e);if(!o)return null;const l=o,u=o.x,d=o.y;let f=1/0;t=o;do{if(n>=t.x&&t.x>=u&&n!==t.x&&gN(a<d?n:r,a,u,d,a<d?r:n,a,t.x,t.y)){const m=Math.abs(a-t.y)/(n-t.x);Rx(t,i)&&(m<f||m===f&&(t.x>o.x||t.x===o.x&&CB(o,t)))&&(o=t,f=m)}t=t.next}while(t!==l);return o}function CB(i,e){return di(i.prev,i,e.prev)<0&&di(e.next,i,i.next)<0}function NB(i,e,t,n){let a=i;do a.z===0&&(a.z=BS(a.x,a.y,e,t,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,RB(a)}function RB(i){let e,t=1;do{let n=i,a;i=null;let r=null;for(e=0;n;){e++;let o=n,l=0;for(let d=0;d<t&&(l++,o=o.nextZ,!!o);d++);let u=t;for(;l>0||u>0&&o;)l!==0&&(u===0||!o||n.z<=o.z)?(a=n,n=n.nextZ,l--):(a=o,o=o.nextZ,u--),r?r.nextZ=a:i=a,a.prevZ=r,r=a;n=o}r.nextZ=null,t*=2}while(e>1);return i}function BS(i,e,t,n,a){return i=(i-t)*a|0,e=(e-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function DB(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function gN(i,e,t,n,a,r,o,l){return(a-o)*(e-l)>=(i-o)*(r-l)&&(i-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(r-l)>=(a-o)*(n-l)}function Xp(i,e,t,n,a,r,o,l){return!(i===o&&e===l)&&gN(i,e,t,n,a,r,o,l)}function LB(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!UB(i,e)&&(Rx(i,e)&&Rx(e,i)&&PB(i,e)&&(di(i.prev,i,e.prev)||di(i,e.prev,e))||k0(i,e)&&di(i.prev,i,i.next)>0&&di(e.prev,e,e.next)>0)}function di(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function k0(i,e){return i.x===e.x&&i.y===e.y}function vN(i,e,t,n){const a=iv(di(i,e,t)),r=iv(di(i,e,n)),o=iv(di(t,n,i)),l=iv(di(t,n,e));return!!(a!==r&&o!==l||a===0&&sv(i,t,e)||r===0&&sv(i,n,e)||o===0&&sv(t,i,n)||l===0&&sv(t,e,n))}function sv(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function iv(i){return i>0?1:i<0?-1:0}function UB(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&vN(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Rx(i,e){return di(i.prev,i,i.next)<0?di(i,e,i.next)>=0&&di(i,i.prev,e)>=0:di(i,e,i.prev)<0||di(i,i.next,e)<0}function PB(i,e){let t=i,n=!1;const a=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&a<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function yN(i,e){const t=FS(i.i,i.x,i.y),n=FS(e.i,e.x,e.y),a=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=a,a.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function $5(i,e,t,n){const a=FS(i,e,t);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Dx(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function FS(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function OB(i,e,t,n){let a=0;for(let r=e,o=t-n;r<t;r+=n)a+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return a}class zB{static triangulate(e,t,n=2){return bB(e,t,n)}}class ml{static area(e){const t=e.length;let n=0;for(let a=t-1,r=0;r<t;a=r++)n+=e[a].x*e[r].y-e[r].x*e[a].y;return n*.5}static isClockWise(e){return ml.area(e)<0}static triangulateShape(e,t){const n=[],a=[],r=[];eE(e),tE(n,e);let o=e.length;t.forEach(eE);for(let u=0;u<t.length;u++)a.push(o),o+=t[u].length,tE(n,t[u]);const l=zB.triangulate(n,a);for(let u=0;u<l.length;u+=3)r.push(l.slice(u,u+3));return r}}function eE(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function tE(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Qx extends Dn{constructor(e=new rc([new pt(.5,.5),new pt(-.5,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,a=[],r=[];for(let l=0,u=e.length;l<u;l++){const d=e[l];o(d)}this.setAttribute("position",new tn(a,3)),this.setAttribute("uv",new tn(r,2)),this.computeVertexNormals();function o(l){const u=[],d=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,j=t.UVGenerator!==void 0?t.UVGenerator:GB;let A,C=!1,N,R,O,U;S&&(A=S.getSpacedPoints(f),C=!0,x=!1,N=S.computeFrenetFrames(f,!1),R=new Q,O=new Q,U=new Q),x||(_=0,g=0,v=0,M=0);const z=l.extractPoints(d);let I=z.shape;const V=z.holes;if(!ml.isClockWise(I)){I=I.reverse();for(let ze=0,ae=V.length;ze<ae;ze++){const Fe=V[ze];ml.isClockWise(Fe)&&(V[ze]=Fe.reverse())}}function q(ze){const Fe=10000000000000001e-36;let We=ze[0];for(let Pe=1;Pe<=ze.length;Pe++){const Ge=Pe%ze.length,$e=ze[Ge],Ee=$e.x-We.x,ct=$e.y-We.y,te=Ee*Ee+ct*ct,Y=Math.max(Math.abs($e.x),Math.abs($e.y),Math.abs(We.x),Math.abs(We.y)),ve=Fe*Y*Y;if(te<=ve){ze.splice(Ge,1),Pe--;continue}We=$e}}q(I),V.forEach(q);const W=V.length,ie=I;for(let ze=0;ze<W;ze++){const ae=V[ze];I=I.concat(ae)}function B(ze,ae,Fe){return ae||wn("ExtrudeGeometry: vec does not exist"),ze.clone().addScaledVector(ae,Fe)}const J=I.length;function $(ze,ae,Fe){let We,Pe,Ge;const $e=ze.x-ae.x,Ee=ze.y-ae.y,ct=Fe.x-ze.x,te=Fe.y-ze.y,Y=$e*$e+Ee*Ee,ve=$e*te-Ee*ct;if(Math.abs(ve)>Number.EPSILON){const Be=Math.sqrt(Y),Re=Math.sqrt(ct*ct+te*te),Ae=ae.x-Ee/Be,yt=ae.y+$e/Be,gt=Fe.x-te/Re,Dt=Fe.y+ct/Re,Nt=((gt-Ae)*te-(Dt-yt)*ct)/($e*te-Ee*ct);We=Ae+$e*Nt-ze.x,Pe=yt+Ee*Nt-ze.y;const ke=We*We+Pe*Pe;if(ke<=2)return new pt(We,Pe);Ge=Math.sqrt(ke/2)}else{let Be=!1;$e>Number.EPSILON?ct>Number.EPSILON&&(Be=!0):$e<-Number.EPSILON?ct<-Number.EPSILON&&(Be=!0):Math.sign(Ee)===Math.sign(te)&&(Be=!0),Be?(We=-Ee,Pe=$e,Ge=Math.sqrt(Y)):(We=$e,Pe=Ee,Ge=Math.sqrt(Y/2))}return new pt(We/Ge,Pe/Ge)}const le=[];for(let ze=0,ae=ie.length,Fe=ae-1,We=ze+1;ze<ae;ze++,Fe++,We++)Fe===ae&&(Fe=0),We===ae&&(We=0),le[ze]=$(ie[ze],ie[Fe],ie[We]);const re=[];let H,ee=le.concat();for(let ze=0,ae=W;ze<ae;ze++){const Fe=V[ze];H=[];for(let We=0,Pe=Fe.length,Ge=Pe-1,$e=We+1;We<Pe;We++,Ge++,$e++)Ge===Pe&&(Ge=0),$e===Pe&&($e=0),H[We]=$(Fe[We],Fe[Ge],Fe[$e]);re.push(H),ee=ee.concat(H)}let ue;if(_===0)ue=ml.triangulateShape(ie,V);else{const ze=[],ae=[];for(let Fe=0;Fe<_;Fe++){const We=Fe/_,Pe=g*Math.cos(We*Math.PI/2),Ge=v*Math.sin(We*Math.PI/2)+M;for(let $e=0,Ee=ie.length;$e<Ee;$e++){const ct=B(ie[$e],le[$e],Ge);Qe(ct.x,ct.y,-Pe),We===0&&ze.push(ct)}for(let $e=0,Ee=W;$e<Ee;$e++){const ct=V[$e];H=re[$e];const te=[];for(let Y=0,ve=ct.length;Y<ve;Y++){const Be=B(ct[Y],H[Y],Ge);Qe(Be.x,Be.y,-Pe),We===0&&te.push(Be)}We===0&&ae.push(te)}}ue=ml.triangulateShape(ze,ae)}const me=ue.length,be=v+M;for(let ze=0;ze<J;ze++){const ae=x?B(I[ze],ee[ze],be):I[ze];C?(O.copy(N.normals[0]).multiplyScalar(ae.x),R.copy(N.binormals[0]).multiplyScalar(ae.y),U.copy(A[0]).add(O).add(R),Qe(U.x,U.y,U.z)):Qe(ae.x,ae.y,0)}for(let ze=1;ze<=f;ze++)for(let ae=0;ae<J;ae++){const Fe=x?B(I[ae],ee[ae],be):I[ae];C?(O.copy(N.normals[ze]).multiplyScalar(Fe.x),R.copy(N.binormals[ze]).multiplyScalar(Fe.y),U.copy(A[ze]).add(O).add(R),Qe(U.x,U.y,U.z)):Qe(Fe.x,Fe.y,m/f*ze)}for(let ze=_-1;ze>=0;ze--){const ae=ze/_,Fe=g*Math.cos(ae*Math.PI/2),We=v*Math.sin(ae*Math.PI/2)+M;for(let Pe=0,Ge=ie.length;Pe<Ge;Pe++){const $e=B(ie[Pe],le[Pe],We);Qe($e.x,$e.y,m+Fe)}for(let Pe=0,Ge=V.length;Pe<Ge;Pe++){const $e=V[Pe];H=re[Pe];for(let Ee=0,ct=$e.length;Ee<ct;Ee++){const te=B($e[Ee],H[Ee],We);C?Qe(te.x,te.y+A[f-1].y,A[f-1].x+Fe):Qe(te.x,te.y,m+Fe)}}}fe(),ge();function fe(){const ze=a.length/3;if(x){let ae=0,Fe=J*ae;for(let We=0;We<me;We++){const Pe=ue[We];st(Pe[2]+Fe,Pe[1]+Fe,Pe[0]+Fe)}ae=f+_*2,Fe=J*ae;for(let We=0;We<me;We++){const Pe=ue[We];st(Pe[0]+Fe,Pe[1]+Fe,Pe[2]+Fe)}}else{for(let ae=0;ae<me;ae++){const Fe=ue[ae];st(Fe[2],Fe[1],Fe[0])}for(let ae=0;ae<me;ae++){const Fe=ue[ae];st(Fe[0]+J*f,Fe[1]+J*f,Fe[2]+J*f)}}n.addGroup(ze,a.length/3-ze,0)}function ge(){const ze=a.length/3;let ae=0;je(ie,ae),ae+=ie.length;for(let Fe=0,We=V.length;Fe<We;Fe++){const Pe=V[Fe];je(Pe,ae),ae+=Pe.length}n.addGroup(ze,a.length/3-ze,1)}function je(ze,ae){let Fe=ze.length;for(;--Fe>=0;){const We=Fe;let Pe=Fe-1;Pe<0&&(Pe=ze.length-1);for(let Ge=0,$e=f+_*2;Ge<$e;Ge++){const Ee=J*Ge,ct=J*(Ge+1),te=ae+We+Ee,Y=ae+Pe+Ee,ve=ae+Pe+ct,Be=ae+We+ct;Ve(te,Y,ve,Be)}}}function Qe(ze,ae,Fe){u.push(ze),u.push(ae),u.push(Fe)}function st(ze,ae,Fe){nt(ze),nt(ae),nt(Fe);const We=a.length/3,Pe=j.generateTopUV(n,a,We-3,We-2,We-1);St(Pe[0]),St(Pe[1]),St(Pe[2])}function Ve(ze,ae,Fe,We){nt(ze),nt(ae),nt(We),nt(ae),nt(Fe),nt(We);const Pe=a.length/3,Ge=j.generateSideWallUV(n,a,Pe-6,Pe-3,Pe-2,Pe-1);St(Ge[0]),St(Ge[1]),St(Ge[3]),St(Ge[1]),St(Ge[2]),St(Ge[3])}function nt(ze){a.push(u[ze*3+0]),a.push(u[ze*3+1]),a.push(u[ze*3+2])}function St(ze){r.push(ze.x),r.push(ze.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return IB(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const l=t[e.shapes[r]];n.push(l)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new Uy[a.type]().fromJSON(a)),new Qx(n,e.options)}}const GB={generateTopUV:function(i,e,t,n,a){const r=e[t*3],o=e[t*3+1],l=e[n*3],u=e[n*3+1],d=e[a*3],f=e[a*3+1];return[new pt(r,o),new pt(l,u),new pt(d,f)]},generateSideWallUV:function(i,e,t,n,a,r){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],d=e[n*3],f=e[n*3+1],m=e[n*3+2],x=e[a*3],g=e[a*3+1],v=e[a*3+2],M=e[r*3],_=e[r*3+1],S=e[r*3+2];return Math.abs(l-f)<Math.abs(o-d)?[new pt(o,1-u),new pt(d,1-m),new pt(x,1-v),new pt(M,1-S)]:[new pt(l,1-u),new pt(f,1-m),new pt(g,1-v),new pt(_,1-S)]}};function IB(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class $x extends hd{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $x(e.radius,e.detail)}}class Mb extends Dn{constructor(e=[new pt(0,-.5),new pt(.5,0),new pt(0,.5)],t=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:a},t=Math.floor(t),a=bn(a,0,Math.PI*2);const r=[],o=[],l=[],u=[],d=[],f=1/t,m=new Q,x=new pt,g=new Q,v=new Q,M=new Q;let _=0,S=0;for(let j=0;j<=e.length-1;j++)switch(j){case 0:_=e[j+1].x-e[j].x,S=e[j+1].y-e[j].y,g.x=S*1,g.y=-_,g.z=S*0,M.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case e.length-1:u.push(M.x,M.y,M.z);break;default:_=e[j+1].x-e[j].x,S=e[j+1].y-e[j].y,g.x=S*1,g.y=-_,g.z=S*0,v.copy(g),g.x+=M.x,g.y+=M.y,g.z+=M.z,g.normalize(),u.push(g.x,g.y,g.z),M.copy(v)}for(let j=0;j<=t;j++){const A=n+j*f*a,C=Math.sin(A),N=Math.cos(A);for(let R=0;R<=e.length-1;R++){m.x=e[R].x*C,m.y=e[R].y,m.z=e[R].x*N,o.push(m.x,m.y,m.z),x.x=j/t,x.y=R/(e.length-1),l.push(x.x,x.y);const O=u[3*R+0]*C,U=u[3*R+1],z=u[3*R+0]*N;d.push(O,U,z)}}for(let j=0;j<t;j++)for(let A=0;A<e.length-1;A++){const C=A+j*e.length,N=C,R=C+e.length,O=C+e.length+1,U=C+1;r.push(N,R,U),r.push(O,U,R)}this.setIndex(r),this.setAttribute("position",new tn(o,3)),this.setAttribute("uv",new tn(l,2)),this.setAttribute("normal",new tn(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mb(e.points,e.segments,e.phiStart,e.phiLength)}}class eg extends hd{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eg(e.radius,e.detail)}}class Ta extends Dn{constructor(e=1,t=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:a};const r=e/2,o=t/2,l=Math.floor(n),u=Math.floor(a),d=l+1,f=u+1,m=e/l,x=t/u,g=[],v=[],M=[],_=[];for(let S=0;S<f;S++){const j=S*x-o;for(let A=0;A<d;A++){const C=A*m-r;v.push(C,-j,0),M.push(0,0,1),_.push(A/l),_.push(1-S/u)}}for(let S=0;S<u;S++)for(let j=0;j<l;j++){const A=j+d*S,C=j+d*(S+1),N=j+1+d*(S+1),R=j+1+d*S;g.push(A,C,R),g.push(C,N,R)}this.setIndex(g),this.setAttribute("position",new tn(v,3)),this.setAttribute("normal",new tn(M,3)),this.setAttribute("uv",new tn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ta(e.width,e.height,e.widthSegments,e.heightSegments)}}class Sb extends Dn{constructor(e=.5,t=1,n=32,a=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:a,thetaStart:r,thetaLength:o},n=Math.max(3,n),a=Math.max(1,a);const l=[],u=[],d=[],f=[];let m=e;const x=(t-e)/a,g=new Q,v=new pt;for(let M=0;M<=a;M++){for(let _=0;_<=n;_++){const S=r+_/n*o;g.x=m*Math.cos(S),g.y=m*Math.sin(S),u.push(g.x,g.y,g.z),d.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}m+=x}for(let M=0;M<a;M++){const _=M*(n+1);for(let S=0;S<n;S++){const j=S+_,A=j,C=j+n+1,N=j+n+2,R=j+1;l.push(A,C,R),l.push(C,N,R)}}this.setIndex(l),this.setAttribute("position",new tn(u,3)),this.setAttribute("normal",new tn(d,3)),this.setAttribute("uv",new tn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _b extends Dn{constructor(e=new rc([new pt(0,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],a=[],r=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)d(e);else for(let f=0;f<e.length;f++)d(e[f]),this.addGroup(l,u,f),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new tn(a,3)),this.setAttribute("normal",new tn(r,3)),this.setAttribute("uv",new tn(o,2));function d(f){const m=a.length/3,x=f.extractPoints(t);let g=x.shape;const v=x.holes;ml.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,S=v.length;_<S;_++){const j=v[_];ml.isClockWise(j)===!0&&(v[_]=j.reverse())}const M=ml.triangulateShape(g,v);for(let _=0,S=v.length;_<S;_++){const j=v[_];g=g.concat(j)}for(let _=0,S=g.length;_<S;_++){const j=g[_];a.push(j.x,j.y,0),r.push(0,0,1),o.push(j.x,j.y)}for(let _=0,S=M.length;_<S;_++){const j=M[_],A=j[0]+m,C=j[1]+m,N=j[2]+m;n.push(A,C,N),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kB(t,e)}static fromJSON(e,t){const n=[];for(let a=0,r=e.shapes.length;a<r;a++){const o=t[e.shapes[a]];n.push(o)}return new _b(n,e.curveSegments)}}function kB(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const a=i[t];e.shapes.push(a.uuid)}else e.shapes.push(i.uuid);return e}class tg extends Dn{constructor(e=1,t=32,n=16,a=0,r=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:a,phiLength:r,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(o+l,Math.PI);let d=0;const f=[],m=new Q,x=new Q,g=[],v=[],M=[],_=[];for(let S=0;S<=n;S++){const j=[],A=S/n;let C=0;S===0&&o===0?C=.5/t:S===n&&u===Math.PI&&(C=-.5/t);for(let N=0;N<=t;N++){const R=N/t;m.x=-e*Math.cos(a+R*r)*Math.sin(o+A*l),m.y=e*Math.cos(o+A*l),m.z=e*Math.sin(a+R*r)*Math.sin(o+A*l),v.push(m.x,m.y,m.z),x.copy(m).normalize(),M.push(x.x,x.y,x.z),_.push(R+C,1-A),j.push(d++)}f.push(j)}for(let S=0;S<n;S++)for(let j=0;j<t;j++){const A=f[S][j+1],C=f[S][j],N=f[S+1][j],R=f[S+1][j+1];(S!==0||o>0)&&g.push(A,C,R),(S!==n-1||u<Math.PI)&&g.push(C,N,R)}this.setIndex(g),this.setAttribute("position",new tn(v,3)),this.setAttribute("normal",new tn(M,3)),this.setAttribute("uv",new tn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wb extends hd{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wb(e.radius,e.detail)}}class jb extends Dn{constructor(e=1,t=.4,n=12,a=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:a,arc:r},n=Math.floor(n),a=Math.floor(a);const o=[],l=[],u=[],d=[],f=new Q,m=new Q,x=new Q;for(let g=0;g<=n;g++)for(let v=0;v<=a;v++){const M=v/a*r,_=g/n*Math.PI*2;m.x=(e+t*Math.cos(_))*Math.cos(M),m.y=(e+t*Math.cos(_))*Math.sin(M),m.z=t*Math.sin(_),l.push(m.x,m.y,m.z),f.x=e*Math.cos(M),f.y=e*Math.sin(M),x.subVectors(m,f).normalize(),u.push(x.x,x.y,x.z),d.push(v/a),d.push(g/n)}for(let g=1;g<=n;g++)for(let v=1;v<=a;v++){const M=(a+1)*g+v-1,_=(a+1)*(g-1)+v-1,S=(a+1)*(g-1)+v,j=(a+1)*g+v;o.push(M,_,j),o.push(_,S,j)}this.setIndex(o),this.setAttribute("position",new tn(l,3)),this.setAttribute("normal",new tn(u,3)),this.setAttribute("uv",new tn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Eb extends Dn{constructor(e=1,t=.4,n=64,a=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:a,p:r,q:o},n=Math.floor(n),a=Math.floor(a);const l=[],u=[],d=[],f=[],m=new Q,x=new Q,g=new Q,v=new Q,M=new Q,_=new Q,S=new Q;for(let A=0;A<=n;++A){const C=A/n*r*Math.PI*2;j(C,r,o,e,g),j(C+.01,r,o,e,v),_.subVectors(v,g),S.addVectors(v,g),M.crossVectors(_,S),S.crossVectors(M,_),M.normalize(),S.normalize();for(let N=0;N<=a;++N){const R=N/a*Math.PI*2,O=-t*Math.cos(R),U=t*Math.sin(R);m.x=g.x+(O*S.x+U*M.x),m.y=g.y+(O*S.y+U*M.y),m.z=g.z+(O*S.z+U*M.z),u.push(m.x,m.y,m.z),x.subVectors(m,g).normalize(),d.push(x.x,x.y,x.z),f.push(A/n),f.push(N/a)}}for(let A=1;A<=n;A++)for(let C=1;C<=a;C++){const N=(a+1)*(A-1)+(C-1),R=(a+1)*A+(C-1),O=(a+1)*A+C,U=(a+1)*(A-1)+C;l.push(N,R,U),l.push(R,O,U)}this.setIndex(l),this.setAttribute("position",new tn(u,3)),this.setAttribute("normal",new tn(d,3)),this.setAttribute("uv",new tn(f,2));function j(A,C,N,R,O){const U=Math.cos(A),z=Math.sin(A),I=N/C*A,V=Math.cos(I);O.x=R*(2+V)*.5*U,O.y=R*(2+V)*z*.5,O.z=R*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Tb extends Dn{constructor(e=new f3(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),t=64,n=1,a=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:a,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new Q,u=new Q,d=new pt;let f=new Q;const m=[],x=[],g=[],v=[];M(),this.setIndex(v),this.setAttribute("position",new tn(m,3)),this.setAttribute("normal",new tn(x,3)),this.setAttribute("uv",new tn(g,2));function M(){for(let A=0;A<t;A++)_(A);_(r===!1?t:0),j(),S()}function _(A){f=e.getPointAt(A/t,f);const C=o.normals[A],N=o.binormals[A];for(let R=0;R<=a;R++){const O=R/a*Math.PI*2,U=Math.sin(O),z=-Math.cos(O);u.x=z*C.x+U*N.x,u.y=z*C.y+U*N.y,u.z=z*C.z+U*N.z,u.normalize(),x.push(u.x,u.y,u.z),l.x=f.x+n*u.x,l.y=f.y+n*u.y,l.z=f.z+n*u.z,m.push(l.x,l.y,l.z)}}function S(){for(let A=1;A<=t;A++)for(let C=1;C<=a;C++){const N=(a+1)*(A-1)+(C-1),R=(a+1)*A+(C-1),O=(a+1)*A+C,U=(a+1)*(A-1)+C;v.push(N,R,U),v.push(R,O,U)}}function j(){for(let A=0;A<=t;A++)for(let C=0;C<=a;C++)d.x=A/t,d.y=C/a,g.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Tb(new Uy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class bN extends Dn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,a=new Q,r=new Q;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,f=u.length;d<f;++d){const m=u[d],x=m.start,g=m.count;for(let v=x,M=x+g;v<M;v+=3)for(let _=0;_<3;_++){const S=l.getX(v+_),j=l.getX(v+(_+1)%3);a.fromBufferAttribute(o,S),r.fromBufferAttribute(o,j),nE(a,r,n)===!0&&(t.push(a.x,a.y,a.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l<u;l++)for(let d=0;d<3;d++){const f=3*l+d,m=3*l+(d+1)%3;a.fromBufferAttribute(o,f),r.fromBufferAttribute(o,m),nE(a,r,n)===!0&&(t.push(a.x,a.y,a.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new tn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function nE(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(a)===!0?!1:(t.add(n),t.add(a),!0)}var sE=Object.freeze({__proto__:null,BoxGeometry:nn,CapsuleGeometry:gb,CircleGeometry:vb,ConeGeometry:Jx,CylinderGeometry:Q0,DodecahedronGeometry:yb,EdgesGeometry:dN,ExtrudeGeometry:Qx,IcosahedronGeometry:$x,LatheGeometry:Mb,OctahedronGeometry:eg,PlaneGeometry:Ta,PolyhedronGeometry:hd,RingGeometry:Sb,ShapeGeometry:_b,SphereGeometry:tg,TetrahedronGeometry:wb,TorusGeometry:jb,TorusKnotGeometry:Eb,TubeGeometry:Tb,WireframeGeometry:bN});class MN extends Xa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class SN extends Zi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yi extends Xa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _N extends yi{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Lt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wN extends Xa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Lt(16777215),this.specular=new Lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.combine=qx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jN extends Xa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class EN extends Xa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class m3 extends Xa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.combine=qx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ng extends Xa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ab extends Xa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class TN extends Xa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AN extends vr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Af(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function CN(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function NN(i){function e(a,r){return i[a]-i[r]}const t=i.length,n=new Array(t);for(let a=0;a!==t;++a)n[a]=a;return n.sort(e),n}function VS(i,e,t){const n=i.length,a=new i.constructor(n);for(let r=0,o=0;o!==n;++r){const l=t[r]*e;for(let u=0;u!==e;++u)a[o++]=i[l+u]}return a}function p3(i,e,t,n){let a=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[a++];if(r===void 0)return;let o=r[n];if(o!==void 0)if(Array.isArray(o))do o=r[n],o!==void 0&&(e.push(r.time),t.push(...o)),r=i[a++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[n],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=i[a++];while(r!==void 0);else do o=r[n],o!==void 0&&(e.push(r.time),t.push(o)),r=i[a++];while(r!==void 0)}function BB(i,e,t,n,a=30){const r=i.clone();r.name=e;const o=[];for(let u=0;u<r.tracks.length;++u){const d=r.tracks[u],f=d.getValueSize(),m=[],x=[];for(let g=0;g<d.times.length;++g){const v=d.times[g]*a;if(!(v<t||v>=n)){m.push(d.times[g]);for(let M=0;M<f;++M)x.push(d.values[g*f+M])}}m.length!==0&&(d.times=Af(m,d.times.constructor),d.values=Af(x,d.values.constructor),o.push(d))}r.tracks=o;let l=1/0;for(let u=0;u<r.tracks.length;++u)l>r.tracks[u].times[0]&&(l=r.tracks[u].times[0]);for(let u=0;u<r.tracks.length;++u)r.tracks[u].shift(-1*l);return r.resetDuration(),r}function FB(i,e=0,t=i,n=30){n<=0&&(n=30);const a=t.tracks.length,r=e/n;for(let o=0;o<a;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const d=i.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(d===void 0)continue;let f=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);let x=0;const g=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=g/3);const v=l.times.length-1;let M;if(r<=l.times[0]){const S=f,j=m-f;M=l.values.slice(S,j)}else if(r>=l.times[v]){const S=v*m+f,j=S+m-f;M=l.values.slice(S,j)}else{const S=l.createInterpolant(),j=f,A=m-f;S.evaluate(r),M=S.resultBuffer.slice(j,A)}u==="quaternion"&&new Wn().fromArray(M).normalize().conjugate().toArray(M);const _=d.times.length;for(let S=0;S<_;++S){const j=S*g+x;if(u==="quaternion")Wn.multiplyQuaternionsFlat(d.values,j,M,0,d.values,j);else{const A=g-x*2;for(let C=0;C<A;++C)d.values[j+C]-=M[C]}}}return i.blendMode=K_,i}class VB{static convertArray(e,t){return Af(e,t)}static isTypedArray(e){return CN(e)}static getKeyframeOrder(e){return NN(e)}static sortedArray(e,t,n){return VS(e,t,n)}static flattenJSON(e,t,n,a){p3(e,t,n,a)}static subclip(e,t,n,a,r=30){return BB(e,t,n,a,r)}static makeClipAdditive(e,t=0,n=e,a=30){return FB(e,t,n,a)}}class sg{constructor(e,t,n,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,a=t[n],r=t[n-1];e:{t:{let o;n:{s:if(!(e<a)){for(let l=n+2;;){if(a===void 0){if(e<r)break s;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(r=a,a=t[++n],e<a)break t}o=t.length;break n}if(!(e>=r)){const l=t[1];e<l&&(n=2,r=l);for(let u=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(a=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(a=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,a)}return this.interpolate_(n,r,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,r=e*a;for(let o=0;o!==a;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RN extends sg{constructor(e,t,n,a){super(e,t,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jf,endingEnd:jf}}intervalChanged_(e,t,n){const a=this.parameterPositions;let r=e-2,o=e+1,l=a[r],u=a[o];if(l===void 0)switch(this.getSettings_().endingStart){case Ef:r=e,l=2*t-n;break;case jx:r=a.length-2,l=t+a[r]-a[r+1];break;default:r=e,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Ef:o=e,u=2*n-t;break;case jx:o=1,u=n+a[1]-a[0];break;default:o=e-1,u=t}const d=(n-t)*.5,f=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(u-n),this._offsetPrev=r*f,this._offsetNext=o*f}interpolate_(e,t,n,a){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,f=this._offsetPrev,m=this._offsetNext,x=this._weightPrev,g=this._weightNext,v=(n-t)/(a-t),M=v*v,_=M*v,S=-x*_+2*x*M-x*v,j=(1+x)*_+(-1.5-2*x)*M+(-.5+x)*v+1,A=(-1-g)*_+(1.5+g)*M+.5*v,C=g*_-g*M;for(let N=0;N!==l;++N)r[N]=S*o[f+N]+j*o[d+N]+A*o[u+N]+C*o[m+N];return r}}class x3 extends sg{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,f=(n-t)/(a-t),m=1-f;for(let x=0;x!==l;++x)r[x]=o[d+x]*m+o[u+x]*f;return r}}class DN extends sg{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Po{constructor(e,t,n,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Af(t,this.TimeBufferType),this.values=Af(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Af(e.times,Array),values:Af(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(n.interpolation=a)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new x3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new RN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wx:t=this.InterpolantFactoryMethodDiscrete;break;case Ry:t=this.InterpolantFactoryMethodLinear;break;case Pv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return qt("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wx;case this.InterpolantFactoryMethodLinear:return Ry;case this.InterpolantFactoryMethodSmooth:return Pv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]*=e}return this}trim(e,t){const n=this.times,a=n.length;let r=0,o=a-1;for(;r!==a&&n[r]<e;)++r;for(;o!==-1&&n[o]>t;)--o;if(++o,r!==0||o!==a){r>=o&&(o=Math.max(o,1),r=o-1);const l=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(wn("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,a=this.values,r=n.length;r===0&&(wn("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==r;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){wn("KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(o!==null&&o>u){wn("KeyframeTrack: Out of order keys.",this,l,u,o),e=!1;break}o=u}if(a!==void 0&&CN(a))for(let l=0,u=a.length;l!==u;++l){const d=a[l];if(isNaN(d)){wn("KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===Pv,r=e.length-1;let o=1;for(let l=1;l<r;++l){let u=!1;const d=e[l],f=e[l+1];if(d!==f&&(l!==1||d!==e[0]))if(a)u=!0;else{const m=l*n,x=m-n,g=m+n;for(let v=0;v!==n;++v){const M=t[m+v];if(M!==t[x+v]||M!==t[g+v]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const m=l*n,x=o*n;for(let g=0;g!==n;++g)t[x+g]=t[m+g]}++o}}if(r>0){e[o]=e[r];for(let l=r*n,u=o*n,d=0;d!==n;++d)t[u+d]=t[l+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,a=new n(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Po.prototype.ValueTypeName="";Po.prototype.TimeBufferType=Float32Array;Po.prototype.ValueBufferType=Float32Array;Po.prototype.DefaultInterpolation=Ry;class Ff extends Po{constructor(e,t,n){super(e,t,n)}}Ff.prototype.ValueTypeName="bool";Ff.prototype.ValueBufferType=Array;Ff.prototype.DefaultInterpolation=wx;Ff.prototype.InterpolantFactoryMethodLinear=void 0;Ff.prototype.InterpolantFactoryMethodSmooth=void 0;class g3 extends Po{constructor(e,t,n,a){super(e,t,n,a)}}g3.prototype.ValueTypeName="color";class Lx extends Po{constructor(e,t,n,a){super(e,t,n,a)}}Lx.prototype.ValueTypeName="number";class LN extends sg{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-t)/(a-t);let d=e*l;for(let f=d+l;d!==f;d+=4)Wn.slerpFlat(r,0,o,d-l,o,d,u);return r}}class ig extends Po{constructor(e,t,n,a){super(e,t,n,a)}InterpolantFactoryMethodLinear(e){return new LN(this.times,this.values,this.getValueSize(),e)}}ig.prototype.ValueTypeName="quaternion";ig.prototype.InterpolantFactoryMethodSmooth=void 0;class Vf extends Po{constructor(e,t,n){super(e,t,n)}}Vf.prototype.ValueTypeName="string";Vf.prototype.ValueBufferType=Array;Vf.prototype.DefaultInterpolation=wx;Vf.prototype.InterpolantFactoryMethodLinear=void 0;Vf.prototype.InterpolantFactoryMethodSmooth=void 0;class Ux extends Po{constructor(e,t,n,a){super(e,t,n,a)}}Ux.prototype.ValueTypeName="vector";class Px{constructor(e="",t=-1,n=[],a=ab){this.name=e,this.tracks=n,this.duration=t,this.blendMode=a,this.uuid=no(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,a=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(qB(n[o]).scale(a));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],n=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,o=n.length;r!==o;++r)t.push(Po.toJSON(n[r]));return a}static CreateFromMorphTargetSequence(e,t,n,a){const r=t.length,o=[];for(let l=0;l<r;l++){let u=[],d=[];u.push((l+r-1)%r,l,(l+1)%r),d.push(0,1,0);const f=NN(u);u=VS(u,1,f),d=VS(d,1,f),!a&&u[0]===0&&(u.push(r),d.push(d[0])),o.push(new Lx(".morphTargetInfluences["+t[l].name+"]",u,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const a=e;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const a={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const d=e[l],f=d.name.match(r);if(f&&f.length>1){const m=f[1];let x=a[m];x||(a[m]=x=[]),x.push(d)}}const o=[];for(const l in a)o.push(this.CreateFromMorphTargetSequence(l,a[l],t,n));return o}static parseAnimation(e,t){if(qt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return wn("AnimationClip: No animation in JSONLoader data."),null;const n=function(m,x,g,v,M){if(g.length!==0){const _=[],S=[];p3(g,_,S,v),_.length!==0&&M.push(new m(x,_,S))}},a=[],r=e.name||"default",o=e.fps||30,l=e.blendMode;let u=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const x=d[m].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const g={};let v;for(v=0;v<x.length;v++)if(x[v].morphTargets)for(let M=0;M<x[v].morphTargets.length;M++)g[x[v].morphTargets[M]]=-1;for(const M in g){const _=[],S=[];for(let j=0;j!==x[v].morphTargets.length;++j){const A=x[v];_.push(A.time),S.push(A.morphTarget===M?1:0)}a.push(new Lx(".morphTargetInfluence["+M+"]",_,S))}u=g.length*o}else{const g=".bones["+t[m].name+"]";n(Ux,g+".position",x,"pos",a),n(ig,g+".quaternion",x,"rot",a),n(Ux,g+".scale",x,"scl",a)}}return a.length===0?null:new this(r,u,a,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,a=e.length;n!==a;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function HB(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lx;case"vector":case"vector2":case"vector3":case"vector4":return Ux;case"color":return g3;case"quaternion":return ig;case"bool":case"boolean":return Ff;case"string":return Vf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function qB(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=HB(i.type);if(i.times===void 0){const t=[],n=[];p3(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const nc={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Cb{constructor(e,t,n){const a=this;let r=!1,o=0,l=0,u;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(f){l++,r===!1&&a.onStart!==void 0&&a.onStart(f,o,l),r=!0},this.itemEnd=function(f){o++,a.onProgress!==void 0&&a.onProgress(f,o,l),o===l&&(r=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(f){a.onError!==void 0&&a.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,m){return d.push(f,m),this},this.removeHandler=function(f){const m=d.indexOf(f);return m!==-1&&d.splice(m,2),this},this.getHandler=function(f){for(let m=0,x=d.length;m<x;m+=2){const g=d[m],v=d[m+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const UN=new Cb;class yr{constructor(e){this.manager=e!==void 0?e:UN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(a,r){n.load(e,a,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}yr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Jc={};class XB extends Error{constructor(e,t){super(e),this.response=t}}class so extends yr{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=nc.get(`file:${e}`);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Jc[e]!==void 0){Jc[e].push({onLoad:t,onProgress:n,onError:a});return}Jc[e]=[],Jc[e].push({onLoad:t,onProgress:n,onError:a});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),l=this.mimeType,u=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&qt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const f=Jc[e],m=d.body.getReader(),x=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),g=x?parseInt(x):0,v=g!==0;let M=0;const _=new ReadableStream({start(S){j();function j(){m.read().then(({done:A,value:C})=>{if(A)S.close();else{M+=C.byteLength;const N=new ProgressEvent("progress",{lengthComputable:v,loaded:M,total:g});for(let R=0,O=f.length;R<O;R++){const U=f[R];U.onProgress&&U.onProgress(N)}S.enqueue(C),j()}},A=>{S.error(A)})}}});return new Response(_)}else throw new XB(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(f=>new DOMParser().parseFromString(f,l));case"json":return d.json();default:if(l==="")return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),x=m&&m[1]?m[1].toLowerCase():void 0,g=new TextDecoder(x);return d.arrayBuffer().then(v=>g.decode(v))}}}).then(d=>{nc.add(`file:${e}`,d);const f=Jc[e];delete Jc[e];for(let m=0,x=f.length;m<x;m++){const g=f[m];g.onLoad&&g.onLoad(d)}}).catch(d=>{const f=Jc[e];if(f===void 0)throw this.manager.itemError(e),d;delete Jc[e];for(let m=0,x=f.length;m<x;m++){const g=f[m];g.onError&&g.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class WB extends yr{constructor(e){super(e)}load(e,t,n,a){const r=this,o=new so(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(u){a?a(u):wn(u),r.manager.itemError(e)}},n,a)}parse(e){const t=[];for(let n=0;n<e.length;n++){const a=Px.parse(e[n]);t.push(a)}return t}}class YB extends yr{constructor(e){super(e)}load(e,t,n,a){const r=this,o=[],l=new pb,u=new so(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(r.withCredentials);let d=0;function f(m){u.load(e[m],function(x){const g=r.parse(x,!0);o[m]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},d+=1,d===6&&(g.mipmapCount===1&&(l.minFilter=ss),l.image=o,l.format=g.format,l.needsUpdate=!0,t&&t(l))},n,a)}if(Array.isArray(e))for(let m=0,x=e.length;m<x;++m)f(m);else u.load(e,function(m){const x=r.parse(m,!0);if(x.isCubemap){const g=x.mipmaps.length/x.mipmapCount;for(let v=0;v<g;v++){o[v]={mipmaps:[]};for(let M=0;M<x.mipmapCount;M++)o[v].mipmaps.push(x.mipmaps[v*x.mipmapCount+M]),o[v].format=x.format,o[v].width=x.width,o[v].height=x.height}l.image=o}else l.image.width=x.width,l.image.height=x.height,l.mipmaps=x.mipmaps;x.mipmapCount===1&&(l.minFilter=ss),l.format=x.format,l.needsUpdate=!0,t&&t(l)},n,a);return l}}const a0=new WeakMap;class Ox extends yr{constructor(e){super(e)}load(e,t,n,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=nc.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0);else{let m=a0.get(o);m===void 0&&(m=[],a0.set(o,m)),m.push({onLoad:t,onError:a})}return o}const l=Ax("img");function u(){f(),t&&t(this);const m=a0.get(this)||[];for(let x=0;x<m.length;x++){const g=m[x];g.onLoad&&g.onLoad(this)}a0.delete(this),r.manager.itemEnd(e)}function d(m){f(),a&&a(m),nc.remove(`image:${e}`);const x=a0.get(this)||[];for(let g=0;g<x.length;g++){const v=x[g];v.onError&&v.onError(m)}a0.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function f(){l.removeEventListener("load",u,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),nc.add(`image:${e}`,l),r.manager.itemStart(e),l.src=e,l}}class PN extends yr{constructor(e){super(e)}load(e,t,n,a){const r=new Zx;r.colorSpace=Sa;const o=new Ox(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(d){o.load(e[d],function(f){r.images[d]=f,l++,l===6&&(r.needsUpdate=!0,t&&t(r))},void 0,a)}for(let d=0;d<e.length;++d)u(d);return r}}class v3 extends yr{constructor(e){super(e)}load(e,t,n,a){const r=this,o=new Lo,l=new so(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(e,function(u){let d;try{d=r.parse(u)}catch(f){if(a!==void 0)a(f);else{f(f);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:bi,o.wrapT=d.wrapT!==void 0?d.wrapT:bi,o.magFilter=d.magFilter!==void 0?d.magFilter:ss,o.minFilter=d.minFilter!==void 0?d.minFilter:ss,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=tc),d.mipmapCount===1&&(o.minFilter=ss),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,a),o}}class ZB extends yr{constructor(e){super(e)}load(e,t,n,a){const r=new Es,o=new Ox(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){r.image=l,r.needsUpdate=!0,t!==void 0&&t(r)},n,a),r}}class pd extends ls{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Lt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class ON extends pd{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ls.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const SM=new mn,iE=new Q,aE=new Q;class y3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pt(512,512),this.mapType=gr,this.map=null,this.mapPass=null,this.matrix=new mn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new J0,this._frameExtents=new pt(1,1),this._viewportCount=1,this._viewports=[new ns(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;iE.setFromMatrixPosition(e.matrixWorld),t.position.copy(iE),aE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(aE),t.updateMatrixWorld(),SM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(SM,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(SM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class KB extends y3{constructor(){super(new ci(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=z0*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;(n!==t.fov||a!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=a,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zN extends pd{constructor(e,t,n=0,a=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ls.DEFAULT_UP),this.updateMatrix(),this.target=new ls,this.distance=n,this.angle=a,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new KB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const rE=new mn,Pp=new Q,_M=new Q;class JB extends y3{constructor(){super(new ci(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pt(4,2),this._viewportCount=6,this._viewports=[new ns(2,1,1,1),new ns(0,1,1,1),new ns(3,1,1,1),new ns(1,1,1,1),new ns(3,0,1,1),new ns(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,a=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Pp.setFromMatrixPosition(e.matrixWorld),n.position.copy(Pp),_M.copy(n.position),_M.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_M),n.updateMatrixWorld(),a.makeTranslation(-Pp.x,-Pp.y,-Pp.z),rE.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rE,n.coordinateSystem,n.reversedDepth)}}class GN extends pd{constructor(e,t,n=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new JB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xl extends cb{constructor(e=-1,t=1,n=1,a=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=a,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,a,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let r=n-e,o=n+e,l=a+t,u=a-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=d*this.view.offsetX,o=r+d*this.view.width,l-=f*this.view.offsetY,u=l-f*this.view.height}this.projectionMatrix.makeOrthographic(r,o,l,u,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class QB extends y3{constructor(){super(new xl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class IN extends pd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ls.DEFAULT_UP),this.updateMatrix(),this.target=new ls,this.shadow=new QB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class kN extends pd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class BN extends pd{constructor(e,t,n=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class FN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,a=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*a),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*a)),t.addScaledVector(o[5],1.092548*(a*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(n*r)),t.addScaledVector(o[8],.546274*(n*n-a*a)),t}getIrradianceAt(e,t){const n=e.x,a=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*a),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*a),t.addScaledVector(o[5],2*.429043*a*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*n*r),t.addScaledVector(o[8],.429043*(n*n-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const n=e.x,a=e.y,r=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*a,t[5]=1.092548*a*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-a*a)}}class VN extends pd{constructor(e=new FN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nb extends yr{constructor(e){super(e),this.textures={}}load(e,t,n,a){const r=this,o=new so(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(u){a?a(u):wn(u),r.manager.itemError(e)}},n,a)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&qt("MaterialLoader: Undefined texture",r),t[r]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(a.uniforms[r]={},o.type){case"t":a.uniforms[r].value=n(o.value);break;case"c":a.uniforms[r].value=new Lt().setHex(o.value);break;case"v2":a.uniforms[r].value=new pt().fromArray(o.value);break;case"v3":a.uniforms[r].value=new Q().fromArray(o.value);break;case"v4":a.uniforms[r].value=new ns().fromArray(o.value);break;case"m3":a.uniforms[r].value=new Tn().fromArray(o.value);break;case"m4":a.uniforms[r].value=new mn().fromArray(o.value);break;default:a.uniforms[r].value=o.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)a.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=n(e.map)),e.matcap!==void 0&&(a.matcap=n(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),a.normalScale=new pt().fromArray(r)}return e.displacementMap!==void 0&&(a.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=n(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new pt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Nb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:MN,SpriteMaterial:i3,RawShaderMaterial:SN,ShaderMaterial:Zi,PointsMaterial:r3,MeshPhysicalMaterial:_N,MeshStandardMaterial:yi,MeshPhongMaterial:wN,MeshToonMaterial:jN,MeshNormalMaterial:EN,MeshLambertMaterial:m3,MeshDepthMaterial:ng,MeshDistanceMaterial:Ab,MeshBasicMaterial:vl,MeshMatcapMaterial:TN,LineDashedMaterial:AN,LineBasicMaterial:vr,Material:Xa};return new t[e]}}class HS{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class b3 extends Dn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class HN extends yr{constructor(e){super(e)}load(e,t,n,a){const r=this,o=new so(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(u){a?a(u):wn(u),r.manager.itemError(e)}},n,a)}parse(e){const t={},n={};function a(g,v){if(t[v]!==void 0)return t[v];const _=g.interleavedBuffers[v],S=r(g,_.buffer),j=_0(_.type,S),A=new fb(j,_.stride);return A.uuid=_.uuid,t[v]=A,A}function r(g,v){if(n[v]!==void 0)return n[v];const _=g.arrayBuffers[v],S=new Uint32Array(_).buffer;return n[v]=S,S}const o=e.isInstancedBufferGeometry?new b3:new Dn,l=e.data.index;if(l!==void 0){const g=_0(l.type,l.array);o.setIndex(new Ds(g,1))}const u=e.data.attributes;for(const g in u){const v=u[g];let M;if(v.isInterleavedBufferAttribute){const _=a(e.data,v.data);M=new Of(_,v.itemSize,v.offset,v.normalized)}else{const _=_0(v.type,v.array),S=v.isInstancedBufferAttribute?zf:Ds;M=new S(_,v.itemSize,v.normalized)}v.name!==void 0&&(M.name=v.name),v.usage!==void 0&&M.setUsage(v.usage),o.setAttribute(g,M)}const d=e.data.morphAttributes;if(d)for(const g in d){const v=d[g],M=[];for(let _=0,S=v.length;_<S;_++){const j=v[_];let A;if(j.isInterleavedBufferAttribute){const C=a(e.data,j.data);A=new Of(C,j.itemSize,j.offset,j.normalized)}else{const C=_0(j.type,j.array);A=new Ds(C,j.itemSize,j.normalized)}j.name!==void 0&&(A.name=j.name),M.push(A)}o.morphAttributes[g]=M}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let g=0,v=m.length;g!==v;++g){const M=m[g];o.addGroup(M.start,M.count,M.materialIndex)}const x=e.data.boundingSphere;return x!==void 0&&(o.boundingSphere=new Yi().fromJSON(x)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class $B extends yr{constructor(e){super(e)}load(e,t,n,a){const r=this,o=this.path===""?HS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new so(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let d=null;try{d=JSON.parse(u)}catch(m){a!==void 0&&a(m),m("ObjectLoader: Can't parse "+e+".",m.message);return}const f=d.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),wn("ObjectLoader: Can't load "+e);return}r.parse(d,t)},n,a)}async loadAsync(e,t){const n=this,a=this.path===""?HS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const r=new so(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,a),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,r,u,l,n),f=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,f),this.bindLightTargets(d),t!==void 0){let m=!1;for(const x in o)if(o[x].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,t),d=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,d),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let n=0,a=e.length;n<a;n++){const r=new rc().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},a={};if(t.traverse(function(r){r.isBone&&(a[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const l=new hb().fromJSON(e[r],a);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const a=new HN;for(let r=0,o=e.length;r<o;r++){let l;const u=e[r];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=a.parse(u);break;default:u.type in sE?l=sE[u.type].fromJSON(u,t):qt(`ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(e,t){const n={},a={};if(e!==void 0){const r=new Nb;r.setTextures(t);for(let o=0,l=e.length;o<l;o++){const u=e[o];n[u.uuid]===void 0&&(n[u.uuid]=r.parse(u)),a[u.uuid]=n[u.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const a=e[n],r=Px.parse(a);t[r.uuid]=r}return t}parseImages(e,t){const n=this,a={};let r;function o(u){return n.manager.itemStart(u),r.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const d=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(f)}else return u.data?{data:_0(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new Cb(t);r=new Ox(u),r.setCrossOrigin(this.crossOrigin);for(let d=0,f=e.length;d<f;d++){const m=e[d],x=m.url;if(Array.isArray(x)){const g=[];for(let v=0,M=x.length;v<M;v++){const _=x[v],S=l(_);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new Lo(S.data,S.width,S.height)))}a[m.uuid]=new td(g)}else{const g=l(m.url);a[m.uuid]=new td(g)}}}return a}async parseImagesAsync(e){const t=this,n={};let a;async function r(o){if(typeof o=="string"){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await a.loadAsync(u)}else return o.data?{data:_0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){a=new Ox(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const u=e[o],d=u.url;if(Array.isArray(d)){const f=[];for(let m=0,x=d.length;m<x;m++){const g=d[m],v=await r(g);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Lo(v.data,v.width,v.height)))}n[u.uuid]=new td(f)}else{const f=await r(u.url);n[u.uuid]=new td(f)}}}return n}parseTextures(e,t){function n(r,o){return typeof r=="number"?r:(qt("ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const a={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const l=e[r];l.image===void 0&&qt('ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&qt("ObjectLoader: Undefined image",l.image);const u=t[l.image],d=u.data;let f;Array.isArray(d)?(f=new Zx,d.length===6&&(f.needsUpdate=!0)):(d&&d.data?f=new Lo:f=new Es,d&&(f.needsUpdate=!0)),f.source=u,f.uuid=l.uuid,l.name!==void 0&&(f.name=l.name),l.mapping!==void 0&&(f.mapping=n(l.mapping,e9)),l.channel!==void 0&&(f.channel=l.channel),l.offset!==void 0&&f.offset.fromArray(l.offset),l.repeat!==void 0&&f.repeat.fromArray(l.repeat),l.center!==void 0&&f.center.fromArray(l.center),l.rotation!==void 0&&(f.rotation=l.rotation),l.wrap!==void 0&&(f.wrapS=n(l.wrap[0],oE),f.wrapT=n(l.wrap[1],oE)),l.format!==void 0&&(f.format=l.format),l.internalFormat!==void 0&&(f.internalFormat=l.internalFormat),l.type!==void 0&&(f.type=l.type),l.colorSpace!==void 0&&(f.colorSpace=l.colorSpace),l.minFilter!==void 0&&(f.minFilter=n(l.minFilter,lE)),l.magFilter!==void 0&&(f.magFilter=n(l.magFilter,lE)),l.anisotropy!==void 0&&(f.anisotropy=l.anisotropy),l.flipY!==void 0&&(f.flipY=l.flipY),l.generateMipmaps!==void 0&&(f.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(f.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(f.compareFunction=l.compareFunction),l.userData!==void 0&&(f.userData=l.userData),a[l.uuid]=f}return a}parseObject(e,t,n,a,r){let o;function l(x){return t[x]===void 0&&qt("ObjectLoader: Undefined geometry",x),t[x]}function u(x){if(x!==void 0){if(Array.isArray(x)){const g=[];for(let v=0,M=x.length;v<M;v++){const _=x[v];n[_]===void 0&&qt("ObjectLoader: Undefined material",_),g.push(n[_])}return g}return n[x]===void 0&&qt("ObjectLoader: Undefined material",x),n[x]}}function d(x){return a[x]===void 0&&qt("ObjectLoader: Undefined texture",x),a[x]}let f,m;switch(e.type){case"Scene":o=new Kx,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Lt(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new db(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ub(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ci(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new xl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new kN(e.color,e.intensity);break;case"DirectionalLight":o=new IN(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new GN(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new BN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new zN(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new ON(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new VN().fromJSON(e);break;case"SkinnedMesh":f=l(e.geometry),m=u(e.material),o=new aN(f,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=l(e.geometry),m=u(e.material),o=new Bs(f,m);break;case"InstancedMesh":f=l(e.geometry),m=u(e.material);const x=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new rN(f,m,x),o.instanceMatrix=new zf(new Float32Array(g.array),16),v!==void 0&&(o.instanceColor=new zf(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=l(e.geometry),m=u(e.material),o=new oN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(M=>{let _=null,S=null;return M.boundingBox!==void 0&&(_=new zi().fromJSON(M.boundingBox)),M.boundingSphere!==void 0&&(S=new Yi().fromJSON(M.boundingSphere)),{...M,boundingBox:_,boundingSphere:S}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=d(e.matricesTexture.uuid),o._indirectTexture=d(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Yi().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new zi().fromJSON(e.boundingBox));break;case"LOD":o=new iN;break;case"Line":o=new cd(l(e.geometry),u(e.material));break;case"LineLoop":o=new lN(l(e.geometry),u(e.material));break;case"LineSegments":o=new uc(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new cN(l(e.geometry),u(e.material));break;case"Sprite":o=new sN(u(e.material));break;case"Group":o=new w0;break;case"Bone":o=new a3;break;default:o=new ls}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let g=0;g<x.length;g++)o.add(this.parseObject(x[g],t,n,a,r))}if(e.animations!==void 0){const x=e.animations;for(let g=0;g<x.length;g++){const v=x[g];o.animations.push(r[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const x=e.levels;for(let g=0;g<x.length;g++){const v=x[g],M=o.getObjectByProperty("uuid",v.object);M!==void 0&&o.addLevel(M,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=t[n.skeleton];a===void 0?qt("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,a=e.getObjectByProperty("uuid",n);a!==void 0?t.target=a:t.target=new ls}})}}const e9={UVMapping:rd,CubeReflectionMapping:oc,CubeRefractionMapping:od,EquirectangularReflectionMapping:N0,EquirectangularRefractionMapping:Mx,CubeUVReflectionMapping:K0},oE={RepeatWrapping:Sx,ClampToEdgeWrapping:bi,MirroredRepeatWrapping:_x},lE={NearestFilter:Wi,NearestMipmapNearestFilter:q_,NearestMipmapLinearFilter:S0,LinearFilter:ss,LinearMipmapNearestFilter:nx,LinearMipmapLinearFilter:tc},wM=new WeakMap;class t9 extends yr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&qt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&qt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=nc.get(`image-bitmap:${e}`);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(d=>{if(wM.has(o)===!0)a&&a(wM.get(o)),r.manager.itemError(e),r.manager.itemEnd(e);else return t&&t(d),r.manager.itemEnd(e),d});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,l.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const u=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(d){return nc.add(`image-bitmap:${e}`,d),t&&t(d),r.manager.itemEnd(e),d}).catch(function(d){a&&a(d),wM.set(u,d),nc.remove(`image-bitmap:${e}`),r.manager.itemError(e),r.manager.itemEnd(e)});nc.add(`image-bitmap:${e}`,u),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let av;class M3{static getContext(){return av===void 0&&(av=new(window.AudioContext||window.webkitAudioContext)),av}static setContext(e){av=e}}class n9 extends yr{constructor(e){super(e)}load(e,t,n,a){const r=this,o=new so(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const d=u.slice(0);M3.getContext().decodeAudioData(d,function(m){t(m)}).catch(l)}catch(d){l(d)}},n,a);function l(u){a?a(u):wn(u),r.manager.itemError(e)}}}const cE=new mn,uE=new mn,lf=new mn;class s9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lf.copy(e.projectionMatrix);const a=t.eyeSep/2,r=a*t.near/t.focus,o=t.near*Math.tan(Lf*t.fov*.5)/t.zoom;let l,u;uE.elements[12]=-a,cE.elements[12]=a,l=-o*t.aspect+r,u=o*t.aspect+r,lf.elements[0]=2*t.near/(u-l),lf.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(lf),l=-o*t.aspect-r,u=o*t.aspect-r,lf.elements[0]=2*t.near/(u-l),lf.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(lf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(uE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(cE)}}class qN extends ci{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class S3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const cf=new Q,jM=new Wn,i9=new Q,uf=new Q,df=new Q;class a9 extends ls{constructor(){super(),this.type="AudioListener",this.context=M3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new S3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cf,jM,i9),uf.set(0,0,-1).applyQuaternion(jM),df.set(0,1,0).applyQuaternion(jM),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(cf.x,n),t.positionY.linearRampToValueAtTime(cf.y,n),t.positionZ.linearRampToValueAtTime(cf.z,n),t.forwardX.linearRampToValueAtTime(uf.x,n),t.forwardY.linearRampToValueAtTime(uf.y,n),t.forwardZ.linearRampToValueAtTime(uf.z,n),t.upX.linearRampToValueAtTime(df.x,n),t.upY.linearRampToValueAtTime(df.y,n),t.upZ.linearRampToValueAtTime(df.z,n)}else t.setPosition(cf.x,cf.y,cf.z),t.setOrientation(uf.x,uf.y,uf.z,df.x,df.y,df.z)}}class XN extends ls{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){qt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){qt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){qt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){qt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){qt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(qt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){qt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(qt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const ff=new Q,dE=new Wn,r9=new Q,hf=new Q;class o9 extends XN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ff,dE,r9),hf.set(0,0,1).applyQuaternion(dE);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ff.x,n),t.positionY.linearRampToValueAtTime(ff.y,n),t.positionZ.linearRampToValueAtTime(ff.z,n),t.orientationX.linearRampToValueAtTime(hf.x,n),t.orientationY.linearRampToValueAtTime(hf.y,n),t.orientationZ.linearRampToValueAtTime(hf.z,n)}else t.setPosition(ff.x,ff.y,ff.z),t.setOrientation(hf.x,hf.y,hf.z)}}class l9{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class WN{constructor(e,t,n){this.binding=e,this.valueSize=n;let a,r,o;switch(t){case"quaternion":a=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,a=this.valueSize,r=e*a+a;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==a;++l)n[r+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,r,0,l,a)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,a=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const u=t*this._origIndex;this._mixBufferRegion(n,a,u,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*t,1,t);for(let u=t,d=t+t;u!==d;++u)if(n[u]!==n[u+t]){l.setValue(n,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,a=n*this._origIndex;e.getValue(t,a);for(let r=n,o=a;r!==o;++r)t[r]=t[a+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,a,r){if(a>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,a){Wn.slerpFlat(e,t,e,t,e,n,a)}_slerpAdditive(e,t,n,a,r){const o=this._workIndex*r;Wn.multiplyQuaternionsFlat(e,o,e,t,e,n),Wn.slerpFlat(e,t,e,t,e,o,a)}_lerp(e,t,n,a,r){const o=1-a;for(let l=0;l!==r;++l){const u=t+l;e[u]=e[u]*o+e[n+l]*a}}_lerpAdditive(e,t,n,a,r){for(let o=0;o!==r;++o){const l=t+o;e[l]=e[l]+e[n+o]*a}}}const _3="\\[\\]\\.:\\/",c9=new RegExp("["+_3+"]","g"),w3="[^"+_3+"]",u9="[^"+_3.replace("\\.","")+"]",d9=/((?:WC+[\/:])*)/.source.replace("WC",w3),f9=/(WCOD+)?/.source.replace("WCOD",u9),h9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",w3),m9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",w3),p9=new RegExp("^"+d9+f9+h9+m9+"$"),x9=["material","materials","bones","map"];class g9{constructor(e,t,n){const a=n||os.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,r=n.length;a!==r;++a)n[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class os{constructor(e,t,n){this.path=t,this.parsedPath=n||os.parseTrackName(t),this.node=os.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new os.Composite(e,t,n):new os(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(c9,"")}static parseTrackName(e){const t=p9.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const r=n.nodeName.substring(a+1);x9.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let o=0;o<r.length;o++){const l=r[o];if(l.name===t||l.uuid===t)return l;const u=n(l.children);if(u)return u}return null},a=n(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)e[t++]=n[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)n[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)n[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)n[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,a=t.propertyName;let r=t.propertyIndex;if(e||(e=os.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){qt("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){wn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){wn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){wn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===d){d=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){wn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){wn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){wn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){wn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[a];if(o===void 0){const d=t.nodeName;wn("PropertyBinding: Trying to update property for track: "+d+"."+a+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(r!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){wn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){wn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}os.Composite=g9;os.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};os.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};os.prototype.GetterByBindingType=[os.prototype._getValue_direct,os.prototype._getValue_array,os.prototype._getValue_arrayElement,os.prototype._getValue_toArray];os.prototype.SetterByBindingTypeAndVersioning=[[os.prototype._setValue_direct,os.prototype._setValue_direct_setNeedsUpdate,os.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[os.prototype._setValue_array,os.prototype._setValue_array_setNeedsUpdate,os.prototype._setValue_array_setMatrixWorldNeedsUpdate],[os.prototype._setValue_arrayElement,os.prototype._setValue_arrayElement_setNeedsUpdate,os.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[os.prototype._setValue_fromArray,os.prototype._setValue_fromArray_setNeedsUpdate,os.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class v9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=no(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,a=arguments.length;n!==a;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,a=this._parsedPaths,r=this._bindings,o=r.length;let l,u=e.length,d=this.nCachedObjects_;for(let f=0,m=arguments.length;f!==m;++f){const x=arguments[f],g=x.uuid;let v=t[g];if(v===void 0){v=u++,t[g]=v,e.push(x);for(let M=0,_=o;M!==_;++M)r[M].push(new os(x,n[M],a[M]))}else if(v<d){l=e[v];const M=--d,_=e[M];t[_.uuid]=v,e[v]=_,t[g]=M,e[M]=x;for(let S=0,j=o;S!==j;++S){const A=r[S],C=A[M];let N=A[v];A[v]=C,N===void 0&&(N=new os(x,n[S],a[S])),A[M]=N}}else e[v]!==l&&wn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let r=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],d=u.uuid,f=t[d];if(f!==void 0&&f>=r){const m=r++,x=e[m];t[x.uuid]=f,e[f]=x,t[d]=m,e[m]=u;for(let g=0,v=a;g!==v;++g){const M=n[g],_=M[m],S=M[f];M[f]=_,M[m]=S}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let r=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],f=d.uuid,m=t[f];if(m!==void 0)if(delete t[f],m<r){const x=--r,g=e[x],v=--o,M=e[v];t[g.uuid]=m,e[m]=g,t[M.uuid]=x,e[x]=M,e.pop();for(let _=0,S=a;_!==S;++_){const j=n[_],A=j[x],C=j[v];j[m]=A,j[x]=C,j.pop()}}else{const x=--o,g=e[x];x>0&&(t[g.uuid]=m),e[m]=g,e.pop();for(let v=0,M=a;v!==M;++v){const _=n[v];_[m]=_[x],_.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let a=n[e];const r=this._bindings;if(a!==void 0)return r[a];const o=this._paths,l=this._parsedPaths,u=this._objects,d=u.length,f=this.nCachedObjects_,m=new Array(d);a=r.length,n[e]=a,o.push(e),l.push(t),r.push(m);for(let x=f,g=u.length;x!==g;++x){const v=u[x];m[x]=new os(v,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const a=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],d=e[l];t[d]=n,o[n]=u,o.pop(),r[n]=r[l],r.pop(),a[n]=a[l],a.pop()}}}class YN{constructor(e,t,n=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=a;const r=t.tracks,o=r.length,l=new Array(o),u={endingStart:jf,endingEnd:jf};for(let d=0;d!==o;++d){const f=r[d].createInterpolant(null);l[d]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=IC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const a=this._clip.duration,r=e._clip.duration,o=r/a,l=a/r;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const a=this._mixer,r=a.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=a._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=r,u[1]=r+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,a){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const u=(e-r)*n;u<0||n===0?t=0:(this._startTime=null,t=n*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case K_:for(let f=0,m=u.length;f!==m;++f)u[f].evaluate(o),d[f].accumulateAdditive(l);break;case ab:default:for(let f=0,m=u.length;f!==m;++f)u[f].evaluate(o),d[f].accumulate(a,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let a=this.time+e,r=this._loopCount;const o=n===kC;if(e===0)return r===-1?a:o&&(r&1)===1?t-a:a;if(n===GC){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a>=t||a<0){const l=Math.floor(a/t);a-=t*l,r+=Math.abs(l);const u=this.repetitions-r;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=a;if(o&&(r&1)===1)return t-a}return a}_setEndings(e,t,n){const a=this._interpolantSettings;n?(a.endingStart=Ef,a.endingEnd=Ef):(e?a.endingStart=this.zeroSlopeAtStart?Ef:jf:a.endingStart=jx,t?a.endingEnd=this.zeroSlopeAtEnd?Ef:jf:a.endingEnd=jx)}_scheduleFading(e,t,n){const a=this._mixer,r=a.time;let o=this._weightInterpolant;o===null&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=r,u[0]=t,l[1]=r+e,u[1]=n,this}}const y9=new Float32Array(1);class b9 extends cc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,a=e._clip.tracks,r=a.length,o=e._propertyBindings,l=e._interpolants,u=n.uuid,d=this._bindingsByRootAndName;let f=d[u];f===void 0&&(f={},d[u]=f);for(let m=0;m!==r;++m){const x=a[m],g=x.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[m]=v;else{if(v=o[m],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}const M=t&&t._propertyBindings[m].binding.parsedPath;v=new WN(os.create(n,g,M),x.ValueTypeName,x.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),o[m]=v}l[m].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,a=e._clip.uuid,r=this._actionsByClip[a];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,a,n)}const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const a=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=a.length,a.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],a=e._cacheIndex;n._cacheIndex=a,t[a]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,l=o[r],u=l.knownActions,d=u[u.length-1],f=e._byClipCacheIndex;d._byClipCacheIndex=f,u[f]=d,u.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,x=(e._localRoot||this._root).uuid;delete m[x],u.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,a=this._nActiveActions++,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,a=--this._nActiveActions,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const a=this._bindingsByRootAndName,r=this._bindings;let o=a[t];o===void 0&&(o={},a[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,a=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,l=o[a],u=t[t.length-1],d=e._cacheIndex;u._cacheIndex=d,t[d]=u,t.pop(),delete l[r],Object.keys(l).length===0&&delete o[a]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,a=this._nActiveBindings++,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,a=--this._nActiveBindings,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new x3(new Float32Array(2),new Float32Array(2),1,y9),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,a=--this._nActiveControlInterpolants,r=t[a];e.__cacheIndex=a,t[a]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const a=t||this._root,r=a.uuid;let o=typeof e=="string"?Px.findByName(a,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=ab),u!==void 0){const m=u.actionByRoot[r];if(m!==void 0&&m.blendMode===n)return m;d=u.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const f=new YN(this,o,t,n);return this._bindAction(f,d),this._addInactiveAction(f,l,r),f}existingAction(e,t){const n=t||this._root,a=n.uuid,r=typeof e=="string"?Px.findByName(n,e):e,o=r?r.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,a=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(a,e,r,o);const l=this._bindings,u=this._nActiveBindings;for(let d=0;d!==u;++d)l[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,a=this._actionsByClip,r=a[n];if(r!==void 0){const o=r.knownActions;for(let l=0,u=o.length;l!==u;++l){const d=o[l];this._deactivateAction(d);const f=d._cacheIndex,m=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=f,t[f]=m,t.pop(),this._removeInactiveBindingsForAction(d)}delete a[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const a=this._bindingsByRootAndName,r=a[t];if(r!==void 0)for(const o in r){const l=r[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class M9 extends e3{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new ob(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Rb{constructor(e){this.value=e}clone(){return new Rb(this.value.clone===void 0?this.value:this.value.clone())}}let S9=0;class _9 extends cc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:S9++}),this.name="",this.usage=Tx,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,a=t.length;n<a;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class w9 extends fb{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class j9{constructor(e,t,n,a,r,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=a,this.count=r,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const fE=new mn;class j3{constructor(e,t,n=0,a=1/0){this.ray=new kf(e,t),this.near=n,this.far=a,this.camera=null,this.layers=new G0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):wn("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return fE.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(fE),this}intersectObject(e,t=!0,n=[]){return qS(e,this,n,t),n.sort(hE),n}intersectObjects(e,t=!0,n=[]){for(let a=0,r=e.length;a<r;a++)qS(e[a],this,n,t);return n.sort(hE),n}}function hE(i,e){return i.distance-e.distance}function qS(i,e,t,n){let a=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(a=!1),a===!0&&n===!0){const r=i.children;for(let o=0,l=r.length;o<l;o++)qS(r[o],e,t,!0)}}class E9{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=T9.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function T9(){this._document.hidden===!1&&this.reset()}class Oy{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=bn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(bn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class A9{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class E3{constructor(e,t,n,a){E3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,a){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=a,this}}const mE=new pt;class C9{constructor(e=new pt(1/0,1/0),t=new pt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pE=new Q,rv=new Q,r0=new Q,o0=new Q,EM=new Q,N9=new Q,R9=new Q;class D9{constructor(e=new Q,t=new Q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){pE.subVectors(e,this.start),rv.subVectors(this.end,this.start);const n=rv.dot(rv);let r=rv.dot(pE)/n;return t&&(r=bn(r,0,1)),r}closestPointToPoint(e,t,n){const a=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=N9,n=R9){const a=10000000000000001e-32;let r,o;const l=this.start,u=e.start,d=this.end,f=e.end;r0.subVectors(d,l),o0.subVectors(f,u),EM.subVectors(l,u);const m=r0.dot(r0),x=o0.dot(o0),g=o0.dot(EM);if(m<=a&&x<=a)return t.copy(l),n.copy(u),t.sub(n),t.dot(t);if(m<=a)r=0,o=g/x,o=bn(o,0,1);else{const v=r0.dot(EM);if(x<=a)o=0,r=bn(-v/m,0,1);else{const M=r0.dot(o0),_=m*x-M*M;_!==0?r=bn((M*g-v*x)/_,0,1):r=0,o=(M*r+g)/x,o<0?(o=0,r=bn(-v/m,0,1)):o>1&&(o=1,r=bn((M-v)/m,0,1))}}return t.copy(l).add(r0.multiplyScalar(r)),n.copy(u).add(o0.multiplyScalar(o)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const xE=new Q;class L9 extends ls{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Dn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o<u;o++,l++){const d=o/u*Math.PI*2,f=l/u*Math.PI*2;a.push(Math.cos(d),Math.sin(d),1,Math.cos(f),Math.sin(f),1)}n.setAttribute("position",new tn(a,3));const r=new vr({fog:!1,toneMapped:!1});this.cone=new uc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),xE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ju=new Q,ov=new mn,TM=new mn;class U9 extends uc{constructor(e){const t=ZN(e),n=new Dn,a=[],r=[];for(let d=0;d<t.length;d++){const f=t[d];f.parent&&f.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new tn(a,3)),n.setAttribute("color",new tn(r,3));const o=new vr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const l=new Lt(255),u=new Lt(65280);this.setColors(l,u)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,a=n.getAttribute("position");TM.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const l=t[r];l.parent&&l.parent.isBone&&(ov.multiplyMatrices(TM,l.matrixWorld),Ju.setFromMatrixPosition(ov),a.setXYZ(o,Ju.x,Ju.y,Ju.z),ov.multiplyMatrices(TM,l.parent.matrixWorld),Ju.setFromMatrixPosition(ov),a.setXYZ(o+1,Ju.x,Ju.y,Ju.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let r=0;r<a.count;r+=2)a.setXYZ(r,e.r,e.g,e.b),a.setXYZ(r+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function ZN(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...ZN(i.children[t]));return e}class P9 extends Bs{constructor(e,t,n){const a=new tg(t,4,2),r=new vl({wireframe:!0,fog:!1,toneMapped:!1});super(a,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const O9=new Q,gE=new Lt,vE=new Lt;class z9 extends ls{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new eg(t);a.rotateY(Math.PI*.5),this.material=new vl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=a.getAttribute("position"),o=new Float32Array(r.count*3);a.setAttribute("color",new Ds(o,3)),this.add(new Bs(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");gE.copy(this.light.color),vE.copy(this.light.groundColor);for(let n=0,a=t.count;n<a;n++){const r=n<a/2?gE:vE;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(O9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class G9 extends uc{constructor(e=10,t=10,n=4473924,a=8947848){n=new Lt(n),a=new Lt(a);const r=t/2,o=e/t,l=e/2,u=[],d=[];for(let x=0,g=0,v=-l;x<=t;x++,v+=o){u.push(-l,0,v,l,0,v),u.push(v,0,-l,v,0,l);const M=x===r?n:a;M.toArray(d,g),g+=3,M.toArray(d,g),g+=3,M.toArray(d,g),g+=3,M.toArray(d,g),g+=3}const f=new Dn;f.setAttribute("position",new tn(u,3)),f.setAttribute("color",new tn(d,3));const m=new vr({vertexColors:!0,toneMapped:!1});super(f,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class I9 extends uc{constructor(e=10,t=16,n=8,a=64,r=4473924,o=8947848){r=new Lt(r),o=new Lt(o);const l=[],u=[];if(t>1)for(let m=0;m<t;m++){const x=m/t*(Math.PI*2),g=Math.sin(x)*e,v=Math.cos(x)*e;l.push(0,0,0),l.push(g,0,v);const M=m&1?r:o;u.push(M.r,M.g,M.b),u.push(M.r,M.g,M.b)}for(let m=0;m<n;m++){const x=m&1?r:o,g=e-e/n*m;for(let v=0;v<a;v++){let M=v/a*(Math.PI*2),_=Math.sin(M)*g,S=Math.cos(M)*g;l.push(_,0,S),u.push(x.r,x.g,x.b),M=(v+1)/a*(Math.PI*2),_=Math.sin(M)*g,S=Math.cos(M)*g,l.push(_,0,S),u.push(x.r,x.g,x.b)}}const d=new Dn;d.setAttribute("position",new tn(l,3)),d.setAttribute("color",new tn(u,3));const f=new vr({vertexColors:!0,toneMapped:!1});super(d,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const yE=new Q,lv=new Q,bE=new Q;class k9 extends ls{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new Dn;a.setAttribute("position",new tn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new vr({fog:!1,toneMapped:!1});this.lightPlane=new cd(a,r),this.add(this.lightPlane),a=new Dn,a.setAttribute("position",new tn([0,0,0,0,0,1],3)),this.targetLine=new cd(a,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),yE.setFromMatrixPosition(this.light.matrixWorld),lv.setFromMatrixPosition(this.light.target.matrixWorld),bE.subVectors(lv,yE),this.lightPlane.lookAt(lv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lv),this.targetLine.scale.z=bE.length()}}const cv=new Q,gi=new cb;class B9 extends uc{constructor(e){const t=new Dn,n=new vr({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],r=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(v,M){u(v),u(M)}function u(v){a.push(0,0,0),r.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(a.length/3-1)}t.setAttribute("position",new tn(a,3)),t.setAttribute("color",new tn(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new Lt(16755200),f=new Lt(16711680),m=new Lt(43775),x=new Lt(16777215),g=new Lt(3355443);this.setColors(d,f,m,x,g)}setColors(e,t,n,a,r){const l=this.geometry.getAttribute("color");return l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,a.r,a.g,a.b),l.setXYZ(39,a.r,a.g,a.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,a=1;let r,o;if(gi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,o=0;else if(this.camera.coordinateSystem===to)r=-1,o=1;else if(this.camera.coordinateSystem===P0)r=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ji("c",t,e,gi,0,0,r),ji("t",t,e,gi,0,0,o),ji("n1",t,e,gi,-n,-a,r),ji("n2",t,e,gi,n,-a,r),ji("n3",t,e,gi,-n,a,r),ji("n4",t,e,gi,n,a,r),ji("f1",t,e,gi,-n,-a,o),ji("f2",t,e,gi,n,-a,o),ji("f3",t,e,gi,-n,a,o),ji("f4",t,e,gi,n,a,o),ji("u1",t,e,gi,n*.7,a*1.1,r),ji("u2",t,e,gi,-n*.7,a*1.1,r),ji("u3",t,e,gi,0,a*2,r),ji("cf1",t,e,gi,-n,0,o),ji("cf2",t,e,gi,n,0,o),ji("cf3",t,e,gi,0,-a,o),ji("cf4",t,e,gi,0,a,o),ji("cn1",t,e,gi,-n,0,r),ji("cn2",t,e,gi,n,0,r),ji("cn3",t,e,gi,0,-a,r),ji("cn4",t,e,gi,0,a,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ji(i,e,t,n,a,r,o){cv.set(a,r,o).unproject(n);const l=e[i];if(l!==void 0){const u=t.getAttribute("position");for(let d=0,f=l.length;d<f;d++)u.setXYZ(l[d],cv.x,cv.y,cv.z)}}const uv=new zi;class F9 extends uc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),r=new Dn;r.setIndex(new Ds(n,1)),r.setAttribute("position",new Ds(a,3)),super(r,new vr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&uv.setFromObject(this.object),uv.isEmpty())return;const e=uv.min,t=uv.max,n=this.geometry.attributes.position,a=n.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class V9 extends uc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Dn;r.setIndex(new Ds(n,1)),r.setAttribute("position",new tn(a,3)),super(r,new vr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class H9 extends cd{constructor(e,t=1,n=16776960){const a=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Dn;o.setAttribute("position",new tn(r,3)),o.computeBoundingSphere(),super(o,new vr({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Dn;u.setAttribute("position",new tn(l,3)),u.computeBoundingSphere(),this.add(new Bs(u,new vl({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const ME=new Q;let dv,AM;class q9 extends ls{constructor(e=new Q(0,0,1),t=new Q(0,0,0),n=1,a=16776960,r=n*.2,o=r*.2){super(),this.type="ArrowHelper",dv===void 0&&(dv=new Dn,dv.setAttribute("position",new tn([0,0,0,0,1,0],3)),AM=new Jx(.5,1,5,1),AM.translate(0,-.5,0)),this.position.copy(t),this.line=new cd(dv,new vr({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bs(AM,new vl({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ME.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ME,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class X9 extends uc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Dn;a.setAttribute("position",new tn(t,3)),a.setAttribute("color",new tn(n,3));const r=new vr({vertexColors:!0,toneMapped:!1});super(a,r),this.type="AxesHelper"}setColors(e,t,n){const a=new Lt,r=this.geometry.attributes.color.array;return a.set(e),a.toArray(r,0),a.toArray(r,3),a.set(t),a.toArray(r,6),a.toArray(r,9),a.set(n),a.toArray(r,12),a.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class W9{constructor(){this.type="ShapePath",this.color=new Lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Py,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,a){return this.currentPath.quadraticCurveTo(e,t,n,a),this}bezierCurveTo(e,t,n,a,r,o){return this.currentPath.bezierCurveTo(e,t,n,a,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const j=[];for(let A=0,C=S.length;A<C;A++){const N=S[A],R=new rc;R.curves=N.curves,j.push(R)}return j}function n(S,j){const A=j.length;let C=!1;for(let N=A-1,R=0;R<A;N=R++){let O=j[N],U=j[R],z=U.x-O.x,I=U.y-O.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(O=j[R],z=-z,U=j[N],I=-I),S.y<O.y||S.y>U.y)continue;if(S.y===O.y){if(S.x===O.x)return!0}else{const V=I*(S.x-O.x)-z*(S.y-O.y);if(V===0)return!0;if(V<0)continue;C=!C}}else{if(S.y!==O.y)continue;if(U.x<=S.x&&S.x<=O.x||O.x<=S.x&&S.x<=U.x)return!0}}return C}const a=ml.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,l,u;const d=[];if(r.length===1)return l=r[0],u=new rc,u.curves=l.curves,d.push(u),d;let f=!a(r[0].getPoints());f=e?!f:f;const m=[],x=[];let g=[],v=0,M;x[v]=void 0,g[v]=[];for(let S=0,j=r.length;S<j;S++)l=r[S],M=l.getPoints(),o=a(M),o=e?!o:o,o?(!f&&x[v]&&v++,x[v]={s:new rc,p:M},x[v].s.curves=l.curves,f&&v++,g[v]=[]):g[v].push({h:l,p:M[0]});if(!x[0])return t(r);if(x.length>1){let S=!1,j=0;for(let A=0,C=x.length;A<C;A++)m[A]=[];for(let A=0,C=x.length;A<C;A++){const N=g[A];for(let R=0;R<N.length;R++){const O=N[R];let U=!0;for(let z=0;z<x.length;z++)n(O.p,x[z].p)&&(A!==z&&j++,U?(U=!1,m[z].push(O)):S=!0);U&&m[A].push(O)}}j>0&&S===!1&&(g=m)}let _;for(let S=0,j=x.length;S<j;S++){u=x[S].s,d.push(u),_=g[S];for(let A=0,C=_.length;A<C;A++)u.holes.push(_[A].h)}return d}}class Y9 extends cc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){qt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Z9(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function K9(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function J9(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function XS(i,e,t,n){const a=Q9(n);switch(t){case Y_:return i*e;case Wx:return i*e/a.components*a.byteLength;case Yx:return i*e/a.components*a.byteLength;case nb:return i*e*2/a.components*a.byteLength;case sb:return i*e*2/a.components*a.byteLength;case Z_:return i*e*3/a.components*a.byteLength;case Ai:return i*e*4/a.components*a.byteLength;case ib:return i*e*4/a.components*a.byteLength;case sx:case ix:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case ax:case rx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case iy:case ry:return Math.max(i,16)*Math.max(e,8)/4;case sy:case ay:return Math.max(i,8)*Math.max(e,8)/2;case oy:case ly:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case cy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case uy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case dy:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case fy:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case hy:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case my:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case py:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case xy:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case gy:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case vy:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case yy:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case by:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case My:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Sy:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case _y:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case wy:case jy:case Ey:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Ty:case Ay:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Cy:case Ny:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Q9(i){switch(i){case gr:case Qy:return{byteLength:1,components:1};case R0:case $y:case Ti:return{byteLength:2,components:1};case eb:case tb:return{byteLength:2,components:4};case lc:case Xx:case ti:return{byteLength:4,components:1};case X_:case W_:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class $9{static contain(e,t){return Z9(e,t)}static cover(e,t){return K9(e,t)}static fill(e){return J9(e)}static getByteLength(e,t,n,a){return XS(e,t,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Z0}}));typeof window<"u"&&(window.__THREE__?qt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Z0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function KN(){let i=null,e=!1,t=null,n=null;function a(r,o){t(r,o),n=i.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(a),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function eF(i){const e=new WeakMap;function t(l,u){const d=l.array,f=l.usage,m=d.byteLength,x=i.createBuffer();i.bindBuffer(u,x),i.bufferData(u,d,f),l.onUploadCallback();let g;if(d instanceof Float32Array)g=i.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)g=i.HALF_FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?g=i.HALF_FLOAT:g=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=i.SHORT;else if(d instanceof Uint32Array)g=i.UNSIGNED_INT;else if(d instanceof Int32Array)g=i.INT;else if(d instanceof Int8Array)g=i.BYTE;else if(d instanceof Uint8Array)g=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)g=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:x,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:m}}function n(l,u,d){const f=u.array,m=u.updateRanges;if(i.bindBuffer(d,l),m.length===0)i.bufferSubData(d,0,f);else{m.sort((g,v)=>g.start-v.start);let x=0;for(let g=1;g<m.length;g++){const v=m[x],M=m[g];M.start<=v.start+v.count+1?v.count=Math.max(v.count,M.start+M.count-v.start):(++x,m[x]=M)}m.length=x+1;for(let g=0,v=m.length;g<v;g++){const M=m[g];i.bufferSubData(d,M.start*f.BYTES_PER_ELEMENT,f,M.start,M.count)}u.clearUpdateRanges()}u.onUploadCallback()}function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(i.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const f=e.get(l);(!f||f.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,u));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,l,u),d.version=l.version}}return{get:a,remove:r,update:o}}var tF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,sF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,iF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aF=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,rF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,oF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cF=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,uF=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,dF=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,fF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hF=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,mF=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,pF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,gF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,vF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,yF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,bF=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,MF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,SF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_F=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,wF=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,EF=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,TF=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,AF=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,CF=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,NF=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,RF="gl_FragColor = linearToOutputTexel( gl_FragColor );",DF=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,UF=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,PF=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,OF=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,zF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,GF=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,IF=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,BF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,FF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,VF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,qF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,XF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,WF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,YF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ZF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,KF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,JF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,QF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$F=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,e7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,t7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,n7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,s7=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,i7=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,a7=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,r7=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,o7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,l7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,c7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,u7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,d7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,f7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,h7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,m7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,p7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,x7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,g7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,v7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,y7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,b7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,M7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,S7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,w7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,j7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,E7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,T7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,A7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,C7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,N7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,R7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,D7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,L7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,U7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,P7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,O7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,z7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,G7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,I7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,k7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,B7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,F7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,V7=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,H7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,q7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,X7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,W7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Y7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Z7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,K7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,J7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Q7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const eV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,oV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,lV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,uV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,dV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,pV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,yV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,MV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,SV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,CV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NV=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,DV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Un={alphahash_fragment:tF,alphahash_pars_fragment:nF,alphamap_fragment:sF,alphamap_pars_fragment:iF,alphatest_fragment:aF,alphatest_pars_fragment:rF,aomap_fragment:oF,aomap_pars_fragment:lF,batching_pars_vertex:cF,batching_vertex:uF,begin_vertex:dF,beginnormal_vertex:fF,bsdfs:hF,iridescence_fragment:mF,bumpmap_pars_fragment:pF,clipping_planes_fragment:xF,clipping_planes_pars_fragment:gF,clipping_planes_pars_vertex:vF,clipping_planes_vertex:yF,color_fragment:bF,color_pars_fragment:MF,color_pars_vertex:SF,color_vertex:_F,common:wF,cube_uv_reflection_fragment:jF,defaultnormal_vertex:EF,displacementmap_pars_vertex:TF,displacementmap_vertex:AF,emissivemap_fragment:CF,emissivemap_pars_fragment:NF,colorspace_fragment:RF,colorspace_pars_fragment:DF,envmap_fragment:LF,envmap_common_pars_fragment:UF,envmap_pars_fragment:PF,envmap_pars_vertex:OF,envmap_physical_pars_fragment:WF,envmap_vertex:zF,fog_vertex:GF,fog_pars_vertex:IF,fog_fragment:kF,fog_pars_fragment:BF,gradientmap_pars_fragment:FF,lightmap_pars_fragment:VF,lights_lambert_fragment:HF,lights_lambert_pars_fragment:qF,lights_pars_begin:XF,lights_toon_fragment:YF,lights_toon_pars_fragment:ZF,lights_phong_fragment:KF,lights_phong_pars_fragment:JF,lights_physical_fragment:QF,lights_physical_pars_fragment:$F,lights_fragment_begin:e7,lights_fragment_maps:t7,lights_fragment_end:n7,logdepthbuf_fragment:s7,logdepthbuf_pars_fragment:i7,logdepthbuf_pars_vertex:a7,logdepthbuf_vertex:r7,map_fragment:o7,map_pars_fragment:l7,map_particle_fragment:c7,map_particle_pars_fragment:u7,metalnessmap_fragment:d7,metalnessmap_pars_fragment:f7,morphinstance_vertex:h7,morphcolor_vertex:m7,morphnormal_vertex:p7,morphtarget_pars_vertex:x7,morphtarget_vertex:g7,normal_fragment_begin:v7,normal_fragment_maps:y7,normal_pars_fragment:b7,normal_pars_vertex:M7,normal_vertex:S7,normalmap_pars_fragment:_7,clearcoat_normal_fragment_begin:w7,clearcoat_normal_fragment_maps:j7,clearcoat_pars_fragment:E7,iridescence_pars_fragment:T7,opaque_fragment:A7,packing:C7,premultiplied_alpha_fragment:N7,project_vertex:R7,dithering_fragment:D7,dithering_pars_fragment:L7,roughnessmap_fragment:U7,roughnessmap_pars_fragment:P7,shadowmap_pars_fragment:O7,shadowmap_pars_vertex:z7,shadowmap_vertex:G7,shadowmask_pars_fragment:I7,skinbase_vertex:k7,skinning_pars_vertex:B7,skinning_vertex:F7,skinnormal_vertex:V7,specularmap_fragment:H7,specularmap_pars_fragment:q7,tonemapping_fragment:X7,tonemapping_pars_fragment:W7,transmission_fragment:Y7,transmission_pars_fragment:Z7,uv_pars_fragment:K7,uv_pars_vertex:J7,uv_vertex:Q7,worldpos_vertex:$7,background_vert:eV,background_frag:tV,backgroundCube_vert:nV,backgroundCube_frag:sV,cube_vert:iV,cube_frag:aV,depth_vert:rV,depth_frag:oV,distanceRGBA_vert:lV,distanceRGBA_frag:cV,equirect_vert:uV,equirect_frag:dV,linedashed_vert:fV,linedashed_frag:hV,meshbasic_vert:mV,meshbasic_frag:pV,meshlambert_vert:xV,meshlambert_frag:gV,meshmatcap_vert:vV,meshmatcap_frag:yV,meshnormal_vert:bV,meshnormal_frag:MV,meshphong_vert:SV,meshphong_frag:_V,meshphysical_vert:wV,meshphysical_frag:jV,meshtoon_vert:EV,meshtoon_frag:TV,points_vert:AV,points_frag:CV,shadow_vert:NV,shadow_frag:RV,sprite_vert:DV,sprite_frag:LV},Ht={common:{diffuse:{value:new Lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tn}},envmap:{envMap:{value:null},envMapRotation:{value:new Tn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tn},normalScale:{value:new pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0},uvTransform:{value:new Tn}},sprite:{diffuse:{value:new Lt(16777215)},opacity:{value:1},center:{value:new pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}}},hl={basic:{uniforms:hr([Ht.common,Ht.specularmap,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.fog]),vertexShader:Un.meshbasic_vert,fragmentShader:Un.meshbasic_frag},lambert:{uniforms:hr([Ht.common,Ht.specularmap,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.fog,Ht.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Un.meshlambert_vert,fragmentShader:Un.meshlambert_frag},phong:{uniforms:hr([Ht.common,Ht.specularmap,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.fog,Ht.lights,{emissive:{value:new Lt(0)},specular:{value:new Lt(1118481)},shininess:{value:30}}]),vertexShader:Un.meshphong_vert,fragmentShader:Un.meshphong_frag},standard:{uniforms:hr([Ht.common,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.roughnessmap,Ht.metalnessmap,Ht.fog,Ht.lights,{emissive:{value:new Lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Un.meshphysical_vert,fragmentShader:Un.meshphysical_frag},toon:{uniforms:hr([Ht.common,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.gradientmap,Ht.fog,Ht.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Un.meshtoon_vert,fragmentShader:Un.meshtoon_frag},matcap:{uniforms:hr([Ht.common,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.fog,{matcap:{value:null}}]),vertexShader:Un.meshmatcap_vert,fragmentShader:Un.meshmatcap_frag},points:{uniforms:hr([Ht.points,Ht.fog]),vertexShader:Un.points_vert,fragmentShader:Un.points_frag},dashed:{uniforms:hr([Ht.common,Ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Un.linedashed_vert,fragmentShader:Un.linedashed_frag},depth:{uniforms:hr([Ht.common,Ht.displacementmap]),vertexShader:Un.depth_vert,fragmentShader:Un.depth_frag},normal:{uniforms:hr([Ht.common,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,{opacity:{value:1}}]),vertexShader:Un.meshnormal_vert,fragmentShader:Un.meshnormal_frag},sprite:{uniforms:hr([Ht.sprite,Ht.fog]),vertexShader:Un.sprite_vert,fragmentShader:Un.sprite_frag},background:{uniforms:{uvTransform:{value:new Tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Un.background_vert,fragmentShader:Un.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tn}},vertexShader:Un.backgroundCube_vert,fragmentShader:Un.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Un.cube_vert,fragmentShader:Un.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Un.equirect_vert,fragmentShader:Un.equirect_frag},distanceRGBA:{uniforms:hr([Ht.common,Ht.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Un.distanceRGBA_vert,fragmentShader:Un.distanceRGBA_frag},shadow:{uniforms:hr([Ht.lights,Ht.fog,{color:{value:new Lt(0)},opacity:{value:1}}]),vertexShader:Un.shadow_vert,fragmentShader:Un.shadow_frag}};hl.physical={uniforms:hr([hl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tn},clearcoatNormalScale:{value:new pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tn},sheen:{value:0},sheenColor:{value:new Lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tn},transmissionSamplerSize:{value:new pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tn},attenuationDistance:{value:0},attenuationColor:{value:new Lt(0)},specularColor:{value:new Lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tn},anisotropyVector:{value:new pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tn}}]),vertexShader:Un.meshphysical_vert,fragmentShader:Un.meshphysical_frag};const fv={r:0,b:0,g:0},mf=new is,UV=new mn;function PV(i,e,t,n,a,r,o){const l=new Lt(0);let u=r===!0?0:1,d,f,m=null,x=0,g=null;function v(A){let C=A.isScene===!0?A.background:null;return C&&C.isTexture&&(C=(A.backgroundBlurriness>0?t:e).get(C)),C}function M(A){let C=!1;const N=v(A);N===null?S(l,u):N&&N.isColor&&(S(N,1),C=!0);const R=i.xr.getEnvironmentBlendMode();R==="additive"?n.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||C)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function _(A,C){const N=v(C);N&&(N.isCubeTexture||N.mapping===K0)?(f===void 0&&(f=new Bs(new nn(1,1,1),new Zi({name:"BackgroundCubeMaterial",uniforms:I0(hl.backgroundCube.uniforms),vertexShader:hl.backgroundCube.vertexShader,fragmentShader:hl.backgroundCube.fragmentShader,side:la,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,O,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(f)),mf.copy(C.backgroundRotation),mf.x*=-1,mf.y*=-1,mf.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(mf.y*=-1,mf.z*=-1),f.material.uniforms.envMap.value=N,f.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(UV.makeRotationFromEuler(mf)),f.material.toneMapped=ts.getTransfer(N.colorSpace)!==js,(m!==N||x!==N.version||g!==i.toneMapping)&&(f.material.needsUpdate=!0,m=N,x=N.version,g=i.toneMapping),f.layers.enableAll(),A.unshift(f,f.geometry,f.material,0,0,null)):N&&N.isTexture&&(d===void 0&&(d=new Bs(new Ta(2,2),new Zi({name:"BackgroundMaterial",uniforms:I0(hl.background.uniforms),vertexShader:hl.background.vertexShader,fragmentShader:hl.background.fragmentShader,side:au,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(d)),d.material.uniforms.t2D.value=N,d.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,d.material.toneMapped=ts.getTransfer(N.colorSpace)!==js,N.matrixAutoUpdate===!0&&N.updateMatrix(),d.material.uniforms.uvTransform.value.copy(N.matrix),(m!==N||x!==N.version||g!==i.toneMapping)&&(d.material.needsUpdate=!0,m=N,x=N.version,g=i.toneMapping),d.layers.enableAll(),A.unshift(d,d.geometry,d.material,0,0,null))}function S(A,C){A.getRGB(fv,eN(i)),n.buffers.color.setClear(fv.r,fv.g,fv.b,C,o)}function j(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return l},setClearColor:function(A,C=1){l.set(A),u=C,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(A){u=A,S(l,u)},render:M,addToRenderList:_,dispose:j}}function OV(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=x(null);let r=a,o=!1;function l(I,V,F,q,W){let ie=!1;const B=m(q,F,V);r!==B&&(r=B,d(r.object)),ie=g(I,q,F,W),ie&&v(I,q,F,W),W!==null&&e.update(W,i.ELEMENT_ARRAY_BUFFER),(ie||o)&&(o=!1,C(I,V,F,q),W!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function u(){return i.createVertexArray()}function d(I){return i.bindVertexArray(I)}function f(I){return i.deleteVertexArray(I)}function m(I,V,F){const q=F.wireframe===!0;let W=n[I.id];W===void 0&&(W={},n[I.id]=W);let ie=W[V.id];ie===void 0&&(ie={},W[V.id]=ie);let B=ie[q];return B===void 0&&(B=x(u()),ie[q]=B),B}function x(I){const V=[],F=[],q=[];for(let W=0;W<t;W++)V[W]=0,F[W]=0,q[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:F,attributeDivisors:q,object:I,attributes:{},index:null}}function g(I,V,F,q){const W=r.attributes,ie=V.attributes;let B=0;const J=F.getAttributes();for(const $ in J)if(J[$].location>=0){const re=W[$];let H=ie[$];if(H===void 0&&($==="instanceMatrix"&&I.instanceMatrix&&(H=I.instanceMatrix),$==="instanceColor"&&I.instanceColor&&(H=I.instanceColor)),re===void 0||re.attribute!==H||H&&re.data!==H.data)return!0;B++}return r.attributesNum!==B||r.index!==q}function v(I,V,F,q){const W={},ie=V.attributes;let B=0;const J=F.getAttributes();for(const $ in J)if(J[$].location>=0){let re=ie[$];re===void 0&&($==="instanceMatrix"&&I.instanceMatrix&&(re=I.instanceMatrix),$==="instanceColor"&&I.instanceColor&&(re=I.instanceColor));const H={};H.attribute=re,re&&re.data&&(H.data=re.data),W[$]=H,B++}r.attributes=W,r.attributesNum=B,r.index=q}function M(){const I=r.newAttributes;for(let V=0,F=I.length;V<F;V++)I[V]=0}function _(I){S(I,0)}function S(I,V){const F=r.newAttributes,q=r.enabledAttributes,W=r.attributeDivisors;F[I]=1,q[I]===0&&(i.enableVertexAttribArray(I),q[I]=1),W[I]!==V&&(i.vertexAttribDivisor(I,V),W[I]=V)}function j(){const I=r.newAttributes,V=r.enabledAttributes;for(let F=0,q=V.length;F<q;F++)V[F]!==I[F]&&(i.disableVertexAttribArray(F),V[F]=0)}function A(I,V,F,q,W,ie,B){B===!0?i.vertexAttribIPointer(I,V,F,W,ie):i.vertexAttribPointer(I,V,F,q,W,ie)}function C(I,V,F,q){M();const W=q.attributes,ie=F.getAttributes(),B=V.defaultAttributeValues;for(const J in ie){const $=ie[J];if($.location>=0){let le=W[J];if(le===void 0&&(J==="instanceMatrix"&&I.instanceMatrix&&(le=I.instanceMatrix),J==="instanceColor"&&I.instanceColor&&(le=I.instanceColor)),le!==void 0){const re=le.normalized,H=le.itemSize,ee=e.get(le);if(ee===void 0)continue;const ue=ee.buffer,me=ee.type,be=ee.bytesPerElement,fe=me===i.INT||me===i.UNSIGNED_INT||le.gpuType===Xx;if(le.isInterleavedBufferAttribute){const ge=le.data,je=ge.stride,Qe=le.offset;if(ge.isInstancedInterleavedBuffer){for(let st=0;st<$.locationSize;st++)S($.location+st,ge.meshPerAttribute);I.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let st=0;st<$.locationSize;st++)_($.location+st);i.bindBuffer(i.ARRAY_BUFFER,ue);for(let st=0;st<$.locationSize;st++)A($.location+st,H/$.locationSize,me,re,je*be,(Qe+H/$.locationSize*st)*be,fe)}else{if(le.isInstancedBufferAttribute){for(let ge=0;ge<$.locationSize;ge++)S($.location+ge,le.meshPerAttribute);I.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let ge=0;ge<$.locationSize;ge++)_($.location+ge);i.bindBuffer(i.ARRAY_BUFFER,ue);for(let ge=0;ge<$.locationSize;ge++)A($.location+ge,H/$.locationSize,me,re,H*be,H/$.locationSize*ge*be,fe)}}else if(B!==void 0){const re=B[J];if(re!==void 0)switch(re.length){case 2:i.vertexAttrib2fv($.location,re);break;case 3:i.vertexAttrib3fv($.location,re);break;case 4:i.vertexAttrib4fv($.location,re);break;default:i.vertexAttrib1fv($.location,re)}}}}j()}function N(){U();for(const I in n){const V=n[I];for(const F in V){const q=V[F];for(const W in q)f(q[W].object),delete q[W];delete V[F]}delete n[I]}}function R(I){if(n[I.id]===void 0)return;const V=n[I.id];for(const F in V){const q=V[F];for(const W in q)f(q[W].object),delete q[W];delete V[F]}delete n[I.id]}function O(I){for(const V in n){const F=n[V];if(F[I.id]===void 0)continue;const q=F[I.id];for(const W in q)f(q[W].object),delete q[W];delete F[I.id]}}function U(){z(),o=!0,r!==a&&(r=a,d(r.object))}function z(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:l,reset:U,resetDefaultState:z,dispose:N,releaseStatesOfGeometry:R,releaseStatesOfProgram:O,initAttributes:M,enableAttribute:_,disableUnusedAttributes:j}}function zV(i,e,t){let n;function a(d){n=d}function r(d,f){i.drawArrays(n,d,f),t.update(f,n,1)}function o(d,f,m){m!==0&&(i.drawArraysInstanced(n,d,f,m),t.update(f,n,m))}function l(d,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,f,0,m);let g=0;for(let v=0;v<m;v++)g+=f[v];t.update(g,n,1)}function u(d,f,m,x){if(m===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<d.length;v++)o(d[v],f[v],x[v]);else{g.multiDrawArraysInstancedWEBGL(n,d,0,f,0,x,0,m);let v=0;for(let M=0;M<m;M++)v+=f[M]*x[M];t.update(v,n,1)}}this.setMode=a,this.render=r,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function GV(i,e,t,n){let a;function r(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");a=i.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(O){return!(O!==Ai&&n.convert(O)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(O){const U=O===Ti&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==gr&&n.convert(O)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==ti&&!U)}function u(O){if(O==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const f=u(d);f!==d&&(qt("WebGLRenderer:",d,"not supported, using",f,"instead."),d=f);const m=t.logarithmicDepthBuffer===!0,x=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),g=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),v=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_TEXTURE_SIZE),_=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),j=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),A=i.getParameter(i.MAX_VARYING_VECTORS),C=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=v>0,R=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:m,reversedDepthBuffer:x,maxTextures:g,maxVertexTextures:v,maxTextureSize:M,maxCubemapSize:_,maxAttributes:S,maxVertexUniforms:j,maxVaryings:A,maxFragmentUniforms:C,vertexTextures:N,maxSamples:R}}function IV(i){const e=this;let t=null,n=0,a=!1,r=!1;const o=new $l,l=new Tn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(m,x){const g=m.length!==0||x||n!==0||a;return a=x,n=m.length,g},this.beginShadows=function(){r=!0,f(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(m,x){t=f(m,x,0)},this.setState=function(m,x,g){const v=m.clippingPlanes,M=m.clipIntersection,_=m.clipShadows,S=i.get(m);if(!a||v===null||v.length===0||r&&!_)r?f(null):d();else{const j=r?0:n,A=j*4;let C=S.clippingState||null;u.value=C,C=f(v,x,A,g);for(let N=0;N!==A;++N)C[N]=t[N];S.clippingState=C,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=j}};function d(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(m,x,g,v){const M=m!==null?m.length:0;let _=null;if(M!==0){if(_=u.value,v!==!0||_===null){const S=g+M*4,j=x.matrixWorldInverse;l.getNormalMatrix(j),(_===null||_.length<S)&&(_=new Float32Array(S));for(let A=0,C=g;A!==M;++A,C+=4)o.copy(m[A]).applyMatrix4(j,l),o.normal.toArray(_,C),_[C+3]=o.constant}u.value=_,u.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,_}}function kV(i){let e=new WeakMap;function t(o,l){return l===N0?o.mapping=oc:l===Mx&&(o.mapping=od),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===N0||l===Mx)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const d=new s3(u.height);return d.fromEquirectangularTexture(i,o),e.set(o,d),o.addEventListener("dispose",a),t(d.texture,o.mapping)}else return null}}return o}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const nd=4,SE=[.125,.215,.35,.446,.526,.582],Sf=20,BV=256,Op=new xl,_E=new Lt;let CM=null,NM=0,RM=0,DM=!1;const FV=new Q;class WS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,a=100,r={}){const{size:o=256,position:l=FV}=r;CM=this._renderer.getRenderTarget(),NM=this._renderer.getActiveCubeFace(),RM=this._renderer.getActiveMipmapLevel(),DM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,n,a,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=EE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(CM,NM,RM),this._renderer.xr.enabled=DM,e.scissorTest=!1,l0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oc||e.mapping===od?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CM=this._renderer.getRenderTarget(),NM=this._renderer.getActiveCubeFace(),RM=this._renderer.getActiveMipmapLevel(),DM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ss,minFilter:ss,generateMipmaps:!1,type:Ti,format:Ai,colorSpace:gl,depthBuffer:!1},a=wE(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wE(e,t,n);const{_lodMax:r}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=VV(r)),this._blurMaterial=qV(r,e,t),this._ggxMaterial=HV(r,e,t)}return a}_compileMaterial(e){const t=new Bs(new Dn,e);this._renderer.compile(t,Op)}_sceneToCubeUV(e,t,n,a,r){const u=new ci(90,1,t,n),d=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],m=this._renderer,x=m.autoClear,g=m.toneMapping;m.getClearColor(_E),m.toneMapping=ac,m.autoClear=!1,m.state.buffers.depth.getReversed()&&(m.setRenderTarget(a),m.clearDepth(),m.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Bs(new nn,new vl({name:"PMREM.Background",side:la,depthWrite:!1,depthTest:!1})));const M=this._backgroundBox,_=M.material;let S=!1;const j=e.background;j?j.isColor&&(_.color.copy(j),e.background=null,S=!0):(_.color.copy(_E),S=!0);for(let A=0;A<6;A++){const C=A%3;C===0?(u.up.set(0,d[A],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x+f[A],r.y,r.z)):C===1?(u.up.set(0,0,d[A]),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y+f[A],r.z)):(u.up.set(0,d[A],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y,r.z+f[A]));const N=this._cubeSize;l0(a,C*N,A>2?N:0,N,N),m.setRenderTarget(a),S&&m.render(M,u),m.render(e,u)}m.toneMapping=g,m.autoClear=x,e.background=j}_textureToCubeUV(e,t){const n=this._renderer,a=e.mapping===oc||e.mapping===od;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=EE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jE());const r=a?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=r;const l=r.uniforms;l.envMap.value=e;const u=this._cubeSize;l0(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,Op)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const a=this._lodMeshes.length;for(let r=1;r<a;r++)this._applyGGXFilter(e,r-1,r);t.autoClear=n}_applyGGXFilter(e,t,n){const a=this._renderer,r=this._pingPongRenderTarget,o=this._ggxMaterial,l=this._lodMeshes[n];l.material=o;const u=o.uniforms,d=n/(this._lodMeshes.length-1),f=t/(this._lodMeshes.length-1),m=Math.sqrt(d*d-f*f),x=.05+d*.95,g=m*x,{_lodMax:v}=this,M=this._sizeLods[n],_=3*M*(n>v-nd?n-v+nd:0),S=4*(this._cubeSize-M);u.envMap.value=e.texture,u.roughness.value=g,u.mipInt.value=v-t,l0(r,_,S,3*M,2*M),a.setRenderTarget(r),a.render(l,Op),u.envMap.value=r.texture,u.roughness.value=0,u.mipInt.value=v-n,l0(e,_,S,3*M,2*M),a.setRenderTarget(e),a.render(l,Op)}_blur(e,t,n,a,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,a,"latitudinal",r),this._halfBlur(o,e,n,n,a,"longitudinal",r)}_halfBlur(e,t,n,a,r,o,l){const u=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&wn("blur direction must be either latitudinal or longitudinal!");const f=3,m=this._lodMeshes[a];m.material=d;const x=d.uniforms,g=this._sizeLods[n]-1,v=isFinite(r)?Math.PI/(2*g):2*Math.PI/(2*Sf-1),M=r/v,_=isFinite(r)?1+Math.floor(f*M):Sf;_>Sf&&qt(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Sf}`);const S=[];let j=0;for(let O=0;O<Sf;++O){const U=O/M,z=Math.exp(-U*U/2);S.push(z),O===0?j+=z:O<_&&(j+=2*z)}for(let O=0;O<S.length;O++)S[O]=S[O]/j;x.envMap.value=e.texture,x.samples.value=_,x.weights.value=S,x.latitudinal.value=o==="latitudinal",l&&(x.poleAxis.value=l);const{_lodMax:A}=this;x.dTheta.value=v,x.mipInt.value=A-n;const C=this._sizeLods[a],N=3*C*(a>A-nd?a-A+nd:0),R=4*(this._cubeSize-C);l0(t,N,R,3*C,2*C),u.setRenderTarget(t),u.render(m,Op)}}function VV(i){const e=[],t=[],n=[];let a=i;const r=i-nd+1+SE.length;for(let o=0;o<r;o++){const l=Math.pow(2,a);e.push(l);let u=1/l;o>i-nd?u=SE[o-i+nd-1]:o===0&&(u=0),t.push(u);const d=1/(l-2),f=-d,m=1+d,x=[f,f,m,f,m,m,f,f,m,m,f,m],g=6,v=6,M=3,_=2,S=1,j=new Float32Array(M*v*g),A=new Float32Array(_*v*g),C=new Float32Array(S*v*g);for(let R=0;R<g;R++){const O=R%3*2/3-1,U=R>2?0:-1,z=[O,U,0,O+2/3,U,0,O+2/3,U+1,0,O,U,0,O+2/3,U+1,0,O,U+1,0];j.set(z,M*v*R),A.set(x,_*v*R);const I=[R,R,R,R,R,R];C.set(I,S*v*R)}const N=new Dn;N.setAttribute("position",new Ds(j,M)),N.setAttribute("uv",new Ds(A,_)),N.setAttribute("faceIndex",new Ds(C,S)),n.push(new Bs(N,null)),a>nd&&a--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function wE(i,e,t){const n=new Ea(i,e,t);return n.texture.mapping=K0,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function l0(i,e,t,n,a){i.viewport.set(e,t,n,a),i.scissor.set(e,t,n,a)}function HV(i,e,t){return new Zi({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:BV,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Db(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function qV(i,e,t){const n=new Float32Array(Sf),a=new Q(0,1,0);return new Zi({name:"SphericalGaussianBlur",defines:{n:Sf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:Db(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function jE(){return new Zi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Db(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function EE(){return new Zi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Db(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function Db(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function XV(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const u=l.mapping,d=u===N0||u===Mx,f=u===oc||u===od;if(d||f){let m=e.get(l);const x=m!==void 0?m.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==x)return t===null&&(t=new WS(i)),m=d?t.fromEquirectangular(l,m):t.fromCubemap(l,m),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),m.texture;if(m!==void 0)return m.texture;{const g=l.image;return d&&g&&g.height>0||f&&g&&a(g)?(t===null&&(t=new WS(i)),m=d?t.fromEquirectangular(l):t.fromCubemap(l),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),l.addEventListener("dispose",r),m.texture):null}}}return l}function a(l){let u=0;const d=6;for(let f=0;f<d;f++)l[f]!==void 0&&u++;return u===d}function r(l){const u=l.target;u.removeEventListener("dispose",r);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function WV(i){const e={};function t(n){if(e[n]!==void 0)return e[n];const a=i.getExtension(n);return e[n]=a,a}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const a=t(n);return a===null&&O0("WebGLRenderer: "+n+" extension not supported."),a}}}function YV(i,e,t,n){const a={},r=new WeakMap;function o(m){const x=m.target;x.index!==null&&e.remove(x.index);for(const v in x.attributes)e.remove(x.attributes[v]);x.removeEventListener("dispose",o),delete a[x.id];const g=r.get(x);g&&(e.remove(g),r.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function l(m,x){return a[x.id]===!0||(x.addEventListener("dispose",o),a[x.id]=!0,t.memory.geometries++),x}function u(m){const x=m.attributes;for(const g in x)e.update(x[g],i.ARRAY_BUFFER)}function d(m){const x=[],g=m.index,v=m.attributes.position;let M=0;if(g!==null){const j=g.array;M=g.version;for(let A=0,C=j.length;A<C;A+=3){const N=j[A+0],R=j[A+1],O=j[A+2];x.push(N,R,R,O,O,N)}}else if(v!==void 0){const j=v.array;M=v.version;for(let A=0,C=j.length/3-1;A<C;A+=3){const N=A+0,R=A+1,O=A+2;x.push(N,R,R,O,O,N)}}else return;const _=new(KC(x)?n3:t3)(x,1);_.version=M;const S=r.get(m);S&&e.remove(S),r.set(m,_)}function f(m){const x=r.get(m);if(x){const g=m.index;g!==null&&x.version<g.version&&d(m)}else d(m);return r.get(m)}return{get:l,update:u,getWireframeAttribute:f}}function ZV(i,e,t){let n;function a(x){n=x}let r,o;function l(x){r=x.type,o=x.bytesPerElement}function u(x,g){i.drawElements(n,g,r,x*o),t.update(g,n,1)}function d(x,g,v){v!==0&&(i.drawElementsInstanced(n,g,r,x*o,v),t.update(g,n,v))}function f(x,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,g,0,r,x,0,v);let _=0;for(let S=0;S<v;S++)_+=g[S];t.update(_,n,1)}function m(x,g,v,M){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<x.length;S++)d(x[S]/o,g[S],M[S]);else{_.multiDrawElementsInstancedWEBGL(n,g,0,r,x,0,M,0,v);let S=0;for(let j=0;j<v;j++)S+=g[j]*M[j];t.update(S,n,1)}}this.setMode=a,this.setIndex=l,this.render=u,this.renderInstances=d,this.renderMultiDraw=f,this.renderMultiDrawInstances=m}function KV(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,o,l){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=l*(r/3);break;case i.LINES:t.lines+=l*(r/2);break;case i.LINE_STRIP:t.lines+=l*(r-1);break;case i.LINE_LOOP:t.lines+=l*r;break;case i.POINTS:t.points+=l*r;break;default:wn("WebGLInfo: Unknown draw mode:",o);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:n}}function JV(i,e,t){const n=new WeakMap,a=new ns;function r(o,l,u){const d=o.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=f!==void 0?f.length:0;let x=n.get(l);if(x===void 0||x.count!==m){let I=function(){U.dispose(),n.delete(l),l.removeEventListener("dispose",I)};var g=I;x!==void 0&&x.texture.dispose();const v=l.morphAttributes.position!==void 0,M=l.morphAttributes.normal!==void 0,_=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],j=l.morphAttributes.normal||[],A=l.morphAttributes.color||[];let C=0;v===!0&&(C=1),M===!0&&(C=2),_===!0&&(C=3);let N=l.attributes.position.count*C,R=1;N>e.maxTextureSize&&(R=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const O=new Float32Array(N*R*4*m),U=new rb(O,N,R,m);U.type=ti,U.needsUpdate=!0;const z=C*4;for(let V=0;V<m;V++){const F=S[V],q=j[V],W=A[V],ie=N*R*4*V;for(let B=0;B<F.count;B++){const J=B*z;v===!0&&(a.fromBufferAttribute(F,B),O[ie+J+0]=a.x,O[ie+J+1]=a.y,O[ie+J+2]=a.z,O[ie+J+3]=0),M===!0&&(a.fromBufferAttribute(q,B),O[ie+J+4]=a.x,O[ie+J+5]=a.y,O[ie+J+6]=a.z,O[ie+J+7]=0),_===!0&&(a.fromBufferAttribute(W,B),O[ie+J+8]=a.x,O[ie+J+9]=a.y,O[ie+J+10]=a.z,O[ie+J+11]=W.itemSize===4?a.w:1)}}x={count:m,texture:U,size:new pt(N,R)},n.set(l,x),l.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let v=0;for(let _=0;_<d.length;_++)v+=d[_];const M=l.morphTargetsRelative?1:1-v;u.getUniforms().setValue(i,"morphTargetBaseInfluence",M),u.getUniforms().setValue(i,"morphTargetInfluences",d)}u.getUniforms().setValue(i,"morphTargetsTexture",x.texture,t),u.getUniforms().setValue(i,"morphTargetsTextureSize",x.size)}return{update:r}}function QV(i,e,t,n){let a=new WeakMap;function r(u){const d=n.render.frame,f=u.geometry,m=e.get(u,f);if(a.get(m)!==d&&(e.update(m),a.set(m,d)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),a.get(u)!==d&&(t.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,i.ARRAY_BUFFER),a.set(u,d))),u.isSkinnedMesh){const x=u.skeleton;a.get(x)!==d&&(x.update(),a.set(x,d))}return m}function o(){a=new WeakMap}function l(u){const d=u.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:r,dispose:o}}const JN=new Es,TE=new xb(1,1),QN=new rb,$N=new ob,eR=new Zx,AE=[],CE=[],NE=new Float32Array(16),RE=new Float32Array(9),DE=new Float32Array(4);function $0(i,e,t){const n=i[0];if(n<=0||n>0)return i;const a=e*t;let r=AE[a];if(r===void 0&&(r=new Float32Array(a),AE[a]=r),e!==0){n.toArray(r,0);for(let o=1,l=0;o!==e;++o)l+=t,i[o].toArray(r,l)}return r}function Ki(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ji(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Lb(i,e){let t=CE[e];t===void 0&&(t=new Int32Array(e),CE[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function $V(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function eH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ki(t,e))return;i.uniform2fv(this.addr,e),Ji(t,e)}}function tH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ki(t,e))return;i.uniform3fv(this.addr,e),Ji(t,e)}}function nH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ki(t,e))return;i.uniform4fv(this.addr,e),Ji(t,e)}}function sH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ki(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ji(t,e)}else{if(Ki(t,n))return;DE.set(n),i.uniformMatrix2fv(this.addr,!1,DE),Ji(t,n)}}function iH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ki(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ji(t,e)}else{if(Ki(t,n))return;RE.set(n),i.uniformMatrix3fv(this.addr,!1,RE),Ji(t,n)}}function aH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ki(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ji(t,e)}else{if(Ki(t,n))return;NE.set(n),i.uniformMatrix4fv(this.addr,!1,NE),Ji(t,n)}}function rH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function oH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ki(t,e))return;i.uniform2iv(this.addr,e),Ji(t,e)}}function lH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ki(t,e))return;i.uniform3iv(this.addr,e),Ji(t,e)}}function cH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ki(t,e))return;i.uniform4iv(this.addr,e),Ji(t,e)}}function uH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function dH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ki(t,e))return;i.uniform2uiv(this.addr,e),Ji(t,e)}}function fH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ki(t,e))return;i.uniform3uiv(this.addr,e),Ji(t,e)}}function hH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ki(t,e))return;i.uniform4uiv(this.addr,e),Ji(t,e)}}function mH(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let r;this.type===i.SAMPLER_2D_SHADOW?(TE.compareFunction=Q_,r=TE):r=JN,t.setTexture2D(e||r,a)}function pH(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture3D(e||$N,a)}function xH(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTextureCube(e||eR,a)}function gH(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture2DArray(e||QN,a)}function vH(i){switch(i){case 5126:return $V;case 35664:return eH;case 35665:return tH;case 35666:return nH;case 35674:return sH;case 35675:return iH;case 35676:return aH;case 5124:case 35670:return rH;case 35667:case 35671:return oH;case 35668:case 35672:return lH;case 35669:case 35673:return cH;case 5125:return uH;case 36294:return dH;case 36295:return fH;case 36296:return hH;case 35678:case 36198:case 36298:case 36306:case 35682:return mH;case 35679:case 36299:case 36307:return pH;case 35680:case 36300:case 36308:case 36293:return xH;case 36289:case 36303:case 36311:case 36292:return gH}}function yH(i,e){i.uniform1fv(this.addr,e)}function bH(i,e){const t=$0(e,this.size,2);i.uniform2fv(this.addr,t)}function MH(i,e){const t=$0(e,this.size,3);i.uniform3fv(this.addr,t)}function SH(i,e){const t=$0(e,this.size,4);i.uniform4fv(this.addr,t)}function _H(i,e){const t=$0(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function wH(i,e){const t=$0(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function jH(i,e){const t=$0(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function EH(i,e){i.uniform1iv(this.addr,e)}function TH(i,e){i.uniform2iv(this.addr,e)}function AH(i,e){i.uniform3iv(this.addr,e)}function CH(i,e){i.uniform4iv(this.addr,e)}function NH(i,e){i.uniform1uiv(this.addr,e)}function RH(i,e){i.uniform2uiv(this.addr,e)}function DH(i,e){i.uniform3uiv(this.addr,e)}function LH(i,e){i.uniform4uiv(this.addr,e)}function UH(i,e,t){const n=this.cache,a=e.length,r=Lb(t,a);Ki(n,r)||(i.uniform1iv(this.addr,r),Ji(n,r));for(let o=0;o!==a;++o)t.setTexture2D(e[o]||JN,r[o])}function PH(i,e,t){const n=this.cache,a=e.length,r=Lb(t,a);Ki(n,r)||(i.uniform1iv(this.addr,r),Ji(n,r));for(let o=0;o!==a;++o)t.setTexture3D(e[o]||$N,r[o])}function OH(i,e,t){const n=this.cache,a=e.length,r=Lb(t,a);Ki(n,r)||(i.uniform1iv(this.addr,r),Ji(n,r));for(let o=0;o!==a;++o)t.setTextureCube(e[o]||eR,r[o])}function zH(i,e,t){const n=this.cache,a=e.length,r=Lb(t,a);Ki(n,r)||(i.uniform1iv(this.addr,r),Ji(n,r));for(let o=0;o!==a;++o)t.setTexture2DArray(e[o]||QN,r[o])}function GH(i){switch(i){case 5126:return yH;case 35664:return bH;case 35665:return MH;case 35666:return SH;case 35674:return _H;case 35675:return wH;case 35676:return jH;case 5124:case 35670:return EH;case 35667:case 35671:return TH;case 35668:case 35672:return AH;case 35669:case 35673:return CH;case 5125:return NH;case 36294:return RH;case 36295:return DH;case 36296:return LH;case 35678:case 36198:case 36298:case 36306:case 35682:return UH;case 35679:case 36299:case 36307:return PH;case 35680:case 36300:case 36308:case 36293:return OH;case 36289:case 36303:case 36311:case 36292:return zH}}class IH{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=vH(t.type)}}class kH{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=GH(t.type)}}class BH{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const a=this.seq;for(let r=0,o=a.length;r!==o;++r){const l=a[r];l.setValue(e,t[l.id],n)}}}const LM=/(\w+)(\])?(\[|\.)?/g;function LE(i,e){i.seq.push(e),i.map[e.id]=e}function FH(i,e,t){const n=i.name,a=n.length;for(LM.lastIndex=0;;){const r=LM.exec(n),o=LM.lastIndex;let l=r[1];const u=r[2]==="]",d=r[3];if(u&&(l=l|0),d===void 0||d==="["&&o+2===a){LE(t,d===void 0?new IH(l,i,e):new kH(l,i,e));break}else{let m=t.map[l];m===void 0&&(m=new BH(l),LE(t,m)),t=m}}}class zv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<n;++a){const r=e.getActiveUniform(t,a),o=e.getUniformLocation(t,r.name);FH(r,o,this)}}setValue(e,t,n,a){const r=this.map[t];r!==void 0&&r.setValue(e,n,a)}setOptional(e,t,n){const a=t[n];a!==void 0&&this.setValue(e,n,a)}static upload(e,t,n,a){for(let r=0,o=t.length;r!==o;++r){const l=t[r],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,a)}}static seqWithValue(e,t){const n=[];for(let a=0,r=e.length;a!==r;++a){const o=e[a];o.id in t&&n.push(o)}return n}}function UE(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const VH=37297;let HH=0;function qH(i,e){const t=i.split(`
`),n=[],a=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=a;o<r;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}const PE=new Tn;function XH(i){ts._getMatrix(PE,ts.workingColorSpace,i);const e=`mat3( ${PE.elements.map(t=>t.toFixed(4))} )`;switch(ts.getTransfer(i)){case Ex:return[e,"LinearTransferOETF"];case js:return[e,"sRGBTransferOETF"];default:return qt("WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function OE(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=(i.getShaderInfoLog(e)||"").trim();if(n&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+qH(i.getShaderSource(e),l)}else return r}function WH(i,e){const t=XH(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function YH(i,e){let t;switch(e){case RC:t="Linear";break;case DC:t="Reinhard";break;case LC:t="Cineon";break;case H_:t="ACESFilmic";break;case PC:t="AgX";break;case OC:t="Neutral";break;case UC:t="Custom";break;default:qt("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const hv=new Q;function ZH(){ts.getLuminanceCoefficients(hv);const i=hv.x.toFixed(4),e=hv.y.toFixed(4),t=hv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function KH(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Wp).join(`
`)}function JH(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function QH(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const r=i.getActiveAttrib(e,a),o=r.name;let l=1;r.type===i.FLOAT_MAT2&&(l=2),r.type===i.FLOAT_MAT3&&(l=3),r.type===i.FLOAT_MAT4&&(l=4),t[o]={type:r.type,location:i.getAttribLocation(e,o),locationSize:l}}return t}function Wp(i){return i!==""}function zE(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function GE(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $H=/^[ \t]*#include +<([\w\d./]+)>/gm;function YS(i){return i.replace($H,tq)}const eq=new Map;function tq(i,e){let t=Un[e];if(t===void 0){const n=eq.get(e);if(n!==void 0)t=Un[n],qt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return YS(t)}const nq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IE(i){return i.replace(nq,sq)}function sq(i,e,t,n){let a="";for(let r=parseInt(e);r<parseInt(t);r++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return a}function kE(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function iq(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Jy?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===tx?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===fl&&(e="SHADOWMAP_TYPE_VSM"),e}function aq(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case oc:case od:e="ENVMAP_TYPE_CUBE";break;case K0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function rq(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case od:e="ENVMAP_MODE_REFRACTION";break}return e}function oq(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case qx:e="ENVMAP_BLENDING_MULTIPLY";break;case CC:e="ENVMAP_BLENDING_MIX";break;case NC:e="ENVMAP_BLENDING_ADD";break}return e}function lq(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function cq(i,e,t,n){const a=i.getContext(),r=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=iq(t),d=aq(t),f=rq(t),m=oq(t),x=lq(t),g=KH(t),v=JH(r),M=a.createProgram();let _,S,j=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Wp).join(`
`),_.length>0&&(_+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Wp).join(`
`),S.length>0&&(S+=`
`)):(_=[kE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Wp).join(`
`),S=[kE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",t.envMap?"#define "+m:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ac?"#define TONE_MAPPING":"",t.toneMapping!==ac?Un.tonemapping_pars_fragment:"",t.toneMapping!==ac?YH("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Un.colorspace_pars_fragment,WH("linearToOutputTexel",t.outputColorSpace),ZH(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Wp).join(`
`)),o=YS(o),o=zE(o,t),o=GE(o,t),l=YS(l),l=zE(l,t),l=GE(l,t),o=IE(o),l=IE(l),t.isRawShaderMaterial!==!0&&(j=`#version 300 es
`,_=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,S=["#define varying in",t.glslVersion===IS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===IS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const A=j+_+o,C=j+S+l,N=UE(a,a.VERTEX_SHADER,A),R=UE(a,a.FRAGMENT_SHADER,C);a.attachShader(M,N),a.attachShader(M,R),t.index0AttributeName!==void 0?a.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(M,0,"position"),a.linkProgram(M);function O(V){if(i.debug.checkShaderErrors){const F=a.getProgramInfoLog(M)||"",q=a.getShaderInfoLog(N)||"",W=a.getShaderInfoLog(R)||"",ie=F.trim(),B=q.trim(),J=W.trim();let $=!0,le=!0;if(a.getProgramParameter(M,a.LINK_STATUS)===!1)if($=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,M,N,R);else{const re=OE(a,N,"vertex"),H=OE(a,R,"fragment");wn("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(M,a.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+ie+`
`+re+`
`+H)}else ie!==""?qt("WebGLProgram: Program Info Log:",ie):(B===""||J==="")&&(le=!1);le&&(V.diagnostics={runnable:$,programLog:ie,vertexShader:{log:B,prefix:_},fragmentShader:{log:J,prefix:S}})}a.deleteShader(N),a.deleteShader(R),U=new zv(a,M),z=QH(a,M)}let U;this.getUniforms=function(){return U===void 0&&O(this),U};let z;this.getAttributes=function(){return z===void 0&&O(this),z};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=a.getProgramParameter(M,VH)),I},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=HH++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=N,this.fragmentShader=R,this}let uq=0;class dq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,a=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(a)===!1&&(o.add(a),a.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new fq(e),t.set(e,n)),n}}class fq{constructor(e){this.id=uq++,this.code=e,this.usedTimes=0}}function hq(i,e,t,n,a,r,o){const l=new G0,u=new dq,d=new Set,f=[],m=a.logarithmicDepthBuffer,x=a.vertexTextures;let g=a.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(z){return d.add(z),z===0?"uv":`uv${z}`}function _(z,I,V,F,q){const W=F.fog,ie=q.geometry,B=z.isMeshStandardMaterial?F.environment:null,J=(z.isMeshStandardMaterial?t:e).get(z.envMap||B),$=J&&J.mapping===K0?J.image.height:null,le=v[z.type];z.precision!==null&&(g=a.getMaxPrecision(z.precision),g!==z.precision&&qt("WebGLProgram.getParameters:",z.precision,"not supported, using",g,"instead."));const re=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,H=re!==void 0?re.length:0;let ee=0;ie.morphAttributes.position!==void 0&&(ee=1),ie.morphAttributes.normal!==void 0&&(ee=2),ie.morphAttributes.color!==void 0&&(ee=3);let ue,me,be,fe;if(le){const Zt=hl[le];ue=Zt.vertexShader,me=Zt.fragmentShader}else ue=z.vertexShader,me=z.fragmentShader,u.update(z),be=u.getVertexShaderID(z),fe=u.getFragmentShaderID(z);const ge=i.getRenderTarget(),je=i.state.buffers.depth.getReversed(),Qe=q.isInstancedMesh===!0,st=q.isBatchedMesh===!0,Ve=!!z.map,nt=!!z.matcap,St=!!J,ze=!!z.aoMap,ae=!!z.lightMap,Fe=!!z.bumpMap,We=!!z.normalMap,Pe=!!z.displacementMap,Ge=!!z.emissiveMap,$e=!!z.metalnessMap,Ee=!!z.roughnessMap,ct=z.anisotropy>0,te=z.clearcoat>0,Y=z.dispersion>0,ve=z.iridescence>0,Be=z.sheen>0,Re=z.transmission>0,Ae=ct&&!!z.anisotropyMap,yt=te&&!!z.clearcoatMap,gt=te&&!!z.clearcoatNormalMap,Dt=te&&!!z.clearcoatRoughnessMap,Nt=ve&&!!z.iridescenceMap,ke=ve&&!!z.iridescenceThicknessMap,Ie=Be&&!!z.sheenColorMap,ft=Be&&!!z.sheenRoughnessMap,he=!!z.specularMap,Ce=!!z.specularColorMap,ut=!!z.specularIntensityMap,pe=Re&&!!z.transmissionMap,we=Re&&!!z.thicknessMap,lt=!!z.gradientMap,jt=!!z.alphaMap,ot=z.alphaTest>0,qe=!!z.alphaHash,Tt=!!z.extensions;let zt=ac;z.toneMapped&&(ge===null||ge.isXRRenderTarget===!0)&&(zt=i.toneMapping);const It={shaderID:le,shaderType:z.type,shaderName:z.name,vertexShader:ue,fragmentShader:me,defines:z.defines,customVertexShaderID:be,customFragmentShaderID:fe,isRawShaderMaterial:z.isRawShaderMaterial===!0,glslVersion:z.glslVersion,precision:g,batching:st,batchingColor:st&&q._colorsTexture!==null,instancing:Qe,instancingColor:Qe&&q.instanceColor!==null,instancingMorph:Qe&&q.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:ge===null?i.outputColorSpace:ge.isXRRenderTarget===!0?ge.texture.colorSpace:gl,alphaToCoverage:!!z.alphaToCoverage,map:Ve,matcap:nt,envMap:St,envMapMode:St&&J.mapping,envMapCubeUVHeight:$,aoMap:ze,lightMap:ae,bumpMap:Fe,normalMap:We,displacementMap:x&&Pe,emissiveMap:Ge,normalMapObjectSpace:We&&z.normalMapType===FC,normalMapTangentSpace:We&&z.normalMapType===fd,metalnessMap:$e,roughnessMap:Ee,anisotropy:ct,anisotropyMap:Ae,clearcoat:te,clearcoatMap:yt,clearcoatNormalMap:gt,clearcoatRoughnessMap:Dt,dispersion:Y,iridescence:ve,iridescenceMap:Nt,iridescenceThicknessMap:ke,sheen:Be,sheenColorMap:Ie,sheenRoughnessMap:ft,specularMap:he,specularColorMap:Ce,specularIntensityMap:ut,transmission:Re,transmissionMap:pe,thicknessMap:we,gradientMap:lt,opaque:z.transparent===!1&&z.blending===Df&&z.alphaToCoverage===!1,alphaMap:jt,alphaTest:ot,alphaHash:qe,combine:z.combine,mapUv:Ve&&M(z.map.channel),aoMapUv:ze&&M(z.aoMap.channel),lightMapUv:ae&&M(z.lightMap.channel),bumpMapUv:Fe&&M(z.bumpMap.channel),normalMapUv:We&&M(z.normalMap.channel),displacementMapUv:Pe&&M(z.displacementMap.channel),emissiveMapUv:Ge&&M(z.emissiveMap.channel),metalnessMapUv:$e&&M(z.metalnessMap.channel),roughnessMapUv:Ee&&M(z.roughnessMap.channel),anisotropyMapUv:Ae&&M(z.anisotropyMap.channel),clearcoatMapUv:yt&&M(z.clearcoatMap.channel),clearcoatNormalMapUv:gt&&M(z.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Dt&&M(z.clearcoatRoughnessMap.channel),iridescenceMapUv:Nt&&M(z.iridescenceMap.channel),iridescenceThicknessMapUv:ke&&M(z.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&M(z.sheenColorMap.channel),sheenRoughnessMapUv:ft&&M(z.sheenRoughnessMap.channel),specularMapUv:he&&M(z.specularMap.channel),specularColorMapUv:Ce&&M(z.specularColorMap.channel),specularIntensityMapUv:ut&&M(z.specularIntensityMap.channel),transmissionMapUv:pe&&M(z.transmissionMap.channel),thicknessMapUv:we&&M(z.thicknessMap.channel),alphaMapUv:jt&&M(z.alphaMap.channel),vertexTangents:!!ie.attributes.tangent&&(We||ct),vertexColors:z.vertexColors,vertexAlphas:z.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ie.attributes.uv&&(Ve||jt),fog:!!W,useFog:z.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:z.flatShading===!0&&z.wireframe===!1,sizeAttenuation:z.sizeAttenuation===!0,logarithmicDepthBuffer:m,reversedDepthBuffer:je,skinning:q.isSkinnedMesh===!0,morphTargets:ie.morphAttributes.position!==void 0,morphNormals:ie.morphAttributes.normal!==void 0,morphColors:ie.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:ee,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:z.dithering,shadowMapEnabled:i.shadowMap.enabled&&V.length>0,shadowMapType:i.shadowMap.type,toneMapping:zt,decodeVideoTexture:Ve&&z.map.isVideoTexture===!0&&ts.getTransfer(z.map.colorSpace)===js,decodeVideoTextureEmissive:Ge&&z.emissiveMap.isVideoTexture===!0&&ts.getTransfer(z.emissiveMap.colorSpace)===js,premultipliedAlpha:z.premultipliedAlpha,doubleSided:z.side===Ms,flipSided:z.side===la,useDepthPacking:z.depthPacking>=0,depthPacking:z.depthPacking||0,index0AttributeName:z.index0AttributeName,extensionClipCullDistance:Tt&&z.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Tt&&z.extensions.multiDraw===!0||st)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:z.customProgramCacheKey()};return It.vertexUv1s=d.has(1),It.vertexUv2s=d.has(2),It.vertexUv3s=d.has(3),d.clear(),It}function S(z){const I=[];if(z.shaderID?I.push(z.shaderID):(I.push(z.customVertexShaderID),I.push(z.customFragmentShaderID)),z.defines!==void 0)for(const V in z.defines)I.push(V),I.push(z.defines[V]);return z.isRawShaderMaterial===!1&&(j(I,z),A(I,z),I.push(i.outputColorSpace)),I.push(z.customProgramCacheKey),I.join()}function j(z,I){z.push(I.precision),z.push(I.outputColorSpace),z.push(I.envMapMode),z.push(I.envMapCubeUVHeight),z.push(I.mapUv),z.push(I.alphaMapUv),z.push(I.lightMapUv),z.push(I.aoMapUv),z.push(I.bumpMapUv),z.push(I.normalMapUv),z.push(I.displacementMapUv),z.push(I.emissiveMapUv),z.push(I.metalnessMapUv),z.push(I.roughnessMapUv),z.push(I.anisotropyMapUv),z.push(I.clearcoatMapUv),z.push(I.clearcoatNormalMapUv),z.push(I.clearcoatRoughnessMapUv),z.push(I.iridescenceMapUv),z.push(I.iridescenceThicknessMapUv),z.push(I.sheenColorMapUv),z.push(I.sheenRoughnessMapUv),z.push(I.specularMapUv),z.push(I.specularColorMapUv),z.push(I.specularIntensityMapUv),z.push(I.transmissionMapUv),z.push(I.thicknessMapUv),z.push(I.combine),z.push(I.fogExp2),z.push(I.sizeAttenuation),z.push(I.morphTargetsCount),z.push(I.morphAttributeCount),z.push(I.numDirLights),z.push(I.numPointLights),z.push(I.numSpotLights),z.push(I.numSpotLightMaps),z.push(I.numHemiLights),z.push(I.numRectAreaLights),z.push(I.numDirLightShadows),z.push(I.numPointLightShadows),z.push(I.numSpotLightShadows),z.push(I.numSpotLightShadowsWithMaps),z.push(I.numLightProbes),z.push(I.shadowMapType),z.push(I.toneMapping),z.push(I.numClippingPlanes),z.push(I.numClipIntersection),z.push(I.depthPacking)}function A(z,I){l.disableAll(),I.supportsVertexTextures&&l.enable(0),I.instancing&&l.enable(1),I.instancingColor&&l.enable(2),I.instancingMorph&&l.enable(3),I.matcap&&l.enable(4),I.envMap&&l.enable(5),I.normalMapObjectSpace&&l.enable(6),I.normalMapTangentSpace&&l.enable(7),I.clearcoat&&l.enable(8),I.iridescence&&l.enable(9),I.alphaTest&&l.enable(10),I.vertexColors&&l.enable(11),I.vertexAlphas&&l.enable(12),I.vertexUv1s&&l.enable(13),I.vertexUv2s&&l.enable(14),I.vertexUv3s&&l.enable(15),I.vertexTangents&&l.enable(16),I.anisotropy&&l.enable(17),I.alphaHash&&l.enable(18),I.batching&&l.enable(19),I.dispersion&&l.enable(20),I.batchingColor&&l.enable(21),I.gradientMap&&l.enable(22),z.push(l.mask),l.disableAll(),I.fog&&l.enable(0),I.useFog&&l.enable(1),I.flatShading&&l.enable(2),I.logarithmicDepthBuffer&&l.enable(3),I.reversedDepthBuffer&&l.enable(4),I.skinning&&l.enable(5),I.morphTargets&&l.enable(6),I.morphNormals&&l.enable(7),I.morphColors&&l.enable(8),I.premultipliedAlpha&&l.enable(9),I.shadowMapEnabled&&l.enable(10),I.doubleSided&&l.enable(11),I.flipSided&&l.enable(12),I.useDepthPacking&&l.enable(13),I.dithering&&l.enable(14),I.transmission&&l.enable(15),I.sheen&&l.enable(16),I.opaque&&l.enable(17),I.pointsUvs&&l.enable(18),I.decodeVideoTexture&&l.enable(19),I.decodeVideoTextureEmissive&&l.enable(20),I.alphaToCoverage&&l.enable(21),z.push(l.mask)}function C(z){const I=v[z.type];let V;if(I){const F=hl[I];V=lb.clone(F.uniforms)}else V=z.uniforms;return V}function N(z,I){let V;for(let F=0,q=f.length;F<q;F++){const W=f[F];if(W.cacheKey===I){V=W,++V.usedTimes;break}}return V===void 0&&(V=new cq(i,I,z,r),f.push(V)),V}function R(z){if(--z.usedTimes===0){const I=f.indexOf(z);f[I]=f[f.length-1],f.pop(),z.destroy()}}function O(z){u.remove(z)}function U(){u.dispose()}return{getParameters:_,getProgramCacheKey:S,getUniforms:C,acquireProgram:N,releaseProgram:R,releaseShaderCache:O,programs:f,dispose:U}}function mq(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let l=i.get(o);return l===void 0&&(l={},i.set(o,l)),l}function n(o){i.delete(o)}function a(o,l,u){i.get(o)[l]=u}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:a,dispose:r}}function pq(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function BE(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function FE(){const i=[];let e=0;const t=[],n=[],a=[];function r(){e=0,t.length=0,n.length=0,a.length=0}function o(m,x,g,v,M,_){let S=i[e];return S===void 0?(S={id:m.id,object:m,geometry:x,material:g,groupOrder:v,renderOrder:m.renderOrder,z:M,group:_},i[e]=S):(S.id=m.id,S.object=m,S.geometry=x,S.material=g,S.groupOrder=v,S.renderOrder=m.renderOrder,S.z=M,S.group=_),e++,S}function l(m,x,g,v,M,_){const S=o(m,x,g,v,M,_);g.transmission>0?n.push(S):g.transparent===!0?a.push(S):t.push(S)}function u(m,x,g,v,M,_){const S=o(m,x,g,v,M,_);g.transmission>0?n.unshift(S):g.transparent===!0?a.unshift(S):t.unshift(S)}function d(m,x){t.length>1&&t.sort(m||pq),n.length>1&&n.sort(x||BE),a.length>1&&a.sort(x||BE)}function f(){for(let m=e,x=i.length;m<x;m++){const g=i[m];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:n,transparent:a,init:r,push:l,unshift:u,finish:f,sort:d}}function xq(){let i=new WeakMap;function e(n,a){const r=i.get(n);let o;return r===void 0?(o=new FE,i.set(n,[o])):a>=r.length?(o=new FE,r.push(o)):o=r[a],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function gq(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new Lt};break;case"SpotLight":t={position:new Q,direction:new Q,color:new Lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new Lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new Lt,groundColor:new Lt};break;case"RectAreaLight":t={color:new Lt,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return i[e.id]=t,t}}}function vq(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let yq=0;function bq(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Mq(i){const e=new gq,t=vq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new Q);const a=new Q,r=new mn,o=new mn;function l(d){let f=0,m=0,x=0;for(let z=0;z<9;z++)n.probe[z].set(0,0,0);let g=0,v=0,M=0,_=0,S=0,j=0,A=0,C=0,N=0,R=0,O=0;d.sort(bq);for(let z=0,I=d.length;z<I;z++){const V=d[z],F=V.color,q=V.intensity,W=V.distance,ie=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)f+=F.r*q,m+=F.g*q,x+=F.b*q;else if(V.isLightProbe){for(let B=0;B<9;B++)n.probe[B].addScaledVector(V.sh.coefficients[B],q);O++}else if(V.isDirectionalLight){const B=e.get(V);if(B.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const J=V.shadow,$=t.get(V);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,n.directionalShadow[g]=$,n.directionalShadowMap[g]=ie,n.directionalShadowMatrix[g]=V.shadow.matrix,j++}n.directional[g]=B,g++}else if(V.isSpotLight){const B=e.get(V);B.position.setFromMatrixPosition(V.matrixWorld),B.color.copy(F).multiplyScalar(q),B.distance=W,B.coneCos=Math.cos(V.angle),B.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),B.decay=V.decay,n.spot[M]=B;const J=V.shadow;if(V.map&&(n.spotLightMap[N]=V.map,N++,J.updateMatrices(V),V.castShadow&&R++),n.spotLightMatrix[M]=J.matrix,V.castShadow){const $=t.get(V);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,n.spotShadow[M]=$,n.spotShadowMap[M]=ie,C++}M++}else if(V.isRectAreaLight){const B=e.get(V);B.color.copy(F).multiplyScalar(q),B.halfWidth.set(V.width*.5,0,0),B.halfHeight.set(0,V.height*.5,0),n.rectArea[_]=B,_++}else if(V.isPointLight){const B=e.get(V);if(B.color.copy(V.color).multiplyScalar(V.intensity),B.distance=V.distance,B.decay=V.decay,V.castShadow){const J=V.shadow,$=t.get(V);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,$.shadowCameraNear=J.camera.near,$.shadowCameraFar=J.camera.far,n.pointShadow[v]=$,n.pointShadowMap[v]=ie,n.pointShadowMatrix[v]=V.shadow.matrix,A++}n.point[v]=B,v++}else if(V.isHemisphereLight){const B=e.get(V);B.skyColor.copy(V.color).multiplyScalar(q),B.groundColor.copy(V.groundColor).multiplyScalar(q),n.hemi[S]=B,S++}}_>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ht.LTC_FLOAT_1,n.rectAreaLTC2=Ht.LTC_FLOAT_2):(n.rectAreaLTC1=Ht.LTC_HALF_1,n.rectAreaLTC2=Ht.LTC_HALF_2)),n.ambient[0]=f,n.ambient[1]=m,n.ambient[2]=x;const U=n.hash;(U.directionalLength!==g||U.pointLength!==v||U.spotLength!==M||U.rectAreaLength!==_||U.hemiLength!==S||U.numDirectionalShadows!==j||U.numPointShadows!==A||U.numSpotShadows!==C||U.numSpotMaps!==N||U.numLightProbes!==O)&&(n.directional.length=g,n.spot.length=M,n.rectArea.length=_,n.point.length=v,n.hemi.length=S,n.directionalShadow.length=j,n.directionalShadowMap.length=j,n.pointShadow.length=A,n.pointShadowMap.length=A,n.spotShadow.length=C,n.spotShadowMap.length=C,n.directionalShadowMatrix.length=j,n.pointShadowMatrix.length=A,n.spotLightMatrix.length=C+N-R,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=R,n.numLightProbes=O,U.directionalLength=g,U.pointLength=v,U.spotLength=M,U.rectAreaLength=_,U.hemiLength=S,U.numDirectionalShadows=j,U.numPointShadows=A,U.numSpotShadows=C,U.numSpotMaps=N,U.numLightProbes=O,n.version=yq++)}function u(d,f){let m=0,x=0,g=0,v=0,M=0;const _=f.matrixWorldInverse;for(let S=0,j=d.length;S<j;S++){const A=d[S];if(A.isDirectionalLight){const C=n.directional[m];C.direction.setFromMatrixPosition(A.matrixWorld),a.setFromMatrixPosition(A.target.matrixWorld),C.direction.sub(a),C.direction.transformDirection(_),m++}else if(A.isSpotLight){const C=n.spot[g];C.position.setFromMatrixPosition(A.matrixWorld),C.position.applyMatrix4(_),C.direction.setFromMatrixPosition(A.matrixWorld),a.setFromMatrixPosition(A.target.matrixWorld),C.direction.sub(a),C.direction.transformDirection(_),g++}else if(A.isRectAreaLight){const C=n.rectArea[v];C.position.setFromMatrixPosition(A.matrixWorld),C.position.applyMatrix4(_),o.identity(),r.copy(A.matrixWorld),r.premultiply(_),o.extractRotation(r),C.halfWidth.set(A.width*.5,0,0),C.halfHeight.set(0,A.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),v++}else if(A.isPointLight){const C=n.point[x];C.position.setFromMatrixPosition(A.matrixWorld),C.position.applyMatrix4(_),x++}else if(A.isHemisphereLight){const C=n.hemi[M];C.direction.setFromMatrixPosition(A.matrixWorld),C.direction.transformDirection(_),M++}}}return{setup:l,setupView:u,state:n}}function VE(i){const e=new Mq(i),t=[],n=[];function a(f){d.camera=f,t.length=0,n.length=0}function r(f){t.push(f)}function o(f){n.push(f)}function l(){e.setup(t)}function u(f){e.setupView(t,f)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:d,setupLights:l,setupLightsView:u,pushLight:r,pushShadow:o}}function Sq(i){let e=new WeakMap;function t(a,r=0){const o=e.get(a);let l;return o===void 0?(l=new VE(i),e.set(a,[l])):r>=o.length?(l=new VE(i),o.push(l)):l=o[r],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const _q=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jq(i,e,t){let n=new J0;const a=new pt,r=new pt,o=new ns,l=new ng({depthPacking:J_}),u=new Ab,d={},f=t.maxTextureSize,m={[au]:la,[la]:au,[Ms]:Ms},x=new Zi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pt},radius:{value:4}},vertexShader:_q,fragmentShader:wq}),g=x.clone();g.defines.HORIZONTAL_PASS=1;const v=new Dn;v.setAttribute("position",new Ds(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Bs(v,x),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jy;let S=this.type;this.render=function(R,O,U){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||R.length===0)return;const z=i.getRenderTarget(),I=i.getActiveCubeFace(),V=i.getActiveMipmapLevel(),F=i.state;F.setBlending(pl),F.buffers.depth.getReversed()===!0?F.buffers.color.setClear(0,0,0,0):F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const q=S!==fl&&this.type===fl,W=S===fl&&this.type!==fl;for(let ie=0,B=R.length;ie<B;ie++){const J=R[ie],$=J.shadow;if($===void 0){qt("WebGLShadowMap:",J,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;a.copy($.mapSize);const le=$.getFrameExtents();if(a.multiply(le),r.copy($.mapSize),(a.x>f||a.y>f)&&(a.x>f&&(r.x=Math.floor(f/le.x),a.x=r.x*le.x,$.mapSize.x=r.x),a.y>f&&(r.y=Math.floor(f/le.y),a.y=r.y*le.y,$.mapSize.y=r.y)),$.map===null||q===!0||W===!0){const H=this.type!==fl?{minFilter:Wi,magFilter:Wi}:{};$.map!==null&&$.map.dispose(),$.map=new Ea(a.x,a.y,H),$.map.texture.name=J.name+".shadowMap",$.camera.updateProjectionMatrix()}i.setRenderTarget($.map),i.clear();const re=$.getViewportCount();for(let H=0;H<re;H++){const ee=$.getViewport(H);o.set(r.x*ee.x,r.y*ee.y,r.x*ee.z,r.y*ee.w),F.viewport(o),$.updateMatrices(J,H),n=$.getFrustum(),C(O,U,$.camera,J,this.type)}$.isPointLightShadow!==!0&&this.type===fl&&j($,U),$.needsUpdate=!1}S=this.type,_.needsUpdate=!1,i.setRenderTarget(z,I,V)};function j(R,O){const U=e.update(M);x.defines.VSM_SAMPLES!==R.blurSamples&&(x.defines.VSM_SAMPLES=R.blurSamples,g.defines.VSM_SAMPLES=R.blurSamples,x.needsUpdate=!0,g.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new Ea(a.x,a.y)),x.uniforms.shadow_pass.value=R.map.texture,x.uniforms.resolution.value=R.mapSize,x.uniforms.radius.value=R.radius,i.setRenderTarget(R.mapPass),i.clear(),i.renderBufferDirect(O,null,U,x,M,null),g.uniforms.shadow_pass.value=R.mapPass.texture,g.uniforms.resolution.value=R.mapSize,g.uniforms.radius.value=R.radius,i.setRenderTarget(R.map),i.clear(),i.renderBufferDirect(O,null,U,g,M,null)}function A(R,O,U,z){let I=null;const V=U.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(V!==void 0)I=V;else if(I=U.isPointLight===!0?u:l,i.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0||O.alphaToCoverage===!0){const F=I.uuid,q=O.uuid;let W=d[F];W===void 0&&(W={},d[F]=W);let ie=W[q];ie===void 0&&(ie=I.clone(),W[q]=ie,O.addEventListener("dispose",N)),I=ie}if(I.visible=O.visible,I.wireframe=O.wireframe,z===fl?I.side=O.shadowSide!==null?O.shadowSide:O.side:I.side=O.shadowSide!==null?O.shadowSide:m[O.side],I.alphaMap=O.alphaMap,I.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,I.map=O.map,I.clipShadows=O.clipShadows,I.clippingPlanes=O.clippingPlanes,I.clipIntersection=O.clipIntersection,I.displacementMap=O.displacementMap,I.displacementScale=O.displacementScale,I.displacementBias=O.displacementBias,I.wireframeLinewidth=O.wireframeLinewidth,I.linewidth=O.linewidth,U.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const F=i.properties.get(I);F.light=U}return I}function C(R,O,U,z,I){if(R.visible===!1)return;if(R.layers.test(O.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&I===fl)&&(!R.frustumCulled||n.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,R.matrixWorld);const q=e.update(R),W=R.material;if(Array.isArray(W)){const ie=q.groups;for(let B=0,J=ie.length;B<J;B++){const $=ie[B],le=W[$.materialIndex];if(le&&le.visible){const re=A(R,le,z,I);R.onBeforeShadow(i,R,O,U,q,re,$),i.renderBufferDirect(U,null,q,re,R,$),R.onAfterShadow(i,R,O,U,q,re,$)}}}else if(W.visible){const ie=A(R,W,z,I);R.onBeforeShadow(i,R,O,U,q,ie,null),i.renderBufferDirect(U,null,q,ie,R,null),R.onAfterShadow(i,R,O,U,q,ie,null)}}const F=R.children;for(let q=0,W=F.length;q<W;q++)C(F[q],O,U,z,I)}function N(R){R.target.removeEventListener("dispose",N);for(const U in d){const z=d[U],I=R.target.uuid;I in z&&(z[I].dispose(),delete z[I])}}}const Eq={[Kv]:Jv,[Qv]:ty,[$v]:ny,[Pf]:ey,[Jv]:Kv,[ty]:Qv,[ny]:$v,[ey]:Pf};function Tq(i,e){function t(){let pe=!1;const we=new ns;let lt=null;const jt=new ns(0,0,0,0);return{setMask:function(ot){lt!==ot&&!pe&&(i.colorMask(ot,ot,ot,ot),lt=ot)},setLocked:function(ot){pe=ot},setClear:function(ot,qe,Tt,zt,It){It===!0&&(ot*=zt,qe*=zt,Tt*=zt),we.set(ot,qe,Tt,zt),jt.equals(we)===!1&&(i.clearColor(ot,qe,Tt,zt),jt.copy(we))},reset:function(){pe=!1,lt=null,jt.set(-1,0,0,0)}}}function n(){let pe=!1,we=!1,lt=null,jt=null,ot=null;return{setReversed:function(qe){if(we!==qe){const Tt=e.get("EXT_clip_control");qe?Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.ZERO_TO_ONE_EXT):Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.NEGATIVE_ONE_TO_ONE_EXT),we=qe;const zt=ot;ot=null,this.setClear(zt)}},getReversed:function(){return we},setTest:function(qe){qe?ge(i.DEPTH_TEST):je(i.DEPTH_TEST)},setMask:function(qe){lt!==qe&&!pe&&(i.depthMask(qe),lt=qe)},setFunc:function(qe){if(we&&(qe=Eq[qe]),jt!==qe){switch(qe){case Kv:i.depthFunc(i.NEVER);break;case Jv:i.depthFunc(i.ALWAYS);break;case Qv:i.depthFunc(i.LESS);break;case Pf:i.depthFunc(i.LEQUAL);break;case $v:i.depthFunc(i.EQUAL);break;case ey:i.depthFunc(i.GEQUAL);break;case ty:i.depthFunc(i.GREATER);break;case ny:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}jt=qe}},setLocked:function(qe){pe=qe},setClear:function(qe){ot!==qe&&(we&&(qe=1-qe),i.clearDepth(qe),ot=qe)},reset:function(){pe=!1,lt=null,jt=null,ot=null,we=!1}}}function a(){let pe=!1,we=null,lt=null,jt=null,ot=null,qe=null,Tt=null,zt=null,It=null;return{setTest:function(Zt){pe||(Zt?ge(i.STENCIL_TEST):je(i.STENCIL_TEST))},setMask:function(Zt){we!==Zt&&!pe&&(i.stencilMask(Zt),we=Zt)},setFunc:function(Zt,An,In){(lt!==Zt||jt!==An||ot!==In)&&(i.stencilFunc(Zt,An,In),lt=Zt,jt=An,ot=In)},setOp:function(Zt,An,In){(qe!==Zt||Tt!==An||zt!==In)&&(i.stencilOp(Zt,An,In),qe=Zt,Tt=An,zt=In)},setLocked:function(Zt){pe=Zt},setClear:function(Zt){It!==Zt&&(i.clearStencil(Zt),It=Zt)},reset:function(){pe=!1,we=null,lt=null,jt=null,ot=null,qe=null,Tt=null,zt=null,It=null}}}const r=new t,o=new n,l=new a,u=new WeakMap,d=new WeakMap;let f={},m={},x=new WeakMap,g=[],v=null,M=!1,_=null,S=null,j=null,A=null,C=null,N=null,R=null,O=new Lt(0,0,0),U=0,z=!1,I=null,V=null,F=null,q=null,W=null;const ie=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,J=0;const $=i.getParameter(i.VERSION);$.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec($)[1]),B=J>=1):$.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),B=J>=2);let le=null,re={};const H=i.getParameter(i.SCISSOR_BOX),ee=i.getParameter(i.VIEWPORT),ue=new ns().fromArray(H),me=new ns().fromArray(ee);function be(pe,we,lt,jt){const ot=new Uint8Array(4),qe=i.createTexture();i.bindTexture(pe,qe),i.texParameteri(pe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(pe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Tt=0;Tt<lt;Tt++)pe===i.TEXTURE_3D||pe===i.TEXTURE_2D_ARRAY?i.texImage3D(we,0,i.RGBA,1,1,jt,0,i.RGBA,i.UNSIGNED_BYTE,ot):i.texImage2D(we+Tt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ot);return qe}const fe={};fe[i.TEXTURE_2D]=be(i.TEXTURE_2D,i.TEXTURE_2D,1),fe[i.TEXTURE_CUBE_MAP]=be(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),fe[i.TEXTURE_2D_ARRAY]=be(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),fe[i.TEXTURE_3D]=be(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),l.setClear(0),ge(i.DEPTH_TEST),o.setFunc(Pf),Fe(!1),We(LS),ge(i.CULL_FACE),ze(pl);function ge(pe){f[pe]!==!0&&(i.enable(pe),f[pe]=!0)}function je(pe){f[pe]!==!1&&(i.disable(pe),f[pe]=!1)}function Qe(pe,we){return m[pe]!==we?(i.bindFramebuffer(pe,we),m[pe]=we,pe===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=we),pe===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=we),!0):!1}function st(pe,we){let lt=g,jt=!1;if(pe){lt=x.get(we),lt===void 0&&(lt=[],x.set(we,lt));const ot=pe.textures;if(lt.length!==ot.length||lt[0]!==i.COLOR_ATTACHMENT0){for(let qe=0,Tt=ot.length;qe<Tt;qe++)lt[qe]=i.COLOR_ATTACHMENT0+qe;lt.length=ot.length,jt=!0}}else lt[0]!==i.BACK&&(lt[0]=i.BACK,jt=!0);jt&&i.drawBuffers(lt)}function Ve(pe){return v!==pe?(i.useProgram(pe),v=pe,!0):!1}const nt={[ed]:i.FUNC_ADD,[fC]:i.FUNC_SUBTRACT,[hC]:i.FUNC_REVERSE_SUBTRACT};nt[mC]=i.MIN,nt[pC]=i.MAX;const St={[xC]:i.ZERO,[gC]:i.ONE,[vC]:i.SRC_COLOR,[Yv]:i.SRC_ALPHA,[wC]:i.SRC_ALPHA_SATURATE,[SC]:i.DST_COLOR,[bC]:i.DST_ALPHA,[yC]:i.ONE_MINUS_SRC_COLOR,[Zv]:i.ONE_MINUS_SRC_ALPHA,[_C]:i.ONE_MINUS_DST_COLOR,[MC]:i.ONE_MINUS_DST_ALPHA,[jC]:i.CONSTANT_COLOR,[EC]:i.ONE_MINUS_CONSTANT_COLOR,[TC]:i.CONSTANT_ALPHA,[AC]:i.ONE_MINUS_CONSTANT_ALPHA};function ze(pe,we,lt,jt,ot,qe,Tt,zt,It,Zt){if(pe===pl){M===!0&&(je(i.BLEND),M=!1);return}if(M===!1&&(ge(i.BLEND),M=!0),pe!==dC){if(pe!==_||Zt!==z){if((S!==ed||C!==ed)&&(i.blendEquation(i.FUNC_ADD),S=ed,C=ed),Zt)switch(pe){case Df:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Wv:i.blendFunc(i.ONE,i.ONE);break;case US:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case PS:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:wn("WebGLState: Invalid blending: ",pe);break}else switch(pe){case Df:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Wv:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case US:wn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case PS:wn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:wn("WebGLState: Invalid blending: ",pe);break}j=null,A=null,N=null,R=null,O.set(0,0,0),U=0,_=pe,z=Zt}return}ot=ot||we,qe=qe||lt,Tt=Tt||jt,(we!==S||ot!==C)&&(i.blendEquationSeparate(nt[we],nt[ot]),S=we,C=ot),(lt!==j||jt!==A||qe!==N||Tt!==R)&&(i.blendFuncSeparate(St[lt],St[jt],St[qe],St[Tt]),j=lt,A=jt,N=qe,R=Tt),(zt.equals(O)===!1||It!==U)&&(i.blendColor(zt.r,zt.g,zt.b,It),O.copy(zt),U=It),_=pe,z=!1}function ae(pe,we){pe.side===Ms?je(i.CULL_FACE):ge(i.CULL_FACE);let lt=pe.side===la;we&&(lt=!lt),Fe(lt),pe.blending===Df&&pe.transparent===!1?ze(pl):ze(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),o.setFunc(pe.depthFunc),o.setTest(pe.depthTest),o.setMask(pe.depthWrite),r.setMask(pe.colorWrite);const jt=pe.stencilWrite;l.setTest(jt),jt&&(l.setMask(pe.stencilWriteMask),l.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),l.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),Ge(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?ge(i.SAMPLE_ALPHA_TO_COVERAGE):je(i.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(pe){I!==pe&&(pe?i.frontFace(i.CW):i.frontFace(i.CCW),I=pe)}function We(pe){pe!==lC?(ge(i.CULL_FACE),pe!==V&&(pe===LS?i.cullFace(i.BACK):pe===cC?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):je(i.CULL_FACE),V=pe}function Pe(pe){pe!==F&&(B&&i.lineWidth(pe),F=pe)}function Ge(pe,we,lt){pe?(ge(i.POLYGON_OFFSET_FILL),(q!==we||W!==lt)&&(i.polygonOffset(we,lt),q=we,W=lt)):je(i.POLYGON_OFFSET_FILL)}function $e(pe){pe?ge(i.SCISSOR_TEST):je(i.SCISSOR_TEST)}function Ee(pe){pe===void 0&&(pe=i.TEXTURE0+ie-1),le!==pe&&(i.activeTexture(pe),le=pe)}function ct(pe,we,lt){lt===void 0&&(le===null?lt=i.TEXTURE0+ie-1:lt=le);let jt=re[lt];jt===void 0&&(jt={type:void 0,texture:void 0},re[lt]=jt),(jt.type!==pe||jt.texture!==we)&&(le!==lt&&(i.activeTexture(lt),le=lt),i.bindTexture(pe,we||fe[pe]),jt.type=pe,jt.texture=we)}function te(){const pe=re[le];pe!==void 0&&pe.type!==void 0&&(i.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function Y(){try{i.compressedTexImage2D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function ve(){try{i.compressedTexImage3D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function Be(){try{i.texSubImage2D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function Re(){try{i.texSubImage3D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function Ae(){try{i.compressedTexSubImage2D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function yt(){try{i.compressedTexSubImage3D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function gt(){try{i.texStorage2D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function Dt(){try{i.texStorage3D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function Nt(){try{i.texImage2D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function ke(){try{i.texImage3D(...arguments)}catch(pe){pe("WebGLState:",pe)}}function Ie(pe){ue.equals(pe)===!1&&(i.scissor(pe.x,pe.y,pe.z,pe.w),ue.copy(pe))}function ft(pe){me.equals(pe)===!1&&(i.viewport(pe.x,pe.y,pe.z,pe.w),me.copy(pe))}function he(pe,we){let lt=d.get(we);lt===void 0&&(lt=new WeakMap,d.set(we,lt));let jt=lt.get(pe);jt===void 0&&(jt=i.getUniformBlockIndex(we,pe.name),lt.set(pe,jt))}function Ce(pe,we){const jt=d.get(we).get(pe);u.get(we)!==jt&&(i.uniformBlockBinding(we,jt,pe.__bindingPointIndex),u.set(we,jt))}function ut(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},le=null,re={},m={},x=new WeakMap,g=[],v=null,M=!1,_=null,S=null,j=null,A=null,C=null,N=null,R=null,O=new Lt(0,0,0),U=0,z=!1,I=null,V=null,F=null,q=null,W=null,ue.set(0,0,i.canvas.width,i.canvas.height),me.set(0,0,i.canvas.width,i.canvas.height),r.reset(),o.reset(),l.reset()}return{buffers:{color:r,depth:o,stencil:l},enable:ge,disable:je,bindFramebuffer:Qe,drawBuffers:st,useProgram:Ve,setBlending:ze,setMaterial:ae,setFlipSided:Fe,setCullFace:We,setLineWidth:Pe,setPolygonOffset:Ge,setScissorTest:$e,activeTexture:Ee,bindTexture:ct,unbindTexture:te,compressedTexImage2D:Y,compressedTexImage3D:ve,texImage2D:Nt,texImage3D:ke,updateUBOMapping:he,uniformBlockBinding:Ce,texStorage2D:gt,texStorage3D:Dt,texSubImage2D:Be,texSubImage3D:Re,compressedTexSubImage2D:Ae,compressedTexSubImage3D:yt,scissor:Ie,viewport:ft,reset:ut}}function Aq(i,e,t,n,a,r,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new pt,f=new WeakMap;let m;const x=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(te,Y){return g?new OffscreenCanvas(te,Y):Ax("canvas")}function M(te,Y,ve){let Be=1;const Re=ct(te);if((Re.width>ve||Re.height>ve)&&(Be=ve/Math.max(Re.width,Re.height)),Be<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Ae=Math.floor(Be*Re.width),yt=Math.floor(Be*Re.height);m===void 0&&(m=v(Ae,yt));const gt=Y?v(Ae,yt):m;return gt.width=Ae,gt.height=yt,gt.getContext("2d").drawImage(te,0,0,Ae,yt),qt("WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+Ae+"x"+yt+")."),gt}else return"data"in te&&qt("WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),te;return te}function _(te){return te.generateMipmaps}function S(te){i.generateMipmap(te)}function j(te){return te.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?i.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function A(te,Y,ve,Be,Re=!1){if(te!==null){if(i[te]!==void 0)return i[te];qt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Ae=Y;if(Y===i.RED&&(ve===i.FLOAT&&(Ae=i.R32F),ve===i.HALF_FLOAT&&(Ae=i.R16F),ve===i.UNSIGNED_BYTE&&(Ae=i.R8)),Y===i.RED_INTEGER&&(ve===i.UNSIGNED_BYTE&&(Ae=i.R8UI),ve===i.UNSIGNED_SHORT&&(Ae=i.R16UI),ve===i.UNSIGNED_INT&&(Ae=i.R32UI),ve===i.BYTE&&(Ae=i.R8I),ve===i.SHORT&&(Ae=i.R16I),ve===i.INT&&(Ae=i.R32I)),Y===i.RG&&(ve===i.FLOAT&&(Ae=i.RG32F),ve===i.HALF_FLOAT&&(Ae=i.RG16F),ve===i.UNSIGNED_BYTE&&(Ae=i.RG8)),Y===i.RG_INTEGER&&(ve===i.UNSIGNED_BYTE&&(Ae=i.RG8UI),ve===i.UNSIGNED_SHORT&&(Ae=i.RG16UI),ve===i.UNSIGNED_INT&&(Ae=i.RG32UI),ve===i.BYTE&&(Ae=i.RG8I),ve===i.SHORT&&(Ae=i.RG16I),ve===i.INT&&(Ae=i.RG32I)),Y===i.RGB_INTEGER&&(ve===i.UNSIGNED_BYTE&&(Ae=i.RGB8UI),ve===i.UNSIGNED_SHORT&&(Ae=i.RGB16UI),ve===i.UNSIGNED_INT&&(Ae=i.RGB32UI),ve===i.BYTE&&(Ae=i.RGB8I),ve===i.SHORT&&(Ae=i.RGB16I),ve===i.INT&&(Ae=i.RGB32I)),Y===i.RGBA_INTEGER&&(ve===i.UNSIGNED_BYTE&&(Ae=i.RGBA8UI),ve===i.UNSIGNED_SHORT&&(Ae=i.RGBA16UI),ve===i.UNSIGNED_INT&&(Ae=i.RGBA32UI),ve===i.BYTE&&(Ae=i.RGBA8I),ve===i.SHORT&&(Ae=i.RGBA16I),ve===i.INT&&(Ae=i.RGBA32I)),Y===i.RGB&&(ve===i.UNSIGNED_INT_5_9_9_9_REV&&(Ae=i.RGB9_E5),ve===i.UNSIGNED_INT_10F_11F_11F_REV&&(Ae=i.R11F_G11F_B10F)),Y===i.RGBA){const yt=Re?Ex:ts.getTransfer(Be);ve===i.FLOAT&&(Ae=i.RGBA32F),ve===i.HALF_FLOAT&&(Ae=i.RGBA16F),ve===i.UNSIGNED_BYTE&&(Ae=yt===js?i.SRGB8_ALPHA8:i.RGBA8),ve===i.UNSIGNED_SHORT_4_4_4_4&&(Ae=i.RGBA4),ve===i.UNSIGNED_SHORT_5_5_5_1&&(Ae=i.RGB5_A1)}return(Ae===i.R16F||Ae===i.R32F||Ae===i.RG16F||Ae===i.RG32F||Ae===i.RGBA16F||Ae===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function C(te,Y){let ve;return te?Y===null||Y===lc||Y===D0?ve=i.DEPTH24_STENCIL8:Y===ti?ve=i.DEPTH32F_STENCIL8:Y===R0&&(ve=i.DEPTH24_STENCIL8,qt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===lc||Y===D0?ve=i.DEPTH_COMPONENT24:Y===ti?ve=i.DEPTH_COMPONENT32F:Y===R0&&(ve=i.DEPTH_COMPONENT16),ve}function N(te,Y){return _(te)===!0||te.isFramebufferTexture&&te.minFilter!==Wi&&te.minFilter!==ss?Math.log2(Math.max(Y.width,Y.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?Y.mipmaps.length:1}function R(te){const Y=te.target;Y.removeEventListener("dispose",R),U(Y),Y.isVideoTexture&&f.delete(Y)}function O(te){const Y=te.target;Y.removeEventListener("dispose",O),I(Y)}function U(te){const Y=n.get(te);if(Y.__webglInit===void 0)return;const ve=te.source,Be=x.get(ve);if(Be){const Re=Be[Y.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&z(te),Object.keys(Be).length===0&&x.delete(ve)}n.remove(te)}function z(te){const Y=n.get(te);i.deleteTexture(Y.__webglTexture);const ve=te.source,Be=x.get(ve);delete Be[Y.__cacheKey],o.memory.textures--}function I(te){const Y=n.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),n.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++){if(Array.isArray(Y.__webglFramebuffer[Be]))for(let Re=0;Re<Y.__webglFramebuffer[Be].length;Re++)i.deleteFramebuffer(Y.__webglFramebuffer[Be][Re]);else i.deleteFramebuffer(Y.__webglFramebuffer[Be]);Y.__webglDepthbuffer&&i.deleteRenderbuffer(Y.__webglDepthbuffer[Be])}else{if(Array.isArray(Y.__webglFramebuffer))for(let Be=0;Be<Y.__webglFramebuffer.length;Be++)i.deleteFramebuffer(Y.__webglFramebuffer[Be]);else i.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&i.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Be=0;Be<Y.__webglColorRenderbuffer.length;Be++)Y.__webglColorRenderbuffer[Be]&&i.deleteRenderbuffer(Y.__webglColorRenderbuffer[Be]);Y.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const ve=te.textures;for(let Be=0,Re=ve.length;Be<Re;Be++){const Ae=n.get(ve[Be]);Ae.__webglTexture&&(i.deleteTexture(Ae.__webglTexture),o.memory.textures--),n.remove(ve[Be])}n.remove(te)}let V=0;function F(){V=0}function q(){const te=V;return te>=a.maxTextures&&qt("WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+a.maxTextures),V+=1,te}function W(te){const Y=[];return Y.push(te.wrapS),Y.push(te.wrapT),Y.push(te.wrapR||0),Y.push(te.magFilter),Y.push(te.minFilter),Y.push(te.anisotropy),Y.push(te.internalFormat),Y.push(te.format),Y.push(te.type),Y.push(te.generateMipmaps),Y.push(te.premultiplyAlpha),Y.push(te.flipY),Y.push(te.unpackAlignment),Y.push(te.colorSpace),Y.join()}function ie(te,Y){const ve=n.get(te);if(te.isVideoTexture&&$e(te),te.isRenderTargetTexture===!1&&te.isExternalTexture!==!0&&te.version>0&&ve.__version!==te.version){const Be=te.image;if(Be===null)qt("WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)qt("WebGLRenderer: Texture marked for update but image is incomplete");else{fe(ve,te,Y);return}}else te.isExternalTexture&&(ve.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,ve.__webglTexture,i.TEXTURE0+Y)}function B(te,Y){const ve=n.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&ve.__version!==te.version){fe(ve,te,Y);return}else te.isExternalTexture&&(ve.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(i.TEXTURE_2D_ARRAY,ve.__webglTexture,i.TEXTURE0+Y)}function J(te,Y){const ve=n.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&ve.__version!==te.version){fe(ve,te,Y);return}t.bindTexture(i.TEXTURE_3D,ve.__webglTexture,i.TEXTURE0+Y)}function $(te,Y){const ve=n.get(te);if(te.version>0&&ve.__version!==te.version){ge(ve,te,Y);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ve.__webglTexture,i.TEXTURE0+Y)}const le={[Sx]:i.REPEAT,[bi]:i.CLAMP_TO_EDGE,[_x]:i.MIRRORED_REPEAT},re={[Wi]:i.NEAREST,[q_]:i.NEAREST_MIPMAP_NEAREST,[S0]:i.NEAREST_MIPMAP_LINEAR,[ss]:i.LINEAR,[nx]:i.LINEAR_MIPMAP_NEAREST,[tc]:i.LINEAR_MIPMAP_LINEAR},H={[VC]:i.NEVER,[ZC]:i.ALWAYS,[HC]:i.LESS,[Q_]:i.LEQUAL,[qC]:i.EQUAL,[YC]:i.GEQUAL,[XC]:i.GREATER,[WC]:i.NOTEQUAL};function ee(te,Y){if(Y.type===ti&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===ss||Y.magFilter===nx||Y.magFilter===S0||Y.magFilter===tc||Y.minFilter===ss||Y.minFilter===nx||Y.minFilter===S0||Y.minFilter===tc)&&qt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(te,i.TEXTURE_WRAP_S,le[Y.wrapS]),i.texParameteri(te,i.TEXTURE_WRAP_T,le[Y.wrapT]),(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY)&&i.texParameteri(te,i.TEXTURE_WRAP_R,le[Y.wrapR]),i.texParameteri(te,i.TEXTURE_MAG_FILTER,re[Y.magFilter]),i.texParameteri(te,i.TEXTURE_MIN_FILTER,re[Y.minFilter]),Y.compareFunction&&(i.texParameteri(te,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(te,i.TEXTURE_COMPARE_FUNC,H[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===Wi||Y.minFilter!==S0&&Y.minFilter!==tc||Y.type===ti&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||n.get(Y).__currentAnisotropy){const ve=e.get("EXT_texture_filter_anisotropic");i.texParameterf(te,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,a.getMaxAnisotropy())),n.get(Y).__currentAnisotropy=Y.anisotropy}}}function ue(te,Y){let ve=!1;te.__webglInit===void 0&&(te.__webglInit=!0,Y.addEventListener("dispose",R));const Be=Y.source;let Re=x.get(Be);Re===void 0&&(Re={},x.set(Be,Re));const Ae=W(Y);if(Ae!==te.__cacheKey){Re[Ae]===void 0&&(Re[Ae]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ve=!0),Re[Ae].usedTimes++;const yt=Re[te.__cacheKey];yt!==void 0&&(Re[te.__cacheKey].usedTimes--,yt.usedTimes===0&&z(Y)),te.__cacheKey=Ae,te.__webglTexture=Re[Ae].texture}return ve}function me(te,Y,ve){return Math.floor(Math.floor(te/ve)/Y)}function be(te,Y,ve,Be){const Ae=te.updateRanges;if(Ae.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,Y.width,Y.height,ve,Be,Y.data);else{Ae.sort((ke,Ie)=>ke.start-Ie.start);let yt=0;for(let ke=1;ke<Ae.length;ke++){const Ie=Ae[yt],ft=Ae[ke],he=Ie.start+Ie.count,Ce=me(ft.start,Y.width,4),ut=me(Ie.start,Y.width,4);ft.start<=he+1&&Ce===ut&&me(ft.start+ft.count-1,Y.width,4)===Ce?Ie.count=Math.max(Ie.count,ft.start+ft.count-Ie.start):(++yt,Ae[yt]=ft)}Ae.length=yt+1;const gt=i.getParameter(i.UNPACK_ROW_LENGTH),Dt=i.getParameter(i.UNPACK_SKIP_PIXELS),Nt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,Y.width);for(let ke=0,Ie=Ae.length;ke<Ie;ke++){const ft=Ae[ke],he=Math.floor(ft.start/4),Ce=Math.ceil(ft.count/4),ut=he%Y.width,pe=Math.floor(he/Y.width),we=Ce,lt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,ut),i.pixelStorei(i.UNPACK_SKIP_ROWS,pe),t.texSubImage2D(i.TEXTURE_2D,0,ut,pe,we,lt,ve,Be,Y.data)}te.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,gt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Dt),i.pixelStorei(i.UNPACK_SKIP_ROWS,Nt)}}function fe(te,Y,ve){let Be=i.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Be=i.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Be=i.TEXTURE_3D);const Re=ue(te,Y),Ae=Y.source;t.bindTexture(Be,te.__webglTexture,i.TEXTURE0+ve);const yt=n.get(Ae);if(Ae.version!==yt.__version||Re===!0){t.activeTexture(i.TEXTURE0+ve);const gt=ts.getPrimaries(ts.workingColorSpace),Dt=Y.colorSpace===$c?null:ts.getPrimaries(Y.colorSpace),Nt=Y.colorSpace===$c||gt===Dt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Y.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Y.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);let ke=M(Y.image,!1,a.maxTextureSize);ke=Ee(Y,ke);const Ie=r.convert(Y.format,Y.colorSpace),ft=r.convert(Y.type);let he=A(Y.internalFormat,Ie,ft,Y.colorSpace,Y.isVideoTexture);ee(Be,Y);let Ce;const ut=Y.mipmaps,pe=Y.isVideoTexture!==!0,we=yt.__version===void 0||Re===!0,lt=Ae.dataReady,jt=N(Y,ke);if(Y.isDepthTexture)he=C(Y.format===U0,Y.type),we&&(pe?t.texStorage2D(i.TEXTURE_2D,1,he,ke.width,ke.height):t.texImage2D(i.TEXTURE_2D,0,he,ke.width,ke.height,0,Ie,ft,null));else if(Y.isDataTexture)if(ut.length>0){pe&&we&&t.texStorage2D(i.TEXTURE_2D,jt,he,ut[0].width,ut[0].height);for(let ot=0,qe=ut.length;ot<qe;ot++)Ce=ut[ot],pe?lt&&t.texSubImage2D(i.TEXTURE_2D,ot,0,0,Ce.width,Ce.height,Ie,ft,Ce.data):t.texImage2D(i.TEXTURE_2D,ot,he,Ce.width,Ce.height,0,Ie,ft,Ce.data);Y.generateMipmaps=!1}else pe?(we&&t.texStorage2D(i.TEXTURE_2D,jt,he,ke.width,ke.height),lt&&be(Y,ke,Ie,ft)):t.texImage2D(i.TEXTURE_2D,0,he,ke.width,ke.height,0,Ie,ft,ke.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){pe&&we&&t.texStorage3D(i.TEXTURE_2D_ARRAY,jt,he,ut[0].width,ut[0].height,ke.depth);for(let ot=0,qe=ut.length;ot<qe;ot++)if(Ce=ut[ot],Y.format!==Ai)if(Ie!==null)if(pe){if(lt)if(Y.layerUpdates.size>0){const Tt=XS(Ce.width,Ce.height,Y.format,Y.type);for(const zt of Y.layerUpdates){const It=Ce.data.subarray(zt*Tt/Ce.data.BYTES_PER_ELEMENT,(zt+1)*Tt/Ce.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ot,0,0,zt,Ce.width,Ce.height,1,Ie,It)}Y.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ot,0,0,0,Ce.width,Ce.height,ke.depth,Ie,Ce.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ot,he,Ce.width,Ce.height,ke.depth,0,Ce.data,0,0);else qt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?lt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,ot,0,0,0,Ce.width,Ce.height,ke.depth,Ie,ft,Ce.data):t.texImage3D(i.TEXTURE_2D_ARRAY,ot,he,Ce.width,Ce.height,ke.depth,0,Ie,ft,Ce.data)}else{pe&&we&&t.texStorage2D(i.TEXTURE_2D,jt,he,ut[0].width,ut[0].height);for(let ot=0,qe=ut.length;ot<qe;ot++)Ce=ut[ot],Y.format!==Ai?Ie!==null?pe?lt&&t.compressedTexSubImage2D(i.TEXTURE_2D,ot,0,0,Ce.width,Ce.height,Ie,Ce.data):t.compressedTexImage2D(i.TEXTURE_2D,ot,he,Ce.width,Ce.height,0,Ce.data):qt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?lt&&t.texSubImage2D(i.TEXTURE_2D,ot,0,0,Ce.width,Ce.height,Ie,ft,Ce.data):t.texImage2D(i.TEXTURE_2D,ot,he,Ce.width,Ce.height,0,Ie,ft,Ce.data)}else if(Y.isDataArrayTexture)if(pe){if(we&&t.texStorage3D(i.TEXTURE_2D_ARRAY,jt,he,ke.width,ke.height,ke.depth),lt)if(Y.layerUpdates.size>0){const ot=XS(ke.width,ke.height,Y.format,Y.type);for(const qe of Y.layerUpdates){const Tt=ke.data.subarray(qe*ot/ke.data.BYTES_PER_ELEMENT,(qe+1)*ot/ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,qe,ke.width,ke.height,1,Ie,ft,Tt)}Y.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,Ie,ft,ke.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,he,ke.width,ke.height,ke.depth,0,Ie,ft,ke.data);else if(Y.isData3DTexture)pe?(we&&t.texStorage3D(i.TEXTURE_3D,jt,he,ke.width,ke.height,ke.depth),lt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,Ie,ft,ke.data)):t.texImage3D(i.TEXTURE_3D,0,he,ke.width,ke.height,ke.depth,0,Ie,ft,ke.data);else if(Y.isFramebufferTexture){if(we)if(pe)t.texStorage2D(i.TEXTURE_2D,jt,he,ke.width,ke.height);else{let ot=ke.width,qe=ke.height;for(let Tt=0;Tt<jt;Tt++)t.texImage2D(i.TEXTURE_2D,Tt,he,ot,qe,0,Ie,ft,null),ot>>=1,qe>>=1}}else if(ut.length>0){if(pe&&we){const ot=ct(ut[0]);t.texStorage2D(i.TEXTURE_2D,jt,he,ot.width,ot.height)}for(let ot=0,qe=ut.length;ot<qe;ot++)Ce=ut[ot],pe?lt&&t.texSubImage2D(i.TEXTURE_2D,ot,0,0,Ie,ft,Ce):t.texImage2D(i.TEXTURE_2D,ot,he,Ie,ft,Ce);Y.generateMipmaps=!1}else if(pe){if(we){const ot=ct(ke);t.texStorage2D(i.TEXTURE_2D,jt,he,ot.width,ot.height)}lt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ie,ft,ke)}else t.texImage2D(i.TEXTURE_2D,0,he,Ie,ft,ke);_(Y)&&S(Be),yt.__version=Ae.version,Y.onUpdate&&Y.onUpdate(Y)}te.__version=Y.version}function ge(te,Y,ve){if(Y.image.length!==6)return;const Be=ue(te,Y),Re=Y.source;t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+ve);const Ae=n.get(Re);if(Re.version!==Ae.__version||Be===!0){t.activeTexture(i.TEXTURE0+ve);const yt=ts.getPrimaries(ts.workingColorSpace),gt=Y.colorSpace===$c?null:ts.getPrimaries(Y.colorSpace),Dt=Y.colorSpace===$c||yt===gt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Y.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Y.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);const Nt=Y.isCompressedTexture||Y.image[0].isCompressedTexture,ke=Y.image[0]&&Y.image[0].isDataTexture,Ie=[];for(let qe=0;qe<6;qe++)!Nt&&!ke?Ie[qe]=M(Y.image[qe],!0,a.maxCubemapSize):Ie[qe]=ke?Y.image[qe].image:Y.image[qe],Ie[qe]=Ee(Y,Ie[qe]);const ft=Ie[0],he=r.convert(Y.format,Y.colorSpace),Ce=r.convert(Y.type),ut=A(Y.internalFormat,he,Ce,Y.colorSpace),pe=Y.isVideoTexture!==!0,we=Ae.__version===void 0||Be===!0,lt=Re.dataReady;let jt=N(Y,ft);ee(i.TEXTURE_CUBE_MAP,Y);let ot;if(Nt){pe&&we&&t.texStorage2D(i.TEXTURE_CUBE_MAP,jt,ut,ft.width,ft.height);for(let qe=0;qe<6;qe++){ot=Ie[qe].mipmaps;for(let Tt=0;Tt<ot.length;Tt++){const zt=ot[Tt];Y.format!==Ai?he!==null?pe?lt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt,0,0,zt.width,zt.height,he,zt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt,ut,zt.width,zt.height,0,zt.data):qt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt,0,0,zt.width,zt.height,he,Ce,zt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt,ut,zt.width,zt.height,0,he,Ce,zt.data)}}}else{if(ot=Y.mipmaps,pe&&we){ot.length>0&&jt++;const qe=ct(Ie[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,jt,ut,qe.width,qe.height)}for(let qe=0;qe<6;qe++)if(ke){pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,Ie[qe].width,Ie[qe].height,he,Ce,Ie[qe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,ut,Ie[qe].width,Ie[qe].height,0,he,Ce,Ie[qe].data);for(let Tt=0;Tt<ot.length;Tt++){const It=ot[Tt].image[qe].image;pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt+1,0,0,It.width,It.height,he,Ce,It.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt+1,ut,It.width,It.height,0,he,Ce,It.data)}}else{pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,he,Ce,Ie[qe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,ut,he,Ce,Ie[qe]);for(let Tt=0;Tt<ot.length;Tt++){const zt=ot[Tt];pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt+1,0,0,he,Ce,zt.image[qe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Tt+1,ut,he,Ce,zt.image[qe])}}}_(Y)&&S(i.TEXTURE_CUBE_MAP),Ae.__version=Re.version,Y.onUpdate&&Y.onUpdate(Y)}te.__version=Y.version}function je(te,Y,ve,Be,Re,Ae){const yt=r.convert(ve.format,ve.colorSpace),gt=r.convert(ve.type),Dt=A(ve.internalFormat,yt,gt,ve.colorSpace),Nt=n.get(Y),ke=n.get(ve);if(ke.__renderTarget=Y,!Nt.__hasExternalTextures){const Ie=Math.max(1,Y.width>>Ae),ft=Math.max(1,Y.height>>Ae);Re===i.TEXTURE_3D||Re===i.TEXTURE_2D_ARRAY?t.texImage3D(Re,Ae,Dt,Ie,ft,Y.depth,0,yt,gt,null):t.texImage2D(Re,Ae,Dt,Ie,ft,0,yt,gt,null)}t.bindFramebuffer(i.FRAMEBUFFER,te),Ge(Y)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Be,Re,ke.__webglTexture,0,Pe(Y)):(Re===i.TEXTURE_2D||Re>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Be,Re,ke.__webglTexture,Ae),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Qe(te,Y,ve){if(i.bindRenderbuffer(i.RENDERBUFFER,te),Y.depthBuffer){const Be=Y.depthTexture,Re=Be&&Be.isDepthTexture?Be.type:null,Ae=C(Y.stencilBuffer,Re),yt=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,gt=Pe(Y);Ge(Y)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,gt,Ae,Y.width,Y.height):ve?i.renderbufferStorageMultisample(i.RENDERBUFFER,gt,Ae,Y.width,Y.height):i.renderbufferStorage(i.RENDERBUFFER,Ae,Y.width,Y.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,yt,i.RENDERBUFFER,te)}else{const Be=Y.textures;for(let Re=0;Re<Be.length;Re++){const Ae=Be[Re],yt=r.convert(Ae.format,Ae.colorSpace),gt=r.convert(Ae.type),Dt=A(Ae.internalFormat,yt,gt,Ae.colorSpace),Nt=Pe(Y);ve&&Ge(Y)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Nt,Dt,Y.width,Y.height):Ge(Y)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Nt,Dt,Y.width,Y.height):i.renderbufferStorage(i.RENDERBUFFER,Dt,Y.width,Y.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function st(te,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,te),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Be=n.get(Y.depthTexture);Be.__renderTarget=Y,(!Be.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),ie(Y.depthTexture,0);const Re=Be.__webglTexture,Ae=Pe(Y);if(Y.depthTexture.format===L0)Ge(Y)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Re,0,Ae):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Re,0);else if(Y.depthTexture.format===U0)Ge(Y)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Re,0,Ae):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function Ve(te){const Y=n.get(te),ve=te.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==te.depthTexture){const Be=te.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),Be){const Re=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,Be.removeEventListener("dispose",Re)};Be.addEventListener("dispose",Re),Y.__depthDisposeCallback=Re}Y.__boundDepthTexture=Be}if(te.depthTexture&&!Y.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");const Be=te.texture.mipmaps;Be&&Be.length>0?st(Y.__webglFramebuffer[0],te):st(Y.__webglFramebuffer,te)}else if(ve){Y.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)if(t.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer[Be]),Y.__webglDepthbuffer[Be]===void 0)Y.__webglDepthbuffer[Be]=i.createRenderbuffer(),Qe(Y.__webglDepthbuffer[Be],te,!1);else{const Re=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ae=Y.__webglDepthbuffer[Be];i.bindRenderbuffer(i.RENDERBUFFER,Ae),i.framebufferRenderbuffer(i.FRAMEBUFFER,Re,i.RENDERBUFFER,Ae)}}else{const Be=te.texture.mipmaps;if(Be&&Be.length>0?t.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=i.createRenderbuffer(),Qe(Y.__webglDepthbuffer,te,!1);else{const Re=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ae=Y.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ae),i.framebufferRenderbuffer(i.FRAMEBUFFER,Re,i.RENDERBUFFER,Ae)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function nt(te,Y,ve){const Be=n.get(te);Y!==void 0&&je(Be.__webglFramebuffer,te,te.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ve!==void 0&&Ve(te)}function St(te){const Y=te.texture,ve=n.get(te),Be=n.get(Y);te.addEventListener("dispose",O);const Re=te.textures,Ae=te.isWebGLCubeRenderTarget===!0,yt=Re.length>1;if(yt||(Be.__webglTexture===void 0&&(Be.__webglTexture=i.createTexture()),Be.__version=Y.version,o.memory.textures++),Ae){ve.__webglFramebuffer=[];for(let gt=0;gt<6;gt++)if(Y.mipmaps&&Y.mipmaps.length>0){ve.__webglFramebuffer[gt]=[];for(let Dt=0;Dt<Y.mipmaps.length;Dt++)ve.__webglFramebuffer[gt][Dt]=i.createFramebuffer()}else ve.__webglFramebuffer[gt]=i.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){ve.__webglFramebuffer=[];for(let gt=0;gt<Y.mipmaps.length;gt++)ve.__webglFramebuffer[gt]=i.createFramebuffer()}else ve.__webglFramebuffer=i.createFramebuffer();if(yt)for(let gt=0,Dt=Re.length;gt<Dt;gt++){const Nt=n.get(Re[gt]);Nt.__webglTexture===void 0&&(Nt.__webglTexture=i.createTexture(),o.memory.textures++)}if(te.samples>0&&Ge(te)===!1){ve.__webglMultisampledFramebuffer=i.createFramebuffer(),ve.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let gt=0;gt<Re.length;gt++){const Dt=Re[gt];ve.__webglColorRenderbuffer[gt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ve.__webglColorRenderbuffer[gt]);const Nt=r.convert(Dt.format,Dt.colorSpace),ke=r.convert(Dt.type),Ie=A(Dt.internalFormat,Nt,ke,Dt.colorSpace,te.isXRRenderTarget===!0),ft=Pe(te);i.renderbufferStorageMultisample(i.RENDERBUFFER,ft,Ie,te.width,te.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+gt,i.RENDERBUFFER,ve.__webglColorRenderbuffer[gt])}i.bindRenderbuffer(i.RENDERBUFFER,null),te.depthBuffer&&(ve.__webglDepthRenderbuffer=i.createRenderbuffer(),Qe(ve.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(i.TEXTURE_CUBE_MAP,Be.__webglTexture),ee(i.TEXTURE_CUBE_MAP,Y);for(let gt=0;gt<6;gt++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let Dt=0;Dt<Y.mipmaps.length;Dt++)je(ve.__webglFramebuffer[gt][Dt],te,Y,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Dt);else je(ve.__webglFramebuffer[gt],te,Y,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0);_(Y)&&S(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(yt){for(let gt=0,Dt=Re.length;gt<Dt;gt++){const Nt=Re[gt],ke=n.get(Nt);let Ie=i.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(Ie=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Ie,ke.__webglTexture),ee(Ie,Nt),je(ve.__webglFramebuffer,te,Nt,i.COLOR_ATTACHMENT0+gt,Ie,0),_(Nt)&&S(Ie)}t.unbindTexture()}else{let gt=i.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(gt=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(gt,Be.__webglTexture),ee(gt,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let Dt=0;Dt<Y.mipmaps.length;Dt++)je(ve.__webglFramebuffer[Dt],te,Y,i.COLOR_ATTACHMENT0,gt,Dt);else je(ve.__webglFramebuffer,te,Y,i.COLOR_ATTACHMENT0,gt,0);_(Y)&&S(gt),t.unbindTexture()}te.depthBuffer&&Ve(te)}function ze(te){const Y=te.textures;for(let ve=0,Be=Y.length;ve<Be;ve++){const Re=Y[ve];if(_(Re)){const Ae=j(te),yt=n.get(Re).__webglTexture;t.bindTexture(Ae,yt),S(Ae),t.unbindTexture()}}}const ae=[],Fe=[];function We(te){if(te.samples>0){if(Ge(te)===!1){const Y=te.textures,ve=te.width,Be=te.height;let Re=i.COLOR_BUFFER_BIT;const Ae=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,yt=n.get(te),gt=Y.length>1;if(gt)for(let Nt=0;Nt<Y.length;Nt++)t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,yt.__webglMultisampledFramebuffer);const Dt=te.texture.mipmaps;Dt&&Dt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,yt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,yt.__webglFramebuffer);for(let Nt=0;Nt<Y.length;Nt++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Re|=i.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Re|=i.STENCIL_BUFFER_BIT)),gt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,yt.__webglColorRenderbuffer[Nt]);const ke=n.get(Y[Nt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ke,0)}i.blitFramebuffer(0,0,ve,Be,0,0,ve,Be,Re,i.NEAREST),u===!0&&(ae.length=0,Fe.length=0,ae.push(i.COLOR_ATTACHMENT0+Nt),te.depthBuffer&&te.resolveDepthBuffer===!1&&(ae.push(Ae),Fe.push(Ae),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Fe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ae))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),gt)for(let Nt=0;Nt<Y.length;Nt++){t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,yt.__webglColorRenderbuffer[Nt]);const ke=n.get(Y[Nt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,ke,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,yt.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&u){const Y=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Y])}}}function Pe(te){return Math.min(a.maxSamples,te.samples)}function Ge(te){const Y=n.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function $e(te){const Y=o.render.frame;f.get(te)!==Y&&(f.set(te,Y),te.update())}function Ee(te,Y){const ve=te.colorSpace,Be=te.format,Re=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||ve!==gl&&ve!==$c&&(ts.getTransfer(ve)===js?(Be!==Ai||Re!==gr)&&qt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):wn("WebGLTextures: Unsupported texture color space:",ve)),Y}function ct(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(d.width=te.naturalWidth||te.width,d.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(d.width=te.displayWidth,d.height=te.displayHeight):(d.width=te.width,d.height=te.height),d}this.allocateTextureUnit=q,this.resetTextureUnits=F,this.setTexture2D=ie,this.setTexture2DArray=B,this.setTexture3D=J,this.setTextureCube=$,this.rebindTextures=nt,this.setupRenderTarget=St,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=We,this.setupDepthRenderbuffer=Ve,this.setupFrameBufferTexture=je,this.useMultisampledRTT=Ge}function tR(i,e){function t(n,a=$c){let r;const o=ts.getTransfer(a);if(n===gr)return i.UNSIGNED_BYTE;if(n===eb)return i.UNSIGNED_SHORT_4_4_4_4;if(n===tb)return i.UNSIGNED_SHORT_5_5_5_1;if(n===X_)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===W_)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===Qy)return i.BYTE;if(n===$y)return i.SHORT;if(n===R0)return i.UNSIGNED_SHORT;if(n===Xx)return i.INT;if(n===lc)return i.UNSIGNED_INT;if(n===ti)return i.FLOAT;if(n===Ti)return i.HALF_FLOAT;if(n===Y_)return i.ALPHA;if(n===Z_)return i.RGB;if(n===Ai)return i.RGBA;if(n===L0)return i.DEPTH_COMPONENT;if(n===U0)return i.DEPTH_STENCIL;if(n===Wx)return i.RED;if(n===Yx)return i.RED_INTEGER;if(n===nb)return i.RG;if(n===sb)return i.RG_INTEGER;if(n===ib)return i.RGBA_INTEGER;if(n===sx||n===ix||n===ax||n===rx)if(o===js)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===sx)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ix)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ax)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===rx)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===sx)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ix)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ax)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===rx)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===sy||n===iy||n===ay||n===ry)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===sy)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===iy)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ay)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ry)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===oy||n===ly||n===cy)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===oy||n===ly)return o===js?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===cy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===uy||n===dy||n===fy||n===hy||n===my||n===py||n===xy||n===gy||n===vy||n===yy||n===by||n===My||n===Sy||n===_y)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===uy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===dy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===fy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===hy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===my)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===py)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===xy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===gy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===vy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===yy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===by)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===My)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Sy)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===_y)return o===js?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===wy||n===jy||n===Ey)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===wy)return o===js?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===jy)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ey)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Ty||n===Ay||n===Cy||n===Ny)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Ty)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Ay)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Cy)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Ny)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===D0?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const Cq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Nq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Rq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new o3(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Zi({vertexShader:Cq,fragmentShader:Nq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Bs(new Ta(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Dq extends cc{constructor(e,t){super();const n=this;let a=null,r=1,o=null,l="local-floor",u=1,d=null,f=null,m=null,x=null,g=null,v=null;const M=typeof XRWebGLBinding<"u",_=new Rq,S={},j=t.getContextAttributes();let A=null,C=null;const N=[],R=[],O=new pt;let U=null;const z=new ci;z.viewport=new ns;const I=new ci;I.viewport=new ns;const V=[z,I],F=new qN;let q=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let ge=N[fe];return ge===void 0&&(ge=new Ov,N[fe]=ge),ge.getTargetRaySpace()},this.getControllerGrip=function(fe){let ge=N[fe];return ge===void 0&&(ge=new Ov,N[fe]=ge),ge.getGripSpace()},this.getHand=function(fe){let ge=N[fe];return ge===void 0&&(ge=new Ov,N[fe]=ge),ge.getHandSpace()};function ie(fe){const ge=R.indexOf(fe.inputSource);if(ge===-1)return;const je=N[ge];je!==void 0&&(je.update(fe.inputSource,fe.frame,d||o),je.dispatchEvent({type:fe.type,data:fe.inputSource}))}function B(){a.removeEventListener("select",ie),a.removeEventListener("selectstart",ie),a.removeEventListener("selectend",ie),a.removeEventListener("squeeze",ie),a.removeEventListener("squeezestart",ie),a.removeEventListener("squeezeend",ie),a.removeEventListener("end",B),a.removeEventListener("inputsourceschange",J);for(let fe=0;fe<N.length;fe++){const ge=R[fe];ge!==null&&(R[fe]=null,N[fe].disconnect(ge))}q=null,W=null,_.reset();for(const fe in S)delete S[fe];e.setRenderTarget(A),g=null,x=null,m=null,a=null,C=null,be.stop(),n.isPresenting=!1,e.setPixelRatio(U),e.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){r=fe,n.isPresenting===!0&&qt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){l=fe,n.isPresenting===!0&&qt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(fe){d=fe},this.getBaseLayer=function(){return x!==null?x:g},this.getBinding=function(){return m===null&&M&&(m=new XRWebGLBinding(a,t)),m},this.getFrame=function(){return v},this.getSession=function(){return a},this.setSession=async function(fe){if(a=fe,a!==null){if(A=e.getRenderTarget(),a.addEventListener("select",ie),a.addEventListener("selectstart",ie),a.addEventListener("selectend",ie),a.addEventListener("squeeze",ie),a.addEventListener("squeezestart",ie),a.addEventListener("squeezeend",ie),a.addEventListener("end",B),a.addEventListener("inputsourceschange",J),j.xrCompatible!==!0&&await t.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(O),M&&"createProjectionLayer"in XRWebGLBinding.prototype){let je=null,Qe=null,st=null;j.depth&&(st=j.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,je=j.stencil?U0:L0,Qe=j.stencil?D0:lc);const Ve={colorFormat:t.RGBA8,depthFormat:st,scaleFactor:r};m=this.getBinding(),x=m.createProjectionLayer(Ve),a.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),C=new Ea(x.textureWidth,x.textureHeight,{format:Ai,type:gr,depthTexture:new xb(x.textureWidth,x.textureHeight,Qe,void 0,void 0,void 0,void 0,void 0,void 0,je),stencilBuffer:j.stencil,colorSpace:e.outputColorSpace,samples:j.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const je={antialias:j.antialias,alpha:!0,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:r};g=new XRWebGLLayer(a,t,je),a.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),C=new Ea(g.framebufferWidth,g.framebufferHeight,{format:Ai,type:gr,colorSpace:e.outputColorSpace,stencilBuffer:j.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(u),d=null,o=await a.requestReferenceSpace(l),be.setContext(a),be.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function J(fe){for(let ge=0;ge<fe.removed.length;ge++){const je=fe.removed[ge],Qe=R.indexOf(je);Qe>=0&&(R[Qe]=null,N[Qe].disconnect(je))}for(let ge=0;ge<fe.added.length;ge++){const je=fe.added[ge];let Qe=R.indexOf(je);if(Qe===-1){for(let Ve=0;Ve<N.length;Ve++)if(Ve>=R.length){R.push(je),Qe=Ve;break}else if(R[Ve]===null){R[Ve]=je,Qe=Ve;break}if(Qe===-1)break}const st=N[Qe];st&&st.connect(je)}}const $=new Q,le=new Q;function re(fe,ge,je){$.setFromMatrixPosition(ge.matrixWorld),le.setFromMatrixPosition(je.matrixWorld);const Qe=$.distanceTo(le),st=ge.projectionMatrix.elements,Ve=je.projectionMatrix.elements,nt=st[14]/(st[10]-1),St=st[14]/(st[10]+1),ze=(st[9]+1)/st[5],ae=(st[9]-1)/st[5],Fe=(st[8]-1)/st[0],We=(Ve[8]+1)/Ve[0],Pe=nt*Fe,Ge=nt*We,$e=Qe/(-Fe+We),Ee=$e*-Fe;if(ge.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(Ee),fe.translateZ($e),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert(),st[10]===-1)fe.projectionMatrix.copy(ge.projectionMatrix),fe.projectionMatrixInverse.copy(ge.projectionMatrixInverse);else{const ct=nt+$e,te=St+$e,Y=Pe-Ee,ve=Ge+(Qe-Ee),Be=ze*St/te*ct,Re=ae*St/te*ct;fe.projectionMatrix.makePerspective(Y,ve,Be,Re,ct,te),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}}function H(fe,ge){ge===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(ge.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(a===null)return;let ge=fe.near,je=fe.far;_.texture!==null&&(_.depthNear>0&&(ge=_.depthNear),_.depthFar>0&&(je=_.depthFar)),F.near=I.near=z.near=ge,F.far=I.far=z.far=je,(q!==F.near||W!==F.far)&&(a.updateRenderState({depthNear:F.near,depthFar:F.far}),q=F.near,W=F.far),F.layers.mask=fe.layers.mask|6,z.layers.mask=F.layers.mask&3,I.layers.mask=F.layers.mask&5;const Qe=fe.parent,st=F.cameras;H(F,Qe);for(let Ve=0;Ve<st.length;Ve++)H(st[Ve],Qe);st.length===2?re(F,z,I):F.projectionMatrix.copy(z.projectionMatrix),ee(fe,F,Qe)};function ee(fe,ge,je){je===null?fe.matrix.copy(ge.matrixWorld):(fe.matrix.copy(je.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(ge.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0),fe.projectionMatrix.copy(ge.projectionMatrix),fe.projectionMatrixInverse.copy(ge.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=z0*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(x===null&&g===null))return u},this.setFoveation=function(fe){u=fe,x!==null&&(x.fixedFoveation=fe),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=fe)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(F)},this.getCameraTexture=function(fe){return S[fe]};let ue=null;function me(fe,ge){if(f=ge.getViewerPose(d||o),v=ge,f!==null){const je=f.views;g!==null&&(e.setRenderTargetFramebuffer(C,g.framebuffer),e.setRenderTarget(C));let Qe=!1;je.length!==F.cameras.length&&(F.cameras.length=0,Qe=!0);for(let St=0;St<je.length;St++){const ze=je[St];let ae=null;if(g!==null)ae=g.getViewport(ze);else{const We=m.getViewSubImage(x,ze);ae=We.viewport,St===0&&(e.setRenderTargetTextures(C,We.colorTexture,We.depthStencilTexture),e.setRenderTarget(C))}let Fe=V[St];Fe===void 0&&(Fe=new ci,Fe.layers.enable(St),Fe.viewport=new ns,V[St]=Fe),Fe.matrix.fromArray(ze.transform.matrix),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.projectionMatrix.fromArray(ze.projectionMatrix),Fe.projectionMatrixInverse.copy(Fe.projectionMatrix).invert(),Fe.viewport.set(ae.x,ae.y,ae.width,ae.height),St===0&&(F.matrix.copy(Fe.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),Qe===!0&&F.cameras.push(Fe)}const st=a.enabledFeatures;if(st&&st.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&M){m=n.getBinding();const St=m.getDepthInformation(je[0]);St&&St.isValid&&St.texture&&_.init(St,a.renderState)}if(st&&st.includes("camera-access")&&M){e.state.unbindTexture(),m=n.getBinding();for(let St=0;St<je.length;St++){const ze=je[St].camera;if(ze){let ae=S[ze];ae||(ae=new o3,S[ze]=ae);const Fe=m.getCameraImage(ze);ae.sourceTexture=Fe}}}}for(let je=0;je<N.length;je++){const Qe=R[je],st=N[je];Qe!==null&&st!==void 0&&st.update(Qe,ge,d||o)}ue&&ue(fe,ge),ge.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ge}),v=null}const be=new KN;be.setAnimationLoop(me),this.setAnimationLoop=function(fe){ue=fe},this.dispose=function(){}}}const pf=new is,Lq=new mn;function Uq(i,e){function t(_,S){_.matrixAutoUpdate===!0&&_.updateMatrix(),S.value.copy(_.matrix)}function n(_,S){S.color.getRGB(_.fogColor.value,eN(i)),S.isFog?(_.fogNear.value=S.near,_.fogFar.value=S.far):S.isFogExp2&&(_.fogDensity.value=S.density)}function a(_,S,j,A,C){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(_,S):S.isMeshToonMaterial?(r(_,S),m(_,S)):S.isMeshPhongMaterial?(r(_,S),f(_,S)):S.isMeshStandardMaterial?(r(_,S),x(_,S),S.isMeshPhysicalMaterial&&g(_,S,C)):S.isMeshMatcapMaterial?(r(_,S),v(_,S)):S.isMeshDepthMaterial?r(_,S):S.isMeshDistanceMaterial?(r(_,S),M(_,S)):S.isMeshNormalMaterial?r(_,S):S.isLineBasicMaterial?(o(_,S),S.isLineDashedMaterial&&l(_,S)):S.isPointsMaterial?u(_,S,j,A):S.isSpriteMaterial?d(_,S):S.isShadowMaterial?(_.color.value.copy(S.color),_.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(_,S){_.opacity.value=S.opacity,S.color&&_.diffuse.value.copy(S.color),S.emissive&&_.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(_.map.value=S.map,t(S.map,_.mapTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.bumpMap&&(_.bumpMap.value=S.bumpMap,t(S.bumpMap,_.bumpMapTransform),_.bumpScale.value=S.bumpScale,S.side===la&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,t(S.normalMap,_.normalMapTransform),_.normalScale.value.copy(S.normalScale),S.side===la&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,t(S.displacementMap,_.displacementMapTransform),_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,_.emissiveMapTransform)),S.specularMap&&(_.specularMap.value=S.specularMap,t(S.specularMap,_.specularMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest);const j=e.get(S),A=j.envMap,C=j.envMapRotation;A&&(_.envMap.value=A,pf.copy(C),pf.x*=-1,pf.y*=-1,pf.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(pf.y*=-1,pf.z*=-1),_.envMapRotation.value.setFromMatrix4(Lq.makeRotationFromEuler(pf)),_.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=S.reflectivity,_.ior.value=S.ior,_.refractionRatio.value=S.refractionRatio),S.lightMap&&(_.lightMap.value=S.lightMap,_.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,_.lightMapTransform)),S.aoMap&&(_.aoMap.value=S.aoMap,_.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,_.aoMapTransform))}function o(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,S.map&&(_.map.value=S.map,t(S.map,_.mapTransform))}function l(_,S){_.dashSize.value=S.dashSize,_.totalSize.value=S.dashSize+S.gapSize,_.scale.value=S.scale}function u(_,S,j,A){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.size.value=S.size*j,_.scale.value=A*.5,S.map&&(_.map.value=S.map,t(S.map,_.uvTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest)}function d(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.rotation.value=S.rotation,S.map&&(_.map.value=S.map,t(S.map,_.mapTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest)}function f(_,S){_.specular.value.copy(S.specular),_.shininess.value=Math.max(S.shininess,1e-4)}function m(_,S){S.gradientMap&&(_.gradientMap.value=S.gradientMap)}function x(_,S){_.metalness.value=S.metalness,S.metalnessMap&&(_.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,_.metalnessMapTransform)),_.roughness.value=S.roughness,S.roughnessMap&&(_.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,_.roughnessMapTransform)),S.envMap&&(_.envMapIntensity.value=S.envMapIntensity)}function g(_,S,j){_.ior.value=S.ior,S.sheen>0&&(_.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),_.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(_.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,_.sheenColorMapTransform)),S.sheenRoughnessMap&&(_.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,_.sheenRoughnessMapTransform))),S.clearcoat>0&&(_.clearcoat.value=S.clearcoat,_.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(_.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,_.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(_.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===la&&_.clearcoatNormalScale.value.negate())),S.dispersion>0&&(_.dispersion.value=S.dispersion),S.iridescence>0&&(_.iridescence.value=S.iridescence,_.iridescenceIOR.value=S.iridescenceIOR,_.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(_.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,_.iridescenceMapTransform)),S.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),S.transmission>0&&(_.transmission.value=S.transmission,_.transmissionSamplerMap.value=j.texture,_.transmissionSamplerSize.value.set(j.width,j.height),S.transmissionMap&&(_.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,_.transmissionMapTransform)),_.thickness.value=S.thickness,S.thicknessMap&&(_.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=S.attenuationDistance,_.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(_.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(_.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=S.specularIntensity,_.specularColor.value.copy(S.specularColor),S.specularColorMap&&(_.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,_.specularColorMapTransform)),S.specularIntensityMap&&(_.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,S){S.matcap&&(_.matcap.value=S.matcap)}function M(_,S){const j=e.get(S).light;_.referencePosition.value.setFromMatrixPosition(j.matrixWorld),_.nearDistance.value=j.shadow.camera.near,_.farDistance.value=j.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function Pq(i,e,t,n){let a={},r={},o=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(j,A){const C=A.program;n.uniformBlockBinding(j,C)}function d(j,A){let C=a[j.id];C===void 0&&(v(j),C=f(j),a[j.id]=C,j.addEventListener("dispose",_));const N=A.program;n.updateUBOMapping(j,N);const R=e.render.frame;r[j.id]!==R&&(x(j),r[j.id]=R)}function f(j){const A=m();j.__bindingPointIndex=A;const C=i.createBuffer(),N=j.__size,R=j.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,N,R),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,A,C),C}function m(){for(let j=0;j<l;j++)if(o.indexOf(j)===-1)return o.push(j),j;return wn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(j){const A=a[j.id],C=j.uniforms,N=j.__cache;i.bindBuffer(i.UNIFORM_BUFFER,A);for(let R=0,O=C.length;R<O;R++){const U=Array.isArray(C[R])?C[R]:[C[R]];for(let z=0,I=U.length;z<I;z++){const V=U[z];if(g(V,R,z,N)===!0){const F=V.__offset,q=Array.isArray(V.value)?V.value:[V.value];let W=0;for(let ie=0;ie<q.length;ie++){const B=q[ie],J=M(B);typeof B=="number"||typeof B=="boolean"?(V.__data[0]=B,i.bufferSubData(i.UNIFORM_BUFFER,F+W,V.__data)):B.isMatrix3?(V.__data[0]=B.elements[0],V.__data[1]=B.elements[1],V.__data[2]=B.elements[2],V.__data[3]=0,V.__data[4]=B.elements[3],V.__data[5]=B.elements[4],V.__data[6]=B.elements[5],V.__data[7]=0,V.__data[8]=B.elements[6],V.__data[9]=B.elements[7],V.__data[10]=B.elements[8],V.__data[11]=0):(B.toArray(V.__data,W),W+=J.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,F,V.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function g(j,A,C,N){const R=j.value,O=A+"_"+C;if(N[O]===void 0)return typeof R=="number"||typeof R=="boolean"?N[O]=R:N[O]=R.clone(),!0;{const U=N[O];if(typeof R=="number"||typeof R=="boolean"){if(U!==R)return N[O]=R,!0}else if(U.equals(R)===!1)return U.copy(R),!0}return!1}function v(j){const A=j.uniforms;let C=0;const N=16;for(let O=0,U=A.length;O<U;O++){const z=Array.isArray(A[O])?A[O]:[A[O]];for(let I=0,V=z.length;I<V;I++){const F=z[I],q=Array.isArray(F.value)?F.value:[F.value];for(let W=0,ie=q.length;W<ie;W++){const B=q[W],J=M(B),$=C%N,le=$%J.boundary,re=$+le;C+=le,re!==0&&N-re<J.storage&&(C+=N-re),F.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=C,C+=J.storage}}}const R=C%N;return R>0&&(C+=N-R),j.__size=C,j.__cache={},this}function M(j){const A={boundary:0,storage:0};return typeof j=="number"||typeof j=="boolean"?(A.boundary=4,A.storage=4):j.isVector2?(A.boundary=8,A.storage=8):j.isVector3||j.isColor?(A.boundary=16,A.storage=12):j.isVector4?(A.boundary=16,A.storage=16):j.isMatrix3?(A.boundary=48,A.storage=48):j.isMatrix4?(A.boundary=64,A.storage=64):j.isTexture?qt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):qt("WebGLRenderer: Unsupported uniform value type.",j),A}function _(j){const A=j.target;A.removeEventListener("dispose",_);const C=o.indexOf(A.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(a[A.id]),delete a[A.id],delete r[A.id]}function S(){for(const j in a)i.deleteBuffer(a[j]);o=[],a={},r={}}return{bind:u,update:d,dispose:S}}const Oq=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let Qc=null;function zq(){return Qc===null&&(Qc=new Lo(Oq,32,32,nb,Ti),Qc.minFilter=ss,Qc.magFilter=ss,Qc.wrapS=bi,Qc.wrapT=bi,Qc.generateMipmaps=!1,Qc.needsUpdate=!0),Qc}class T3{constructor(e={}){const{canvas:t=JC(),context:n=null,depth:a=!0,stencil:r=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:m=!1,reversedDepthBuffer:x=!1}=e;this.isWebGLRenderer=!0;let g;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=n.getContextAttributes().alpha}else g=o;const v=new Set([ib,sb,Yx]),M=new Set([gr,lc,R0,D0,eb,tb]),_=new Uint32Array(4),S=new Int32Array(4);let j=null,A=null;const C=[],N=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ac,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const R=this;let O=!1;this._outputColorSpace=Sa;let U=0,z=0,I=null,V=-1,F=null;const q=new ns,W=new ns;let ie=null;const B=new Lt(0);let J=0,$=t.width,le=t.height,re=1,H=null,ee=null;const ue=new ns(0,0,$,le),me=new ns(0,0,$,le);let be=!1;const fe=new J0;let ge=!1,je=!1;const Qe=new mn,st=new Q,Ve=new ns,nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let St=!1;function ze(){return I===null?re:1}let ae=n;function Fe(K,xe){return t.getContext(K,xe)}try{const K={alpha:!0,depth:a,stencil:r,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Z0}`),t.addEventListener("webglcontextlost",ot,!1),t.addEventListener("webglcontextrestored",qe,!1),t.addEventListener("webglcontextcreationerror",Tt,!1),ae===null){const xe="webgl2";if(ae=Fe(xe,K),ae===null)throw Fe(xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw K("WebGLRenderer: "+K.message),K}let We,Pe,Ge,$e,Ee,ct,te,Y,ve,Be,Re,Ae,yt,gt,Dt,Nt,ke,Ie,ft,he,Ce,ut,pe,we;function lt(){We=new WV(ae),We.init(),ut=new tR(ae,We),Pe=new GV(ae,We,e,ut),Ge=new Tq(ae,We),Pe.reversedDepthBuffer&&x&&Ge.buffers.depth.setReversed(!0),$e=new KV(ae),Ee=new mq,ct=new Aq(ae,We,Ge,Ee,Pe,ut,$e),te=new kV(R),Y=new XV(R),ve=new eF(ae),pe=new OV(ae,ve),Be=new YV(ae,ve,$e,pe),Re=new QV(ae,Be,ve,$e),ft=new JV(ae,Pe,ct),Nt=new IV(Ee),Ae=new hq(R,te,Y,We,Pe,pe,Nt),yt=new Uq(R,Ee),gt=new xq,Dt=new Sq(We),Ie=new PV(R,te,Y,Ge,Re,g,u),ke=new jq(R,Re,Pe),we=new Pq(ae,$e,Pe,Ge),he=new zV(ae,We,$e),Ce=new ZV(ae,We,$e),$e.programs=Ae.programs,R.capabilities=Pe,R.extensions=We,R.properties=Ee,R.renderLists=gt,R.shadowMap=ke,R.state=Ge,R.info=$e}lt();const jt=new Dq(R,ae);this.xr=jt,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const K=We.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=We.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(K){K!==void 0&&(re=K,this.setSize($,le,!1))},this.getSize=function(K){return K.set($,le)},this.setSize=function(K,xe,de=!0){if(jt.isPresenting){qt("WebGLRenderer: Can't change size while VR device is presenting.");return}$=K,le=xe,t.width=Math.floor(K*re),t.height=Math.floor(xe*re),de===!0&&(t.style.width=K+"px",t.style.height=xe+"px"),this.setViewport(0,0,K,xe)},this.getDrawingBufferSize=function(K){return K.set($*re,le*re).floor()},this.setDrawingBufferSize=function(K,xe,de){$=K,le=xe,re=de,t.width=Math.floor(K*de),t.height=Math.floor(xe*de),this.setViewport(0,0,K,xe)},this.getCurrentViewport=function(K){return K.copy(q)},this.getViewport=function(K){return K.copy(ue)},this.setViewport=function(K,xe,de,Ne){K.isVector4?ue.set(K.x,K.y,K.z,K.w):ue.set(K,xe,de,Ne),Ge.viewport(q.copy(ue).multiplyScalar(re).round())},this.getScissor=function(K){return K.copy(me)},this.setScissor=function(K,xe,de,Ne){K.isVector4?me.set(K.x,K.y,K.z,K.w):me.set(K,xe,de,Ne),Ge.scissor(W.copy(me).multiplyScalar(re).round())},this.getScissorTest=function(){return be},this.setScissorTest=function(K){Ge.setScissorTest(be=K)},this.setOpaqueSort=function(K){H=K},this.setTransparentSort=function(K){ee=K},this.getClearColor=function(K){return K.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor(...arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha(...arguments)},this.clear=function(K=!0,xe=!0,de=!0){let Ne=0;if(K){let ye=!1;if(I!==null){const Ke=I.texture.format;ye=v.has(Ke)}if(ye){const Ke=I.texture.type,dt=M.has(Ke),Mt=Ie.getClearColor(),At=Ie.getClearAlpha(),Gt=Mt.r,kt=Mt.g,Bt=Mt.b;dt?(_[0]=Gt,_[1]=kt,_[2]=Bt,_[3]=At,ae.clearBufferuiv(ae.COLOR,0,_)):(S[0]=Gt,S[1]=kt,S[2]=Bt,S[3]=At,ae.clearBufferiv(ae.COLOR,0,S))}else Ne|=ae.COLOR_BUFFER_BIT}xe&&(Ne|=ae.DEPTH_BUFFER_BIT),de&&(Ne|=ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ae.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ot,!1),t.removeEventListener("webglcontextrestored",qe,!1),t.removeEventListener("webglcontextcreationerror",Tt,!1),Ie.dispose(),gt.dispose(),Dt.dispose(),Ee.dispose(),te.dispose(),Y.dispose(),Re.dispose(),pe.dispose(),we.dispose(),Ae.dispose(),jt.dispose(),jt.removeEventListener("sessionstart",ni),jt.removeEventListener("sessionend",si),cs.stop()};function ot(K){K.preventDefault(),Cx("WebGLRenderer: Context Lost."),O=!0}function qe(){Cx("WebGLRenderer: Context Restored."),O=!1;const K=$e.autoReset,xe=ke.enabled,de=ke.autoUpdate,Ne=ke.needsUpdate,ye=ke.type;lt(),$e.autoReset=K,ke.enabled=xe,ke.autoUpdate=de,ke.needsUpdate=Ne,ke.type=ye}function Tt(K){wn("WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function zt(K){const xe=K.target;xe.removeEventListener("dispose",zt),It(xe)}function It(K){Zt(K),Ee.remove(K)}function Zt(K){const xe=Ee.get(K).programs;xe!==void 0&&(xe.forEach(function(de){Ae.releaseProgram(de)}),K.isShaderMaterial&&Ae.releaseShaderCache(K))}this.renderBufferDirect=function(K,xe,de,Ne,ye,Ke){xe===null&&(xe=nt);const dt=ye.isMesh&&ye.matrixWorld.determinant()<0,Mt=Ye(K,xe,de,Ne,ye);Ge.setMaterial(Ne,dt);let At=de.index,Gt=1;if(Ne.wireframe===!0){if(At=Be.getWireframeAttribute(de),At===void 0)return;Gt=2}const kt=de.drawRange,Bt=de.attributes.position;let Ft=kt.start*Gt,xn=(kt.start+kt.count)*Gt;Ke!==null&&(Ft=Math.max(Ft,Ke.start*Gt),xn=Math.min(xn,(Ke.start+Ke.count)*Gt)),At!==null?(Ft=Math.max(Ft,0),xn=Math.min(xn,At.count)):Bt!=null&&(Ft=Math.max(Ft,0),xn=Math.min(xn,Bt.count));const Qt=xn-Ft;if(Qt<0||Qt===1/0)return;pe.setup(ye,Ne,Mt,de,At);let rn,Mn=he;if(At!==null&&(rn=ve.get(At),Mn=Ce,Mn.setIndex(rn)),ye.isMesh)Ne.wireframe===!0?(Ge.setLineWidth(Ne.wireframeLinewidth*ze()),Mn.setMode(ae.LINES)):Mn.setMode(ae.TRIANGLES);else if(ye.isLine){let $t=Ne.linewidth;$t===void 0&&($t=1),Ge.setLineWidth($t*ze()),ye.isLineSegments?Mn.setMode(ae.LINES):ye.isLineLoop?Mn.setMode(ae.LINE_LOOP):Mn.setMode(ae.LINE_STRIP)}else ye.isPoints?Mn.setMode(ae.POINTS):ye.isSprite&&Mn.setMode(ae.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)O0("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Mn.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(We.get("WEBGL_multi_draw"))Mn.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const $t=ye._multiDrawStarts,gn=ye._multiDrawCounts,Kt=ye._multiDrawCount,Cn=At?ve.get(At).bytesPerElement:1,kn=Ee.get(Ne).currentProgram.getUniforms();for(let Jt=0;Jt<Kt;Jt++)kn.setValue(ae,"_gl_DrawID",Jt),Mn.render($t[Jt]/Cn,gn[Jt])}else if(ye.isInstancedMesh)Mn.renderInstances(Ft,Qt,ye.count);else if(de.isInstancedBufferGeometry){const $t=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,gn=Math.min(de.instanceCount,$t);Mn.renderInstances(Ft,Qt,gn)}else Mn.render(Ft,Qt)};function An(K,xe,de){K.transparent===!0&&K.side===Ms&&K.forceSinglePass===!1?(K.side=la,K.needsUpdate=!0,Z(K,xe,de),K.side=au,K.needsUpdate=!0,Z(K,xe,de),K.side=Ms):Z(K,xe,de)}this.compile=function(K,xe,de=null){de===null&&(de=K),A=Dt.get(de),A.init(xe),N.push(A),de.traverseVisible(function(ye){ye.isLight&&ye.layers.test(xe.layers)&&(A.pushLight(ye),ye.castShadow&&A.pushShadow(ye))}),K!==de&&K.traverseVisible(function(ye){ye.isLight&&ye.layers.test(xe.layers)&&(A.pushLight(ye),ye.castShadow&&A.pushShadow(ye))}),A.setupLights();const Ne=new Set;return K.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const Ke=ye.material;if(Ke)if(Array.isArray(Ke))for(let dt=0;dt<Ke.length;dt++){const Mt=Ke[dt];An(Mt,de,ye),Ne.add(Mt)}else An(Ke,de,ye),Ne.add(Ke)}),A=N.pop(),Ne},this.compileAsync=function(K,xe,de=null){const Ne=this.compile(K,xe,de);return new Promise(ye=>{function Ke(){if(Ne.forEach(function(dt){Ee.get(dt).currentProgram.isReady()&&Ne.delete(dt)}),Ne.size===0){ye(K);return}setTimeout(Ke,10)}We.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let In=null;function Ss(K){In&&In(K)}function ni(){cs.stop()}function si(){cs.start()}const cs=new KN;cs.setAnimationLoop(Ss),typeof self<"u"&&cs.setContext(self),this.setAnimationLoop=function(K){In=K,jt.setAnimationLoop(K),K===null?cs.stop():cs.start()},jt.addEventListener("sessionstart",ni),jt.addEventListener("sessionend",si),this.render=function(K,xe){if(xe!==void 0&&xe.isCamera!==!0){wn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;if(K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),xe.parent===null&&xe.matrixWorldAutoUpdate===!0&&xe.updateMatrixWorld(),jt.enabled===!0&&jt.isPresenting===!0&&(jt.cameraAutoUpdate===!0&&jt.updateCamera(xe),xe=jt.getCamera()),K.isScene===!0&&K.onBeforeRender(R,K,xe,I),A=Dt.get(K,N.length),A.init(xe),N.push(A),Qe.multiplyMatrices(xe.projectionMatrix,xe.matrixWorldInverse),fe.setFromProjectionMatrix(Qe,to,xe.reversedDepth),je=this.localClippingEnabled,ge=Nt.init(this.clippingPlanes,je),j=gt.get(K,C.length),j.init(),C.push(j),jt.enabled===!0&&jt.isPresenting===!0){const Ke=R.xr.getDepthSensingMesh();Ke!==null&&Fs(Ke,xe,-1/0,R.sortObjects)}Fs(K,xe,0,R.sortObjects),j.finish(),R.sortObjects===!0&&j.sort(H,ee),St=jt.enabled===!1||jt.isPresenting===!1||jt.hasDepthSensing()===!1,St&&Ie.addToRenderList(j,K),this.info.render.frame++,ge===!0&&Nt.beginShadows();const de=A.state.shadowsArray;ke.render(de,K,xe),ge===!0&&Nt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ne=j.opaque,ye=j.transmissive;if(A.setupLights(),xe.isArrayCamera){const Ke=xe.cameras;if(ye.length>0)for(let dt=0,Mt=Ke.length;dt<Mt;dt++){const At=Ke[dt];sn(Ne,ye,K,At)}St&&Ie.render(K);for(let dt=0,Mt=Ke.length;dt<Mt;dt++){const At=Ke[dt];Ts(j,K,At,At.viewport)}}else ye.length>0&&sn(Ne,ye,K,xe),St&&Ie.render(K),Ts(j,K,xe);I!==null&&z===0&&(ct.updateMultisampleRenderTarget(I),ct.updateRenderTargetMipmap(I)),K.isScene===!0&&K.onAfterRender(R,K,xe),pe.resetDefaultState(),V=-1,F=null,N.pop(),N.length>0?(A=N[N.length-1],ge===!0&&Nt.setGlobalState(R.clippingPlanes,A.state.camera)):A=null,C.pop(),C.length>0?j=C[C.length-1]:j=null};function Fs(K,xe,de,Ne){if(K.visible===!1)return;if(K.layers.test(xe.layers)){if(K.isGroup)de=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(xe);else if(K.isLight)A.pushLight(K),K.castShadow&&A.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||fe.intersectsSprite(K)){Ne&&Ve.setFromMatrixPosition(K.matrixWorld).applyMatrix4(Qe);const dt=Re.update(K),Mt=K.material;Mt.visible&&j.push(K,dt,Mt,de,Ve.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||fe.intersectsObject(K))){const dt=Re.update(K),Mt=K.material;if(Ne&&(K.boundingSphere!==void 0?(K.boundingSphere===null&&K.computeBoundingSphere(),Ve.copy(K.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),Ve.copy(dt.boundingSphere.center)),Ve.applyMatrix4(K.matrixWorld).applyMatrix4(Qe)),Array.isArray(Mt)){const At=dt.groups;for(let Gt=0,kt=At.length;Gt<kt;Gt++){const Bt=At[Gt],Ft=Mt[Bt.materialIndex];Ft&&Ft.visible&&j.push(K,dt,Ft,de,Ve.z,Bt)}}else Mt.visible&&j.push(K,dt,Mt,de,Ve.z,null)}}const Ke=K.children;for(let dt=0,Mt=Ke.length;dt<Mt;dt++)Fs(Ke[dt],xe,de,Ne)}function Ts(K,xe,de,Ne){const{opaque:ye,transmissive:Ke,transparent:dt}=K;A.setupLightsView(de),ge===!0&&Nt.setGlobalState(R.clippingPlanes,de),Ne&&Ge.viewport(q.copy(Ne)),ye.length>0&&Hn(ye,xe,de),Ke.length>0&&Hn(Ke,xe,de),dt.length>0&&Hn(dt,xe,de),Ge.buffers.depth.setTest(!0),Ge.buffers.depth.setMask(!0),Ge.buffers.color.setMask(!0),Ge.setPolygonOffset(!1)}function sn(K,xe,de,Ne){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[Ne.id]===void 0&&(A.state.transmissionRenderTarget[Ne.id]=new Ea(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")||We.has("EXT_color_buffer_float")?Ti:gr,minFilter:tc,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ts.workingColorSpace}));const Ke=A.state.transmissionRenderTarget[Ne.id],dt=Ne.viewport||q;Ke.setSize(dt.z*R.transmissionResolutionScale,dt.w*R.transmissionResolutionScale);const Mt=R.getRenderTarget(),At=R.getActiveCubeFace(),Gt=R.getActiveMipmapLevel();R.setRenderTarget(Ke),R.getClearColor(B),J=R.getClearAlpha(),J<1&&R.setClearColor(16777215,.5),R.clear(),St&&Ie.render(de);const kt=R.toneMapping;R.toneMapping=ac;const Bt=Ne.viewport;if(Ne.viewport!==void 0&&(Ne.viewport=void 0),A.setupLightsView(Ne),ge===!0&&Nt.setGlobalState(R.clippingPlanes,Ne),Hn(K,de,Ne),ct.updateMultisampleRenderTarget(Ke),ct.updateRenderTargetMipmap(Ke),We.has("WEBGL_multisampled_render_to_texture")===!1){let Ft=!1;for(let xn=0,Qt=xe.length;xn<Qt;xn++){const rn=xe[xn],{object:Mn,geometry:$t,material:gn,group:Kt}=rn;if(gn.side===Ms&&Mn.layers.test(Ne.layers)){const Cn=gn.side;gn.side=la,gn.needsUpdate=!0,fn(Mn,de,Ne,$t,gn,Kt),gn.side=Cn,gn.needsUpdate=!0,Ft=!0}}Ft===!0&&(ct.updateMultisampleRenderTarget(Ke),ct.updateRenderTargetMipmap(Ke))}R.setRenderTarget(Mt,At,Gt),R.setClearColor(B,J),Bt!==void 0&&(Ne.viewport=Bt),R.toneMapping=kt}function Hn(K,xe,de){const Ne=xe.isScene===!0?xe.overrideMaterial:null;for(let ye=0,Ke=K.length;ye<Ke;ye++){const dt=K[ye],{object:Mt,geometry:At,group:Gt}=dt;let kt=dt.material;kt.allowOverride===!0&&Ne!==null&&(kt=Ne),Mt.layers.test(de.layers)&&fn(Mt,xe,de,At,kt,Gt)}}function fn(K,xe,de,Ne,ye,Ke){K.onBeforeRender(R,xe,de,Ne,ye,Ke),K.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),ye.onBeforeRender(R,xe,de,Ne,K,Ke),ye.transparent===!0&&ye.side===Ms&&ye.forceSinglePass===!1?(ye.side=la,ye.needsUpdate=!0,R.renderBufferDirect(de,xe,Ne,ye,K,Ke),ye.side=au,ye.needsUpdate=!0,R.renderBufferDirect(de,xe,Ne,ye,K,Ke),ye.side=Ms):R.renderBufferDirect(de,xe,Ne,ye,K,Ke),K.onAfterRender(R,xe,de,Ne,ye,Ke)}function Z(K,xe,de){xe.isScene!==!0&&(xe=nt);const Ne=Ee.get(K),ye=A.state.lights,Ke=A.state.shadowsArray,dt=ye.state.version,Mt=Ae.getParameters(K,ye.state,Ke,xe,de),At=Ae.getProgramCacheKey(Mt);let Gt=Ne.programs;Ne.environment=K.isMeshStandardMaterial?xe.environment:null,Ne.fog=xe.fog,Ne.envMap=(K.isMeshStandardMaterial?Y:te).get(K.envMap||Ne.environment),Ne.envMapRotation=Ne.environment!==null&&K.envMap===null?xe.environmentRotation:K.envMapRotation,Gt===void 0&&(K.addEventListener("dispose",zt),Gt=new Map,Ne.programs=Gt);let kt=Gt.get(At);if(kt!==void 0){if(Ne.currentProgram===kt&&Ne.lightsStateVersion===dt)return _e(K,Mt),kt}else Mt.uniforms=Ae.getUniforms(K),K.onBeforeCompile(Mt,R),kt=Ae.acquireProgram(Mt,At),Gt.set(At,kt),Ne.uniforms=Mt.uniforms;const Bt=Ne.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&(Bt.clippingPlanes=Nt.uniform),_e(K,Mt),Ne.needsLights=it(K),Ne.lightsStateVersion=dt,Ne.needsLights&&(Bt.ambientLightColor.value=ye.state.ambient,Bt.lightProbe.value=ye.state.probe,Bt.directionalLights.value=ye.state.directional,Bt.directionalLightShadows.value=ye.state.directionalShadow,Bt.spotLights.value=ye.state.spot,Bt.spotLightShadows.value=ye.state.spotShadow,Bt.rectAreaLights.value=ye.state.rectArea,Bt.ltc_1.value=ye.state.rectAreaLTC1,Bt.ltc_2.value=ye.state.rectAreaLTC2,Bt.pointLights.value=ye.state.point,Bt.pointLightShadows.value=ye.state.pointShadow,Bt.hemisphereLights.value=ye.state.hemi,Bt.directionalShadowMap.value=ye.state.directionalShadowMap,Bt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Bt.spotShadowMap.value=ye.state.spotShadowMap,Bt.spotLightMatrix.value=ye.state.spotLightMatrix,Bt.spotLightMap.value=ye.state.spotLightMap,Bt.pointShadowMap.value=ye.state.pointShadowMap,Bt.pointShadowMatrix.value=ye.state.pointShadowMatrix),Ne.currentProgram=kt,Ne.uniformsList=null,kt}function ce(K){if(K.uniformsList===null){const xe=K.currentProgram.getUniforms();K.uniformsList=zv.seqWithValue(xe.seq,K.uniforms)}return K.uniformsList}function _e(K,xe){const de=Ee.get(K);de.outputColorSpace=xe.outputColorSpace,de.batching=xe.batching,de.batchingColor=xe.batchingColor,de.instancing=xe.instancing,de.instancingColor=xe.instancingColor,de.instancingMorph=xe.instancingMorph,de.skinning=xe.skinning,de.morphTargets=xe.morphTargets,de.morphNormals=xe.morphNormals,de.morphColors=xe.morphColors,de.morphTargetsCount=xe.morphTargetsCount,de.numClippingPlanes=xe.numClippingPlanes,de.numIntersection=xe.numClipIntersection,de.vertexAlphas=xe.vertexAlphas,de.vertexTangents=xe.vertexTangents,de.toneMapping=xe.toneMapping}function Ye(K,xe,de,Ne,ye){xe.isScene!==!0&&(xe=nt),ct.resetTextureUnits();const Ke=xe.fog,dt=Ne.isMeshStandardMaterial?xe.environment:null,Mt=I===null?R.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:gl,At=(Ne.isMeshStandardMaterial?Y:te).get(Ne.envMap||dt),Gt=Ne.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,kt=!!de.attributes.tangent&&(!!Ne.normalMap||Ne.anisotropy>0),Bt=!!de.morphAttributes.position,Ft=!!de.morphAttributes.normal,xn=!!de.morphAttributes.color;let Qt=ac;Ne.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Qt=R.toneMapping);const rn=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Mn=rn!==void 0?rn.length:0,$t=Ee.get(Ne),gn=A.state.lights;if(ge===!0&&(je===!0||K!==F)){const Is=K===F&&Ne.id===V;Nt.setState(Ne,K,Is)}let Kt=!1;Ne.version===$t.__version?($t.needsLights&&$t.lightsStateVersion!==gn.state.version||$t.outputColorSpace!==Mt||ye.isBatchedMesh&&$t.batching===!1||!ye.isBatchedMesh&&$t.batching===!0||ye.isBatchedMesh&&$t.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&$t.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&$t.instancing===!1||!ye.isInstancedMesh&&$t.instancing===!0||ye.isSkinnedMesh&&$t.skinning===!1||!ye.isSkinnedMesh&&$t.skinning===!0||ye.isInstancedMesh&&$t.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&$t.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&$t.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&$t.instancingMorph===!1&&ye.morphTexture!==null||$t.envMap!==At||Ne.fog===!0&&$t.fog!==Ke||$t.numClippingPlanes!==void 0&&($t.numClippingPlanes!==Nt.numPlanes||$t.numIntersection!==Nt.numIntersection)||$t.vertexAlphas!==Gt||$t.vertexTangents!==kt||$t.morphTargets!==Bt||$t.morphNormals!==Ft||$t.morphColors!==xn||$t.toneMapping!==Qt||$t.morphTargetsCount!==Mn)&&(Kt=!0):(Kt=!0,$t.__version=Ne.version);let Cn=$t.currentProgram;Kt===!0&&(Cn=Z(Ne,xe,ye));let kn=!1,Jt=!1,Ls=!1;const Ln=Cn.getUniforms(),On=$t.uniforms;if(Ge.useProgram(Cn.program)&&(kn=!0,Jt=!0,Ls=!0),Ne.id!==V&&(V=Ne.id,Jt=!0),kn||F!==K){Ge.buffers.depth.getReversed()&&K.reversedDepth!==!0&&(K._reversedDepth=!0,K.updateProjectionMatrix()),Ln.setValue(ae,"projectionMatrix",K.projectionMatrix),Ln.setValue(ae,"viewMatrix",K.matrixWorldInverse);const _s=Ln.map.cameraPosition;_s!==void 0&&_s.setValue(ae,st.setFromMatrixPosition(K.matrixWorld)),Pe.logarithmicDepthBuffer&&Ln.setValue(ae,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&Ln.setValue(ae,"isOrthographic",K.isOrthographicCamera===!0),F!==K&&(F=K,Jt=!0,Ls=!0)}if(ye.isSkinnedMesh){Ln.setOptional(ae,ye,"bindMatrix"),Ln.setOptional(ae,ye,"bindMatrixInverse");const Is=ye.skeleton;Is&&(Is.boneTexture===null&&Is.computeBoneTexture(),Ln.setValue(ae,"boneTexture",Is.boneTexture,ct))}ye.isBatchedMesh&&(Ln.setOptional(ae,ye,"batchingTexture"),Ln.setValue(ae,"batchingTexture",ye._matricesTexture,ct),Ln.setOptional(ae,ye,"batchingIdTexture"),Ln.setValue(ae,"batchingIdTexture",ye._indirectTexture,ct),Ln.setOptional(ae,ye,"batchingColorTexture"),ye._colorsTexture!==null&&Ln.setValue(ae,"batchingColorTexture",ye._colorsTexture,ct));const as=de.morphAttributes;if((as.position!==void 0||as.normal!==void 0||as.color!==void 0)&&ft.update(ye,de,Cn),(Jt||$t.receiveShadow!==ye.receiveShadow)&&($t.receiveShadow=ye.receiveShadow,Ln.setValue(ae,"receiveShadow",ye.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(On.envMap.value=At,On.flipEnvMap.value=At.isCubeTexture&&At.isRenderTargetTexture===!1?-1:1),Ne.isMeshStandardMaterial&&Ne.envMap===null&&xe.environment!==null&&(On.envMapIntensity.value=xe.environmentIntensity),On.dfgLUT!==void 0&&(On.dfgLUT.value=zq()),Jt&&(Ln.setValue(ae,"toneMappingExposure",R.toneMappingExposure),$t.needsLights&&at(On,Ls),Ke&&Ne.fog===!0&&yt.refreshFogUniforms(On,Ke),yt.refreshMaterialUniforms(On,Ne,re,le,A.state.transmissionRenderTarget[K.id]),zv.upload(ae,ce($t),On,ct)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(zv.upload(ae,ce($t),On,ct),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&Ln.setValue(ae,"center",ye.center),Ln.setValue(ae,"modelViewMatrix",ye.modelViewMatrix),Ln.setValue(ae,"normalMatrix",ye.normalMatrix),Ln.setValue(ae,"modelMatrix",ye.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const Is=Ne.uniformsGroups;for(let _s=0,ca=Is.length;_s<ca;_s++){const ua=Is[_s];we.update(ua,Cn),we.bind(ua,Cn)}}return Cn}function at(K,xe){K.ambientLightColor.needsUpdate=xe,K.lightProbe.needsUpdate=xe,K.directionalLights.needsUpdate=xe,K.directionalLightShadows.needsUpdate=xe,K.pointLights.needsUpdate=xe,K.pointLightShadows.needsUpdate=xe,K.spotLights.needsUpdate=xe,K.spotLightShadows.needsUpdate=xe,K.rectAreaLights.needsUpdate=xe,K.hemisphereLights.needsUpdate=xe}function it(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(K,xe,de){const Ne=Ee.get(K);Ne.__autoAllocateDepthBuffer=K.resolveDepthBuffer===!1,Ne.__autoAllocateDepthBuffer===!1&&(Ne.__useRenderToTexture=!1),Ee.get(K.texture).__webglTexture=xe,Ee.get(K.depthTexture).__webglTexture=Ne.__autoAllocateDepthBuffer?void 0:de,Ne.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(K,xe){const de=Ee.get(K);de.__webglFramebuffer=xe,de.__useDefaultFramebuffer=xe===void 0};const Ct=ae.createFramebuffer();this.setRenderTarget=function(K,xe=0,de=0){I=K,U=xe,z=de;let Ne=!0,ye=null,Ke=!1,dt=!1;if(K){const At=Ee.get(K);if(At.__useDefaultFramebuffer!==void 0)Ge.bindFramebuffer(ae.FRAMEBUFFER,null),Ne=!1;else if(At.__webglFramebuffer===void 0)ct.setupRenderTarget(K);else if(At.__hasExternalTextures)ct.rebindTextures(K,Ee.get(K.texture).__webglTexture,Ee.get(K.depthTexture).__webglTexture);else if(K.depthBuffer){const Bt=K.depthTexture;if(At.__boundDepthTexture!==Bt){if(Bt!==null&&Ee.has(Bt)&&(K.width!==Bt.image.width||K.height!==Bt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ct.setupDepthRenderbuffer(K)}}const Gt=K.texture;(Gt.isData3DTexture||Gt.isDataArrayTexture||Gt.isCompressedArrayTexture)&&(dt=!0);const kt=Ee.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Array.isArray(kt[xe])?ye=kt[xe][de]:ye=kt[xe],Ke=!0):K.samples>0&&ct.useMultisampledRTT(K)===!1?ye=Ee.get(K).__webglMultisampledFramebuffer:Array.isArray(kt)?ye=kt[de]:ye=kt,q.copy(K.viewport),W.copy(K.scissor),ie=K.scissorTest}else q.copy(ue).multiplyScalar(re).floor(),W.copy(me).multiplyScalar(re).floor(),ie=be;if(de!==0&&(ye=Ct),Ge.bindFramebuffer(ae.FRAMEBUFFER,ye)&&Ne&&Ge.drawBuffers(K,ye),Ge.viewport(q),Ge.scissor(W),Ge.setScissorTest(ie),Ke){const At=Ee.get(K.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_CUBE_MAP_POSITIVE_X+xe,At.__webglTexture,de)}else if(dt){const At=xe;for(let Gt=0;Gt<K.textures.length;Gt++){const kt=Ee.get(K.textures[Gt]);ae.framebufferTextureLayer(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0+Gt,kt.__webglTexture,de,At)}}else if(K!==null&&de!==0){const At=Ee.get(K.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,At.__webglTexture,de)}V=-1},this.readRenderTargetPixels=function(K,xe,de,Ne,ye,Ke,dt,Mt=0){if(!(K&&K.isWebGLRenderTarget)){wn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let At=Ee.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&dt!==void 0&&(At=At[dt]),At){Ge.bindFramebuffer(ae.FRAMEBUFFER,At);try{const Gt=K.textures[Mt],kt=Gt.format,Bt=Gt.type;if(!Pe.textureFormatReadable(kt)){wn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(Bt)){wn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}xe>=0&&xe<=K.width-Ne&&de>=0&&de<=K.height-ye&&(K.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Mt),ae.readPixels(xe,de,Ne,ye,ut.convert(kt),ut.convert(Bt),Ke))}finally{const Gt=I!==null?Ee.get(I).__webglFramebuffer:null;Ge.bindFramebuffer(ae.FRAMEBUFFER,Gt)}}},this.readRenderTargetPixelsAsync=async function(K,xe,de,Ne,ye,Ke,dt,Mt=0){if(!(K&&K.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let At=Ee.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&dt!==void 0&&(At=At[dt]),At)if(xe>=0&&xe<=K.width-Ne&&de>=0&&de<=K.height-ye){Ge.bindFramebuffer(ae.FRAMEBUFFER,At);const Gt=K.textures[Mt],kt=Gt.format,Bt=Gt.type;if(!Pe.textureFormatReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ft=ae.createBuffer();ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Ft),ae.bufferData(ae.PIXEL_PACK_BUFFER,Ke.byteLength,ae.STREAM_READ),K.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Mt),ae.readPixels(xe,de,Ne,ye,ut.convert(kt),ut.convert(Bt),0);const xn=I!==null?Ee.get(I).__webglFramebuffer:null;Ge.bindFramebuffer(ae.FRAMEBUFFER,xn);const Qt=ae.fenceSync(ae.SYNC_GPU_COMMANDS_COMPLETE,0);return ae.flush(),await rk(ae,Qt,4),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Ft),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,Ke),ae.deleteBuffer(Ft),ae.deleteSync(Qt),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(K,xe=null,de=0){const Ne=Math.pow(2,-de),ye=Math.floor(K.image.width*Ne),Ke=Math.floor(K.image.height*Ne),dt=xe!==null?xe.x:0,Mt=xe!==null?xe.y:0;ct.setTexture2D(K,0),ae.copyTexSubImage2D(ae.TEXTURE_2D,de,0,0,dt,Mt,ye,Ke),Ge.unbindTexture()};const wt=ae.createFramebuffer(),_t=ae.createFramebuffer();this.copyTextureToTexture=function(K,xe,de=null,Ne=null,ye=0,Ke=null){Ke===null&&(ye!==0?(O0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=ye,ye=0):Ke=0);let dt,Mt,At,Gt,kt,Bt,Ft,xn,Qt;const rn=K.isCompressedTexture?K.mipmaps[Ke]:K.image;if(de!==null)dt=de.max.x-de.min.x,Mt=de.max.y-de.min.y,At=de.isBox3?de.max.z-de.min.z:1,Gt=de.min.x,kt=de.min.y,Bt=de.isBox3?de.min.z:0;else{const as=Math.pow(2,-ye);dt=Math.floor(rn.width*as),Mt=Math.floor(rn.height*as),K.isDataArrayTexture?At=rn.depth:K.isData3DTexture?At=Math.floor(rn.depth*as):At=1,Gt=0,kt=0,Bt=0}Ne!==null?(Ft=Ne.x,xn=Ne.y,Qt=Ne.z):(Ft=0,xn=0,Qt=0);const Mn=ut.convert(xe.format),$t=ut.convert(xe.type);let gn;xe.isData3DTexture?(ct.setTexture3D(xe,0),gn=ae.TEXTURE_3D):xe.isDataArrayTexture||xe.isCompressedArrayTexture?(ct.setTexture2DArray(xe,0),gn=ae.TEXTURE_2D_ARRAY):(ct.setTexture2D(xe,0),gn=ae.TEXTURE_2D),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,xe.flipY),ae.pixelStorei(ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),ae.pixelStorei(ae.UNPACK_ALIGNMENT,xe.unpackAlignment);const Kt=ae.getParameter(ae.UNPACK_ROW_LENGTH),Cn=ae.getParameter(ae.UNPACK_IMAGE_HEIGHT),kn=ae.getParameter(ae.UNPACK_SKIP_PIXELS),Jt=ae.getParameter(ae.UNPACK_SKIP_ROWS),Ls=ae.getParameter(ae.UNPACK_SKIP_IMAGES);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,rn.width),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,rn.height),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,Gt),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,kt),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Bt);const Ln=K.isDataArrayTexture||K.isData3DTexture,On=xe.isDataArrayTexture||xe.isData3DTexture;if(K.isDepthTexture){const as=Ee.get(K),Is=Ee.get(xe),_s=Ee.get(as.__renderTarget),ca=Ee.get(Is.__renderTarget);Ge.bindFramebuffer(ae.READ_FRAMEBUFFER,_s.__webglFramebuffer),Ge.bindFramebuffer(ae.DRAW_FRAMEBUFFER,ca.__webglFramebuffer);for(let ua=0;ua<At;ua++)Ln&&(ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Ee.get(K).__webglTexture,ye,Bt+ua),ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Ee.get(xe).__webglTexture,Ke,Qt+ua)),ae.blitFramebuffer(Gt,kt,dt,Mt,Ft,xn,dt,Mt,ae.DEPTH_BUFFER_BIT,ae.NEAREST);Ge.bindFramebuffer(ae.READ_FRAMEBUFFER,null),Ge.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else if(ye!==0||K.isRenderTargetTexture||Ee.has(K)){const as=Ee.get(K),Is=Ee.get(xe);Ge.bindFramebuffer(ae.READ_FRAMEBUFFER,wt),Ge.bindFramebuffer(ae.DRAW_FRAMEBUFFER,_t);for(let _s=0;_s<At;_s++)Ln?ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,as.__webglTexture,ye,Bt+_s):ae.framebufferTexture2D(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,as.__webglTexture,ye),On?ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Is.__webglTexture,Ke,Qt+_s):ae.framebufferTexture2D(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Is.__webglTexture,Ke),ye!==0?ae.blitFramebuffer(Gt,kt,dt,Mt,Ft,xn,dt,Mt,ae.COLOR_BUFFER_BIT,ae.NEAREST):On?ae.copyTexSubImage3D(gn,Ke,Ft,xn,Qt+_s,Gt,kt,dt,Mt):ae.copyTexSubImage2D(gn,Ke,Ft,xn,Gt,kt,dt,Mt);Ge.bindFramebuffer(ae.READ_FRAMEBUFFER,null),Ge.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else On?K.isDataTexture||K.isData3DTexture?ae.texSubImage3D(gn,Ke,Ft,xn,Qt,dt,Mt,At,Mn,$t,rn.data):xe.isCompressedArrayTexture?ae.compressedTexSubImage3D(gn,Ke,Ft,xn,Qt,dt,Mt,At,Mn,rn.data):ae.texSubImage3D(gn,Ke,Ft,xn,Qt,dt,Mt,At,Mn,$t,rn):K.isDataTexture?ae.texSubImage2D(ae.TEXTURE_2D,Ke,Ft,xn,dt,Mt,Mn,$t,rn.data):K.isCompressedTexture?ae.compressedTexSubImage2D(ae.TEXTURE_2D,Ke,Ft,xn,rn.width,rn.height,Mn,rn.data):ae.texSubImage2D(ae.TEXTURE_2D,Ke,Ft,xn,dt,Mt,Mn,$t,rn);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,Kt),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,Cn),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,kn),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,Jt),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Ls),Ke===0&&xe.generateMipmaps&&ae.generateMipmap(gn),Ge.unbindTexture()},this.initRenderTarget=function(K){Ee.get(K).__webglFramebuffer===void 0&&ct.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?ct.setTextureCube(K,0):K.isData3DTexture?ct.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?ct.setTexture2DArray(K,0):ct.setTexture2D(K,0),Ge.unbindTexture()},this.resetState=function(){U=0,z=0,I=null,Ge.reset(),pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return to}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=ts._getDrawingBufferColorSpace(e),t.unpackColorSpace=ts._getUnpackColorSpace()}}const Gq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:H_,AddEquation:ed,AddOperation:NC,AdditiveAnimationBlendMode:K_,AdditiveBlending:Wv,AgXToneMapping:PC,AlphaFormat:Y_,AlwaysCompare:ZC,AlwaysDepth:Jv,AlwaysStencilFunc:GS,AmbientLight:kN,AnimationAction:YN,AnimationClip:Px,AnimationLoader:WB,AnimationMixer:b9,AnimationObjectGroup:v9,AnimationUtils:VB,ArcCurve:fN,ArrayCamera:qN,ArrowHelper:q9,AttachedBindMode:OS,Audio:XN,AudioAnalyser:l9,AudioContext:M3,AudioListener:a9,AudioLoader:n9,AxesHelper:X9,BackSide:la,BasicDepthPacking:BC,BasicShadowMap:uC,BatchedMesh:oN,Bone:a3,BooleanKeyframeTrack:Ff,Box2:C9,Box3:zi,Box3Helper:V9,BoxGeometry:nn,BoxHelper:F9,BufferAttribute:Ds,BufferGeometry:Dn,BufferGeometryLoader:HN,ByteType:Qy,Cache:nc,Camera:cb,CameraHelper:B9,CanvasTexture:Bf,CapsuleGeometry:gb,CatmullRomCurve3:md,CineonToneMapping:LC,CircleGeometry:vb,ClampToEdgeWrapping:bi,Clock:S3,Color:Lt,ColorKeyframeTrack:g3,ColorManagement:ts,CompressedArrayTexture:dB,CompressedCubeTexture:fB,CompressedTexture:pb,CompressedTextureLoader:YB,ConeGeometry:Jx,ConstantAlphaFactor:TC,ConstantColorFactor:jC,Controls:Y9,CubeCamera:tN,CubeReflectionMapping:oc,CubeRefractionMapping:od,CubeTexture:Zx,CubeTextureLoader:PN,CubeUVReflectionMapping:K0,CubicBezierCurve:c3,CubicBezierCurve3:hN,CubicInterpolant:RN,CullFaceBack:LS,CullFaceFront:cC,CullFaceFrontBack:MI,CullFaceNone:lC,Curve:yl,CurvePath:pN,CustomBlending:dC,CustomToneMapping:UC,CylinderGeometry:Q0,Cylindrical:A9,Data3DTexture:ob,DataArrayTexture:rb,DataTexture:Lo,DataTextureLoader:v3,DataUtils:Tf,DecrementStencilOp:UI,DecrementWrapStencilOp:OI,DefaultLoadingManager:UN,DepthFormat:L0,DepthStencilFormat:U0,DepthTexture:xb,DetachedBindMode:zC,DirectionalLight:IN,DirectionalLightHelper:k9,DiscreteInterpolant:DN,DodecahedronGeometry:yb,DoubleSide:Ms,DstAlphaFactor:bC,DstColorFactor:SC,DynamicCopyUsage:JI,DynamicDrawUsage:qI,DynamicReadUsage:YI,EdgesGeometry:dN,EllipseCurve:bb,EqualCompare:qC,EqualDepth:$v,EqualStencilFunc:kI,EquirectangularReflectionMapping:N0,EquirectangularRefractionMapping:Mx,Euler:is,EventDispatcher:cc,ExternalTexture:o3,ExtrudeGeometry:Qx,FileLoader:so,Float16BufferAttribute:Vk,Float32BufferAttribute:tn,FloatType:ti,Fog:db,FogExp2:ub,FramebufferTexture:uB,FrontSide:au,Frustum:J0,FrustumArray:mb,GLBufferAttribute:j9,GLSL1:$I,GLSL3:IS,GreaterCompare:XC,GreaterDepth:ty,GreaterEqualCompare:YC,GreaterEqualDepth:ey,GreaterEqualStencilFunc:HI,GreaterStencilFunc:FI,GridHelper:G9,Group:w0,HalfFloatType:Ti,HemisphereLight:ON,HemisphereLightHelper:z9,IcosahedronGeometry:$x,ImageBitmapLoader:t9,ImageLoader:Ox,ImageUtils:QC,IncrementStencilOp:LI,IncrementWrapStencilOp:PI,InstancedBufferAttribute:zf,InstancedBufferGeometry:b3,InstancedInterleavedBuffer:w9,InstancedMesh:rN,Int16BufferAttribute:Bk,Int32BufferAttribute:Fk,Int8BufferAttribute:Gk,IntType:Xx,InterleavedBuffer:fb,InterleavedBufferAttribute:Of,Interpolant:sg,InterpolateDiscrete:wx,InterpolateLinear:Ry,InterpolateSmooth:Pv,InterpolationSamplingMode:nk,InterpolationSamplingType:tk,InvertStencilOp:zI,KeepStencilOp:bf,KeyframeTrack:Po,LOD:iN,LatheGeometry:Mb,Layers:G0,LessCompare:HC,LessDepth:Qv,LessEqualCompare:Q_,LessEqualDepth:Pf,LessEqualStencilFunc:BI,LessStencilFunc:II,Light:pd,LightProbe:VN,Line:cd,Line3:D9,LineBasicMaterial:vr,LineCurve:u3,LineCurve3:mN,LineDashedMaterial:AN,LineLoop:lN,LineSegments:uc,LinearFilter:ss,LinearInterpolant:x3,LinearMipMapLinearFilter:zS,LinearMipMapNearestFilter:wI,LinearMipmapLinearFilter:tc,LinearMipmapNearestFilter:nx,LinearSRGBColorSpace:gl,LinearToneMapping:RC,LinearTransfer:Ex,Loader:yr,LoaderUtils:HS,LoadingManager:Cb,LoopOnce:GC,LoopPingPong:kC,LoopRepeat:IC,MOUSE:vf,Material:Xa,MaterialLoader:Nb,MathUtils:ks,Matrix2:E3,Matrix3:Tn,Matrix4:mn,MaxEquation:pC,Mesh:Bs,MeshBasicMaterial:vl,MeshDepthMaterial:ng,MeshDistanceMaterial:Ab,MeshLambertMaterial:m3,MeshMatcapMaterial:TN,MeshNormalMaterial:EN,MeshPhongMaterial:wN,MeshPhysicalMaterial:_N,MeshStandardMaterial:yi,MeshToonMaterial:jN,MinEquation:mC,MirroredRepeatWrapping:_x,MixOperation:CC,MultiplyBlending:PS,MultiplyOperation:qx,NearestFilter:Wi,NearestMipMapLinearFilter:_I,NearestMipMapNearestFilter:SI,NearestMipmapLinearFilter:S0,NearestMipmapNearestFilter:q_,NeutralToneMapping:OC,NeverCompare:VC,NeverDepth:Kv,NeverStencilFunc:GI,NoBlending:pl,NoColorSpace:$c,NoToneMapping:ac,NormalAnimationBlendMode:ab,NormalBlending:Df,NotEqualCompare:WC,NotEqualDepth:ny,NotEqualStencilFunc:VI,NumberKeyframeTrack:Lx,Object3D:ls,ObjectLoader:$B,ObjectSpaceNormalMap:FC,OctahedronGeometry:eg,OneFactor:gC,OneMinusConstantAlphaFactor:AC,OneMinusConstantColorFactor:EC,OneMinusDstAlphaFactor:MC,OneMinusDstColorFactor:_C,OneMinusSrcAlphaFactor:Zv,OneMinusSrcColorFactor:yC,OrthographicCamera:xl,PCFShadowMap:Jy,PCFSoftShadowMap:tx,PMREMGenerator:WS,Path:Py,PerspectiveCamera:ci,Plane:$l,PlaneGeometry:Ta,PlaneHelper:H9,PointLight:GN,PointLightHelper:P9,Points:cN,PointsMaterial:r3,PolarGridHelper:I9,PolyhedronGeometry:hd,PositionalAudio:o9,PropertyBinding:os,PropertyMixer:WN,QuadraticBezierCurve:d3,QuadraticBezierCurve3:f3,Quaternion:Wn,QuaternionKeyframeTrack:ig,QuaternionLinearInterpolant:LN,RED_GREEN_RGTC2_Format:Cy,RED_RGTC1_Format:Ty,REVISION:Z0,RGBADepthPacking:J_,RGBAFormat:Ai,RGBAIntegerFormat:ib,RGBA_ASTC_10x10_Format:My,RGBA_ASTC_10x5_Format:vy,RGBA_ASTC_10x6_Format:yy,RGBA_ASTC_10x8_Format:by,RGBA_ASTC_12x10_Format:Sy,RGBA_ASTC_12x12_Format:_y,RGBA_ASTC_4x4_Format:uy,RGBA_ASTC_5x4_Format:dy,RGBA_ASTC_5x5_Format:fy,RGBA_ASTC_6x5_Format:hy,RGBA_ASTC_6x6_Format:my,RGBA_ASTC_8x5_Format:py,RGBA_ASTC_8x6_Format:xy,RGBA_ASTC_8x8_Format:gy,RGBA_BPTC_Format:wy,RGBA_ETC2_EAC_Format:cy,RGBA_PVRTC_2BPPV1_Format:ry,RGBA_PVRTC_4BPPV1_Format:ay,RGBA_S3TC_DXT1_Format:ix,RGBA_S3TC_DXT3_Format:ax,RGBA_S3TC_DXT5_Format:rx,RGBDepthPacking:CI,RGBFormat:Z_,RGBIntegerFormat:jI,RGB_BPTC_SIGNED_Format:jy,RGB_BPTC_UNSIGNED_Format:Ey,RGB_ETC1_Format:oy,RGB_ETC2_Format:ly,RGB_PVRTC_2BPPV1_Format:iy,RGB_PVRTC_4BPPV1_Format:sy,RGB_S3TC_DXT1_Format:sx,RGDepthPacking:NI,RGFormat:nb,RGIntegerFormat:sb,RawShaderMaterial:SN,Ray:kf,Raycaster:j3,RectAreaLight:BN,RedFormat:Wx,RedIntegerFormat:Yx,ReinhardToneMapping:DC,RenderTarget:e3,RenderTarget3D:M9,RepeatWrapping:Sx,ReplaceStencilOp:DI,ReverseSubtractEquation:hC,RingGeometry:Sb,SIGNED_RED_GREEN_RGTC2_Format:Ny,SIGNED_RED_RGTC1_Format:Ay,SRGBColorSpace:Sa,SRGBTransfer:js,Scene:Kx,ShaderChunk:Un,ShaderLib:hl,ShaderMaterial:Zi,ShadowMaterial:MN,Shape:rc,ShapeGeometry:_b,ShapePath:W9,ShapeUtils:ml,ShortType:$y,Skeleton:hb,SkeletonHelper:U9,SkinnedMesh:aN,Source:td,Sphere:Yi,SphereGeometry:tg,Spherical:Oy,SphericalHarmonics3:FN,SplineCurve:h3,SpotLight:zN,SpotLightHelper:L9,Sprite:sN,SpriteMaterial:i3,SrcAlphaFactor:Yv,SrcAlphaSaturateFactor:wC,SrcColorFactor:vC,StaticCopyUsage:KI,StaticDrawUsage:Tx,StaticReadUsage:WI,StereoCamera:s9,StreamCopyUsage:QI,StreamDrawUsage:XI,StreamReadUsage:ZI,StringKeyframeTrack:Vf,SubtractEquation:fC,SubtractiveBlending:US,TOUCH:yf,TangentSpaceNormalMap:fd,TetrahedronGeometry:wb,Texture:Es,TextureLoader:ZB,TextureUtils:$9,Timer:E9,TimestampQuery:ek,TorusGeometry:jb,TorusKnotGeometry:Eb,Triangle:Ur,TriangleFanDrawMode:AI,TriangleStripDrawMode:TI,TrianglesDrawMode:EI,TubeGeometry:Tb,UVMapping:rd,Uint16BufferAttribute:t3,Uint32BufferAttribute:n3,Uint8BufferAttribute:Ik,Uint8ClampedBufferAttribute:kk,Uniform:Rb,UniformsGroup:_9,UniformsLib:Ht,UniformsUtils:lb,UnsignedByteType:gr,UnsignedInt101111Type:W_,UnsignedInt248Type:D0,UnsignedInt5999Type:X_,UnsignedIntType:lc,UnsignedShort4444Type:eb,UnsignedShort5551Type:tb,UnsignedShortType:R0,VSMShadowMap:fl,Vector2:pt,Vector3:Q,Vector4:ns,VectorKeyframeTrack:Ux,VideoFrameTexture:cB,VideoTexture:uN,WebGL3DRenderTarget:Tk,WebGLArrayRenderTarget:Ek,WebGLCoordinateSystem:to,WebGLCubeRenderTarget:s3,WebGLRenderTarget:Ea,WebGLRenderer:T3,WebGLUtils:tR,WebGPUCoordinateSystem:P0,WebXRController:Ov,WireframeGeometry:bN,WrapAroundEnding:jx,ZeroCurvatureEnding:jf,ZeroFactor:xC,ZeroSlopeEnding:Ef,ZeroStencilOp:RI,createCanvasElement:JC,error:wn,getConsoleFunction:ak,log:Cx,setConsoleFunction:ik,warn:qt,warnOnce:O0},Symbol.toStringTag,{value:"Module"}));var UM={exports:{}},PM={},OM={exports:{}},zM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function Iq(){if(HE)return zM;HE=1;var i=H0();function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,a=i.useEffect,r=i.useLayoutEffect,o=i.useDebugValue;function l(m,x){var g=x(),v=n({inst:{value:g,getSnapshot:x}}),M=v[0].inst,_=v[1];return r(function(){M.value=g,M.getSnapshot=x,u(M)&&_({inst:M})},[m,g,x]),a(function(){return u(M)&&_({inst:M}),m(function(){u(M)&&_({inst:M})})},[m]),o(g),g}function u(m){var x=m.getSnapshot;m=m.value;try{var g=x();return!t(m,g)}catch{return!0}}function d(m,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return zM.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:f,zM}var qE;function kq(){return qE||(qE=1,OM.exports=Iq()),OM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function Bq(){if(XE)return PM;XE=1;var i=H0(),e=kq();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,r=i.useRef,o=i.useEffect,l=i.useMemo,u=i.useDebugValue;return PM.useSyncExternalStoreWithSelector=function(d,f,m,x,g){var v=r(null);if(v.current===null){var M={hasValue:!1,value:null};v.current=M}else M=v.current;v=l(function(){function S(R){if(!j){if(j=!0,A=R,R=x(R),g!==void 0&&M.hasValue){var O=M.value;if(g(O,R))return C=O}return C=R}if(O=C,n(A,R))return O;var U=x(R);return g!==void 0&&g(O,U)?(A=R,O):(A=R,C=U)}var j=!1,A,C,N=m===void 0?null:m;return[function(){return S(f())},N===null?void 0:function(){return S(N())}]},[f,m,x,g]);var _=a(d,v[0],v[1]);return o(function(){M.hasValue=!0,M.value=_},[_]),u(_),_},PM}var WE;function Fq(){return WE||(WE=1,UM.exports=Bq()),UM.exports}var Vq=Fq();const Hq=Vy(Vq),YE=i=>{let e;const t=new Set,n=(d,f)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const x=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(g=>g(e,x))}},a=()=>e,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=e=i(n,a,l);return l},qq=(i=>i?YE(i):YE),{useSyncExternalStoreWithSelector:Xq}=Hq,Wq=i=>i;function Yq(i,e=Wq,t){const n=Xq(i.subscribe,i.getState,i.getInitialState,e,t);return Uo.useDebugValue(n),n}const ZE=(i,e)=>{const t=qq(i),n=(a,r=e)=>Yq(t,a,r);return Object.assign(n,t),n},nR=((i,e)=>i?ZE(i,e):ZE),Zq=i=>typeof i=="object"&&typeof i.then=="function",Cf=[];function sR(i,e,t=(n,a)=>n===a){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let a=0;a<n;a++)if(!t(i[a],e[a]))return!1;return!0}function iR(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of Cf)if(sR(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const a={keys:e,equal:n.equal,remove:()=>{const r=Cf.indexOf(a);r!==-1&&Cf.splice(r,1)},promise:(Zq(i)?i:i(...e)).then(r=>{a.response=r,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(r=>a.error=r)};if(Cf.push(a),!t)throw a.promise}const aR=(i,e,t)=>iR(i,e,!1,t),Kq=(i,e,t)=>void iR(i,e,!0,t),Jq=i=>{if(i===void 0||i.length===0)Cf.splice(0,Cf.length);else{const e=Cf.find(t=>sR(i,t.keys,t.equal));e&&e.remove()}};var GM={exports:{}},IM={exports:{}},kM={exports:{}},BM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function Qq(){return KE||(KE=1,(function(i){function e(B,J){var $=B.length;B.push(J);e:for(;0<$;){var le=$-1>>>1,re=B[le];if(0<a(re,J))B[le]=J,B[$]=re,$=le;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var J=B[0],$=B.pop();if($!==J){B[0]=$;e:for(var le=0,re=B.length,H=re>>>1;le<H;){var ee=2*(le+1)-1,ue=B[ee],me=ee+1,be=B[me];if(0>a(ue,$))me<re&&0>a(be,ue)?(B[le]=be,B[me]=$,le=me):(B[le]=ue,B[ee]=$,le=ee);else if(me<re&&0>a(be,$))B[le]=be,B[me]=$,le=me;else break e}}return J}function a(B,J){var $=B.sortIndex-J.sortIndex;return $!==0?$:B.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,x=3,g=!1,v=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var J=t(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=B)n(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=t(d)}}function C(B){if(M=!1,A(B),!v)if(t(u)!==null)v=!0,W();else{var J=t(d);J!==null&&ie(C,J.startTime-B)}}var N=!1,R=-1,O=5,U=-1;function z(){return!(i.unstable_now()-U<O)}function I(){if(N){var B=i.unstable_now();U=B;var J=!0;try{e:{v=!1,M&&(M=!1,S(R),R=-1),g=!0;var $=x;try{t:{for(A(B),m=t(u);m!==null&&!(m.expirationTime>B&&z());){var le=m.callback;if(typeof le=="function"){m.callback=null,x=m.priorityLevel;var re=le(m.expirationTime<=B);if(B=i.unstable_now(),typeof re=="function"){m.callback=re,A(B),J=!0;break t}m===t(u)&&n(u),A(B)}else n(u);m=t(u)}if(m!==null)J=!0;else{var H=t(d);H!==null&&ie(C,H.startTime-B),J=!1}}break e}finally{m=null,x=$,g=!1}J=void 0}}finally{J?V():N=!1}}}var V;if(typeof j=="function")V=function(){j(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=I,V=function(){q.postMessage(null)}}else V=function(){_(I,0)};function W(){N||(N=!0,V())}function ie(B,J){R=_(function(){B(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,W())},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(B){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var $=x;x=J;try{return B()}finally{x=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=x;x=B;try{return J()}finally{x=$}},i.unstable_scheduleCallback=function(B,J,$){var le=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?le+$:le):$=le,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=$+re,B={id:f++,callback:J,priorityLevel:B,startTime:$,expirationTime:re,sortIndex:-1},$>le?(B.sortIndex=$,e(d,B),t(u)===null&&B===t(d)&&(M?(S(R),R=-1):M=!0,ie(C,$-le))):(B.sortIndex=re,e(u,B),v||g||(v=!0,W())),B},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(B){var J=x;return function(){var $=x;x=J;try{return B.apply(this,arguments)}finally{x=$}}}})(BM)),BM}var JE;function $q(){return JE||(JE=1,kM.exports=Qq()),kM.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function eX(){return QE||(QE=1,(function(i){i.exports=function(e){function t(p,y,T,L){return new Sm(p,y,T,L)}function n(){}function a(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(p){return p===null||typeof p!="object"?null:(p=Cm&&p[Cm]||p["@@iterator"],typeof p=="function"?p:null)}function o(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===Nc?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case Su:return"Fragment";case qr:return"Portal";case Am:return"Profiler";case Tm:return"StrictMode";case lh:return"Suspense";case zl:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case ho:return(p.displayName||"Context")+".Provider";case Ol:return(p._context.displayName||"Context")+".Consumer";case _u:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Nd:return y=p.displayName||null,y!==null?y:o(p.type)||"Memo";case Xr:y=p._payload,p=p._init;try{return o(p(y))}catch{}}return null}function l(p){if(ch===void 0)try{throw Error()}catch(T){var y=T.stack.trim().match(/\n( *(at )?)/);ch=y&&y[1]||"",Nm=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ch+p+Nm}function u(p,y){if(!p||Gl)return"";Gl=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var L={DetermineComponentFrameRoot:function(){try{if(y){var Vt=function(){throw Error()};if(Object.defineProperty(Vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Vt,[])}catch(_n){var Wt=_n}Reflect.construct(p,[],Vt)}else{try{Vt.call()}catch(_n){Wt=_n}p.call(Vt.prototype)}}else{try{throw Error()}catch(_n){Wt=_n}(Vt=p())&&typeof Vt.catch=="function"&&Vt.catch(function(){})}}catch(_n){if(_n&&Wt&&typeof _n.stack=="string")return[_n.stack,Wt.stack]}return[null,null]}};L.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(L.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(L.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=L.DetermineComponentFrameRoot(),oe=k[0],Me=k[1];if(oe&&Me){var Oe=oe.split(`
`),xt=Me.split(`
`);for(G=L=0;L<Oe.length&&!Oe[L].includes("DetermineComponentFrameRoot");)L++;for(;G<xt.length&&!xt[G].includes("DetermineComponentFrameRoot");)G++;if(L===Oe.length||G===xt.length)for(L=Oe.length-1,G=xt.length-1;1<=L&&0<=G&&Oe[L]!==xt[G];)G--;for(;1<=L&&0<=G;L--,G--)if(Oe[L]!==xt[G]){if(L!==1||G!==1)do if(L--,G--,0>G||Oe[L]!==xt[G]){var Pt=`
`+Oe[L].replace(" at new "," at ");return p.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",p.displayName)),Pt}while(1<=L&&0<=G);break}}}finally{Gl=!1,Error.prepareStackTrace=T}return(T=p?p.displayName||p.name:"")?l(T):""}function d(p){switch(p.tag){case 26:case 27:case 5:return l(p.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return p=u(p.type,!1),p;case 11:return p=u(p.type.render,!1),p;case 1:return p=u(p.type,!0),p;default:return""}}function f(p){try{var y="";do y+=d(p),p=p.return;while(p);return y}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function m(p){var y=p,T=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(T=y.return),p=y.return;while(p)}return y.tag===3?T:null}function x(p){if(m(p)!==p)throw Error(a(188))}function g(p){var y=p.alternate;if(!y){if(y=m(p),y===null)throw Error(a(188));return y!==p?null:p}for(var T=p,L=y;;){var G=T.return;if(G===null)break;var k=G.alternate;if(k===null){if(L=G.return,L!==null){T=L;continue}break}if(G.child===k.child){for(k=G.child;k;){if(k===T)return x(G),p;if(k===L)return x(G),y;k=k.sibling}throw Error(a(188))}if(T.return!==L.return)T=G,L=k;else{for(var oe=!1,Me=G.child;Me;){if(Me===T){oe=!0,T=G,L=k;break}if(Me===L){oe=!0,L=G,T=k;break}Me=Me.sibling}if(!oe){for(Me=k.child;Me;){if(Me===T){oe=!0,T=k,L=G;break}if(Me===L){oe=!0,L=k,T=G;break}Me=Me.sibling}if(!oe)throw Error(a(189))}}if(T.alternate!==L)throw Error(a(190))}if(T.tag!==3)throw Error(a(188));return T.stateNode.current===T?p:y}function v(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p;for(p=p.child;p!==null;){if(y=v(p),y!==null)return y;p=p.sibling}return null}function M(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(y=M(p),y!==null))return y;p=p.sibling}return null}function _(p){return{current:p}}function S(p){0>Qo||(p.current=Id[Qo],Id[Qo]=null,Qo--)}function j(p,y){Qo++,Id[Qo]=p.current,p.current=y}function A(p){return p>>>=0,p===0?32:31-(kd(p)/Yg|0)|0}function C(p){var y=p&42;if(y!==0)return y;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function N(p,y){var T=p.pendingLanes;if(T===0)return 0;var L=0,G=p.suspendedLanes,k=p.pingedLanes,oe=p.warmLanes;p=p.finishedLanes!==0;var Me=T&134217727;return Me!==0?(T=Me&~G,T!==0?L=C(T):(k&=Me,k!==0?L=C(k):p||(oe=Me&~oe,oe!==0&&(L=C(oe))))):(Me=T&~G,Me!==0?L=C(Me):k!==0?L=C(k):p||(oe=T&~oe,oe!==0&&(L=C(oe)))),L===0?0:y!==0&&y!==L&&(y&G)===0&&(G=L&-L,oe=y&-y,G>=oe||G===32&&(oe&4194176)!==0)?y:L}function R(p,y){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&y)===0}function O(p,y){switch(p){case 1:case 2:case 4:case 8:return y+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var p=Tu;return Tu<<=1,(Tu&4194176)===0&&(Tu=128),p}function z(){var p=Bd;return Bd<<=1,(Bd&62914560)===0&&(Bd=4194304),p}function I(p){for(var y=[],T=0;31>T;T++)y.push(p);return y}function V(p,y){p.pendingLanes|=y,y!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function F(p,y,T,L,G,k){var oe=p.pendingLanes;p.pendingLanes=T,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=T,p.entangledLanes&=T,p.errorRecoveryDisabledLanes&=T,p.shellSuspendCounter=0;var Me=p.entanglements,Oe=p.expirationTimes,xt=p.hiddenUpdates;for(T=oe&~T;0<T;){var Pt=31-La(T),Vt=1<<Pt;Me[Pt]=0,Oe[Pt]=-1;var Wt=xt[Pt];if(Wt!==null)for(xt[Pt]=null,Pt=0;Pt<Wt.length;Pt++){var _n=Wt[Pt];_n!==null&&(_n.lane&=-536870913)}T&=~Vt}L!==0&&q(p,L,0),k!==0&&G===0&&p.tag!==0&&(p.suspendedLanes|=k&~(oe&~y))}function q(p,y,T){p.pendingLanes|=y,p.suspendedLanes&=~y;var L=31-La(y);p.entangledLanes|=y,p.entanglements[L]=p.entanglements[L]|1073741824|T&4194218}function W(p,y){var T=p.entangledLanes|=y;for(p=p.entanglements;T;){var L=31-La(T),G=1<<L;G&y|p[L]&y&&(p[L]|=y),T&=~G}}function ie(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function B(p){if(Ua&&typeof Ua.onCommitFiberRoot=="function")try{Ua.onCommitFiberRoot(Cu,p,void 0,(p.current.flags&128)===128)}catch{}}function J(p){if(typeof Qg=="function"&&op(p),Ua&&typeof Ua.setStrictMode=="function")try{Ua.setStrictMode(Cu,p)}catch{}}function $(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}function le(p,y){if(typeof p=="object"&&p!==null){var T=Eh.get(p);return T!==void 0?T:(y={value:p,source:y,stack:f(y)},Eh.set(p,y),y)}return{value:p,source:y,stack:f(y)}}function re(p,y){zs[Zs++]=Hd,zs[Zs++]=Vd,Vd=p,Hd=y}function H(p,y,T){nr[sr++]=vo,nr[sr++]=Er,nr[sr++]=Wr,Wr=p;var L=vo;p=Er;var G=32-La(L)-1;L&=~(1<<G),T+=1;var k=32-La(y)+G;if(30<k){var oe=G-G%5;k=(L&(1<<oe)-1).toString(32),L>>=oe,G-=oe,vo=1<<32-La(y)+G|T<<G|L,Er=k+p}else vo=1<<k|T<<G|L,Er=p}function ee(p){p.return!==null&&(re(p,1),H(p,1,0))}function ue(p){for(;p===Vd;)Vd=zs[--Zs],zs[Zs]=null,Hd=zs[--Zs],zs[Zs]=null;for(;p===Wr;)Wr=nr[--sr],nr[sr]=null,Er=nr[--sr],nr[sr]=null,vo=nr[--sr],nr[sr]=null}function me(p,y){j(Yr,y),j(qd,p),j(Ui,null),p=Rc(y),S(Ui),j(Ui,p)}function be(){S(Ui),S(qd),S(Yr)}function fe(p){p.memoizedState!==null&&j(Nu,p);var y=Ui.current,T=Tg(y,p.type);y!==T&&(j(qd,p),j(Ui,T))}function ge(p){qd.current===p&&(S(Ui),S(qd)),Nu.current===p&&(S(Nu),po?vn._currentValue=Da:vn._currentValue2=Da)}function je(p){var y=Error(a(418,""));throw St(le(y,p)),Xd}function Qe(p,y){if(!pa)throw Error(a(175));Vb(p.stateNode,p.type,p.memoizedProps,y,p)||je(p)}function st(p){for(sa=p.return;sa;)switch(sa.tag){case 3:case 27:Tr=!0;return;case 5:case 13:Tr=!1;return;default:sa=sa.return}}function Ve(p){if(!pa||p!==sa)return!1;if(!Jn)return st(p),Jn=!0,!1;var y=!1;if(Hi?p.tag!==3&&p.tag!==27&&(p.tag!==5||Vg(p.type)&&!Bl(p.type,p.memoizedProps))&&(y=!0):p.tag!==3&&(p.tag!==5||Vg(p.type)&&!Bl(p.type,p.memoizedProps))&&(y=!0),y&&Xi&&je(p),st(p),p.tag===13){if(!pa)throw Error(a(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));Xi=Bg(p)}else Xi=sa?Ym(p.stateNode):null;return!0}function nt(){pa&&(Xi=sa=null,Jn=!1)}function St(p){ir===null?ir=[p]:ir.push(p)}function ze(){for(var p=Vl,y=Ru=Vl=0;y<p;){var T=ar[y];ar[y++]=null;var L=ar[y];ar[y++]=null;var G=ar[y];ar[y++]=null;var k=ar[y];if(ar[y++]=null,L!==null&&G!==null){var oe=L.pending;oe===null?G.next=G:(G.next=oe.next,oe.next=G),L.pending=G}k!==0&&Pe(T,G,k)}}function ae(p,y,T,L){ar[Vl++]=p,ar[Vl++]=y,ar[Vl++]=T,ar[Vl++]=L,Ru|=L,p.lanes|=L,p=p.alternate,p!==null&&(p.lanes|=L)}function Fe(p,y,T,L){return ae(p,y,T,L),Ge(p)}function We(p,y){return ae(p,null,null,y),Ge(p)}function Pe(p,y,T){p.lanes|=T;var L=p.alternate;L!==null&&(L.lanes|=T);for(var G=!1,k=p.return;k!==null;)k.childLanes|=T,L=k.alternate,L!==null&&(L.childLanes|=T),k.tag===22&&(p=k.stateNode,p===null||p._visibility&1||(G=!0)),p=k,k=k.return;G&&y!==null&&p.tag===3&&(k=p.stateNode,G=31-La(T),k=k.hiddenUpdates,p=k[G],p===null?k[G]=[y]:p.push(y),y.lane=T|536870912)}function Ge(p){if(50<Fc)throw Fc=0,va=null,Error(a(185));for(var y=p.return;y!==null;)p=y,y=p.return;return p.tag===3?p.stateNode:null}function $e(p){p!==Pc&&p.next===null&&(Pc===null?Du=Pc=p:Pc=Pc.next=p),Yd=!0,Wd||(Wd=!0,Be(ct))}function Ee(p,y){if(!Zr&&Yd){Zr=!0;do for(var T=!1,L=Du;L!==null;){if(p!==0){var G=L.pendingLanes;if(G===0)var k=0;else{var oe=L.suspendedLanes,Me=L.pingedLanes;k=(1<<31-La(42|p)+1)-1,k&=G&~(oe&~Me),k=k&201326677?k&201326677|1:k?k|2:0}k!==0&&(T=!0,ve(L,k))}else k=zn,k=N(L,L===Bn?k:0),(k&3)===0||R(L,k)||(T=!0,ve(L,k));L=L.next}while(T);Zr=!1}}function ct(){Yd=Wd=!1;var p=0;Hl!==0&&(Fl()&&(p=Hl),Hl=0);for(var y=qi(),T=null,L=Du;L!==null;){var G=L.next,k=te(L,y);k===0?(L.next=null,T===null?Du=G:T.next=G,G===null&&(Pc=T)):(T=L,(p!==0||(k&3)!==0)&&(Yd=!0)),L=G}Ee(p)}function te(p,y){for(var T=p.suspendedLanes,L=p.pingedLanes,G=p.expirationTimes,k=p.pendingLanes&-62914561;0<k;){var oe=31-La(k),Me=1<<oe,Oe=G[oe];Oe===-1?((Me&T)===0||(Me&L)!==0)&&(G[oe]=O(Me,y)):Oe<=y&&(p.expiredLanes|=Me),k&=~Me}if(y=Bn,T=zn,T=N(p,p===y?T:0),L=p.callbackNode,T===0||p===y&&ys===2||p.cancelPendingCommit!==null)return L!==null&&L!==null&&Fd(L),p.callbackNode=null,p.callbackPriority=0;if((T&3)===0||R(p,T)){if(y=T&-T,y===p.callbackPriority)return y;switch(L!==null&&Fd(L),ie(T)){case 2:case 8:T=Jg;break;case 32:T=wh;break;case 268435456:T=jh;break;default:T=wh}return L=Y.bind(null,p),T=Au(T,L),p.callbackPriority=y,p.callbackNode=T,y}return L!==null&&L!==null&&Fd(L),p.callbackPriority=2,p.callbackNode=null,2}function Y(p,y){var T=p.callbackNode;if(Di()&&p.callbackNode!==T)return null;var L=zn;return L=N(p,p===Bn?L:0),L===0?null:(jd(p,L,y),te(p,qi()),p.callbackNode!=null&&p.callbackNode===T?Y.bind(null,p):null)}function ve(p,y){if(Di())return null;jd(p,y,!0)}function Be(p){hi?hh(function(){(cn&6)!==0?Au(rp,p):p()}):Au(rp,p)}function Re(){return Hl===0&&(Hl=U()),Hl}function Ae(p,y){if(Zd===null){var T=Zd=[];Th=0,Pa=Re(),ql={status:"pending",value:void 0,then:function(L){T.push(L)}}}return Th++,y.then(yt,yt),y}function yt(){if(--Th===0&&Zd!==null){ql!==null&&(ql.status="fulfilled");var p=Zd;Zd=null,Pa=0,ql=null;for(var y=0;y<p.length;y++)(0,p[y])()}}function gt(p,y){var T=[],L={status:"pending",value:null,reason:null,then:function(G){T.push(G)}};return p.then(function(){L.status="fulfilled",L.value=y;for(var G=0;G<T.length;G++)(0,T[G])(y)},function(G){for(L.status="rejected",L.reason=G,G=0;G<T.length;G++)(0,T[G])(void 0)}),L}function Dt(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nt(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function ke(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Ie(p,y,T){var L=p.updateQueue;if(L===null)return null;if(L=L.shared,(cn&2)!==0){var G=L.pending;return G===null?y.next=y:(y.next=G.next,G.next=y),L.pending=y,y=Ge(p),Pe(p,null,T),y}return ae(p,L,y,T),Ge(p)}function ft(p,y,T){if(y=y.updateQueue,y!==null&&(y=y.shared,(T&4194176)!==0)){var L=y.lanes;L&=p.pendingLanes,T|=L,y.lanes=T,W(p,T)}}function he(p,y){var T=p.updateQueue,L=p.alternate;if(L!==null&&(L=L.updateQueue,T===L)){var G=null,k=null;if(T=T.firstBaseUpdate,T!==null){do{var oe={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};k===null?G=k=oe:k=k.next=oe,T=T.next}while(T!==null);k===null?G=k=y:k=k.next=y}else G=k=y;T={baseState:L.baseState,firstBaseUpdate:G,lastBaseUpdate:k,shared:L.shared,callbacks:L.callbacks},p.updateQueue=T;return}p=T.lastBaseUpdate,p===null?T.firstBaseUpdate=y:p.next=y,T.lastBaseUpdate=y}function Ce(){if(Lu){var p=ql;if(p!==null)throw p}}function ut(p,y,T,L){Lu=!1;var G=p.updateQueue;$o=!1;var k=G.firstBaseUpdate,oe=G.lastBaseUpdate,Me=G.shared.pending;if(Me!==null){G.shared.pending=null;var Oe=Me,xt=Oe.next;Oe.next=null,oe===null?k=xt:oe.next=xt,oe=Oe;var Pt=p.alternate;Pt!==null&&(Pt=Pt.updateQueue,Me=Pt.lastBaseUpdate,Me!==oe&&(Me===null?Pt.firstBaseUpdate=xt:Me.next=xt,Pt.lastBaseUpdate=Oe))}if(k!==null){var Vt=G.baseState;oe=0,Pt=xt=Oe=null,Me=k;do{var Wt=Me.lane&-536870913,_n=Wt!==Me.lane;if(_n?(zn&Wt)===Wt:(L&Wt)===Wt){Wt!==0&&Wt===Pa&&(Lu=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:Me.tag,payload:Me.payload,callback:null,next:null});e:{var Ia=p,$d=Me;Wt=y;var Vc=T;switch($d.tag){case 1:if(Ia=$d.payload,typeof Ia=="function"){Vt=Ia.call(Vc,Vt,Wt);break e}Vt=Ia;break e;case 3:Ia.flags=Ia.flags&-65537|128;case 0:if(Ia=$d.payload,Wt=typeof Ia=="function"?Ia.call(Vc,Vt,Wt):Ia,Wt==null)break e;Vt=Cc({},Vt,Wt);break e;case 2:$o=!0}}Wt=Me.callback,Wt!==null&&(p.flags|=64,_n&&(p.flags|=8192),_n=G.callbacks,_n===null?G.callbacks=[Wt]:_n.push(Wt))}else _n={lane:Wt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Pt===null?(xt=Pt=_n,Oe=Vt):Pt=Pt.next=_n,oe|=Wt;if(Me=Me.next,Me===null){if(Me=G.shared.pending,Me===null)break;_n=Me,Me=_n.next,_n.next=null,G.lastBaseUpdate=_n,G.shared.pending=null}}while(!0);Pt===null&&(Oe=Vt),G.baseState=Oe,G.firstBaseUpdate=xt,G.lastBaseUpdate=Pt,k===null&&(G.shared.lanes=0),cr|=oe,p.lanes=oe,p.memoizedState=Vt}}function pe(p,y){if(typeof p!="function")throw Error(a(191,p));p.call(y)}function we(p,y){var T=p.callbacks;if(T!==null)for(p.callbacks=null,p=0;p<T.length;p++)pe(T[p],y)}function lt(p,y){if(tr(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var T=Object.keys(p),L=Object.keys(y);if(T.length!==L.length)return!1;for(L=0;L<T.length;L++){var G=T[L];if(!Kd.call(y,G)||!tr(p[G],y[G]))return!1}return!0}function jt(p){return p=p.status,p==="fulfilled"||p==="rejected"}function ot(){}function qe(p,y,T){switch(T=p[T],T===void 0?p.push(y):T!==y&&(y.then(ot,ot),y=T),y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,p===ps?Error(a(483)):p;default:if(typeof y.status=="string")y.then(ot,ot);else{if(p=Bn,p!==null&&100<p.shellSuspendCounter)throw Error(a(482));p=y,p.status="pending",p.then(function(L){if(y.status==="pending"){var G=y;G.status="fulfilled",G.value=L}},function(L){if(y.status==="pending"){var G=y;G.status="rejected",G.reason=L}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,p===ps?Error(a(483)):p}throw Oc=y,ps}}function Tt(){if(Oc===null)throw Error(a(459));var p=Oc;return Oc=null,p}function zt(p){var y=Ar;return Ar+=1,yo===null&&(yo=[]),qe(yo,p,y)}function It(p,y){y=y.props.ref,p.ref=y!==void 0?y:null}function Zt(p,y){throw y.$$typeof===Em?Error(a(525)):(p=Object.prototype.toString.call(y),Error(a(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p)))}function An(p){var y=p._init;return y(p._payload)}function In(p){function y(Ze,De){if(p){var et=Ze.deletions;et===null?(Ze.deletions=[De],Ze.flags|=16):et.push(De)}}function T(Ze,De){if(!p)return null;for(;De!==null;)y(Ze,De),De=De.sibling;return null}function L(Ze){for(var De=new Map;Ze!==null;)Ze.key!==null?De.set(Ze.key,Ze):De.set(Ze.index,Ze),Ze=Ze.sibling;return De}function G(Ze,De){return Ze=ta(Ze,De),Ze.index=0,Ze.sibling=null,Ze}function k(Ze,De,et){return Ze.index=et,p?(et=Ze.alternate,et!==null?(et=et.index,et<De?(Ze.flags|=33554434,De):et):(Ze.flags|=33554434,De)):(Ze.flags|=1048576,De)}function oe(Ze){return p&&Ze.alternate===null&&(Ze.flags|=33554434),Ze}function Me(Ze,De,et,Rt){return De===null||De.tag!==6?(De=Pl(et,Ze.mode,Rt),De.return=Ze,De):(De=G(De,et),De.return=Ze,De)}function Oe(Ze,De,et,Rt){var on=et.type;return on===Su?Pt(Ze,De,et.props.children,Rt,et.key):De!==null&&(De.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Xr&&An(on)===De.type)?(De=G(De,et.props),It(De,et),De.return=Ze,De):(De=wr(et.type,et.key,et.props,null,Ze.mode,Rt),It(De,et),De.return=Ze,De)}function xt(Ze,De,et,Rt){return De===null||De.tag!==4||De.stateNode.containerInfo!==et.containerInfo||De.stateNode.implementation!==et.implementation?(De=Mu(et,Ze.mode,Rt),De.return=Ze,De):(De=G(De,et.children||[]),De.return=Ze,De)}function Pt(Ze,De,et,Rt,on){return De===null||De.tag!==7?(De=Wo(et,Ze.mode,Rt,on),De.return=Ze,De):(De=G(De,et),De.return=Ze,De)}function Vt(Ze,De,et){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return De=Pl(""+De,Ze.mode,et),De.return=Ze,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case Yo:return et=wr(De.type,De.key,De.props,null,Ze.mode,et),It(et,De),et.return=Ze,et;case qr:return De=Mu(De,Ze.mode,et),De.return=Ze,De;case Xr:var Rt=De._init;return De=Rt(De._payload),Vt(Ze,De,et)}if(Il(De)||r(De))return De=Wo(De,Ze.mode,et,null),De.return=Ze,De;if(typeof De.then=="function")return Vt(Ze,zt(De),et);if(De.$$typeof===ho)return Vt(Ze,bd(Ze,De),et);Zt(Ze,De)}return null}function Wt(Ze,De,et,Rt){var on=De!==null?De.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return on!==null?null:Me(Ze,De,""+et,Rt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case Yo:return et.key===on?Oe(Ze,De,et,Rt):null;case qr:return et.key===on?xt(Ze,De,et,Rt):null;case Xr:return on=et._init,et=on(et._payload),Wt(Ze,De,et,Rt)}if(Il(et)||r(et))return on!==null?null:Pt(Ze,De,et,Rt,null);if(typeof et.then=="function")return Wt(Ze,De,zt(et),Rt);if(et.$$typeof===ho)return Wt(Ze,De,bd(Ze,et),Rt);Zt(Ze,et)}return null}function _n(Ze,De,et,Rt,on){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Ze=Ze.get(et)||null,Me(De,Ze,""+Rt,on);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case Yo:return Ze=Ze.get(Rt.key===null?et:Rt.key)||null,Oe(De,Ze,Rt,on);case qr:return Ze=Ze.get(Rt.key===null?et:Rt.key)||null,xt(De,Ze,Rt,on);case Xr:var Cs=Rt._init;return Rt=Cs(Rt._payload),_n(Ze,De,et,Rt,on)}if(Il(Rt)||r(Rt))return Ze=Ze.get(et)||null,Pt(De,Ze,Rt,on,null);if(typeof Rt.then=="function")return _n(Ze,De,et,zt(Rt),on);if(Rt.$$typeof===ho)return _n(Ze,De,et,bd(De,Rt),on);Zt(De,Rt)}return null}function Ia(Ze,De,et,Rt){for(var on=null,Cs=null,yn=De,$n=De=0,wi=null;yn!==null&&$n<et.length;$n++){yn.index>$n?(wi=yn,yn=null):wi=yn.sibling;var es=Wt(Ze,yn,et[$n],Rt);if(es===null){yn===null&&(yn=wi);break}p&&yn&&es.alternate===null&&y(Ze,yn),De=k(es,De,$n),Cs===null?on=es:Cs.sibling=es,Cs=es,yn=wi}if($n===et.length)return T(Ze,yn),Jn&&re(Ze,$n),on;if(yn===null){for(;$n<et.length;$n++)yn=Vt(Ze,et[$n],Rt),yn!==null&&(De=k(yn,De,$n),Cs===null?on=yn:Cs.sibling=yn,Cs=yn);return Jn&&re(Ze,$n),on}for(yn=L(yn);$n<et.length;$n++)wi=_n(yn,Ze,$n,et[$n],Rt),wi!==null&&(p&&wi.alternate!==null&&yn.delete(wi.key===null?$n:wi.key),De=k(wi,De,$n),Cs===null?on=wi:Cs.sibling=wi,Cs=wi);return p&&yn.forEach(function(rl){return y(Ze,rl)}),Jn&&re(Ze,$n),on}function $d(Ze,De,et,Rt){if(et==null)throw Error(a(151));for(var on=null,Cs=null,yn=De,$n=De=0,wi=null,es=et.next();yn!==null&&!es.done;$n++,es=et.next()){yn.index>$n?(wi=yn,yn=null):wi=yn.sibling;var rl=Wt(Ze,yn,es.value,Rt);if(rl===null){yn===null&&(yn=wi);break}p&&yn&&rl.alternate===null&&y(Ze,yn),De=k(rl,De,$n),Cs===null?on=rl:Cs.sibling=rl,Cs=rl,yn=wi}if(es.done)return T(Ze,yn),Jn&&re(Ze,$n),on;if(yn===null){for(;!es.done;$n++,es=et.next())es=Vt(Ze,es.value,Rt),es!==null&&(De=k(es,De,$n),Cs===null?on=es:Cs.sibling=es,Cs=es);return Jn&&re(Ze,$n),on}for(yn=L(yn);!es.done;$n++,es=et.next())es=_n(yn,Ze,$n,es.value,Rt),es!==null&&(p&&es.alternate!==null&&yn.delete(es.key===null?$n:es.key),De=k(es,De,$n),Cs===null?on=es:Cs.sibling=es,Cs=es);return p&&yn.forEach(function(Oh){return y(Ze,Oh)}),Jn&&re(Ze,$n),on}function Vc(Ze,De,et,Rt){if(typeof et=="object"&&et!==null&&et.type===Su&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case Yo:e:{for(var on=et.key;De!==null;){if(De.key===on){if(on=et.type,on===Su){if(De.tag===7){T(Ze,De.sibling),Rt=G(De,et.props.children),Rt.return=Ze,Ze=Rt;break e}}else if(De.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Xr&&An(on)===De.type){T(Ze,De.sibling),Rt=G(De,et.props),It(Rt,et),Rt.return=Ze,Ze=Rt;break e}T(Ze,De);break}else y(Ze,De);De=De.sibling}et.type===Su?(Rt=Wo(et.props.children,Ze.mode,Rt,et.key),Rt.return=Ze,Ze=Rt):(Rt=wr(et.type,et.key,et.props,null,Ze.mode,Rt),It(Rt,et),Rt.return=Ze,Ze=Rt)}return oe(Ze);case qr:e:{for(on=et.key;De!==null;){if(De.key===on)if(De.tag===4&&De.stateNode.containerInfo===et.containerInfo&&De.stateNode.implementation===et.implementation){T(Ze,De.sibling),Rt=G(De,et.children||[]),Rt.return=Ze,Ze=Rt;break e}else{T(Ze,De);break}else y(Ze,De);De=De.sibling}Rt=Mu(et,Ze.mode,Rt),Rt.return=Ze,Ze=Rt}return oe(Ze);case Xr:return on=et._init,et=on(et._payload),Vc(Ze,De,et,Rt)}if(Il(et))return Ia(Ze,De,et,Rt);if(r(et)){if(on=r(et),typeof on!="function")throw Error(a(150));return et=on.call(et),$d(Ze,De,et,Rt)}if(typeof et.then=="function")return Vc(Ze,De,zt(et),Rt);if(et.$$typeof===ho)return Vc(Ze,De,bd(Ze,et),Rt);Zt(Ze,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,De!==null&&De.tag===6?(T(Ze,De.sibling),Rt=G(De,et),Rt.return=Ze,Ze=Rt):(T(Ze,De),Rt=Pl(et,Ze.mode,Rt),Rt.return=Ze,Ze=Rt),oe(Ze)):T(Ze,De)}return function(Ze,De,et,Rt){try{Ar=0;var on=Vc(Ze,De,et,Rt);return yo=null,on}catch(yn){if(yn===ps)throw yn;var Cs=t(29,yn,null,Ze.mode);return Cs.lanes=Rt,Cs.return=Ze,Cs}finally{}}}function Ss(p,y){p=Kr,j(rr,p),j(bo,y),Kr=p|y.baseLanes}function ni(){j(rr,Kr),j(bo,bo.current)}function si(){Kr=rr.current,S(bo),S(rr)}function cs(p){var y=p.alternate;j(mi,mi.current&1),j(or,p),Cr===null&&(y===null||bo.current!==null||y.memoizedState!==null)&&(Cr=p)}function Fs(p){if(p.tag===22){if(j(mi,mi.current),j(or,p),Cr===null){var y=p.alternate;y!==null&&y.memoizedState!==null&&(Cr=p)}}else Ts()}function Ts(){j(mi,mi.current),j(or,or.current)}function sn(p){S(or),Cr===p&&(Cr=null),S(mi)}function Hn(p){for(var y=p;y!==null;){if(y.tag===13){var T=y.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||vh(T)||Gd(T)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}function fn(){throw Error(a(321))}function Z(p,y){if(y===null)return!1;for(var T=0;T<y.length&&T<p.length;T++)if(!tr(p[T],y[T]))return!1;return!0}function ce(p,y,T,L,G,k){return Mo=k,Nn=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,dn.H=p===null||p.memoizedState===null?pi:ia,el=!1,k=T(L,G),el=!1,Gs&&(k=Ye(y,T,L,G)),_e(p),k}function _e(p){dn.H=Qn;var y=rs!==null&&rs.next!==null;if(Mo=0,ai=rs=Nn=null,Nr=!1,Ks=0,Uu=null,y)throw Error(a(300));p===null||ri||(p=p.dependencies,p!==null&&wl(p)&&(ri=!0))}function Ye(p,y,T,L){Nn=p;var G=0;do{if(Gs&&(Uu=null),Ks=0,Gs=!1,25<=G)throw Error(a(301));if(G+=1,ai=rs=null,p.updateQueue!=null){var k=p.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}dn.H=Wl,k=y(T,L)}while(Gs);return k}function at(){var p=dn.H,y=p.useState()[0];return y=typeof y.then=="function"?xe(y):y,p=p.useState()[0],(rs!==null?rs.memoizedState:null)!==p&&(Nn.flags|=1024),y}function it(){var p=Jd!==0;return Jd=0,p}function Ct(p,y,T){y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~T}function wt(p){if(Nr){for(p=p.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Nr=!1}Mo=0,ai=rs=Nn=null,Gs=!1,Ks=Jd=0,Uu=null}function _t(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?Nn.memoizedState=ai=p:ai=ai.next=p,ai}function K(){if(rs===null){var p=Nn.alternate;p=p!==null?p.memoizedState:null}else p=rs.next;var y=ai===null?Nn.memoizedState:ai.next;if(y!==null)ai=y,rs=p;else{if(p===null)throw Nn.alternate===null?Error(a(467)):Error(a(310));rs=p,p={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},ai===null?Nn.memoizedState=ai=p:ai=ai.next=p}return ai}function xe(p){var y=Ks;return Ks+=1,Uu===null&&(Uu=[]),p=qe(Uu,p,y),y=Nn,(ai===null?y.memoizedState:ai.next)===null&&(y=y.alternate,dn.H=y===null||y.memoizedState===null?pi:ia),p}function de(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return xe(p);if(p.$$typeof===ho)return Bi(p)}throw Error(a(438,String(p)))}function Ne(p){var y=null,T=Nn.updateQueue;if(T!==null&&(y=T.memoCache),y==null){var L=Nn.alternate;L!==null&&(L=L.updateQueue,L!==null&&(L=L.memoCache,L!=null&&(y={data:L.data.map(function(G){return G.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),T===null&&(T=Ch(),Nn.updateQueue=T),T.memoCache=y,T=y.data[y.index],T===void 0)for(T=y.data[y.index]=Array(p),L=0;L<p;L++)T[L]=Eg;return y.index++,T}function ye(p,y){return typeof y=="function"?y(p):y}function Ke(p){var y=K();return dt(y,rs,p)}function dt(p,y,T){var L=p.queue;if(L===null)throw Error(a(311));L.lastRenderedReducer=T;var G=p.baseQueue,k=L.pending;if(k!==null){if(G!==null){var oe=G.next;G.next=k.next,k.next=oe}y.baseQueue=G=k,L.pending=null}if(k=p.baseState,G===null)p.memoizedState=k;else{y=G.next;var Me=oe=null,Oe=null,xt=y,Pt=!1;do{var Vt=xt.lane&-536870913;if(Vt!==xt.lane?(zn&Vt)===Vt:(Mo&Vt)===Vt){var Wt=xt.revertLane;if(Wt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),Vt===Pa&&(Pt=!0);else if((Mo&Wt)===Wt){xt=xt.next,Wt===Pa&&(Pt=!0);continue}else Vt={lane:0,revertLane:xt.revertLane,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Oe===null?(Me=Oe=Vt,oe=k):Oe=Oe.next=Vt,Nn.lanes|=Wt,cr|=Wt;Vt=xt.action,el&&T(k,Vt),k=xt.hasEagerState?xt.eagerState:T(k,Vt)}else Wt={lane:Vt,revertLane:xt.revertLane,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null},Oe===null?(Me=Oe=Wt,oe=k):Oe=Oe.next=Wt,Nn.lanes|=Vt,cr|=Vt;xt=xt.next}while(xt!==null&&xt!==y);if(Oe===null?oe=k:Oe.next=Me,!tr(k,p.memoizedState)&&(ri=!0,Pt&&(T=ql,T!==null)))throw T;p.memoizedState=k,p.baseState=oe,p.baseQueue=Oe,L.lastRenderedState=k}return G===null&&(L.lanes=0),[p.memoizedState,L.dispatch]}function Mt(p){var y=K(),T=y.queue;if(T===null)throw Error(a(311));T.lastRenderedReducer=p;var L=T.dispatch,G=T.pending,k=y.memoizedState;if(G!==null){T.pending=null;var oe=G=G.next;do k=p(k,oe.action),oe=oe.next;while(oe!==G);tr(k,y.memoizedState)||(ri=!0),y.memoizedState=k,y.baseQueue===null&&(y.baseState=k),T.lastRenderedState=k}return[k,L]}function At(p,y,T){var L=Nn,G=K(),k=Jn;if(k){if(T===void 0)throw Error(a(407));T=T()}else T=y();var oe=!tr((rs||G).memoizedState,T);if(oe&&(G.memoizedState=T,ri=!0),G=G.queue,Or(Bt.bind(null,L,G,p),[p]),G.getSnapshot!==y||oe||ai!==null&&ai.memoizedState.tag&1){if(L.flags|=2048,_s(9,kt.bind(null,L,G,T,y),{destroy:void 0},null),Bn===null)throw Error(a(349));k||(Mo&60)!==0||Gt(L,y,T)}return T}function Gt(p,y,T){p.flags|=16384,p={getSnapshot:y,value:T},y=Nn.updateQueue,y===null?(y=Ch(),Nn.updateQueue=y,y.stores=[p]):(T=y.stores,T===null?y.stores=[p]:T.push(p))}function kt(p,y,T,L){y.value=T,y.getSnapshot=L,Ft(y)&&xn(p)}function Bt(p,y,T){return T(function(){Ft(y)&&xn(p)})}function Ft(p){var y=p.getSnapshot;p=p.value;try{var T=y();return!tr(p,T)}catch{return!0}}function xn(p){var y=We(p,2);y!==null&&ea(y,p,2)}function Qt(p){var y=_t();if(typeof p=="function"){var T=p;if(p=T(),el){J(!0);try{T()}finally{J(!1)}}}return y.memoizedState=y.baseState=p,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ye,lastRenderedState:p},y}function rn(p,y,T,L){return p.baseState=T,dt(p,rs,typeof L=="function"?L:ye)}function Mn(p,y,T,L,G){if(io(p))throw Error(a(485));if(p=y.action,p!==null){var k={payload:G,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){k.listeners.push(oe)}};dn.T!==null?T(!0):k.isTransition=!1,L(k),T=y.pending,T===null?(k.next=y.pending=k,$t(y,k)):(k.next=T.next,y.pending=T.next=k)}}function $t(p,y){var T=y.action,L=y.payload,G=p.state;if(y.isTransition){var k=dn.T,oe={};dn.T=oe;try{var Me=T(G,L),Oe=dn.S;Oe!==null&&Oe(oe,Me),gn(p,y,Me)}catch(xt){Cn(p,y,xt)}finally{dn.T=k}}else try{k=T(G,L),gn(p,y,k)}catch(xt){Cn(p,y,xt)}}function gn(p,y,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(L){Kt(p,y,L)},function(L){return Cn(p,y,L)}):Kt(p,y,T)}function Kt(p,y,T){y.status="fulfilled",y.value=T,kn(y),p.state=T,y=p.pending,y!==null&&(T=y.next,T===y?p.pending=null:(T=T.next,y.next=T,$t(p,T)))}function Cn(p,y,T){var L=p.pending;if(p.pending=null,L!==null){L=L.next;do y.status="rejected",y.reason=T,kn(y),y=y.next;while(y!==L)}p.action=null}function kn(p){p=p.listeners;for(var y=0;y<p.length;y++)(0,p[y])()}function Jt(p,y){return y}function Ls(p,y){if(Jn){var T=Bn.formState;if(T!==null){e:{var L=Nn;if(Jn){if(Xi){var G=Lg(Xi,Tr);if(G){Xi=Ym(G),L=Ug(G);break e}}je(L)}L=!1}L&&(y=T[0])}}T=_t(),T.memoizedState=T.baseState=y,L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jt,lastRenderedState:y},T.queue=L,T=xc.bind(null,Nn,L),L.dispatch=T,L=Qt(!1);var k=gc.bind(null,Nn,!1,L.queue);return L=_t(),G={state:y,dispatch:null,action:p,pending:null},L.queue=G,T=Mn.bind(null,Nn,G,k,T),G.dispatch=T,L.memoizedState=p,[y,T,!1]}function Ln(p){var y=K();return On(y,rs,p)}function On(p,y,T){y=dt(p,y,Jt)[0],p=Ke(ye)[0],y=typeof y=="object"&&y!==null&&typeof y.then=="function"?xe(y):y;var L=K(),G=L.queue,k=G.dispatch;return T!==L.memoizedState&&(Nn.flags|=2048,_s(9,as.bind(null,G,T),{destroy:void 0},null)),[y,k,p]}function as(p,y){p.action=y}function Is(p){var y=K(),T=rs;if(T!==null)return On(y,T,p);K(),y=y.memoizedState,T=K();var L=T.queue.dispatch;return T.memoizedState=p,[y,L,!1]}function _s(p,y,T,L){return p={tag:p,create:y,inst:T,deps:L,next:null},y=Nn.updateQueue,y===null&&(y=Ch(),Nn.updateQueue=y),T=y.lastEffect,T===null?y.lastEffect=p.next=p:(L=T.next,T.next=p,p.next=L,y.lastEffect=p),p}function ca(){return K().memoizedState}function ua(p,y,T,L){var G=_t();Nn.flags|=p,G.memoizedState=_s(1|y,T,{destroy:void 0},L===void 0?null:L)}function Ml(p,y,T,L){var G=K();L=L===void 0?null:L;var k=G.memoizedState.inst;rs!==null&&L!==null&&Z(L,rs.memoizedState.deps)?G.memoizedState=_s(y,T,k,L):(Nn.flags|=p,G.memoizedState=_s(1|y,T,k,L))}function dc(p,y){ua(8390656,8,p,y)}function Or(p,y){Ml(2048,8,p,y)}function xd(p,y){return Ml(4,2,p,y)}function fc(p,y){return Ml(4,4,p,y)}function br(p,y){if(typeof y=="function"){p=p();var T=y(p);return function(){typeof T=="function"?T():y(null)}}if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function Ii(p,y,T){T=T!=null?T.concat([p]):null,Ml(4,4,br.bind(null,y,p),T)}function zr(){}function hc(p,y){var T=K();y=y===void 0?null:y;var L=T.memoizedState;return y!==null&&Z(y,L[1])?L[0]:(T.memoizedState=[p,y],p)}function Wa(p,y){var T=K();y=y===void 0?null:y;var L=T.memoizedState;if(y!==null&&Z(y,L[1]))return L[0];if(L=p(),el){J(!0);try{p()}finally{J(!1)}}return T.memoizedState=[L,y],L}function Mr(p,y,T){return T===void 0||(Mo&1073741824)!==0?p.memoizedState=y:(p.memoizedState=T,p=lo(),Nn.lanes|=p,cr|=p,T)}function mc(p,y,T,L){return tr(T,y)?T:bo.current!==null?(p=Mr(p,T,L),tr(p,y)||(ri=!0),p):(Mo&42)===0?(ri=!0,p.memoizedState=T):(p=lo(),Nn.lanes|=p,cr|=p,y)}function pc(p,y,T,L,G){var k=Si();na(k!==0&&8>k?k:8);var oe=dn.T,Me={};dn.T=Me,gc(p,!1,y,T);try{var Oe=G(),xt=dn.S;if(xt!==null&&xt(Me,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Pt=gt(Oe,L);Sr(p,y,Pt,ma(p))}else Sr(p,y,L,ma(p))}catch(Vt){Sr(p,y,{then:function(){},status:"rejected",reason:Vt},ma())}finally{na(k),dn.T=oe}}function Sl(p){var y=p.memoizedState;if(y!==null)return y;y={memoizedState:Da,baseState:Da,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ye,lastRenderedState:Da},next:null};var T={};return y.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ye,lastRenderedState:T},next:null},p.memoizedState=y,p=p.alternate,p!==null&&(p.memoizedState=y),y}function Gr(){return Bi(vn)}function Ya(){return K().memoizedState}function Qi(){return K().memoizedState}function Oo(p){for(var y=p.return;y!==null;){switch(y.tag){case 24:case 3:var T=ma();p=ke(T);var L=Ie(y,p,T);L!==null&&(ea(L,y,T),ft(L,y,T)),y={cache:Xf()},p.payload=y;return}y=y.return}}function Ir(p,y,T){var L=ma();T={lane:L,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},io(p)?kr(y,T):(T=Fe(p,y,T,L),T!==null&&(ea(T,p,L),zo(T,y,L)))}function xc(p,y,T){var L=ma();Sr(p,y,T,L)}function Sr(p,y,T,L){var G={lane:L,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(io(p))kr(y,G);else{var k=p.alternate;if(p.lanes===0&&(k===null||k.lanes===0)&&(k=y.lastRenderedReducer,k!==null))try{var oe=y.lastRenderedState,Me=k(oe,T);if(G.hasEagerState=!0,G.eagerState=Me,tr(Me,oe))return ae(p,y,G,0),Bn===null&&ze(),!1}catch{}finally{}if(T=Fe(p,y,G,L),T!==null)return ea(T,p,L),zo(T,y,L),!0}return!1}function gc(p,y,T,L){if(L={lane:2,revertLane:Re(),action:L,hasEagerState:!1,eagerState:null,next:null},io(p)){if(y)throw Error(a(479))}else y=Fe(p,T,L,2),y!==null&&ea(y,p,2)}function io(p){var y=p.alternate;return p===Nn||y!==null&&y===Nn}function kr(p,y){Gs=Nr=!0;var T=p.pending;T===null?y.next=y:(y.next=T.next,T.next=y),p.pending=y}function zo(p,y,T){if((T&4194176)!==0){var L=y.lanes;L&=p.pendingLanes,T|=L,y.lanes=T,W(p,T)}}function Us(p,y,T,L){y=p.memoizedState,T=T(L,y),T=T==null?y:Cc({},y,T),p.memoizedState=T,p.lanes===0&&(p.updateQueue.baseState=T)}function Br(p,y,T,L,G,k,oe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(L,k,oe):y.prototype&&y.prototype.isPureReactComponent?!lt(T,L)||!lt(G,k):!0}function Go(p,y,T,L){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(T,L),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(T,L),y.state!==p&&Nh.enqueueReplaceState(y,y.state,null)}function da(p,y){var T=y;if("ref"in y){T={};for(var L in y)L!=="ref"&&(T[L]=y[L])}if(p=p.defaultProps){T===y&&(T=Cc({},T));for(var G in p)T[G]===void 0&&(T[G]=p[G])}return T}function ao(p,y){try{var T=p.onUncaughtError;T(y.value,{componentStack:y.stack})}catch(L){setTimeout(function(){throw L})}}function vc(p,y,T){try{var L=p.onCaughtError;L(T.value,{componentStack:T.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function Fr(p,y,T){return T=ke(T),T.tag=3,T.payload={element:null},T.callback=function(){ao(p,y)},T}function ro(p){return p=ke(p),p.tag=3,p}function Mi(p,y,T,L){var G=T.type.getDerivedStateFromError;if(typeof G=="function"){var k=L.value;p.payload=function(){return G(k)},p.callback=function(){vc(y,T,L)}}var oe=T.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(p.callback=function(){vc(y,T,L),typeof G!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var Me=L.stack;this.componentDidCatch(L.value,{componentStack:Me!==null?Me:""})})}function Hf(p,y,T,L,G){if(T.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){if(y=T.alternate,y!==null&&bc(y,T,G,!0),T=or.current,T!==null){switch(T.tag){case 13:return Cr===null?Ra():T.alternate===null&&Zn===0&&(Zn=3),T.flags&=-257,T.flags|=65536,T.lanes=G,L===Ah?T.flags|=16384:(y=T.updateQueue,y===null?T.updateQueue=new Set([L]):y.add(L),rh(p,L,G)),!1;case 22:return T.flags|=65536,L===Ah?T.flags|=16384:(y=T.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([L])},T.updateQueue=y):(T=y.retryQueue,T===null?y.retryQueue=new Set([L]):T.add(L)),rh(p,L,G)),!1}throw Error(a(435,T.tag))}return rh(p,L,G),Ra(),!1}if(Jn)return y=or.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=G,L!==Xd&&(p=Error(a(422),{cause:L}),St(le(p,T)))):(L!==Xd&&(y=Error(a(423),{cause:L}),St(le(y,T))),p=p.current.alternate,p.flags|=65536,G&=-G,p.lanes|=G,L=le(L,T),G=Fr(p.stateNode,L,G),he(p,G),Zn!==4&&(Zn=2)),!1;var k=Error(a(520),{cause:L});if(k=le(k,T),Ou===null?Ou=[k]:Ou.push(k),Zn!==4&&(Zn=2),y===null)return!0;L=le(L,T),T=y;do{switch(T.tag){case 3:return T.flags|=65536,p=G&-G,T.lanes|=p,p=Fr(T.stateNode,L,p),he(T,p),!1;case 1:if(y=T.type,k=T.stateNode,(T.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(dr===null||!dr.has(k))))return T.flags|=65536,G&=-G,T.lanes|=G,G=ro(G),Mi(G,p,T,L),he(T,G),!1}T=T.return}while(T!==null);return!1}function Xs(p,y,T,L){y.child=p===null?cp(y,null,T,L):Xl(y,p.child,T,L)}function yc(p,y,T,L,G){T=T.render;var k=y.ref;if("ref"in L){var oe={};for(var Me in L)Me!=="ref"&&(oe[Me]=L[Me])}else oe=L;return Mc(y),L=ce(p,y,T,oe,k,G),Me=it(),p!==null&&!ri?(Ct(p,y,G),Io(p,y,G)):(Jn&&Me&&ee(y),y.flags|=1,Xs(p,y,L,G),y.child)}function gd(p,y,T,L,G){if(p===null){var k=T.type;return typeof k=="function"&&!qo(k)&&k.defaultProps===void 0&&T.compare===null?(y.tag=15,y.type=k,ou(p,y,k,L,G)):(p=wr(T.type,null,L,y,y.mode,G),p.ref=y.ref,p.return=y,y.child=p)}if(k=p.child,!om(p,G)){var oe=k.memoizedProps;if(T=T.compare,T=T!==null?T:lt,T(oe,L)&&p.ref===y.ref)return Io(p,y,G)}return y.flags|=1,p=ta(k,L),p.ref=y.ref,p.return=y,y.child=p}function ou(p,y,T,L,G){if(p!==null){var k=p.memoizedProps;if(lt(k,L)&&p.ref===y.ref)if(ri=!1,y.pendingProps=L=k,om(p,G))(p.flags&131072)!==0&&(ri=!0);else return y.lanes=p.lanes,Io(p,y,G)}return _r(p,y,T,L,G)}function ki(p,y,T){var L=y.pendingProps,G=L.children,k=(y.stateNode._pendingVisibility&2)!==0,oe=p!==null?p.memoizedState:null;if(fi(p,y),L.mode==="hidden"||k){if((y.flags&128)!==0){if(L=oe!==null?oe.baseLanes|T:T,p!==null){for(G=y.child=p.child,k=0;G!==null;)k=k|G.lanes|G.childLanes,G=G.sibling;y.childLanes=k&~L}else y.childLanes=0,y.child=null;return Aa(p,y,L,T)}if((T&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},p!==null&&Wf(y,oe!==null?oe.cachePool:null),oe!==null?Ss(y,oe):ni(),Fs(y);else return y.lanes=y.childLanes=536870912,Aa(p,y,oe!==null?oe.baseLanes|T:T,T)}else oe!==null?(Wf(y,oe.cachePool),Ss(y,oe),Ts(),y.memoizedState=null):(p!==null&&Wf(y,null),ni(),Ts());return Xs(p,y,G,T),y.child}function Aa(p,y,T,L){var G=jl();return G=G===null?null:{parent:po?us._currentValue:us._currentValue2,pool:G},y.memoizedState={baseLanes:T,cachePool:G},p!==null&&Wf(y,null),ni(),Fs(y),p!==null&&bc(p,y,L,!0),null}function fi(p,y){var T=y.ref;if(T===null)p!==null&&p.ref!==null&&(y.flags|=2097664);else{if(typeof T!="function"&&typeof T!="object")throw Error(a(284));(p===null||p.ref!==T)&&(y.flags|=2097664)}}function _r(p,y,T,L,G){return Mc(y),T=ce(p,y,T,L,void 0,G),L=it(),p!==null&&!ri?(Ct(p,y,G),Io(p,y,G)):(Jn&&L&&ee(y),y.flags|=1,Xs(p,y,T,G),y.child)}function vd(p,y,T,L,G,k){return Mc(y),y.updateQueue=null,T=Ye(y,L,T,G),_e(p),L=it(),p!==null&&!ri?(Ct(p,y,k),Io(p,y,k)):(Jn&&L&&ee(y),y.flags|=1,Xs(p,y,T,k),y.child)}function nm(p,y,T,L,G){if(Mc(y),y.stateNode===null){var k=Uc,oe=T.contextType;typeof oe=="object"&&oe!==null&&(k=Bi(oe)),k=new T(L,k),y.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Nh,y.stateNode=k,k._reactInternals=y,k=y.stateNode,k.props=L,k.state=y.memoizedState,k.refs={},Dt(y),oe=T.contextType,k.context=typeof oe=="object"&&oe!==null?Bi(oe):Uc,k.state=y.memoizedState,oe=T.getDerivedStateFromProps,typeof oe=="function"&&(Us(y,T,oe,L),k.state=y.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(oe=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),oe!==k.state&&Nh.enqueueReplaceState(k,k.state,null),ut(y,L,k,G),Ce(),k.state=y.memoizedState),typeof k.componentDidMount=="function"&&(y.flags|=4194308),L=!0}else if(p===null){k=y.stateNode;var Me=y.memoizedProps,Oe=da(T,Me);k.props=Oe;var xt=k.context,Pt=T.contextType;oe=Uc,typeof Pt=="object"&&Pt!==null&&(oe=Bi(Pt));var Vt=T.getDerivedStateFromProps;Pt=typeof Vt=="function"||typeof k.getSnapshotBeforeUpdate=="function",Me=y.pendingProps!==Me,Pt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Me||xt!==oe)&&Go(y,k,L,oe),$o=!1;var Wt=y.memoizedState;k.state=Wt,ut(y,L,k,G),Ce(),xt=y.memoizedState,Me||Wt!==xt||$o?(typeof Vt=="function"&&(Us(y,T,Vt,L),xt=y.memoizedState),(Oe=$o||Br(y,T,Oe,L,Wt,xt,oe))?(Pt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(y.flags|=4194308)):(typeof k.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=L,y.memoizedState=xt),k.props=L,k.state=xt,k.context=oe,L=Oe):(typeof k.componentDidMount=="function"&&(y.flags|=4194308),L=!1)}else{k=y.stateNode,Nt(p,y),oe=y.memoizedProps,Pt=da(T,oe),k.props=Pt,Vt=y.pendingProps,Wt=k.context,xt=T.contextType,Oe=Uc,typeof xt=="object"&&xt!==null&&(Oe=Bi(xt)),Me=T.getDerivedStateFromProps,(xt=typeof Me=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(oe!==Vt||Wt!==Oe)&&Go(y,k,L,Oe),$o=!1,Wt=y.memoizedState,k.state=Wt,ut(y,L,k,G),Ce();var _n=y.memoizedState;oe!==Vt||Wt!==_n||$o||p!==null&&p.dependencies!==null&&wl(p.dependencies)?(typeof Me=="function"&&(Us(y,T,Me,L),_n=y.memoizedState),(Pt=$o||Br(y,T,Pt,L,Wt,_n,Oe)||p!==null&&p.dependencies!==null&&wl(p.dependencies))?(xt||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(L,_n,Oe),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(L,_n,Oe)),typeof k.componentDidUpdate=="function"&&(y.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof k.componentDidUpdate!="function"||oe===p.memoizedProps&&Wt===p.memoizedState||(y.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||oe===p.memoizedProps&&Wt===p.memoizedState||(y.flags|=1024),y.memoizedProps=L,y.memoizedState=_n),k.props=L,k.state=_n,k.context=Oe,L=Pt):(typeof k.componentDidUpdate!="function"||oe===p.memoizedProps&&Wt===p.memoizedState||(y.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||oe===p.memoizedProps&&Wt===p.memoizedState||(y.flags|=1024),L=!1)}return k=L,fi(p,y),L=(y.flags&128)!==0,k||L?(k=y.stateNode,T=L&&typeof T.getDerivedStateFromError!="function"?null:k.render(),y.flags|=1,p!==null&&L?(y.child=Xl(y,p.child,null,G),y.child=Xl(y,null,T,G)):Xs(p,y,T,G),y.memoizedState=k.state,p=y.child):p=Io(p,y,G),p}function cg(p,y,T,L){return nt(),y.flags|=256,Xs(p,y,T,L),y.child}function sm(p){return{baseLanes:p,cachePool:mg()}}function im(p,y,T){return p=p!==null?p.childLanes&~T:0,y&&(p|=Ga),p}function ug(p,y,T){var L=y.pendingProps,G=!1,k=(y.flags&128)!==0,oe;if((oe=k)||(oe=p!==null&&p.memoizedState===null?!1:(mi.current&2)!==0),oe&&(G=!0,y.flags&=-129),oe=(y.flags&32)!==0,y.flags&=-33,p===null){if(Jn){if(G?cs(y):Ts(),Jn){var Me=Xi,Oe;(Oe=Me)&&(Me=Ig(Me,Tr),Me!==null?(y.memoizedState={dehydrated:Me,treeContext:Wr!==null?{id:vo,overflow:Er}:null,retryLane:536870912},Oe=t(18,null,null,0),Oe.stateNode=Me,Oe.return=y,y.child=Oe,sa=y,Xi=null,Oe=!0):Oe=!1),Oe||je(y)}if(Me=y.memoizedState,Me!==null&&(Me=Me.dehydrated,Me!==null))return Gd(Me)?y.lanes=16:y.lanes=536870912,null;sn(y)}return Me=L.children,L=L.fallback,G?(Ts(),G=y.mode,Me=am({mode:"hidden",children:Me},G),L=Wo(L,G,T,null),Me.return=y,L.return=y,Me.sibling=L,y.child=Me,G=y.child,G.memoizedState=sm(T),G.childLanes=im(p,oe,T),y.memoizedState=aa,L):(cs(y),yd(y,Me))}if(Oe=p.memoizedState,Oe!==null&&(Me=Oe.dehydrated,Me!==null)){if(k)y.flags&256?(cs(y),y.flags&=-257,y=rm(p,y,T)):y.memoizedState!==null?(Ts(),y.child=p.child,y.flags|=128,y=null):(Ts(),G=L.fallback,Me=y.mode,L=am({mode:"visible",children:L.children},Me),G=Wo(G,Me,T,null),G.flags|=2,L.return=y,G.return=y,L.sibling=G,y.child=L,Xl(y,p.child,null,T),L=y.child,L.memoizedState=sm(T),L.childLanes=im(p,oe,T),y.memoizedState=aa,y=G);else if(cs(y),Gd(Me))oe=Dg(Me).digest,L=Error(a(419)),L.stack="",L.digest=oe,St({value:L,source:null,stack:null}),y=rm(p,y,T);else if(ri||bc(p,y,T,!1),oe=(T&p.childLanes)!==0,ri||oe){if(oe=Bn,oe!==null){if(L=T&-T,(L&42)!==0)L=1;else switch(L){case 2:L=1;break;case 8:L=4;break;case 32:L=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:L=64;break;case 268435456:L=134217728;break;default:L=0}if(L=(L&(oe.suspendedLanes|T))!==0?0:L,L!==0&&L!==Oe.retryLane)throw Oe.retryLane=L,We(p,L),ea(oe,p,L),e1}vh(Me)||Ra(),y=rm(p,y,T)}else vh(Me)?(y.flags|=128,y.child=p.child,y=Tc.bind(null,p),Fb(Me,y),y=null):(p=Oe.treeContext,pa&&(Xi=Og(Me),sa=y,Jn=!0,ir=null,Tr=!1,p!==null&&(nr[sr++]=vo,nr[sr++]=Er,nr[sr++]=Wr,vo=p.id,Er=p.overflow,Wr=y)),y=yd(y,L.children),y.flags|=4096);return y}return G?(Ts(),G=L.fallback,Me=y.mode,Oe=p.child,k=Oe.sibling,L=ta(Oe,{mode:"hidden",children:L.children}),L.subtreeFlags=Oe.subtreeFlags&31457280,k!==null?G=ta(k,G):(G=Wo(G,Me,T,null),G.flags|=2),G.return=y,L.return=y,L.sibling=G,y.child=L,L=G,G=y.child,Me=p.child.memoizedState,Me===null?Me=sm(T):(Oe=Me.cachePool,Oe!==null?(k=po?us._currentValue:us._currentValue2,Oe=Oe.parent!==k?{parent:k,pool:k}:Oe):Oe=mg(),Me={baseLanes:Me.baseLanes|T,cachePool:Oe}),G.memoizedState=Me,G.childLanes=im(p,oe,T),y.memoizedState=aa,L):(cs(y),T=p.child,p=T.sibling,T=ta(T,{mode:"visible",children:L.children}),T.return=y,T.sibling=null,p!==null&&(oe=y.deletions,oe===null?(y.deletions=[p],y.flags|=16):oe.push(p)),y.child=T,y.memoizedState=null,T)}function yd(p,y){return y=am({mode:"visible",children:y},p.mode),y.return=p,p.child=y}function am(p,y){return oh(p,y,0,null)}function rm(p,y,T){return Xl(y,p.child,null,T),p=yd(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function dg(p,y,T){p.lanes|=y;var L=p.alternate;L!==null&&(L.lanes|=y),lm(p.return,y,T)}function qf(p,y,T,L,G){var k=p.memoizedState;k===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:L,tail:T,tailMode:G}:(k.isBackwards=y,k.rendering=null,k.renderingStartTime=0,k.last=L,k.tail=T,k.tailMode=G)}function fg(p,y,T){var L=y.pendingProps,G=L.revealOrder,k=L.tail;if(Xs(p,y,L.children,T),L=mi.current,(L&2)!==0)L=L&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&dg(p,T,y);else if(p.tag===19)dg(p,T,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}L&=1}switch(j(mi,L),G){case"forwards":for(T=y.child,G=null;T!==null;)p=T.alternate,p!==null&&Hn(p)===null&&(G=T),T=T.sibling;T=G,T===null?(G=y.child,y.child=null):(G=T.sibling,T.sibling=null),qf(y,!1,G,T,k);break;case"backwards":for(T=null,G=y.child,y.child=null;G!==null;){if(p=G.alternate,p!==null&&Hn(p)===null){y.child=G;break}p=G.sibling,G.sibling=T,T=G,G=p}qf(y,!0,T,null,k);break;case"together":qf(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Io(p,y,T){if(p!==null&&(y.dependencies=p.dependencies),cr|=y.lanes,(T&y.childLanes)===0)if(p!==null){if(bc(p,y,T,!1),(T&y.childLanes)===0)return null}else return null;if(p!==null&&y.child!==p.child)throw Error(a(153));if(y.child!==null){for(p=y.child,T=ta(p,p.pendingProps),y.child=T,T.return=y;p.sibling!==null;)p=p.sibling,T=T.sibling=ta(p,p.pendingProps),T.return=y;T.sibling=null}return y.child}function om(p,y){return(p.lanes&y)!==0?!0:(p=p.dependencies,!!(p!==null&&wl(p)))}function Ib(p,y,T){switch(y.tag){case 3:me(y,y.stateNode.containerInfo),_l(y,us,p.memoizedState.cache),nt();break;case 27:case 5:fe(y);break;case 4:me(y,y.stateNode.containerInfo);break;case 10:_l(y,y.type,y.memoizedProps.value);break;case 13:var L=y.memoizedState;if(L!==null)return L.dehydrated!==null?(cs(y),y.flags|=128,null):(T&y.child.childLanes)!==0?ug(p,y,T):(cs(y),p=Io(p,y,T),p!==null?p.sibling:null);cs(y);break;case 19:var G=(p.flags&128)!==0;if(L=(T&y.childLanes)!==0,L||(bc(p,y,T,!1),L=(T&y.childLanes)!==0),G){if(L)return fg(p,y,T);y.flags|=128}if(G=y.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),j(mi,mi.current),L)break;return null;case 22:case 23:return y.lanes=0,ki(p,y,T);case 24:_l(y,us,p.memoizedState.cache)}return Io(p,y,T)}function hg(p,y,T){if(p!==null)if(p.memoizedProps!==y.pendingProps)ri=!0;else{if(!om(p,T)&&(y.flags&128)===0)return ri=!1,Ib(p,y,T);ri=(p.flags&131072)!==0}else ri=!1,Jn&&(y.flags&1048576)!==0&&H(y,Hd,y.index);switch(y.lanes=0,y.tag){case 16:e:{p=y.pendingProps;var L=y.elementType,G=L._init;if(L=G(L._payload),y.type=L,typeof L=="function")qo(L)?(p=da(L,p),y.tag=1,y=nm(null,y,L,p,T)):(y.tag=0,y=_r(null,y,L,p,T));else{if(L!=null){if(G=L.$$typeof,G===_u){y.tag=11,y=yc(null,y,L,p,T);break e}else if(G===Nd){y.tag=14,y=gd(null,y,L,p,T);break e}}throw y=o(L)||L,Error(a(306,y,""))}}return y;case 0:return _r(p,y,y.type,y.pendingProps,T);case 1:return L=y.type,G=da(L,y.pendingProps),nm(p,y,L,G,T);case 3:e:{if(me(y,y.stateNode.containerInfo),p===null)throw Error(a(387));var k=y.pendingProps;G=y.memoizedState,L=G.element,Nt(p,y),ut(y,k,null,T);var oe=y.memoizedState;if(k=oe.cache,_l(y,us,k),k!==G.cache&&cm(y,[us],T,!0),Ce(),k=oe.element,pa&&G.isDehydrated)if(G={element:k,isDehydrated:!1,cache:oe.cache},y.updateQueue.baseState=G,y.memoizedState=G,y.flags&256){y=cg(p,y,k,T);break e}else if(k!==L){L=le(Error(a(424)),y),St(L),y=cg(p,y,k,T);break e}else for(pa&&(Xi=Pg(y.stateNode.containerInfo),sa=y,Jn=!0,ir=null,Tr=!0),T=cp(y,null,k,T),y.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(nt(),k===L){y=Io(p,y,T);break e}Xs(p,y,k,T)}y=y.child}return y;case 26:if(er)return fi(p,y),p===null?(T=_h(y.type,null,y.pendingProps,null))?y.memoizedState=T:Jn||(y.stateNode=Hb(y.type,y.pendingProps,Yr.current,y)):y.memoizedState=_h(y.type,p.memoizedProps,y.pendingProps,p.memoizedState),null;case 27:if(Hi)return fe(y),p===null&&Hi&&Jn&&(L=y.stateNode=ap(y.type,y.pendingProps,Yr.current,Ui.current,!1),sa=y,Tr=!0,Xi=yh(L)),L=y.pendingProps.children,p!==null||Jn?Xs(p,y,L,T):y.child=Xl(y,null,L,T),fi(p,y),y.child;case 5:return p===null&&Jn&&(Hg(y.type,y.pendingProps,Ui.current),(G=L=Xi)&&(L=zg(L,y.type,y.pendingProps,Tr),L!==null?(y.stateNode=L,sa=y,Xi=yh(L),Tr=!1,G=!0):G=!1),G||je(y)),fe(y),G=y.type,k=y.pendingProps,oe=p!==null?p.memoizedProps:null,L=k.children,Bl(G,k)?L=null:oe!==null&&Bl(G,oe)&&(y.flags|=32),y.memoizedState!==null&&(G=ce(p,y,at,null,null,T),po?vn._currentValue=G:vn._currentValue2=G),fi(p,y),Xs(p,y,L,T),y.child;case 6:return p===null&&Jn&&(qg(y.pendingProps,Ui.current),(p=T=Xi)&&(T=Gg(T,y.pendingProps,Tr),T!==null?(y.stateNode=T,sa=y,Xi=null,p=!0):p=!1),p||je(y)),null;case 13:return ug(p,y,T);case 4:return me(y,y.stateNode.containerInfo),L=y.pendingProps,p===null?y.child=Xl(y,null,L,T):Xs(p,y,L,T),y.child;case 11:return yc(p,y,y.type,y.pendingProps,T);case 7:return Xs(p,y,y.pendingProps,T),y.child;case 8:return Xs(p,y,y.pendingProps.children,T),y.child;case 12:return Xs(p,y,y.pendingProps.children,T),y.child;case 10:return L=y.pendingProps,_l(y,y.type,L.value),Xs(p,y,L.children,T),y.child;case 9:return G=y.type._context,L=y.pendingProps.children,Mc(y),G=Bi(G),L=L(G),y.flags|=1,Xs(p,y,L,T),y.child;case 14:return gd(p,y,y.type,y.pendingProps,T);case 15:return ou(p,y,y.type,y.pendingProps,T);case 19:return fg(p,y,T);case 22:return ki(p,y,T);case 24:return Mc(y),L=Bi(us),p===null?(G=jl(),G===null&&(G=Bn,k=Xf(),G.pooledCache=k,k.refCount++,k!==null&&(G.pooledCacheLanes|=T),G=k),y.memoizedState={parent:L,cache:G},Dt(y),_l(y,us,G)):((p.lanes&T)!==0&&(Nt(p,y),ut(y,null,null,T),Ce()),G=p.memoizedState,k=y.memoizedState,G.parent!==L?(G={parent:L,cache:L},y.memoizedState=G,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=G),_l(y,us,L)):(L=k.cache,_l(y,us,L),L!==G.cache&&cm(y,[us],T,!0))),Xs(p,y,y.pendingProps.children,T),y.child;case 29:throw y.pendingProps}throw Error(a(156,y.tag))}function _l(p,y,T){po?(j(Oa,y._currentValue),y._currentValue=T):(j(Oa,y._currentValue2),y._currentValue2=T)}function ko(p){var y=Oa.current;po?p._currentValue=y:p._currentValue2=y,S(Oa)}function lm(p,y,T){for(;p!==null;){var L=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,L!==null&&(L.childLanes|=y)):L!==null&&(L.childLanes&y)!==y&&(L.childLanes|=y),p===T)break;p=p.return}}function cm(p,y,T,L){var G=p.child;for(G!==null&&(G.return=p);G!==null;){var k=G.dependencies;if(k!==null){var oe=G.child;k=k.firstContext;e:for(;k!==null;){var Me=k;k=G;for(var Oe=0;Oe<y.length;Oe++)if(Me.context===y[Oe]){k.lanes|=T,Me=k.alternate,Me!==null&&(Me.lanes|=T),lm(k.return,T,p),L||(oe=null);break e}k=Me.next}}else if(G.tag===18){if(oe=G.return,oe===null)throw Error(a(341));oe.lanes|=T,k=oe.alternate,k!==null&&(k.lanes|=T),lm(oe,T,p),oe=null}else oe=G.child;if(oe!==null)oe.return=G;else for(oe=G;oe!==null;){if(oe===p){oe=null;break}if(G=oe.sibling,G!==null){G.return=oe.return,oe=G;break}oe=oe.return}G=oe}}function bc(p,y,T,L){p=null;for(var G=y,k=!1;G!==null;){if(!k){if((G.flags&524288)!==0)k=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var oe=G.alternate;if(oe===null)throw Error(a(387));if(oe=oe.memoizedProps,oe!==null){var Me=G.type;tr(G.pendingProps.value,oe.value)||(p!==null?p.push(Me):p=[Me])}}else if(G===Nu.current){if(oe=G.alternate,oe===null)throw Error(a(387));oe.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(p!==null?p.push(vn):p=[vn])}G=G.return}p!==null&&cm(y,p,T,L),y.flags|=262144}function wl(p){for(p=p.firstContext;p!==null;){var y=p.context;if(!tr(po?y._currentValue:y._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function Mc(p){Yl=p,Js=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Bi(p){return um(Yl,p)}function bd(p,y){return Yl===null&&Mc(p),um(p,y)}function um(p,y){var T=po?y._currentValue:y._currentValue2;if(y={context:y,memoizedValue:T,next:null},Js===null){if(p===null)throw Error(a(308));Js=y,p.dependencies={lanes:0,firstContext:y},p.flags|=524288}else Js=Js.next=y;return T}function Xf(){return{controller:new t1,data:new Map,refCount:0}}function lu(p){p.refCount--,p.refCount===0&&tl(zc,function(){p.controller.abort()})}function jl(){var p=nl.current;return p!==null?p:Bn.pooledCache}function Wf(p,y){y===null?j(nl,nl.current):j(nl,y.pool)}function mg(){var p=jl();return p===null?null:{parent:po?us._currentValue:us._currentValue2,pool:p}}function Za(p){p.flags|=4}function dm(p,y){if(p!==null&&p.child===y.child)return!1;if((y.flags&16)!==0)return!0;for(p=y.child;p!==null;){if((p.flags&13878)!==0||(p.subtreeFlags&13878)!==0)return!0;p=p.sibling}return!1}function Yf(p,y,T,L){if(Vi)for(T=y.child;T!==null;){if(T.tag===5||T.tag===6)mo(p,T.stateNode);else if(!(T.tag===4||Hi&&T.tag===27)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===y)break;for(;T.sibling===null;){if(T.return===null||T.return===y)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else if(Qa)for(var G=y.child;G!==null;){if(G.tag===5){var k=G.stateNode;T&&L&&(k=Xm(k,G.type,G.memoizedProps)),mo(p,k)}else if(G.tag===6)k=G.stateNode,T&&L&&(k=Wm(k,G.memoizedProps)),mo(p,k);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)k=G.child,k!==null&&(k.return=G),Yf(p,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===y)break;for(;G.sibling===null;){if(G.return===null||G.return===y)return;G=G.return}G.sibling.return=G.return,G=G.sibling}}function cu(p,y,T,L){if(Qa)for(var G=y.child;G!==null;){if(G.tag===5){var k=G.stateNode;T&&L&&(k=Xm(k,G.type,G.memoizedProps)),Hm(p,k)}else if(G.tag===6)k=G.stateNode,T&&L&&(k=Wm(k,G.memoizedProps)),Hm(p,k);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)k=G.child,k!==null&&(k.return=G),cu(p,G,!(G.memoizedProps!==null&&G.memoizedProps.mode==="manual"),!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===y)break;for(;G.sibling===null;){if(G.return===null||G.return===y)return;G=G.return}G.sibling.return=G.return,G=G.sibling}}function uu(p,y){if(Qa&&dm(p,y)){p=y.stateNode;var T=p.containerInfo,L=gh();cu(L,y,!1,!1),p.pendingChildren=L,Za(y),Rg(T,L)}}function fm(p,y,T,L){if(Vi)p.memoizedProps!==L&&Za(y);else if(Qa){var G=p.stateNode,k=p.memoizedProps;if((p=dm(p,y))||k!==L){var oe=Ui.current;k=Vm(G,T,k,L,!p,null),k===G?y.stateNode=G:(Zo(k,T,L,oe)&&Za(y),y.stateNode=k,p?Yf(k,y,!1,!1):Za(y))}else y.stateNode=G}}function du(p,y,T){if(Ag(y,T)){if(p.flags|=16777216,!Ko(y,T))if(Ed())p.flags|=8192;else throw Oc=Ah,lp}else p.flags&=-16777217}function hm(p,y){if(Xg(y)){if(p.flags|=16777216,!sp(y))if(Ed())p.flags|=8192;else throw Oc=Ah,lp}else p.flags&=-16777217}function Md(p,y){y!==null&&(p.flags|=4),p.flags&16384&&(y=p.tag!==22?z():536870912,p.lanes|=y,il|=y)}function Sc(p,y){if(!Jn)switch(p.tailMode){case"hidden":y=p.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?p.tail=null:T.sibling=null;break;case"collapsed":T=p.tail;for(var L=null;T!==null;)T.alternate!==null&&(L=T),T=T.sibling;L===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:L.sibling=null}}function Ps(p){var y=p.alternate!==null&&p.alternate.child===p.child,T=0,L=0;if(y)for(var G=p.child;G!==null;)T|=G.lanes|G.childLanes,L|=G.subtreeFlags&31457280,L|=G.flags&31457280,G.return=p,G=G.sibling;else for(G=p.child;G!==null;)T|=G.lanes|G.childLanes,L|=G.subtreeFlags,L|=G.flags,G.return=p,G=G.sibling;return p.subtreeFlags|=L,p.childLanes=T,y}function pg(p,y,T){var L=y.pendingProps;switch(ue(y),y.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(y),null;case 1:return Ps(y),null;case 3:return T=y.stateNode,L=null,p!==null&&(L=p.memoizedState.cache),y.memoizedState.cache!==L&&(y.flags|=2048),ko(us),be(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(p===null||p.child===null)&&(Ve(y)?Za(y):p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,ir!==null&&(Fo(ir),ir=null))),uu(p,y),Ps(y),null;case 26:if(er){T=y.type;var G=y.memoizedState;return p===null?(Za(y),G!==null?(Ps(y),hm(y,G)):(Ps(y),du(y,T,L))):G?G!==p.memoizedState?(Za(y),Ps(y),hm(y,G)):(Ps(y),y.flags&=-16777217):(Vi?p.memoizedProps!==L&&Za(y):fm(p,y,T,L),Ps(y),du(y,T,L)),null}case 27:if(Hi){if(ge(y),T=Yr.current,G=y.type,p!==null&&y.stateNode!=null)Vi?p.memoizedProps!==L&&Za(y):fm(p,y,G,L);else{if(!L){if(y.stateNode===null)throw Error(a(166));return Ps(y),null}p=Ui.current,Ve(y)?Qe(y,p):(p=ap(G,L,T,p,!0),y.stateNode=p,Za(y))}return Ps(y),null}case 5:if(ge(y),T=y.type,p!==null&&y.stateNode!=null)fm(p,y,T,L);else{if(!L){if(y.stateNode===null)throw Error(a(166));return Ps(y),null}p=Ui.current,Ve(y)?Qe(y,p):(G=Dm(T,L,Yr.current,p,y),Yf(G,y,!1,!1),y.stateNode=G,Zo(G,T,L,p)&&Za(y))}return Ps(y),du(y,y.type,y.pendingProps),null;case 6:if(p&&y.stateNode!=null)T=p.memoizedProps,Vi?T!==L&&Za(y):Qa&&(T!==L?(y.stateNode=dh(L,Yr.current,Ui.current,y),Za(y)):y.stateNode=p.stateNode);else{if(typeof L!="string"&&y.stateNode===null)throw Error(a(166));if(p=Yr.current,T=Ui.current,Ve(y)){if(!pa)throw Error(a(176));if(p=y.stateNode,T=y.memoizedProps,L=null,G=sa,G!==null)switch(G.tag){case 27:case 5:L=G.memoizedProps}kg(p,T,y,L)||je(y)}else y.stateNode=dh(L,p,T,y)}return Ps(y),null;case 13:if(L=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(G=Ve(y),L!==null&&L.dehydrated!==null){if(p===null){if(!G)throw Error(a(318));if(!pa)throw Error(a(344));if(G=y.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(a(317));ju(G,y)}else nt(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Ps(y),G=!1}else ir!==null&&(Fo(ir),ir=null),G=!0;if(!G)return y.flags&256?(sn(y),y):(sn(y),null)}if(sn(y),(y.flags&128)!==0)return y.lanes=T,y;if(T=L!==null,p=p!==null&&p.memoizedState!==null,T){L=y.child,G=null,L.alternate!==null&&L.alternate.memoizedState!==null&&L.alternate.memoizedState.cachePool!==null&&(G=L.alternate.memoizedState.cachePool.pool);var k=null;L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(k=L.memoizedState.cachePool.pool),k!==G&&(L.flags|=2048)}return T!==p&&T&&(y.child.flags|=8192),Md(y,y.updateQueue),Ps(y),null;case 4:return be(),uu(p,y),p===null&&Pm(y.stateNode.containerInfo),Ps(y),null;case 10:return ko(y.type),Ps(y),null;case 19:if(S(mi),G=y.memoizedState,G===null)return Ps(y),null;if(L=(y.flags&128)!==0,k=G.rendering,k===null)if(L)Sc(G,!1);else{if(Zn!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(k=Hn(p),k!==null){for(y.flags|=128,Sc(G,!1),p=k.updateQueue,y.updateQueue=p,Md(y,p),y.subtreeFlags=0,p=T,T=y.child;T!==null;)Xo(T,p),T=T.sibling;return j(mi,mi.current&1|2),y.child}p=p.sibling}G.tail!==null&&qi()>Hs&&(y.flags|=128,L=!0,Sc(G,!1),y.lanes=4194304)}else{if(!L)if(p=Hn(k),p!==null){if(y.flags|=128,L=!0,p=p.updateQueue,y.updateQueue=p,Md(y,p),Sc(G,!0),G.tail===null&&G.tailMode==="hidden"&&!k.alternate&&!Jn)return Ps(y),null}else 2*qi()-G.renderingStartTime>Hs&&T!==536870912&&(y.flags|=128,L=!0,Sc(G,!1),y.lanes=4194304);G.isBackwards?(k.sibling=y.child,y.child=k):(p=G.last,p!==null?p.sibling=k:y.child=k,G.last=k)}return G.tail!==null?(y=G.tail,G.rendering=y,G.tail=y.sibling,G.renderingStartTime=qi(),y.sibling=null,p=mi.current,j(mi,L?p&1|2:p&1),y):(Ps(y),null);case 22:case 23:return sn(y),si(),L=y.memoizedState!==null,p!==null?p.memoizedState!==null!==L&&(y.flags|=8192):L&&(y.flags|=8192),L?(T&536870912)!==0&&(y.flags&128)===0&&(Ps(y),y.subtreeFlags&6&&(y.flags|=8192)):Ps(y),T=y.updateQueue,T!==null&&Md(y,T.retryQueue),T=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),L=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(L=y.memoizedState.cachePool.pool),L!==T&&(y.flags|=2048),p!==null&&S(nl),null;case 24:return T=null,p!==null&&(T=p.memoizedState.cache),y.memoizedState.cache!==T&&(y.flags|=2048),ko(us),Ps(y),null;case 25:return null}throw Error(a(156,y.tag))}function xg(p,y){switch(ue(y),y.tag){case 1:return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return ko(us),be(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 26:case 27:case 5:return ge(y),null;case 13:if(sn(y),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(a(340));nt()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return S(mi),null;case 4:return be(),null;case 10:return ko(y.type),null;case 22:case 23:return sn(y),si(),p!==null&&S(nl),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 24:return ko(us),null;case 25:return null;default:return null}}function mm(p,y){switch(ue(y),y.tag){case 3:ko(us),be();break;case 26:case 27:case 5:ge(y);break;case 4:be();break;case 13:sn(y);break;case 19:S(mi);break;case 10:ko(y.type);break;case 22:case 23:sn(y),si(),p!==null&&S(nl);break;case 24:ko(us)}}function Sd(p,y){try{var T=y.updateQueue,L=T!==null?T.lastEffect:null;if(L!==null){var G=L.next;T=G;do{if((T.tag&p)===p){L=void 0;var k=T.create,oe=T.inst;L=k(),oe.destroy=L}T=T.next}while(T!==G)}}catch(Me){Fn(y,y.return,Me)}}function El(p,y,T){try{var L=y.updateQueue,G=L!==null?L.lastEffect:null;if(G!==null){var k=G.next;L=k;do{if((L.tag&p)===p){var oe=L.inst,Me=oe.destroy;if(Me!==void 0){oe.destroy=void 0,G=y;var Oe=T;try{Me()}catch(xt){Fn(G,Oe,xt)}}}L=L.next}while(L!==k)}}catch(xt){Fn(y,y.return,xt)}}function gg(p){var y=p.updateQueue;if(y!==null){var T=p.stateNode;try{we(y,T)}catch(L){Fn(p,p.return,L)}}}function vg(p,y,T){T.props=da(p.type,p.memoizedProps),T.state=p.memoizedState;try{T.componentWillUnmount()}catch(L){Fn(p,y,L)}}function _c(p,y){try{var T=p.ref;if(T!==null){var L=p.stateNode;switch(p.tag){case 26:case 27:case 5:var G=wu(L);break;default:G=L}typeof T=="function"?p.refCleanup=T(G):T.current=G}}catch(k){Fn(p,y,k)}}function Os(p,y){var T=p.ref,L=p.refCleanup;if(T!==null)if(typeof L=="function")try{L()}catch(G){Fn(p,y,G)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(G){Fn(p,y,G)}else T.current=null}function fu(p){var y=p.type,T=p.memoizedProps,L=p.stateNode;try{Bb(L,y,T,p)}catch(G){Fn(p,p.return,G)}}function pm(p,y,T){try{Im(p.stateNode,p.type,T,y,p)}catch(L){Fn(p,p.return,L)}}function xm(p){return p.tag===5||p.tag===3||(er?p.tag===26:!1)||(Hi?p.tag===27:!1)||p.tag===4}function Zf(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||xm(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!Hi||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Kf(p,y,T){var L=p.tag;if(L===5||L===6)p=p.stateNode,y?Bm(T,p,y):Cg(T,p);else if(!(L===4||Hi&&L===27)&&(p=p.child,p!==null))for(Kf(p,y,T),p=p.sibling;p!==null;)Kf(p,y,T),p=p.sibling}function hu(p,y,T){var L=p.tag;if(L===5||L===6)p=p.stateNode,y?km(T,p,y):Gm(T,p);else if(!(L===4||Hi&&L===27)&&(p=p.child,p!==null))for(hu(p,y,T),p=p.sibling;p!==null;)hu(p,y,T),p=p.sibling}function yg(p,y,T){p=p.containerInfo;try{qm(p,T)}catch(L){Fn(y,y.return,L)}}function mu(p,y){for(kl(p.containerInfo),Qs=y;Qs!==null;)if(p=Qs,y=p.child,(p.subtreeFlags&1028)!==0&&y!==null)y.return=p,Qs=y;else for(;Qs!==null;){p=Qs;var T=p.alternate;switch(y=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((y&1024)!==0&&T!==null){y=void 0;var L=p,G=T.memoizedProps;T=T.memoizedState;var k=L.stateNode;try{var oe=da(L.type,G,L.elementType===L.type);y=k.getSnapshotBeforeUpdate(oe,T),k.__reactInternalSnapshotBeforeUpdate=y}catch(Me){Fn(L,L.return,Me)}}break;case 3:(y&1024)!==0&&Vi&&xh(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((y&1024)!==0)throw Error(a(163))}if(y=p.sibling,y!==null){y.return=p.return,Qs=y;break}Qs=p.return}return oe=Gc,Gc=!1,oe}function Jf(p,y,T){var L=T.flags;switch(T.tag){case 0:case 11:case 15:oo(p,T),L&4&&Sd(5,T);break;case 1:if(oo(p,T),L&4)if(p=T.stateNode,y===null)try{p.componentDidMount()}catch(Me){Fn(T,T.return,Me)}else{var G=da(T.type,y.memoizedProps);y=y.memoizedState;try{p.componentDidUpdate(G,y,p.__reactInternalSnapshotBeforeUpdate)}catch(Me){Fn(T,T.return,Me)}}L&64&&gg(T),L&512&&_c(T,T.return);break;case 3:if(oo(p,T),L&64&&(L=T.updateQueue,L!==null)){if(p=null,T.child!==null)switch(T.child.tag){case 27:case 5:p=wu(T.child.stateNode);break;case 1:p=T.child.stateNode}try{we(L,p)}catch(Me){Fn(T,T.return,Me)}}break;case 26:if(er){oo(p,T),L&512&&_c(T,T.return);break}case 27:case 5:oo(p,T),y===null&&L&4&&fu(T),L&512&&_c(T,T.return);break;case 12:oo(p,T);break;case 13:oo(p,T),L&4&&Tl(p,T);break;case 22:if(G=T.memoizedState!==null||_i,!G){y=y!==null&&y.memoizedState!==null||Vs;var k=_i,oe=Vs;_i=G,(Vs=y)&&!oe?Cl(p,T,(T.subtreeFlags&8772)!==0):oo(p,T),_i=k,Vs=oe}L&512&&(T.memoizedProps.mode==="manual"?_c(T,T.return):Os(T,T.return));break;default:oo(p,T)}}function pu(p){var y=p.alternate;y!==null&&(p.alternate=null,pu(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&Om(y)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Ka(p,y,T){for(T=T.child;T!==null;)Qf(p,y,T),T=T.sibling}function Qf(p,y,T){if(Ua&&typeof Ua.onCommitFiberUnmount=="function")try{Ua.onCommitFiberUnmount(Cu,T)}catch{}switch(T.tag){case 26:if(er){Vs||Os(T,y),Ka(p,y,T),T.memoizedState?Qm(T.memoizedState):T.stateNode&&tp(T.stateNode);break}case 27:if(Hi){Vs||Os(T,y);var L=oi,G=za;oi=T.stateNode,Ka(p,y,T),Wg(T.stateNode),oi=L,za=G;break}case 5:Vs||Os(T,y);case 6:if(Vi){if(L=oi,G=za,oi=null,Ka(p,y,T),oi=L,za=G,oi!==null)if(za)try{ii(oi,T.stateNode)}catch(k){Fn(T,y,k)}else try{xa(oi,T.stateNode)}catch(k){Fn(T,y,k)}}else Ka(p,y,T);break;case 18:Vi&&oi!==null&&(za?Zm(oi,T.stateNode):Fg(oi,T.stateNode));break;case 4:Vi?(L=oi,G=za,oi=T.stateNode.containerInfo,za=!0,Ka(p,y,T),oi=L,za=G):(Qa&&yg(T.stateNode,T,gh()),Ka(p,y,T));break;case 0:case 11:case 14:case 15:Vs||El(2,T,y),Vs||El(4,T,y),Ka(p,y,T);break;case 1:Vs||(Os(T,y),L=T.stateNode,typeof L.componentWillUnmount=="function"&&vg(T,y,L)),Ka(p,y,T);break;case 21:Ka(p,y,T);break;case 22:Vs||Os(T,y),Vs=(L=Vs)||T.memoizedState!==null,Ka(p,y,T),Vs=L;break;default:Ka(p,y,T)}}function Tl(p,y){if(pa&&y.memoizedState===null&&(p=y.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Mh(p)}catch(T){Fn(y,y.return,T)}}function xu(p){switch(p.tag){case 13:case 19:var y=p.stateNode;return y===null&&(y=p.stateNode=new Pu),y;case 22:return p=p.stateNode,y=p._retryCache,y===null&&(y=p._retryCache=new Pu),y;default:throw Error(a(435,p.tag))}}function _d(p,y){var T=xu(p);y.forEach(function(L){var G=Mm.bind(null,p,L);T.has(L)||(T.add(L),L.then(G,G))})}function fa(p,y){var T=y.deletions;if(T!==null)for(var L=0;L<T.length;L++){var G=T[L],k=p,oe=y;if(Vi){var Me=oe;e:for(;Me!==null;){switch(Me.tag){case 27:case 5:oi=Me.stateNode,za=!1;break e;case 3:oi=Me.stateNode.containerInfo,za=!0;break e;case 4:oi=Me.stateNode.containerInfo,za=!0;break e}Me=Me.return}if(oi===null)throw Error(a(160));Qf(k,oe,G),oi=null,za=!1}else Qf(k,oe,G);k=G.alternate,k!==null&&(k.return=null),G.return=null}if(y.subtreeFlags&13878)for(y=y.child;y!==null;)Al(y,p),y=y.sibling}function Al(p,y){var T=p.alternate,L=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:fa(y,p),Ca(p),L&4&&(El(3,p,p.return),Sd(3,p),El(5,p,p.return));break;case 1:fa(y,p),Ca(p),L&512&&(Vs||T===null||Os(T,T.return)),L&64&&_i&&(p=p.updateQueue,p!==null&&(L=p.callbacks,L!==null&&(T=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=T===null?L:T.concat(L))));break;case 26:if(er){var G=ga;fa(y,p),Ca(p),L&512&&(Vs||T===null||Os(T,T.return)),L&4&&(L=T!==null?T.memoizedState:null,y=p.memoizedState,T===null?y===null?p.stateNode===null?p.stateNode=$m(G,p.type,p.memoizedProps,p):ep(G,p.type,p.stateNode):p.stateNode=Jm(G,y,p.memoizedProps):L!==y?(L===null?T.stateNode!==null&&tp(T.stateNode):Qm(L),y===null?ep(G,p.type,p.stateNode):Jm(G,y,p.memoizedProps)):y===null&&p.stateNode!==null&&pm(p,p.memoizedProps,T.memoizedProps));break}case 27:if(Hi&&L&4&&p.alternate===null){G=p.stateNode;var k=p.memoizedProps;try{qb(G),Xb(p.type,k,G,p)}catch(Pt){Fn(p,p.return,Pt)}}case 5:if(fa(y,p),Ca(p),L&512&&(Vs||T===null||Os(T,T.return)),Vi){if(p.flags&32){y=p.stateNode;try{Od(y)}catch(Pt){Fn(p,p.return,Pt)}}L&4&&p.stateNode!=null&&(y=p.memoizedProps,pm(p,y,T!==null?T.memoizedProps:y)),L&1024&&(Zl=!0)}break;case 6:if(fa(y,p),Ca(p),L&4&&Vi){if(p.stateNode===null)throw Error(a(162));L=p.memoizedProps,T=T!==null?T.memoizedProps:L,y=p.stateNode;try{Ng(y,T,L)}catch(Pt){Fn(p,p.return,Pt)}}break;case 3:if(er?(np(),G=ga,ga=Sh(y.containerInfo),fa(y,p),ga=G):fa(y,p),Ca(p),L&4){if(Vi&&pa&&T!==null&&T.memoizedState.isDehydrated)try{bh(y.containerInfo)}catch(Pt){Fn(p,p.return,Pt)}if(Qa){L=y.containerInfo,T=y.pendingChildren;try{qm(L,T)}catch(Pt){Fn(p,p.return,Pt)}}}Zl&&(Zl=!1,gm(p));break;case 4:er?(T=ga,ga=Sh(p.stateNode.containerInfo),fa(y,p),Ca(p),ga=T):(fa(y,p),Ca(p)),L&4&&Qa&&yg(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:fa(y,p),Ca(p);break;case 13:fa(y,p),Ca(p),p.child.flags&8192&&p.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(So=qi()),L&4&&(L=p.updateQueue,L!==null&&(p.updateQueue=null,_d(p,L)));break;case 22:L&512&&(Vs||T===null||Os(T,T.return)),G=p.memoizedState!==null;var oe=T!==null&&T.memoizedState!==null,Me=_i,Oe=Vs;if(_i=Me||G,Vs=Oe||oe,fa(y,p),Vs=Oe,_i=Me,Ca(p),y=p.stateNode,y._current=p,y._visibility&=-3,y._visibility|=y._pendingVisibility&2,L&8192&&(y._visibility=G?y._visibility&-2:y._visibility|1,G&&(y=_i||Vs,T===null||oe||y||gu(p)),Vi&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(T=null,Vi)for(y=p;;){if(y.tag===5||er&&y.tag===26||Hi&&y.tag===27){if(T===null){oe=T=y;try{k=oe.stateNode,G?zd(k):Fm(oe.stateNode,oe.memoizedProps)}catch(Pt){Fn(oe,oe.return,Pt)}}}else if(y.tag===6){if(T===null){oe=y;try{var xt=oe.stateNode;G?ph(xt):Jo(xt,oe.memoizedProps)}catch(Pt){Fn(oe,oe.return,Pt)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===p)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break e;for(;y.sibling===null;){if(y.return===null||y.return===p)break e;T===y&&(T=null),y=y.return}T===y&&(T=null),y.sibling.return=y.return,y=y.sibling}}L&4&&(L=p.updateQueue,L!==null&&(T=L.retryQueue,T!==null&&(L.retryQueue=null,_d(p,T))));break;case 19:fa(y,p),Ca(p),L&4&&(L=p.updateQueue,L!==null&&(p.updateQueue=null,_d(p,L)));break;case 21:break;default:fa(y,p),Ca(p)}}function Ca(p){var y=p.flags;if(y&2){try{if(Vi&&(!Hi||p.tag!==27)){e:{for(var T=p.return;T!==null;){if(xm(T)){var L=T;break e}T=T.return}throw Error(a(160))}switch(L.tag){case 27:if(Hi){var G=L.stateNode,k=Zf(p);hu(p,k,G);break}case 5:var oe=L.stateNode;L.flags&32&&(Od(oe),L.flags&=-33);var Me=Zf(p);hu(p,Me,oe);break;case 3:case 4:var Oe=L.stateNode.containerInfo,xt=Zf(p);Kf(p,xt,Oe);break;default:throw Error(a(161))}}}catch(Pt){Fn(p,p.return,Pt)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function gm(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var y=p;gm(y),y.tag===5&&y.flags&1024&&vs(y.stateNode),p=p.sibling}}function oo(p,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)Jf(p,y.alternate,y),y=y.sibling}function gu(p){for(p=p.child;p!==null;){var y=p;switch(y.tag){case 0:case 11:case 14:case 15:El(4,y,y.return),gu(y);break;case 1:Os(y,y.return);var T=y.stateNode;typeof T.componentWillUnmount=="function"&&vg(y,y.return,T),gu(y);break;case 26:case 27:case 5:Os(y,y.return),gu(y);break;case 22:Os(y,y.return),y.memoizedState===null&&gu(y);break;default:gu(y)}p=p.sibling}}function Cl(p,y,T){for(T=T&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var L=y.alternate,G=p,k=y,oe=k.flags;switch(k.tag){case 0:case 11:case 15:Cl(G,k,T),Sd(4,k);break;case 1:if(Cl(G,k,T),L=k,G=L.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(xt){Fn(L,L.return,xt)}if(L=k,G=L.updateQueue,G!==null){var Me=L.stateNode;try{var Oe=G.shared.hiddenCallbacks;if(Oe!==null)for(G.shared.hiddenCallbacks=null,G=0;G<Oe.length;G++)pe(Oe[G],Me)}catch(xt){Fn(L,L.return,xt)}}T&&oe&64&&gg(k),_c(k,k.return);break;case 26:case 27:case 5:Cl(G,k,T),T&&L===null&&oe&4&&fu(k),_c(k,k.return);break;case 12:Cl(G,k,T);break;case 13:Cl(G,k,T),T&&oe&4&&Tl(G,k);break;case 22:k.memoizedState===null&&Cl(G,k,T),_c(k,k.return);break;default:Cl(G,k,T)}y=y.sibling}}function vm(p,y){var T=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),p=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(p=y.memoizedState.cachePool.pool),p!==T&&(p!=null&&p.refCount++,T!=null&&lu(T))}function $f(p,y){p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&lu(p))}function Bo(p,y,T,L){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)eh(p,y,T,L),y=y.sibling}function eh(p,y,T,L){var G=y.flags;switch(y.tag){case 0:case 11:case 15:Bo(p,y,T,L),G&2048&&Sd(9,y);break;case 3:Bo(p,y,T,L),G&2048&&(p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&lu(p)));break;case 12:if(G&2048){Bo(p,y,T,L),p=y.stateNode;try{var k=y.memoizedProps,oe=k.id,Me=k.onPostCommit;typeof Me=="function"&&Me(oe,y.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Oe){Fn(y,y.return,Oe)}}else Bo(p,y,T,L);break;case 23:break;case 22:k=y.stateNode,y.memoizedState!==null?k._visibility&4?Bo(p,y,T,L):Nl(p,y):k._visibility&4?Bo(p,y,T,L):(k._visibility|=4,$i(p,y,T,L,(y.subtreeFlags&10256)!==0)),G&2048&&vm(y.alternate,y);break;case 24:Bo(p,y,T,L),G&2048&&$f(y.alternate,y);break;default:Bo(p,y,T,L)}}function $i(p,y,T,L,G){for(G=G&&(y.subtreeFlags&10256)!==0,y=y.child;y!==null;){var k=p,oe=y,Me=T,Oe=L,xt=oe.flags;switch(oe.tag){case 0:case 11:case 15:$i(k,oe,Me,Oe,G),Sd(8,oe);break;case 23:break;case 22:var Pt=oe.stateNode;oe.memoizedState!==null?Pt._visibility&4?$i(k,oe,Me,Oe,G):Nl(k,oe):(Pt._visibility|=4,$i(k,oe,Me,Oe,G)),G&&xt&2048&&vm(oe.alternate,oe);break;case 24:$i(k,oe,Me,Oe,G),G&&xt&2048&&$f(oe.alternate,oe);break;default:$i(k,oe,Me,Oe,G)}y=y.sibling}}function Nl(p,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var T=p,L=y,G=L.flags;switch(L.tag){case 22:Nl(T,L),G&2048&&vm(L.alternate,L);break;case 24:Nl(T,L),G&2048&&$f(L.alternate,L);break;default:Nl(T,L)}y=y.sibling}}function Ni(p){if(p.subtreeFlags&Ic)for(p=p.child;p!==null;)wc(p),p=p.sibling}function wc(p){switch(p.tag){case 26:Ni(p),p.flags&Ic&&(p.memoizedState!==null?ip(ga,p.memoizedState,p.memoizedProps):Ws(p.type,p.memoizedProps));break;case 5:Ni(p),p.flags&Ic&&Ws(p.type,p.memoizedProps);break;case 3:case 4:if(er){var y=ga;ga=Sh(p.stateNode.containerInfo),Ni(p),ga=y}else Ni(p);break;case 22:p.memoizedState===null&&(y=p.alternate,y!==null&&y.memoizedState!==null?(y=Ic,Ic=16777216,Ni(p),Ic=y):Ni(p));break;default:Ni(p)}}function th(p){var y=p.alternate;if(y!==null&&(p=y.child,p!==null)){y.child=null;do y=p.sibling,p.sibling=null,p=y;while(p!==null)}}function Rl(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var T=0;T<y.length;T++){var L=y[T];Qs=L,Dl(L,p)}th(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)wd(p),p=p.sibling}function wd(p){switch(p.tag){case 0:case 11:case 15:Rl(p),p.flags&2048&&El(9,p,p.return);break;case 3:Rl(p);break;case 12:Rl(p);break;case 22:var y=p.stateNode;p.memoizedState!==null&&y._visibility&4&&(p.return===null||p.return.tag!==13)?(y._visibility&=-5,vu(p)):Rl(p);break;default:Rl(p)}}function vu(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var T=0;T<y.length;T++){var L=y[T];Qs=L,Dl(L,p)}th(p)}for(p=p.child;p!==null;){switch(y=p,y.tag){case 0:case 11:case 15:El(8,y,y.return),vu(y);break;case 22:T=y.stateNode,T._visibility&4&&(T._visibility&=-5,vu(y));break;default:vu(y)}p=p.sibling}}function Dl(p,y){for(;Qs!==null;){var T=Qs;switch(T.tag){case 0:case 11:case 15:El(8,T,y);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var L=T.memoizedState.cachePool.pool;L!=null&&L.refCount++}break;case 24:lu(T.memoizedState.cache)}if(L=T.child,L!==null)L.return=T,Qs=L;else e:for(T=p;Qs!==null;){L=Qs;var G=L.sibling,k=L.return;if(pu(L),L===T){Qs=null;break e}if(G!==null){G.return=k,Qs=G;break e}Qs=k}}}function nh(p){var y=Um(p);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(a(364));return y}if(p=Lc(p),p===null)throw Error(a(362));return p.stateNode.current}function yu(p,y){var T=p.tag;switch(y.$$typeof){case Qd:if(p.type===y.value)return!0;break;case Lh:e:{for(y=y.value,p=[p,0],T=0;T<p.length;){var L=p[T++],G=L.tag,k=p[T++],oe=y[k];if(G!==5&&G!==26&&G!==27||!go(L)){for(;oe!=null&&yu(L,oe);)k++,oe=y[k];if(k===y.length){y=!0;break e}else for(L=L.child;L!==null;)p.push(L,k),L=L.sibling}}y=!1}return y;case Uh:if((T===5||T===26||T===27)&&kb(p.stateNode,y.value))return!0;break;case ds:if((T===5||T===6||T===26||T===27)&&(p=Pd(p),p!==null&&0<=p.indexOf(y.value)))return!0;break;case Yn:if((T===5||T===26||T===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Ll(p){switch(p.$$typeof){case Qd:return"<"+(o(p.value)||"Unknown")+">";case Lh:return":has("+(Ll(p)||"")+")";case Uh:return'[role="'+p.value+'"]';case ds:return'"'+p.value+'"';case Yn:return'[data-testname="'+p.value+'"]';default:throw Error(a(365))}}function bg(p,y){var T=[];p=[p,0];for(var L=0;L<p.length;){var G=p[L++],k=G.tag,oe=p[L++],Me=y[oe];if(k!==5&&k!==26&&k!==27||!go(G)){for(;Me!=null&&yu(G,Me);)oe++,Me=y[oe];if(oe===y.length)T.push(G);else for(G=G.child;G!==null;)p.push(G,oe),G=G.sibling}}return T}function ha(p,y){if(!xo)throw Error(a(363));p=nh(p),p=bg(p,y),y=[],p=Array.from(p);for(var T=0;T<p.length;){var L=p[T++],G=L.tag;if(G===5||G===26||G===27)go(L)||y.push(L.stateNode);else for(L=L.child;L!==null;)p.push(L),L=L.sibling}return y}function ma(){if((cn&2)!==0&&zn!==0)return zn&-zn;if(dn.T!==null){var p=Pa;return p!==0?p:Re()}return jr()}function lo(){Ga===0&&(Ga=(zn&536870912)===0||Jn?U():536870912);var p=or.current;return p!==null&&(p.flags|=32),Ga}function ea(p,y,T){(p===Bn&&ys===2||p.cancelPendingCommit!==null)&&(Hr(p,0),Vr(p,zn,Ga,!1)),V(p,T),((cn&2)===0||p!==Bn)&&(p===Bn&&((cn&2)===0&&(Jr|=T),Zn===4&&Vr(p,zn,Ga,!1)),$e(p))}function jd(p,y,T){if((cn&6)!==0)throw Error(a(327));var L=!T&&(y&60)===0&&(y&p.expiredLanes)===0||R(p,y),G=L?fo(p,y):co(p,y,!0),k=L;do{if(G===0){lr&&!L&&Vr(p,y,0,!1);break}else if(G===6)Vr(p,y,0,!fs);else{if(T=p.current.alternate,k&&!Mg(T)){G=co(p,y,!1),k=!1;continue}if(G===2){if(k=y,p.errorRecoveryDisabledLanes&k)var oe=0;else oe=p.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){y=oe;e:{var Me=p;G=Ou;var Oe=pa&&Me.current.memoizedState.isDehydrated;if(Oe&&(Hr(Me,oe).flags|=256),oe=co(Me,oe,!1),oe!==2){if(sl&&!Oe){Me.errorRecoveryDisabledLanes|=k,Jr|=k,G=4;break e}k=ur,ur=G,k!==null&&Fo(k)}G=oe}if(k=!1,G!==2)continue}}if(G===1){Hr(p,0),Vr(p,y,0,!0);break}e:{switch(L=p,G){case 0:case 1:throw Error(a(345));case 4:if((y&4194176)===y){Vr(L,y,Ga,!fs);break e}break;case 2:ur=null;break;case 3:case 5:break;default:throw Error(a(329))}if(L.finishedWork=T,L.finishedLanes=y,(y&62914560)===y&&(k=So+300-qi(),10<k)){if(Vr(L,y,Ga,!fs),N(L,0)!==0)break e;L.timeoutHandle=Lm(sh.bind(null,L,T,ur,Qr,zu,y,Ga,Jr,il,fs,2,-0,0),k);break e}sh(L,T,ur,Qr,zu,y,Ga,Jr,il,fs,0,-0,0)}}break}while(!0);$e(p)}function Fo(p){ur===null?ur=p:ur.push.apply(ur,p)}function sh(p,y,T,L,G,k,oe,Me,Oe,xt,Pt,Vt,Wt){var _n=y.subtreeFlags;if((_n&8192||(_n&16785408)===16785408)&&($a(),wc(y),y=fh(),y!==null)){p.cancelPendingCommit=y(As.bind(null,p,T,L,G,oe,Me,Oe,1,Vt,Wt)),Vr(p,k,oe,!xt);return}As(p,T,L,G,oe,Me,Oe,Pt,Vt,Wt)}function Mg(p){for(var y=p;;){var T=y.tag;if((T===0||T===11||T===15)&&y.flags&16384&&(T=y.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var L=0;L<T.length;L++){var G=T[L],k=G.getSnapshot;G=G.value;try{if(!tr(k(),G))return!1}catch{return!1}}if(T=y.child,y.subtreeFlags&16384&&T!==null)T.return=y,y=T;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Vr(p,y,T,L){y&=~ra,y&=~Jr,p.suspendedLanes|=y,p.pingedLanes&=~y,L&&(p.warmLanes|=y),L=p.expirationTimes;for(var G=y;0<G;){var k=31-La(G),oe=1<<k;L[k]=-1,G&=~oe}T!==0&&q(p,T,y)}function ym(){return(cn&6)===0?(Ee(0),!1):!0}function Na(){if(jn!==null){if(ys===0)var p=jn.return;else p=jn,Js=Yl=null,wt(p),yo=null,Ar=0,p=jn;for(;p!==null;)mm(p.alternate,p),p=p.return;jn=null}}function Hr(p,y){p.finishedWork=null,p.finishedLanes=0;var T=p.timeoutHandle;T!==Dc&&(p.timeoutHandle=Dc,Ud(T)),T=p.cancelPendingCommit,T!==null&&(p.cancelPendingCommit=null,T()),Na(),Bn=p,jn=T=ta(p.current,null),zn=y,ys=0,li=null,fs=!1,lr=R(p,y),sl=!1,il=Ga=ra=Jr=cr=Zn=0,ur=Ou=null,zu=!1,(y&8)!==0&&(y|=y&32);var L=p.entangledLanes;if(L!==0)for(p=p.entanglements,L&=y;0<L;){var G=31-La(L),k=1<<G;y|=p[G],L&=~k}return Kr=y,ze(),T}function jc(p,y){Nn=null,dn.H=Qn,y===ps?(y=Tt(),ys=3):y===lp?(y=Tt(),ys=4):ys=y===e1?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,li=y,jn===null&&(Zn=1,ao(p,le(y,p.current)))}function Ed(){var p=or.current;return p===null?!0:(zn&4194176)===zn?Cr===null:(zn&62914560)===zn||(zn&536870912)!==0?p===Cr:!1}function bu(){var p=dn.H;return dn.H=Qn,p===null?Qn:p}function Ja(){var p=dn.A;return dn.A=Dh,p}function Ra(){Zn=4,fs||(zn&4194176)!==zn&&or.current!==null||(lr=!0),(cr&134217727)===0&&(Jr&134217727)===0||Bn===null||Vr(Bn,zn,Ga,!1)}function co(p,y,T){var L=cn;cn|=2;var G=bu(),k=Ja();(Bn!==p||zn!==y)&&(Qr=null,Hr(p,y)),y=!1;var oe=Zn;e:do try{if(ys!==0&&jn!==null){var Me=jn,Oe=li;switch(ys){case 8:Na(),oe=6;break e;case 3:case 2:case 6:or.current===null&&(y=!0);var xt=ys;if(ys=0,li=null,Ul(p,Me,Oe,xt),T&&lr){oe=0;break e}break;default:xt=ys,ys=0,li=null,Ul(p,Me,Oe,xt)}}uo(),oe=Zn;break}catch(Pt){jc(p,Pt)}while(!0);return y&&p.shellSuspendCounter++,Js=Yl=null,cn=L,dn.H=G,dn.A=k,jn===null&&(Bn=null,zn=0,ze()),oe}function uo(){for(;jn!==null;)bm(jn)}function fo(p,y){var T=cn;cn|=2;var L=bu(),G=Ja();Bn!==p||zn!==y?(Qr=null,Hs=qi()+500,Hr(p,y)):lr=R(p,y);e:do try{if(ys!==0&&jn!==null){y=jn;var k=li;t:switch(ys){case 1:ys=0,li=null,Ul(p,y,k,1);break;case 2:if(jt(k)){ys=0,li=null,ih(y);break}y=function(){ys===2&&Bn===p&&(ys=7),$e(p)},k.then(y,y);break e;case 3:ys=7;break e;case 4:ys=5;break e;case 7:jt(k)?(ys=0,li=null,ih(y)):(ys=0,li=null,Ul(p,y,k,7));break;case 5:var oe=null;switch(jn.tag){case 26:oe=jn.memoizedState;case 5:case 27:var Me=jn,Oe=Me.type,xt=Me.pendingProps;if(oe?sp(oe):Ko(Oe,xt)){ys=0,li=null;var Pt=Me.sibling;if(Pt!==null)jn=Pt;else{var Vt=Me.return;Vt!==null?(jn=Vt,Td(Vt)):jn=null}break t}}ys=0,li=null,Ul(p,y,k,5);break;case 6:ys=0,li=null,Ul(p,y,k,6);break;case 8:Na(),Zn=6;break e;default:throw Error(a(462))}}Vo();break}catch(Wt){jc(p,Wt)}while(!0);return Js=Yl=null,dn.H=L,dn.A=G,cn=T,jn!==null?0:(Bn=null,zn=0,ze(),Zn)}function Vo(){for(;jn!==null&&!Zg();)bm(jn)}function bm(p){var y=hg(p.alternate,p,Kr);p.memoizedProps=p.pendingProps,y===null?Td(p):jn=y}function ih(p){var y=p,T=y.alternate;switch(y.tag){case 15:case 0:y=vd(T,y,y.pendingProps,y.type,void 0,zn);break;case 11:y=vd(T,y,y.pendingProps,y.type.render,y.ref,zn);break;case 5:wt(y);default:mm(T,y),y=jn=Xo(y,Kr),y=hg(T,y,Kr)}p.memoizedProps=p.pendingProps,y===null?Td(p):jn=y}function Ul(p,y,T,L){Js=Yl=null,wt(y),yo=null,Ar=0;var G=y.return;try{if(Hf(p,G,y,T,zn)){Zn=1,ao(p,le(T,p.current)),jn=null;return}}catch(k){if(G!==null)throw jn=G,k;Zn=1,ao(p,le(T,p.current)),jn=null;return}y.flags&32768?(Jn||L===1?p=!0:lr||(zn&536870912)!==0?p=!1:(fs=p=!0,(L===2||L===3||L===6)&&(L=or.current,L!==null&&L.tag===13&&(L.flags|=16384))),Ri(y,p)):Td(y)}function Td(p){var y=p;do{if((y.flags&32768)!==0){Ri(y,fs);return}p=y.return;var T=pg(y.alternate,y,Kr);if(T!==null){jn=T;return}if(y=y.sibling,y!==null){jn=y;return}jn=y=p}while(y!==null);Zn===0&&(Zn=5)}function Ri(p,y){do{var T=xg(p.alternate,p);if(T!==null){T.flags&=32767,jn=T;return}if(T=p.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!y&&(p=p.sibling,p!==null)){jn=p;return}jn=p=T}while(p!==null);Zn=6,jn=null}function As(p,y,T,L,G,k,oe,Me,Oe,xt){var Pt=dn.T,Vt=Si();try{na(2),dn.T=null,qn(p,y,T,L,Vt,G,k,oe,Me,Oe,xt)}finally{dn.T=Pt,na(Vt)}}function qn(p,y,T,L,G,k,oe,Me){do Di();while(al!==null);if((cn&6)!==0)throw Error(a(327));var Oe=p.finishedWork;if(L=p.finishedLanes,Oe===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Oe===p.current)throw Error(a(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var xt=Oe.lanes|Oe.childLanes;if(xt|=Ru,F(p,L,xt,k,oe,Me),p===Bn&&(jn=Bn=null,zn=0),(Oe.subtreeFlags&10256)===0&&(Oe.flags&10256)===0||Rr||(Rr=!0,Ph=xt,Bc=T,Ad(wh,function(){return Di(),null})),T=(Oe.flags&15990)!==0,(Oe.subtreeFlags&15990)!==0||T?(T=dn.T,dn.T=null,k=Si(),na(2),oe=cn,cn|=4,mu(p,Oe),Al(Oe,p),Rm(p.containerInfo),p.current=Oe,Jf(p,Oe.alternate,Oe),Kg(),cn=oe,na(k),dn.T=T):p.current=Oe,Rr?(Rr=!1,al=p,kc=L):Ho(p,xt),xt=p.pendingLanes,xt===0&&(dr=null),B(Oe.stateNode),$e(p),y!==null)for(G=p.onRecoverableError,Oe=0;Oe<y.length;Oe++)xt=y[Oe],G(xt.value,{componentStack:xt.stack});return(kc&3)!==0&&Di(),xt=p.pendingLanes,(L&4194218)!==0&&(xt&42)!==0?p===va?Fc++:(Fc=0,va=p):Fc=0,Ee(0),null}function Ho(p,y){(p.pooledCacheLanes&=y)===0&&(y=p.pooledCache,y!=null&&(p.pooledCache=null,lu(y)))}function Di(){if(al!==null){var p=al,y=Ph;Ph=0;var T=ie(kc),L=32>T?32:T;T=dn.T;var G=Si();try{if(na(L),dn.T=null,al===null)var k=!1;else{L=Bc,Bc=null;var oe=al,Me=kc;if(al=null,kc=0,(cn&6)!==0)throw Error(a(331));var Oe=cn;if(cn|=4,wd(oe.current),eh(oe,oe.current,Me,L),cn=Oe,Ee(0,!1),Ua&&typeof Ua.onPostCommitFiberRoot=="function")try{Ua.onPostCommitFiberRoot(Cu,oe)}catch{}k=!0}return k}finally{na(G),dn.T=T,Ho(p,y)}}return!1}function ah(p,y,T){y=le(T,y),y=Fr(p.stateNode,y,2),p=Ie(p,y,2),p!==null&&(V(p,2),$e(p))}function Fn(p,y,T){if(p.tag===3)ah(p,p,T);else for(;y!==null;){if(y.tag===3){ah(y,p,T);break}else if(y.tag===1){var L=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(dr===null||!dr.has(L))){p=le(T,p),T=ro(2),L=Ie(y,T,2),L!==null&&(Mi(T,L,y,p),V(L,2),$e(L));break}}y=y.return}}function rh(p,y,T){var L=p.pingCache;if(L===null){L=p.pingCache=new Vn;var G=new Set;L.set(y,G)}else G=L.get(y),G===void 0&&(G=new Set,L.set(y,G));G.has(T)||(sl=!0,G.add(T),p=Sg.bind(null,p,y,T),y.then(p,p))}function Sg(p,y,T){var L=p.pingCache;L!==null&&L.delete(y),p.pingedLanes|=p.suspendedLanes&T,p.warmLanes&=~T,Bn===p&&(zn&T)===T&&(Zn===4||Zn===3&&(zn&62914560)===zn&&300>qi()-So?(cn&2)===0&&Hr(p,0):ra|=T,il===zn&&(il=0)),$e(p)}function Ec(p,y){y===0&&(y=z()),p=We(p,y),p!==null&&(V(p,y),$e(p))}function Tc(p){var y=p.memoizedState,T=0;y!==null&&(T=y.retryLane),Ec(p,T)}function Mm(p,y){var T=0;switch(p.tag){case 13:var L=p.stateNode,G=p.memoizedState;G!==null&&(T=G.retryLane);break;case 19:L=p.stateNode;break;case 22:L=p.stateNode._retryCache;break;default:throw Error(a(314))}L!==null&&L.delete(y),Ec(p,T)}function Ad(p,y){return Au(p,y)}function Sm(p,y,T,L){this.tag=p,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(p){return p=p.prototype,!(!p||!p.isReactComponent)}function ta(p,y){var T=p.alternate;return T===null?(T=t(p.tag,y,p.key,p.mode),T.elementType=p.elementType,T.type=p.type,T.stateNode=p.stateNode,T.alternate=p,p.alternate=T):(T.pendingProps=y,T.type=p.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=p.flags&31457280,T.childLanes=p.childLanes,T.lanes=p.lanes,T.child=p.child,T.memoizedProps=p.memoizedProps,T.memoizedState=p.memoizedState,T.updateQueue=p.updateQueue,y=p.dependencies,T.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},T.sibling=p.sibling,T.index=p.index,T.ref=p.ref,T.refCleanup=p.refCleanup,T}function Xo(p,y){p.flags&=31457282;var T=p.alternate;return T===null?(p.childLanes=0,p.lanes=y,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=T.childLanes,p.lanes=T.lanes,p.child=T.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=T.memoizedProps,p.memoizedState=T.memoizedState,p.updateQueue=T.updateQueue,p.type=T.type,y=T.dependencies,p.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),p}function wr(p,y,T,L,G,k){var oe=0;if(L=p,typeof p=="function")qo(p)&&(oe=1);else if(typeof p=="string")oe=er&&Hi?Km(p,T,Ui.current)?26:Eu(p)?27:5:er?Km(p,T,Ui.current)?26:5:Hi&&Eu(p)?27:5;else e:switch(p){case Su:return Wo(T.children,G,k,y);case Tm:oe=8,G|=24;break;case Am:return p=t(12,T,y,G|2),p.elementType=Am,p.lanes=k,p;case lh:return p=t(13,T,y,G),p.elementType=lh,p.lanes=k,p;case zl:return p=t(19,T,y,G),p.elementType=zl,p.lanes=k,p;case Rd:return oh(T,G,k,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case jg:case ho:oe=10;break e;case Ol:oe=9;break e;case _u:oe=11;break e;case Nd:oe=14;break e;case Xr:oe=16,L=null;break e}oe=29,T=Error(a(130,p===null?"null":typeof p,"")),L=null}return y=t(oe,T,y,G),y.elementType=p,y.type=L,y.lanes=k,y}function Wo(p,y,T,L){return p=t(7,p,L,y),p.lanes=T,p}function oh(p,y,T,L){p=t(22,p,L,y),p.elementType=Rd,p.lanes=T;var G={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var k=G._current;if(k===null)throw Error(a(456));if((G._pendingVisibility&2)===0){var oe=We(k,2);oe!==null&&(G._pendingVisibility|=2,ea(oe,k,2))}},attach:function(){var k=G._current;if(k===null)throw Error(a(456));if((G._pendingVisibility&2)!==0){var oe=We(k,2);oe!==null&&(G._pendingVisibility&=-3,ea(oe,k,2))}}};return p.stateNode=G,p}function Pl(p,y,T){return p=t(6,p,null,y),p.lanes=T,p}function Mu(p,y,T){return y=t(4,p.children!==null?p.children:[],p.key,y),y.lanes=T,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function Ac(p,y,T,L,G,k,oe,Me){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Dc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=L,this.onUncaughtError=G,this.onCaughtError=k,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Me,this.incompleteTransitions=new Map}function Li(p,y,T,L,G,k,oe,Me,Oe,xt,Pt,Vt){return p=new Ac(p,y,T,oe,Me,Oe,xt,Vt),y=1,k===!0&&(y|=24),k=t(3,null,null,y),p.current=k,k.stateNode=p,y=Xf(),y.refCount++,p.pooledCache=y,y.refCount++,k.memoizedState={element:L,isDehydrated:T,cache:y},Dt(k),p}function Cd(p){return p?(p=Uc,p):Uc}function _m(p){var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(a(188)):(p=Object.keys(p).join(","),Error(a(268,p)));return p=g(y),p=p!==null?v(p):null,p===null?null:wu(p.stateNode)}function _g(p,y,T,L,G,k){G=Cd(G),L.context===null?L.context=G:L.pendingContext=G,L=ke(y),L.payload={element:T},k=k===void 0?null:k,k!==null&&(L.callback=k),T=Ie(p,L,y),T!==null&&(ea(T,p,y),ft(T,p,y))}function wg(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var T=p.retryLane;p.retryLane=T!==0&&T<y?T:y}}function wm(p,y){wg(p,y),(p=p.alternate)&&wg(p,y)}var ln={},jm=H0(),Fi=$q(),Cc=Object.assign,Em=Symbol.for("react.element"),Yo=Symbol.for("react.transitional.element"),qr=Symbol.for("react.portal"),Su=Symbol.for("react.fragment"),Tm=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),jg=Symbol.for("react.provider"),Ol=Symbol.for("react.consumer"),ho=Symbol.for("react.context"),_u=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),zl=Symbol.for("react.suspense_list"),Nd=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),Rd=Symbol.for("react.offscreen"),Eg=Symbol.for("react.memo_cache_sentinel"),Cm=Symbol.iterator,Nc=Symbol.for("react.client.reference"),dn=jm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ch,Nm,Gl=!1,Il=Array.isArray,uh=e.rendererVersion,Dd=e.rendererPackageName,Ld=e.extraDevToolsConfig,wu=e.getPublicInstance,Rc=e.getRootHostContext,Tg=e.getChildHostContext,kl=e.prepareForCommit,Rm=e.resetAfterCommit,Dm=e.createInstance,mo=e.appendInitialChild,Zo=e.finalizeInitialChildren,Bl=e.shouldSetTextContent,dh=e.createTextInstance,Lm=e.scheduleTimeout,Ud=e.cancelTimeout,Dc=e.noTimeout,po=e.isPrimaryRenderer;e.warnsIfNotActing;var Vi=e.supportsMutation,Qa=e.supportsPersistence,pa=e.supportsHydration,Um=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Pm=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var na=e.setCurrentUpdatePriority,Si=e.getCurrentUpdatePriority,jr=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Fl=e.shouldAttemptEagerTransition,Om=e.detachDeletedInstance;e.requestPostPaintCallback;var Ag=e.maySuspendCommit,Ko=e.preloadInstance,$a=e.startSuspendingCommit,Ws=e.suspendInstance,fh=e.waitForCommitToBeReady,Da=e.NotPendingTransition,vn=e.HostTransitionContext,vs=e.resetFormInstance;e.bindToConsole;var hi=e.supportsMicrotasks,hh=e.scheduleMicrotask,xo=e.supportsTestSelectors,Lc=e.findFiberRoot,mh=e.getBoundingRect,Pd=e.getTextContent,go=e.isHiddenSubtree,kb=e.matchAccessibilityRole,Ys=e.setFocusIfFocusable,zm=e.setupIntersectionObserver,Gm=e.appendChild,Cg=e.appendChildToContainer,Ng=e.commitTextUpdate,Bb=e.commitMount,Im=e.commitUpdate,km=e.insertBefore,Bm=e.insertInContainerBefore,xa=e.removeChild,ii=e.removeChildFromContainer,Od=e.resetTextContent,zd=e.hideInstance,ph=e.hideTextInstance,Fm=e.unhideInstance,Jo=e.unhideTextInstance,xh=e.clearContainer,Vm=e.cloneInstance,gh=e.createContainerChildSet,Hm=e.appendChildToContainerChildSet,Rg=e.finalizeContainerChildren,qm=e.replaceContainerChildren,Xm=e.cloneHiddenInstance,Wm=e.cloneHiddenTextInstance,vh=e.isSuspenseInstancePending,Gd=e.isSuspenseInstanceFallback,Dg=e.getSuspenseInstanceFallbackErrorDetails,Fb=e.registerSuspenseInstanceRetry,Lg=e.canHydrateFormStateMarker,Ug=e.isFormStateMarkerMatching,Ym=e.getNextHydratableSibling,yh=e.getFirstHydratableChild,Pg=e.getFirstHydratableChildWithinContainer,Og=e.getFirstHydratableChildWithinSuspenseInstance,zg=e.canHydrateInstance,Gg=e.canHydrateTextInstance,Ig=e.canHydrateSuspenseInstance,Vb=e.hydrateInstance,kg=e.hydrateTextInstance,ju=e.hydrateSuspenseInstance,Bg=e.getNextHydratableInstanceAfterSuspenseInstance,bh=e.commitHydratedContainer,Mh=e.commitHydratedSuspenseInstance,Fg=e.clearSuspenseBoundary,Zm=e.clearSuspenseBoundaryFromContainer,Vg=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Hg=e.validateHydratableInstance,qg=e.validateHydratableTextInstance,er=e.supportsResources,Km=e.isHostHoistableType,Sh=e.getHoistableRoot,_h=e.getResource,Jm=e.acquireResource,Qm=e.releaseResource,$m=e.hydrateHoistable,ep=e.mountHoistable,tp=e.unmountHoistable,Hb=e.createHoistableInstance,np=e.prepareToCommitHoistables,Xg=e.mayResourceSuspendCommit,sp=e.preloadResource,ip=e.suspendResource,Hi=e.supportsSingletons,ap=e.resolveSingletonInstance,qb=e.clearSingleton,Xb=e.acquireSingletonInstance,Wg=e.releaseSingletonInstance,Eu=e.isHostSingletonType,Id=[],Qo=-1,Uc={},La=Math.clz32?Math.clz32:A,kd=Math.log,Yg=Math.LN2,Tu=128,Bd=4194304,Au=Fi.unstable_scheduleCallback,Fd=Fi.unstable_cancelCallback,Zg=Fi.unstable_shouldYield,Kg=Fi.unstable_requestPaint,qi=Fi.unstable_now,rp=Fi.unstable_ImmediatePriority,Jg=Fi.unstable_UserBlockingPriority,wh=Fi.unstable_NormalPriority,jh=Fi.unstable_IdlePriority,Qg=Fi.log,op=Fi.unstable_setDisableYieldValue,Cu=null,Ua=null,tr=typeof Object.is=="function"?Object.is:$,Eh=new WeakMap,zs=[],Zs=0,Vd=null,Hd=0,nr=[],sr=0,Wr=null,vo=1,Er="",Ui=_(null),qd=_(null),Yr=_(null),Nu=_(null),sa=null,Xi=null,Jn=!1,ir=null,Tr=!1,Xd=Error(a(519)),ar=[],Vl=0,Ru=0,Du=null,Pc=null,Wd=!1,Yd=!1,Zr=!1,Hl=0,Zd=null,Th=0,Pa=0,ql=null,$o=!1,Lu=!1,Kd=Object.prototype.hasOwnProperty,ps=Error(a(460)),lp=Error(a(474)),Ah={then:function(){}},Oc=null,yo=null,Ar=0,Xl=In(!0),cp=In(!1),bo=_(null),rr=_(0),or=_(null),Cr=null,mi=_(0),Mo=0,Nn=null,rs=null,ai=null,Nr=!1,Gs=!1,el=!1,Jd=0,Ks=0,Uu=null,$g=0,Ch=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Qn={readContext:Bi,use:de,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn};Qn.useCacheRefresh=fn,Qn.useMemoCache=fn,Qn.useHostTransitionStatus=fn,Qn.useFormState=fn,Qn.useActionState=fn,Qn.useOptimistic=fn;var pi={readContext:Bi,use:de,useCallback:function(p,y){return _t().memoizedState=[p,y===void 0?null:y],p},useContext:Bi,useEffect:dc,useImperativeHandle:function(p,y,T){T=T!=null?T.concat([p]):null,ua(4194308,4,br.bind(null,y,p),T)},useLayoutEffect:function(p,y){return ua(4194308,4,p,y)},useInsertionEffect:function(p,y){ua(4,2,p,y)},useMemo:function(p,y){var T=_t();y=y===void 0?null:y;var L=p();if(el){J(!0);try{p()}finally{J(!1)}}return T.memoizedState=[L,y],L},useReducer:function(p,y,T){var L=_t();if(T!==void 0){var G=T(y);if(el){J(!0);try{T(y)}finally{J(!1)}}}else G=y;return L.memoizedState=L.baseState=G,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:G},L.queue=p,p=p.dispatch=Ir.bind(null,Nn,p),[L.memoizedState,p]},useRef:function(p){var y=_t();return p={current:p},y.memoizedState=p},useState:function(p){p=Qt(p);var y=p.queue,T=xc.bind(null,Nn,y);return y.dispatch=T,[p.memoizedState,T]},useDebugValue:zr,useDeferredValue:function(p,y){var T=_t();return Mr(T,p,y)},useTransition:function(){var p=Qt(!1);return p=pc.bind(null,Nn,p.queue,!0,!1),_t().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,y,T){var L=Nn,G=_t();if(Jn){if(T===void 0)throw Error(a(407));T=T()}else{if(T=y(),Bn===null)throw Error(a(349));(zn&60)!==0||Gt(L,y,T)}G.memoizedState=T;var k={value:T,getSnapshot:y};return G.queue=k,dc(Bt.bind(null,L,k,p),[p]),L.flags|=2048,_s(9,kt.bind(null,L,k,T,y),{destroy:void 0},null),T},useId:function(){var p=_t(),y=Bn.identifierPrefix;if(Jn){var T=Er,L=vo;T=(L&~(1<<32-La(L)-1)).toString(32)+T,y=":"+y+"R"+T,T=Jd++,0<T&&(y+="H"+T.toString(32)),y+=":"}else T=$g++,y=":"+y+"r"+T.toString(32)+":";return p.memoizedState=y},useCacheRefresh:function(){return _t().memoizedState=Oo.bind(null,Nn)}};pi.useMemoCache=Ne,pi.useHostTransitionStatus=Gr,pi.useFormState=Ls,pi.useActionState=Ls,pi.useOptimistic=function(p){var y=_t();y.memoizedState=y.baseState=p;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=T,y=gc.bind(null,Nn,!0,T),T.dispatch=y,[p,y]};var ia={readContext:Bi,use:de,useCallback:hc,useContext:Bi,useEffect:Or,useImperativeHandle:Ii,useInsertionEffect:xd,useLayoutEffect:fc,useMemo:Wa,useReducer:Ke,useRef:ca,useState:function(){return Ke(ye)},useDebugValue:zr,useDeferredValue:function(p,y){var T=K();return mc(T,rs.memoizedState,p,y)},useTransition:function(){var p=Ke(ye)[0],y=K().memoizedState;return[typeof p=="boolean"?p:xe(p),y]},useSyncExternalStore:At,useId:Ya};ia.useCacheRefresh=Qi,ia.useMemoCache=Ne,ia.useHostTransitionStatus=Gr,ia.useFormState=Ln,ia.useActionState=Ln,ia.useOptimistic=function(p,y){var T=K();return rn(T,rs,p,y)};var Wl={readContext:Bi,use:de,useCallback:hc,useContext:Bi,useEffect:Or,useImperativeHandle:Ii,useInsertionEffect:xd,useLayoutEffect:fc,useMemo:Wa,useReducer:Mt,useRef:ca,useState:function(){return Mt(ye)},useDebugValue:zr,useDeferredValue:function(p,y){var T=K();return rs===null?Mr(T,p,y):mc(T,rs.memoizedState,p,y)},useTransition:function(){var p=Mt(ye)[0],y=K().memoizedState;return[typeof p=="boolean"?p:xe(p),y]},useSyncExternalStore:At,useId:Ya};Wl.useCacheRefresh=Qi,Wl.useMemoCache=Ne,Wl.useHostTransitionStatus=Gr,Wl.useFormState=Is,Wl.useActionState=Is,Wl.useOptimistic=function(p,y){var T=K();return rs!==null?rn(T,rs,p,y):(T.baseState=p,[p,T.queue.dispatch])};var Nh={isMounted:function(p){return(p=p._reactInternals)?m(p)===p:!1},enqueueSetState:function(p,y,T){p=p._reactInternals;var L=ma(),G=ke(L);G.payload=y,T!=null&&(G.callback=T),y=Ie(p,G,L),y!==null&&(ea(y,p,L),ft(y,p,L))},enqueueReplaceState:function(p,y,T){p=p._reactInternals;var L=ma(),G=ke(L);G.tag=1,G.payload=y,T!=null&&(G.callback=T),y=Ie(p,G,L),y!==null&&(ea(y,p,L),ft(y,p,L))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var T=ma(),L=ke(T);L.tag=2,y!=null&&(L.callback=y),y=Ie(p,L,T),y!==null&&(ea(y,p,T),ft(y,p,T))}},up=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},e1=Error(a(461)),ri=!1,aa={dehydrated:null,treeContext:null,retryLane:0},Oa=_(null),Yl=null,Js=null,t1=typeof AbortController<"u"?AbortController:function(){var p=[],y=this.signal={aborted:!1,addEventListener:function(T,L){p.push(L)}};this.abort=function(){y.aborted=!0,p.forEach(function(T){return T()})}},tl=Fi.unstable_scheduleCallback,zc=Fi.unstable_NormalPriority,us={$$typeof:ho,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Rh=dn.S;dn.S=function(p,y){typeof y=="object"&&y!==null&&typeof y.then=="function"&&Ae(p,y),Rh!==null&&Rh(p,y)};var nl=_(null),_i=!1,Vs=!1,Zl=!1,Pu=typeof WeakSet=="function"?WeakSet:Set,Qs=null,Gc=!1,oi=null,za=!1,ga=null,Ic=8192,Dh={getCacheForType:function(p){var y=Bi(us),T=y.data.get(p);return T===void 0&&(T=p(),y.data.set(p,T)),T}},Qd=0,Lh=1,Uh=2,Yn=3,ds=4;if(typeof Symbol=="function"&&Symbol.for){var Rn=Symbol.for;Qd=Rn("selector.component"),Lh=Rn("selector.has_pseudo_class"),Uh=Rn("selector.role"),Yn=Rn("selector.test_id"),ds=Rn("selector.text")}var Vn=typeof WeakMap=="function"?WeakMap:Map,cn=0,Bn=null,jn=null,zn=0,ys=0,li=null,fs=!1,lr=!1,sl=!1,Kr=0,Zn=0,cr=0,Jr=0,ra=0,Ga=0,il=0,Ou=null,ur=null,zu=!1,So=0,Hs=1/0,Qr=null,dr=null,Rr=!1,al=null,kc=0,Ph=0,Bc=null,Fc=0,va=null;return ln.attemptContinuousHydration=function(p){if(p.tag===13){var y=We(p,67108864);y!==null&&ea(y,p,67108864),wm(p,67108864)}},ln.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var y=ma(),T=We(p,y);T!==null&&ea(T,p,y),wm(p,y)}},ln.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var y=C(p.pendingLanes);if(y!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;y;){var T=1<<31-La(y);p.entanglements[1]|=T,y&=~T}$e(p),(cn&6)===0&&(Hs=qi()+500,Ee(0))}}break;case 13:y=We(p,2),y!==null&&ea(y,p,2),ym(),wm(p,2)}},ln.batchedUpdates=function(p,y){return p(y)},ln.createComponentSelector=function(p){return{$$typeof:Qd,value:p}},ln.createContainer=function(p,y,T,L,G,k,oe,Me,Oe,xt){return Li(p,y,!1,null,T,L,k,oe,Me,Oe,xt,null)},ln.createHasPseudoClassSelector=function(p){return{$$typeof:Lh,value:p}},ln.createHydrationContainer=function(p,y,T,L,G,k,oe,Me,Oe,xt,Pt,Vt,Wt){return p=Li(T,L,!0,p,G,k,Me,Oe,xt,Pt,Vt,Wt),p.context=Cd(null),T=p.current,L=ma(),G=ke(L),G.callback=y??null,Ie(T,G,L),p.current.lanes=L,V(p,L),$e(p),p},ln.createPortal=function(p,y,T){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:L==null?null:""+L,children:p,containerInfo:y,implementation:T}},ln.createRoleSelector=function(p){return{$$typeof:Uh,value:p}},ln.createTestNameSelector=function(p){return{$$typeof:Yn,value:p}},ln.createTextSelector=function(p){return{$$typeof:ds,value:p}},ln.defaultOnCaughtError=function(p){console.error(p)},ln.defaultOnRecoverableError=function(p){up(p)},ln.defaultOnUncaughtError=function(p){up(p)},ln.deferredUpdates=function(p){var y=dn.T,T=Si();try{return na(32),dn.T=null,p()}finally{na(T),dn.T=y}},ln.discreteUpdates=function(p,y,T,L,G){var k=dn.T,oe=Si();try{return na(2),dn.T=null,p(y,T,L,G)}finally{na(oe),dn.T=k,cn===0&&(Hs=qi()+500)}},ln.findAllNodes=ha,ln.findBoundingRects=function(p,y){if(!xo)throw Error(a(363));y=ha(p,y),p=[];for(var T=0;T<y.length;T++)p.push(mh(y[T]));for(y=p.length-1;0<y;y--){T=p[y];for(var L=T.x,G=L+T.width,k=T.y,oe=k+T.height,Me=y-1;0<=Me;Me--)if(y!==Me){var Oe=p[Me],xt=Oe.x,Pt=xt+Oe.width,Vt=Oe.y,Wt=Vt+Oe.height;if(L>=xt&&k>=Vt&&G<=Pt&&oe<=Wt){p.splice(y,1);break}else if(L!==xt||T.width!==Oe.width||Wt<k||Vt>oe){if(!(k!==Vt||T.height!==Oe.height||Pt<L||xt>G)){xt>L&&(Oe.width+=xt-L,Oe.x=L),Pt<G&&(Oe.width=G-xt),p.splice(y,1);break}}else{Vt>k&&(Oe.height+=Vt-k,Oe.y=k),Wt<oe&&(Oe.height=oe-Vt),p.splice(y,1);break}}}return p},ln.findHostInstance=_m,ln.findHostInstanceWithNoPortals=function(p){return p=g(p),p=p!==null?M(p):null,p===null?null:wu(p.stateNode)},ln.findHostInstanceWithWarning=function(p){return _m(p)},ln.flushPassiveEffects=Di,ln.flushSyncFromReconciler=function(p){var y=cn;cn|=1;var T=dn.T,L=Si();try{if(na(2),dn.T=null,p)return p()}finally{na(L),dn.T=T,cn=y,(cn&6)===0&&Ee(0)}},ln.flushSyncWork=ym,ln.focusWithin=function(p,y){if(!xo)throw Error(a(363));for(p=nh(p),y=bg(p,y),y=Array.from(y),p=0;p<y.length;){var T=y[p++],L=T.tag;if(!go(T)){if((L===5||L===26||L===27)&&Ys(T.stateNode))return!0;for(T=T.child;T!==null;)y.push(T),T=T.sibling}}return!1},ln.getFindAllNodesFailureDescription=function(p,y){if(!xo)throw Error(a(363));var T=0,L=[];p=[nh(p),0];for(var G=0;G<p.length;){var k=p[G++],oe=k.tag,Me=p[G++],Oe=y[Me];if((oe!==5&&oe!==26&&oe!==27||!go(k))&&(yu(k,Oe)&&(L.push(Ll(Oe)),Me++,Me>T&&(T=Me)),Me<y.length))for(k=k.child;k!==null;)p.push(k,Me),k=k.sibling}if(T<y.length){for(p=[];T<y.length;T++)p.push(Ll(y[T]));return`findAllNodes was able to match part of the selector:
  `+(L.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},ln.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return wu(p.child.stateNode);default:return p.child.stateNode}},ln.injectIntoDevTools=function(){var p={bundleType:0,version:uh,rendererPackageName:Dd,currentDispatcherRef:dn,findFiberByHostInstance:Um,reconcilerVersion:"19.0.0"};if(Ld!==null&&(p.rendererConfig=Ld),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)p=!0;else{try{Cu=y.inject(p),Ua=y}catch{}p=!!y.checkDCE}}return p},ln.isAlreadyRendering=function(){return!1},ln.observeVisibleRects=function(p,y,T,L){if(!xo)throw Error(a(363));p=ha(p,y);var G=zm(p,T,L).disconnect;return{disconnect:function(){G()}}},ln.shouldError=function(){return null},ln.shouldSuspend=function(){return!1},ln.startHostTransition=function(p,y,T,L){if(p.tag!==5)throw Error(a(476));var G=Sl(p).queue;pc(p,G,y,Da,T===null?n:function(){var k=Sl(p).next.queue;return Sr(p,k,{},ma()),T(L)})},ln.updateContainer=function(p,y,T,L){var G=y.current,k=ma();return _g(G,k,p,y,T,L),k},ln.updateContainerSync=function(p,y,T,L){return y.tag===0&&Di(),_g(y.current,2,p,y,T,L),2},ln},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(IM)),IM.exports}var $E;function tX(){return $E||($E=1,GM.exports=eX()),GM.exports}var nX=tX();const sX=Vy(nX);var FM={exports:{}},VM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function iX(){return eT||(eT=1,(function(i){function e(B,J){var $=B.length;B.push(J);e:for(;0<$;){var le=$-1>>>1,re=B[le];if(0<a(re,J))B[le]=J,B[$]=re,$=le;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var J=B[0],$=B.pop();if($!==J){B[0]=$;e:for(var le=0,re=B.length,H=re>>>1;le<H;){var ee=2*(le+1)-1,ue=B[ee],me=ee+1,be=B[me];if(0>a(ue,$))me<re&&0>a(be,ue)?(B[le]=be,B[me]=$,le=me):(B[le]=ue,B[ee]=$,le=ee);else if(me<re&&0>a(be,$))B[le]=be,B[me]=$,le=me;else break e}}return J}function a(B,J){var $=B.sortIndex-J.sortIndex;return $!==0?$:B.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,x=3,g=!1,v=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var J=t(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=B)n(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=t(d)}}function C(B){if(M=!1,A(B),!v)if(t(u)!==null)v=!0,W();else{var J=t(d);J!==null&&ie(C,J.startTime-B)}}var N=!1,R=-1,O=5,U=-1;function z(){return!(i.unstable_now()-U<O)}function I(){if(N){var B=i.unstable_now();U=B;var J=!0;try{e:{v=!1,M&&(M=!1,S(R),R=-1),g=!0;var $=x;try{t:{for(A(B),m=t(u);m!==null&&!(m.expirationTime>B&&z());){var le=m.callback;if(typeof le=="function"){m.callback=null,x=m.priorityLevel;var re=le(m.expirationTime<=B);if(B=i.unstable_now(),typeof re=="function"){m.callback=re,A(B),J=!0;break t}m===t(u)&&n(u),A(B)}else n(u);m=t(u)}if(m!==null)J=!0;else{var H=t(d);H!==null&&ie(C,H.startTime-B),J=!1}}break e}finally{m=null,x=$,g=!1}J=void 0}}finally{J?V():N=!1}}}var V;if(typeof j=="function")V=function(){j(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=I,V=function(){q.postMessage(null)}}else V=function(){_(I,0)};function W(){N||(N=!0,V())}function ie(B,J){R=_(function(){B(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,W())},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(B){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var $=x;x=J;try{return B()}finally{x=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=x;x=B;try{return J()}finally{x=$}},i.unstable_scheduleCallback=function(B,J,$){var le=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?le+$:le):$=le,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=$+re,B={id:f++,callback:J,priorityLevel:B,startTime:$,expirationTime:re,sortIndex:-1},$>le?(B.sortIndex=$,e(d,B),t(u)===null&&B===t(d)&&(M?(S(R),R=-1):M=!0,ie(C,$-le))):(B.sortIndex=re,e(u,B),v||g||(v=!0,W())),B},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(B){var J=x;return function(){var $=x;x=J;try{return B.apply(this,arguments)}finally{x=$}}}})(VM)),VM}var tT;function aX(){return tT||(tT=1,FM.exports=iX()),FM.exports}var nT=aX();function A3(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const a=A3(n,e,t);if(a)return a;n=e?null:n.sibling}}function rR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const C3=rR(E.createContext(null));class oR extends E.Component{render(){return E.createElement(C3.Provider,{value:this._reactInternals},this.props.children)}}function lR(){const i=E.useContext(C3);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=E.useId();return E.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=A3(t,!1,a=>{let r=a.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const rX=Symbol.for("react.context"),oX=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===rX;function lX(){const i=lR(),[e]=E.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;oX(n)&&n!==C3&&!e.has(n)&&e.set(n,E.use(rR(n))),t=t.return}return e}function cX(){const i=lX();return E.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>E.createElement(e,null,E.createElement(t.Provider,{...n,value:i.get(t)})),e=>E.createElement(oR,{...e})),[i])}function cR(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const uR=i=>i&&i.isOrthographicCamera,uX=i=>i&&i.hasOwnProperty("current"),dX=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),ag=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?E.useLayoutEffect:E.useEffect;function N3(i){const e=E.useRef(i);return ag(()=>void(e.current=i),[i]),e}function fX(){const i=lR(),e=cX();return E.useMemo(()=>({children:t})=>{const a=!!A3(i,!0,r=>r.type===E.StrictMode)?E.StrictMode:E.Fragment;return s.jsx(a,{children:s.jsx(e,{children:t})})},[i,e])}function hX({set:i}){return ag(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const mX=(i=>(i=class extends E.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function dR(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function c0(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const $s={obj:i=>i===Object(i)&&!$s.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if($s.str(i)||$s.num(i)||$s.boo(i))return i===e;const r=$s.obj(i);if(r&&n==="reference")return i===e;const o=$s.arr(i);if(o&&t==="reference")return i===e;if((o||r)&&i===e)return!0;let l;for(l in i)if(!(l in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(l in a?e:i)if(!$s.equ(i[l],e[l],{strict:a,objects:"reference"}))return!1}else for(l in a?e:i)if(i[l]!==e[l])return!1;if($s.und(l)){if(o&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function pX(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function xX(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const fR=["children","key","ref"];function gX(i){const e={};for(const t in i)fR.includes(t)||(e[t]=i[t]);return e}function zy(i,e,t,n){const a=i;let r=a==null?void 0:a.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:gX(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=r)),r}function zx(i,e){if(!e.includes("-"))return{root:i,key:e,target:i[e]};if(e in i)return{root:i,key:e,target:i[e]};let t=i;const n=e.split("-");for(const a of n){if(typeof t!="object"||t===null){if(t!==void 0){const r=n.slice(n.indexOf(a)).join("-");return{root:t,key:r,target:void 0}}return{root:i,key:e,target:void 0}}e=a,i=t,t=t[e]}return{root:i,key:e,target:t}}const sT=/-\d+$/;function Gy(i,e){if($s.str(e.props.attach)){if(sT.test(e.props.attach)){const a=e.props.attach.replace(sT,""),{root:r,key:o}=zx(i.object,a);Array.isArray(r[o])||(r[o]=[])}const{root:t,key:n}=zx(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else $s.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function Iy(i,e){if($s.str(e.props.attach)){const{root:t,key:n}=zx(i.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[n]:t[n]=a}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const ZS=[...fR,"args","dispose","attach","object","onUpdate","dispose"],iT=new Map;function vX(i){let e=iT.get(i.constructor);try{e||(e=new i.constructor,iT.set(i.constructor,e))}catch{}return e}function yX(i,e){const t={};for(const n in e)if(!ZS.includes(n)&&!$s.equ(e[n],i.props[n])){t[n]=e[n];for(const a in e)a.startsWith(`${n}-`)&&(t[a]=e[a])}for(const n in i.props){if(ZS.includes(n)||e.hasOwnProperty(n))continue;const{root:a,key:r}=zx(i.object,n);if(a.constructor&&a.constructor.length===0){const o=vX(a);$s.und(o)||(t[r]=o[r])}else t[r]=0}return t}const bX=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],MX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ec(i,e){var t;const n=i.__r3f,a=n&&cR(n).getState(),r=n==null?void 0:n.eventCount;for(const l in e){let u=e[l];if(ZS.includes(l))continue;if(n&&MX.test(l)){typeof u=="function"?n.handlers[l]=u:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(u===void 0)continue;let{root:d,key:f,target:m}=zx(i,l);if(m===void 0&&(typeof d!="object"||d===null))throw Error(`R3F: Cannot set "${l}". Ensure it is an object before setting "${f}".`);if(m instanceof G0&&u instanceof G0)m.mask=u.mask;else if(m instanceof Lt&&dX(u))m.set(u);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof m.copy=="function"&&u!=null&&u.constructor&&m.constructor===u.constructor)m.copy(u);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&Array.isArray(u))typeof m.fromArray=="function"?m.fromArray(u):m.set(...u);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof u=="number")typeof m.setScalar=="function"?m.setScalar(u):m.set(u);else{var o;d[f]=u,a&&!a.linear&&bX.includes(f)&&(o=d[f])!=null&&o.isTexture&&d[f].format===Ai&&d[f].type===gr&&(d[f].colorSpace=Sa)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const l=n.object,u=a.internal.interaction.indexOf(l);u>-1&&a.internal.interaction.splice(u,1),n.eventCount&&l.raycast!==null&&a.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&em(n),i}function em(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function hR(i,e){i.manual||(uR(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const mr=i=>i==null?void 0:i.isObject3D;function mv(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function mR(i,e,t,n){const a=t.get(e);a&&(t.delete(e),t.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function SX(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,a)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((n,a)=>{mR(t.capturedMap,e,n,a)})}function _X(i){function e(u){const{internal:d}=i.getState(),f=u.offsetX-d.initialClick[0],m=u.offsetY-d.initialClick[1];return Math.round(Math.sqrt(f*f+m*m))}function t(u){return u.filter(d=>["Move","Over","Enter","Out","Leave"].some(f=>{var m;return(m=d.__r3f)==null?void 0:m.handlers["onPointer"+f]}))}function n(u,d){const f=i.getState(),m=new Set,x=[],g=d?d(f.internal.interaction):f.internal.interaction;for(let S=0;S<g.length;S++){const j=c0(g[S]);j&&(j.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(u,f);function v(S){const j=c0(S);if(!j||!j.events.enabled||j.raycaster.camera===null)return[];if(j.raycaster.camera===void 0){var A;j.events.compute==null||j.events.compute(u,j,(A=j.previousRoot)==null?void 0:A.getState()),j.raycaster.camera===void 0&&(j.raycaster.camera=null)}return j.raycaster.camera?j.raycaster.intersectObject(S,!0):[]}let M=g.flatMap(v).sort((S,j)=>{const A=c0(S.object),C=c0(j.object);return!A||!C?S.distance-j.distance:C.events.priority-A.events.priority||S.distance-j.distance}).filter(S=>{const j=mv(S);return m.has(j)?!1:(m.add(j),!0)});f.events.filter&&(M=f.events.filter(M,f));for(const S of M){let j=S.object;for(;j;){var _;(_=j.__r3f)!=null&&_.eventCount&&x.push({...S,eventObject:j}),j=j.parent}}if("pointerId"in u&&f.internal.capturedMap.has(u.pointerId))for(let S of f.internal.capturedMap.get(u.pointerId).values())m.has(mv(S.intersection))||x.push(S.intersection);return x}function a(u,d,f,m){if(u.length){const x={stopped:!1};for(const g of u){let v=c0(g.object);if(v||g.object.traverseAncestors(M=>{const _=c0(M);if(_)return v=_,!1}),v){const{raycaster:M,pointer:_,camera:S,internal:j}=v,A=new Q(_.x,_.y,0).unproject(S),C=z=>{var I,V;return(I=(V=j.capturedMap.get(z))==null?void 0:V.has(g.eventObject))!=null?I:!1},N=z=>{const I={intersection:g,target:d.target};j.capturedMap.has(z)?j.capturedMap.get(z).set(g.eventObject,I):j.capturedMap.set(z,new Map([[g.eventObject,I]])),d.target.setPointerCapture(z)},R=z=>{const I=j.capturedMap.get(z);I&&mR(j.capturedMap,g.eventObject,I,z)};let O={};for(let z in d){let I=d[z];typeof I!="function"&&(O[z]=I)}let U={...g,...O,pointer:_,intersections:u,stopped:x.stopped,delta:f,unprojectedPoint:A,ray:M.ray,camera:S,stopPropagation(){const z="pointerId"in d&&j.capturedMap.get(d.pointerId);if((!z||z.has(g.eventObject))&&(U.stopped=x.stopped=!0,j.hovered.size&&Array.from(j.hovered.values()).find(I=>I.eventObject===g.eventObject))){const I=u.slice(0,u.indexOf(g));r([...I,g])}},target:{hasPointerCapture:C,setPointerCapture:N,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:N,releasePointerCapture:R},nativeEvent:d};if(m(U),x.stopped===!0)break}}}return u}function r(u){const{internal:d}=i.getState();for(const f of d.hovered.values())if(!u.length||!u.find(m=>m.object===f.object&&m.index===f.index&&m.instanceId===f.instanceId)){const x=f.eventObject.__r3f;if(d.hovered.delete(mv(f)),x!=null&&x.eventCount){const g=x.handlers,v={...f,intersections:u};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function o(u,d){for(let f=0;f<d.length;f++){const m=d[f].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return d=>{const{internal:f}=i.getState();"pointerId"in d&&f.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(d.pointerId)&&(f.capturedMap.delete(d.pointerId),r([]))})}}return function(f){const{onPointerMissed:m,internal:x}=i.getState();x.lastEvent.current=f;const g=u==="onPointerMove",v=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",_=n(f,g?t:void 0),S=v?e(f):0;u==="onPointerDown"&&(x.initialClick=[f.offsetX,f.offsetY],x.initialHits=_.map(A=>A.eventObject)),v&&!_.length&&S<=2&&(o(f,x.interaction),m&&m(f)),g&&r(_);function j(A){const C=A.eventObject,N=C.__r3f;if(!(N!=null&&N.eventCount))return;const R=N.handlers;if(g){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const O=mv(A),U=x.hovered.get(O);U?U.stopped&&A.stopPropagation():(x.hovered.set(O,A),R.onPointerOver==null||R.onPointerOver(A),R.onPointerEnter==null||R.onPointerEnter(A))}R.onPointerMove==null||R.onPointerMove(A)}else{const O=R[u];O?(!v||x.initialHits.includes(C))&&(o(f,x.interaction.filter(U=>!x.initialHits.includes(U))),O(A)):v&&x.initialHits.includes(C)&&o(f,x.interaction.filter(U=>!x.initialHits.includes(U)))}}a(_,f,S,j)}}return{handlePointer:l}}const aT=i=>!!(i!=null&&i.render),R3=E.createContext(null),wX=(i,e)=>{const t=nR((l,u)=>{const d=new Q,f=new Q,m=new Q;function x(S=u().camera,j=f,A=u().size){const{width:C,height:N,top:R,left:O}=A,U=C/N;j.isVector3?m.copy(j):m.set(...j);const z=S.getWorldPosition(d).distanceTo(m);if(uR(S))return{width:C/S.zoom,height:N/S.zoom,top:R,left:O,factor:1,distance:z,aspect:U};{const I=S.fov*Math.PI/180,V=2*Math.tan(I/2)*z,F=V*(C/N);return{width:F,height:V,top:R,left:O,factor:C/F,distance:z,aspect:U}}}let g;const v=S=>l(j=>({performance:{...j.performance,current:S}})),M=new pt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>i(u(),S),advance:(S,j)=>e(S,j,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new S3,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();g&&clearTimeout(g),S.performance.current!==S.performance.min&&v(S.performance.min),g=setTimeout(()=>v(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:S=>l(j=>({...j,events:{...j.events,...S}})),setSize:(S,j,A=0,C=0)=>{const N=u().camera,R={width:S,height:j,top:A,left:C};l(O=>({size:R,viewport:{...O.viewport,...x(N,f,R)}}))},setDpr:S=>l(j=>{const A=dR(S);return{viewport:{...j.viewport,dpr:A,initialDpr:j.viewport.initialDpr||A}}}),setFrameloop:(S="always")=>{const j=u().clock;j.stop(),j.elapsedTime=0,S!=="never"&&(j.start(),j.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:E.createRef(),active:!1,frames:0,priority:0,subscribe:(S,j,A)=>{const C=u().internal;return C.priority=C.priority+(j>0?1:0),C.subscribers.push({ref:S,priority:j,store:A}),C.subscribers=C.subscribers.sort((N,R)=>N.priority-R.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(j>0?1:0),N.subscribers=N.subscribers.filter(R=>R.ref!==S))}}}}}),n=t.getState();let a=n.size,r=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:d,gl:f,set:m}=t.getState();if(u.width!==a.width||u.height!==a.height||d.dpr!==r){a=u,r=d.dpr,hR(l,u),d.dpr>0&&f.setPixelRatio(d.dpr);const x=typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(u.width,u.height,x)}l!==o&&(o=l,m(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>i(l)),t};function D3(){const i=E.useContext(R3);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function bs(i=t=>t,e){return D3()(i,e)}function Yt(i,e=0){const t=D3(),n=t.getState().internal.subscribe,a=N3(i);return ag(()=>n(a,e,t),[e,n,t]),null}const rT=new WeakMap,jX=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function pR(i,e){return function(t,...n){let a;return jX(t)?(a=rT.get(t),a||(a=new t,rT.set(t,a))):a=t,i&&i(a),Promise.all(n.map(r=>new Promise((o,l)=>a.load(r,u=>{mr(u==null?void 0:u.scene)&&Object.assign(u,pX(u.scene)),o(u)},e,u=>l(new Error(`Could not load ${r}: ${u==null?void 0:u.message}`))))))}}function B0(i,e,t,n){const a=Array.isArray(e)?e:[e],r=aR(pR(t,n),[i,...a],{equal:$s.equ});return Array.isArray(e)?r:r[0]}B0.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return Kq(pR(t),[i,...n])};B0.clear=function(i,e){const t=Array.isArray(e)?e:[e];return Jq([i,...t])};var EX={version:"9.4.2"};function TX(i){const e=sX(i);return e.injectIntoDevTools(),e}const xR=0,F0={},AX=/^three(?=[A-Z])/,Ub=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let CX=0;const NX=i=>typeof i=="function";function Pb(i){if(NX(i)){const e=`${CX++}`;return F0[e]=i,e}else Object.assign(F0,i)}function gR(i,e){const t=Ub(i),n=F0[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function RX(i,e,t){var n;return i=Ub(i)in F0?i:i.replace(AX,""),gR(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,zy(e.object,t,i,e)}function DX(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Iy(i.parent,i):mr(i.object)&&(i.object.visible=!1),i.isHidden=!0,em(i)}}function vR(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Gy(i.parent,i):mr(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,em(i)}}function L3(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var a,r;const o=F0[Ub(e.type)];e.object=(a=e.props.object)!=null?a:new o(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(ec(e.object,e.props),e.props.attach)Gy(i,e);else if(mr(e.object)&&mr(i.object)){const o=i.object.children.indexOf(t==null?void 0:t.object);if(t&&o!==-1){const l=i.object.children.indexOf(e.object);if(l!==-1){i.object.children.splice(l,1);const u=l<o?o-1:o;i.object.children.splice(u,0,e.object)}else e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const o of e.children)L3(e,o);em(e)}}function HM(i,e){e&&(e.parent=i,i.children.push(e),L3(i,e))}function oT(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),L3(i,e,t)}function yR(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():nT.unstable_scheduleCallback(nT.unstable_IdlePriority,e)}}function KS(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?Iy(i,e):mr(e.object)&&mr(i.object)&&(i.object.remove(e.object),SX(cR(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const o=e.children[r];KS(e,o,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&yR(e.object),t===void 0&&em(e)}function LX(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Gv=[];function UX(){for(const[t]of Gv){const n=t.parent;if(n){t.props.attach?Iy(n,t):mr(t.object)&&mr(n.object)&&n.object.remove(t.object);for(const a of t.children)a.props.attach?Iy(t,a):mr(a.object)&&mr(t.object)&&t.object.remove(a.object)}t.isHidden&&vR(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&yR(t.object)}for(const[t,n,a]of Gv){t.props=n;const r=t.parent;if(r){var i,e;const o=F0[Ub(t.type)];t.object=(i=t.props.object)!=null?i:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,LX(a,t.object),ec(t.object,t.props),t.props.attach?Gy(r,t):mr(t.object)&&mr(r.object)&&r.object.add(t.object);for(const l of t.children)l.props.attach?Gy(t,l):mr(l.object)&&mr(t.object)&&t.object.add(l.object);em(t)}}Gv.length=0}const qM=()=>{},lT={};let pv=xR;const PX=0,OX=4,ky=TX({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:RX,removeChild:KS,appendChild:HM,appendInitialChild:HM,insertBefore:oT,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||HM(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||KS(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||oT(n,e,t)},getRootHostContext:()=>lT,getChildHostContext:()=>lT,commitUpdate(i,e,t,n,a){var r,o,l;gR(e,n);let u=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((o=t.args)==null?void 0:o.length)||(l=n.args)!=null&&l.some((f,m)=>{var x;return f!==((x=t.args)==null?void 0:x[m])}))&&(u=!0),u)Gv.push([i,{...n},a]);else{const f=yX(i,n);Object.keys(f).length&&(Object.assign(i.props,f),ec(i.object,f))}(a.sibling===null||(a.flags&OX)===PX)&&UX()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>zy(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:DX,unhideInstance:vR,createTextInstance:qM,hideTextInstance:qM,unhideTextInstance:qM,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:E.createContext(null),setCurrentUpdatePriority(i){pv=i},getCurrentUpdatePriority(){return pv},resolveUpdatePriority(){var i;if(pv!==xR)return pv;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Uv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Uv.ContinuousEventPriority;default:return Uv.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:EX.version}),If=new Map,u0={objects:"shallow",strict:!1};function zX(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:a,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:a,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function GX(i){const e=If.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,r=n||wX($S,uT),o=t||ky.createContainer(r,Uv.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||If.set(i,{fiber:o,store:r});let l,u,d=!1,f=null;return{async configure(m={}){let x;f=new Promise(H=>x=H);let{gl:g,size:v,scene:M,events:_,onCreated:S,shadows:j=!1,linear:A=!1,flat:C=!1,legacy:N=!1,orthographic:R=!1,frameloop:O="always",dpr:U=[1,2],performance:z,raycaster:I,camera:V,onPointerMissed:F}=m,q=r.getState(),W=q.gl;if(!q.gl){const H={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},ee=typeof g=="function"?await g(H):g;aT(ee)?W=ee:W=new T3({...H,...g}),q.set({gl:W})}let ie=q.raycaster;ie||q.set({raycaster:ie=new j3});const{params:B,...J}=I||{};if($s.equ(J,ie,u0)||ec(ie,{...J}),$s.equ(B,ie.params,u0)||ec(ie,{params:{...ie.params,...B}}),!q.camera||q.camera===u&&!$s.equ(u,V,u0)){u=V;const H=V==null?void 0:V.isCamera,ee=H?V:R?new xl(0,0,0,0,.1,1e3):new ci(75,0,.1,1e3);H||(ee.position.z=5,V&&(ec(ee,V),ee.manual||("aspect"in V||"left"in V||"right"in V||"bottom"in V||"top"in V)&&(ee.manual=!0,ee.updateProjectionMatrix())),!q.camera&&!(V!=null&&V.rotation)&&ee.lookAt(0,0,0)),q.set({camera:ee}),ie.camera=ee}if(!q.scene){let H;M!=null&&M.isScene?(H=M,zy(H,r,"",{})):(H=new Kx,zy(H,r,"",{}),M&&ec(H,M)),q.set({scene:H})}_&&!q.events.handlers&&q.set({events:_(r)});const $=zX(i,v);if($s.equ($,q.size,u0)||q.setSize($.width,$.height,$.top,$.left),U&&q.viewport.dpr!==dR(U)&&q.setDpr(U),q.frameloop!==O&&q.setFrameloop(O),q.onPointerMissed||q.set({onPointerMissed:F}),z&&!$s.equ(z,q.performance,u0)&&q.set(H=>({performance:{...H.performance,...z}})),!q.xr){var le;const H=(me,be)=>{const fe=r.getState();fe.frameloop!=="never"&&uT(me,!0,fe,be)},ee=()=>{const me=r.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?H:null),me.gl.xr.isPresenting||$S(me)},ue={connect(){const me=r.getState().gl;me.xr.addEventListener("sessionstart",ee),me.xr.addEventListener("sessionend",ee)},disconnect(){const me=r.getState().gl;me.xr.removeEventListener("sessionstart",ee),me.xr.removeEventListener("sessionend",ee)}};typeof((le=W.xr)==null?void 0:le.addEventListener)=="function"&&ue.connect(),q.set({xr:ue})}if(W.shadowMap){const H=W.shadowMap.enabled,ee=W.shadowMap.type;if(W.shadowMap.enabled=!!j,$s.boo(j))W.shadowMap.type=tx;else if($s.str(j)){var re;const ue={basic:uC,percentage:Jy,soft:tx,variance:fl};W.shadowMap.type=(re=ue[j])!=null?re:tx}else $s.obj(j)&&Object.assign(W.shadowMap,j);(H!==W.shadowMap.enabled||ee!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}return ts.enabled=!N,d||(W.outputColorSpace=A?gl:Sa,W.toneMapping=C?ac:H_),q.legacy!==N&&q.set(()=>({legacy:N})),q.linear!==A&&q.set(()=>({linear:A})),q.flat!==C&&q.set(()=>({flat:C})),g&&!$s.fun(g)&&!aT(g)&&!$s.equ(g,W,u0)&&ec(W,g),l=S,d=!0,x(),this},render(m){return!d&&!f&&this.configure(),f.then(()=>{ky.updateContainer(s.jsx(IX,{store:r,children:m,onCreated:l,rootElement:i}),o,null,()=>{})}),r},unmount(){bR(i)}}}function IX({store:i,children:e,onCreated:t,rootElement:n}){return ag(()=>{const a=i.getState();a.set(r=>({internal:{...r.internal,active:!0}})),t&&t(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),s.jsx(R3.Provider,{value:i,children:e})}function bR(i,e){const t=If.get(i),n=t==null?void 0:t.fiber;if(n){const a=t==null?void 0:t.store.getState();a&&(a.internal.active=!1),ky.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var r,o,l,u;a.events.disconnect==null||a.events.disconnect(),(r=a.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(l=a.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=a.gl)!=null&&u.xr&&a.xr.disconnect(),xX(a.scene),If.delete(i)}catch{}},500)})}}function kX(i,e,t){return s.jsx(BX,{children:i,container:e,state:t})}function BX({state:i={},children:e,container:t}){const{events:n,size:a,...r}=i,o=D3(),[l]=E.useState(()=>new j3),[u]=E.useState(()=>new pt),d=N3((m,x)=>{let g;if(x.camera&&a){const v=x.camera;g=m.viewport.getCurrentViewport(v,new Q,a),v!==m.camera&&hR(v,a)}return{...m,...x,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:o,events:{...m.events,...x.events,...n},size:{...m.size,...a},viewport:{...m.viewport,...g},setEvents:v=>x.set(M=>({...M,events:{...M.events,...v}}))}}),f=E.useMemo(()=>{const m=nR((g,v)=>({...r,set:g,get:v})),x=g=>m.setState(v=>d.current(g,v));return x(o.getState()),o.subscribe(x),m},[o,t]);return s.jsx(s.Fragment,{children:ky.createPortal(s.jsx(R3.Provider,{value:f,children:e}),f,null)})}const FX=new Set,VX=new Set,HX=new Set;function XM(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function ux(i,e){switch(i){case"before":return XM(FX,e);case"after":return XM(VX,e);case"tail":return XM(HX,e)}}let WM,YM;function JS(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),WM=e.internal.subscribers;for(let a=0;a<WM.length;a++)YM=WM[a],YM.ref.current(YM.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let By=!1,QS=!1,ZM,cT,d0;function MR(i){cT=requestAnimationFrame(MR),By=!0,ZM=0,ux("before",i),QS=!0;for(const t of If.values()){var e;d0=t.store.getState(),d0.internal.active&&(d0.frameloop==="always"||d0.internal.frames>0)&&!((e=d0.gl.xr)!=null&&e.isPresenting)&&(ZM+=JS(i,d0))}if(QS=!1,ux("after",i),ZM===0)return ux("tail",i),By=!1,cancelAnimationFrame(cT)}function $S(i,e=1){var t;if(!i)return If.forEach(n=>$S(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):QS?i.internal.frames=2:i.internal.frames=1,By||(By=!0,requestAnimationFrame(MR)))}function uT(i,e=!0,t,n){if(e&&ux("before",i),t)JS(i,t,n);else for(const a of If.values())JS(i,a.store.getState());e&&ux("after",i)}const KM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qX(i){const{handlePointer:e}=_X(i);return{priority:1,enabled:!0,compute(t,n,a){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(KM).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:a}=i.getState();(t=a.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(r=>({events:{...r.events,connected:t}})),a.handlers)for(const r in a.handlers){const o=a.handlers[r],[l,u]=KM[r];t.addEventListener(l,o,{passive:u})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const r=n.handlers[a],[o]=KM[a];n.connected.removeEventListener(o,r)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function dT(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function XX({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,o]=E.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=E.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,d=i?typeof i=="number"?i:i.resize:null,f=E.useRef(!1);E.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[m,x,g]=E.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:j,top:A,width:C,height:N,bottom:R,right:O,x:U,y:z}=l.current.element.getBoundingClientRect(),I={left:j,top:A,width:C,height:N,bottom:R,right:O,x:U,y:z};l.current.element instanceof HTMLElement&&n&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),f.current&&!KX(l.current.lastBounds,I)&&o(l.current.lastBounds=I)};return[S,d?dT(S,d):S,u?dT(S,u):S]},[o,n,u,d]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function M(){l.current.element&&(l.current.resizeObserver=new a(g),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",g,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const _=S=>{!S||S===l.current.element||(v(),l.current.element=S,l.current.scrollContainers=SR(S),M())};return YX(g,!!e),WX(x),E.useEffect(()=>{v(),M()},[e,g,x]),E.useEffect(()=>v,[]),[_,r,m]}function WX(i){E.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function YX(i,e){E.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function SR(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[t,n,a].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...SR(i.parentElement)]}const ZX=["x","y","top","bottom","left","right","width","height"],KX=(i,e)=>ZX.every(t=>i[t]===e[t]);function JX({ref:i,children:e,fallback:t,resize:n,style:a,gl:r,events:o=qX,eventSource:l,eventPrefix:u,shadows:d,linear:f,flat:m,legacy:x,orthographic:g,frameloop:v,dpr:M,performance:_,raycaster:S,camera:j,scene:A,onPointerMissed:C,onCreated:N,...R}){E.useMemo(()=>Pb(Gq),[]);const O=fX(),[U,z]=XX({scroll:!0,debounce:{scroll:50,resize:0},...n}),I=E.useRef(null),V=E.useRef(null);E.useImperativeHandle(i,()=>I.current);const F=N3(C),[q,W]=E.useState(!1),[ie,B]=E.useState(!1);if(q)throw q;if(ie)throw ie;const J=E.useRef(null);ag(()=>{const le=I.current;if(z.width>0&&z.height>0&&le){J.current||(J.current=GX(le));async function re(){await J.current.configure({gl:r,scene:A,events:o,shadows:d,linear:f,flat:m,legacy:x,orthographic:g,frameloop:v,dpr:M,performance:_,raycaster:S,camera:j,size:z,onPointerMissed:(...H)=>F.current==null?void 0:F.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(l?uX(l)?l.current:l:V.current),u&&H.setEvents({compute:(ee,ue)=>{const me=ee[u+"X"],be=ee[u+"Y"];ue.pointer.set(me/ue.size.width*2-1,-(be/ue.size.height)*2+1),ue.raycaster.setFromCamera(ue.pointer,ue.camera)}}),N==null||N(H)}}),J.current.render(s.jsx(O,{children:s.jsx(mX,{set:B,children:s.jsx(E.Suspense,{fallback:s.jsx(hX,{set:W}),children:e??null})})}))}re()}}),E.useEffect(()=>{const le=I.current;if(le)return()=>bR(le)},[]);const $=l?"none":"auto";return s.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...a},...R,children:s.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:s.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function QX(i){return s.jsx(oR,{children:s.jsx(JX,{...i})})}const fT=["3D...","...","...","..."],$X=({progress:i})=>{const[e,t]=E.useState(0);return E.useEffect(()=>{const n=setInterval(()=>{t(a=>(a+1)%fT.length)},2e3);return()=>clearInterval(n)},[]),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50 z-50",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-blue-100 border-t-blue-500 animate-spin"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsx("div",{className:"mt-4 w-32 h-2 bg-blue-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full transition-all duration-300",style:{width:`${Math.max(i,10)}%`}})}),s.jsx("p",{className:"mt-3 text-base font-bold text-slate-600",children:"..."}),s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:fT[e]})]})},eW=()=>s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50/90 z-50",children:s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-100 border-t-blue-500 animate-spin"})}),tW=({onReady:i,minFrames:e=10})=>{const{gl:t,scene:n,camera:a}=bs(),r=E.useRef(0),o=E.useRef(!1),l=E.useRef(Date.now());return Yt(()=>{r.current++;const u=Date.now()-l.current;r.current>=e&&u>=300&&!o.current&&(o.current=!0,i())}),E.useEffect(()=>{const u=setTimeout(()=>{!o.current&&t&&n&&a&&(o.current=!0,i())},2e3);return()=>clearTimeout(u)},[t,n,a,i]),null},Ue=({children:i,compact:e=!1,minLoadingTime:t=800,...n})=>{const[a,r]=E.useState(!0),[o,l]=E.useState(!1),[u,d]=E.useState(!1),[f,m]=E.useState(0);E.useEffect(()=>{if(!a)return;const g=setInterval(()=>{m(v=>v<60?v+Math.random()*10:v<85?v+Math.random()*5:v<95?v+Math.random()*2:v)},100);return()=>clearInterval(g)},[a]),E.useEffect(()=>{const g=setTimeout(()=>l(!0),t);return()=>clearTimeout(g)},[t]),E.useEffect(()=>{if(o&&u){m(100);const g=setTimeout(()=>r(!1),200);return()=>clearTimeout(g)}},[o,u]);const x=E.useCallback(()=>{d(!0)},[]);return s.jsxs("div",{className:"relative w-full h-full",children:[a&&(e?s.jsx(eW,{}):s.jsx($X,{progress:f})),s.jsxs(QX,{...n,style:{...n.style,opacity:a?0:1,transition:"opacity 0.3s ease-in-out"},children:[s.jsx(tW,{onReady:x}),s.jsx(E.Suspense,{fallback:null,children:i})]})]})};function wa(){return wa=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},wa.apply(null,arguments)}const rg=new Q,U3=new Q,nW=new Q,hT=new pt;function sW(i,e,t){const n=rg.setFromMatrixPosition(i.matrixWorld);n.project(e);const a=t.width/2,r=t.height/2;return[n.x*a+a,-(n.y*r)+r]}function iW(i,e){const t=rg.setFromMatrixPosition(i.matrixWorld),n=U3.setFromMatrixPosition(e.matrixWorld),a=t.sub(n),r=e.getWorldDirection(nW);return a.angleTo(r)>Math.PI/2}function aW(i,e,t,n){const a=rg.setFromMatrixPosition(i.matrixWorld),r=a.clone();r.project(e),hT.set(r.x,r.y),t.setFromCamera(hT,e);const o=t.intersectObjects(n,!0);if(o.length){const l=o[0].distance;return a.distanceTo(t.ray.origin)<l}return!0}function rW(i,e){if(e instanceof xl)return e.zoom;if(e instanceof ci){const t=rg.setFromMatrixPosition(i.matrixWorld),n=U3.setFromMatrixPosition(e.matrixWorld),a=e.fov*Math.PI/180,r=t.distanceTo(n);return 1/(2*Math.tan(a/2)*r)}else return 1}function oW(i,e,t){if(e instanceof ci||e instanceof xl){const n=rg.setFromMatrixPosition(i.matrixWorld),a=U3.setFromMatrixPosition(e.matrixWorld),r=n.distanceTo(a),o=(t[1]-t[0])/(e.far-e.near),l=t[1]-o*e.far;return Math.round(o*r+l)}}const e_=i=>Math.abs(i)<1e-10?0:i;function _R(i,e,t=""){let n="matrix3d(";for(let a=0;a!==16;a++)n+=e_(e[a]*i.elements[a])+(a!==15?",":")");return t+n}const lW=(i=>e=>_R(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),cW=(i=>(e,t)=>_R(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function uW(i){return i&&typeof i=="object"&&"current"in i}const gs=E.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:a,center:r,fullscreen:o,portal:l,distanceFactor:u,sprite:d=!1,transform:f=!1,occlude:m,onOcclude:x,castShadow:g,receiveShadow:v,material:M,geometry:_,zIndexRange:S=[16777271,0],calculatePosition:j=sW,as:A="div",wrapperClass:C,pointerEvents:N="auto",...R},O)=>{const{gl:U,camera:z,scene:I,size:V,raycaster:F,events:q,viewport:W}=bs(),[ie]=E.useState(()=>document.createElement(A)),B=E.useRef(null),J=E.useRef(null),$=E.useRef(0),le=E.useRef([0,0]),re=E.useRef(null),H=E.useRef(null),ee=(l==null?void 0:l.current)||q.connected||U.domElement.parentNode,ue=E.useRef(null),me=E.useRef(!1),be=E.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&uW(m[0]),[m]);E.useLayoutEffect(()=>{const st=U.domElement;m&&m==="blending"?(st.style.zIndex=`${Math.floor(S[0]/2)}`,st.style.position="absolute",st.style.pointerEvents="none"):(st.style.zIndex=null,st.style.position=null,st.style.pointerEvents=null)},[m]),E.useLayoutEffect(()=>{if(J.current){const st=B.current=hA.createRoot(ie);if(I.updateMatrixWorld(),f)ie.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ve=j(J.current,z,V);ie.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ve[0]}px,${Ve[1]}px,0);transform-origin:0 0;`}return ee&&(a?ee.prepend(ie):ee.appendChild(ie)),()=>{ee&&ee.removeChild(ie),st.unmount()}}},[ee,f]),E.useLayoutEffect(()=>{C&&(ie.className=C)},[C]);const fe=E.useMemo(()=>f?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...o&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...t},[t,r,o,V,f]),ge=E.useMemo(()=>({position:"absolute",pointerEvents:N}),[N]);E.useLayoutEffect(()=>{if(me.current=!1,f){var st;(st=B.current)==null||st.render(E.createElement("div",{ref:re,style:fe},E.createElement("div",{ref:H,style:ge},E.createElement("div",{ref:O,className:n,style:t,children:i}))))}else{var Ve;(Ve=B.current)==null||Ve.render(E.createElement("div",{ref:O,style:fe,className:n,children:i}))}});const je=E.useRef(!0);Yt(st=>{if(J.current){z.updateMatrixWorld(),J.current.updateWorldMatrix(!0,!1);const Ve=f?le.current:j(J.current,z,V);if(f||Math.abs($.current-z.zoom)>e||Math.abs(le.current[0]-Ve[0])>e||Math.abs(le.current[1]-Ve[1])>e){const nt=iW(J.current,z);let St=!1;be&&(Array.isArray(m)?St=m.map(We=>We.current):m!=="blending"&&(St=[I]));const ze=je.current;if(St){const We=aW(J.current,z,F,St);je.current=We&&!nt}else je.current=!nt;ze!==je.current&&(x?x(!je.current):ie.style.display=je.current?"block":"none");const ae=Math.floor(S[0]/2),Fe=m?be?[S[0],ae]:[ae-1,0]:S;if(ie.style.zIndex=`${oW(J.current,z,Fe)}`,f){const[We,Pe]=[V.width/2,V.height/2],Ge=z.projectionMatrix.elements[5]*Pe,{isOrthographicCamera:$e,top:Ee,left:ct,bottom:te,right:Y}=z,ve=lW(z.matrixWorldInverse),Be=$e?`scale(${Ge})translate(${e_(-(Y+ct)/2)}px,${e_((Ee+te)/2)}px)`:`translateZ(${Ge}px)`;let Re=J.current.matrixWorld;d&&(Re=z.matrixWorldInverse.clone().transpose().copyPosition(Re).scale(J.current.scale),Re.elements[3]=Re.elements[7]=Re.elements[11]=0,Re.elements[15]=1),ie.style.width=V.width+"px",ie.style.height=V.height+"px",ie.style.perspective=$e?"":`${Ge}px`,re.current&&H.current&&(re.current.style.transform=`${Be}${ve}translate(${We}px,${Pe}px)`,H.current.style.transform=cW(Re,1/((u||10)/400)))}else{const We=u===void 0?1:rW(J.current,z)*u;ie.style.transform=`translate3d(${Ve[0]}px,${Ve[1]}px,0) scale(${We})`}le.current=Ve,$.current=z.zoom}}if(!be&&ue.current&&!me.current)if(f){if(re.current){const Ve=re.current.children[0];if(Ve!=null&&Ve.clientWidth&&Ve!=null&&Ve.clientHeight){const{isOrthographicCamera:nt}=z;if(nt||_)R.scale&&(Array.isArray(R.scale)?R.scale instanceof Q?ue.current.scale.copy(R.scale.clone().divideScalar(1)):ue.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):ue.current.scale.setScalar(1/R.scale));else{const St=(u||10)/400,ze=Ve.clientWidth*St,ae=Ve.clientHeight*St;ue.current.scale.set(ze,ae,1)}me.current=!0}}}else{const Ve=ie.children[0];if(Ve!=null&&Ve.clientWidth&&Ve!=null&&Ve.clientHeight){const nt=1/W.factor,St=Ve.clientWidth*nt,ze=Ve.clientHeight*nt;ue.current.scale.set(St,ze,1),me.current=!0}ue.current.lookAt(st.camera.position)}});const Qe=E.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return E.createElement("group",wa({},R,{ref:J}),m&&!be&&E.createElement("mesh",{castShadow:g,receiveShadow:v,ref:ue},_||E.createElement("planeGeometry",null),M||E.createElement("shaderMaterial",{side:Ms,vertexShader:Qe.vertexShader,fragmentShader:Qe.fragmentShader})))});function bl(i,e="pointer",t="auto",n=document.body){E.useEffect(()=>{if(i)return n.style.cursor=e,()=>void(n.style.cursor=t)},[i])}const wR=parseInt(Z0.replace(/\D+/g,""));var No=Uint8Array,sd=Uint16Array,t_=Uint32Array,jR=new No([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ER=new No([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dW=new No([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TR=function(i,e){for(var t=new sd(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var a=new t_(t[30]),n=1;n<30;++n)for(var r=t[n];r<t[n+1];++r)a[r]=r-t[n]<<5|n;return[t,a]},AR=TR(jR,2),CR=AR[0],fW=AR[1];CR[28]=258,fW[258]=28;var hW=TR(ER,0),mW=hW[0],n_=new sd(32768);for(var qs=0;qs<32768;++qs){var Qu=(qs&43690)>>>1|(qs&21845)<<1;Qu=(Qu&52428)>>>2|(Qu&13107)<<2,Qu=(Qu&61680)>>>4|(Qu&3855)<<4,n_[qs]=((Qu&65280)>>>8|(Qu&255)<<8)>>>1}var dx=(function(i,e,t){for(var n=i.length,a=0,r=new sd(e);a<n;++a)++r[i[a]-1];var o=new sd(e);for(a=0;a<e;++a)o[a]=o[a-1]+r[a-1]<<1;var l;if(t){l=new sd(1<<e);var u=15-e;for(a=0;a<n;++a)if(i[a])for(var d=a<<4|i[a],f=e-i[a],m=o[i[a]-1]++<<f,x=m|(1<<f)-1;m<=x;++m)l[n_[m]>>>u]=d}else for(l=new sd(n),a=0;a<n;++a)i[a]&&(l[a]=n_[o[i[a]-1]++]>>>15-i[a]);return l}),og=new No(288);for(var qs=0;qs<144;++qs)og[qs]=8;for(var qs=144;qs<256;++qs)og[qs]=9;for(var qs=256;qs<280;++qs)og[qs]=7;for(var qs=280;qs<288;++qs)og[qs]=8;var NR=new No(32);for(var qs=0;qs<32;++qs)NR[qs]=5;var pW=dx(og,9,1),xW=dx(NR,5,1),JM=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},ul=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},QM=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},gW=function(i){return(i/8|0)+(i&7&&1)},vW=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof sd?sd:i instanceof t_?t_:No)(t-e);return n.set(i.subarray(e,t)),n},yW=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new No(0);var a=!e||t,r=!t||t.i;t||(t={}),e||(e=new No(n*3));var o=function(fe){var ge=e.length;if(fe>ge){var je=new No(Math.max(ge*2,fe));je.set(e),e=je}},l=t.f||0,u=t.p||0,d=t.b||0,f=t.l,m=t.d,x=t.m,g=t.n,v=n*8;do{if(!f){t.f=l=ul(i,u,1);var M=ul(i,u+1,3);if(u+=3,M)if(M==1)f=pW,m=xW,x=9,g=5;else if(M==2){var A=ul(i,u,31)+257,C=ul(i,u+10,15)+4,N=A+ul(i,u+5,31)+1;u+=14;for(var R=new No(N),O=new No(19),U=0;U<C;++U)O[dW[U]]=ul(i,u+U*3,7);u+=C*3;for(var z=JM(O),I=(1<<z)-1,V=dx(O,z,1),U=0;U<N;){var F=V[ul(i,u,I)];u+=F&15;var _=F>>>4;if(_<16)R[U++]=_;else{var q=0,W=0;for(_==16?(W=3+ul(i,u,3),u+=2,q=R[U-1]):_==17?(W=3+ul(i,u,7),u+=3):_==18&&(W=11+ul(i,u,127),u+=7);W--;)R[U++]=q}}var ie=R.subarray(0,A),B=R.subarray(A);x=JM(ie),g=JM(B),f=dx(ie,x,1),m=dx(B,g,1)}else throw"invalid block type";else{var _=gW(u)+4,S=i[_-4]|i[_-3]<<8,j=_+S;if(j>n){if(r)throw"unexpected EOF";break}a&&o(d+S),e.set(i.subarray(_,j),d),t.b=d+=S,t.p=u=j*8;continue}if(u>v){if(r)throw"unexpected EOF";break}}a&&o(d+131072);for(var J=(1<<x)-1,$=(1<<g)-1,le=u;;le=u){var q=f[QM(i,u)&J],re=q>>>4;if(u+=q&15,u>v){if(r)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(re<256)e[d++]=re;else if(re==256){le=u,f=null;break}else{var H=re-254;if(re>264){var U=re-257,ee=jR[U];H=ul(i,u,(1<<ee)-1)+CR[U],u+=ee}var ue=m[QM(i,u)&$],me=ue>>>4;if(!ue)throw"invalid distance";u+=ue&15;var B=mW[me];if(me>3){var ee=ER[me];B+=QM(i,u)&(1<<ee)-1,u+=ee}if(u>v){if(r)throw"unexpected EOF";break}a&&o(d+131072);for(var be=d+H;d<be;d+=4)e[d]=e[d-B],e[d+1]=e[d+1-B],e[d+2]=e[d+2-B],e[d+3]=e[d+3-B];d=be}}t.l=f,t.p=le,t.b=d,f&&(l=1,t.m=x,t.d=m,t.n=g)}while(!l);return d==e.length?e:vW(e,0,d)},bW=new No(0),MW=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function xv(i,e){return yW((MW(i),i.subarray(2,-4)),e)}var SW=typeof TextDecoder<"u"&&new TextDecoder,_W=0;try{SW.decode(bW,{stream:!0}),_W=1}catch{}const wW=i=>i&&i.isCubeTexture;class jW extends Bs{constructor(e,t){var n,a;const r=wW(e),l=((a=r?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?a:1024)/4,u=Math.floor(Math.log2(l)),d=Math.pow(2,u),f=3*Math.max(d,112),m=4*d,x=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${u}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=x.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${wR>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new $x(1,16),S=new Zi({uniforms:M,fragmentShader:v,vertexShader:g,side:Ms});super(_,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var EW=Object.defineProperty,TW=(i,e,t)=>e in i?EW(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,AW=(i,e,t)=>(TW(i,e+"",t),t);class CW{constructor(){AW(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let r=0,o=a.length;r<o;r++)a[r].call(this,e);e.target=null}}}var NW=Object.defineProperty,RW=(i,e,t)=>e in i?NW(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,hn=(i,e,t)=>(RW(i,typeof e!="symbol"?e+"":e,t),t);const gv=new kf,mT=new $l,DW=Math.cos(70*(Math.PI/180)),pT=(i,e)=>(i%e+e)%e;let LW=class extends CW{constructor(e,t){super(),hn(this,"object"),hn(this,"domElement"),hn(this,"enabled",!0),hn(this,"target",new Q),hn(this,"minDistance",0),hn(this,"maxDistance",1/0),hn(this,"minZoom",0),hn(this,"maxZoom",1/0),hn(this,"minPolarAngle",0),hn(this,"maxPolarAngle",Math.PI),hn(this,"minAzimuthAngle",-1/0),hn(this,"maxAzimuthAngle",1/0),hn(this,"enableDamping",!1),hn(this,"dampingFactor",.05),hn(this,"enableZoom",!0),hn(this,"zoomSpeed",1),hn(this,"enableRotate",!0),hn(this,"rotateSpeed",1),hn(this,"enablePan",!0),hn(this,"panSpeed",1),hn(this,"screenSpacePanning",!0),hn(this,"keyPanSpeed",7),hn(this,"zoomToCursor",!1),hn(this,"autoRotate",!1),hn(this,"autoRotateSpeed",2),hn(this,"reverseOrbit",!1),hn(this,"reverseHorizontalOrbit",!1),hn(this,"reverseVerticalOrbit",!1),hn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),hn(this,"mouseButtons",{LEFT:vf.ROTATE,MIDDLE:vf.DOLLY,RIGHT:vf.PAN}),hn(this,"touches",{ONE:yf.ROTATE,TWO:yf.DOLLY_PAN}),hn(this,"target0"),hn(this,"position0"),hn(this,"zoom0"),hn(this,"_domElementKeyEvents",null),hn(this,"getPolarAngle"),hn(this,"getAzimuthalAngle"),hn(this,"setPolarAngle"),hn(this,"setAzimuthalAngle"),hn(this,"getDistance"),hn(this,"getZoomScale"),hn(this,"listenToKeyEvents"),hn(this,"stopListenToKeyEvents"),hn(this,"saveState"),hn(this,"reset"),hn(this,"update"),hn(this,"connect"),hn(this,"dispose"),hn(this,"dollyIn"),hn(this,"dollyOut"),hn(this,"getScale"),hn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=he=>{let Ce=pT(he,2*Math.PI),ut=f.phi;ut<0&&(ut+=2*Math.PI),Ce<0&&(Ce+=2*Math.PI);let pe=Math.abs(Ce-ut);2*Math.PI-pe<pe&&(Ce<ut?Ce+=2*Math.PI:ut+=2*Math.PI),m.phi=Ce-ut,n.update()},this.setAzimuthalAngle=he=>{let Ce=pT(he,2*Math.PI),ut=f.theta;ut<0&&(ut+=2*Math.PI),Ce<0&&(Ce+=2*Math.PI);let pe=Math.abs(Ce-ut);2*Math.PI-pe<pe&&(Ce<ut?Ce+=2*Math.PI:ut+=2*Math.PI),m.theta=Ce-ut,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",Ae),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ae),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),u=l.NONE},this.update=(()=>{const he=new Q,Ce=new Q(0,1,0),ut=new Wn().setFromUnitVectors(e.up,Ce),pe=ut.clone().invert(),we=new Q,lt=new Wn,jt=2*Math.PI;return function(){const qe=n.object.position;ut.setFromUnitVectors(e.up,Ce),pe.copy(ut).invert(),he.copy(qe).sub(n.target),he.applyQuaternion(ut),f.setFromVector3(he),n.autoRotate&&u===l.NONE&&W(F()),n.enableDamping?(f.theta+=m.theta*n.dampingFactor,f.phi+=m.phi*n.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi);let Tt=n.minAzimuthAngle,zt=n.maxAzimuthAngle;isFinite(Tt)&&isFinite(zt)&&(Tt<-Math.PI?Tt+=jt:Tt>Math.PI&&(Tt-=jt),zt<-Math.PI?zt+=jt:zt>Math.PI&&(zt-=jt),Tt<=zt?f.theta=Math.max(Tt,Math.min(zt,f.theta)):f.theta=f.theta>(Tt+zt)/2?Math.max(Tt,f.theta):Math.min(zt,f.theta)),f.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,f.phi)),f.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),n.zoomToCursor&&z||n.object.isOrthographicCamera?f.radius=ue(f.radius):f.radius=ue(f.radius*x),he.setFromSpherical(f),he.applyQuaternion(pe),qe.copy(n.target).add(he),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),g.set(0,0,0));let It=!1;if(n.zoomToCursor&&z){let Zt=null;if(n.object instanceof ci&&n.object.isPerspectiveCamera){const An=he.length();Zt=ue(An*x);const In=An-Zt;n.object.position.addScaledVector(O,In),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const An=new Q(U.x,U.y,0);An.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),It=!0;const In=new Q(U.x,U.y,0);In.unproject(n.object),n.object.position.sub(In).add(An),n.object.updateMatrixWorld(),Zt=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Zt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Zt).add(n.object.position):(gv.origin.copy(n.object.position),gv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(gv.direction))<DW?e.lookAt(n.target):(mT.setFromNormalAndCoplanarPoint(n.object.up,n.target),gv.intersectPlane(mT,n.target))))}else n.object instanceof xl&&n.object.isOrthographicCamera&&(It=x!==1,It&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,z=!1,It||we.distanceToSquared(n.object.position)>d||8*(1-lt.dot(n.object.quaternion))>d?(n.dispatchEvent(a),we.copy(n.object.position),lt.copy(n.object.quaternion),It=!1,!0):!1}})(),this.connect=he=>{n.domElement=he,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Dt),n.domElement.addEventListener("pointerdown",ct),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",Re)},this.dispose=()=>{var he,Ce,ut,pe,we,lt;n.domElement&&(n.domElement.style.touchAction="auto"),(he=n.domElement)==null||he.removeEventListener("contextmenu",Dt),(Ce=n.domElement)==null||Ce.removeEventListener("pointerdown",ct),(ut=n.domElement)==null||ut.removeEventListener("pointercancel",Y),(pe=n.domElement)==null||pe.removeEventListener("wheel",Re),(we=n.domElement)==null||we.ownerDocument.removeEventListener("pointermove",te),(lt=n.domElement)==null||lt.ownerDocument.removeEventListener("pointerup",Y),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ae)};const n=this,a={type:"change"},r={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const d=1e-6,f=new Oy,m=new Oy;let x=1;const g=new Q,v=new pt,M=new pt,_=new pt,S=new pt,j=new pt,A=new pt,C=new pt,N=new pt,R=new pt,O=new Q,U=new pt;let z=!1;const I=[],V={};function F(){return 2*Math.PI/60/60*n.autoRotateSpeed}function q(){return Math.pow(.95,n.zoomSpeed)}function W(he){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=he:m.theta-=he}function ie(he){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=he:m.phi-=he}const B=(()=>{const he=new Q;return function(ut,pe){he.setFromMatrixColumn(pe,0),he.multiplyScalar(-ut),g.add(he)}})(),J=(()=>{const he=new Q;return function(ut,pe){n.screenSpacePanning===!0?he.setFromMatrixColumn(pe,1):(he.setFromMatrixColumn(pe,0),he.crossVectors(n.object.up,he)),he.multiplyScalar(ut),g.add(he)}})(),$=(()=>{const he=new Q;return function(ut,pe){const we=n.domElement;if(we&&n.object instanceof ci&&n.object.isPerspectiveCamera){const lt=n.object.position;he.copy(lt).sub(n.target);let jt=he.length();jt*=Math.tan(n.object.fov/2*Math.PI/180),B(2*ut*jt/we.clientHeight,n.object.matrix),J(2*pe*jt/we.clientHeight,n.object.matrix)}else we&&n.object instanceof xl&&n.object.isOrthographicCamera?(B(ut*(n.object.right-n.object.left)/n.object.zoom/we.clientWidth,n.object.matrix),J(pe*(n.object.top-n.object.bottom)/n.object.zoom/we.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function le(he){n.object instanceof ci&&n.object.isPerspectiveCamera||n.object instanceof xl&&n.object.isOrthographicCamera?x=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function re(he){le(x/he)}function H(he){le(x*he)}function ee(he){if(!n.zoomToCursor||!n.domElement)return;z=!0;const Ce=n.domElement.getBoundingClientRect(),ut=he.clientX-Ce.left,pe=he.clientY-Ce.top,we=Ce.width,lt=Ce.height;U.x=ut/we*2-1,U.y=-(pe/lt)*2+1,O.set(U.x,U.y,1).unproject(n.object).sub(n.object.position).normalize()}function ue(he){return Math.max(n.minDistance,Math.min(n.maxDistance,he))}function me(he){v.set(he.clientX,he.clientY)}function be(he){ee(he),C.set(he.clientX,he.clientY)}function fe(he){S.set(he.clientX,he.clientY)}function ge(he){M.set(he.clientX,he.clientY),_.subVectors(M,v).multiplyScalar(n.rotateSpeed);const Ce=n.domElement;Ce&&(W(2*Math.PI*_.x/Ce.clientHeight),ie(2*Math.PI*_.y/Ce.clientHeight)),v.copy(M),n.update()}function je(he){N.set(he.clientX,he.clientY),R.subVectors(N,C),R.y>0?re(q()):R.y<0&&H(q()),C.copy(N),n.update()}function Qe(he){j.set(he.clientX,he.clientY),A.subVectors(j,S).multiplyScalar(n.panSpeed),$(A.x,A.y),S.copy(j),n.update()}function st(he){ee(he),he.deltaY<0?H(q()):he.deltaY>0&&re(q()),n.update()}function Ve(he){let Ce=!1;switch(he.code){case n.keys.UP:$(0,n.keyPanSpeed),Ce=!0;break;case n.keys.BOTTOM:$(0,-n.keyPanSpeed),Ce=!0;break;case n.keys.LEFT:$(n.keyPanSpeed,0),Ce=!0;break;case n.keys.RIGHT:$(-n.keyPanSpeed,0),Ce=!0;break}Ce&&(he.preventDefault(),n.update())}function nt(){if(I.length==1)v.set(I[0].pageX,I[0].pageY);else{const he=.5*(I[0].pageX+I[1].pageX),Ce=.5*(I[0].pageY+I[1].pageY);v.set(he,Ce)}}function St(){if(I.length==1)S.set(I[0].pageX,I[0].pageY);else{const he=.5*(I[0].pageX+I[1].pageX),Ce=.5*(I[0].pageY+I[1].pageY);S.set(he,Ce)}}function ze(){const he=I[0].pageX-I[1].pageX,Ce=I[0].pageY-I[1].pageY,ut=Math.sqrt(he*he+Ce*Ce);C.set(0,ut)}function ae(){n.enableZoom&&ze(),n.enablePan&&St()}function Fe(){n.enableZoom&&ze(),n.enableRotate&&nt()}function We(he){if(I.length==1)M.set(he.pageX,he.pageY);else{const ut=ft(he),pe=.5*(he.pageX+ut.x),we=.5*(he.pageY+ut.y);M.set(pe,we)}_.subVectors(M,v).multiplyScalar(n.rotateSpeed);const Ce=n.domElement;Ce&&(W(2*Math.PI*_.x/Ce.clientHeight),ie(2*Math.PI*_.y/Ce.clientHeight)),v.copy(M)}function Pe(he){if(I.length==1)j.set(he.pageX,he.pageY);else{const Ce=ft(he),ut=.5*(he.pageX+Ce.x),pe=.5*(he.pageY+Ce.y);j.set(ut,pe)}A.subVectors(j,S).multiplyScalar(n.panSpeed),$(A.x,A.y),S.copy(j)}function Ge(he){const Ce=ft(he),ut=he.pageX-Ce.x,pe=he.pageY-Ce.y,we=Math.sqrt(ut*ut+pe*pe);N.set(0,we),R.set(0,Math.pow(N.y/C.y,n.zoomSpeed)),re(R.y),C.copy(N)}function $e(he){n.enableZoom&&Ge(he),n.enablePan&&Pe(he)}function Ee(he){n.enableZoom&&Ge(he),n.enableRotate&&We(he)}function ct(he){var Ce,ut;n.enabled!==!1&&(I.length===0&&((Ce=n.domElement)==null||Ce.ownerDocument.addEventListener("pointermove",te),(ut=n.domElement)==null||ut.ownerDocument.addEventListener("pointerup",Y)),Nt(he),he.pointerType==="touch"?yt(he):ve(he))}function te(he){n.enabled!==!1&&(he.pointerType==="touch"?gt(he):Be(he))}function Y(he){var Ce,ut,pe;ke(he),I.length===0&&((Ce=n.domElement)==null||Ce.releasePointerCapture(he.pointerId),(ut=n.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",te),(pe=n.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(o),u=l.NONE}function ve(he){let Ce;switch(he.button){case 0:Ce=n.mouseButtons.LEFT;break;case 1:Ce=n.mouseButtons.MIDDLE;break;case 2:Ce=n.mouseButtons.RIGHT;break;default:Ce=-1}switch(Ce){case vf.DOLLY:if(n.enableZoom===!1)return;be(he),u=l.DOLLY;break;case vf.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enablePan===!1)return;fe(he),u=l.PAN}else{if(n.enableRotate===!1)return;me(he),u=l.ROTATE}break;case vf.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enableRotate===!1)return;me(he),u=l.ROTATE}else{if(n.enablePan===!1)return;fe(he),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(r)}function Be(he){if(n.enabled!==!1)switch(u){case l.ROTATE:if(n.enableRotate===!1)return;ge(he);break;case l.DOLLY:if(n.enableZoom===!1)return;je(he);break;case l.PAN:if(n.enablePan===!1)return;Qe(he);break}}function Re(he){n.enabled===!1||n.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(he.preventDefault(),n.dispatchEvent(r),st(he),n.dispatchEvent(o))}function Ae(he){n.enabled===!1||n.enablePan===!1||Ve(he)}function yt(he){switch(Ie(he),I.length){case 1:switch(n.touches.ONE){case yf.ROTATE:if(n.enableRotate===!1)return;nt(),u=l.TOUCH_ROTATE;break;case yf.PAN:if(n.enablePan===!1)return;St(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(n.touches.TWO){case yf.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ae(),u=l.TOUCH_DOLLY_PAN;break;case yf.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Fe(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(r)}function gt(he){switch(Ie(he),u){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;We(he),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;Pe(he),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;$e(he),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ee(he),n.update();break;default:u=l.NONE}}function Dt(he){n.enabled!==!1&&he.preventDefault()}function Nt(he){I.push(he)}function ke(he){delete V[he.pointerId];for(let Ce=0;Ce<I.length;Ce++)if(I[Ce].pointerId==he.pointerId){I.splice(Ce,1);return}}function Ie(he){let Ce=V[he.pointerId];Ce===void 0&&(Ce=new pt,V[he.pointerId]=Ce),Ce.set(he.pageX,he.pageY)}function ft(he){const Ce=he.pointerId===I[0].pointerId?I[1]:I[0];return V[Ce.pointerId]}this.dollyIn=(he=q())=>{H(he),n.update()},this.dollyOut=(he=q())=>{re(he),n.update()},this.getScale=()=>x,this.setScale=he=>{le(he),n.update()},this.getZoomScale=()=>q(),t!==void 0&&this.connect(t),this.update()}};const UW={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},PW={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class OW extends v3{constructor(e){super(e),this.type=Ti}parse(e){const o=function(U,z){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(z||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(z||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(z||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(z||""))}},m=function(U,z,I){z=z||1024;let F=U.pos,q=-1,W=0,ie="",B=String.fromCharCode.apply(null,new Uint16Array(U.subarray(F,F+128)));for(;0>(q=B.indexOf(`
`))&&W<z&&F<U.byteLength;)ie+=B,W+=B.length,F+=128,B+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(F,F+128)));return-1<q?(U.pos+=W+q+1,ie+B.slice(0,q)):!1},x=function(U){const z=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*FORMAT=(\S+)\s*$/,q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ie,B;for((U.pos>=U.byteLength||!(ie=m(U)))&&o(1,"no header found"),(B=ie.match(z))||o(3,"bad initial token"),W.valid|=1,W.programtype=B[1],W.string+=ie+`
`;ie=m(U),ie!==!1;){if(W.string+=ie+`
`,ie.charAt(0)==="#"){W.comments+=ie+`
`;continue}if((B=ie.match(I))&&(W.gamma=parseFloat(B[1])),(B=ie.match(V))&&(W.exposure=parseFloat(B[1])),(B=ie.match(F))&&(W.valid|=2,W.format=B[1]),(B=ie.match(q))&&(W.valid|=4,W.height=parseInt(B[1],10),W.width=parseInt(B[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||o(3,"missing format specifier"),W.valid&4||o(3,"missing image size specifier"),W},g=function(U,z,I){const V=z;if(V<8||V>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);V!==(U[2]<<8|U[3])&&o(3,"wrong scanline width");const F=new Uint8Array(4*z*I);F.length||o(4,"unable to allocate buffer space");let q=0,W=0;const ie=4*V,B=new Uint8Array(4),J=new Uint8Array(ie);let $=I;for(;$>0&&W<U.byteLength;){W+4>U.byteLength&&o(1),B[0]=U[W++],B[1]=U[W++],B[2]=U[W++],B[3]=U[W++],(B[0]!=2||B[1]!=2||(B[2]<<8|B[3])!=V)&&o(3,"bad rgbe scanline format");let le=0,re;for(;le<ie&&W<U.byteLength;){re=U[W++];const ee=re>128;if(ee&&(re-=128),(re===0||le+re>ie)&&o(3,"bad scanline data"),ee){const ue=U[W++];for(let me=0;me<re;me++)J[le++]=ue}else J.set(U.subarray(W,W+re),le),le+=re,W+=re}const H=V;for(let ee=0;ee<H;ee++){let ue=0;F[q]=J[ee+ue],ue+=V,F[q+1]=J[ee+ue],ue+=V,F[q+2]=J[ee+ue],ue+=V,F[q+3]=J[ee+ue],q+=4}$--}return F},v=function(U,z,I,V){const F=U[z+3],q=Math.pow(2,F-128)/255;I[V+0]=U[z+0]*q,I[V+1]=U[z+1]*q,I[V+2]=U[z+2]*q,I[V+3]=1},M=function(U,z,I,V){const F=U[z+3],q=Math.pow(2,F-128)/255;I[V+0]=Tf.toHalfFloat(Math.min(U[z+0]*q,65504)),I[V+1]=Tf.toHalfFloat(Math.min(U[z+1]*q,65504)),I[V+2]=Tf.toHalfFloat(Math.min(U[z+2]*q,65504)),I[V+3]=Tf.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const S=x(_),j=S.width,A=S.height,C=g(_.subarray(_.pos),j,A);let N,R,O;switch(this.type){case ti:O=C.length/4;const U=new Float32Array(O*4);for(let I=0;I<O;I++)v(C,I*4,U,I*4);N=U,R=ti;break;case Ti:O=C.length/4;const z=new Uint16Array(O*4);for(let I=0;I<O;I++)M(C,I*4,z,I*4);N=z,R=Ti;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:j,height:A,data:N,header:S.string,gamma:S.gamma,exposure:S.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,n,a){function r(o,l){switch(o.type){case ti:case Ti:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=ss,o.magFilter=ss,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,l)}return super.load(e,r,n,a)}}const zp=wR>=152;class zW extends v3{constructor(e){super(e),this.type=Ti}parse(e){const z=Math.pow(2.7182818,2.2);function I(Z,ce){for(var _e=0,Ye=0;Ye<65536;++Ye)(Ye==0||Z[Ye>>3]&1<<(Ye&7))&&(ce[_e++]=Ye);for(var at=_e-1;_e<65536;)ce[_e++]=0;return at}function V(Z){for(var ce=0;ce<16384;ce++)Z[ce]={},Z[ce].len=0,Z[ce].lit=0,Z[ce].p=null}const F={l:0,c:0,lc:0};function q(Z,ce,_e,Ye,at){for(;_e<Z;)ce=ce<<8|ft(Ye,at),_e+=8;_e-=Z,F.l=ce>>_e&(1<<Z)-1,F.c=ce,F.lc=_e}const W=new Array(59);function ie(Z){for(var ce=0;ce<=58;++ce)W[ce]=0;for(var ce=0;ce<65537;++ce)W[Z[ce]]+=1;for(var _e=0,ce=58;ce>0;--ce){var Ye=_e+W[ce]>>1;W[ce]=_e,_e=Ye}for(var ce=0;ce<65537;++ce){var at=Z[ce];at>0&&(Z[ce]=at|W[at]++<<6)}}function B(Z,ce,_e,Ye,at,it,Ct){for(var wt=_e,_t=0,K=0;at<=it;at++){if(wt.value-_e.value>Ye)return!1;q(6,_t,K,Z,wt);var xe=F.l;if(_t=F.c,K=F.lc,Ct[at]=xe,xe==63){if(wt.value-_e.value>Ye)throw"Something wrong with hufUnpackEncTable";q(8,_t,K,Z,wt);var de=F.l+6;if(_t=F.c,K=F.lc,at+de>it+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)Ct[at++]=0;at--}else if(xe>=59){var de=xe-59+2;if(at+de>it+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)Ct[at++]=0;at--}}ie(Ct)}function J(Z){return Z&63}function $(Z){return Z>>6}function le(Z,ce,_e,Ye){for(;ce<=_e;ce++){var at=$(Z[ce]),it=J(Z[ce]);if(at>>it)throw"Invalid table entry";if(it>14){var Ct=Ye[at>>it-14];if(Ct.len)throw"Invalid table entry";if(Ct.lit++,Ct.p){var wt=Ct.p;Ct.p=new Array(Ct.lit);for(var _t=0;_t<Ct.lit-1;++_t)Ct.p[_t]=wt[_t]}else Ct.p=new Array(1);Ct.p[Ct.lit-1]=ce}else if(it)for(var K=0,_t=1<<14-it;_t>0;_t--){var Ct=Ye[(at<<14-it)+K];if(Ct.len||Ct.p)throw"Invalid table entry";Ct.len=it,Ct.lit=ce,K++}}return!0}const re={c:0,lc:0};function H(Z,ce,_e,Ye){Z=Z<<8|ft(_e,Ye),ce+=8,re.c=Z,re.lc=ce}const ee={c:0,lc:0};function ue(Z,ce,_e,Ye,at,it,Ct,wt,_t,K){if(Z==ce){Ye<8&&(H(_e,Ye,at,Ct),_e=re.c,Ye=re.lc),Ye-=8;var xe=_e>>Ye,xe=new Uint8Array([xe])[0];if(_t.value+xe>K)return!1;for(var de=wt[_t.value-1];xe-- >0;)wt[_t.value++]=de}else if(_t.value<K)wt[_t.value++]=Z;else return!1;ee.c=_e,ee.lc=Ye}function me(Z){return Z&65535}function be(Z){var ce=me(Z);return ce>32767?ce-65536:ce}const fe={a:0,b:0};function ge(Z,ce){var _e=be(Z),Ye=be(ce),at=Ye,it=_e+(at&1)+(at>>1),Ct=it,wt=it-at;fe.a=Ct,fe.b=wt}function je(Z,ce){var _e=me(Z),Ye=me(ce),at=_e-(Ye>>1)&65535,it=Ye+at-32768&65535;fe.a=it,fe.b=at}function Qe(Z,ce,_e,Ye,at,it,Ct){for(var wt=Ct<16384,_t=_e>at?at:_e,K=1,xe;K<=_t;)K<<=1;for(K>>=1,xe=K,K>>=1;K>=1;){for(var de=0,Ne=de+it*(at-xe),ye=it*K,Ke=it*xe,dt=Ye*K,Mt=Ye*xe,At,Gt,kt,Bt;de<=Ne;de+=Ke){for(var Ft=de,xn=de+Ye*(_e-xe);Ft<=xn;Ft+=Mt){var Qt=Ft+dt,rn=Ft+ye,Mn=rn+dt;wt?(ge(Z[Ft+ce],Z[rn+ce]),At=fe.a,kt=fe.b,ge(Z[Qt+ce],Z[Mn+ce]),Gt=fe.a,Bt=fe.b,ge(At,Gt),Z[Ft+ce]=fe.a,Z[Qt+ce]=fe.b,ge(kt,Bt),Z[rn+ce]=fe.a,Z[Mn+ce]=fe.b):(je(Z[Ft+ce],Z[rn+ce]),At=fe.a,kt=fe.b,je(Z[Qt+ce],Z[Mn+ce]),Gt=fe.a,Bt=fe.b,je(At,Gt),Z[Ft+ce]=fe.a,Z[Qt+ce]=fe.b,je(kt,Bt),Z[rn+ce]=fe.a,Z[Mn+ce]=fe.b)}if(_e&K){var rn=Ft+ye;wt?ge(Z[Ft+ce],Z[rn+ce]):je(Z[Ft+ce],Z[rn+ce]),At=fe.a,Z[rn+ce]=fe.b,Z[Ft+ce]=At}}if(at&K)for(var Ft=de,xn=de+Ye*(_e-xe);Ft<=xn;Ft+=Mt){var Qt=Ft+dt;wt?ge(Z[Ft+ce],Z[Qt+ce]):je(Z[Ft+ce],Z[Qt+ce]),At=fe.a,Z[Qt+ce]=fe.b,Z[Ft+ce]=At}xe=K,K>>=1}return de}function st(Z,ce,_e,Ye,at,it,Ct,wt,_t,K){for(var xe=0,de=0,Ne=wt,ye=Math.trunc(at.value+(it+7)/8);at.value<ye;)for(H(xe,de,_e,at),xe=re.c,de=re.lc;de>=14;){var Ke=xe>>de-14&16383,dt=ce[Ke];if(dt.len)de-=dt.len,ue(dt.lit,Ct,xe,de,_e,Ye,at,_t,K,Ne),xe=ee.c,de=ee.lc;else{if(!dt.p)throw"hufDecode issues";var Mt;for(Mt=0;Mt<dt.lit;Mt++){for(var At=J(Z[dt.p[Mt]]);de<At&&at.value<ye;)H(xe,de,_e,at),xe=re.c,de=re.lc;if(de>=At&&$(Z[dt.p[Mt]])==(xe>>de-At&(1<<At)-1)){de-=At,ue(dt.p[Mt],Ct,xe,de,_e,Ye,at,_t,K,Ne),xe=ee.c,de=ee.lc;break}}if(Mt==dt.lit)throw"hufDecode issues"}}var Gt=8-it&7;for(xe>>=Gt,de-=Gt;de>0;){var dt=ce[xe<<14-de&16383];if(dt.len)de-=dt.len,ue(dt.lit,Ct,xe,de,_e,Ye,at,_t,K,Ne),xe=ee.c,de=ee.lc;else throw"hufDecode issues"}return!0}function Ve(Z,ce,_e,Ye,at,it){var Ct={value:0},wt=_e.value,_t=Ie(ce,_e),K=Ie(ce,_e);_e.value+=4;var xe=Ie(ce,_e);if(_e.value+=4,_t<0||_t>=65537||K<0||K>=65537)throw"Something wrong with HUF_ENCSIZE";var de=new Array(65537),Ne=new Array(16384);V(Ne);var ye=Ye-(_e.value-wt);if(B(Z,ce,_e,ye,_t,K,de),xe>8*(Ye-(_e.value-wt)))throw"Something wrong with hufUncompress";le(de,_t,K,Ne),st(de,Ne,Z,ce,_e,xe,K,it,at,Ct)}function nt(Z,ce,_e){for(var Ye=0;Ye<_e;++Ye)ce[Ye]=Z[ce[Ye]]}function St(Z){for(var ce=1;ce<Z.length;ce++){var _e=Z[ce-1]+Z[ce]-128;Z[ce]=_e}}function ze(Z,ce){for(var _e=0,Ye=Math.floor((Z.length+1)/2),at=0,it=Z.length-1;!(at>it||(ce[at++]=Z[_e++],at>it));)ce[at++]=Z[Ye++]}function ae(Z){for(var ce=Z.byteLength,_e=new Array,Ye=0,at=new DataView(Z);ce>0;){var it=at.getInt8(Ye++);if(it<0){var Ct=-it;ce-=Ct+1;for(var wt=0;wt<Ct;wt++)_e.push(at.getUint8(Ye++))}else{var Ct=it;ce-=2;for(var _t=at.getUint8(Ye++),wt=0;wt<Ct+1;wt++)_e.push(_t)}}return _e}function Fe(Z,ce,_e,Ye,at,it){var Qt=new DataView(it.buffer),Ct=_e[Z.idx[0]].width,wt=_e[Z.idx[0]].height,_t=3,K=Math.floor(Ct/8),xe=Math.ceil(Ct/8),de=Math.ceil(wt/8),Ne=Ct-(xe-1)*8,ye=wt-(de-1)*8,Ke={value:0},dt=new Array(_t),Mt=new Array(_t),At=new Array(_t),Gt=new Array(_t),kt=new Array(_t);for(let Kt=0;Kt<_t;++Kt)kt[Kt]=ce[Z.idx[Kt]],dt[Kt]=Kt<1?0:dt[Kt-1]+xe*de,Mt[Kt]=new Float32Array(64),At[Kt]=new Uint16Array(64),Gt[Kt]=new Uint16Array(xe*64);for(let Kt=0;Kt<de;++Kt){var Bt=8;Kt==de-1&&(Bt=ye);var Ft=8;for(let kn=0;kn<xe;++kn){kn==xe-1&&(Ft=Ne);for(let Jt=0;Jt<_t;++Jt)At[Jt].fill(0),At[Jt][0]=at[dt[Jt]++],We(Ke,Ye,At[Jt]),Pe(At[Jt],Mt[Jt]),Ge(Mt[Jt]);$e(Mt);for(let Jt=0;Jt<_t;++Jt)Ee(Mt[Jt],Gt[Jt],kn*64)}let Cn=0;for(let kn=0;kn<_t;++kn){const Jt=_e[Z.idx[kn]].type;for(let Ls=8*Kt;Ls<8*Kt+Bt;++Ls){Cn=kt[kn][Ls];for(let Ln=0;Ln<K;++Ln){const On=Ln*64+(Ls&7)*8;Qt.setUint16(Cn+0*Jt,Gt[kn][On+0],!0),Qt.setUint16(Cn+2*Jt,Gt[kn][On+1],!0),Qt.setUint16(Cn+4*Jt,Gt[kn][On+2],!0),Qt.setUint16(Cn+6*Jt,Gt[kn][On+3],!0),Qt.setUint16(Cn+8*Jt,Gt[kn][On+4],!0),Qt.setUint16(Cn+10*Jt,Gt[kn][On+5],!0),Qt.setUint16(Cn+12*Jt,Gt[kn][On+6],!0),Qt.setUint16(Cn+14*Jt,Gt[kn][On+7],!0),Cn+=16*Jt}}if(K!=xe)for(let Ls=8*Kt;Ls<8*Kt+Bt;++Ls){const Ln=kt[kn][Ls]+8*K*2*Jt,On=K*64+(Ls&7)*8;for(let as=0;as<Ft;++as)Qt.setUint16(Ln+as*2*Jt,Gt[kn][On+as],!0)}}}for(var xn=new Uint16Array(Ct),Qt=new DataView(it.buffer),rn=0;rn<_t;++rn){_e[Z.idx[rn]].decoded=!0;var Mn=_e[Z.idx[rn]].type;if(_e[rn].type==2)for(var $t=0;$t<wt;++$t){const Kt=kt[rn][$t];for(var gn=0;gn<Ct;++gn)xn[gn]=Qt.getUint16(Kt+gn*2*Mn,!0);for(var gn=0;gn<Ct;++gn)Qt.setFloat32(Kt+gn*2*Mn,we(xn[gn]),!0)}}}function We(Z,ce,_e){for(var Ye,at=1;at<64;)Ye=ce[Z.value],Ye==65280?at=64:Ye>>8==255?at+=Ye&255:(_e[at]=Ye,at++),Z.value++}function Pe(Z,ce){ce[0]=we(Z[0]),ce[1]=we(Z[1]),ce[2]=we(Z[5]),ce[3]=we(Z[6]),ce[4]=we(Z[14]),ce[5]=we(Z[15]),ce[6]=we(Z[27]),ce[7]=we(Z[28]),ce[8]=we(Z[2]),ce[9]=we(Z[4]),ce[10]=we(Z[7]),ce[11]=we(Z[13]),ce[12]=we(Z[16]),ce[13]=we(Z[26]),ce[14]=we(Z[29]),ce[15]=we(Z[42]),ce[16]=we(Z[3]),ce[17]=we(Z[8]),ce[18]=we(Z[12]),ce[19]=we(Z[17]),ce[20]=we(Z[25]),ce[21]=we(Z[30]),ce[22]=we(Z[41]),ce[23]=we(Z[43]),ce[24]=we(Z[9]),ce[25]=we(Z[11]),ce[26]=we(Z[18]),ce[27]=we(Z[24]),ce[28]=we(Z[31]),ce[29]=we(Z[40]),ce[30]=we(Z[44]),ce[31]=we(Z[53]),ce[32]=we(Z[10]),ce[33]=we(Z[19]),ce[34]=we(Z[23]),ce[35]=we(Z[32]),ce[36]=we(Z[39]),ce[37]=we(Z[45]),ce[38]=we(Z[52]),ce[39]=we(Z[54]),ce[40]=we(Z[20]),ce[41]=we(Z[22]),ce[42]=we(Z[33]),ce[43]=we(Z[38]),ce[44]=we(Z[46]),ce[45]=we(Z[51]),ce[46]=we(Z[55]),ce[47]=we(Z[60]),ce[48]=we(Z[21]),ce[49]=we(Z[34]),ce[50]=we(Z[37]),ce[51]=we(Z[47]),ce[52]=we(Z[50]),ce[53]=we(Z[56]),ce[54]=we(Z[59]),ce[55]=we(Z[61]),ce[56]=we(Z[35]),ce[57]=we(Z[36]),ce[58]=we(Z[48]),ce[59]=we(Z[49]),ce[60]=we(Z[57]),ce[61]=we(Z[58]),ce[62]=we(Z[62]),ce[63]=we(Z[63])}function Ge(Z){const ce=.5*Math.cos(.7853975),_e=.5*Math.cos(3.14159/16),Ye=.5*Math.cos(3.14159/8),at=.5*Math.cos(3*3.14159/16),it=.5*Math.cos(5*3.14159/16),Ct=.5*Math.cos(3*3.14159/8),wt=.5*Math.cos(7*3.14159/16);for(var _t=new Array(4),K=new Array(4),xe=new Array(4),de=new Array(4),Ne=0;Ne<8;++Ne){var ye=Ne*8;_t[0]=Ye*Z[ye+2],_t[1]=Ct*Z[ye+2],_t[2]=Ye*Z[ye+6],_t[3]=Ct*Z[ye+6],K[0]=_e*Z[ye+1]+at*Z[ye+3]+it*Z[ye+5]+wt*Z[ye+7],K[1]=at*Z[ye+1]-wt*Z[ye+3]-_e*Z[ye+5]-it*Z[ye+7],K[2]=it*Z[ye+1]-_e*Z[ye+3]+wt*Z[ye+5]+at*Z[ye+7],K[3]=wt*Z[ye+1]-it*Z[ye+3]+at*Z[ye+5]-_e*Z[ye+7],xe[0]=ce*(Z[ye+0]+Z[ye+4]),xe[3]=ce*(Z[ye+0]-Z[ye+4]),xe[1]=_t[0]+_t[3],xe[2]=_t[1]-_t[2],de[0]=xe[0]+xe[1],de[1]=xe[3]+xe[2],de[2]=xe[3]-xe[2],de[3]=xe[0]-xe[1],Z[ye+0]=de[0]+K[0],Z[ye+1]=de[1]+K[1],Z[ye+2]=de[2]+K[2],Z[ye+3]=de[3]+K[3],Z[ye+4]=de[3]-K[3],Z[ye+5]=de[2]-K[2],Z[ye+6]=de[1]-K[1],Z[ye+7]=de[0]-K[0]}for(var Ke=0;Ke<8;++Ke)_t[0]=Ye*Z[16+Ke],_t[1]=Ct*Z[16+Ke],_t[2]=Ye*Z[48+Ke],_t[3]=Ct*Z[48+Ke],K[0]=_e*Z[8+Ke]+at*Z[24+Ke]+it*Z[40+Ke]+wt*Z[56+Ke],K[1]=at*Z[8+Ke]-wt*Z[24+Ke]-_e*Z[40+Ke]-it*Z[56+Ke],K[2]=it*Z[8+Ke]-_e*Z[24+Ke]+wt*Z[40+Ke]+at*Z[56+Ke],K[3]=wt*Z[8+Ke]-it*Z[24+Ke]+at*Z[40+Ke]-_e*Z[56+Ke],xe[0]=ce*(Z[Ke]+Z[32+Ke]),xe[3]=ce*(Z[Ke]-Z[32+Ke]),xe[1]=_t[0]+_t[3],xe[2]=_t[1]-_t[2],de[0]=xe[0]+xe[1],de[1]=xe[3]+xe[2],de[2]=xe[3]-xe[2],de[3]=xe[0]-xe[1],Z[0+Ke]=de[0]+K[0],Z[8+Ke]=de[1]+K[1],Z[16+Ke]=de[2]+K[2],Z[24+Ke]=de[3]+K[3],Z[32+Ke]=de[3]-K[3],Z[40+Ke]=de[2]-K[2],Z[48+Ke]=de[1]-K[1],Z[56+Ke]=de[0]-K[0]}function $e(Z){for(var ce=0;ce<64;++ce){var _e=Z[0][ce],Ye=Z[1][ce],at=Z[2][ce];Z[0][ce]=_e+1.5747*at,Z[1][ce]=_e-.1873*Ye-.4682*at,Z[2][ce]=_e+1.8556*Ye}}function Ee(Z,ce,_e){for(var Ye=0;Ye<64;++Ye)ce[_e+Ye]=Tf.toHalfFloat(ct(Z[Ye]))}function ct(Z){return Z<=1?Math.sign(Z)*Math.pow(Math.abs(Z),2.2):Math.sign(Z)*Math.pow(z,Math.abs(Z)-1)}function te(Z){return new DataView(Z.array.buffer,Z.offset.value,Z.size)}function Y(Z){var ce=Z.viewer.buffer.slice(Z.offset.value,Z.offset.value+Z.size),_e=new Uint8Array(ae(ce)),Ye=new Uint8Array(_e.length);return St(_e),ze(_e,Ye),new DataView(Ye.buffer)}function ve(Z){var ce=Z.array.slice(Z.offset.value,Z.offset.value+Z.size),_e=xv(ce),Ye=new Uint8Array(_e.length);return St(_e),ze(_e,Ye),new DataView(Ye.buffer)}function Be(Z){for(var ce=Z.viewer,_e={value:Z.offset.value},Ye=new Uint16Array(Z.width*Z.scanlineBlockSize*(Z.channels*Z.type)),at=new Uint8Array(8192),it=0,Ct=new Array(Z.channels),wt=0;wt<Z.channels;wt++)Ct[wt]={},Ct[wt].start=it,Ct[wt].end=Ct[wt].start,Ct[wt].nx=Z.width,Ct[wt].ny=Z.lines,Ct[wt].size=Z.type,it+=Ct[wt].nx*Ct[wt].ny*Ct[wt].size;var _t=lt(ce,_e),K=lt(ce,_e);if(K>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(_t<=K)for(var wt=0;wt<K-_t+1;wt++)at[wt+_t]=he(ce,_e);var xe=new Uint16Array(65536),de=I(at,xe),Ne=Ie(ce,_e);Ve(Z.array,ce,_e,Ne,Ye,it);for(var wt=0;wt<Z.channels;++wt)for(var ye=Ct[wt],Ke=0;Ke<Ct[wt].size;++Ke)Qe(Ye,ye.start+Ke,ye.nx,ye.size,ye.ny,ye.nx*ye.size,de);nt(xe,Ye,it);for(var dt=0,Mt=new Uint8Array(Ye.buffer.byteLength),At=0;At<Z.lines;At++)for(var Gt=0;Gt<Z.channels;Gt++){var ye=Ct[Gt],kt=ye.nx*ye.size,Bt=new Uint8Array(Ye.buffer,ye.end*2,kt*2);Mt.set(Bt,dt),dt+=kt*2,ye.end+=kt}return new DataView(Mt.buffer)}function Re(Z){var ce=Z.array.slice(Z.offset.value,Z.offset.value+Z.size),_e=xv(ce);const Ye=Z.lines*Z.channels*Z.width,at=Z.type==1?new Uint16Array(Ye):new Uint32Array(Ye);let it=0,Ct=0;const wt=new Array(4);for(let _t=0;_t<Z.lines;_t++)for(let K=0;K<Z.channels;K++){let xe=0;switch(Z.type){case 1:wt[0]=it,wt[1]=wt[0]+Z.width,it=wt[1]+Z.width;for(let de=0;de<Z.width;++de){const Ne=_e[wt[0]++]<<8|_e[wt[1]++];xe+=Ne,at[Ct]=xe,Ct++}break;case 2:wt[0]=it,wt[1]=wt[0]+Z.width,wt[2]=wt[1]+Z.width,it=wt[2]+Z.width;for(let de=0;de<Z.width;++de){const Ne=_e[wt[0]++]<<24|_e[wt[1]++]<<16|_e[wt[2]++]<<8;xe+=Ne,at[Ct]=xe,Ct++}break}}return new DataView(at.buffer)}function Ae(Z){var ce=Z.viewer,_e={value:Z.offset.value},Ye=new Uint8Array(Z.width*Z.lines*(Z.channels*Z.type*2)),at={version:Ce(ce,_e),unknownUncompressedSize:Ce(ce,_e),unknownCompressedSize:Ce(ce,_e),acCompressedSize:Ce(ce,_e),dcCompressedSize:Ce(ce,_e),rleCompressedSize:Ce(ce,_e),rleUncompressedSize:Ce(ce,_e),rleRawSize:Ce(ce,_e),totalAcUncompressedCount:Ce(ce,_e),totalDcUncompressedCount:Ce(ce,_e),acCompression:Ce(ce,_e)};if(at.version<2)throw"EXRLoader.parse: "+Ts.compression+" version "+at.version+" is unsupported";for(var it=new Array,Ct=lt(ce,_e)-2;Ct>0;){var wt=yt(ce.buffer,_e),_t=he(ce,_e),K=_t>>2&3,xe=(_t>>4)-1,de=new Int8Array([xe])[0],Ne=he(ce,_e);it.push({name:wt,index:de,type:Ne,compression:K}),Ct-=wt.length+3}for(var ye=Ts.channels,Ke=new Array(Z.channels),dt=0;dt<Z.channels;++dt){var Mt=Ke[dt]={},At=ye[dt];Mt.name=At.name,Mt.compression=0,Mt.decoded=!1,Mt.type=At.pixelType,Mt.pLinear=At.pLinear,Mt.width=Z.width,Mt.height=Z.lines}for(var Gt={idx:new Array(3)},kt=0;kt<Z.channels;++kt)for(var Mt=Ke[kt],dt=0;dt<it.length;++dt){var Bt=it[dt];Mt.name==Bt.name&&(Mt.compression=Bt.compression,Bt.index>=0&&(Gt.idx[Bt.index]=kt),Mt.offset=kt)}if(at.acCompressedSize>0)switch(at.acCompression){case 0:var Qt=new Uint16Array(at.totalAcUncompressedCount);Ve(Z.array,ce,_e,at.acCompressedSize,Qt,at.totalAcUncompressedCount);break;case 1:var Ft=Z.array.slice(_e.value,_e.value+at.totalAcUncompressedCount),xn=xv(Ft),Qt=new Uint16Array(xn.buffer);_e.value+=at.totalAcUncompressedCount;break}if(at.dcCompressedSize>0){var rn={array:Z.array,offset:_e,size:at.dcCompressedSize},Mn=new Uint16Array(ve(rn).buffer);_e.value+=at.dcCompressedSize}if(at.rleRawSize>0){var Ft=Z.array.slice(_e.value,_e.value+at.rleCompressedSize),xn=xv(Ft),$t=ae(xn.buffer);_e.value+=at.rleCompressedSize}for(var gn=0,Kt=new Array(Ke.length),dt=0;dt<Kt.length;++dt)Kt[dt]=new Array;for(var Cn=0;Cn<Z.lines;++Cn)for(var kn=0;kn<Ke.length;++kn)Kt[kn].push(gn),gn+=Ke[kn].width*Z.type*2;Fe(Gt,Kt,Ke,Qt,Mn,Ye);for(var dt=0;dt<Ke.length;++dt){var Mt=Ke[dt];if(!Mt.decoded)switch(Mt.compression){case 2:for(var Jt=0,Ls=0,Cn=0;Cn<Z.lines;++Cn){for(var Ln=Kt[dt][Jt],On=0;On<Mt.width;++On){for(var as=0;as<2*Mt.type;++as)Ye[Ln++]=$t[Ls+as*Mt.width*Mt.height];Ls++}Jt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ye.buffer)}function yt(Z,ce){for(var _e=new Uint8Array(Z),Ye=0;_e[ce.value+Ye]!=0;)Ye+=1;var at=new TextDecoder().decode(_e.slice(ce.value,ce.value+Ye));return ce.value=ce.value+Ye+1,at}function gt(Z,ce,_e){var Ye=new TextDecoder().decode(new Uint8Array(Z).slice(ce.value,ce.value+_e));return ce.value=ce.value+_e,Ye}function Dt(Z,ce){var _e=ke(Z,ce),Ye=Ie(Z,ce);return[_e,Ye]}function Nt(Z,ce){var _e=Ie(Z,ce),Ye=Ie(Z,ce);return[_e,Ye]}function ke(Z,ce){var _e=Z.getInt32(ce.value,!0);return ce.value=ce.value+4,_e}function Ie(Z,ce){var _e=Z.getUint32(ce.value,!0);return ce.value=ce.value+4,_e}function ft(Z,ce){var _e=Z[ce.value];return ce.value=ce.value+1,_e}function he(Z,ce){var _e=Z.getUint8(ce.value);return ce.value=ce.value+1,_e}const Ce=function(Z,ce){let _e;return"getBigInt64"in DataView.prototype?_e=Number(Z.getBigInt64(ce.value,!0)):_e=Z.getUint32(ce.value+4,!0)+Number(Z.getUint32(ce.value,!0)<<32),ce.value+=8,_e};function ut(Z,ce){var _e=Z.getFloat32(ce.value,!0);return ce.value+=4,_e}function pe(Z,ce){return Tf.toHalfFloat(ut(Z,ce))}function we(Z){var ce=(Z&31744)>>10,_e=Z&1023;return(Z>>15?-1:1)*(ce?ce===31?_e?NaN:1/0:Math.pow(2,ce-15)*(1+_e/1024):6103515625e-14*(_e/1024))}function lt(Z,ce){var _e=Z.getUint16(ce.value,!0);return ce.value+=2,_e}function jt(Z,ce){return we(lt(Z,ce))}function ot(Z,ce,_e,Ye){for(var at=_e.value,it=[];_e.value<at+Ye-1;){var Ct=yt(ce,_e),wt=ke(Z,_e),_t=he(Z,_e);_e.value+=3;var K=ke(Z,_e),xe=ke(Z,_e);it.push({name:Ct,pixelType:wt,pLinear:_t,xSampling:K,ySampling:xe})}return _e.value+=1,it}function qe(Z,ce){var _e=ut(Z,ce),Ye=ut(Z,ce),at=ut(Z,ce),it=ut(Z,ce),Ct=ut(Z,ce),wt=ut(Z,ce),_t=ut(Z,ce),K=ut(Z,ce);return{redX:_e,redY:Ye,greenX:at,greenY:it,blueX:Ct,blueY:wt,whiteX:_t,whiteY:K}}function Tt(Z,ce){var _e=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ye=he(Z,ce);return _e[Ye]}function zt(Z,ce){var _e=Ie(Z,ce),Ye=Ie(Z,ce),at=Ie(Z,ce),it=Ie(Z,ce);return{xMin:_e,yMin:Ye,xMax:at,yMax:it}}function It(Z,ce){var _e=["INCREASING_Y"],Ye=he(Z,ce);return _e[Ye]}function Zt(Z,ce){var _e=ut(Z,ce),Ye=ut(Z,ce);return[_e,Ye]}function An(Z,ce){var _e=ut(Z,ce),Ye=ut(Z,ce),at=ut(Z,ce);return[_e,Ye,at]}function In(Z,ce,_e,Ye,at){if(Ye==="string"||Ye==="stringvector"||Ye==="iccProfile")return gt(ce,_e,at);if(Ye==="chlist")return ot(Z,ce,_e,at);if(Ye==="chromaticities")return qe(Z,_e);if(Ye==="compression")return Tt(Z,_e);if(Ye==="box2i")return zt(Z,_e);if(Ye==="lineOrder")return It(Z,_e);if(Ye==="float")return ut(Z,_e);if(Ye==="v2f")return Zt(Z,_e);if(Ye==="v3f")return An(Z,_e);if(Ye==="int")return ke(Z,_e);if(Ye==="rational")return Dt(Z,_e);if(Ye==="timecode")return Nt(Z,_e);if(Ye==="preview")return _e.value+=at,"skipped";_e.value+=at}function Ss(Z,ce,_e){const Ye={};if(Z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ye.version=Z.getUint8(4);const at=Z.getUint8(5);Ye.spec={singleTile:!!(at&2),longName:!!(at&4),deepFormat:!!(at&8),multiPart:!!(at&16)},_e.value=8;for(var it=!0;it;){var Ct=yt(ce,_e);if(Ct==0)it=!1;else{var wt=yt(ce,_e),_t=Ie(Z,_e),K=In(Z,ce,_e,wt,_t);K===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${wt}'.`):Ye[Ct]=K}}if((at&-5)!=0)throw console.error("EXRHeader:",Ye),"THREE.EXRLoader: provided file is currently unsupported.";return Ye}function ni(Z,ce,_e,Ye,at){const it={size:0,viewer:ce,array:_e,offset:Ye,width:Z.dataWindow.xMax-Z.dataWindow.xMin+1,height:Z.dataWindow.yMax-Z.dataWindow.yMin+1,channels:Z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Z.channels[0].pixelType,uncompress:null,getter:null,format:null,[zp?"colorSpace":"encoding"]:null};switch(Z.compression){case"NO_COMPRESSION":it.lines=1,it.uncompress=te;break;case"RLE_COMPRESSION":it.lines=1,it.uncompress=Y;break;case"ZIPS_COMPRESSION":it.lines=1,it.uncompress=ve;break;case"ZIP_COMPRESSION":it.lines=16,it.uncompress=ve;break;case"PIZ_COMPRESSION":it.lines=32,it.uncompress=Be;break;case"PXR24_COMPRESSION":it.lines=16,it.uncompress=Re;break;case"DWAA_COMPRESSION":it.lines=32,it.uncompress=Ae;break;case"DWAB_COMPRESSION":it.lines=256,it.uncompress=Ae;break;default:throw"EXRLoader.parse: "+Z.compression+" is unsupported"}if(it.scanlineBlockSize=it.lines,it.type==1)switch(at){case ti:it.getter=jt,it.inputSize=2;break;case Ti:it.getter=lt,it.inputSize=2;break}else if(it.type==2)switch(at){case ti:it.getter=ut,it.inputSize=4;break;case Ti:it.getter=pe,it.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+it.type+" for "+Z.compression+".";it.blockCount=(Z.dataWindow.yMax+1)/it.scanlineBlockSize;for(var Ct=0;Ct<it.blockCount;Ct++)Ce(ce,Ye);it.outputChannels=it.channels==3?4:it.channels;const wt=it.width*it.height*it.outputChannels;switch(at){case ti:it.byteArray=new Float32Array(wt),it.channels<it.outputChannels&&it.byteArray.fill(1,0,wt);break;case Ti:it.byteArray=new Uint16Array(wt),it.channels<it.outputChannels&&it.byteArray.fill(15360,0,wt);break;default:console.error("THREE.EXRLoader: unsupported type: ",at);break}return it.bytesPerLine=it.width*it.inputSize*it.channels,it.outputChannels==4?it.format=Ai:it.format=Wx,zp?it.colorSpace="srgb-linear":it.encoding=3e3,it}const si=new DataView(e),cs=new Uint8Array(e),Fs={value:0},Ts=Ss(si,e,Fs),sn=ni(Ts,si,cs,Fs,this.type),Hn={value:0},fn={R:0,G:1,B:2,A:3,Y:0};for(let Z=0;Z<sn.height/sn.scanlineBlockSize;Z++){const ce=Ie(si,Fs);sn.size=Ie(si,Fs),sn.lines=ce+sn.scanlineBlockSize>sn.height?sn.height-ce:sn.scanlineBlockSize;const Ye=sn.size<sn.lines*sn.bytesPerLine?sn.uncompress(sn):te(sn);Fs.value+=sn.size;for(let at=0;at<sn.scanlineBlockSize;at++){const it=at+Z*sn.scanlineBlockSize;if(it>=sn.height)break;for(let Ct=0;Ct<sn.channels;Ct++){const wt=fn[Ts.channels[Ct].name];for(let _t=0;_t<sn.width;_t++){Hn.value=(at*(sn.channels*sn.width)+Ct*sn.width+_t)*sn.inputSize;const K=(sn.height-1-it)*(sn.width*sn.outputChannels)+_t*sn.outputChannels+wt;sn.byteArray[K]=sn.getter(Ye,Hn)}}}}return{header:Ts,width:sn.width,height:sn.height,data:sn.byteArray,format:sn.format,[zp?"colorSpace":"encoding"]:sn[zp?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,a){function r(o,l){zp?o.colorSpace=l.colorSpace:o.encoding=l.encoding,o.minFilter=ss,o.magFilter=ss,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,l)}return super.load(e,r,n,a)}}function GW(){var i=Object.create(null);function e(a,r){var o=a.id,l=a.name,u=a.dependencies;u===void 0&&(u=[]);var d=a.init;d===void 0&&(d=function(){});var f=a.getTransferables;if(f===void 0&&(f=null),!i[o])try{u=u.map(function(x){return x&&x.isWorkerModule&&(e(x,function(g){if(g instanceof Error)throw g}),x=i[x.id].value),x}),d=n("<"+l+">.init",d),f&&(f=n("<"+l+">.getTransferables",f));var m=null;typeof d=="function"?m=d.apply(void 0,u):console.error("worker module init function failed to rehydrate"),i[o]={id:o,value:m,getTransferables:f},r(m)}catch(x){x&&x.noLog||console.error(x),r(x)}}function t(a,r){var o,l=a.id,u=a.args;(!i[l]||typeof i[l].value!="function")&&r(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var d=(o=i[l]).value.apply(o,u);d&&typeof d.then=="function"?d.then(f,function(m){return r(m instanceof Error?m:new Error(""+m))}):f(d)}catch(m){r(m)}function f(m){try{var x=i[l].getTransferables&&i[l].getTransferables(m);(!x||!Array.isArray(x)||!x.length)&&(x=void 0),r(m,x)}catch(g){console.error(g),r(g)}}}function n(a,r){var o=void 0;self.troikaDefine=function(u){return o=u};var l=URL.createObjectURL(new Blob(["/** "+a.replace(/\*/g,"")+` **/

troikaDefine(
`+r+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(u){console.error(u)}return URL.revokeObjectURL(l),delete self.troikaDefine,o}self.addEventListener("message",function(a){var r=a.data,o=r.messageId,l=r.action,u=r.data;try{l==="registerModule"&&e(u,function(d){d instanceof Error?postMessage({messageId:o,success:!1,error:d.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof d=="function"}})}),l==="callModule"&&t(u,function(d,f){d instanceof Error?postMessage({messageId:o,success:!1,error:d.message}):postMessage({messageId:o,success:!0,result:d},f||void 0)})}catch(d){postMessage({messageId:o,success:!1,error:d.stack})}})}function IW(i){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(a){if(typeof a=="function")return a.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=i.dependencies,n=i.init;t=Array.isArray(t)?t.map(function(r){return r&&(r=r.onMainThread||r,r._getInitResult&&(r=r._getInitResult())),r}):[];var a=Promise.all(t).then(function(r){return n.apply(null,r)});return e._getInitResult=function(){return a},a},e}var RR=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),i=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return RR=function(){return i},i},kW=0,BW=0,$M=!1,fx=Object.create(null),hx=Object.create(null),s_=Object.create(null);function tm(i){if((!i||typeof i.init!="function")&&!$M)throw new Error("requires `options.init` function");var e=i.dependencies,t=i.init,n=i.getTransferables,a=i.workerId,r=IW(i);a==null&&(a="#default");var o="workerModule"+ ++kW,l=i.name||o,u=null;e=e&&e.map(function(f){return typeof f=="function"&&!f.workerModuleData&&($M=!0,f=tm({workerId:a,name:"<"+l+"> function dependency: "+f.name,init:`function(){return (
`+Iv(f)+`
)}`}),$M=!1),f&&f.workerModuleData&&(f=f.workerModuleData),f});function d(){for(var f=[],m=arguments.length;m--;)f[m]=arguments[m];if(!RR())return r.apply(void 0,f);if(!u){u=xT(a,"registerModule",d.workerModuleData);var x=function(){u=null,hx[a].delete(x)};(hx[a]||(hx[a]=new Set)).add(x)}return u.then(function(g){var v=g.isCallable;if(v)return xT(a,"callModule",{id:o,args:f});throw new Error("Worker module function was called but `init` did not return a callable function")})}return d.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:Iv(t),getTransferables:n&&Iv(n)},d.onMainThread=r,d}function FW(i){hx[i]&&hx[i].forEach(function(e){e()}),fx[i]&&(fx[i].terminate(),delete fx[i])}function Iv(i){var e=i.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function VW(i){var e=fx[i];if(!e){var t=Iv(GW);e=fx[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var a=n.data,r=a.messageId,o=s_[r];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete s_[r],o(a)}}return e}function xT(i,e,t){return new Promise(function(n,a){var r=++BW;s_[r]=function(o){o.success?n(o.result):a(new Error("Error in worker "+e+" call: "+o.error))},VW(i).postMessage({messageId:r,action:e,data:t})})}function DR(){var i=(function(e){function t(le,re,H,ee,ue,me,be,fe){var ge=1-be;fe.x=ge*ge*le+2*ge*be*H+be*be*ue,fe.y=ge*ge*re+2*ge*be*ee+be*be*me}function n(le,re,H,ee,ue,me,be,fe,ge,je){var Qe=1-ge;je.x=Qe*Qe*Qe*le+3*Qe*Qe*ge*H+3*Qe*ge*ge*ue+ge*ge*ge*be,je.y=Qe*Qe*Qe*re+3*Qe*Qe*ge*ee+3*Qe*ge*ge*me+ge*ge*ge*fe}function a(le,re){for(var H=/([MLQCZ])([^MLQCZ]*)/g,ee,ue,me,be,fe;ee=H.exec(le);){var ge=ee[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(je){return parseFloat(je)});switch(ee[1]){case"M":be=ue=ge[0],fe=me=ge[1];break;case"L":(ge[0]!==be||ge[1]!==fe)&&re("L",be,fe,be=ge[0],fe=ge[1]);break;case"Q":{re("Q",be,fe,be=ge[2],fe=ge[3],ge[0],ge[1]);break}case"C":{re("C",be,fe,be=ge[4],fe=ge[5],ge[0],ge[1],ge[2],ge[3]);break}case"Z":(be!==ue||fe!==me)&&re("L",be,fe,ue,me);break}}}function r(le,re,H){H===void 0&&(H=16);var ee={x:0,y:0};a(le,function(ue,me,be,fe,ge,je,Qe,st,Ve){switch(ue){case"L":re(me,be,fe,ge);break;case"Q":{for(var nt=me,St=be,ze=1;ze<H;ze++)t(me,be,je,Qe,fe,ge,ze/(H-1),ee),re(nt,St,ee.x,ee.y),nt=ee.x,St=ee.y;break}case"C":{for(var ae=me,Fe=be,We=1;We<H;We++)n(me,be,je,Qe,st,Ve,fe,ge,We/(H-1),ee),re(ae,Fe,ee.x,ee.y),ae=ee.x,Fe=ee.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(le,re){var H=le.getContext?le.getContext("webgl",d):le,ee=u.get(H);if(!ee){let ae=function(Ee){var ct=me[Ee];if(!ct&&(ct=me[Ee]=H.getExtension(Ee),!ct))throw new Error(Ee+" not supported");return ct},Fe=function(Ee,ct){var te=H.createShader(ct);return H.shaderSource(te,Ee),H.compileShader(te),te},We=function(Ee,ct,te,Y){if(!be[Ee]){var ve={},Be={},Re=H.createProgram();H.attachShader(Re,Fe(ct,H.VERTEX_SHADER)),H.attachShader(Re,Fe(te,H.FRAGMENT_SHADER)),H.linkProgram(Re),be[Ee]={program:Re,transaction:function(yt){H.useProgram(Re),yt({setUniform:function(Dt,Nt){for(var ke=[],Ie=arguments.length-2;Ie-- >0;)ke[Ie]=arguments[Ie+2];var ft=Be[Nt]||(Be[Nt]=H.getUniformLocation(Re,Nt));H["uniform"+Dt].apply(H,[ft].concat(ke))},setAttribute:function(Dt,Nt,ke,Ie,ft){var he=ve[Dt];he||(he=ve[Dt]={buf:H.createBuffer(),loc:H.getAttribLocation(Re,Dt),data:null}),H.bindBuffer(H.ARRAY_BUFFER,he.buf),H.vertexAttribPointer(he.loc,Nt,H.FLOAT,!1,0,0),H.enableVertexAttribArray(he.loc),ue?H.vertexAttribDivisor(he.loc,Ie):ae("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(he.loc,Ie),ft!==he.data&&(H.bufferData(H.ARRAY_BUFFER,ft,ke),he.data=ft)}})}}}be[Ee].transaction(Y)},Pe=function(Ee,ct){ge++;try{H.activeTexture(H.TEXTURE0+ge);var te=fe[Ee];te||(te=fe[Ee]=H.createTexture(),H.bindTexture(H.TEXTURE_2D,te),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST)),H.bindTexture(H.TEXTURE_2D,te),ct(te,ge)}finally{ge--}},Ge=function(Ee,ct,te){var Y=H.createFramebuffer();je.push(Y),H.bindFramebuffer(H.FRAMEBUFFER,Y),H.activeTexture(H.TEXTURE0+ct),H.bindTexture(H.TEXTURE_2D,Ee),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Ee,0);try{te(Y)}finally{H.deleteFramebuffer(Y),H.bindFramebuffer(H.FRAMEBUFFER,je[--je.length-1]||null)}},$e=function(){me={},be={},fe={},ge=-1,je.length=0};var Qe=ae,st=Fe,Ve=We,nt=Pe,St=Ge,ze=$e,ue=typeof WebGL2RenderingContext<"u"&&H instanceof WebGL2RenderingContext,me={},be={},fe={},ge=-1,je=[];H.canvas.addEventListener("webglcontextlost",function(Ee){$e(),Ee.preventDefault()},!1),u.set(H,ee={gl:H,isWebGL2:ue,getExtension:ae,withProgram:We,withTexture:Pe,withTextureFramebuffer:Ge,handleContextLoss:$e})}re(ee)}function m(le,re,H,ee,ue,me,be,fe){be===void 0&&(be=15),fe===void 0&&(fe=null),f(le,function(ge){var je=ge.gl,Qe=ge.withProgram,st=ge.withTexture;st("copy",function(Ve,nt){je.texImage2D(je.TEXTURE_2D,0,je.RGBA,ue,me,0,je.RGBA,je.UNSIGNED_BYTE,re),Qe("copy",o,l,function(St){var ze=St.setUniform,ae=St.setAttribute;ae("aUV",2,je.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ze("1i","image",nt),je.bindFramebuffer(je.FRAMEBUFFER,fe||null),je.disable(je.BLEND),je.colorMask(be&8,be&4,be&2,be&1),je.viewport(H,ee,ue,me),je.scissor(H,ee,ue,me),je.drawArrays(je.TRIANGLES,0,3)})})})}function x(le,re,H){var ee=le.width,ue=le.height;f(le,function(me){var be=me.gl,fe=new Uint8Array(ee*ue*4);be.readPixels(0,0,ee,ue,be.RGBA,be.UNSIGNED_BYTE,fe),le.width=re,le.height=H,m(be,fe,0,0,ee,ue)})}var g=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:m,resizeWebGLCanvasWithoutClearing:x});function v(le,re,H,ee,ue,me){me===void 0&&(me=1);var be=new Uint8Array(le*re),fe=ee[2]-ee[0],ge=ee[3]-ee[1],je=[];r(H,function(ae,Fe,We,Pe){je.push({x1:ae,y1:Fe,x2:We,y2:Pe,minX:Math.min(ae,We),minY:Math.min(Fe,Pe),maxX:Math.max(ae,We),maxY:Math.max(Fe,Pe)})}),je.sort(function(ae,Fe){return ae.maxX-Fe.maxX});for(var Qe=0;Qe<le;Qe++)for(var st=0;st<re;st++){var Ve=St(ee[0]+fe*(Qe+.5)/le,ee[1]+ge*(st+.5)/re),nt=Math.pow(1-Math.abs(Ve)/ue,me)/2;Ve<0&&(nt=1-nt),nt=Math.max(0,Math.min(255,Math.round(nt*255))),be[st*le+Qe]=nt}return be;function St(ae,Fe){for(var We=1/0,Pe=1/0,Ge=je.length;Ge--;){var $e=je[Ge];if($e.maxX+Pe<=ae)break;if(ae+Pe>$e.minX&&Fe-Pe<$e.maxY&&Fe+Pe>$e.minY){var Ee=S(ae,Fe,$e.x1,$e.y1,$e.x2,$e.y2);Ee<We&&(We=Ee,Pe=Math.sqrt(We))}}return ze(ae,Fe)&&(Pe=-Pe),Pe}function ze(ae,Fe){for(var We=0,Pe=je.length;Pe--;){var Ge=je[Pe];if(Ge.maxX<=ae)break;var $e=Ge.y1>Fe!=Ge.y2>Fe&&ae<(Ge.x2-Ge.x1)*(Fe-Ge.y1)/(Ge.y2-Ge.y1)+Ge.x1;$e&&(We+=Ge.y1<Ge.y2?1:-1)}return We!==0}}function M(le,re,H,ee,ue,me,be,fe,ge,je){me===void 0&&(me=1),fe===void 0&&(fe=0),ge===void 0&&(ge=0),je===void 0&&(je=0),_(le,re,H,ee,ue,me,be,null,fe,ge,je)}function _(le,re,H,ee,ue,me,be,fe,ge,je,Qe){me===void 0&&(me=1),ge===void 0&&(ge=0),je===void 0&&(je=0),Qe===void 0&&(Qe=0);for(var st=v(le,re,H,ee,ue,me),Ve=new Uint8Array(st.length*4),nt=0;nt<st.length;nt++)Ve[nt*4+Qe]=st[nt];m(be,Ve,ge,je,le,re,1<<3-Qe,fe)}function S(le,re,H,ee,ue,me){var be=ue-H,fe=me-ee,ge=be*be+fe*fe,je=ge?Math.max(0,Math.min(1,((le-H)*be+(re-ee)*fe)/ge)):0,Qe=le-(H+je*be),st=re-(ee+je*fe);return Qe*Qe+st*st}var j=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:M,generateIntoFramebuffer:_}),A="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",N="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",R=new Float32Array([0,0,2,0,0,2]),O=null,U=!1,z={},I=new WeakMap;function V(le){if(!U&&!ie(le))throw new Error("WebGL generation not supported")}function F(le,re,H,ee,ue,me,be){if(me===void 0&&(me=1),be===void 0&&(be=null),!be&&(be=O,!be)){var fe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!fe)throw new Error("OffscreenCanvas or DOM canvas not supported");be=O=fe.getContext("webgl",{depth:!1})}V(be);var ge=new Uint8Array(le*re*4);f(be,function(Ve){var nt=Ve.gl,St=Ve.withTexture,ze=Ve.withTextureFramebuffer;St("readable",function(ae,Fe){nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,le,re,0,nt.RGBA,nt.UNSIGNED_BYTE,null),ze(ae,Fe,function(We){W(le,re,H,ee,ue,me,nt,We,0,0,0),nt.readPixels(0,0,le,re,nt.RGBA,nt.UNSIGNED_BYTE,ge)})})});for(var je=new Uint8Array(le*re),Qe=0,st=0;Qe<ge.length;Qe+=4)je[st++]=ge[Qe];return je}function q(le,re,H,ee,ue,me,be,fe,ge,je){me===void 0&&(me=1),fe===void 0&&(fe=0),ge===void 0&&(ge=0),je===void 0&&(je=0),W(le,re,H,ee,ue,me,be,null,fe,ge,je)}function W(le,re,H,ee,ue,me,be,fe,ge,je,Qe){me===void 0&&(me=1),ge===void 0&&(ge=0),je===void 0&&(je=0),Qe===void 0&&(Qe=0),V(be);var st=[];r(H,function(Ve,nt,St,ze){st.push(Ve,nt,St,ze)}),st=new Float32Array(st),f(be,function(Ve){var nt=Ve.gl,St=Ve.isWebGL2,ze=Ve.getExtension,ae=Ve.withProgram,Fe=Ve.withTexture,We=Ve.withTextureFramebuffer,Pe=Ve.handleContextLoss;if(Fe("rawDistances",function(Ge,$e){(le!==Ge._lastWidth||re!==Ge._lastHeight)&&nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,Ge._lastWidth=le,Ge._lastHeight=re,0,nt.RGBA,nt.UNSIGNED_BYTE,null),ae("main",A,C,function(Ee){var ct=Ee.setAttribute,te=Ee.setUniform,Y=!St&&ze("ANGLE_instanced_arrays"),ve=!St&&ze("EXT_blend_minmax");ct("aUV",2,nt.STATIC_DRAW,0,R),ct("aLineSegment",4,nt.DYNAMIC_DRAW,1,st),te.apply(void 0,["4f","uGlyphBounds"].concat(ee)),te("1f","uMaxDistance",ue),te("1f","uExponent",me),We(Ge,$e,function(Be){nt.enable(nt.BLEND),nt.colorMask(!0,!0,!0,!0),nt.viewport(0,0,le,re),nt.scissor(0,0,le,re),nt.blendFunc(nt.ONE,nt.ONE),nt.blendEquationSeparate(nt.FUNC_ADD,St?nt.MAX:ve.MAX_EXT),nt.clear(nt.COLOR_BUFFER_BIT),St?nt.drawArraysInstanced(nt.TRIANGLES,0,3,st.length/4):Y.drawArraysInstancedANGLE(nt.TRIANGLES,0,3,st.length/4)})}),ae("post",o,N,function(Ee){Ee.setAttribute("aUV",2,nt.STATIC_DRAW,0,R),Ee.setUniform("1i","tex",$e),nt.bindFramebuffer(nt.FRAMEBUFFER,fe),nt.disable(nt.BLEND),nt.colorMask(Qe===0,Qe===1,Qe===2,Qe===3),nt.viewport(ge,je,le,re),nt.scissor(ge,je,le,re),nt.drawArrays(nt.TRIANGLES,0,3)})}),nt.isContextLost())throw Pe(),new Error("webgl context lost")})}function ie(le){var re=!le||le===O?z:le.canvas||le,H=I.get(re);if(H===void 0){U=!0;var ee=null;try{var ue=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],me=F(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,le);H=me&&ue.length===me.length&&me.every(function(be,fe){return be===ue[fe]}),H||(ee="bad trial run results",console.info(ue,me))}catch(be){H=!1,ee=be.message}ee&&console.warn("WebGL SDF generation not supported:",ee),U=!1,I.set(re,H)}return H}var B=Object.freeze({__proto__:null,generate:F,generateIntoCanvas:q,generateIntoFramebuffer:W,isSupported:ie});function J(le,re,H,ee,ue,me){ue===void 0&&(ue=Math.max(ee[2]-ee[0],ee[3]-ee[1])/2),me===void 0&&(me=1);try{return F.apply(B,arguments)}catch(be){return console.info("WebGL SDF generation failed, falling back to JS",be),v.apply(j,arguments)}}function $(le,re,H,ee,ue,me,be,fe,ge,je){ue===void 0&&(ue=Math.max(ee[2]-ee[0],ee[3]-ee[1])/2),me===void 0&&(me=1),fe===void 0&&(fe=0),ge===void 0&&(ge=0),je===void 0&&(je=0);try{return q.apply(B,arguments)}catch(Qe){return console.info("WebGL SDF generation failed, falling back to JS",Qe),M.apply(j,arguments)}}return e.forEachPathCommand=a,e.generate=J,e.generateIntoCanvas=$,e.javascript=j,e.pathToLineSegments=r,e.webgl=B,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return i}function HW(){var i=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},a={};n.L=1,a[1]="L",Object.keys(t).forEach(function(Pe,Ge){n[Pe]=1<<Ge+1,a[n[Pe]]=Pe}),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,l=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,u=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,d=n.S|n.WS|n.B|r|n.PDI|u,f=null;function m(){if(!f){f=new Map;var Pe=function($e){if(t.hasOwnProperty($e)){var Ee=0;t[$e].split(",").forEach(function(ct){var te=ct.split("+"),Y=te[0],ve=te[1];Y=parseInt(Y,36),ve=ve?parseInt(ve,36):0,f.set(Ee+=Y,n[$e]);for(var Be=0;Be<ve;Be++)f.set(++Ee,n[$e])})}};for(var Ge in t)Pe(Ge)}}function x(Pe){return m(),f.get(Pe.codePointAt(0))||n.L}function g(Pe){return a[x(Pe)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(Pe,Ge){var $e=36,Ee=0,ct=new Map,te=Ge&&new Map,Y;return Pe.split(",").forEach(function ve(Be){if(Be.indexOf("+")!==-1)for(var Re=+Be;Re--;)ve(Y);else{Y=Be;var Ae=Be.split(">"),yt=Ae[0],gt=Ae[1];yt=String.fromCodePoint(Ee+=parseInt(yt,$e)),gt=String.fromCodePoint(Ee+=parseInt(gt,$e)),ct.set(yt,gt),Ge&&te.set(gt,yt)}}),{map:ct,reverseMap:te}}var _,S,j;function A(){if(!_){var Pe=M(v.pairs,!0),Ge=Pe.map,$e=Pe.reverseMap;_=Ge,S=$e,j=M(v.canonical,!1).map}}function C(Pe){return A(),_.get(Pe)||null}function N(Pe){return A(),S.get(Pe)||null}function R(Pe){return A(),j.get(Pe)||null}var O=n.L,U=n.R,z=n.EN,I=n.ES,V=n.ET,F=n.AN,q=n.CS,W=n.B,ie=n.S,B=n.ON,J=n.BN,$=n.NSM,le=n.AL,re=n.LRO,H=n.RLO,ee=n.LRE,ue=n.RLE,me=n.PDF,be=n.LRI,fe=n.RLI,ge=n.FSI,je=n.PDI;function Qe(Pe,Ge){for(var $e=125,Ee=new Uint32Array(Pe.length),ct=0;ct<Pe.length;ct++)Ee[ct]=x(Pe[ct]);var te=new Map;function Y(ki,Aa){var fi=Ee[ki];Ee[ki]=Aa,te.set(fi,te.get(fi)-1),fi&l&&te.set(l,te.get(l)-1),te.set(Aa,(te.get(Aa)||0)+1),Aa&l&&te.set(l,(te.get(l)||0)+1)}for(var ve=new Uint8Array(Pe.length),Be=new Map,Re=[],Ae=null,yt=0;yt<Pe.length;yt++)Ae||Re.push(Ae={start:yt,end:Pe.length-1,level:Ge==="rtl"?1:Ge==="ltr"?0:gd(yt,!1)}),Ee[yt]&W&&(Ae.end=yt,Ae=null);for(var gt=ue|ee|H|re|r|je|me|W,Dt=function(ki){return ki+(ki&1?1:2)},Nt=function(ki){return ki+(ki&1?2:1)},ke=0;ke<Re.length;ke++){Ae=Re[ke];var Ie=[{_level:Ae.level,_override:0,_isolate:0}],ft=void 0,he=0,Ce=0,ut=0;te.clear();for(var pe=Ae.start;pe<=Ae.end;pe++){var we=Ee[pe];if(ft=Ie[Ie.length-1],te.set(we,(te.get(we)||0)+1),we&l&&te.set(l,(te.get(l)||0)+1),we&gt)if(we&(ue|ee)){ve[pe]=ft._level;var lt=(we===ue?Nt:Dt)(ft._level);lt<=$e&&!he&&!Ce?Ie.push({_level:lt,_override:0,_isolate:0}):he||Ce++}else if(we&(H|re)){ve[pe]=ft._level;var jt=(we===H?Nt:Dt)(ft._level);jt<=$e&&!he&&!Ce?Ie.push({_level:jt,_override:we&H?U:O,_isolate:0}):he||Ce++}else if(we&r){we&ge&&(we=gd(pe+1,!0)===1?fe:be),ve[pe]=ft._level,ft._override&&Y(pe,ft._override);var ot=(we===fe?Nt:Dt)(ft._level);ot<=$e&&he===0&&Ce===0?(ut++,Ie.push({_level:ot,_override:0,_isolate:1,_isolInitIndex:pe})):he++}else if(we&je){if(he>0)he--;else if(ut>0){for(Ce=0;!Ie[Ie.length-1]._isolate;)Ie.pop();var qe=Ie[Ie.length-1]._isolInitIndex;qe!=null&&(Be.set(qe,pe),Be.set(pe,qe)),Ie.pop(),ut--}ft=Ie[Ie.length-1],ve[pe]=ft._level,ft._override&&Y(pe,ft._override)}else we&me?(he===0&&(Ce>0?Ce--:!ft._isolate&&Ie.length>1&&(Ie.pop(),ft=Ie[Ie.length-1])),ve[pe]=ft._level):we&W&&(ve[pe]=Ae.level);else ve[pe]=ft._level,ft._override&&we!==J&&Y(pe,ft._override)}for(var Tt=[],zt=null,It=Ae.start;It<=Ae.end;It++){var Zt=Ee[It];if(!(Zt&u)){var An=ve[It],In=Zt&r,Ss=Zt===je;zt&&An===zt._level?(zt._end=It,zt._endsWithIsolInit=In):Tt.push(zt={_start:It,_end:It,_level:An,_startsWithPDI:Ss,_endsWithIsolInit:In})}}for(var ni=[],si=0;si<Tt.length;si++){var cs=Tt[si];if(!cs._startsWithPDI||cs._startsWithPDI&&!Be.has(cs._start)){for(var Fs=[zt=cs],Ts=void 0;zt&&zt._endsWithIsolInit&&(Ts=Be.get(zt._end))!=null;)for(var sn=si+1;sn<Tt.length;sn++)if(Tt[sn]._start===Ts){Fs.push(zt=Tt[sn]);break}for(var Hn=[],fn=0;fn<Fs.length;fn++)for(var Z=Fs[fn],ce=Z._start;ce<=Z._end;ce++)Hn.push(ce);for(var _e=ve[Hn[0]],Ye=Ae.level,at=Hn[0]-1;at>=0;at--)if(!(Ee[at]&u)){Ye=ve[at];break}var it=Hn[Hn.length-1],Ct=ve[it],wt=Ae.level;if(!(Ee[it]&r)){for(var _t=it+1;_t<=Ae.end;_t++)if(!(Ee[_t]&u)){wt=ve[_t];break}}ni.push({_seqIndices:Hn,_sosType:Math.max(Ye,_e)%2?U:O,_eosType:Math.max(wt,Ct)%2?U:O})}}for(var K=0;K<ni.length;K++){var xe=ni[K],de=xe._seqIndices,Ne=xe._sosType,ye=xe._eosType,Ke=ve[de[0]]&1?U:O;if(te.get($))for(var dt=0;dt<de.length;dt++){var Mt=de[dt];if(Ee[Mt]&$){for(var At=Ne,Gt=dt-1;Gt>=0;Gt--)if(!(Ee[de[Gt]]&u)){At=Ee[de[Gt]];break}Y(Mt,At&(r|je)?B:At)}}if(te.get(z))for(var kt=0;kt<de.length;kt++){var Bt=de[kt];if(Ee[Bt]&z)for(var Ft=kt-1;Ft>=-1;Ft--){var xn=Ft===-1?Ne:Ee[de[Ft]];if(xn&o){xn===le&&Y(Bt,F);break}}}if(te.get(le))for(var Qt=0;Qt<de.length;Qt++){var rn=de[Qt];Ee[rn]&le&&Y(rn,U)}if(te.get(I)||te.get(q))for(var Mn=1;Mn<de.length-1;Mn++){var $t=de[Mn];if(Ee[$t]&(I|q)){for(var gn=0,Kt=0,Cn=Mn-1;Cn>=0&&(gn=Ee[de[Cn]],!!(gn&u));Cn--);for(var kn=Mn+1;kn<de.length&&(Kt=Ee[de[kn]],!!(Kt&u));kn++);gn===Kt&&(Ee[$t]===I?gn===z:gn&(z|F))&&Y($t,gn)}}if(te.get(z))for(var Jt=0;Jt<de.length;Jt++){var Ls=de[Jt];if(Ee[Ls]&z){for(var Ln=Jt-1;Ln>=0&&Ee[de[Ln]]&(V|u);Ln--)Y(de[Ln],z);for(Jt++;Jt<de.length&&Ee[de[Jt]]&(V|u|z);Jt++)Ee[de[Jt]]!==z&&Y(de[Jt],z)}}if(te.get(V)||te.get(I)||te.get(q))for(var On=0;On<de.length;On++){var as=de[On];if(Ee[as]&(V|I|q)){Y(as,B);for(var Is=On-1;Is>=0&&Ee[de[Is]]&u;Is--)Y(de[Is],B);for(var _s=On+1;_s<de.length&&Ee[de[_s]]&u;_s++)Y(de[_s],B)}}if(te.get(z))for(var ca=0,ua=Ne;ca<de.length;ca++){var Ml=de[ca],dc=Ee[Ml];dc&z?ua===O&&Y(Ml,O):dc&o&&(ua=dc)}if(te.get(l)){var Or=U|z|F,xd=Or|O,fc=[];{for(var br=[],Ii=0;Ii<de.length;Ii++)if(Ee[de[Ii]]&l){var zr=Pe[de[Ii]],hc=void 0;if(C(zr)!==null)if(br.length<63)br.push({char:zr,seqIndex:Ii});else break;else if((hc=N(zr))!==null)for(var Wa=br.length-1;Wa>=0;Wa--){var Mr=br[Wa].char;if(Mr===hc||Mr===N(R(zr))||C(R(Mr))===zr){fc.push([br[Wa].seqIndex,Ii]),br.length=Wa;break}}}fc.sort(function(ki,Aa){return ki[0]-Aa[0]})}for(var mc=0;mc<fc.length;mc++){for(var pc=fc[mc],Sl=pc[0],Gr=pc[1],Ya=!1,Qi=0,Oo=Sl+1;Oo<Gr;Oo++){var Ir=de[Oo];if(Ee[Ir]&xd){Ya=!0;var xc=Ee[Ir]&Or?U:O;if(xc===Ke){Qi=xc;break}}}if(Ya&&!Qi){Qi=Ne;for(var Sr=Sl-1;Sr>=0;Sr--){var gc=de[Sr];if(Ee[gc]&xd){var io=Ee[gc]&Or?U:O;io!==Ke?Qi=io:Qi=Ke;break}}}if(Qi){if(Ee[de[Sl]]=Ee[de[Gr]]=Qi,Qi!==Ke){for(var kr=Sl+1;kr<de.length;kr++)if(!(Ee[de[kr]]&u)){x(Pe[de[kr]])&$&&(Ee[de[kr]]=Qi);break}}if(Qi!==Ke){for(var zo=Gr+1;zo<de.length;zo++)if(!(Ee[de[zo]]&u)){x(Pe[de[zo]])&$&&(Ee[de[zo]]=Qi);break}}}}for(var Us=0;Us<de.length;Us++)if(Ee[de[Us]]&l){for(var Br=Us,Go=Us,da=Ne,ao=Us-1;ao>=0;ao--)if(Ee[de[ao]]&u)Br=ao;else{da=Ee[de[ao]]&Or?U:O;break}for(var vc=ye,Fr=Us+1;Fr<de.length;Fr++)if(Ee[de[Fr]]&(l|u))Go=Fr;else{vc=Ee[de[Fr]]&Or?U:O;break}for(var ro=Br;ro<=Go;ro++)Ee[de[ro]]=da===vc?da:Ke;Us=Go}}}for(var Mi=Ae.start;Mi<=Ae.end;Mi++){var Hf=ve[Mi],Xs=Ee[Mi];if(Hf&1?Xs&(O|z|F)&&ve[Mi]++:Xs&U?ve[Mi]++:Xs&(F|z)&&(ve[Mi]+=2),Xs&u&&(ve[Mi]=Mi===0?Ae.level:ve[Mi-1]),Mi===Ae.end||x(Pe[Mi])&(ie|W))for(var yc=Mi;yc>=0&&x(Pe[yc])&d;yc--)ve[yc]=Ae.level}}return{levels:ve,paragraphs:Re};function gd(ki,Aa){for(var fi=ki;fi<Pe.length;fi++){var _r=Ee[fi];if(_r&(U|le))return 1;if(_r&(W|O)||Aa&&_r===je)return 0;if(_r&r){var vd=ou(fi);fi=vd===-1?Pe.length:vd}}return 0}function ou(ki){for(var Aa=1,fi=ki+1;fi<Pe.length;fi++){var _r=Ee[fi];if(_r&W)break;if(_r&je){if(--Aa===0)return fi}else _r&r&&Aa++}return-1}}var st="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ve;function nt(){if(!Ve){var Pe=M(st,!0),Ge=Pe.map,$e=Pe.reverseMap;$e.forEach(function(Ee,ct){Ge.set(ct,Ee)}),Ve=Ge}}function St(Pe){return nt(),Ve.get(Pe)||null}function ze(Pe,Ge,$e,Ee){var ct=Pe.length;$e=Math.max(0,$e==null?0:+$e),Ee=Math.min(ct-1,Ee==null?ct-1:+Ee);for(var te=new Map,Y=$e;Y<=Ee;Y++)if(Ge[Y]&1){var ve=St(Pe[Y]);ve!==null&&te.set(Y,ve)}return te}function ae(Pe,Ge,$e,Ee){var ct=Pe.length;$e=Math.max(0,$e==null?0:+$e),Ee=Math.min(ct-1,Ee==null?ct-1:+Ee);var te=[];return Ge.paragraphs.forEach(function(Y){var ve=Math.max($e,Y.start),Be=Math.min(Ee,Y.end);if(ve<Be){for(var Re=Ge.levels.slice(ve,Be+1),Ae=Be;Ae>=ve&&x(Pe[Ae])&d;Ae--)Re[Ae]=Y.level;for(var yt=Y.level,gt=1/0,Dt=0;Dt<Re.length;Dt++){var Nt=Re[Dt];Nt>yt&&(yt=Nt),Nt<gt&&(gt=Nt|1)}for(var ke=yt;ke>=gt;ke--)for(var Ie=0;Ie<Re.length;Ie++)if(Re[Ie]>=ke){for(var ft=Ie;Ie+1<Re.length&&Re[Ie+1]>=ke;)Ie++;Ie>ft&&te.push([ft+ve,Ie+ve])}}}),te}function Fe(Pe,Ge,$e,Ee){var ct=We(Pe,Ge,$e,Ee),te=[].concat(Pe);return ct.forEach(function(Y,ve){te[ve]=(Ge.levels[Y]&1?St(Pe[Y]):null)||Pe[Y]}),te.join("")}function We(Pe,Ge,$e,Ee){for(var ct=ae(Pe,Ge,$e,Ee),te=[],Y=0;Y<Pe.length;Y++)te[Y]=Y;return ct.forEach(function(ve){for(var Be=ve[0],Re=ve[1],Ae=te.slice(Be,Re+1),yt=Ae.length;yt--;)te[Re-yt]=Ae[yt]}),te}return e.closingToOpeningBracket=N,e.getBidiCharType=x,e.getBidiCharTypeName=g,e.getCanonicalBracket=R,e.getEmbeddingLevels=Qe,e.getMirroredCharacter=St,e.getMirroredCharactersMap=ze,e.getReorderSegments=ae,e.getReorderedIndices=We,e.getReorderedString=Fe,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return i}const LR=/\bvoid\s+main\s*\(\s*\)\s*{/g;function i_(i){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,a){let r=Un[a];return r?i_(r):n}return i.replace(e,t)}const ba=[];for(let i=0;i<256;i++)ba[i]=(i<16?"0":"")+i.toString(16);function qW(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ba[i&255]+ba[i>>8&255]+ba[i>>16&255]+ba[i>>24&255]+"-"+ba[e&255]+ba[e>>8&255]+"-"+ba[e>>16&15|64]+ba[e>>24&255]+"-"+ba[t&63|128]+ba[t>>8&255]+"-"+ba[t>>16&255]+ba[t>>24&255]+ba[n&255]+ba[n>>8&255]+ba[n>>16&255]+ba[n>>24&255]).toUpperCase()}const xf=Object.assign||function(){let i=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},XW=Date.now(),gT=new WeakMap,vT=new Map;let WW=1e10;function a_(i,e){const t=JW(e);let n=gT.get(i);if(n||gT.set(i,n=Object.create(null)),n[t])return new n[t];const a=`_onBeforeCompile${t}`,r=function(d,f){i.onBeforeCompile.call(this,d,f);const m=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let x=vT[m];if(!x){const g=YW(this,d,e,t);x=vT[m]=g}d.vertexShader=x.vertexShader,d.fragmentShader=x.fragmentShader,xf(d.uniforms,this.uniforms),e.timeUniform&&(d.uniforms[e.timeUniform]={get value(){return Date.now()-XW}}),this[a]&&this[a](d)},o=function(){return l(e.chained?i:i.clone())},l=function(d){const f=Object.create(d,u);return Object.defineProperty(f,"baseMaterial",{value:i}),Object.defineProperty(f,"id",{value:WW++}),f.uuid=qW(),f.uniforms=xf({},d.uniforms,e.uniforms),f.defines=xf({},d.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=xf({},d.extensions,e.extensions),f._listeners=void 0,f},u={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:d=>{i.type=d}},isDerivedFrom:{writable:!0,configurable:!0,value:function(d){const f=this.baseMaterial;return d===f||f.isDerivedMaterial&&f.isDerivedFrom(d)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return r},set(d){this[a]=d}},copy:{writable:!0,configurable:!0,value:function(d){return i.copy.call(this,d),!i.isShaderMaterial&&!i.isDerivedMaterial&&(xf(this.extensions,d.extensions),xf(this.defines,d.defines),xf(this.uniforms,lb.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new i.constructor;return l(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=a_(i.isDerivedMaterial?i.getDepthMaterial():new ng({depthPacking:J_}),e),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=a_(i.isDerivedMaterial?i.getDistanceMaterial():new Ab,e),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:f}=this;d&&d.dispose(),f&&f.dispose(),i.dispose.call(this)}}};return n[t]=o,new o}function YW(i,{vertexShader:e,fragmentShader:t},n,a){let{vertexDefs:r,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:d,fragmentMainIntro:f,fragmentMainOutro:m,fragmentColorTransform:x,customRewriter:g,timeUniform:v}=n;if(r=r||"",o=o||"",l=l||"",d=d||"",f=f||"",m=m||"",(u||g)&&(e=i_(e)),(x||g)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=i_(t)),g){let M=g({vertexShader:e,fragmentShader:t});e=M.vertexShader,t=M.fragmentShader}if(x){let M=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,_=>(M.push(_),"")),m=`${x}
${M.join(`
`)}
${m}`}if(v){const M=`
uniform float ${v};
`;r=M+r,d=M+d}return u&&(e=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${e}
`,r=`${r}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(M,_,S,j)=>/\battribute\s+vec[23]\s+$/.test(j.substr(0,S))?_:`troika_${_}_${a}`),i.map&&i.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),e=yT(e,a,r,o,l),t=yT(t,a,d,f,m),{vertexShader:e,fragmentShader:t}}function yT(i,e,t,n,a){return(n||a||t)&&(i=i.replace(LR,`
${t}
void troikaOrigMain${e}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${a}
}`),i}function ZW(i,e){return i==="uniforms"?void 0:typeof e=="function"?e.toString():e}let KW=0;const bT=new Map;function JW(i){const e=JSON.stringify(i,ZW);let t=bT.get(e);return t==null&&bT.set(e,t=++KW),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function QW(){return typeof window>"u"&&(self.window=self),(function(i){var e={parse:function(a){var r=e._bin,o=new Uint8Array(a);if(r.readASCII(o,0,4)=="ttcf"){var l=4;r.readUshort(o,l),l+=2,r.readUshort(o,l),l+=2;var u=r.readUint(o,l);l+=4;for(var d=[],f=0;f<u;f++){var m=r.readUint(o,l);l+=4,d.push(e._readFont(o,m))}return d}return[e._readFont(o,0)]},_readFont:function(a,r){var o=e._bin,l=r;o.readFixed(a,r),r+=4;var u=o.readUshort(a,r);r+=2,o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],f={_data:a,_offset:l},m={},x=0;x<u;x++){var g=o.readASCII(a,r,4);r+=4,o.readUint(a,r),r+=4;var v=o.readUint(a,r);r+=4;var M=o.readUint(a,r);r+=4,m[g]={offset:v,length:M}}for(x=0;x<d.length;x++){var _=d[x];m[_]&&(f[_.trim()]=e[_.trim()].parse(a,m[_].offset,m[_].length,f))}return f},_tabOffset:function(a,r,o){for(var l=e._bin,u=l.readUshort(a,o+4),d=o+12,f=0;f<u;f++){var m=l.readASCII(a,d,4);d+=4,l.readUint(a,d),d+=4;var x=l.readUint(a,d);if(d+=4,l.readUint(a,d),d+=4,m==r)return x}return 0}};e._bin={readFixed:function(a,r){return(a[r]<<8|a[r+1])+(a[r+2]<<8|a[r+3])/65540},readF2dot14:function(a,r){return e._bin.readShort(a,r)/16384},readInt:function(a,r){return e._bin._view(a).getInt32(r)},readInt8:function(a,r){return e._bin._view(a).getInt8(r)},readShort:function(a,r){return e._bin._view(a).getInt16(r)},readUshort:function(a,r){return e._bin._view(a).getUint16(r)},readUshorts:function(a,r,o){for(var l=[],u=0;u<o;u++)l.push(e._bin.readUshort(a,r+2*u));return l},readUint:function(a,r){return e._bin._view(a).getUint32(r)},readUint64:function(a,r){return 4294967296*e._bin.readUint(a,r)+e._bin.readUint(a,r+4)},readASCII:function(a,r,o){for(var l="",u=0;u<o;u++)l+=String.fromCharCode(a[r+u]);return l},readUnicode:function(a,r,o){for(var l="",u=0;u<o;u++){var d=a[r++]<<8|a[r++];l+=String.fromCharCode(d)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(a,r,o){var l=e._bin._tdec;return l&&r==0&&o==a.length?l.decode(a):e._bin.readASCII(a,r,o)},readBytes:function(a,r,o){for(var l=[],u=0;u<o;u++)l.push(a[r+u]);return l},readASCIIArray:function(a,r,o){for(var l=[],u=0;u<o;u++)l.push(String.fromCharCode(a[r+u]));return l},_view:function(a){return a._dataView||(a._dataView=a.buffer?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(new Uint8Array(a).buffer))}},e._lctf={},e._lctf.parse=function(a,r,o,l,u){var d=e._bin,f={},m=r;d.readFixed(a,r),r+=4;var x=d.readUshort(a,r);r+=2;var g=d.readUshort(a,r);r+=2;var v=d.readUshort(a,r);return r+=2,f.scriptList=e._lctf.readScriptList(a,m+x),f.featureList=e._lctf.readFeatureList(a,m+g),f.lookupList=e._lctf.readLookupList(a,m+v,u),f},e._lctf.readLookupList=function(a,r,o){var l=e._bin,u=r,d=[],f=l.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var x=l.readUshort(a,r);r+=2;var g=e._lctf.readLookupTable(a,u+x,o);d.push(g)}return d},e._lctf.readLookupTable=function(a,r,o){var l=e._bin,u=r,d={tabs:[]};d.ltype=l.readUshort(a,r),r+=2,d.flag=l.readUshort(a,r),r+=2;var f=l.readUshort(a,r);r+=2;for(var m=d.ltype,x=0;x<f;x++){var g=l.readUshort(a,r);r+=2;var v=o(a,m,u+g,d);d.tabs.push(v)}return d},e._lctf.numOfOnes=function(a){for(var r=0,o=0;o<32;o++)(a>>>o&1)!=0&&r++;return r},e._lctf.readClassDef=function(a,r){var o=e._bin,l=[],u=o.readUshort(a,r);if(r+=2,u==1){var d=o.readUshort(a,r);r+=2;var f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++)l.push(d+m),l.push(d+m),l.push(o.readUshort(a,r)),r+=2}if(u==2){var x=o.readUshort(a,r);for(r+=2,m=0;m<x;m++)l.push(o.readUshort(a,r)),r+=2,l.push(o.readUshort(a,r)),r+=2,l.push(o.readUshort(a,r)),r+=2}return l},e._lctf.getInterval=function(a,r){for(var o=0;o<a.length;o+=3){var l=a[o],u=a[o+1];if(a[o+2],l<=r&&r<=u)return o}return-1},e._lctf.readCoverage=function(a,r){var o=e._bin,l={};l.fmt=o.readUshort(a,r),r+=2;var u=o.readUshort(a,r);return r+=2,l.fmt==1&&(l.tab=o.readUshorts(a,r,u)),l.fmt==2&&(l.tab=o.readUshorts(a,r,3*u)),l},e._lctf.coverageIndex=function(a,r){var o=a.tab;if(a.fmt==1)return o.indexOf(r);if(a.fmt==2){var l=e._lctf.getInterval(o,r);if(l!=-1)return o[l+2]+(r-o[l])}return-1},e._lctf.readFeatureList=function(a,r){var o=e._bin,l=r,u=[],d=o.readUshort(a,r);r+=2;for(var f=0;f<d;f++){var m=o.readASCII(a,r,4);r+=4;var x=o.readUshort(a,r);r+=2;var g=e._lctf.readFeatureTable(a,l+x);g.tag=m.trim(),u.push(g)}return u},e._lctf.readFeatureTable=function(a,r){var o=e._bin,l=r,u={},d=o.readUshort(a,r);r+=2,d>0&&(u.featureParams=l+d);var f=o.readUshort(a,r);r+=2,u.tab=[];for(var m=0;m<f;m++)u.tab.push(o.readUshort(a,r+2*m));return u},e._lctf.readScriptList=function(a,r){var o=e._bin,l=r,u={},d=o.readUshort(a,r);r+=2;for(var f=0;f<d;f++){var m=o.readASCII(a,r,4);r+=4;var x=o.readUshort(a,r);r+=2,u[m.trim()]=e._lctf.readScriptTable(a,l+x)}return u},e._lctf.readScriptTable=function(a,r){var o=e._bin,l=r,u={},d=o.readUshort(a,r);r+=2,d>0&&(u.default=e._lctf.readLangSysTable(a,l+d));var f=o.readUshort(a,r);r+=2;for(var m=0;m<f;m++){var x=o.readASCII(a,r,4);r+=4;var g=o.readUshort(a,r);r+=2,u[x.trim()]=e._lctf.readLangSysTable(a,l+g)}return u},e._lctf.readLangSysTable=function(a,r){var o=e._bin,l={};o.readUshort(a,r),r+=2,l.reqFeature=o.readUshort(a,r),r+=2;var u=o.readUshort(a,r);return r+=2,l.features=o.readUshorts(a,r,u),l},e.CFF={},e.CFF.parse=function(a,r,o){var l=e._bin;(a=new Uint8Array(a.buffer,r,o))[r=0],a[++r],a[++r],a[++r],r++;var u=[];r=e.CFF.readIndex(a,r,u);for(var d=[],f=0;f<u.length-1;f++)d.push(l.readASCII(a,r+u[f],u[f+1]-u[f]));r+=u[u.length-1];var m=[];r=e.CFF.readIndex(a,r,m);var x=[];for(f=0;f<m.length-1;f++)x.push(e.CFF.readDict(a,r+m[f],r+m[f+1]));r+=m[m.length-1];var g=x[0],v=[];r=e.CFF.readIndex(a,r,v);var M=[];for(f=0;f<v.length-1;f++)M.push(l.readASCII(a,r+v[f],v[f+1]-v[f]));if(r+=v[v.length-1],e.CFF.readSubrs(a,r,g),g.CharStrings){r=g.CharStrings,v=[],r=e.CFF.readIndex(a,r,v);var _=[];for(f=0;f<v.length-1;f++)_.push(l.readBytes(a,r+v[f],v[f+1]-v[f]));g.CharStrings=_}if(g.ROS){r=g.FDArray;var S=[];for(r=e.CFF.readIndex(a,r,S),g.FDArray=[],f=0;f<S.length-1;f++){var j=e.CFF.readDict(a,r+S[f],r+S[f+1]);e.CFF._readFDict(a,j,M),g.FDArray.push(j)}r+=S[S.length-1],r=g.FDSelect,g.FDSelect=[];var A=a[r];if(r++,A!=3)throw A;var C=l.readUshort(a,r);for(r+=2,f=0;f<C+1;f++)g.FDSelect.push(l.readUshort(a,r),a[r+2]),r+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(a,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(a,g.charset,g.CharStrings.length)),e.CFF._readFDict(a,g,M),g},e.CFF._readFDict=function(a,r,o){var l;for(var u in r.Private&&(l=r.Private[1],r.Private=e.CFF.readDict(a,l,l+r.Private[0]),r.Private.Subrs&&e.CFF.readSubrs(a,l+r.Private.Subrs,r.Private)),r)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(r[u]=o[r[u]-426+35])},e.CFF.readSubrs=function(a,r,o){var l=e._bin,u=[];r=e.CFF.readIndex(a,r,u);var d,f=u.length;d=f<1240?107:f<33900?1131:32768,o.Bias=d,o.Subrs=[];for(var m=0;m<u.length-1;m++)o.Subrs.push(l.readBytes(a,r+u[m],u[m+1]-u[m]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(a,r){for(var o=0;o<a.charset.length;o++)if(a.charset[o]==r)return o;return-1},e.CFF.glyphBySE=function(a,r){return r<0||r>255?-1:e.CFF.glyphByUnicode(a,e.CFF.tableSE[r])},e.CFF.readEncoding=function(a,r,o){e._bin;var l=[".notdef"],u=a[r];if(r++,u!=0)throw"error: unknown encoding format: "+u;var d=a[r];r++;for(var f=0;f<d;f++)l.push(a[r+f]);return l},e.CFF.readCharset=function(a,r,o){var l=e._bin,u=[".notdef"],d=a[r];if(r++,d==0)for(var f=0;f<o;f++){var m=l.readUshort(a,r);r+=2,u.push(m)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;u.length<o;){m=l.readUshort(a,r),r+=2;var x=0;for(d==1?(x=a[r],r++):(x=l.readUshort(a,r),r+=2),f=0;f<=x;f++)u.push(m),m++}}return u},e.CFF.readIndex=function(a,r,o){var l=e._bin,u=l.readUshort(a,r)+1,d=a[r+=2];if(r++,d==1)for(var f=0;f<u;f++)o.push(a[r+f]);else if(d==2)for(f=0;f<u;f++)o.push(l.readUshort(a,r+2*f));else if(d==3)for(f=0;f<u;f++)o.push(16777215&l.readUint(a,r+3*f-1));else if(u!=1)throw"unsupported offset size: "+d+", count: "+u;return(r+=u*d)-1},e.CFF.getCharString=function(a,r,o){var l=e._bin,u=a[r],d=a[r+1];a[r+2],a[r+3],a[r+4];var f=1,m=null,x=null;u<=20&&(m=u,f=1),u==12&&(m=100*u+d,f=2),21<=u&&u<=27&&(m=u,f=1),u==28&&(x=l.readShort(a,r+1),f=3),29<=u&&u<=31&&(m=u,f=1),32<=u&&u<=246&&(x=u-139,f=1),247<=u&&u<=250&&(x=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(x=256*-(u-251)-d-108,f=2),u==255&&(x=l.readInt(a,r+1)/65535,f=5),o.val=x??"o"+m,o.size=f},e.CFF.readCharString=function(a,r,o){for(var l=r+o,u=e._bin,d=[];r<l;){var f=a[r],m=a[r+1];a[r+2],a[r+3],a[r+4];var x=1,g=null,v=null;f<=20&&(g=f,x=1),f==12&&(g=100*f+m,x=2),f!=19&&f!=20||(g=f,x=2),21<=f&&f<=27&&(g=f,x=1),f==28&&(v=u.readShort(a,r+1),x=3),29<=f&&f<=31&&(g=f,x=1),32<=f&&f<=246&&(v=f-139,x=1),247<=f&&f<=250&&(v=256*(f-247)+m+108,x=2),251<=f&&f<=254&&(v=256*-(f-251)-m-108,x=2),f==255&&(v=u.readInt(a,r+1)/65535,x=5),d.push(v??"o"+g),r+=x}return d},e.CFF.readDict=function(a,r,o){for(var l=e._bin,u={},d=[];r<o;){var f=a[r],m=a[r+1];a[r+2],a[r+3],a[r+4];var x=1,g=null,v=null;if(f==28&&(v=l.readShort(a,r+1),x=3),f==29&&(v=l.readInt(a,r+1),x=5),32<=f&&f<=246&&(v=f-139,x=1),247<=f&&f<=250&&(v=256*(f-247)+m+108,x=2),251<=f&&f<=254&&(v=256*-(f-251)-m-108,x=2),f==255)throw v=l.readInt(a,r+1)/65535,x=5,"unknown number";if(f==30){var M=[];for(x=1;;){var _=a[r+x];x++;var S=_>>4,j=15&_;if(S!=15&&M.push(S),j!=15&&M.push(j),j==15)break}for(var A="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],N=0;N<M.length;N++)A+=C[M[N]];v=parseFloat(A)}f<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],x=1,f==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][m],x=2)),g!=null?(u[g]=d.length==1?d[0]:d,d=[]):d.push(v),r+=x}return u},e.cmap={},e.cmap.parse=function(a,r,o){a=new Uint8Array(a.buffer,r,o),r=0;var l=e._bin,u={};l.readUshort(a,r),r+=2;var d=l.readUshort(a,r);r+=2;var f=[];u.tables=[];for(var m=0;m<d;m++){var x=l.readUshort(a,r);r+=2;var g=l.readUshort(a,r);r+=2;var v=l.readUint(a,r);r+=4;var M="p"+x+"e"+g,_=f.indexOf(v);if(_==-1){var S;_=u.tables.length,f.push(v);var j=l.readUshort(a,v);j==0?S=e.cmap.parse0(a,v):j==4?S=e.cmap.parse4(a,v):j==6?S=e.cmap.parse6(a,v):j==12?S=e.cmap.parse12(a,v):console.debug("unknown format: "+j,x,g,v),u.tables.push(S)}if(u[M]!=null)throw"multiple tables for one platform+encoding";u[M]=_}return u},e.cmap.parse0=function(a,r){var o=e._bin,l={};l.format=o.readUshort(a,r),r+=2;var u=o.readUshort(a,r);r+=2,o.readUshort(a,r),r+=2,l.map=[];for(var d=0;d<u-6;d++)l.map.push(a[r+d]);return l},e.cmap.parse4=function(a,r){var o=e._bin,l=r,u={};u.format=o.readUshort(a,r),r+=2;var d=o.readUshort(a,r);r+=2,o.readUshort(a,r),r+=2;var f=o.readUshort(a,r);r+=2;var m=f/2;u.searchRange=o.readUshort(a,r),r+=2,u.entrySelector=o.readUshort(a,r),r+=2,u.rangeShift=o.readUshort(a,r),r+=2,u.endCount=o.readUshorts(a,r,m),r+=2*m,r+=2,u.startCount=o.readUshorts(a,r,m),r+=2*m,u.idDelta=[];for(var x=0;x<m;x++)u.idDelta.push(o.readShort(a,r)),r+=2;for(u.idRangeOffset=o.readUshorts(a,r,m),r+=2*m,u.glyphIdArray=[];r<l+d;)u.glyphIdArray.push(o.readUshort(a,r)),r+=2;return u},e.cmap.parse6=function(a,r){var o=e._bin,l={};l.format=o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2,o.readUshort(a,r),r+=2,l.firstCode=o.readUshort(a,r),r+=2;var u=o.readUshort(a,r);r+=2,l.glyphIdArray=[];for(var d=0;d<u;d++)l.glyphIdArray.push(o.readUshort(a,r)),r+=2;return l},e.cmap.parse12=function(a,r){var o=e._bin,l={};l.format=o.readUshort(a,r),r+=2,r+=2,o.readUint(a,r),r+=4,o.readUint(a,r),r+=4;var u=o.readUint(a,r);r+=4,l.groups=[];for(var d=0;d<u;d++){var f=r+12*d,m=o.readUint(a,f+0),x=o.readUint(a,f+4),g=o.readUint(a,f+8);l.groups.push([m,x,g])}return l},e.glyf={},e.glyf.parse=function(a,r,o,l){for(var u=[],d=0;d<l.maxp.numGlyphs;d++)u.push(null);return u},e.glyf._parseGlyf=function(a,r){var o=e._bin,l=a._data,u=e._tabOffset(l,"glyf",a._offset)+a.loca[r];if(a.loca[r]==a.loca[r+1])return null;var d={};if(d.noc=o.readShort(l,u),u+=2,d.xMin=o.readShort(l,u),u+=2,d.yMin=o.readShort(l,u),u+=2,d.xMax=o.readShort(l,u),u+=2,d.yMax=o.readShort(l,u),u+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var f=0;f<d.noc;f++)d.endPts.push(o.readUshort(l,u)),u+=2;var m=o.readUshort(l,u);if(u+=2,l.length-u<m)return null;d.instructions=o.readBytes(l,u,m),u+=m;var x=d.endPts[d.noc-1]+1;for(d.flags=[],f=0;f<x;f++){var g=l[u];if(u++,d.flags.push(g),(8&g)!=0){var v=l[u];u++;for(var M=0;M<v;M++)d.flags.push(g),f++}}for(d.xs=[],f=0;f<x;f++){var _=(2&d.flags[f])!=0,S=(16&d.flags[f])!=0;_?(d.xs.push(S?l[u]:-l[u]),u++):S?d.xs.push(0):(d.xs.push(o.readShort(l,u)),u+=2)}for(d.ys=[],f=0;f<x;f++)_=(4&d.flags[f])!=0,S=(32&d.flags[f])!=0,_?(d.ys.push(S?l[u]:-l[u]),u++):S?d.ys.push(0):(d.ys.push(o.readShort(l,u)),u+=2);var j=0,A=0;for(f=0;f<x;f++)j+=d.xs[f],A+=d.ys[f],d.xs[f]=j,d.ys[f]=A}else{var C;d.parts=[];do{C=o.readUshort(l,u),u+=2;var N={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(N),N.glyphIndex=o.readUshort(l,u),u+=2,1&C){var R=o.readShort(l,u);u+=2;var O=o.readShort(l,u);u+=2}else R=o.readInt8(l,u),u++,O=o.readInt8(l,u),u++;2&C?(N.m.tx=R,N.m.ty=O):(N.p1=R,N.p2=O),8&C?(N.m.a=N.m.d=o.readF2dot14(l,u),u+=2):64&C?(N.m.a=o.readF2dot14(l,u),u+=2,N.m.d=o.readF2dot14(l,u),u+=2):128&C&&(N.m.a=o.readF2dot14(l,u),u+=2,N.m.b=o.readF2dot14(l,u),u+=2,N.m.c=o.readF2dot14(l,u),u+=2,N.m.d=o.readF2dot14(l,u),u+=2)}while(32&C);if(256&C){var U=o.readUshort(l,u);for(u+=2,d.instr=[],f=0;f<U;f++)d.instr.push(l[u]),u++}}return d},e.GDEF={},e.GDEF.parse=function(a,r,o,l){var u=r;r+=4;var d=e._bin.readUshort(a,r);return{glyphClassDef:d===0?null:e._lctf.readClassDef(a,u+d)}},e.GPOS={},e.GPOS.parse=function(a,r,o,l){return e._lctf.parse(a,r,o,l,e.GPOS.subt)},e.GPOS.subt=function(a,r,o,l){var u=e._bin,d=o,f={};if(f.fmt=u.readUshort(a,o),o+=2,r==1||r==2||r==3||r==7||r==8&&f.fmt<=2){var m=u.readUshort(a,o);o+=2,f.coverage=e._lctf.readCoverage(a,m+d)}if(r==1&&f.fmt==1){var x=u.readUshort(a,o);o+=2,x!=0&&(f.pos=e.GPOS.readValueRecord(a,o,x))}else if(r==2&&f.fmt>=1&&f.fmt<=2){x=u.readUshort(a,o),o+=2;var g=u.readUshort(a,o);o+=2;var v=e._lctf.numOfOnes(x),M=e._lctf.numOfOnes(g);if(f.fmt==1){f.pairsets=[];var _=u.readUshort(a,o);o+=2;for(var S=0;S<_;S++){var j=d+u.readUshort(a,o);o+=2;var A=u.readUshort(a,j);j+=2;for(var C=[],N=0;N<A;N++){var R=u.readUshort(a,j);j+=2,x!=0&&(F=e.GPOS.readValueRecord(a,j,x),j+=2*v),g!=0&&(q=e.GPOS.readValueRecord(a,j,g),j+=2*M),C.push({gid2:R,val1:F,val2:q})}f.pairsets.push(C)}}if(f.fmt==2){var O=u.readUshort(a,o);o+=2;var U=u.readUshort(a,o);o+=2;var z=u.readUshort(a,o);o+=2;var I=u.readUshort(a,o);for(o+=2,f.classDef1=e._lctf.readClassDef(a,d+O),f.classDef2=e._lctf.readClassDef(a,d+U),f.matrix=[],S=0;S<z;S++){var V=[];for(N=0;N<I;N++){var F=null,q=null;x!=0&&(F=e.GPOS.readValueRecord(a,o,x),o+=2*v),g!=0&&(q=e.GPOS.readValueRecord(a,o,g),o+=2*M),V.push({val1:F,val2:q})}f.matrix.push(V)}}}else if(r==4&&f.fmt==1)f.markCoverage=e._lctf.readCoverage(a,u.readUshort(a,o)+d),f.baseCoverage=e._lctf.readCoverage(a,u.readUshort(a,o+2)+d),f.markClassCount=u.readUshort(a,o+4),f.markArray=e.GPOS.readMarkArray(a,u.readUshort(a,o+6)+d),f.baseArray=e.GPOS.readBaseArray(a,u.readUshort(a,o+8)+d,f.markClassCount);else if(r==6&&f.fmt==1)f.mark1Coverage=e._lctf.readCoverage(a,u.readUshort(a,o)+d),f.mark2Coverage=e._lctf.readCoverage(a,u.readUshort(a,o+2)+d),f.markClassCount=u.readUshort(a,o+4),f.mark1Array=e.GPOS.readMarkArray(a,u.readUshort(a,o+6)+d),f.mark2Array=e.GPOS.readBaseArray(a,u.readUshort(a,o+8)+d,f.markClassCount);else{if(r==9&&f.fmt==1){var W=u.readUshort(a,o);o+=2;var ie=u.readUint(a,o);if(o+=4,l.ltype==9)l.ltype=W;else if(l.ltype!=W)throw"invalid extension substitution";return e.GPOS.subt(a,l.ltype,d+ie)}console.debug("unsupported GPOS table LookupType",r,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(a,r,o){var l=e._bin,u=[];return u.push(1&o?l.readShort(a,r):0),r+=1&o?2:0,u.push(2&o?l.readShort(a,r):0),r+=2&o?2:0,u.push(4&o?l.readShort(a,r):0),r+=4&o?2:0,u.push(8&o?l.readShort(a,r):0),r+=8&o?2:0,u},e.GPOS.readBaseArray=function(a,r,o){var l=e._bin,u=[],d=r,f=l.readUshort(a,r);r+=2;for(var m=0;m<f;m++){for(var x=[],g=0;g<o;g++)x.push(e.GPOS.readAnchorRecord(a,d+l.readUshort(a,r))),r+=2;u.push(x)}return u},e.GPOS.readMarkArray=function(a,r){var o=e._bin,l=[],u=r,d=o.readUshort(a,r);r+=2;for(var f=0;f<d;f++){var m=e.GPOS.readAnchorRecord(a,o.readUshort(a,r+2)+u);m.markClass=o.readUshort(a,r),l.push(m),r+=4}return l},e.GPOS.readAnchorRecord=function(a,r){var o=e._bin,l={};return l.fmt=o.readUshort(a,r),l.x=o.readShort(a,r+2),l.y=o.readShort(a,r+4),l},e.GSUB={},e.GSUB.parse=function(a,r,o,l){return e._lctf.parse(a,r,o,l,e.GSUB.subt)},e.GSUB.subt=function(a,r,o,l){var u=e._bin,d=o,f={};if(f.fmt=u.readUshort(a,o),o+=2,r!=1&&r!=2&&r!=4&&r!=5&&r!=6)return null;if(r==1||r==2||r==4||r==5&&f.fmt<=2||r==6&&f.fmt<=2){var m=u.readUshort(a,o);o+=2,f.coverage=e._lctf.readCoverage(a,d+m)}if(r==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=u.readShort(a,o),o+=2;else if(f.fmt==2){var x=u.readUshort(a,o);o+=2,f.newg=u.readUshorts(a,o,x),o+=2*f.newg.length}}else if(r==2&&f.fmt==1){x=u.readUshort(a,o),o+=2,f.seqs=[];for(var g=0;g<x;g++){var v=u.readUshort(a,o)+d;o+=2;var M=u.readUshort(a,v);f.seqs.push(u.readUshorts(a,v+2,M))}}else if(r==4)for(f.vals=[],x=u.readUshort(a,o),o+=2,g=0;g<x;g++){var _=u.readUshort(a,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(a,d+_))}else if(r==5&&f.fmt==2){if(f.fmt==2){var S=u.readUshort(a,o);o+=2,f.cDef=e._lctf.readClassDef(a,d+S),f.scset=[];var j=u.readUshort(a,o);for(o+=2,g=0;g<j;g++){var A=u.readUshort(a,o);o+=2,f.scset.push(A==0?null:e.GSUB.readSubClassSet(a,d+A))}}}else if(r==6&&f.fmt==3){if(f.fmt==3){for(g=0;g<3;g++){x=u.readUshort(a,o),o+=2;for(var C=[],N=0;N<x;N++)C.push(e._lctf.readCoverage(a,d+u.readUshort(a,o+2*N)));o+=2*x,g==0&&(f.backCvg=C),g==1&&(f.inptCvg=C),g==2&&(f.ahedCvg=C)}x=u.readUshort(a,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(a,o,x)}}else{if(r==7&&f.fmt==1){var R=u.readUshort(a,o);o+=2;var O=u.readUint(a,o);if(o+=4,l.ltype==9)l.ltype=R;else if(l.ltype!=R)throw"invalid extension substitution";return e.GSUB.subt(a,l.ltype,d+O)}console.debug("unsupported GSUB table LookupType",r,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(a,r){var o=e._bin.readUshort,l=r,u=[],d=o(a,r);r+=2;for(var f=0;f<d;f++){var m=o(a,r);r+=2,u.push(e.GSUB.readSubClassRule(a,l+m))}return u},e.GSUB.readSubClassRule=function(a,r){var o=e._bin.readUshort,l={},u=o(a,r),d=o(a,r+=2);r+=2,l.input=[];for(var f=0;f<u-1;f++)l.input.push(o(a,r)),r+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(a,r,d),l},e.GSUB.readSubstLookupRecords=function(a,r,o){for(var l=e._bin.readUshort,u=[],d=0;d<o;d++)u.push(l(a,r),l(a,r+2)),r+=4;return u},e.GSUB.readChainSubClassSet=function(a,r){var o=e._bin,l=r,u=[],d=o.readUshort(a,r);r+=2;for(var f=0;f<d;f++){var m=o.readUshort(a,r);r+=2,u.push(e.GSUB.readChainSubClassRule(a,l+m))}return u},e.GSUB.readChainSubClassRule=function(a,r){for(var o=e._bin,l={},u=["backtrack","input","lookahead"],d=0;d<u.length;d++){var f=o.readUshort(a,r);r+=2,d==1&&f--,l[u[d]]=o.readUshorts(a,r,f),r+=2*l[u[d]].length}return f=o.readUshort(a,r),r+=2,l.subst=o.readUshorts(a,r,2*f),r+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(a,r){var o=e._bin,l=r,u=[],d=o.readUshort(a,r);r+=2;for(var f=0;f<d;f++){var m=o.readUshort(a,r);r+=2,u.push(e.GSUB.readLigature(a,l+m))}return u},e.GSUB.readLigature=function(a,r){var o=e._bin,l={chain:[]};l.nglyph=o.readUshort(a,r),r+=2;var u=o.readUshort(a,r);r+=2;for(var d=0;d<u-1;d++)l.chain.push(o.readUshort(a,r)),r+=2;return l},e.head={},e.head.parse=function(a,r,o){var l=e._bin,u={};return l.readFixed(a,r),r+=4,u.fontRevision=l.readFixed(a,r),r+=4,l.readUint(a,r),r+=4,l.readUint(a,r),r+=4,u.flags=l.readUshort(a,r),r+=2,u.unitsPerEm=l.readUshort(a,r),r+=2,u.created=l.readUint64(a,r),r+=8,u.modified=l.readUint64(a,r),r+=8,u.xMin=l.readShort(a,r),r+=2,u.yMin=l.readShort(a,r),r+=2,u.xMax=l.readShort(a,r),r+=2,u.yMax=l.readShort(a,r),r+=2,u.macStyle=l.readUshort(a,r),r+=2,u.lowestRecPPEM=l.readUshort(a,r),r+=2,u.fontDirectionHint=l.readShort(a,r),r+=2,u.indexToLocFormat=l.readShort(a,r),r+=2,u.glyphDataFormat=l.readShort(a,r),r+=2,u},e.hhea={},e.hhea.parse=function(a,r,o){var l=e._bin,u={};return l.readFixed(a,r),r+=4,u.ascender=l.readShort(a,r),r+=2,u.descender=l.readShort(a,r),r+=2,u.lineGap=l.readShort(a,r),r+=2,u.advanceWidthMax=l.readUshort(a,r),r+=2,u.minLeftSideBearing=l.readShort(a,r),r+=2,u.minRightSideBearing=l.readShort(a,r),r+=2,u.xMaxExtent=l.readShort(a,r),r+=2,u.caretSlopeRise=l.readShort(a,r),r+=2,u.caretSlopeRun=l.readShort(a,r),r+=2,u.caretOffset=l.readShort(a,r),r+=2,r+=8,u.metricDataFormat=l.readShort(a,r),r+=2,u.numberOfHMetrics=l.readUshort(a,r),r+=2,u},e.hmtx={},e.hmtx.parse=function(a,r,o,l){for(var u=e._bin,d={aWidth:[],lsBearing:[]},f=0,m=0,x=0;x<l.maxp.numGlyphs;x++)x<l.hhea.numberOfHMetrics&&(f=u.readUshort(a,r),r+=2,m=u.readShort(a,r),r+=2),d.aWidth.push(f),d.lsBearing.push(m);return d},e.kern={},e.kern.parse=function(a,r,o,l){var u=e._bin,d=u.readUshort(a,r);if(r+=2,d==1)return e.kern.parseV1(a,r-2,o,l);var f=u.readUshort(a,r);r+=2;for(var m={glyph1:[],rval:[]},x=0;x<f;x++){r+=2,o=u.readUshort(a,r),r+=2;var g=u.readUshort(a,r);r+=2;var v=g>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;r=e.kern.readFormat0(a,r,m)}return m},e.kern.parseV1=function(a,r,o,l){var u=e._bin;u.readFixed(a,r),r+=4;var d=u.readUint(a,r);r+=4;for(var f={glyph1:[],rval:[]},m=0;m<d;m++){u.readUint(a,r),r+=4;var x=u.readUshort(a,r);r+=2,u.readUshort(a,r),r+=2;var g=x>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;r=e.kern.readFormat0(a,r,f)}return f},e.kern.readFormat0=function(a,r,o){var l=e._bin,u=-1,d=l.readUshort(a,r);r+=2,l.readUshort(a,r),r+=2,l.readUshort(a,r),r+=2,l.readUshort(a,r),r+=2;for(var f=0;f<d;f++){var m=l.readUshort(a,r);r+=2;var x=l.readUshort(a,r);r+=2;var g=l.readShort(a,r);r+=2,m!=u&&(o.glyph1.push(m),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(x),v.vals.push(g),u=m}return r},e.loca={},e.loca.parse=function(a,r,o,l){var u=e._bin,d=[],f=l.head.indexToLocFormat,m=l.maxp.numGlyphs+1;if(f==0)for(var x=0;x<m;x++)d.push(u.readUshort(a,r+(x<<1))<<1);if(f==1)for(x=0;x<m;x++)d.push(u.readUint(a,r+(x<<2)));return d},e.maxp={},e.maxp.parse=function(a,r,o){var l=e._bin,u={},d=l.readUint(a,r);return r+=4,u.numGlyphs=l.readUshort(a,r),r+=2,d==65536&&(u.maxPoints=l.readUshort(a,r),r+=2,u.maxContours=l.readUshort(a,r),r+=2,u.maxCompositePoints=l.readUshort(a,r),r+=2,u.maxCompositeContours=l.readUshort(a,r),r+=2,u.maxZones=l.readUshort(a,r),r+=2,u.maxTwilightPoints=l.readUshort(a,r),r+=2,u.maxStorage=l.readUshort(a,r),r+=2,u.maxFunctionDefs=l.readUshort(a,r),r+=2,u.maxInstructionDefs=l.readUshort(a,r),r+=2,u.maxStackElements=l.readUshort(a,r),r+=2,u.maxSizeOfInstructions=l.readUshort(a,r),r+=2,u.maxComponentElements=l.readUshort(a,r),r+=2,u.maxComponentDepth=l.readUshort(a,r),r+=2),u},e.name={},e.name.parse=function(a,r,o){var l=e._bin,u={};l.readUshort(a,r),r+=2;var d=l.readUshort(a,r);r+=2,l.readUshort(a,r);for(var f,m=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],x=r+=2,g=0;g<d;g++){var v=l.readUshort(a,r);r+=2;var M=l.readUshort(a,r);r+=2;var _=l.readUshort(a,r);r+=2;var S=l.readUshort(a,r);r+=2;var j=l.readUshort(a,r);r+=2;var A=l.readUshort(a,r);r+=2;var C,N=m[S],R=x+12*d+A;if(v==0)C=l.readUnicode(a,R,j/2);else if(v==3&&M==0)C=l.readUnicode(a,R,j/2);else if(M==0)C=l.readASCII(a,R,j);else if(M==1)C=l.readUnicode(a,R,j/2);else if(M==3)C=l.readUnicode(a,R,j/2);else{if(v!=1)throw"unknown encoding "+M+", platformID: "+v;C=l.readASCII(a,R,j),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var O="p"+v+","+_.toString(16);u[O]==null&&(u[O]={}),u[O][N!==void 0?N:S]=C,u[O]._lang=_}for(var U in u)if(u[U].postScriptName!=null&&u[U]._lang==1033)return u[U];for(var U in u)if(u[U].postScriptName!=null&&u[U]._lang==0)return u[U];for(var U in u)if(u[U].postScriptName!=null&&u[U]._lang==3084)return u[U];for(var U in u)if(u[U].postScriptName!=null)return u[U];for(var U in u){f=U;break}return console.debug("returning name table with languageID "+u[f]._lang),u[f]},e["OS/2"]={},e["OS/2"].parse=function(a,r,o){var l=e._bin.readUshort(a,r);r+=2;var u={};if(l==0)e["OS/2"].version0(a,r,u);else if(l==1)e["OS/2"].version1(a,r,u);else if(l==2||l==3||l==4)e["OS/2"].version2(a,r,u);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(a,r,u)}return u},e["OS/2"].version0=function(a,r,o){var l=e._bin;return o.xAvgCharWidth=l.readShort(a,r),r+=2,o.usWeightClass=l.readUshort(a,r),r+=2,o.usWidthClass=l.readUshort(a,r),r+=2,o.fsType=l.readUshort(a,r),r+=2,o.ySubscriptXSize=l.readShort(a,r),r+=2,o.ySubscriptYSize=l.readShort(a,r),r+=2,o.ySubscriptXOffset=l.readShort(a,r),r+=2,o.ySubscriptYOffset=l.readShort(a,r),r+=2,o.ySuperscriptXSize=l.readShort(a,r),r+=2,o.ySuperscriptYSize=l.readShort(a,r),r+=2,o.ySuperscriptXOffset=l.readShort(a,r),r+=2,o.ySuperscriptYOffset=l.readShort(a,r),r+=2,o.yStrikeoutSize=l.readShort(a,r),r+=2,o.yStrikeoutPosition=l.readShort(a,r),r+=2,o.sFamilyClass=l.readShort(a,r),r+=2,o.panose=l.readBytes(a,r,10),r+=10,o.ulUnicodeRange1=l.readUint(a,r),r+=4,o.ulUnicodeRange2=l.readUint(a,r),r+=4,o.ulUnicodeRange3=l.readUint(a,r),r+=4,o.ulUnicodeRange4=l.readUint(a,r),r+=4,o.achVendID=[l.readInt8(a,r),l.readInt8(a,r+1),l.readInt8(a,r+2),l.readInt8(a,r+3)],r+=4,o.fsSelection=l.readUshort(a,r),r+=2,o.usFirstCharIndex=l.readUshort(a,r),r+=2,o.usLastCharIndex=l.readUshort(a,r),r+=2,o.sTypoAscender=l.readShort(a,r),r+=2,o.sTypoDescender=l.readShort(a,r),r+=2,o.sTypoLineGap=l.readShort(a,r),r+=2,o.usWinAscent=l.readUshort(a,r),r+=2,o.usWinDescent=l.readUshort(a,r),r+=2},e["OS/2"].version1=function(a,r,o){var l=e._bin;return r=e["OS/2"].version0(a,r,o),o.ulCodePageRange1=l.readUint(a,r),r+=4,o.ulCodePageRange2=l.readUint(a,r),r+=4},e["OS/2"].version2=function(a,r,o){var l=e._bin;return r=e["OS/2"].version1(a,r,o),o.sxHeight=l.readShort(a,r),r+=2,o.sCapHeight=l.readShort(a,r),r+=2,o.usDefault=l.readUshort(a,r),r+=2,o.usBreak=l.readUshort(a,r),r+=2,o.usMaxContext=l.readUshort(a,r),r+=2},e["OS/2"].version5=function(a,r,o){var l=e._bin;return r=e["OS/2"].version2(a,r,o),o.usLowerOpticalPointSize=l.readUshort(a,r),r+=2,o.usUpperOpticalPointSize=l.readUshort(a,r),r+=2},e.post={},e.post.parse=function(a,r,o){var l=e._bin,u={};return u.version=l.readFixed(a,r),r+=4,u.italicAngle=l.readFixed(a,r),r+=4,u.underlinePosition=l.readShort(a,r),r+=2,u.underlineThickness=l.readShort(a,r),r+=2,u},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(a,r){var o=a.cmap,l=-1;if(o.p0e4!=null?l=o.p0e4:o.p3e1!=null?l=o.p3e1:o.p1e0!=null?l=o.p1e0:o.p0e3!=null&&(l=o.p0e3),l==-1)throw"no familiar platform and encoding!";var u=o.tables[l];if(u.format==0)return r>=u.map.length?0:u.map[r];if(u.format==4){for(var d=-1,f=0;f<u.endCount.length;f++)if(r<=u.endCount[f]){d=f;break}return d==-1||u.startCount[d]>r?0:65535&(u.idRangeOffset[d]!=0?u.glyphIdArray[r-u.startCount[d]+(u.idRangeOffset[d]>>1)-(u.idRangeOffset.length-d)]:r+u.idDelta[d])}if(u.format==12){if(r>u.groups[u.groups.length-1][1])return 0;for(f=0;f<u.groups.length;f++){var m=u.groups[f];if(m[0]<=r&&r<=m[1])return m[2]+(r-m[0])}return 0}throw"unknown cmap table format "+u.format},e.U.glyphToPath=function(a,r){var o={cmds:[],crds:[]};if(a.SVG&&a.SVG.entries[r]){var l=a.SVG.entries[r];return l==null?o:(typeof l=="string"&&(l=e.SVG.toPath(l),a.SVG.entries[r]=l),l)}if(a.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:a.CFF.Private?a.CFF.Private.defaultWidthX:0,open:!1},d=a.CFF,f=a.CFF.Private;if(d.ROS){for(var m=0;d.FDSelect[m+2]<=r;)m+=2;f=d.FDArray[d.FDSelect[m+1]].Private}e.U._drawCFF(a.CFF.CharStrings[r],u,d,f,o)}else a.glyf&&e.U._drawGlyf(r,a,o);return o},e.U._drawGlyf=function(a,r,o){var l=r.glyf[a];l==null&&(l=r.glyf[a]=e.glyf._parseGlyf(r,a)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,o):e.U._compoGlyph(l,r,o))},e.U._simpleGlyph=function(a,r){for(var o=0;o<a.noc;o++){for(var l=o==0?0:a.endPts[o-1]+1,u=a.endPts[o],d=l;d<=u;d++){var f=d==l?u:d-1,m=d==u?l:d+1,x=1&a.flags[d],g=1&a.flags[f],v=1&a.flags[m],M=a.xs[d],_=a.ys[d];if(d==l)if(x){if(!g){e.U.P.moveTo(r,M,_);continue}e.U.P.moveTo(r,a.xs[f],a.ys[f])}else g?e.U.P.moveTo(r,a.xs[f],a.ys[f]):e.U.P.moveTo(r,(a.xs[f]+M)/2,(a.ys[f]+_)/2);x?g&&e.U.P.lineTo(r,M,_):v?e.U.P.qcurveTo(r,M,_,a.xs[m],a.ys[m]):e.U.P.qcurveTo(r,M,_,(M+a.xs[m])/2,(_+a.ys[m])/2)}e.U.P.closePath(r)}},e.U._compoGlyph=function(a,r,o){for(var l=0;l<a.parts.length;l++){var u={cmds:[],crds:[]},d=a.parts[l];e.U._drawGlyf(d.glyphIndex,r,u);for(var f=d.m,m=0;m<u.crds.length;m+=2){var x=u.crds[m],g=u.crds[m+1];o.crds.push(x*f.a+g*f.b+f.tx),o.crds.push(x*f.c+g*f.d+f.ty)}for(m=0;m<u.cmds.length;m++)o.cmds.push(u.cmds[m])}},e.U._getGlyphClass=function(a,r){var o=e._lctf.getInterval(r,a);return o==-1?0:r[o+2]},e.U._applySubs=function(a,r,o,l){for(var u=a.length-r-1,d=0;d<o.tabs.length;d++)if(o.tabs[d]!=null){var f,m=o.tabs[d];if(!m.coverage||(f=e._lctf.coverageIndex(m.coverage,a[r]))!=-1){if(o.ltype==1)a[r],m.fmt==1?a[r]=a[r]+m.delta:a[r]=m.newg[f];else if(o.ltype==4)for(var x=m.vals[f],g=0;g<x.length;g++){var v=x[g],M=v.chain.length;if(!(M>u)){for(var _=!0,S=0,j=0;j<M;j++){for(;a[r+S+(1+j)]==-1;)S++;v.chain[j]!=a[r+S+(1+j)]&&(_=!1)}if(_){for(a[r]=v.nglyph,j=0;j<M+S;j++)a[r+j+1]=-1;break}}}else if(o.ltype==5&&m.fmt==2)for(var A=e._lctf.getInterval(m.cDef,a[r]),C=m.cDef[A+2],N=m.scset[C],R=0;R<N.length;R++){var O=N[R],U=O.input;if(!(U.length>u)){for(_=!0,j=0;j<U.length;j++){var z=e._lctf.getInterval(m.cDef,a[r+1+j]);if(A==-1&&m.cDef[z+2]!=U[j]){_=!1;break}}if(_){var I=O.substLookupRecords;for(g=0;g<I.length;g+=2)I[g],I[g+1]}}}else if(o.ltype==6&&m.fmt==3){if(!e.U._glsCovered(a,m.backCvg,r-m.backCvg.length)||!e.U._glsCovered(a,m.inptCvg,r)||!e.U._glsCovered(a,m.ahedCvg,r+m.inptCvg.length))continue;var V=m.lookupRec;for(R=0;R<V.length;R+=2){A=V[R];var F=l[V[R+1]];e.U._applySubs(a,r+A,F,l)}}}}},e.U._glsCovered=function(a,r,o){for(var l=0;l<r.length;l++)if(e._lctf.coverageIndex(r[l],a[o+l])==-1)return!1;return!0},e.U.glyphsToPath=function(a,r,o){for(var l={cmds:[],crds:[]},u=0,d=0;d<r.length;d++){var f=r[d];if(f!=-1){for(var m=d<r.length-1&&r[d+1]!=-1?r[d+1]:0,x=e.U.glyphToPath(a,f),g=0;g<x.crds.length;g+=2)l.crds.push(x.crds[g]+u),l.crds.push(x.crds[g+1]);for(o&&l.cmds.push(o),g=0;g<x.cmds.length;g++)l.cmds.push(x.cmds[g]);o&&l.cmds.push("X"),u+=a.hmtx.aWidth[f],d<r.length-1&&(u+=e.U.getPairAdjustment(a,f,m))}}return l},e.U.P={},e.U.P.moveTo=function(a,r,o){a.cmds.push("M"),a.crds.push(r,o)},e.U.P.lineTo=function(a,r,o){a.cmds.push("L"),a.crds.push(r,o)},e.U.P.curveTo=function(a,r,o,l,u,d,f){a.cmds.push("C"),a.crds.push(r,o,l,u,d,f)},e.U.P.qcurveTo=function(a,r,o,l,u){a.cmds.push("Q"),a.crds.push(r,o,l,u)},e.U.P.closePath=function(a){a.cmds.push("Z")},e.U._drawCFF=function(a,r,o,l,u){for(var d=r.stack,f=r.nStems,m=r.haveWidth,x=r.width,g=r.open,v=0,M=r.x,_=r.y,S=0,j=0,A=0,C=0,N=0,R=0,O=0,U=0,z=0,I=0,V={val:0,size:0};v<a.length;){e.CFF.getCharString(a,v,V);var F=V.val;if(v+=V.size,F=="o1"||F=="o18")d.length%2!=0&&!m&&(x=d.shift()+l.nominalWidthX),f+=d.length>>1,d.length=0,m=!0;else if(F=="o3"||F=="o23")d.length%2!=0&&!m&&(x=d.shift()+l.nominalWidthX),f+=d.length>>1,d.length=0,m=!0;else if(F=="o4")d.length>1&&!m&&(x=d.shift()+l.nominalWidthX,m=!0),g&&e.U.P.closePath(u),_+=d.pop(),e.U.P.moveTo(u,M,_),g=!0;else if(F=="o5")for(;d.length>0;)M+=d.shift(),_+=d.shift(),e.U.P.lineTo(u,M,_);else if(F=="o6"||F=="o7")for(var q=d.length,W=F=="o6",ie=0;ie<q;ie++){var B=d.shift();W?M+=B:_+=B,W=!W,e.U.P.lineTo(u,M,_)}else if(F=="o8"||F=="o24"){q=d.length;for(var J=0;J+6<=q;)S=M+d.shift(),j=_+d.shift(),A=S+d.shift(),C=j+d.shift(),M=A+d.shift(),_=C+d.shift(),e.U.P.curveTo(u,S,j,A,C,M,_),J+=6;F=="o24"&&(M+=d.shift(),_+=d.shift(),e.U.P.lineTo(u,M,_))}else{if(F=="o11")break;if(F=="o1234"||F=="o1235"||F=="o1236"||F=="o1237")F=="o1234"&&(j=_,A=(S=M+d.shift())+d.shift(),I=C=j+d.shift(),R=C,U=_,M=(O=(N=(z=A+d.shift())+d.shift())+d.shift())+d.shift(),e.U.P.curveTo(u,S,j,A,C,z,I),e.U.P.curveTo(u,N,R,O,U,M,_)),F=="o1235"&&(S=M+d.shift(),j=_+d.shift(),A=S+d.shift(),C=j+d.shift(),z=A+d.shift(),I=C+d.shift(),N=z+d.shift(),R=I+d.shift(),O=N+d.shift(),U=R+d.shift(),M=O+d.shift(),_=U+d.shift(),d.shift(),e.U.P.curveTo(u,S,j,A,C,z,I),e.U.P.curveTo(u,N,R,O,U,M,_)),F=="o1236"&&(S=M+d.shift(),j=_+d.shift(),A=S+d.shift(),I=C=j+d.shift(),R=C,O=(N=(z=A+d.shift())+d.shift())+d.shift(),U=R+d.shift(),M=O+d.shift(),e.U.P.curveTo(u,S,j,A,C,z,I),e.U.P.curveTo(u,N,R,O,U,M,_)),F=="o1237"&&(S=M+d.shift(),j=_+d.shift(),A=S+d.shift(),C=j+d.shift(),z=A+d.shift(),I=C+d.shift(),N=z+d.shift(),R=I+d.shift(),O=N+d.shift(),U=R+d.shift(),Math.abs(O-M)>Math.abs(U-_)?M=O+d.shift():_=U+d.shift(),e.U.P.curveTo(u,S,j,A,C,z,I),e.U.P.curveTo(u,N,R,O,U,M,_));else if(F=="o14"){if(d.length>0&&!m&&(x=d.shift()+o.nominalWidthX,m=!0),d.length==4){var $=d.shift(),le=d.shift(),re=d.shift(),H=d.shift(),ee=e.CFF.glyphBySE(o,re),ue=e.CFF.glyphBySE(o,H);e.U._drawCFF(o.CharStrings[ee],r,o,l,u),r.x=$,r.y=le,e.U._drawCFF(o.CharStrings[ue],r,o,l,u)}g&&(e.U.P.closePath(u),g=!1)}else if(F=="o19"||F=="o20")d.length%2!=0&&!m&&(x=d.shift()+l.nominalWidthX),f+=d.length>>1,d.length=0,m=!0,v+=f+7>>3;else if(F=="o21")d.length>2&&!m&&(x=d.shift()+l.nominalWidthX,m=!0),_+=d.pop(),M+=d.pop(),g&&e.U.P.closePath(u),e.U.P.moveTo(u,M,_),g=!0;else if(F=="o22")d.length>1&&!m&&(x=d.shift()+l.nominalWidthX,m=!0),M+=d.pop(),g&&e.U.P.closePath(u),e.U.P.moveTo(u,M,_),g=!0;else if(F=="o25"){for(;d.length>6;)M+=d.shift(),_+=d.shift(),e.U.P.lineTo(u,M,_);S=M+d.shift(),j=_+d.shift(),A=S+d.shift(),C=j+d.shift(),M=A+d.shift(),_=C+d.shift(),e.U.P.curveTo(u,S,j,A,C,M,_)}else if(F=="o26")for(d.length%2&&(M+=d.shift());d.length>0;)S=M,j=_+d.shift(),M=A=S+d.shift(),_=(C=j+d.shift())+d.shift(),e.U.P.curveTo(u,S,j,A,C,M,_);else if(F=="o27")for(d.length%2&&(_+=d.shift());d.length>0;)j=_,A=(S=M+d.shift())+d.shift(),C=j+d.shift(),M=A+d.shift(),_=C,e.U.P.curveTo(u,S,j,A,C,M,_);else if(F=="o10"||F=="o29"){var me=F=="o10"?l:o;if(d.length==0)console.debug("error: empty stack");else{var be=d.pop(),fe=me.Subrs[be+me.Bias];r.x=M,r.y=_,r.nStems=f,r.haveWidth=m,r.width=x,r.open=g,e.U._drawCFF(fe,r,o,l,u),M=r.x,_=r.y,f=r.nStems,m=r.haveWidth,x=r.width,g=r.open}}else if(F=="o30"||F=="o31"){var ge=d.length,je=(J=0,F=="o31");for(J+=ge-(q=-3&ge);J<q;)je?(j=_,A=(S=M+d.shift())+d.shift(),_=(C=j+d.shift())+d.shift(),q-J==5?(M=A+d.shift(),J++):M=A,je=!1):(S=M,j=_+d.shift(),A=S+d.shift(),C=j+d.shift(),M=A+d.shift(),q-J==5?(_=C+d.shift(),J++):_=C,je=!0),e.U.P.curveTo(u,S,j,A,C,M,_),J+=4}else{if((F+"").charAt(0)=="o")throw console.debug("Unknown operation: "+F,a),F;d.push(F)}}}r.x=M,r.y=_,r.nStems=f,r.haveWidth=m,r.width=x,r.open=g};var t=e,n={Typr:t};return i.Typr=t,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function $W(){return(function(i){var e=Uint8Array,t=Uint16Array,n=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(F,q){for(var W=new t(31),ie=0;ie<31;++ie)W[ie]=q+=1<<F[ie-1];var B=new n(W[30]);for(ie=1;ie<30;++ie)for(var J=W[ie];J<W[ie+1];++J)B[J]=J-W[ie]<<5|ie;return[W,B]},u=l(a,2),d=u[0],f=u[1];d[28]=258,f[258]=28;for(var m=l(r,0)[0],x=new t(32768),g=0;g<32768;++g){var v=(43690&g)>>>1|(21845&g)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,x[g]=((65280&v)>>>8|(255&v)<<8)>>>1}var M=function(F,q,W){for(var ie=F.length,B=0,J=new t(q);B<ie;++B)++J[F[B]-1];var $,le=new t(q);for(B=0;B<q;++B)le[B]=le[B-1]+J[B-1]<<1;{$=new t(1<<q);var re=15-q;for(B=0;B<ie;++B)if(F[B])for(var H=B<<4|F[B],ee=q-F[B],ue=le[F[B]-1]++<<ee,me=ue|(1<<ee)-1;ue<=me;++ue)$[x[ue]>>>re]=H}return $},_=new e(288);for(g=0;g<144;++g)_[g]=8;for(g=144;g<256;++g)_[g]=9;for(g=256;g<280;++g)_[g]=7;for(g=280;g<288;++g)_[g]=8;var S=new e(32);for(g=0;g<32;++g)S[g]=5;var j=M(_,9),A=M(S,5),C=function(F){for(var q=F[0],W=1;W<F.length;++W)F[W]>q&&(q=F[W]);return q},N=function(F,q,W){var ie=q/8|0;return(F[ie]|F[ie+1]<<8)>>(7&q)&W},R=function(F,q){var W=q/8|0;return(F[W]|F[W+1]<<8|F[W+2]<<16)>>(7&q)},O=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(F,q,W){var ie=new Error(q||O[F]);if(ie.code=F,Error.captureStackTrace&&Error.captureStackTrace(ie,U),!W)throw ie;return ie},z=function(F,q,W){var ie=F.length;if(!ie||W&&!W.l&&ie<5)return q||new e(0);var B=!q||W,J=!W||W.i;W||(W={}),q||(q=new e(3*ie));var $,le=function(ft){var he=q.length;if(ft>he){var Ce=new e(Math.max(2*he,ft));Ce.set(q),q=Ce}},re=W.f||0,H=W.p||0,ee=W.b||0,ue=W.l,me=W.d,be=W.m,fe=W.n,ge=8*ie;do{if(!ue){W.f=re=N(F,H,1);var je=N(F,H+1,3);if(H+=3,!je){var Qe=F[($e=(($=H)/8|0)+(7&$&&1)+4)-4]|F[$e-3]<<8,st=$e+Qe;if(st>ie){J&&U(0);break}B&&le(ee+Qe),q.set(F.subarray($e,st),ee),W.b=ee+=Qe,W.p=H=8*st;continue}if(je==1)ue=j,me=A,be=9,fe=5;else if(je==2){var Ve=N(F,H,31)+257,nt=N(F,H+10,15)+4,St=Ve+N(F,H+5,31)+1;H+=14;for(var ze=new e(St),ae=new e(19),Fe=0;Fe<nt;++Fe)ae[o[Fe]]=N(F,H+3*Fe,7);H+=3*nt;var We=C(ae),Pe=(1<<We)-1,Ge=M(ae,We);for(Fe=0;Fe<St;){var $e,Ee=Ge[N(F,H,Pe)];if(H+=15&Ee,($e=Ee>>>4)<16)ze[Fe++]=$e;else{var ct=0,te=0;for($e==16?(te=3+N(F,H,3),H+=2,ct=ze[Fe-1]):$e==17?(te=3+N(F,H,7),H+=3):$e==18&&(te=11+N(F,H,127),H+=7);te--;)ze[Fe++]=ct}}var Y=ze.subarray(0,Ve),ve=ze.subarray(Ve);be=C(Y),fe=C(ve),ue=M(Y,be),me=M(ve,fe)}else U(1);if(H>ge){J&&U(0);break}}B&&le(ee+131072);for(var Be=(1<<be)-1,Re=(1<<fe)-1,Ae=H;;Ae=H){var yt=(ct=ue[R(F,H)&Be])>>>4;if((H+=15&ct)>ge){J&&U(0);break}if(ct||U(2),yt<256)q[ee++]=yt;else{if(yt==256){Ae=H,ue=null;break}var gt=yt-254;if(yt>264){var Dt=a[Fe=yt-257];gt=N(F,H,(1<<Dt)-1)+d[Fe],H+=Dt}var Nt=me[R(F,H)&Re],ke=Nt>>>4;if(Nt||U(3),H+=15&Nt,ve=m[ke],ke>3&&(Dt=r[ke],ve+=R(F,H)&(1<<Dt)-1,H+=Dt),H>ge){J&&U(0);break}B&&le(ee+131072);for(var Ie=ee+gt;ee<Ie;ee+=4)q[ee]=q[ee-ve],q[ee+1]=q[ee+1-ve],q[ee+2]=q[ee+2-ve],q[ee+3]=q[ee+3-ve];ee=Ie}}W.l=ue,W.p=Ae,W.b=ee,ue&&(re=1,W.m=be,W.d=me,W.n=fe)}while(!re);return ee==q.length?q:(function(ft,he,Ce){(Ce==null||Ce>ft.length)&&(Ce=ft.length);var ut=new(ft instanceof t?t:ft instanceof n?n:e)(Ce-he);return ut.set(ft.subarray(he,Ce)),ut})(q,0,ee)},I=new e(0),V=typeof TextDecoder<"u"&&new TextDecoder;try{V.decode(I,{stream:!0})}catch{}return i.convert_streams=function(F){var q=new DataView(F),W=0;function ie(){var Ve=q.getUint16(W);return W+=2,Ve}function B(){var Ve=q.getUint32(W);return W+=4,Ve}function J(Ve){Qe.setUint16(st,Ve),st+=2}function $(Ve){Qe.setUint32(st,Ve),st+=4}for(var le={signature:B(),flavor:B(),length:B(),numTables:ie(),reserved:ie(),totalSfntSize:B(),majorVersion:ie(),minorVersion:ie(),metaOffset:B(),metaLength:B(),metaOrigLength:B(),privOffset:B(),privLength:B()},re=0;Math.pow(2,re)<=le.numTables;)re++;re--;for(var H=16*Math.pow(2,re),ee=16*le.numTables-H,ue=12,me=[],be=0;be<le.numTables;be++)me.push({tag:B(),offset:B(),compLength:B(),origLength:B(),origChecksum:B()}),ue+=16;var fe,ge=new Uint8Array(12+16*me.length+me.reduce((function(Ve,nt){return Ve+nt.origLength+4}),0)),je=ge.buffer,Qe=new DataView(je),st=0;return $(le.flavor),J(le.numTables),J(H),J(re),J(ee),me.forEach((function(Ve){$(Ve.tag),$(Ve.origChecksum),$(ue),$(Ve.origLength),Ve.outOffset=ue,(ue+=Ve.origLength)%4!=0&&(ue+=4-ue%4)})),me.forEach((function(Ve){var nt,St=F.slice(Ve.offset,Ve.offset+Ve.compLength);if(Ve.compLength!=Ve.origLength){var ze=new Uint8Array(Ve.origLength);nt=new Uint8Array(St,2),z(nt,ze)}else ze=new Uint8Array(St);ge.set(ze,Ve.outOffset);var ae=0;(ue=Ve.outOffset+Ve.origLength)%4!=0&&(ae=4-ue%4),ge.set(new Uint8Array(ae).buffer,Ve.outOffset+Ve.origLength),fe=ue+ae})),je.slice(0,fe)},Object.defineProperty(i,"__esModule",{value:!0}),i})({}).convert_streams}function eY(i,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=1,r=2,o=4,l=8,u=16,d=32;let f;function m(O){if(!f){const U={R:r,L:a,D:o,C:u,U:d,T:l};f=new Map;for(let z in n){let I=0;n[z].split(",").forEach(V=>{let[F,q]=V.split("+");F=parseInt(F,36),q=q?parseInt(q,36):0,f.set(I+=F,U[z]);for(let W=q;W--;)f.set(++I,U[z])})}}return f.get(O)||d}const x=1,g=2,v=3,M=4,_=[null,"isol","init","fina","medi"];function S(O){const U=new Uint8Array(O.length);let z=d,I=x,V=-1;for(let F=0;F<O.length;F++){const q=O.codePointAt(F);let W=m(q)|0,ie=x;W&l||(z&(a|o|u)?W&(r|o|u)?(ie=v,(I===x||I===v)&&U[V]++):W&(a|d)&&(I===g||I===M)&&U[V]--:z&(r|d)&&(I===g||I===M)&&U[V]--,I=U[F]=ie,z=W,V=F,q>65535&&F++)}return U}function j(O,U){const z=[];for(let V=0;V<U.length;V++){const F=U.codePointAt(V);F>65535&&V++,z.push(i.U.codeToGlyph(O,F))}const I=O.GSUB;if(I){const{lookupList:V,featureList:F}=I;let q;const W=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ie=[];F.forEach(B=>{if(W.test(B.tag))for(let J=0;J<B.tab.length;J++){if(ie[B.tab[J]])continue;ie[B.tab[J]]=!0;const $=V[B.tab[J]],le=/^(isol|init|fina|medi)$/.test(B.tag);le&&!q&&(q=S(U));for(let re=0;re<z.length;re++)(!q||!le||_[q[re]]===B.tag)&&i.U._applySubs(z,re,$,V)}})}return z}function A(O,U){const z=new Int16Array(U.length*3);let I=0;for(;I<U.length;I++){const W=U[I];if(W===-1)continue;z[I*3+2]=O.hmtx.aWidth[W];const ie=O.GPOS;if(ie){const B=ie.lookupList;for(let J=0;J<B.length;J++){const $=B[J];for(let le=0;le<$.tabs.length;le++){const re=$.tabs[le];if($.ltype===1){if(i._lctf.coverageIndex(re.coverage,W)!==-1&&re.pos){q(re.pos,I);break}}else if($.ltype===2){let H=null,ee=V();if(ee!==-1){const ue=i._lctf.coverageIndex(re.coverage,U[ee]);if(ue!==-1){if(re.fmt===1){const me=re.pairsets[ue];for(let be=0;be<me.length;be++)me[be].gid2===W&&(H=me[be])}else if(re.fmt===2){const me=i.U._getGlyphClass(U[ee],re.classDef1),be=i.U._getGlyphClass(W,re.classDef2);H=re.matrix[me][be]}if(H){H.val1&&q(H.val1,ee),H.val2&&q(H.val2,I);break}}}}else if($.ltype===4){const H=i._lctf.coverageIndex(re.markCoverage,W);if(H!==-1){const ee=V(F),ue=ee===-1?-1:i._lctf.coverageIndex(re.baseCoverage,U[ee]);if(ue!==-1){const me=re.markArray[H],be=re.baseArray[ue][me.markClass];z[I*3]=be.x-me.x+z[ee*3]-z[ee*3+2],z[I*3+1]=be.y-me.y+z[ee*3+1];break}}}else if($.ltype===6){const H=i._lctf.coverageIndex(re.mark1Coverage,W);if(H!==-1){const ee=V();if(ee!==-1){const ue=U[ee];if(C(O,ue)===3){const me=i._lctf.coverageIndex(re.mark2Coverage,ue);if(me!==-1){const be=re.mark1Array[H],fe=re.mark2Array[me][be.markClass];z[I*3]=fe.x-be.x+z[ee*3]-z[ee*3+2],z[I*3+1]=fe.y-be.y+z[ee*3+1];break}}}}}}}}else if(O.kern&&!O.cff){const B=V();if(B!==-1){const J=O.kern.glyph1.indexOf(U[B]);if(J!==-1){const $=O.kern.rval[J].glyph2.indexOf(W);$!==-1&&(z[B*3+2]+=O.kern.rval[J].vals[$])}}}}return z;function V(W){for(let ie=I-1;ie>=0;ie--)if(U[ie]!==-1&&(!W||W(U[ie])))return ie;return-1}function F(W){return C(O,W)===1}function q(W,ie){for(let B=0;B<3;B++)z[ie*3+B]+=W[B]||0}}function C(O,U){const z=O.GDEF&&O.GDEF.glyphClassDef;return z?i.U._getGlyphClass(U,z):0}function N(...O){for(let U=0;U<O.length;U++)if(typeof O[U]=="number")return O[U]}function R(O){const U=Object.create(null),z=O["OS/2"],I=O.hhea,V=O.head.unitsPerEm,F=N(z&&z.sTypoAscender,I&&I.ascender,V),q={unitsPerEm:V,ascender:F,descender:N(z&&z.sTypoDescender,I&&I.descender,0),capHeight:N(z&&z.sCapHeight,F),xHeight:N(z&&z.sxHeight,F),lineGap:N(z&&z.sTypoLineGap,I&&I.lineGap),supportsCodePoint(W){return i.U.codeToGlyph(O,W)>0},forEachGlyph(W,ie,B,J){let $=0;const le=1/q.unitsPerEm*ie,re=j(O,W);let H=0;const ee=A(O,re);return re.forEach((ue,me)=>{if(ue!==-1){let be=U[ue];if(!be){const{cmds:fe,crds:ge}=i.U.glyphToPath(O,ue);let je="",Qe=0;for(let ze=0,ae=fe.length;ze<ae;ze++){const Fe=t[fe[ze]];je+=fe[ze];for(let We=1;We<=Fe;We++)je+=(We>1?",":"")+ge[Qe++]}let st,Ve,nt,St;if(ge.length){st=Ve=1/0,nt=St=-1/0;for(let ze=0,ae=ge.length;ze<ae;ze+=2){let Fe=ge[ze],We=ge[ze+1];Fe<st&&(st=Fe),We<Ve&&(Ve=We),Fe>nt&&(nt=Fe),We>St&&(St=We)}}else st=nt=Ve=St=0;be=U[ue]={index:ue,advanceWidth:O.hmtx.aWidth[ue],xMin:st,yMin:Ve,xMax:nt,yMax:St,path:je}}J.call(null,be,$+ee[me*3]*le,ee[me*3+1]*le,H),$+=ee[me*3+2]*le,B&&($+=B*ie)}H+=W.codePointAt(H)>65535?2:1}),$}};return q}return function(U){const z=new Uint8Array(U,0,4),I=i._bin.readASCII(z,0,4);if(I==="wOFF")U=e(U);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return R(i.parse(U)[0])}}const tY=tm({name:"Typr Font Parser",dependencies:[QW,$W,eY],init(i,e,t){const n=i(),a=e();return t(n,a)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function nY(){return(function(i){var e=function(){this.buckets=new Map};e.prototype.add=function(A){var C=A>>5;this.buckets.set(C,(this.buckets.get(C)||0)|1<<(31&A))},e.prototype.has=function(A){var C=this.buckets.get(A>>5);return C!==void 0&&(C&1<<(31&A))!=0},e.prototype.serialize=function(){var A=[];return this.buckets.forEach((function(C,N){A.push((+N).toString(36)+":"+C.toString(36))})),A.join(",")},e.prototype.deserialize=function(A){var C=this;this.buckets.clear(),A.split(",").forEach((function(N){var R=N.split(":");C.buckets.set(parseInt(R[0],36),parseInt(R[1],36))}))};var t=Math.pow(2,8),n=t-1,a=~n;function r(A){var C=(function(R){return R&a})(A).toString(16),N=(function(R){return(R&a)+t-1})(A).toString(16);return"codepoint-index/plane"+(A>>16)+"/"+C+"-"+N+".json"}function o(A,C){var N=A&n,R=C.codePointAt(N/6|0);return((R=(R||48)-48)&1<<N%6)!=0}function l(A,C){var N;(N=A,N.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(R){return R.split("-").map((function(O){return parseInt(O.trim(),16)}))}))).forEach((function(R){var O=R[0],U=R[1];U===void 0&&(U=O),C(O,U)}))}function u(A,C){l(A,(function(N,R){for(var O=N;O<=R;O++)C(O)}))}var d={},f={},m=new WeakMap,x="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function g(A){var C=m.get(A);return C||(C=new e,u(A.ranges,(function(N){return C.add(N)})),m.set(A,C)),C}var v,M=new Map;function _(A,C,N){return A[C]?C:A[N]?N:(function(R){for(var O in R)return O})(A)}function S(A,C){var N=C;if(!A.includes(N)){N=1/0;for(var R=0;R<A.length;R++)Math.abs(A[R]-C)<Math.abs(N-C)&&(N=A[R])}return N}function j(A){return v||(v=new Set,u("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(C){v.add(C)}))),v.has(A)}return i.CodePointSet=e,i.clearCache=function(){d={},f={}},i.getFontsForString=function(A,C){C===void 0&&(C={});var N,R=C.lang;R===void 0&&(R=new RegExp("\\p{Script=Hangul}","u").test(N=A)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(N)?"ja":"en");var O=C.category;O===void 0&&(O="sans-serif");var U=C.style;U===void 0&&(U="normal");var z=C.weight;z===void 0&&(z=400);var I=(C.dataUrl||x).replace(/\/$/g,""),V=new Map,F=new Uint8Array(A.length),q={},W={},ie=new Array(A.length),B=new Map,J=!1;function $(H){var ee=M.get(H);return ee||(ee=fetch(I+"/"+H).then((function(ue){if(!ue.ok)throw new Error(ue.statusText);return ue.json().then((function(me){if(!Array.isArray(me)||me[0]!==1)throw new Error("Incorrect schema version; need 1, got "+me[0]);return me[1]}))})).catch((function(ue){if(I!==x)return J||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+ue.message),J=!0),I=x,M.delete(H),$(H);throw ue})),M.set(H,ee)),ee}for(var le=function(H){var ee=A.codePointAt(H),ue=r(ee);ie[H]=ue,d[ue]||B.has(ue)||B.set(ue,$(ue).then((function(me){d[ue]=me}))),ee>65535&&(H++,re=H)},re=0;re<A.length;re++)le(re);return Promise.all(B.values()).then((function(){B.clear();for(var H=function(ue){var me=A.codePointAt(ue),be=null,fe=d[ie[ue]],ge=void 0;for(var je in fe){var Qe=W[je];if(Qe===void 0&&(Qe=W[je]=new RegExp(je).test(R||"en")),Qe){for(var st in ge=je,fe[je])if(o(me,fe[je][st])){be=st;break}break}}if(!be){e:for(var Ve in fe)if(Ve!==ge){for(var nt in fe[Ve])if(o(me,fe[Ve][nt])){be=nt;break e}}}be||(console.debug("No font coverage for U+"+me.toString(16)),be="latin"),ie[ue]=be,f[be]||B.has(be)||B.set(be,$("font-meta/"+be+".json").then((function(St){f[be]=St}))),me>65535&&(ue++,ee=ue)},ee=0;ee<A.length;ee++)H(ee);return Promise.all(B.values())})).then((function(){for(var H,ee=null,ue=0;ue<A.length;ue++){var me=A.codePointAt(ue);if(ee&&(j(me)||g(ee).has(me)))F[ue]=F[ue-1];else{ee=f[ie[ue]];var be=q[ee.id];if(!be){var fe=ee.typeforms,ge=_(fe,O,"sans-serif"),je=_(fe[ge],U,"normal"),Qe=S((H=fe[ge])===null||H===void 0?void 0:H[je],z);be=q[ee.id]=I+"/font-files/"+ee.id+"/"+ge+"."+je+"."+Qe+".woff"}var st=V.get(be);st==null&&(st=V.size,V.set(be,st)),F[ue]=st}me>65535&&(ue++,F[ue]=F[ue-1])}return{fontUrls:Array.from(V.keys()),chars:F}}))},Object.defineProperty(i,"__esModule",{value:!0}),i})({})}function sY(i,e){const t=Object.create(null),n=Object.create(null);function a(o,l){const u=d=>{console.error(`Failure loading font ${o}`,d)};try{const d=new XMLHttpRequest;d.open("get",o,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status>=400)u(new Error(d.statusText));else if(d.status>0)try{const f=i(d.response);f.src=o,l(f)}catch(f){u(f)}},d.onerror=u,d.send()}catch(d){u(d)}}function r(o,l){let u=t[o];u?l(u):n[o]?n[o].push(l):(n[o]=[l],a(o,d=>{d.src=o,t[o]=d,n[o].forEach(f=>f(d)),delete n[o]}))}return function(o,l,{lang:u,fonts:d=[],style:f="normal",weight:m="normal",unicodeFontsURL:x}={}){const g=new Uint8Array(o.length),v=[];o.length||j();const M=new Map,_=[];if(f!=="italic"&&(f="normal"),typeof m!="number"&&(m=m==="bold"?700:400),d&&!Array.isArray(d)&&(d=[d]),d=d.slice().filter(C=>!C.lang||C.lang.test(u)).reverse(),d.length){let O=0;(function U(z=0){for(let I=z,V=o.length;I<V;I++){const F=o.codePointAt(I);if(O===1&&v[g[I-1]].supportsCodePoint(F)||I>0&&/\s/.test(o[I]))g[I]=g[I-1],O===2&&(_[_.length-1][1]=I);else for(let q=g[I],W=d.length;q<=W;q++)if(q===W){const ie=O===2?_[_.length-1]:_[_.length]=[I,I];ie[1]=I,O=2}else{g[I]=q;const{src:ie,unicodeRange:B}=d[q];if(!B||A(F,B)){const J=t[ie];if(!J){r(ie,()=>{U(I)});return}if(J.supportsCodePoint(F)){let $=M.get(J);typeof $!="number"&&($=v.length,v.push(J),M.set(J,$)),g[I]=$,O=1;break}}}F>65535&&I+1<V&&(g[I+1]=g[I],I++,O===2&&(_[_.length-1][1]=I))}S()})()}else _.push([0,o.length-1]),S();function S(){if(_.length){const C=_.map(N=>o.substring(N[0],N[1]+1)).join(`
`);e.getFontsForString(C,{lang:u||void 0,style:f,weight:m,dataUrl:x}).then(({fontUrls:N,chars:R})=>{const O=v.length;let U=0;_.forEach(I=>{for(let V=0,F=I[1]-I[0];V<=F;V++)g[I[0]+V]=R[U++]+O;U++});let z=0;N.forEach((I,V)=>{r(I,F=>{v[V+O]=F,++z===N.length&&j()})})})}else j()}function j(){l({chars:g,fonts:v})}function A(C,N){for(let R=0;R<N.length;R++){const[O,U=O]=N[R];if(O<=C&&C<=U)return!0}return!1}}}const iY=tm({name:"FontResolver",dependencies:[sY,tY,nY],init(i,e,t){return i(e,t())}});function aY(i,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",r=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:v,lang:M,fonts:_,style:S,weight:j,preResolvedFonts:A,unicodeFontsURL:C},N){const R=({chars:O,fonts:U})=>{let z,I;const V=[];for(let F=0;F<O.length;F++)O[F]!==I?(I=O[F],V.push(z={start:F,end:F,fontObj:U[O[F]]})):z.end=F;N(V)};A?R(A):i(v,R,{lang:M,fonts:_,style:S,weight:j,unicodeFontsURL:C})}function l({text:v="",font:M,lang:_,sdfGlyphSize:S=64,fontSize:j=400,fontWeight:A=1,fontStyle:C="normal",letterSpacing:N=0,lineHeight:R="normal",maxWidth:O=1/0,direction:U,textAlign:z="left",textIndent:I=0,whiteSpace:V="normal",overflowWrap:F="normal",anchorX:q=0,anchorY:W=0,metricsOnly:ie=!1,unicodeFontsURL:B,preResolvedFonts:J=null,includeCaretPositions:$=!1,chunkedBoundsSize:le=8192,colorRanges:re=null},H){const ee=m(),ue={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),j=+j,N=+N,O=+O,R=R||"normal",I=+I,o({text:v,lang:_,style:C,weight:A,fonts:typeof M=="string"?[{src:M}]:M,unicodeFontsURL:B,preResolvedFonts:J},me=>{ue.fontLoad=m()-ee;const be=isFinite(O);let fe=null,ge=null,je=null,Qe=null,st=null,Ve=null,nt=null,St=null,ze=0,ae=0,Fe=V!=="nowrap";const We=new Map,Pe=m();let Ge=I,$e=0,Ee=new x;const ct=[Ee];me.forEach(Re=>{const{fontObj:Ae}=Re,{ascender:yt,descender:gt,unitsPerEm:Dt,lineGap:Nt,capHeight:ke,xHeight:Ie}=Ae;let ft=We.get(Ae);if(!ft){const we=j/Dt,lt=R==="normal"?(yt-gt+Nt)*we:R*j,jt=(lt-(yt-gt)*we)/2,ot=Math.min(lt,(yt-gt)*we),qe=(yt+gt)/2*we+ot/2;ft={index:We.size,src:Ae.src,fontObj:Ae,fontSizeMult:we,unitsPerEm:Dt,ascender:yt*we,descender:gt*we,capHeight:ke*we,xHeight:Ie*we,lineHeight:lt,baseline:-jt-yt*we,caretTop:qe,caretBottom:qe-ot},We.set(Ae,ft)}const{fontSizeMult:he}=ft,Ce=v.slice(Re.start,Re.end+1);let ut,pe;Ae.forEachGlyph(Ce,j,N,(we,lt,jt,ot)=>{lt+=$e,ot+=Re.start,ut=lt,pe=we;const qe=v.charAt(ot),Tt=we.advanceWidth*he,zt=Ee.count;let It;if("isEmpty"in we||(we.isWhitespace=!!qe&&new RegExp(a).test(qe),we.canBreakAfter=!!qe&&r.test(qe),we.isEmpty=we.xMin===we.xMax||we.yMin===we.yMax||n.test(qe)),!we.isWhitespace&&!we.isEmpty&&ae++,Fe&&be&&!we.isWhitespace&&lt+Tt+Ge>O&&zt){if(Ee.glyphAt(zt-1).glyphObj.canBreakAfter)It=new x,Ge=-lt;else for(let An=zt;An--;)if(An===0&&F==="break-word"){It=new x,Ge=-lt;break}else if(Ee.glyphAt(An).glyphObj.canBreakAfter){It=Ee.splitAt(An+1);const In=It.glyphAt(0).x;Ge-=In;for(let Ss=It.count;Ss--;)It.glyphAt(Ss).x-=In;break}It&&(Ee.isSoftWrapped=!0,Ee=It,ct.push(Ee),ze=O)}let Zt=Ee.glyphAt(Ee.count);Zt.glyphObj=we,Zt.x=lt+Ge,Zt.y=jt,Zt.width=Tt,Zt.charIndex=ot,Zt.fontData=ft,qe===`
`&&(Ee=new x,ct.push(Ee),Ge=-(lt+Tt+N*j)+I)}),$e=ut+pe.advanceWidth*he+N*j});let te=0;ct.forEach(Re=>{let Ae=!0;for(let yt=Re.count;yt--;){const gt=Re.glyphAt(yt);Ae&&!gt.glyphObj.isWhitespace&&(Re.width=gt.x+gt.width,Re.width>ze&&(ze=Re.width),Ae=!1);let{lineHeight:Dt,capHeight:Nt,xHeight:ke,baseline:Ie}=gt.fontData;Dt>Re.lineHeight&&(Re.lineHeight=Dt);const ft=Ie-Re.baseline;ft<0&&(Re.baseline+=ft,Re.cap+=ft,Re.ex+=ft),Re.cap=Math.max(Re.cap,Re.baseline+Nt),Re.ex=Math.max(Re.ex,Re.baseline+ke)}Re.baseline-=te,Re.cap-=te,Re.ex-=te,te+=Re.lineHeight});let Y=0,ve=0;if(q&&(typeof q=="number"?Y=-q:typeof q=="string"&&(Y=-ze*(q==="left"?0:q==="center"?.5:q==="right"?1:d(q)))),W&&(typeof W=="number"?ve=-W:typeof W=="string"&&(ve=W==="top"?0:W==="top-baseline"?-ct[0].baseline:W==="top-cap"?-ct[0].cap:W==="top-ex"?-ct[0].ex:W==="middle"?te/2:W==="bottom"?te:W==="bottom-baseline"?-ct[ct.length-1].baseline:d(W)*te)),!ie){const Re=e.getEmbeddingLevels(v,U);fe=new Uint16Array(ae),ge=new Uint8Array(ae),je=new Float32Array(ae*2),Qe={},nt=[1/0,1/0,-1/0,-1/0],St=[],$&&(Ve=new Float32Array(v.length*4)),re&&(st=new Uint8Array(ae*3));let Ae=0,yt=-1,gt=-1,Dt,Nt;if(ct.forEach((ke,Ie)=>{let{count:ft,width:he}=ke;if(ft>0){let Ce=0;for(let ot=ft;ot--&&ke.glyphAt(ot).glyphObj.isWhitespace;)Ce++;let ut=0,pe=0;if(z==="center")ut=(ze-he)/2;else if(z==="right")ut=ze-he;else if(z==="justify"&&ke.isSoftWrapped){let ot=0;for(let qe=ft-Ce;qe--;)ke.glyphAt(qe).glyphObj.isWhitespace&&ot++;pe=(ze-he)/ot}if(pe||ut){let ot=0;for(let qe=0;qe<ft;qe++){let Tt=ke.glyphAt(qe);const zt=Tt.glyphObj;Tt.x+=ut+ot,pe!==0&&zt.isWhitespace&&qe<ft-Ce&&(ot+=pe,Tt.width+=pe)}}const we=e.getReorderSegments(v,Re,ke.glyphAt(0).charIndex,ke.glyphAt(ke.count-1).charIndex);for(let ot=0;ot<we.length;ot++){const[qe,Tt]=we[ot];let zt=1/0,It=-1/0;for(let Zt=0;Zt<ft;Zt++)if(ke.glyphAt(Zt).charIndex>=qe){let An=Zt,In=Zt;for(;In<ft;In++){let Ss=ke.glyphAt(In);if(Ss.charIndex>Tt)break;In<ft-Ce&&(zt=Math.min(zt,Ss.x),It=Math.max(It,Ss.x+Ss.width))}for(let Ss=An;Ss<In;Ss++){const ni=ke.glyphAt(Ss);ni.x=It-(ni.x+ni.width-zt)}break}}let lt;const jt=ot=>lt=ot;for(let ot=0;ot<ft;ot++){const qe=ke.glyphAt(ot);lt=qe.glyphObj;const Tt=lt.index,zt=Re.levels[qe.charIndex]&1;if(zt){const It=e.getMirroredCharacter(v[qe.charIndex]);It&&qe.fontData.fontObj.forEachGlyph(It,0,0,jt)}if($){const{charIndex:It,fontData:Zt}=qe,An=qe.x+Y,In=qe.x+qe.width+Y;Ve[It*4]=zt?In:An,Ve[It*4+1]=zt?An:In,Ve[It*4+2]=ke.baseline+Zt.caretBottom+ve,Ve[It*4+3]=ke.baseline+Zt.caretTop+ve;const Ss=It-yt;Ss>1&&f(Ve,yt,Ss),yt=It}if(re){const{charIndex:It}=qe;for(;It>gt;)gt++,re.hasOwnProperty(gt)&&(Nt=re[gt])}if(!lt.isWhitespace&&!lt.isEmpty){const It=Ae++,{fontSizeMult:Zt,src:An,index:In}=qe.fontData,Ss=Qe[An]||(Qe[An]={});Ss[Tt]||(Ss[Tt]={path:lt.path,pathBounds:[lt.xMin,lt.yMin,lt.xMax,lt.yMax]});const ni=qe.x+Y,si=qe.y+ke.baseline+ve;je[It*2]=ni,je[It*2+1]=si;const cs=ni+lt.xMin*Zt,Fs=si+lt.yMin*Zt,Ts=ni+lt.xMax*Zt,sn=si+lt.yMax*Zt;cs<nt[0]&&(nt[0]=cs),Fs<nt[1]&&(nt[1]=Fs),Ts>nt[2]&&(nt[2]=Ts),sn>nt[3]&&(nt[3]=sn),It%le===0&&(Dt={start:It,end:It,rect:[1/0,1/0,-1/0,-1/0]},St.push(Dt)),Dt.end++;const Hn=Dt.rect;if(cs<Hn[0]&&(Hn[0]=cs),Fs<Hn[1]&&(Hn[1]=Fs),Ts>Hn[2]&&(Hn[2]=Ts),sn>Hn[3]&&(Hn[3]=sn),fe[It]=Tt,ge[It]=In,re){const fn=It*3;st[fn]=Nt>>16&255,st[fn+1]=Nt>>8&255,st[fn+2]=Nt&255}}}}}),Ve){const ke=v.length-yt;ke>1&&f(Ve,yt,ke)}}const Be=[];We.forEach(({index:Re,src:Ae,unitsPerEm:yt,ascender:gt,descender:Dt,lineHeight:Nt,capHeight:ke,xHeight:Ie})=>{Be[Re]={src:Ae,unitsPerEm:yt,ascender:gt,descender:Dt,lineHeight:Nt,capHeight:ke,xHeight:Ie}}),ue.typesetting=m()-Pe,H({glyphIds:fe,glyphFontIndices:ge,glyphPositions:je,glyphData:Qe,fontData:Be,caretPositions:Ve,glyphColors:st,chunkedBounds:St,fontSize:j,topBaseline:ve+ct[0].baseline,blockBounds:[Y,ve-te,Y+ze,ve],visibleBounds:nt,timings:ue})})}function u(v,M){l({...v,metricsOnly:!0},_=>{const[S,j,A,C]=_.blockBounds;M({width:A-S,height:C-j})})}function d(v){let M=v.match(/^([\d.]+)%$/),_=M?parseFloat(M[1]):NaN;return isNaN(_)?0:_/100}function f(v,M,_){const S=v[M*4],j=v[M*4+1],A=v[M*4+2],C=v[M*4+3],N=(j-S)/_;for(let R=0;R<_;R++){const O=(M+R)*4;v[O]=S+N*R,v[O+1]=S+N*(R+1),v[O+2]=A,v[O+3]=C}}function m(){return(self.performance||Date).now()}function x(){this.data=[]}const g=["glyphObj","x","y","width","charIndex","fontData"];return x.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(v){let M=x.flyweight;return M.data=this.data,M.index=v,M},splitAt(v){let M=new x;return M.data=this.data.splice(v*g.length),M}},x.flyweight=g.reduce((v,M,_,S)=>(Object.defineProperty(v,M,{get(){return this.data[this.index*g.length+_]},set(j){this.data[this.index*g.length+_]=j}}),v),{data:null,index:0}),{typeset:l,measure:u}}const Uf=()=>(self.performance||Date).now(),Ob=DR();let MT;function rY(i,e,t,n,a,r,o,l,u,d,f=!0){return f?lY(i,e,t,n,a,r,o,l,u,d).then(null,m=>(MT||(console.warn("WebGL SDF generation failed, falling back to JS",m),MT=!0),_T(i,e,t,n,a,r,o,l,u,d))):_T(i,e,t,n,a,r,o,l,u,d)}const kv=[],oY=5;let r_=0;function UR(){const i=Uf();for(;kv.length&&Uf()-i<oY;)kv.shift()();r_=kv.length?setTimeout(UR,0):0}const lY=(...i)=>new Promise((e,t)=>{kv.push(()=>{const n=Uf();try{Ob.webgl.generateIntoCanvas(...i),e({timing:Uf()-n})}catch(a){t(a)}}),r_||(r_=setTimeout(UR,0))}),cY=4,uY=2e3,ST={};let dY=0;function _T(i,e,t,n,a,r,o,l,u,d){const f="TroikaTextSDFGenerator_JS_"+dY++%cY;let m=ST[f];return m||(m=ST[f]={workerModule:tm({name:f,workerId:f,dependencies:[DR,Uf],init(x,g){const v=x().javascript.generate;return function(...M){const _=g();return{textureData:v(...M),timing:g()-_}}},getTransferables(x){return[x.textureData.buffer]}}),requests:0,idleTimer:null}),m.requests++,clearTimeout(m.idleTimer),m.workerModule(i,e,t,n,a,r).then(({textureData:x,timing:g})=>{const v=Uf(),M=new Uint8Array(x.length*4);for(let _=0;_<x.length;_++)M[_*4+d]=x[_];return Ob.webglUtils.renderImageData(o,M,l,u,i,e,1<<3-d),g+=Uf()-v,--m.requests===0&&(m.idleTimer=setTimeout(()=>{FW(f)},uY)),{timing:g}})}function fY(i){i._warm||(Ob.webgl.isSupported(i),i._warm=!0)}const hY=Ob.webglUtils.resizeWebGLCanvasWithoutClearing,Yp={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},mY=new Lt;function f0(){return(self.performance||Date).now()}const wT=Object.create(null);function PR(i,e){i=gY({},i);const t=f0(),n=[];if(i.font&&n.push({label:"user",src:vY(i.font)}),i.font=n,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Yp.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Yp.unicodeFontsURL,i.colorRanges!=null){let x={};for(let g in i.colorRanges)if(i.colorRanges.hasOwnProperty(g)){let v=i.colorRanges[g];typeof v!="number"&&(v=mY.set(v).getHex()),x[g]=v}i.colorRanges=x}Object.freeze(i);const{textureWidth:a,sdfExponent:r}=Yp,{sdfGlyphSize:o}=i,l=a/o*4;let u=wT[o];if(!u){const x=document.createElement("canvas");x.width=a,x.height=o*256/l,u=wT[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:x,sdfTexture:new Es(x,void 0,void 0,void 0,ss,ss),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,pY(u)}const{sdfTexture:d,sdfCanvas:f}=u;GR(i).then(x=>{const{glyphIds:g,glyphFontIndices:v,fontData:M,glyphPositions:_,fontSize:S,timings:j}=x,A=[],C=new Float32Array(g.length*4);let N=0,R=0;const O=f0(),U=M.map(q=>{let W=u.glyphsByFont.get(q.src);return W||u.glyphsByFont.set(q.src,W=new Map),W});g.forEach((q,W)=>{const ie=v[W],{src:B,unitsPerEm:J}=M[ie];let $=U[ie].get(q);if(!$){const{path:ue,pathBounds:me}=x.glyphData[B][q],be=Math.max(me[2]-me[0],me[3]-me[1])/o*(Yp.sdfMargin*o+.5),fe=u.glyphCount++,ge=[me[0]-be,me[1]-be,me[2]+be,me[3]+be];U[ie].set(q,$={path:ue,atlasIndex:fe,sdfViewBox:ge}),A.push($)}const{sdfViewBox:le}=$,re=_[R++],H=_[R++],ee=S/J;C[N++]=re+le[0]*ee,C[N++]=H+le[1]*ee,C[N++]=re+le[2]*ee,C[N++]=H+le[3]*ee,g[W]=$.atlasIndex}),j.quads=(j.quads||0)+(f0()-O);const z=f0();j.sdf={};const I=f.height,V=Math.ceil(u.glyphCount/l),F=Math.pow(2,Math.ceil(Math.log2(V*o)));F>I&&(console.info(`Increasing SDF texture size ${I}->${F}`),hY(f,a,F),d.dispose()),Promise.all(A.map(q=>OR(q,u,i.gpuAccelerateSDF).then(({timing:W})=>{j.sdf[q.atlasIndex]=W}))).then(()=>{A.length&&!u.contextLost&&(zR(u),d.needsUpdate=!0),j.sdfTotal=f0()-z,j.total=f0()-t,e(Object.freeze({parameters:i,sdfTexture:d,sdfGlyphSize:o,sdfExponent:r,glyphBounds:C,glyphAtlasIndices:g,glyphColors:x.glyphColors,caretPositions:x.caretPositions,chunkedBounds:x.chunkedBounds,ascender:x.ascender,descender:x.descender,lineHeight:x.lineHeight,capHeight:x.capHeight,xHeight:x.xHeight,topBaseline:x.topBaseline,blockBounds:x.blockBounds,visibleBounds:x.visibleBounds,timings:x.timings}))})}),Promise.resolve().then(()=>{u.contextLost||fY(f)})}function OR({path:i,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:a,contextLost:r},o){if(r)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:u}=Yp,d=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),m=f%(l/n)*n,x=Math.floor(f/(l/n))*n,g=e%4;return rY(n,n,i,t,d,u,a,m,x,g,o)}function pY(i){const e=i.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),i.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(a=>{a.forEach(r=>{n.push(OR(r,i,!0))})}),Promise.all(n).then(()=>{zR(i),i.sdfTexture.needsUpdate=!0})})}function xY({font:i,characters:e,sdfGlyphSize:t},n){let a=Array.isArray(e)?e.join(`
`):""+e;PR({font:i,sdfGlyphSize:t,text:a},n)}function gY(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}let vv;function vY(i){return vv||(vv=typeof document>"u"?{}:document.createElement("a")),vv.href=i,vv.href}function zR(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=i,{width:n,height:a}=e,r=i.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*a*4)&&(o=new Uint8Array(n*a*4),t.image={width:n,height:a,data:o},t.flipY=!1,t.isDataTexture=!0),r.readPixels(0,0,n,a,r.RGBA,r.UNSIGNED_BYTE,o)}}const yY=tm({name:"Typesetter",dependencies:[aY,iY,HW],init(i,e,t){return i(e,t())}}),GR=tm({name:"Typesetter",dependencies:[yY],init(i){return function(e){return new Promise(t=>{i.typeset(e,t)})}},getTransferables(i){const e=[];for(let t in i)i[t]&&i[t].buffer&&e.push(i[t].buffer);return e}});GR.onMainThread;const jT={};function bY(i){let e=jT[i];return e||(e=jT[i]=new Ta(1,1,i,i).translate(.5,.5,0)),e}const MY="aTroikaGlyphBounds",ET="aTroikaGlyphIndex",SY="aTroikaGlyphColor";class _Y extends b3{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Yi,this.boundingBox=new zi}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=bY(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,a,r){this.updateAttributeData(MY,e,4),this.updateAttributeData(ET,t,1),this.updateAttributeData(SY,r,3),this._blockBounds=n,this._chunkedBounds=a,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:a,floor:r,min:o,max:l,sin:u,cos:d}=Math,f=a/2,m=a*2,x=Math.abs(t),g=e[0]/x,v=e[2]/x,M=r((g+f)/m)!==r((v+f)/m)?-x:o(u(g)*x,u(v)*x),_=r((g-f)/m)!==r((v-f)/m)?x:l(u(g)*x,u(v)*x),S=r((g+a)/m)!==r((v+a)/m)?x*2:l(x-d(g)*x,x-d(v)*x);n.min.set(M,e[1],t<0?-S:0),n.max.set(_,e[3],t<0?0:S)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(ET).count,n=this._chunkedBounds;if(n)for(let a=n.length;a--;){t=n[a].end;let r=n[a].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const a=this.getAttribute(e);t?a&&a.array.length===t.length?(a.array.set(t),a.needsUpdate=!0):(this.setAttribute(e,new zf(t,n)),delete this._maxInstanceCount,this.dispose()):a&&this.deleteAttribute(e)}}const wY=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,jY=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,EY=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,TY=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function AY(i){const e=a_(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new pt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new ns(0,0,0,0)},uTroikaClipRect:{value:new ns(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new pt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Lt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Tn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:wY,vertexTransform:jY,fragmentDefs:EY,fragmentColorTransform:TY,customRewriter({vertexShader:t,fragmentShader:n}){let a=/\buniform\s+vec3\s+diffuse\b/;return a.test(n)&&(n=n.replace(a,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),a.test(t)||(t=t.replace(LR,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const P3=new vl({color:16777215,side:Ms,transparent:!0}),TT=8421504,AT=new mn,yv=new Q,eS=new Q,Gp=[],CY=new Q,tS="+x+y";function CT(i){return Array.isArray(i)?i[0]:i}let IR=()=>{const i=new Bs(new Ta(1,1),P3);return IR=()=>i,i},kR=()=>{const i=new Bs(new Ta(1,1,32,1),P3);return kR=()=>i,i};const NY={type:"syncstart"},RY={type:"synccomplete"},BR=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],DY=BR.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let FR=class extends Bs{constructor(){const e=new _Y;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=TT,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=tS,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(NY),PR({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(a=>a&&a())})),this.dispatchEvent(RY),e&&e()})))}onBeforeRender(e,t,n,a,r,o){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return AY(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=P3.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function a(){e.removeEventListener("dispose",a),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return CT(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return CT(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,a=this.textRenderInfo;if(a){const{sdfTexture:l,blockBounds:u}=a;n.uTroikaSDFTexture.value=l,n.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),n.uTroikaSDFGlyphSize.value=a.sdfGlyphSize,n.uTroikaSDFExponent.value=a.sdfExponent,n.uTroikaTotalBounds.value.fromArray(u),n.uTroikaUseGlyphColors.value=!t&&!!a.glyphColors;let d=0,f=0,m=0,x,g,v,M=0,_=0;if(t){let{outlineWidth:j,outlineOffsetX:A,outlineOffsetY:C,outlineBlur:N,outlineOpacity:R}=this;d=this._parsePercent(j)||0,f=Math.max(0,this._parsePercent(N)||0),x=R,M=this._parsePercent(A)||0,_=this._parsePercent(C)||0}else m=Math.max(0,this._parsePercent(this.strokeWidth)||0),m&&(v=this.strokeColor,n.uTroikaStrokeColor.value.set(v??TT),g=this.strokeOpacity,g==null&&(g=1)),x=this.fillOpacity;n.uTroikaEdgeOffset.value=d,n.uTroikaPositionOffset.value.set(M,_),n.uTroikaBlurRadius.value=f,n.uTroikaStrokeWidth.value=m,n.uTroikaStrokeOpacity.value=g,n.uTroikaFillOpacity.value=x??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let S=this.clipRect;if(S&&Array.isArray(S)&&S.length===4)n.uTroikaClipRect.value.fromArray(S);else{const j=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(u[0]-j,u[1]-j,u[2]+j,u[3]+j)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const r=t?this.outlineColor||0:this.color;if(r==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new Lt;(r!==l._input||typeof r=="object")&&l.set(l._input=r)}let o=this.orientation||tS;if(o!==e._orientation){let l=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let u=o!==tS&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,d,f,m,x]=u;yv.set(0,0,0)[f]=d==="-"?1:-1,eS.set(0,0,0)[x]=m==="-"?-1:1,AT.lookAt(CY,yv.cross(eS),eS),l.setFromMatrix4(AT)}else l.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new pt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new pt){return yv.copy(e),this.localPositionToTextCoords(this.worldToLocal(yv),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:a}=this;if(n){const r=n.blockBounds,o=a?kR():IR(),l=o.geometry,{position:u,uv:d}=l.attributes;for(let f=0;f<d.count;f++){let m=r[0]+d.getX(f)*(r[2]-r[0]);const x=r[1]+d.getY(f)*(r[3]-r[1]);let g=0;a&&(g=a-Math.cos(m/a)*a,m=Math.sin(m/a)*a),u.setXYZ(f,m,x,g)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Gp.length=0,o.raycast(e,Gp);for(let f=0;f<Gp.length;f++)Gp[f].object=this,t.push(Gp[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,DY.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};BR.forEach(i=>{const e="_private_"+i;Object.defineProperty(FR.prototype,i,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new zi;new Lt;const xs=E.forwardRef(({sdfGlyphSize:i=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:a=1,children:r,characters:o,onSync:l,...u},d)=>{const f=bs(({invalidate:v})=>v),[m]=E.useState(()=>new FR),[x,g]=E.useMemo(()=>{const v=[];let M="";return E.Children.forEach(r,_=>{typeof _=="string"||typeof _=="number"?M+=_:v.push(_)}),[v,M]},[r]);return aR(()=>new Promise(v=>xY({font:n,characters:o},v)),["troika-text",n,o]),E.useLayoutEffect(()=>void m.sync(()=>{f(),l&&l(m)})),E.useEffect(()=>()=>m.dispose(),[m]),E.createElement("primitive",wa({object:m,ref:d,font:n,text:g,anchorX:e,anchorY:t,fontSize:a,sdfGlyphSize:i},u),x)});function O3(i,e,t,n){var a;return a=class extends Zi{constructor(r){super({vertexShader:e,fragmentShader:t,...r});for(const o in i)this.uniforms[o]=new Rb(i[o]),Object.defineProperty(this,o,{get(){return this.uniforms[o].value},set(l){this.uniforms[o].value=l}});this.uniforms=lb.clone(this.uniforms)}},a.key=ks.generateUUID(),a}const LY=()=>parseInt(Z0.replace(/\D+/g,"")),zb=LY();function UY(i,e,t){const n=bs(g=>g.size),a=bs(g=>g.viewport),r=typeof i=="number"?i:n.width*a.dpr,o=n.height*a.dpr,l=(typeof i=="number"?t:i)||{},{samples:u=0,depth:d,...f}=l,m=d??l.depthBuffer,x=E.useMemo(()=>{const g=new Ea(r,o,{minFilter:ss,magFilter:ss,type:Ti,...f});return m&&(g.depthTexture=new xb(r,o,ti)),g.samples=u,g},[]);return E.useLayoutEffect(()=>{x.setSize(r,o),u&&(x.samples=u)},[u,x,r,o]),E.useEffect(()=>()=>x.dispose(),[]),x}const PY=i=>typeof i=="function",ru=E.forwardRef(({envMap:i,resolution:e=256,frames:t=1/0,makeDefault:n,children:a,...r},o)=>{const l=bs(({set:_})=>_),u=bs(({camera:_})=>_),d=bs(({size:_})=>_),f=E.useRef(null);E.useImperativeHandle(o,()=>f.current,[]);const m=E.useRef(null),x=UY(e);E.useLayoutEffect(()=>{r.manual||(f.current.aspect=d.width/d.height)},[d,r]),E.useLayoutEffect(()=>{f.current.updateProjectionMatrix()});let g=0,v=null;const M=PY(a);return Yt(_=>{M&&(t===1/0||g<t)&&(m.current.visible=!1,_.gl.setRenderTarget(x),v=_.scene.background,i&&(_.scene.background=i),_.gl.render(_.scene,f.current),_.scene.background=v,_.gl.setRenderTarget(null),m.current.visible=!0,g++)}),E.useLayoutEffect(()=>{if(n){const _=u;return l(()=>({camera:f.current})),()=>l(()=>({camera:_}))}},[f,n,l]),E.createElement(E.Fragment,null,E.createElement("perspectiveCamera",wa({ref:f},r),!M&&a),E.createElement("group",{ref:m},M&&a(x.texture)))}),ht=E.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:a=!0,keyEvents:r=!1,onChange:o,onStart:l,onEnd:u,...d},f)=>{const m=bs(R=>R.invalidate),x=bs(R=>R.camera),g=bs(R=>R.gl),v=bs(R=>R.events),M=bs(R=>R.setEvents),_=bs(R=>R.set),S=bs(R=>R.get),j=bs(R=>R.performance),A=e||x,C=n||v.connected||g.domElement,N=E.useMemo(()=>new LW(A),[A]);return Yt(()=>{N.enabled&&N.update()},-1),E.useEffect(()=>(r&&N.connect(r===!0?C:r),N.connect(C),()=>void N.dispose()),[r,C,t,N,m]),E.useEffect(()=>{const R=z=>{m(),t&&j.regress(),o&&o(z)},O=z=>{l&&l(z)},U=z=>{u&&u(z)};return N.addEventListener("change",R),N.addEventListener("start",O),N.addEventListener("end",U),()=>{N.removeEventListener("start",O),N.removeEventListener("end",U),N.removeEventListener("change",R)}},[o,l,u,N,m,M]),E.useEffect(()=>{if(i){const R=S().controls;return _({controls:N}),()=>_({controls:R})}},[i,N]),E.createElement("primitive",wa({ref:f,object:N,enableDamping:a},d))}),OY=O3({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Lt,sectionColor:new Lt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Q,worldPlanePosition:new Q},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${zb>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Gi=E.forwardRef(({args:i,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:n=.5,sectionSize:a=1,followCamera:r=!1,infiniteGrid:o=!1,fadeDistance:l=100,fadeStrength:u=1,fadeFrom:d=1,cellThickness:f=.5,sectionThickness:m=1,side:x=la,...g},v)=>{Pb({GridMaterial:OY});const M=E.useRef(null);E.useImperativeHandle(v,()=>M.current,[]);const _=new $l,S=new Q(0,1,0),j=new Q(0,0,0);Yt(N=>{_.setFromNormalAndCoplanarPoint(S,j).applyMatrix4(M.current.matrixWorld);const R=M.current.material,O=R.uniforms.worldCamProjPosition,U=R.uniforms.worldPlanePosition;_.projectPoint(N.camera.position,O.value),U.value.set(0,0,0).applyMatrix4(M.current.matrixWorld)});const A={cellSize:n,sectionSize:a,cellColor:e,sectionColor:t,cellThickness:f,sectionThickness:m},C={fadeDistance:l,fadeStrength:u,fadeFrom:d,infiniteGrid:o,followCamera:r};return E.createElement("mesh",wa({ref:M,frustumCulled:!1},g),E.createElement("gridMaterial",wa({transparent:!0,"extensions-derivatives":!0,side:x},A,C)),E.createElement("planeGeometry",{args:i}))}),V0=E.forwardRef(function({children:e,object:t,disable:n,disableX:a,disableY:r,disableZ:o,left:l,right:u,top:d,bottom:f,front:m,back:x,onCentered:g,precise:v=!0,cacheKey:M=0,..._},S){const j=E.useRef(null),A=E.useRef(null),C=E.useRef(null),[N]=E.useState(()=>new zi),[R]=E.useState(()=>new Q),[O]=E.useState(()=>new Yi);return E.useLayoutEffect(()=>{A.current.matrixWorld.identity(),N.setFromObject(t??C.current,v);const U=N.max.x-N.min.x,z=N.max.y-N.min.y,I=N.max.z-N.min.z;N.getCenter(R),N.getBoundingSphere(O);const V=d?z/2:f?-z/2:0,F=l?-U/2:u?U/2:0,q=m?I/2:x?-I/2:0;A.current.position.set(n||a?0:-R.x+F,n||r?0:-R.y+V,n||o?0:-R.z+q),g==null||g({parent:j.current.parent,container:j.current,width:U,height:z,depth:I,boundingBox:N,boundingSphere:O,center:R,verticalAlignment:V,horizontalAlignment:F,depthAlignment:q})},[M,g,d,l,m,n,a,r,o,t,v,u,f,x,N,R,O]),E.useImperativeHandle(S,()=>j.current,[]),E.createElement("group",wa({ref:j},_),E.createElement("group",{ref:A},E.createElement("group",{ref:C},e)))}),zY=O3({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");function VR(i,e){const t=i+"Geometry";return E.forwardRef(({args:n,children:a,...r},o)=>{const l=E.useRef(null);return E.useImperativeHandle(o,()=>l.current),E.useLayoutEffect(()=>void(e==null?void 0:e(l.current))),E.createElement("mesh",wa({ref:l},r),E.createElement(t,{attach:"geometry",args:n}),a)})}const GY=VR("sphere"),lg=VR("tube");var Ao=(function(i){return i[i.NONE=0]="NONE",i[i.START=1]="START",i[i.ACTIVE=2]="ACTIVE",i})(Ao||{});const h0=i=>i&&i.isOrthographicCamera,IY=i=>i&&i.isBox3,kY=i=>1-Math.exp(-5*i)+.007*i,HR=E.createContext(null);function BY({children:i,maxDuration:e=1,margin:t=1.2,observe:n,fit:a,clip:r,interpolateFunc:o=kY,onFit:l}){const u=E.useRef(null),{camera:d,size:f,invalidate:m}=bs(),x=bs(N=>N.controls),g=E.useRef(l);g.current=l;const v=E.useRef({camPos:new Q,camRot:new Wn,camZoom:1}),M=E.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),_=E.useRef(Ao.NONE),S=E.useRef(0),[j]=E.useState(()=>new zi),A=E.useMemo(()=>{function N(){const R=j.getSize(new Q),O=j.getCenter(new Q),U=Math.max(R.x,R.y,R.z),z=h0(d)?U*4:U/(2*Math.atan(Math.PI*d.fov/360)),I=h0(d)?U*4:z/d.aspect,V=t*Math.max(z,I);return{box:j,size:R,center:O,distance:V}}return{getSize:N,refresh(R){if(IY(R))j.copy(R);else{const O=R||u.current;if(!O)return this;O.updateWorldMatrix(!0,!0),j.setFromObject(O)}if(j.isEmpty()){const O=d.position.length()||10;j.setFromCenterAndSize(new Q,new Q(O,O,O))}return v.current.camPos.copy(d.position),v.current.camRot.copy(d.quaternion),h0(d)&&(v.current.camZoom=d.zoom),M.current.camPos=void 0,M.current.camRot=void 0,M.current.camZoom=void 0,M.current.camUp=void 0,M.current.target=void 0,this},reset(){const{center:R,distance:O}=N(),U=d.position.clone().sub(R).normalize();M.current.camPos=R.clone().addScaledVector(U,O),M.current.target=R.clone();const z=new mn().lookAt(M.current.camPos,M.current.target,d.up);return M.current.camRot=new Wn().setFromRotationMatrix(z),_.current=Ao.START,S.current=0,this},moveTo(R){return M.current.camPos=Array.isArray(R)?new Q(...R):R.clone(),_.current=Ao.START,S.current=0,this},lookAt({target:R,up:O}){M.current.target=Array.isArray(R)?new Q(...R):R.clone(),O?M.current.camUp=Array.isArray(O)?new Q(...O):O.clone():M.current.camUp=d.up.clone();const U=new mn().lookAt(M.current.camPos||d.position,M.current.target,M.current.camUp);return M.current.camRot=new Wn().setFromRotationMatrix(U),_.current=Ao.START,S.current=0,this},to({position:R,target:O}){return this.moveTo(R).lookAt({target:O})},fit(){if(!h0(d))return this.reset();let R=0,O=0;const U=[new Q(j.min.x,j.min.y,j.min.z),new Q(j.min.x,j.max.y,j.min.z),new Q(j.min.x,j.min.y,j.max.z),new Q(j.min.x,j.max.y,j.max.z),new Q(j.max.x,j.max.y,j.max.z),new Q(j.max.x,j.max.y,j.min.z),new Q(j.max.x,j.min.y,j.max.z),new Q(j.max.x,j.min.y,j.min.z)],z=M.current.camPos||d.position,I=M.current.target||(x==null?void 0:x.target),V=M.current.camUp||d.up,F=I?new mn().lookAt(z,I,V).setPosition(z).invert():d.matrixWorldInverse;for(const ie of U)ie.applyMatrix4(F),R=Math.max(R,Math.abs(ie.y)),O=Math.max(O,Math.abs(ie.x));R*=2,O*=2;const q=(d.top-d.bottom)/R,W=(d.right-d.left)/O;return M.current.camZoom=Math.min(q,W)/t,_.current=Ao.START,S.current=0,g.current&&g.current(this.getSize()),this},clip(){const{distance:R}=N();return d.near=R/100,d.far=R*100,d.updateProjectionMatrix(),x&&(x.maxDistance=R*10,x.update()),m(),this}}},[j,d,x,t,m]);E.useLayoutEffect(()=>{if(x){const N=()=>{if(x&&M.current.target&&_.current!==Ao.NONE){const R=new Q().setFromMatrixColumn(d.matrix,2),O=v.current.camPos.distanceTo(x.target),U=(M.current.camPos||v.current.camPos).distanceTo(M.current.target),z=(1-S.current)*O+S.current*U;x.target.copy(d.position).addScaledVector(R,-z),x.update()}_.current=Ao.NONE};return x.addEventListener("start",N),()=>x.removeEventListener("start",N)}},[x]);const C=E.useRef(0);return E.useLayoutEffect(()=>{(n||C.current++===0)&&(A.refresh(),a&&A.reset().fit(),r&&A.clip())},[f,r,a,n,d,x]),Yt((N,R)=>{if(_.current===Ao.START)_.current=Ao.ACTIVE,m();else if(_.current===Ao.ACTIVE){if(S.current+=R/e,S.current>=1)M.current.camPos&&d.position.copy(M.current.camPos),M.current.camRot&&d.quaternion.copy(M.current.camRot),M.current.camUp&&d.up.copy(M.current.camUp),M.current.camZoom&&h0(d)&&(d.zoom=M.current.camZoom),d.updateMatrixWorld(),d.updateProjectionMatrix(),x&&M.current.target&&(x.target.copy(M.current.target),x.update()),_.current=Ao.NONE;else{const O=o(S.current);M.current.camPos&&d.position.lerpVectors(v.current.camPos,M.current.camPos,O),M.current.camRot&&d.quaternion.slerpQuaternions(v.current.camRot,M.current.camRot,O),M.current.camUp&&d.up.set(0,1,0).applyQuaternion(d.quaternion),M.current.camZoom&&h0(d)&&(d.zoom=(1-O)*v.current.camZoom+O*M.current.camZoom),d.updateMatrixWorld(),d.updateProjectionMatrix()}m()}}),E.createElement("group",{ref:u},E.createElement(HR.Provider,{value:A},i))}function FY(){return E.useContext(HR)}const qa=E.forwardRef(({children:i,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:a=1,floatingRange:r=[-.1,.1],autoInvalidate:o=!1,...l},u)=>{const d=E.useRef(null);E.useImperativeHandle(u,()=>d.current,[]);const f=E.useRef(Math.random()*1e4);return Yt(m=>{var x,g;if(!e||t===0)return;o&&m.invalidate();const v=f.current+m.clock.elapsedTime;d.current.rotation.x=Math.cos(v/4*t)/8*n,d.current.rotation.y=Math.sin(v/4*t)/8*n,d.current.rotation.z=Math.sin(v/4*t)/20*n;let M=Math.sin(v/4*t)/10;M=ks.mapLinear(M,-.1,.1,(x=r==null?void 0:r[0])!==null&&x!==void 0?x:-.1,(g=r==null?void 0:r[1])!==null&&g!==void 0?g:.1),d.current.position.y=M*a,d.current.updateMatrix()}),E.createElement("group",l,E.createElement("group",{ref:d,matrixAutoUpdate:!1},i))}),qR=(i,e,t)=>{let n;switch(i){case gr:n=new Uint8ClampedArray(e*t*4);break;case Ti:n=new Uint16Array(e*t*4);break;case lc:n=new Uint32Array(e*t*4);break;case Qy:n=new Int8Array(e*t*4);break;case $y:n=new Int16Array(e*t*4);break;case Xx:n=new Int32Array(e*t*4);break;case ti:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let bv;const VY=(i,e,t,n)=>{if(bv!==void 0)return bv;const a=new Ea(1,1,n);e.setRenderTarget(a);const r=new Bs(new Ta,new vl({color:16777215}));e.render(r,t),e.setRenderTarget(null);const o=qR(i,a.width,a.height);return e.readRenderTargetPixels(a,0,0,a.width,a.height,o),a.dispose(),r.geometry.dispose(),r.material.dispose(),bv=o[0]!==0,bv};class z3{constructor(e){xi(this,"_renderer");xi(this,"_rendererIsDisposable",!1);xi(this,"_material");xi(this,"_scene");xi(this,"_camera");xi(this,"_quad");xi(this,"_renderTarget");xi(this,"_width");xi(this,"_height");xi(this,"_type");xi(this,"_colorSpace");xi(this,"_supportsReadPixels",!0);xi(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var n,a,r,o,l,u,d,f,m,x,g,v,M,_,S,j;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Ai,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)==null?void 0:n.anisotropy)!==void 0?(a=e.renderTargetOptions)==null?void 0:a.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)==null?void 0:r.generateMipmaps)!==void 0?(o=e.renderTargetOptions)==null?void 0:o.generateMipmaps:!1,magFilter:((l=e.renderTargetOptions)==null?void 0:l.magFilter)!==void 0?(u=e.renderTargetOptions)==null?void 0:u.magFilter:ss,minFilter:((d=e.renderTargetOptions)==null?void 0:d.minFilter)!==void 0?(f=e.renderTargetOptions)==null?void 0:f.minFilter:ss,samples:((m=e.renderTargetOptions)==null?void 0:m.samples)!==void 0?(x=e.renderTargetOptions)==null?void 0:x.samples:void 0,wrapS:((g=e.renderTargetOptions)==null?void 0:g.wrapS)!==void 0?(v=e.renderTargetOptions)==null?void 0:v.wrapS:bi,wrapT:((M=e.renderTargetOptions)==null?void 0:M.wrapT)!==void 0?(_=e.renderTargetOptions)==null?void 0:_.wrapT:bi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=z3.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Kx,this._camera=new xl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!VY(this._type,this._renderer,this._camera,t)){let A;switch(this._type){case Ti:A=this._renderer.extensions.has("EXT_color_buffer_float")?ti:void 0;break}A!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ti}`),this._type=A):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Bs(new Ta,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ea(this.width,this.height,t),this._renderTarget.texture.mapping=((S=e.renderTargetOptions)==null?void 0:S.mapping)!==void 0?(j=e.renderTargetOptions)==null?void 0:j.mapping:rd}static instantiateRenderer(){const e=new T3;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=qR(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Lo(this.toArray(),this.width,this.height,Ai,this._type,(e==null?void 0:e.mapping)||rd,(e==null?void 0:e.wrapS)||bi,(e==null?void 0:e.wrapT)||bi,(e==null?void 0:e.magFilter)||ss,(e==null?void 0:e.minFilter)||ss,(e==null?void 0:e.anisotropy)||1,gl);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Zi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Es&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Es&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class XR extends Error{}class WR extends Error{}const Ip=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const a=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(a){const r=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(o=>o.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},HY=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),a=e.slice(t,n+10);try{const r=Ip(a,"hdrgm:GainMapMin","0"),o=Ip(a,"hdrgm:GainMapMax"),l=Ip(a,"hdrgm:Gamma","1"),u=Ip(a,"hdrgm:OffsetSDR","0.015625"),d=Ip(a,"hdrgm:OffsetHDR","0.015625"),f=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),m=f?f[1]:"0",x=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!x)throw new Error("Incomplete gainmap metadata");const g=x[1];return{gainMapMin:Array.isArray(r)?r.map(v=>parseFloat(v)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(o)?o.map(v=>parseFloat(v)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(l)?l.map(v=>parseFloat(v)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(u)?u.map(v=>parseFloat(v)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetHdr:Array.isArray(d)?d.map(v=>parseFloat(v)):[parseFloat(d),parseFloat(d),parseFloat(d)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(g)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class qY{constructor(e){xi(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const a=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=r.byteLength;let l=2,u=0,d;for(;l<o;){if(++u>250){n(new Error(`Found no marker after ${u} loops `));return}if(r.getUint8(l)!==255){n(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${r.getUint8(l).toString(16)}`));return}if(d=r.getUint8(l+1),a&&console.log(`Marker: ${d.toString(16)}`),d===226){a&&console.log("Found APP2 marker (0xffe2)");const f=l+4;if(r.getUint32(f)===1297106432){const m=f+4;let x;if(r.getUint16(m)===18761)x=!1;else if(r.getUint16(m)===19789)x=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(m+2,!x)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const g=r.getUint32(m+4,!x);if(g<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=m+g,M=r.getUint16(v,!x),_=v+2;let S=0;for(let N=_;N<_+12*M;N+=12)r.getUint16(N,!x)===45057&&(S=r.getUint32(N+8,!x));const A=v+2+M*12+4,C=[];for(let N=A;N<A+S*16;N+=16){const R={MPType:r.getUint32(N,!x),size:r.getUint32(N+4,!x),dataOffset:r.getUint32(N+8,!x),dependantImages:r.getUint32(N+12,!x),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=m+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,C.push(R)}if(this.options.extractNonFII&&C.length){const N=new Blob([r]),R=[];for(const O of C){if(O.isFII&&!this.options.extractFII)continue;const U=N.slice(O.start,O.end+1,"image/jpeg");R.push(U)}t(R)}}}l+=2+r.getUint16(l+2)}})}}const XY=async i=>{const e=HY(i);if(!e)throw new WR("Gain map XMP metadata not found");const n=await new qY({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new XR("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},NT=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=a=>{t(a)},n.src=URL.createObjectURL(i)});class WY extends yr{constructor(t,n){super(n);xi(this,"_renderer");xi(this,"_renderTargetOptions");xi(this,"_internalLoadingManager");xi(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new Cb}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Es,sdr:new Es});return this._config.createQuadRenderer({width:16,height:16,type:Ti,colorSpace:gl,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,n,a){const r=n?new Blob([n],{type:"image/jpeg"}):void 0,o=new Blob([t],{type:"image/jpeg"});let l,u,d=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([r?NT(r):Promise.resolve(void 0),NT(o)]);u=f[0],l=f[1],d=a==="flipY"}else{const f=await Promise.all([r?createImageBitmap(r,{imageOrientation:a||"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:a||"flipY"})]);u=f[0],l=f[1]}return{sdrImage:l,gainMapImage:u,needsFlip:d}}createTextures(t,n,a){const r=new Es(n||new ImageData(2,2),rd,bi,bi,ss,zS,Ai,gr,1,gl);r.flipY=a,r.needsUpdate=!0;const o=new Es(t,rd,bi,bi,ss,zS,Ai,gr,1,Sa);return o.flipY=a,o.needsUpdate=!0,{gainMap:r,sdr:o}}updateQuadRenderer(t,n,a,r,o){t.width=n.width,t.height=n.height,t.material.gainMap=a,t.material.sdr=r,t.material.gainMapMin=o.gainMapMin,t.material.gainMapMax=o.gainMapMax,t.material.offsetHdr=o.offsetHdr,t.material.offsetSdr=o.offsetSdr,t.material.gamma=o.gamma,t.material.hdrCapacityMin=o.hdrCapacityMin,t.material.hdrCapacityMax=o.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,o.hdrCapacityMax),t.material.needsUpdate=!0}}const YY=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,ZY=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class KY extends Zi{constructor({gamma:t,offsetHdr:n,offsetSdr:a,gainMapMin:r,gainMapMax:o,maxDisplayBoost:l,hdrCapacityMin:u,hdrCapacityMax:d,sdr:f,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:YY,fragmentShader:ZY,uniforms:{sdr:{value:f},gainMap:{value:m},gamma:{value:new Q(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new Q().fromArray(n)},offsetSdr:{value:new Q().fromArray(a)},gainMapMin:{value:new Q().fromArray(r)},gainMapMax:{value:new Q().fromArray(o)},weightFactor:{value:(Math.log2(l)-u)/(d-u)}},blending:pl,depthTest:!1,depthWrite:!1});xi(this,"_maxDisplayBoost");xi(this,"_hdrCapacityMin");xi(this,"_hdrCapacityMax");this._maxDisplayBoost=l,this._hdrCapacityMin=u,this._hdrCapacityMax=d,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const n=this.uniforms.gamma.value;n.x=1/t[0],n.y=1/t[1],n.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class YR extends WY{constructor(e,t){super({renderer:e,createMaterial:n=>new KY(n),createQuadRenderer:n=>new z3(n)},t)}async render(e,t,n,a){const{sdrImage:r,gainMapImage:o,needsFlip:l}=await this.processImages(n,a,"flipY"),{gainMap:u,sdr:d}=this.createTextures(r,o,l);this.updateQuadRenderer(e,r,u,d,t),e.render()}}class JY extends YR{load([e,t,n],a,r,o){const l=this.prepareQuadRenderer();let u,d,f;const m=async()=>{if(u&&d&&f){try{await this.render(l,f,u,d)}catch(z){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(z),l.disposeOnDemandRenderer();return}typeof a=="function"&&a(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),l.disposeOnDemandRenderer()}};let x=!0,g=0,v=0,M=!0,_=0,S=0,j=!0,A=0,C=0;const N=()=>{if(typeof r=="function"){const z=g+_+A,I=v+S+C,V=x&&M&&j;r(new ProgressEvent("progress",{lengthComputable:V,loaded:I,total:z}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const R=new so(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async z=>{if(typeof z=="string")throw new Error("Invalid sdr buffer");u=z,await m()},z=>{x=z.lengthComputable,v=z.loaded,g=z.total,N()},z=>{this.manager.itemError(e),typeof o=="function"&&o(z)});const O=new so(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(t,async z=>{if(typeof z=="string")throw new Error("Invalid gainmap buffer");d=z,await m()},z=>{M=z.lengthComputable,S=z.loaded,_=z.total,N()},z=>{this.manager.itemError(t),typeof o=="function"&&o(z)});const U=new so(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(n,async z=>{if(typeof z!="string")throw new Error("Invalid metadata string");f=JSON.parse(z),await m()},z=>{j=z.lengthComputable,C=z.loaded,A=z.total,N()},z=>{this.manager.itemError(n),typeof o=="function"&&o(z)}),l}}class QY extends YR{load(e,t,n,a){const r=this.prepareQuadRenderer(),o=new so(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const u=new Uint8Array(l);let d,f,m;try{const x=await XY(u);d=x.sdr,f=x.gainMap,m=x.metadata}catch(x){if(x instanceof WR||x instanceof XR)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},d=u;else throw x}try{await this.render(r,m,d.buffer,f==null?void 0:f.buffer)}catch(x){this.manager.itemError(e),typeof a=="function"&&a(x),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},n,l=>{this.manager.itemError(e),typeof a=="function"&&a(l)}),r}}const Gx={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ZR="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",T0=i=>Array.isArray(i),G3=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Gb({files:i=G3,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:a}={}){t&&(I3(t),i=Gx[t],e=ZR);const r=T0(i),{extension:o,isCubemap:l}=k3(i),u=B3(o);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+i);const d=bs(g=>g.gl);E.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function g(){B0.clear(u,r?[i]:i)}d.domElement.addEventListener("webglcontextlost",g,{once:!0})},[i,d.domElement]);const f=B0(u,r?[i]:i,g=>{(o==="webp"||o==="jpg"||o==="jpeg")&&g.setRenderer(d),g.setPath==null||g.setPath(e),a&&a(g)});let m=r?f[0]:f;if(o==="jpg"||o==="jpeg"||o==="webp"){var x;m=(x=m.renderTarget)==null?void 0:x.texture}return m.mapping=l?oc:N0,m.colorSpace=n??(l?"srgb":"srgb-linear"),m}const $Y={files:G3,path:"",preset:void 0,extensions:void 0};Gb.preload=i=>{const e={...$Y,...i};let{files:t,path:n=""}=e;const{preset:a,extensions:r}=e;a&&(I3(a),t=Gx[a],n=ZR);const{extension:o}=k3(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=B3(o);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);B0.preload(l,T0(t)?[t]:t,u=>{u.setPath==null||u.setPath(n),r&&r(u)})};const eZ={files:G3,preset:void 0};Gb.clear=i=>{const e={...eZ,...i};let{files:t}=e;const{preset:n}=e;n&&(I3(n),t=Gx[n]);const{extension:a}=k3(t),r=B3(a);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+t);B0.clear(r,T0(t)?[t]:t)};function I3(i){if(!(i in Gx))throw new Error("Preset must be one of: "+Object.keys(Gx).join(", "))}function k3(i){var e;const t=T0(i)&&i.length===6,n=T0(i)&&i.length===3&&i.some(o=>o.endsWith("json")),a=T0(i)?i[0]:i;return{extension:t?"cube":n?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(e=a.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function B3(i){return i==="cube"?PN:i==="hdr"?OW:i==="exr"?zW:i==="jpg"||i==="jpeg"?QY:i==="webp"?JY:null}const tZ=i=>i.current&&i.current.isScene,nZ=i=>tZ(i)?i.current:i;function F3(i,e,t,n,a={}){var r,o,l,u;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const d=nZ(e||t),f=d.background,m=d.environment,x={backgroundBlurriness:d.backgroundBlurriness,backgroundIntensity:d.backgroundIntensity,backgroundRotation:(r=(o=d.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:d.environmentIntensity,environmentRotation:(l=(u=d.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return i!=="only"&&(d.environment=n),i&&(d.background=n),ec(d,a),()=>{i!=="only"&&(d.environment=m),i&&(d.background=f),ec(d,x)}}function V3({scene:i,background:e=!1,map:t,...n}){const a=bs(r=>r.scene);return E.useLayoutEffect(()=>{if(t)return F3(e,i,a,t,n)}),null}function KR({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:a,backgroundRotation:r,environmentIntensity:o,environmentRotation:l,...u}){const d=Gb(u),f=bs(m=>m.scene);return E.useLayoutEffect(()=>F3(i,e,f,d,{backgroundBlurriness:t??n,backgroundIntensity:a,backgroundRotation:r,environmentIntensity:o,environmentRotation:l})),E.useEffect(()=>()=>{d.dispose()},[d]),null}function sZ({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:a=1,map:r,background:o=!1,blur:l,backgroundBlurriness:u,backgroundIntensity:d,backgroundRotation:f,environmentIntensity:m,environmentRotation:x,scene:g,files:v,path:M,preset:_=void 0,extensions:S}){const j=bs(U=>U.gl),A=bs(U=>U.scene),C=E.useRef(null),[N]=E.useState(()=>new Kx),R=E.useMemo(()=>{const U=new s3(n);return U.texture.type=Ti,U},[n]);E.useEffect(()=>()=>{R.dispose()},[R]),E.useLayoutEffect(()=>{if(a===1){const U=j.autoClear;j.autoClear=!0,C.current.update(j,N),j.autoClear=U}return F3(o,g,A,R.texture,{backgroundBlurriness:l??u,backgroundIntensity:d,backgroundRotation:f,environmentIntensity:m,environmentRotation:x})},[i,N,R.texture,g,A,o,a,j]);let O=1;return Yt(()=>{if(a===1/0||O<a){const U=j.autoClear;j.autoClear=!0,C.current.update(j,N),j.autoClear=U,O++}}),E.createElement(E.Fragment,null,kX(E.createElement(E.Fragment,null,i,E.createElement("cubeCamera",{ref:C,args:[e,t,R]}),v||_?E.createElement(KR,{background:!0,files:v,preset:_,path:M,extensions:S}):r?E.createElement(V3,{background:!0,map:r,extensions:S}):null),N))}function iZ(i){var e,t,n,a;const r=Gb(i),o=i.map||r;E.useMemo(()=>Pb({GroundProjectedEnvImpl:jW}),[]),E.useEffect(()=>()=>{r.dispose()},[r]);const l=E.useMemo(()=>[o],[o]),u=(e=i.ground)==null?void 0:e.height,d=(t=i.ground)==null?void 0:t.radius,f=(n=(a=i.ground)==null?void 0:a.scale)!==null&&n!==void 0?n:1e3;return E.createElement(E.Fragment,null,E.createElement(V3,wa({},i,{map:o})),E.createElement("groundProjectedEnvImpl",{args:l,scale:f,height:u,radius:d}))}function aZ(i){return i.ground?E.createElement(iZ,i):i.map?E.createElement(V3,i):i.children?E.createElement(sZ,i):E.createElement(KR,i)}const JR=E.forwardRef(({scale:i=10,frames:e=1/0,opacity:t=1,width:n=1,height:a=1,blur:r=1,near:o=0,far:l=10,resolution:u=512,smooth:d=!0,color:f="#000000",depthWrite:m=!1,renderOrder:x,...g},v)=>{const M=E.useRef(null),_=bs(W=>W.scene),S=bs(W=>W.gl),j=E.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),a=a*(Array.isArray(i)?i[1]:i||1);const[A,C,N,R,O,U,z]=E.useMemo(()=>{const W=new Ea(u,u),ie=new Ea(u,u);ie.texture.generateMipmaps=W.texture.generateMipmaps=!1;const B=new Ta(n,a).rotateX(Math.PI/2),J=new Bs(B),$=new ng;$.depthTest=$.depthWrite=!1,$.onBeforeCompile=H=>{H.uniforms={...H.uniforms,ucolor:{value:new Lt(f)}},H.fragmentShader=H.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),H.fragmentShader=H.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const le=new Zi(UW),re=new Zi(PW);return re.depthTest=le.depthTest=!1,[W,B,$,J,le,re,ie]},[u,n,a,i,f]),I=W=>{R.visible=!0,R.material=O,O.uniforms.tDiffuse.value=A.texture,O.uniforms.h.value=W*1/256,S.setRenderTarget(z),S.render(R,j.current),R.material=U,U.uniforms.tDiffuse.value=z.texture,U.uniforms.v.value=W*1/256,S.setRenderTarget(A),S.render(R,j.current),R.visible=!1};let V=0,F,q;return Yt(()=>{j.current&&(e===1/0||V<e)&&(V++,F=_.background,q=_.overrideMaterial,M.current.visible=!1,_.background=null,_.overrideMaterial=N,S.setRenderTarget(A),S.render(_,j.current),I(r),d&&I(r*.4),S.setRenderTarget(null),M.current.visible=!0,_.overrideMaterial=q,_.background=F)}),E.useImperativeHandle(v,()=>M.current,[]),E.createElement("group",wa({"rotation-x":Math.PI/2},g,{ref:M}),E.createElement("mesh",{renderOrder:x,geometry:C,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},E.createElement("meshBasicMaterial",{transparent:!0,map:A.texture,opacity:t,depthWrite:m})),E.createElement("orthographicCamera",{ref:j,args:[-n/2,n/2,a/2,-a/2,o,l]}))});function rZ(i){return i.isLight}function oZ(i){return!!i.geometry}const QR=E.createContext(null),lZ=O3({color:new Lt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${zb>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),cZ=E.forwardRef(({children:i,temporal:e,frames:t=40,limit:n=1/0,blend:a=20,scale:r=10,opacity:o=1,alphaTest:l=.75,color:u="black",colorBlend:d=2,resolution:f=1024,toneMapped:m=!0,...x},g)=>{Pb({SoftShadowMaterial:lZ});const v=bs(R=>R.gl),M=bs(R=>R.scene),_=bs(R=>R.camera),S=bs(R=>R.invalidate),j=E.useRef(null),A=E.useRef(null),[C]=E.useState(()=>new dZ(v,M,f));E.useLayoutEffect(()=>{C.configure(j.current)},[]);const N=E.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?a:t),count:0,getMesh:()=>j.current,reset:()=>{C.clear();const R=j.current.material;R.opacity=0,R.alphaTest=0,N.count=0},update:(R=1)=>{const O=j.current.material;N.temporal?(O.opacity=Math.min(o,O.opacity+o/N.blend),O.alphaTest=Math.min(l,O.alphaTest+l/N.blend)):(O.opacity=o,O.alphaTest=l),A.current.visible=!0,C.prepare();for(let U=0;U<R;U++)N.lights.forEach(z=>z.update()),C.update(_,N.blend);A.current.visible=!1,C.finish()}}),[C,_,M,e,t,a,o,l]);return E.useLayoutEffect(()=>{N.reset(),!N.temporal&&N.frames!==1/0&&N.update(N.blend)}),E.useImperativeHandle(g,()=>N,[N]),Yt(()=>{(N.temporal||N.frames===1/0)&&N.count<N.frames&&N.count<n&&(S(),N.update(),N.count++)}),E.createElement("group",x,E.createElement("group",{traverse:()=>null,ref:A},E.createElement(QR.Provider,{value:N},i)),E.createElement("mesh",{receiveShadow:!0,ref:j,scale:r,rotation:[-Math.PI/2,0,0]},E.createElement("planeGeometry",null),E.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:m,color:u,blend:d,map:C.progressiveLightMap2.texture})))}),uZ=E.forwardRef(({castShadow:i=!0,bias:e=.001,mapSize:t=512,size:n=5,near:a=.5,far:r=500,frames:o=1,position:l=[0,0,0],radius:u=1,amount:d=8,intensity:f=zb>=155?Math.PI:1,ambient:m=.5,...x},g)=>{const v=E.useRef(null),M=new Q(...l).length(),_=E.useContext(QR),S=E.useCallback(()=>{let A;if(v.current)for(let C=0;C<v.current.children.length;C++)if(A=v.current.children[C],Math.random()>m)A.position.set(l[0]+ks.randFloatSpread(u),l[1]+ks.randFloatSpread(u),l[2]+ks.randFloatSpread(u));else{let N=Math.acos(2*Math.random()-1)-Math.PI/2,R=2*Math.PI*Math.random();A.position.set(Math.cos(N)*Math.cos(R)*M,Math.abs(Math.cos(N)*Math.sin(R)*M),Math.sin(N)*M)}},[u,m,M,...l]),j=E.useMemo(()=>({update:S}),[S]);return E.useImperativeHandle(g,()=>j,[j]),E.useLayoutEffect(()=>{var A;const C=v.current;return _&&((A=_.lights)==null||A.set(C.uuid,j)),()=>{var N;return void(_==null||(N=_.lights)==null?void 0:N.delete(C.uuid))}},[_,j]),E.createElement("group",wa({ref:v},x),Array.from({length:d},(A,C)=>E.createElement("directionalLight",{key:C,castShadow:i,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:f/d},E.createElement("orthographicCamera",{attach:"shadow-camera",args:[-n,n,n,-n,a,r]}))))});class dZ{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new Lt,this.clearAlpha=0;const a={type:Ti,magFilter:Wi,minFilter:Wi};this.progressiveLightMap1=new Ea(this.res,this.res,a),this.progressiveLightMap2=new Ea(this.res,this.res,a),this.discardMat=new zY,this.targetMat=new m3({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=r=>{r.vertexShader=`varying vec2 vUv;
`+r.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=r.fragmentShader.indexOf("void main() {");r.fragmentShader=`varying vec2 vUv;
`+r.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+r.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,r.uniforms.previousShadowMap=this.previousShadowMap,r.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{oZ(e)?this.meshes.push({object:e,material:e.material}):rZ(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,a=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,r=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=a.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=r}}const fZ={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function hZ({radius:i,adjustCamera:e}){const t=FY();return E.useEffect(()=>{e&&t.refresh().clip().fit()},[i,e]),null}function Ci({children:i,center:e,adjustCamera:t=!0,intensity:n=.5,shadows:a="contact",environment:r="city",preset:o="rembrandt",...l}){var u,d,f,m,x,g,v,M;const _=typeof o=="string"?fZ[o]:o,[{radius:S,height:j},A]=E.useState({radius:0,width:0,height:0,depth:0}),C=(u=a==null?void 0:a.bias)!==null&&u!==void 0?u:-1e-4,N=(d=a==null?void 0:a.normalBias)!==null&&d!==void 0?d:0,R=(f=a==null?void 0:a.size)!==null&&f!==void 0?f:1024,O=(m=a==null?void 0:a.offset)!==null&&m!==void 0?m:0,U=a==="contact"||(a==null?void 0:a.type)==="contact",z=a==="accumulative"||(a==null?void 0:a.type)==="accumulative",I={...typeof a=="object"?a:{}},V=r?typeof r=="string"?{preset:r}:r:null,F=E.useCallback(q=>{const{width:W,height:ie,depth:B,boundingSphere:J}=q;A({radius:J.radius,width:W,height:ie,depth:B}),e!=null&&e.onCentered&&e.onCentered(q)},[]);return E.createElement(E.Fragment,null,E.createElement("ambientLight",{intensity:n/3}),E.createElement("spotLight",{penumbra:1,position:[_.main[0]*S,_.main[1]*S,_.main[2]*S],intensity:n*2,castShadow:!!a,"shadow-bias":C,"shadow-normalBias":N,"shadow-mapSize":R}),E.createElement("pointLight",{position:[_.fill[0]*S,_.fill[1]*S,_.fill[2]*S],intensity:n}),E.createElement(BY,wa({fit:!!t,clip:!!t,margin:Number(t),observe:!0},l),E.createElement(hZ,{radius:S,adjustCamera:t}),E.createElement(V0,wa({},e,{position:[0,O/2,0],onCentered:F}),i)),E.createElement("group",{position:[0,-j/2-O/2,0]},U&&E.createElement(JR,wa({scale:S*4,far:S,blur:2},I)),z&&E.createElement(cZ,wa({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:S*4},I),E.createElement(uZ,{amount:(x=I.amount)!==null&&x!==void 0?x:8,radius:(g=I.radius)!==null&&g!==void 0?g:S,ambient:(v=I.ambient)!==null&&v!==void 0?v:.5,intensity:(M=I.intensity)!==null&&M!==void 0?M:1,position:[_.main[0]*S,_.main[1]*S,_.main[2]*S],size:S*4,bias:-C,mapSize:R}))),r&&E.createElement(aZ,V))}class mZ extends Zi{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${zb>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const pZ=i=>new Q().setFromSpherical(new Oy(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),xZ=E.forwardRef(({radius:i=100,depth:e=50,count:t=5e3,saturation:n=0,factor:a=4,fade:r=!1,speed:o=1},l)=>{const u=E.useRef(null),[d,f,m]=E.useMemo(()=>{const g=[],v=[],M=Array.from({length:t},()=>(.5+.5*Math.random())*a),_=new Lt;let S=i+e;const j=e/t;for(let A=0;A<t;A++)S-=j*Math.random(),g.push(...pZ(S).toArray()),_.setHSL(A/t,n,.9),v.push(_.r,_.g,_.b);return[new Float32Array(g),new Float32Array(v),new Float32Array(M)]},[t,e,a,i,n]);Yt(g=>u.current&&(u.current.uniforms.time.value=g.clock.elapsedTime*o));const[x]=E.useState(()=>new mZ);return E.createElement("points",{ref:l},E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[f,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1]})),E.createElement("primitive",{ref:u,object:x,attach:"material",blending:Wv,"uniforms-fade-value":r,depthWrite:!1,transparent:!0,vertexColors:!0}))}),Ix=({children:i,variant:e="primary",size:t="md",className:n="",...a})=>{const r="font-bold rounded-2xl shadow-[0_4px_0_rgba(0,0,0,0.2)] active:shadow-none active:translate-y-1 transition-all flex items-center justify-center gap-2",o={primary:"bg-blue-500 text-white hover:bg-blue-600",secondary:"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200",success:"bg-green-500 text-white hover:bg-green-600",danger:"bg-red-500 text-white hover:bg-red-600"},l={sm:"px-3 py-1 text-sm",md:"px-6 py-3 text-lg",lg:"px-8 py-4 text-xl"};return s.jsx("button",{className:`${r} ${o[e]} ${l[t]} ${n}`,...a,children:i})},gZ={:{title:"",concept:"",keyPoints:["6","","21","4"],funFact:"4500",icon:""},:{title:"",concept:"",keyPoints:["XYZ","","(x,y,z)",""],funFact:"GPS",icon:""},:{title:"",concept:"",keyPoints:[" =     ","","",""],funFact:"2627",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"XYZ",keyPoints:["X","Y","Z","90180270"],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["11","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"CTX",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","","Z"],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","","3D"],funFact:"3D",icon:""},:{title:"",concept:"",keyPoints:["","","180",""],funFact:"6",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"3D",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"30000",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"''",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"CT",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"3D",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["90","","",""],funFact:"7",icon:""},:{title:"",concept:"",keyPoints:["3","2","1",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["1","2","",""],funFact:"1500",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"''''",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"7",icon:""},:{title:"",concept:"7",keyPoints:["162534","","",""],funFact:"5000",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"DNA",icon:""},:{title:"",concept:"",keyPoints:["","","","3D"],funFact:"3D",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"11",icon:""},:{title:"",concept:"120",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"(MRI)",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"(x,y,z)",keyPoints:["X","Y","Z","(0,0,0)"],funFact:"GPS",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"2012",icon:""},:{title:"",concept:"",keyPoints:[" =     ","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["X","Y","Z",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"3D",keyPoints:["","","",""],funFact:"3D",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"X",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"''",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"Photoshop",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"3D",icon:""},:{title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""}},vZ={title:"",concept:"",keyPoints:["","","",""],funFact:"",icon:""},tt=({title:i,onBack:e,onRestart:t,instruction:n,score:a,children:r})=>{const[o,l]=E.useState(!0),u=gZ[i]||vZ;return s.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 overflow-hidden",children:[o&&s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden max-h-[90vh] flex flex-col animate-in fade-in zoom-in duration-300",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-5 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 opacity-20",children:s.jsx(Ww,{size:120})}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Zp,{size:24}),s.jsx("span",{className:"text-sm font-medium opacity-90",children:""})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-4xl",children:u.icon}),s.jsx("h2",{className:"text-2xl font-black",children:u.title})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4 border-2 border-blue-100",children:[s.jsxs("h3",{className:"font-bold text-blue-700 mb-2 flex items-center gap-2",children:[s.jsx(Xy,{size:18}),""]}),s.jsx("p",{className:"text-slate-700 leading-relaxed text-sm",children:u.concept})]}),s.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4 border-2 border-purple-100",children:[s.jsx("h3",{className:"font-bold text-purple-700 mb-3",children:" "}),s.jsx("ul",{className:"space-y-2",children:u.keyPoints.map((d,f)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[s.jsx("span",{className:"bg-purple-200 text-purple-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:f+1}),s.jsx("span",{children:d})]},f))})]}),s.jsxs("div",{className:"bg-amber-50 rounded-2xl p-4 border-2 border-amber-200",children:[s.jsx("h3",{className:"font-bold text-amber-700 mb-2",children:" "}),s.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:u.funFact})]})]}),s.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-200",children:s.jsxs("button",{onClick:()=>l(!1),className:"w-full py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl font-bold text-lg shadow-lg active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[s.jsx(Ww,{size:20}),""]})})]})}),s.jsxs("header",{className:"flex-none z-20 p-3 flex justify-between items-center bg-white/80 backdrop-blur-md border-b border-slate-200 shadow-sm",children:[s.jsxs(Ix,{variant:"secondary",size:"sm",onClick:e,className:"!py-1.5 !px-3 shadow-sm border-slate-300",children:[s.jsx(ud,{size:20}),s.jsx("span",{className:"hidden sm:inline ml-1 font-bold text-slate-600",children:""})]}),a!==void 0&&s.jsxs("div",{className:"bg-yellow-100 border-2 border-yellow-300 text-yellow-600 px-4 py-1 rounded-full font-black text-lg shadow-inner",children:[" ",a]}),s.jsx("div",{className:"w-[60px] flex justify-end",children:t&&s.jsx(Ix,{variant:"secondary",size:"sm",onClick:t,className:"!p-2 shadow-sm border-slate-300",children:s.jsx(MA,{size:20})})})]}),n&&s.jsx("div",{className:"flex-none z-10 bg-slate-50 pb-2 pt-2 px-4 flex justify-center",children:s.jsx("div",{className:"bg-white px-5 py-2.5 rounded-2xl shadow-sm border-2 border-blue-100 max-w-full",children:s.jsx("h2",{className:"text-lg sm:text-xl font-black text-slate-700 text-center leading-tight",children:n})})}),s.jsx("div",{className:"flex-1 w-full relative min-h-0 bg-slate-50",children:r})]})},yZ=({type:i,color:e,position:t,onClick:n,active:a})=>{const r=E.useRef(null),[o,l]=E.useState(!1);bl(o),Yt(d=>{if(r.current){r.current.rotation.y+=.01,r.current.rotation.x=Math.sin(d.clock.elapsedTime*.5)*.1;const f=a?1.2:o?1.1:1;r.current.scale.lerp(new Q(f,f,f),.1)}});const u=(()=>{switch(i){case"cube":return s.jsx("boxGeometry",{args:[1.5,1.5,1.5]});case"sphere":return s.jsx("sphereGeometry",{args:[1,32,32]});case"cone":return s.jsx("coneGeometry",{args:[1,2,32]});case"cylinder":return s.jsx("cylinderGeometry",{args:[.8,.8,1.5,32]});case"torus":return s.jsx("torusGeometry",{args:[.8,.3,16,32]});default:return s.jsx("boxGeometry",{})}})();return s.jsxs("group",{position:t,children:[s.jsx(qa,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:s.jsxs("mesh",{ref:r,onClick:d=>{d.stopPropagation(),n()},onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:[u,s.jsx("meshStandardMaterial",{color:e,roughness:.3,metalness:.1})]})}),s.jsx(JR,{position:[0,-1.5,0],opacity:.4,scale:5,blur:2.5,far:4})]})},bZ=({options:i,onChoice:e})=>{const{viewport:t}=bs(),n=t.height>t.width;return s.jsx("group",{position:[0,n?0:-.5,0],children:i.map((a,r)=>{const o=n?[0,(1-r)*2.8,0]:[(r-1)*2.8,0,0];return s.jsx(yZ,{type:a.type,color:a.color,position:o,onClick:()=>e(a.type),active:!1},a.id)})})},MZ=({onBack:i})=>{const[e,t]=E.useState(0),[n,a]=E.useState("cube"),[r,o]=E.useState([]),[l,u]=E.useState("none"),d=()=>{const x=[...["cube","sphere","cone","cylinder","torus"]].sort(()=>.5-Math.random()).slice(0,3),g=x[Math.floor(Math.random()*x.length)],v=x.map((M,_)=>({type:M,color:Ot[Math.floor(Math.random()*Ot.length)],id:Math.random()}));a(g),o(v),u("none")};E.useEffect(()=>{d()},[]);const f=m=>{l==="none"&&(m===n?(u("correct"),t(x=>x+1),setTimeout(()=>d(),1500)):(u("wrong"),setTimeout(()=>u("none"),1e3)))};return s.jsxs(tt,{title:"",onBack:i,score:e,instruction:`${XG[n]}`,children:[l==="correct"&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:s.jsx("div",{className:"text-6xl animate-bounce",children:" ! "})}),l==="wrong"&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:s.jsx("div",{className:"text-6xl animate-pulse",children:" "})}),s.jsxs(Ue,{camera:{position:[0,0,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("pointLight",{position:[-10,-10,-5],intensity:.5,color:"purple"}),s.jsx(bZ,{options:r,onChoice:f})]})]})},SZ=({found:i,onFind:e})=>{const t=E.useRef(null),[n,a]=E.useState(!1);return bl(n),Yt(r=>{if(t.current){t.current.rotation.z+=.05;const o=i?2:n?1.2:1;t.current.scale.lerp(new Q(o,o,o),.1)}}),s.jsxs("group",{ref:t,onClick:r=>{r.stopPropagation(),e()},onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),children:[s.jsxs("mesh",{children:[s.jsx("octahedronGeometry",{args:[.3,0]}),s.jsx("meshStandardMaterial",{color:"#FFD700",emissive:"#FFA500",emissiveIntensity:2,toneMapped:!1})]}),s.jsx("pointLight",{color:"#FFD700",distance:1,intensity:5})]})},_Z=({children:i})=>{const e=E.useRef(null);return s.jsxs("group",{ref:e,children:[s.jsxs("mesh",{children:[s.jsx("dodecahedronGeometry",{args:[1.5,0]}),s.jsx("meshStandardMaterial",{color:"#6366f1",roughness:.4})]}),s.jsxs("mesh",{position:[0,1.2,0],children:[s.jsx("cylinderGeometry",{args:[.2,.2,.5]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[1.2,0,0],rotation:[0,0,1.57],children:[s.jsx("torusGeometry",{args:[.3,.1,16,32]}),s.jsx("meshStandardMaterial",{color:"#10b981"})]}),i]})},wZ=({onBack:i})=>{const[e,t]=E.useState(0),[n,a]=E.useState([0,0,-1.6]),[r,o]=E.useState(!1),l=()=>{o(!1);const d=Math.random()*Math.PI*2,f=Math.acos(Math.random()*2-1),m=1.6,x=m*Math.sin(f)*Math.cos(d),g=m*Math.sin(f)*Math.sin(d),v=m*Math.cos(f);a([x,g,v])};E.useEffect(()=>{l()},[]);const u=()=>{r||(o(!0),t(d=>d+1),setTimeout(l,1500))};return s.jsxs(tt,{title:"",onBack:i,score:e,instruction:"",children:[r&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:s.jsx("div",{className:"text-6xl animate-ping",children:""})}),s.jsxs(Ue,{camera:{position:[0,0,6.5],fov:50},children:[s.jsx("color",{attach:"background",args:["#1e1b4b"]}),s.jsx(xZ,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),s.jsx("ambientLight",{intensity:.4}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("group",{children:s.jsx(_Z,{children:s.jsx("group",{position:n,children:s.jsx(SZ,{found:r,onFind:u})})})}),s.jsx(ht,{enablePan:!1,enableZoom:!1,rotateSpeed:.8})]})]})},jZ=({count:i})=>{const e=E.useMemo(()=>{const t=[],n=new Set;t.push([0,.5,0]),n.add("0,0,0");let a=1;for(;a<i;){const r=Math.floor(Math.random()*t.length),[o,l,u]=t[r],f=[[0,1,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1]].map(([m,x,g])=>[o+m,l+x,u+g]).filter(([m,x,g])=>!n.has(`${Math.round(m)},${Math.round(x-.5)},${Math.round(g)}`));if(f.length>0){const m=f[Math.floor(Math.random()*f.length)];t.push(m),n.add(`${Math.round(m[0])},${Math.round(m[1]-.5)},${Math.round(m[2])}`),a++}}return t},[i]);return s.jsx("group",{children:e.map((t,n)=>s.jsxs("mesh",{position:t,castShadow:!0,receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:Ot[n%Ot.length],roughness:.1,metalness:.1}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"black",linewidth:2})]})]},n))})},EZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(3),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=Math.min(10,3+Math.floor(e/2));a(m);const x=new Set;for(x.add(m);x.size<4;){const g=Math.floor(Math.random()*5)-2,v=m+g;v>0&&v!==m&&x.add(v)}o(Array.from(x).sort((g,v)=>g-v)),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{m===n?(u(" !"),setTimeout(()=>{t(x=>x+1)},1500)):u(" ?")};return s.jsxs(tt,{title:"",onBack:i,instruction:"",children:[s.jsxs(Ue,{shadows:!0,camera:{position:[5,5,5],fov:45},children:[s.jsx("color",{attach:"background",args:["#f0f9ff"]}),s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(jZ,{count:n})}),s.jsx(Gi,{infiniteGrid:!0,fadeDistance:30,sectionColor:"#4facfe",cellColor:"#00f2fe"}),s.jsx(ht,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI/2.2})]}),s.jsxs("div",{className:"absolute bottom-6 left-0 right-0 p-4 flex flex-col items-center gap-4 pointer-events-none",children:[l&&s.jsx("div",{className:"text-2xl font-bold text-slate-700 bg-white/90 backdrop-blur px-4 py-2 rounded-xl shadow-md",children:l}),s.jsx("div",{className:"flex gap-3 flex-wrap justify-center w-full max-w-sm pointer-events-auto",children:r.map(m=>s.jsx(Ix,{size:"lg",onClick:()=>f(m),className:"w-16 h-16 sm:w-20 sm:h-20 rounded-2xl text-2xl shadow-lg border-b-4 border-blue-700 active:border-b-0 active:translate-y-1",children:m},m))})]})]})},TZ=({type:i})=>{const e=E.useRef(null);Yt(n=>{e.current&&(e.current.rotation.x=Math.sin(n.clock.elapsedTime*.5)*.2,e.current.rotation.y+=.01)});const t=s.jsx("meshStandardMaterial",{color:"#6366f1",roughness:.3,metalness:.1});switch(i){case"cylinder":return s.jsxs("mesh",{ref:e,children:[s.jsx("cylinderGeometry",{args:[1,1,2.5]}),t]});case"cone":return s.jsxs("mesh",{ref:e,children:[s.jsx("coneGeometry",{args:[1.2,2.5]}),t]});case"cube":return s.jsxs("mesh",{ref:e,children:[s.jsx("boxGeometry",{args:[2,2,2]}),t]});case"sphere":return s.jsxs("mesh",{ref:e,children:[s.jsx("sphereGeometry",{args:[1.3]}),t]});default:return null}},AZ=({type:i})=>{const e={width:"70%",height:"70%",fill:"#475569"};switch(i){case"circle":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("circle",{cx:"50",cy:"50",r:"45"})});case"square":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("rect",{x:"10",y:"10",width:"80",height:"80"})});case"rect":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("rect",{x:"20",y:"5",width:"60",height:"90"})});case"triangle":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("polygon",{points:"50,10 10,90 90,90"})})}},CZ=({question:i})=>i?s.jsxs("group",{position:[0,-.5,0],children:[s.jsx(qa,{floatIntensity:.2,rotationIntensity:.2,children:s.jsx(TZ,{type:i.shape})}),s.jsxs(gs,{position:i.view==="top"?[0,2.8,0]:[2.5,0,0],center:!0,zIndexRange:[100,0],children:[s.jsx("div",{className:`text-4xl animate-bounce filter drop-shadow-md ${i.view==="side"?"-rotate-90":""}`,children:""}),s.jsx("div",{className:"bg-white/90 px-2 py-1 rounded text-sm font-bold text-indigo-600 w-16 text-center mt-1 shadow-sm border border-indigo-100",children:i.view==="top"?"":""})]})]}):null,NZ=({onBack:i})=>{const[e,t]=E.useState(null),[n,a]=E.useState(0),[r,o]=E.useState("none"),[l,u]=E.useState([]),d=()=>{const m=["cylinder","cone","cube","sphere"],x=m[Math.floor(Math.random()*m.length)],g=["top","side"],v=g[Math.floor(Math.random()*g.length)];let M="circle";x==="cube"?M="square":x==="sphere"?M="circle":x==="cylinder"?M=v==="top"?"circle":"rect":x==="cone"&&(M=v==="top"?"circle":"triangle"),t({shape:x,view:v,correctAnswer:M});const S=["circle","square","rect","triangle"].filter(j=>j!==M).sort(()=>.5-Math.random()).slice(0,2);u([M,...S].sort(()=>.5-Math.random())),o("none")};E.useEffect(()=>{d()},[]);const f=m=>{r==="none"&&(m===(e==null?void 0:e.correctAnswer)?(o("correct"),a(x=>x+1),setTimeout(d,1500)):(o("wrong"),setTimeout(()=>o("none"),1e3)))};return s.jsxs(tt,{title:"",onBack:i,score:n,instruction:(e==null?void 0:e.view)==="top"?"":"",children:[s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("color",{attach:"background",args:["#e0e7ff"]}),s.jsx("ambientLight",{intensity:.6}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(CZ,{question:e}),s.jsx(ht,{minPolarAngle:0,maxPolarAngle:Math.PI/1.5,enabled:!0})]}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 p-4 flex justify-center gap-3 z-20",children:l.map((m,x)=>s.jsx("button",{onClick:()=>f(m),className:`
              w-20 h-20 sm:w-24 sm:h-24 bg-white rounded-2xl shadow-xl border-b-4 transition-all transform active:scale-95 flex items-center justify-center
              ${r==="correct"&&m===(e==null?void 0:e.correctAnswer)?"border-green-500 bg-green-50":"border-slate-200"}
              ${r==="wrong"&&m!==(e==null?void 0:e.correctAnswer)?"opacity-50":""}
            `,children:s.jsx(AZ,{type:m})},x))}),r==="correct"&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-30",children:s.jsx("div",{className:"text-7xl animate-bounce drop-shadow-lg",children:""})})]})},RZ=i=>{const e=[[0,0,0]],t=new Set;t.add("0,0,0");for(let n=1;n<i;n++){const a=Math.floor(Math.random()*e.length),[r,o,l]=e[a],d=[[0,1,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1]].map(([f,m,x])=>[r+f,o+m,l+x]).filter(([f,m,x])=>!t.has(`${f},${m},${x}`));if(d.length>0){const f=d[Math.floor(Math.random()*d.length)];e.push(f),t.add(`${f[0]},${f[1]},${f[2]}`)}}return e},RT=({positions:i,position:e=[0,0,0],scale:t=1,onClick:n,spin:a=!1})=>{const r=E.useRef(null),[o,l]=E.useState(!1);return bl(!!n&&o),Yt(u=>{if(a&&r.current&&(r.current.rotation.y+=.005),r.current){const d=o?t*1.1:t;r.current.scale.lerp(new Q(d,d,d),.1)}}),s.jsx("group",{ref:r,position:e,onClick:u=>{u.stopPropagation(),n==null||n()},onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:i.map((u,d)=>s.jsxs("mesh",{position:u,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[d%Ot.length],roughness:.2}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.3)",linewidth:1})]})]},d))})},DZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=4+Math.floor(e/2),v=RZ(g);a(v);const M=[];M.push([...v]);const _=[...v];_.length>1&&_.pop(),M.push(_);const S=[...v],j=S[S.length-1];S.push([j[0],j[1]+1,j[2]]),M.push(S);const A=M.map(N=>({value:N,sort:Math.random()})).sort((N,R)=>N.sort-R.sort).map(({value:N})=>N);o(A);const C=A.findIndex(N=>N.length===v.length);u(C),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>{t(v=>v+1)},1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[40%] w-full bg-blue-50/50 relative border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:40},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{environment:"city",intensity:.5,adjustCamera:!1,children:s.jsx(RT,{positions:n,spin:!0})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:2,enableZoom:!1,enablePan:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-yellow-400 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-8 py-4 rounded-3xl shadow-2xl text-3xl font-black text-slate-700 animate-bounce",children:d})}),s.jsxs(Ue,{camera:{position:[0,0,16],fov:45},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,0,0],children:r.map((g,v)=>s.jsx(RT,{positions:g,position:[(v-1)*4.5,0,0],scale:.8,onClick:()=>x(v)},v))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},LZ=({position:i,color:e})=>s.jsxs("mesh",{position:i,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e,roughness:.2}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.2)",linewidth:1})]})]}),DT=({positions:i,position:e=[0,0,0],scale:t=1,onClick:n,isGhost:a=!1})=>{const r=E.useRef(null),[o,l]=E.useState(!1);return bl(!!n&&o),Yt(()=>{if(r.current){n&&(r.current.rotation.y+=.005);const u=o?t*1.1:t;r.current.scale.lerp(new Q(u,u,u),.1)}}),s.jsx("group",{ref:r,position:e,onClick:u=>{u.stopPropagation(),n==null||n()},onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:i.map((u,d)=>s.jsx(LZ,{position:u,color:a?"#ddd":Ot[d%Ot.length]},d))})},UZ=({onBack:i})=>{const[e,t]=E.useState(1),[n]=E.useState(3),[a,r]=E.useState([]),[o,l]=E.useState([]),[u,d]=E.useState([]),[f,m]=E.useState(0),[x,g]=E.useState(""),v=()=>{const _=[],S=(n-1)/2;for(let F=0;F<n;F++)for(let q=0;q<n;q++)for(let W=0;W<n;W++)_.push([F-S,q-S,W-S]);const j=_.find(F=>Math.abs(F[0])===S&&Math.abs(F[1])===S&&Math.abs(F[2])===S);if(!j)return;const A=[j],C=2+Math.floor(Math.random()*2);for(;A.length<C;){const F=A[Math.floor(Math.random()*A.length)],W=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(ie=>[F[0]+ie[0],F[1]+ie[1],F[2]+ie[2]]).filter(ie=>Math.abs(ie[0])<=S&&Math.abs(ie[1])<=S&&Math.abs(ie[2])<=S&&!A.some(B=>B[0]===ie[0]&&B[1]===ie[1]&&B[2]===ie[2]));if(W.length>0)A.push(W[Math.floor(Math.random()*W.length)]);else break}const N=_.filter(F=>!A.some(q=>q[0]===F[0]&&q[1]===F[1]&&q[2]===F[2]));r(N),l(A);const O=(F=>{if(F.length===0)return F;const q=F.reduce((B,J)=>B+J[0],0)/F.length,W=F.reduce((B,J)=>B+J[1],0)/F.length,ie=F.reduce((B,J)=>B+J[2],0)/F.length;return F.map(B=>[B[0]-Math.round(q),B[1]-Math.round(W),B[2]-Math.round(ie)])})(A),U=[...O];U.push([U[0][0],U[0][1]+1,U[0][2]]);const z=O.slice(0,Math.max(1,O.length-1));z.length===O.length&&z.push([0,2,0]);const V=[O,U,z].map(F=>({val:F,sort:Math.random()})).sort((F,q)=>F.sort-q.sort).map(({val:F})=>F);d(V),m(V.indexOf(O)),g("")};E.useEffect(()=>{v()},[e]);const M=_=>{_===f?(g(" !"),setTimeout(()=>t(S=>S+1),1500)):(g(" "),setTimeout(()=>g(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[45%] w-full relative bg-teal-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},shadows:!0,children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(DT,{positions:a})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-teal-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[x&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-xl text-2xl font-bold text-teal-600 animate-bounce",children:x})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:50},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:u.map((_,S)=>s.jsx(DT,{positions:_,position:[(S-1)*3.5,0,0],scale:.8,onClick:()=>M(S)},S))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},LT=({positions:i,rotation:e=[0,0,0],mirror:t=!1,scale:n=1,onClick:a,autoRotate:r=!1})=>{const o=E.useRef(null),[l,u]=E.useState(!1);return bl(!!a&&l),Yt(()=>{if(o.current){r&&(o.current.rotation.y+=.01,o.current.rotation.z+=.005);const d=l?n*1.1:n;o.current.scale.lerp(new Q(t?-d:d,d,d),.1),r||(o.current.rotation.x=e[0],o.current.rotation.y=e[1],o.current.rotation.z=e[2])}}),s.jsx("group",{ref:o,onClick:d=>{d.stopPropagation(),a==null||a()},onPointerOver:()=>u(!0),onPointerOut:()=>u(!1),children:i.map((d,f)=>s.jsxs("mesh",{position:d,children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:Ot[f%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.9,.9,.9)]}),s.jsx("lineBasicMaterial",{color:"black",linewidth:1,opacity:.2,transparent:!0})]})]},f))})},PZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=[[0,0,0]],v=4+Math.min(2,Math.floor(e/2)),M=new Set(["0,0,0"]);for(let U=1;U<v;U++){const z=g[Math.floor(Math.random()*g.length)],V=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1]].map(F=>[z[0]+F[0],z[1]+F[1],z[2]+F[2]]).filter(F=>!M.has(`${F[0]},${F[1]},${F[2]}`));if(V.length>0){const F=V[Math.floor(Math.random()*V.length)];g.push(F),M.add(`${F[0]},${F[1]},${F[2]}`)}}const _=g.reduce((U,z)=>U+z[0],0)/v,S=g.reduce((U,z)=>U+z[1],0)/v,j=g.reduce((U,z)=>U+z[2],0)/v,A=g.map(U=>[U[0]-_,U[1]-S,U[2]-j]);a(A);const C={rotation:[Math.PI*(Math.floor(Math.random()*4)/2),Math.PI*(Math.floor(Math.random()*4)/2),0],mirror:!1,wrongShape:!1},N={rotation:[Math.random(),Math.random(),0],mirror:!0,wrongShape:!1},R={rotation:[Math.random(),Math.random(),0],mirror:!1,wrongShape:!0},O=[C,N,R].map(U=>({val:U,sort:Math.random()})).sort((U,z)=>U.sort-z.sort).map(({val:U})=>U);o(O),u(O.indexOf(C)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" "),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[45%] w-full relative bg-pink-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,0,7],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(LT,{positions:n,autoRotate:!0})})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-pink-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:" ()"})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-xl text-2xl font-bold text-pink-600 animate-bounce",children:d})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:r.map((g,v)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:40},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(LT,{positions:g.wrongShape&&n.length>1?[...n.slice(0,n.length-1),[n[0][0],n[0][1]+2,n[0][2]]]:n,rotation:g.rotation,mirror:g.mirror,scale:.6,onClick:()=>x(v)})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-pink-100 text-pink-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+v)})})]},v))})]})]})})},OZ=[{index:2,x:0,y:1,name:"Top"},{index:1,x:-1,y:0,name:"Left"},{index:4,x:0,y:0,name:"Front"},{index:0,x:1,y:0,name:"Right"},{index:3,x:0,y:-1,name:"Bottom"},{index:5,x:0,y:-2,name:"Back"}],zZ=({colors:i})=>s.jsx("group",{rotation:[-Math.PI/2,0,0],scale:.8,children:OZ.map(e=>s.jsxs("mesh",{position:[e.x*1.05,e.y*1.05,0],children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx("meshBasicMaterial",{color:i[e.index],side:Ms}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new Ta(1,1)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.3)",linewidth:1})]}),s.jsx(gs,{center:!0,transform:!0,position:[0,0,.1],pointerEvents:"none"})]},e.index))}),GZ=({colors:i,onClick:e,scale:t=1})=>{const n=E.useRef(null);Yt(()=>{n.current&&(n.current.rotation.x+=.005,n.current.rotation.y+=.01)});const a=i.map(r=>new yi({color:r,roughness:.2}));return s.jsx("mesh",{ref:n,onClick:r=>{r.stopPropagation(),e()},scale:[t,t,t],material:a,children:s.jsx("boxGeometry",{args:[1.5,1.5,1.5]})})},IZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=[...Ot].sort(()=>.5-Math.random());a(g);const v=[...g],M=[...g];[M[2],M[3]]=[M[3],M[2]];const _=[...g];[_[4],_[0]]=[_[0],_[4]];const j=[v,M,_].map(A=>({val:A,sort:Math.random()})).sort((A,C)=>A.sort-C.sort).map(({val:A})=>A);o(j),u(j.indexOf(v)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[45%] w-full relative bg-emerald-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,5,0],fov:45},children:[s.jsx("ambientLight",{intensity:1}),s.jsx(zZ,{colors:n}),s.jsx(ht,{enableRotate:!1,enableZoom:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-emerald-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-xl text-2xl font-bold text-emerald-600 animate-bounce",children:d})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:r.map((g,v)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,5],fov:40},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(qa,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:s.jsx(GZ,{colors:g,onClick:()=>x(v),scale:.8})})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-emerald-100 text-emerald-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+v)})})]},v))})]})]})})},kZ=({shape:i,cut:e})=>{const t=E.useRef(null);Yt(u=>{t.current&&(t.current.rotation.y=u.clock.elapsedTime*.3)});const n=new yi({color:"#fb7185",roughness:.3,metalness:.1,side:Ms}),a=s.jsx("planeGeometry",{args:[4,4]}),r=new vl({color:"#38bdf8",transparent:!0,opacity:.4,side:Ms,depthWrite:!1});let o;switch(i){case"cylinder":o=s.jsx("cylinderGeometry",{args:[1,1,2.5]});break;case"cone":o=s.jsx("coneGeometry",{args:[1.2,2.5]});break;case"sphere":o=s.jsx("sphereGeometry",{args:[1.3]});break;case"cube":o=s.jsx("boxGeometry",{args:[2,2,2]});break}const l=e==="horizontal"?[-Math.PI/2,0,0]:[0,Math.PI/2,0];return s.jsxs("group",{ref:t,children:[s.jsx("mesh",{material:n,children:o}),s.jsxs("mesh",{rotation:l,children:[a,s.jsx("primitive",{object:r})]}),s.jsxs("mesh",{rotation:l,children:[s.jsx("ringGeometry",{args:[0,0]})," "]})]})},BZ=({type:i})=>{const e={width:"60%",height:"60%",fill:"#475569"};switch(i){case"circle":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("circle",{cx:"50",cy:"50",r:"45"})});case"square":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("rect",{x:"10",y:"10",width:"80",height:"80"})});case"rect":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("rect",{x:"20",y:"5",width:"60",height:"90"})});case"triangle":return s.jsx("svg",{style:e,viewBox:"0 0 100 100",children:s.jsx("polygon",{points:"50,10 10,90 90,90"})})}},FZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(null),[r,o]=E.useState([]),[l,u]=E.useState(""),d=[{shape:"cube",cut:"horizontal",answer:"square",difficulty:1},{shape:"sphere",cut:"horizontal",answer:"circle",difficulty:1},{shape:"cylinder",cut:"horizontal",answer:"circle",difficulty:1},{shape:"sphere",cut:"vertical",answer:"circle",difficulty:2},{shape:"cube",cut:"vertical",answer:"square",difficulty:2},{shape:"cylinder",cut:"vertical",answer:"rect",difficulty:2},{shape:"cone",cut:"horizontal",answer:"circle",difficulty:3},{shape:"cone",cut:"vertical",answer:"triangle",difficulty:3}],f=()=>{let M,_,S;if(e<=3){const N=d.filter(O=>O.difficulty===1),R=N[(e-1)%N.length];M=R.shape,_=R.cut,S=R.answer}else if(e<=6){const N=d.filter(O=>O.difficulty===2),R=N[(e-4)%N.length];M=R.shape,_=R.cut,S=R.answer}else if(e<=10)if(e<=8){const N=d.filter(O=>O.difficulty===3),R=N[(e-7)%N.length];M=R.shape,_=R.cut,S=R.answer}else{const N=d[Math.floor(Math.random()*d.length)];M=N.shape,_=N.cut,S=N.answer}else{const N=["cylinder","cone","cube","sphere"],R=["horizontal","vertical"];M=N[Math.floor(Math.random()*N.length)],_=R[Math.floor(Math.random()*R.length)],M==="sphere"?S="circle":M==="cube"?S="square":M==="cylinder"?S=_==="horizontal"?"circle":"rect":S=_==="horizontal"?"circle":"triangle"}a({shape:M,cut:_,answer:S});const j=["circle","square","rect","triangle"];let A;e<=3?A=2:e<=6?A=3:A=4;const C=j.filter(N=>N!==S).sort(()=>.5-Math.random()).slice(0,A-1);o([S,...C].sort(()=>.5-Math.random())),u("")},m=()=>e<=3?"":e<=6?"":e<=10?"":"";E.useEffect(()=>{f()},[e]);const x=M=>{M===(n==null?void 0:n.answer)?(u(" !"),setTimeout(()=>t(_=>_+1),1500)):(u(" ?"),setTimeout(()=>u(""),1e3))},g=M=>{switch(M){case"cube":return"";case"sphere":return"";case"cylinder":return"";case"cone":return""}},v=M=>M==="horizontal"?"":"";return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${m()}] - ${n?`${v(n.cut)}${g(n.shape)}`:"..."}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[55%] w-full relative bg-red-50/50",children:s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(qa,{speed:2,rotationIntensity:.2,floatIntensity:.2,children:s.jsx(V0,{children:n&&s.jsx(kZ,{shape:n.shape,cut:n.cut})})}),s.jsx(ht,{enableZoom:!1,enablePan:!1})]})}),s.jsxs("div",{className:"flex-1 relative bg-white border-t-2 border-red-100 p-6",children:[l&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none",children:s.jsx("div",{className:"bg-white/90 backdrop-blur border-2 border-red-200 px-6 py-2 rounded-full text-xl font-bold text-red-600 shadow-lg animate-bounce",children:l})}),s.jsx("div",{className:"grid grid-cols-2 gap-4 h-full content-center max-w-sm mx-auto",children:r.map((M,_)=>s.jsx("button",{onClick:()=>x(M),className:"aspect-square bg-slate-50 border-2 border-slate-200 rounded-2xl flex items-center justify-center hover:bg-red-50 hover:border-red-300 active:scale-95 transition-all shadow-sm",children:s.jsx(BZ,{type:M})},_))})]})]})})},VZ=i=>{const e=[[0,0,0],[1,0,0],[0,1,0]],t=new Set(["0,0,0","1,0,0","0,1,0"]);for(let o=3;o<i;o++){const l=e[Math.floor(Math.random()*e.length)],d=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(f=>[l[0]+f[0],l[1]+f[1],l[2]+f[2]]).filter(f=>!t.has(`${f[0]},${f[1]},${f[2]}`));if(d.length>0){const f=d[Math.floor(Math.random()*d.length)];e.push(f),t.add(`${f[0]},${f[1]},${f[2]}`)}}const n=e.reduce((o,l)=>o+l[0],0)/e.length,a=e.reduce((o,l)=>o+l[1],0)/e.length,r=e.reduce((o,l)=>o+l[2],0)/e.length;return e.map(o=>[o[0]-n,o[1]-a,o[2]-r])},UT=({positions:i,mirror:e=!1,rotateY:t=0,onClick:n,scale:a=1})=>{const r=E.useRef(null),[o,l]=E.useState(!1);return bl(!!n&&o),Yt(()=>{if(r.current){r.current.rotation.y=ks.lerp(r.current.rotation.y,t,.1);const u=o?a*1.1:a,d=new Q(e?-u:u,u,u);r.current.scale.lerp(d,.1)}}),s.jsx("group",{ref:r,onClick:u=>{u.stopPropagation(),n==null||n()},onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:i.map((u,d)=>s.jsxs("mesh",{position:u,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[d%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.3)"})]})]},d))})},HZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=4+Math.floor(e/2),v=VZ(g);a(v);const M={mirror:!0,rotateY:0},j=[M,{mirror:!1,rotateY:Math.PI},{mirror:!1,rotateY:0}].map(A=>({val:A,sort:Math.random()})).sort((A,C)=>A.sort-C.sort).map(({val:A})=>A);o(j),u(j.indexOf(M)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[45%] w-full relative bg-cyan-50/50 border-b-4 border-white",children:s.jsxs(Ue,{camera:{position:[0,2,8],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsxs("group",{position:[-2,0,0],children:[s.jsx(qa,{speed:2,rotationIntensity:.2,floatIntensity:.2,children:s.jsx(UT,{positions:n})}),s.jsx(xs,{position:[0,-2.5,0],fontSize:.5,color:"#0891b2",children:""})]}),s.jsx("group",{position:[0,0,0],children:s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.1,5,5]}),s.jsx("meshPhysicalMaterial",{color:"#a5f3fc",transmission:.5,roughness:0,thickness:2})]})}),s.jsx("group",{position:[2,0,0],children:s.jsx(xs,{fontSize:3,color:"#cbd5e1",children:"?"})}),s.jsx(ht,{enableZoom:!1,enablePan:!1,maxPolarAngle:Math.PI/1.8,minPolarAngle:Math.PI/2.5})]})}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-xl text-2xl font-bold text-cyan-600 animate-bounce",children:d})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:r.map((g,v)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[0,5,5],intensity:1}),s.jsx(UT,{positions:n,mirror:g.mirror,rotateY:g.rotateY,scale:.6,onClick:()=>x(v)})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-cyan-100 text-cyan-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+v)})})]},v))})]})]})})},qZ=({heightMap:i})=>{const e=[];return i.forEach((t,n)=>{t.forEach((a,r)=>{for(let o=0;o<a;o++){const l=r-1,u=n-1,d=o+.5,m=["#86efac","#4ade80","#22c55e","#16a34a"][Math.min(o,3)];e.push(s.jsxs("mesh",{position:[l,d,u],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:m}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.2)",linewidth:1})]})]},`${r}-${n}-${o}`))}})}),e.push(s.jsxs("mesh",{position:[0,-.05,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[3.2,3.2]}),s.jsx("meshStandardMaterial",{color:"#f1f5f9"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new Ta(3.2,3.2)]}),s.jsx("lineBasicMaterial",{color:"#cbd5e1"})]})]},"base")),s.jsx("group",{children:e})},XZ=({map:i,onClick:e})=>s.jsx("button",{onClick:e,className:"bg-white p-2 rounded-xl shadow-md border-2 border-slate-200 hover:border-lime-500 hover:bg-lime-50 transition-all active:scale-95 flex flex-col gap-1",children:i.map((t,n)=>s.jsx("div",{className:"flex gap-1",children:t.map((a,r)=>s.jsx("div",{className:`
                w-8 h-8 sm:w-10 sm:h-10 rounded-md flex items-center justify-center font-bold text-lg
                ${a>0?"bg-lime-200 text-lime-800":"bg-slate-100 text-slate-300"}
              `,children:a>0?a:""},r))},n))}),WZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=Array(3).fill(0).map(()=>Array(3).fill(0)),v=3+e;let M=0;for(;M<v;){const O=Math.floor(Math.random()*3),U=Math.floor(Math.random()*3);g[O][U]<4&&(g[O][U]++,M++)}a(g);const _=g,S=g[0].map((O,U)=>g.map(z=>z[U]).reverse()),j=g.map(O=>[...O]);let A=Math.floor(Math.random()*3),C=Math.floor(Math.random()*3);j[A][C]=j[A][C]>0?j[A][C]-1:1;const N=[_,S,j].map(O=>({val:O,sort:Math.random()})).sort((O,U)=>O.sort-U.sort).map(({val:O})=>O);o(N);const R=N.findIndex(O=>JSON.stringify(O)===JSON.stringify(_));u(R),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[50%] w-full relative bg-lime-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,8,8],fov:40},shadows:!0,children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[5,10,5],intensity:1,castShadow:!0}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(qZ,{heightMap:n})}),s.jsx(ht,{minPolarAngle:0,maxPolarAngle:Math.PI/2.2})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-lime-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[d&&s.jsx("div",{className:"absolute -top-16 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white/95 backdrop-blur px-6 py-2 rounded-full border-2 border-lime-400 text-xl font-bold text-lime-700 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex flex-wrap justify-center items-center gap-6 h-full overflow-y-auto",children:r.map((g,v)=>s.jsx(XZ,{map:g,onClick:()=>x(v)},v))})]})]})})},YZ=({shape:i})=>{const e=E.useMemo(()=>{const t=new rc;t.moveTo(-4,-4),t.lineTo(4,-4),t.lineTo(4,4),t.lineTo(-4,4),t.lineTo(-4,-4);const n=new rc,a=1.2;switch(i){case"circle":n.absarc(0,0,a,0,Math.PI*2,!1);break;case"square":n.moveTo(-a,-a),n.lineTo(a,-a),n.lineTo(a,a),n.lineTo(-a,a);break;case"triangle":n.moveTo(0,a),n.lineTo(a,-a),n.lineTo(-a,-a);break;case"cross":const r=.5,o=1.4;n.moveTo(-r,-o),n.lineTo(r,-o),n.lineTo(r,-r),n.lineTo(o,-r),n.lineTo(o,r),n.lineTo(r,r),n.lineTo(r,o),n.lineTo(-r,o),n.lineTo(-r,r),n.lineTo(-o,r),n.lineTo(-o,-r),n.lineTo(-r,-r);break}return t.holes.push(n),new Qx(t,{depth:.5,bevelEnabled:!0,bevelSize:.1,bevelThickness:.1})},[i]);return s.jsx("mesh",{geometry:e,children:s.jsx("meshStandardMaterial",{color:"#ddd6fe",roughness:.1})})},ZZ=({shape:i,onClick:e,scale:t=1})=>{const n=E.useRef(null),[a,r]=E.useState(!1);bl(a),Yt(d=>{if(n.current){n.current.rotation.x=Math.sin(d.clock.elapsedTime)*.5,n.current.rotation.y+=.01;const f=a?t*1.1:t;n.current.scale.lerp(new Q(f,f,f),.1)}});const o=s.jsx("meshStandardMaterial",{color:"#8b5cf6",roughness:.2});let l,u=[0,0,0];switch(i){case"circle":l=s.jsx("cylinderGeometry",{args:[1,1,2]}),u=[Math.PI/2,0,0];break;case"square":l=s.jsx("boxGeometry",{args:[2,2,2]});break;case"triangle":l=s.jsx("coneGeometry",{args:[1.3,2.5,3]});break;case"cross":l=s.jsxs("group",{children:[s.jsxs("mesh",{scale:[1,1,3],children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),o]}),s.jsxs("mesh",{scale:[3,1,1],children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),o]})]});break}if(i==="triangle"){const d=new rc;return d.moveTo(0,1.2),d.lineTo(1.2,-1.2),d.lineTo(-1.2,-1.2),l=s.jsxs("mesh",{rotation:[0,0,0],children:[s.jsx("extrudeGeometry",{args:[d,{depth:2,bevelEnabled:!1}]}),o]}),s.jsx("group",{ref:n,onClick:f=>{f.stopPropagation(),e()},onPointerOver:()=>r(!0),onPointerOut:()=>r(!1),children:s.jsx("group",{position:[0,0,-1],children:l})})}return s.jsx("group",{ref:n,onClick:d=>{d.stopPropagation(),e()},onPointerOver:()=>r(!0),onPointerOut:()=>r(!1),children:i==="cross"?l:s.jsxs("mesh",{rotation:u,children:[l,o]})})},KZ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("circle"),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=["circle","square","triangle","cross"],x=m[Math.floor(Math.random()*m.length)];a(x);const g=m.filter(M=>M!==x).sort(()=>.5-Math.random()).slice(0,2),v=[x,...g].sort(()=>.5-Math.random());o(v),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{m===n?(u(" !"),setTimeout(()=>t(x=>x+1),1500)):(u(" ..."),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[50%] w-full relative bg-violet-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:45},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(qa,{speed:1.5,rotationIntensity:.1,floatIntensity:.2,children:s.jsx(YZ,{shape:n})}),s.jsx(gs,{position:[0,0,2],center:!0,pointerEvents:"none",zIndexRange:[0,0],children:s.jsx("div",{className:"text-6xl opacity-50",children:""})})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-violet-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[l&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-xl text-2xl font-bold text-violet-600 animate-bounce",children:l})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:40},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:r.map((m,x)=>s.jsx("group",{position:[(x-1)*3.5,0,0],children:s.jsx(ZZ,{shape:m,onClick:()=>f(m),scale:.7})},x))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},$R=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:Ot[0]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"black",linewidth:1,opacity:.3,transparent:!0})]})]}),s.jsxs("mesh",{position:[0,.25,.7],rotation:[Math.PI/2,0,0],children:[s.jsx("coneGeometry",{args:[.2,.5]}),s.jsx("meshStandardMaterial",{color:Ot[1]})]}),s.jsxs("mesh",{position:[.7,.25,0],children:[s.jsx("sphereGeometry",{args:[.25]}),s.jsx("meshStandardMaterial",{color:Ot[2]})]}),s.jsxs("mesh",{position:[0,1.25,0],children:[s.jsx("cylinderGeometry",{args:[.1,.1,.5]}),s.jsx("meshStandardMaterial",{color:Ot[3]})]})]}),JZ=({angle:i})=>{const t=Math.sin(i)*3.5,n=Math.cos(i)*3.5,a=i+Math.PI;return s.jsxs("group",{position:[t,1,n],rotation:[0,a,0],children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.6,.4,.2]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsxs("mesh",{position:[0,0,-.2],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.15,.15,.2]}),s.jsx("meshStandardMaterial",{color:"#111"})]}),s.jsxs("mesh",{position:[.2,.25,0],children:[s.jsx("boxGeometry",{args:[.1,.1,.1]}),s.jsx("meshStandardMaterial",{color:"#fff",emissive:"#fff",emissiveIntensity:.5})]})]})},QZ=({angle:i,onClick:e})=>{const n=Math.sin(i)*5,a=Math.cos(i)*5;return s.jsxs("div",{onClick:e,className:"w-full aspect-square bg-white rounded-lg shadow-md border-4 border-white overflow-hidden hover:border-fuchsia-400 active:scale-95 transition-all cursor-pointer relative",children:[s.jsxs(Ue,{camera:{position:[n,2,a],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[2,5,2],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:s.jsx($R,{})}),s.jsx(ht,{enableRotate:!1,enableZoom:!1,enablePan:!1})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/20 to-transparent pointer-events-none"})]})},$Z=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=[0,Math.PI/2,Math.PI,Math.PI*1.5],x=m[Math.floor(Math.random()*m.length)];a(x);const g=m.filter(M=>Math.abs(M-x)>.1).sort(()=>.5-Math.random()).slice(0,2),v=[x,...g].sort(()=>.5-Math.random());o(v),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{m===n?(u(" !"),setTimeout(()=>t(x=>x+1),1500)):(u(" ?"),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[50%] w-full relative bg-fuchsia-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,6,5],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsxs("group",{position:[0,-.5,0],children:[s.jsx($R,{}),s.jsx(JZ,{angle:n}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.01,0],children:[s.jsx("circleGeometry",{args:[4,32]}),s.jsx("meshStandardMaterial",{color:"#fdf4ff"})]})]}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:.5,minPolarAngle:0,maxPolarAngle:Math.PI/2.2})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-fuchsia-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col justify-center",children:[l&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-fuchsia-400 text-xl font-bold text-fuchsia-700 shadow-xl animate-bounce",children:l})}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((m,x)=>s.jsx(QZ,{angle:m,onClick:()=>f(m)},x))}),s.jsx("div",{className:"text-center text-slate-400 text-sm mt-4 pointer-events-none",children:""})]})]})})},m0=({face:i,label:e,onClick:t})=>s.jsxs("button",{onClick:t,className:"bg-white border-2 border-amber-200 rounded-xl p-3 shadow-sm hover:bg-amber-50 active:scale-95 transition-all flex flex-col items-center min-w-[80px]",children:[s.jsx("div",{className:"text-2xl font-black text-amber-600 mb-1",children:e}),s.jsx("div",{className:"text-xs text-slate-400 uppercase",children:i})]}),eK=({path:i,isAnimating:e})=>{const t=E.useRef(null),[n,a]=E.useState(0);return Yt((r,o)=>{!e||t.current}),s.jsxs("group",{ref:t,position:[0,.5,0],children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#fbbf24"})," "]}),s.jsxs("mesh",{position:[0,.51,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.8,.8]}),s.jsx("meshBasicMaterial",{transparent:!0,children:s.jsx("canvasTexture",{attach:"map",image:tK()})})]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"black",linewidth:2})]})]})};function tK(){const i=document.createElement("canvas");i.width=128,i.height=128;const e=i.getContext("2d");if(e){e.fillStyle="#ef4444",e.beginPath();const t=64,n=64,a=5,r=50,o=20;let l=Math.PI/2*3,u=t,d=n;const f=Math.PI/a;e.moveTo(t,n-r);for(let m=0;m<a;m++)u=t+Math.cos(l)*r,d=n+Math.sin(l)*r,e.lineTo(u,d),l+=f,u=t+Math.cos(l)*o,d=n+Math.sin(l)*o,e.lineTo(u,d),l+=f;e.lineTo(t,n-r),e.closePath(),e.fill()}return i}const nK=({path:i})=>{let e=new Q(0,.05,0);const t=[];for(let n=0;n<i.length;n++){const a=i[n];let r=new Q(0,0,0);switch(a){case"forward":r.set(0,0,-1);break;case"backward":r.set(0,0,1);break;case"left":r.set(-1,0,0);break;case"right":r.set(1,0,0);break}e.add(r),t.push(s.jsxs("group",{position:[e.x,.02,e.z],children:[s.jsx(gs,{center:!0,transform:!0,rotation:[-Math.PI/2,0,0],scale:.5,position:[0,0,0],zIndexRange:[0,0],children:s.jsx("div",{className:"flex flex-col items-center justify-center opacity-80",children:s.jsx("div",{className:"text-4xl font-bold text-amber-600 drop-shadow-md",children:n+1})})}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[" ",s.jsx("circleGeometry",{args:[.3,32]}),s.jsx("meshBasicMaterial",{color:"#fcd34d",opacity:.5,transparent:!0})]})]},n))}return s.jsx("group",{children:t})},sK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState("top"),[l,u]=E.useState(""),d=()=>{const x=Math.min(5,1+Math.floor(e/2)),g=[];let v=null;for(let _=0;_<x;_++){const j=["forward","backward","left","right"].filter(C=>!(v==="forward"&&C==="backward"||v==="backward"&&C==="forward"||v==="left"&&C==="right"||v==="right"&&C==="left")),A=j[Math.floor(Math.random()*j.length)];g.push(A),v=A}a(g);let M=new Q(0,1,0);g.forEach(_=>{new Q,_==="forward"?M.applyAxisAngle(new Q(1,0,0),-Math.PI/2):_==="backward"?M.applyAxisAngle(new Q(1,0,0),Math.PI/2):_==="right"?M.applyAxisAngle(new Q(0,0,1),-Math.PI/2):_==="left"&&M.applyAxisAngle(new Q(0,0,1),Math.PI/2),M.x=Math.round(M.x),M.y=Math.round(M.y),M.z=Math.round(M.z)}),M.y===1?o("top"):M.y===-1?o("bottom"):M.z===1?o("front"):M.z===-1?o("back"):M.x===1?o("right"):M.x===-1&&o("left"),u("")};E.useEffect(()=>{d()},[e]);const f=x=>{x===r?(u(" !"),setTimeout(()=>t(g=>g+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},m={forward:"",backward:"",left:"",right:""};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-amber-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,6,5],fov:45},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(eK,{path:n,isAnimating:!1}),s.jsx(nK,{path:n}),s.jsx(Gi,{position:[0,-.01,0],args:[10,10],cellColor:"#e5e7eb",sectionColor:"#d1d5db"}),s.jsx(qa,{floatIntensity:0,rotationIntensity:0}),s.jsx(Ci,{intensity:0,adjustCamera:!1,environment:null})]}),s.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur px-3 py-2 rounded-lg text-sm font-bold text-amber-800 shadow-sm",children:""}),n.map((x,g)=>s.jsxs("div",{className:"bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs font-bold border border-amber-200",children:[g+1,". ",m[x],""]},g))]})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[l&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-400 text-xl font-bold text-amber-600 shadow-xl animate-bounce",children:l})}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 h-full content-center max-w-sm mx-auto",children:[s.jsx(m0,{face:"top",label:"",onClick:()=>f("top")}),s.jsx(m0,{face:"bottom",label:"",onClick:()=>f("bottom")}),s.jsx(m0,{face:"front",label:"",onClick:()=>f("front")}),s.jsx(m0,{face:"back",label:"",onClick:()=>f("back")}),s.jsx(m0,{face:"left",label:"",onClick:()=>f("left")}),s.jsx(m0,{face:"right",label:"",onClick:()=>f("right")})]})]})]})})},nS=({position:i,color:e,id:t,onClick:n})=>s.jsxs("group",{position:i,onClick:a=>{a.stopPropagation(),n()},children:[s.jsxs("mesh",{position:[0,.6,0],children:[s.jsx("cylinderGeometry",{args:[.8,.6,1.2,32]}),s.jsx("meshStandardMaterial",{color:e})]}),s.jsxs("mesh",{position:[0,1.2,0],rotation:[Math.PI/2,0,0],children:[s.jsx("torusGeometry",{args:[.8,.1,16,32]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsx(xs,{position:[0,.6,1],fontSize:.8,color:"white",outlineColor:"black",outlineWidth:.05,children:t})]}),iK=({path:i,color:e})=>{const t=E.useMemo(()=>new md(i),[i]);return s.jsx(lg,{args:[t,64,.2,8,!1],children:s.jsx("meshPhysicalMaterial",{color:e,roughness:.2,clearcoat:1,transparent:!0,opacity:.9,side:Ms})})},aK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(1),[l,u]=E.useState(""),d=()=>{const m=[new Q(-3,-3,0),new Q(0,-3,0),new Q(3,-3,0)];new Q(0,3,0);const x=Math.floor(Math.random()*3);o(x+1);const g=[new Q(-2,3,0),new Q(0,3,0),new Q(2,3,0)],v=[],M=[0,1,2].sort(()=>.5-Math.random()),_=M[1];o(_+1),g.forEach((S,j)=>{const A=m[M[j]],C=[],N=3+Math.floor(e/2);for(let R=1;R<=N;R++){const O=R/(N+1),U=ks.lerp(S.y,A.y,O),z=2.5,I=(Math.random()-.5)*z*2,V=(Math.random()-.5)*z*2;C.push(new Q(I,U,V))}v.push([S,...C,A])}),a(v),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{m===r?(u(" !"),setTimeout(()=>t(x=>x+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full",children:s.jsxs("div",{className:"h-full w-full relative bg-slate-800",children:[s.jsxs(Ue,{camera:{position:[0,0,12],fov:45},children:[s.jsx("color",{attach:"background",args:["#1e293b"]}),s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("pointLight",{position:[-10,0,10],intensity:.5,color:"blue"}),s.jsx("group",{children:n.map((m,x)=>s.jsx(iK,{path:m,color:x===1?"#facc15":x===0?"#22d3ee":"#f472b6"},x))}),s.jsxs("group",{children:[s.jsx(nS,{position:[-3,-4,0],color:"#22d3ee",id:1,onClick:()=>f(1)}),s.jsx(nS,{position:[0,-4,0],color:"#facc15",id:2,onClick:()=>f(2)}),s.jsx(nS,{position:[3,-4,0],color:"#f472b6",id:3,onClick:()=>f(3)})]}),s.jsx(qa,{speed:2,rotationIntensity:0,floatIntensity:.2,children:s.jsxs("mesh",{position:[0,3.5,0],children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:"white",emissive:"white",emissiveIntensity:.5})]})}),s.jsx(xs,{position:[-2,3.5,0],fontSize:.5,color:"#22d3ee",children:"Start A"}),s.jsx(xs,{position:[2,3.5,0],fontSize:.5,color:"#f472b6",children:"Start C"}),s.jsx(xs,{position:[0,4.2,0],fontSize:.6,color:"#facc15",children:"Start B"}),s.jsx(ht,{enableZoom:!1,enablePan:!1,maxPolarAngle:Math.PI/1.5,minPolarAngle:Math.PI/3})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-8 py-4 rounded-3xl text-2xl font-black text-slate-800 shadow-2xl animate-bounce",children:l})}),s.jsx("div",{className:"absolute bottom-8 w-full text-center text-slate-300 pointer-events-none",children:""})]})})})},e6=({position:i=[0,0,0],paintedFaces:e,scale:t=1,onClick:n,animDelay:a=0})=>{const r=E.useRef(null),[o,l]=E.useState(!1),u="#ef4444",d="#f3f4f6",f=e.map(m=>new yi({color:m?u:d,roughness:.2,metalness:.1}));return Yt(m=>{if(r.current&&n){r.current.rotation.x+=.01,r.current.rotation.y+=.01;const x=o?t*1.1:t;r.current.scale.lerp(new Q(x,x,x),.1)}}),s.jsxs("group",{position:i,children:[s.jsx("mesh",{ref:r,material:f,onClick:m=>{m.stopPropagation(),n==null||n()},onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:s.jsx("boxGeometry",{args:[.95,.95,.95]})}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshBasicMaterial",{color:"black",wireframe:!0})]})]})},rK=({targetPos:i,paintedFaces:e})=>{const t=E.useRef(null);return Yt(()=>{t.current&&t.current.position.lerp(new Q(...i),.1)}),s.jsx("group",{ref:t,children:s.jsx(e6,{paintedFaces:e})})},oK=({exploded:i})=>{const e=[];for(let t=-1;t<=1;t++)for(let n=-1;n<=1;n++)for(let a=-1;a<=1;a++){const r=[t===1,t===-1,n===1,n===-1,a===1,a===-1],o=i?1.5:1;e.push(s.jsx(rK,{targetPos:[t*o,n*o,a*o],paintedFaces:r},`${t}-${n}-${a}`))}return s.jsx("group",{children:e})},lK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(!1),[r,o]=E.useState("corner"),[l,u]=E.useState([]),[d,f]=E.useState(""),m=M=>M==="center"?[!1,!1,!1,!1,!1,!1]:M==="face"?[!0,!1,!1,!1,!1,!1]:M==="edge"?[!0,!1,!0,!1,!1,!1]:M==="corner"?[!0,!1,!0,!1,!0,!1]:[],x=()=>{a(!1);const M=["corner","edge","face","center"],_=M[Math.floor(Math.random()*M.length)];o(_);const S=M.filter(A=>A!==_).sort(()=>.5-Math.random()).slice(0,2),j=[_,...S].sort(()=>.5-Math.random());u(j.map(A=>({type:A,painted:m(A)}))),f(""),setTimeout(()=>a(!0),1e3)};E.useEffect(()=>{x()},[e]);const g=M=>{M===r?(f(" !"),setTimeout(()=>t(_=>_+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},v=M=>{switch(M){case"corner":return"3 ()";case"edge":return"2 ()";case"face":return"1 ()";case"center":return" ()"}};return s.jsx(tt,{title:"",onBack:i,instruction:v(r),children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-red-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[6,6,6],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.2,environment:"city",adjustCamera:!1,children:s.jsx(oK,{exploded:n})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""}),s.jsx("button",{className:"absolute bottom-2 right-4 bg-white border border-red-200 text-red-500 px-3 py-1 rounded-full text-sm font-bold shadow",onClick:()=>a(!n),children:n?"":""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-red-400 text-xl font-bold text-red-600 shadow-xl animate-bounce",children:d})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:l.map((M,_)=>s.jsxs("group",{position:[(_-1)*3.5,0,0],children:[s.jsx(e6,{paintedFaces:M.painted,onClick:()=>g(M.type),scale:.8}),s.jsx(xs,{position:[0,-1.5,0],fontSize:.3,color:"#94a3b8",children:M.type==="corner"?"3":M.type==="edge"?"2":M.type==="face"?"1":"0"})]},_))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},PT=i=>{const e=[[0,0,0]],t=new Set(["0,0,0"]);for(let n=1;n<i;n++){const a=e[Math.floor(Math.random()*e.length)],o=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(l=>[a[0]+l[0],a[1]+l[1],a[2]+l[2]]).filter(l=>!t.has(`${l[0]},${l[1]},${l[2]}`)&&Math.abs(l[0])<=1&&Math.abs(l[1])<=1&&Math.abs(l[2])<=1);if(o.length>0){const l=o[Math.floor(Math.random()*o.length)];e.push(l),t.add(`${l[0]},${l[1]},${l[2]}`)}}return e},cK=i=>{const e=Array(3).fill(0).map(()=>Array(3).fill(!1)),t=Array(3).fill(0).map(()=>Array(3).fill(!1));return i.forEach(([n,a,r])=>{const o=n+1,l=r+1;e[l][o]=!0,t[1-a][o]=!0}),{top:e,front:t}},OT=({grid:i,title:e})=>s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"mb-2 font-bold text-indigo-600 text-sm bg-indigo-50 px-2 py-1 rounded",children:e}),s.jsx("div",{className:"grid grid-cols-3 gap-1 bg-white p-2 border-2 border-indigo-100 rounded-lg shadow-sm",children:i.map((t,n)=>s.jsx(Uo.Fragment,{children:t.map((a,r)=>s.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-sm ${a?"bg-indigo-500":"bg-slate-100"}`},`${n}-${r}`))},n))})]}),uK=({blocks:i,onClick:e})=>{const t=E.useRef(null),[n,a]=E.useState(!1);return bl(n),Yt(()=>{if(t.current){t.current.rotation.y+=.01;const r=n?.8:.7;t.current.scale.lerp(new Q(r,r,r),.1)}}),s.jsx("group",{ref:t,onClick:r=>{r.stopPropagation(),e()},onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),children:i.map((r,o)=>s.jsxs("mesh",{position:r,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[o%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},o))})},dK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState({top:[],front:[]}),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const M=5+Math.floor(e/2),_=PT(M);a(_),o(cK(_));const S=_,j=[..._];j.length>0&&(j.pop(),j.push([0,2,0]));const A=PT(M),N=[S,j,A].map(R=>({val:R,sort:Math.random()})).sort((R,O)=>R.sort-O.sort).map(({val:R})=>R);u(N),f(N.indexOf(S)),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{M===d?(x(" !"),setTimeout(()=>t(_=>_+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[40%] w-full bg-indigo-50/50 border-b-4 border-white flex items-center justify-center gap-8",children:[s.jsx(OT,{grid:r.front,title:""}),s.jsx(OT,{grid:r.top,title:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[m&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-400 text-xl font-bold text-indigo-600 shadow-xl animate-bounce",children:m})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:l.map((M,_)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,2,6],fov:35},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(uK,{blocks:M,onClick:()=>v(_)})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+_)})})]},_))})]})]})})},fK=[{index:2,x:0,y:1},{index:1,x:-1,y:0},{index:4,x:0,y:0},{index:0,x:1,y:0},{index:3,x:0,y:-1},{index:5,x:0,y:-2}],hK=({colors:i})=>{const e=E.useRef(null),t=i.map(n=>new yi({color:n,roughness:.2}));return Yt(()=>{e.current&&(e.current.rotation.y+=.005,e.current.rotation.x=Math.sin(Date.now()*.001)*.2)}),s.jsx("mesh",{ref:e,material:t,children:s.jsx("boxGeometry",{args:[2,2,2]})})},mK=({colors:i,onClick:e,scale:t=1})=>{const[n,a]=E.useState(!1);return bl(n),s.jsxs("group",{onClick:r=>{r.stopPropagation(),e()},onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),scale:[t,t,t],children:[s.jsxs("mesh",{position:[0,-.5,0],children:[s.jsx("planeGeometry",{args:[4,5]}),s.jsx("meshBasicMaterial",{color:n?"#fdf2f8":"white",transparent:!0,opacity:.5})]}),s.jsx("group",{position:[0,.5,.1],children:fK.map(r=>s.jsxs("mesh",{position:[r.x*.9,r.y*.9,0],children:[s.jsx("planeGeometry",{args:[.85,.85]}),s.jsx("meshBasicMaterial",{color:i[r.index]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new Ta(.85,.85)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.2)",linewidth:1})]})]},r.index))})]})},pK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=[...Ot].sort(()=>.5-Math.random());a(g);const v=[...g],M=[...g];[M[2],M[3]]=[M[3],M[2]];const _=[...g].sort(()=>.5-Math.random());_.every((A,C)=>A===v[C])&&([_[0],_[1]]=[_[1],_[0]]);const S=[v,M,_].map(A=>({val:A,sort:Math.random()})).sort((A,C)=>A.sort-C.sort).map(({val:A})=>A);o(S);const j=S.findIndex(A=>A.every((C,N)=>C===v[N]));u(j),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[45%] w-full relative bg-rose-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(hK,{colors:n})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:2,enableZoom:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-rose-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-400 text-xl font-bold text-rose-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:r.map((g,v)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,5],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx(mK,{colors:g,onClick:()=>x(v),scale:.6})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-rose-100 text-rose-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+v)})})]},v))})]})]})})},xK=({type:i,color:e,position:t,scale:n=1,onClick:a})=>{const r=E.useRef(null),[o,l]=E.useState(!1);bl(!!a&&o),Yt(()=>{if(r.current&&a){const x=o?n*1.1:n;r.current.scale.lerp(new Q(x,x,x),.1)}});const u=new yi({color:e,roughness:.2});let d;const f=.2,m=1.2;switch(i){case"circle":d=s.jsx("cylinderGeometry",{args:[m/2,m/2,f,32]});break;case"square":d=s.jsx("boxGeometry",{args:[m,f,m]});break;case"triangle":d=s.jsx("cylinderGeometry",{args:[m/1.8,m/1.8,f,3]});break}return s.jsxs("group",{position:t,onClick:a?x=>{x.stopPropagation(),a()}:void 0,onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:[s.jsx("mesh",{ref:r,material:u,children:d}),s.jsxs("mesh",{position:[0,0,0],children:[i==="circle"?s.jsx("cylinderGeometry",{args:[m/2,m/2,f,32]}):i==="square"?s.jsx("boxGeometry",{args:[m,f,m]}):s.jsx("cylinderGeometry",{args:[m/1.8,m/1.8,f,3]}),s.jsx("meshBasicMaterial",{color:"black",side:la})]})]})},gK=({type:i,color:e,onClick:t})=>s.jsx("button",{onClick:t,className:"w-20 h-20 sm:w-24 sm:h-24 bg-white rounded-2xl shadow-md border-2 border-slate-200 flex items-center justify-center hover:bg-sky-50 active:scale-95 transition-all",children:s.jsxs("div",{style:{color:e},className:"transform scale-150",children:[i==="circle"&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-current border-2 border-black/20"}),i==="square"&&s.jsx("div",{className:"w-8 h-8 rounded-sm bg-current border-2 border-black/20"}),i==="triangle"&&s.jsx("div",{className:"w-0 h-0 border-l-[16px] border-r-[16px] border-b-[28px] border-l-transparent border-r-transparent border-b-current filter drop-shadow-sm"})]})}),vK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(0),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{const g=Math.min(6,3+Math.floor(e/2)),v=[],M=["circle","square","triangle"];for(let A=0;A<g;A++){const C=M[Math.floor(Math.random()*M.length)];let N=Ot[A%Ot.length];const R=.8,O=(Math.random()-.5)*R,U=(Math.random()-.5)*R,z=A*.25;v.push({type:C,color:N,pos:[O,z,U],id:A})}a(v),o(0);const _=v[0],S=v.slice(1).sort(()=>.5-Math.random()).slice(0,2),j=[_,...S].sort(()=>.5-Math.random());u(j),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===r?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[60%] w-full relative bg-sky-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,6,2],fov:35},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1,castShadow:!0}),s.jsx("pointLight",{position:[-5,5,-5],intensity:.5}),s.jsx(qa,{floatIntensity:.2,rotationIntensity:.1,speed:1,children:s.jsx("group",{position:[0,-.5,0],children:n.map((g,v)=>s.jsx(xK,{type:g.type,color:g.color,position:g.pos},v))})}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-2,0],children:[s.jsx("planeGeometry",{args:[10,10]}),s.jsx("meshStandardMaterial",{color:"#f0f9ff"})]})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-sky-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col justify-center items-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-sky-400 text-xl font-bold text-sky-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex gap-4",children:l.map((g,v)=>s.jsx(gK,{type:g.type,color:g.color,onClick:()=>x(g.id)},v))}),s.jsx("div",{className:"mt-6 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},yK=({type:i,position:e})=>{const t=i==="slash"?[0,Math.PI/4,0]:[0,-Math.PI/4,0];return s.jsxs("group",{position:e,children:[s.jsxs("mesh",{rotation:t,children:[s.jsx("boxGeometry",{args:[.1,.8,1.2]}),s.jsx("meshStandardMaterial",{color:"#a7f3d0",metalness:.8,roughness:.1})]}),s.jsxs("mesh",{position:[0,-.45,0],children:[s.jsx("cylinderGeometry",{args:[.4,.4,.1]}),s.jsx("meshStandardMaterial",{color:"#333"})]})]})},bK=({id:i,position:e,active:t,onClick:n})=>{const[a,r]=E.useState(!1);return s.jsx("group",{position:e,onClick:o=>{o.stopPropagation(),n()},onPointerOver:()=>r(!0),onPointerOut:()=>r(!1),children:s.jsxs(qa,{speed:2,rotationIntensity:.2,floatIntensity:.2,children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("torusGeometry",{args:[.4,.1,16,32]}),s.jsx("meshStandardMaterial",{color:t?"#4ade80":a?"#fb7185":"#f43f5e",emissive:t?"#4ade80":"#000",emissiveIntensity:t?2:0})]}),s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"white"})]}),s.jsx(xs,{position:[0,.8,0],fontSize:.8,color:"white",outlineColor:"black",outlineWidth:.05,children:i})]})})},MK=({points:i})=>{const e=E.useMemo(()=>new md(i,!1,"catmullrom",0),[i]),t=E.useRef(null);return Yt(n=>{if(t.current){const a=(Math.sin(n.clock.elapsedTime*10)+1)/2;t.current.opacity=.6+a*.4}}),i.length<2?null:s.jsx(lg,{args:[e,64,.05,8,!1],children:s.jsx("meshBasicMaterial",{ref:t,color:"#34d399",transparent:!0,opacity:.8,toneMapped:!1})})},SK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),[d,f]=E.useState([]),[m,x]=E.useState(!1),[g,v]=E.useState(""),M=()=>{const j=3+Math.floor(e/2),A=[-4,0],C=[1,0],N=[],R=new Set;for(let le=0;le<j;le++){let re,H;do re=Math.floor(Math.random()*7)-3,H=Math.floor(Math.random()*7)-3;while(R.has(`${re},${H}`)||re===A[0]&&H===A[1]);const ee=Math.random()>.5?"slash":"backslash";N.push({pos:[re,H],type:ee}),R.add(`${re},${H}`)}a(N);let O=A[0],U=A[1],z=C[0],I=C[1];const V=[new Q(O,0,U)];let F=0;for(;F<20&&(O+=z,U+=I,V.push(new Q(O,0,U)),!(Math.abs(O)>3||Math.abs(U)>3));){const le=N.find(re=>re.pos[0]===O&&re.pos[1]===U);if(le)if(le.type==="slash"){const re=z;z=-I,I=-re}else{const re=z;z=I,I=re}F++}f(V);const q=V[V.length-1],W=Math.round(q.x),ie=Math.round(q.z),B="A",J=[{id:B,pos:[W,ie]}];["B","C"].forEach(le=>{let re,H,ee=0;do{const ue=Math.floor(Math.random()*4);ue===0?(re=4,H=Math.floor(Math.random()*6)-3):ue===1?(re=-4,H=Math.floor(Math.random()*6)-3):ue===2?(H=4,re=Math.floor(Math.random()*6)-3):(H=-4,re=Math.floor(Math.random()*6)-3),ee++}while(ee<50&&(re===W&&H===ie||J.some(ue=>ue.pos[0]===re&&ue.pos[1]===H)||re===A[0]&&H===A[1]));J.push({id:le,pos:[re,H]})}),o(J.sort((le,re)=>le.id.localeCompare(re.id))),u(B),x(!1),v("")};E.useEffect(()=>{M()},[e]);const _=S=>{m||(x(!0),S===l?(v(" !"),setTimeout(()=>t(j=>j+1),2e3)):(v(" "),setTimeout(()=>M(),2e3)))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"h-full w-full relative",children:[s.jsxs(Ue,{camera:{position:[0,8,0],fov:50},children:[s.jsx("color",{attach:"background",args:["#111827"]}),s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(Gi,{args:[10,10],cellColor:"#1f2937",sectionColor:"#374151",infiniteGrid:!0,fadeDistance:20,position:[0,-.5,0]}),s.jsxs("group",{position:[-4.5,0,0],rotation:[0,-Math.PI/2,0],children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.5,.5,1]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsxs("mesh",{position:[0,0,.5],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.1,.2,.5]}),s.jsx("meshStandardMaterial",{color:"#10b981",emissive:"#10b981",emissiveIntensity:.5})]})]}),n.map((S,j)=>s.jsx(yK,{type:S.type,position:[S.pos[0],0,S.pos[1]]},j)),r.map((S,j)=>s.jsx(bK,{id:S.id,position:[S.pos[0],0,S.pos[1]],active:m&&S.id===l,onClick:()=>_(S.id)},j)),m&&s.jsx(MK,{points:d}),s.jsx(ht,{enableRotate:!1,enableZoom:!0,minZoom:10,maxZoom:50})]}),g&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-slate-800/90 px-8 py-4 rounded-3xl border-2 border-green-500 text-2xl font-black text-green-400 shadow-2xl animate-bounce",children:g})}),s.jsx("div",{className:"absolute bottom-8 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})})})},_K=({position:i,radius:e,teeth:t,color:n,speed:a,active:r})=>{const o=E.useRef(null);Yt(()=>{r&&o.current&&(o.current.rotation.z+=a)});const l=[];for(let u=0;u<t;u++){const d=u/t*Math.PI*2,f=Math.cos(d)*(e+.1),m=Math.sin(d)*(e+.1);l.push(s.jsxs("mesh",{position:[f,m,0],rotation:[0,0,d],children:[s.jsx("boxGeometry",{args:[.15,.15,.2]}),s.jsx("meshStandardMaterial",{color:n})]},u))}return s.jsxs("group",{ref:o,position:i,children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[e,e,.2,32]}),s.jsx("meshStandardMaterial",{color:n})]}),s.jsxs("mesh",{rotation:[Math.PI/2,0,0],position:[0,0,.1],children:[s.jsx("cylinderGeometry",{args:[e*.3,e*.3,.3,16]}),s.jsx("meshStandardMaterial",{color:"#eee"})]}),l,s.jsxs("mesh",{position:[e*.6,0,.11],children:[s.jsx("sphereGeometry",{args:[e*.15]}),s.jsx("meshStandardMaterial",{color:"white"})]})]})},wK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState("cw"),[l,u]=E.useState(!1),[d,f]=E.useState(""),m=["#f87171","#fbbf24","#34d399","#60a5fa","#a78bfa"],x=()=>{u(!1),f("");const v=3+Math.min(3,Math.floor(e/2)),M=[];let _=-v+1.5,S=0,j=.02;for(let C=0;C<v;C++){const N=.8+Math.random()*.4,R=Math.round(N*10);if(C>0){const O=M[C-1],U=O.r+N+.05,z=(Math.random()-.5)*1.5;_=O.pos[0]+Math.cos(z)*U,S=O.pos[1]+Math.sin(z)*U,j=-j*(O.r/N)}else j=.02;M.push({pos:[_,S,0],r:N,teeth:R,color:m[C%m.length],speed:j})}a(M);const A=M[v-1].speed;o(A<0?"cw":"ccw")};E.useEffect(()=>{x()},[e]);const g=v=>{u(!0),v===r?(f(" !"),setTimeout(()=>t(M=>M+1),2500)):(f(" "),setTimeout(()=>x(),2500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[65%] w-full relative bg-yellow-50/50 border-b-4 border-white",children:s.jsxs(Ue,{camera:{position:[0,0,10],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("group",{position:[0,0,0],children:n.map((v,M)=>s.jsxs(Uo.Fragment,{children:[s.jsx(_K,{position:v.pos,radius:v.r,teeth:v.teeth,color:v.color,speed:v.speed,active:l||M===0}),M===0&&s.jsx(gs,{position:[v.pos[0]-v.r-.5,v.pos[1]+v.r+.5,0],zIndexRange:[0,0],children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(mx,{className:"w-8 h-8 text-green-600 animate-spin-slow"}),s.jsx("span",{className:"text-xs font-bold text-green-700 bg-white/80 px-1 rounded",children:""})]})}),M===n.length-1&&!l&&s.jsx(gs,{position:[v.pos[0],v.pos[1],1],children:s.jsx("div",{className:"text-4xl font-black text-slate-700 drop-shadow-lg opacity-80",children:"?"})})]},M))}),s.jsx(ht,{enableRotate:!1,enableZoom:!0})]})}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-yellow-400 text-xl font-bold text-yellow-600 shadow-xl animate-bounce",children:d})}),s.jsxs("div",{className:"flex gap-8 w-full max-w-md justify-center",children:[s.jsxs("button",{onClick:()=>g("cw"),className:"flex-1 aspect-square bg-white border-4 border-slate-200 rounded-3xl flex flex-col items-center justify-center gap-2 hover:bg-yellow-50 hover:border-yellow-400 active:scale-95 transition-all group",children:[s.jsx(c_,{size:48,className:"text-slate-400 group-hover:text-yellow-500"}),s.jsx("span",{className:"font-bold text-slate-500 group-hover:text-yellow-600",children:""})]}),s.jsxs("button",{onClick:()=>g("ccw"),className:"flex-1 aspect-square bg-white border-4 border-slate-200 rounded-3xl flex flex-col items-center justify-center gap-2 hover:bg-yellow-50 hover:border-yellow-400 active:scale-95 transition-all group",children:[s.jsx(mx,{size:48,className:"text-slate-400 group-hover:text-yellow-500"}),s.jsx("span",{className:"font-bold text-slate-500 group-hover:text-yellow-600",children:""})]})]})]})]})})},jK=({isFolded:i,cutPos:e,cutShape:t})=>{const n=E.useRef(null),a=E.useRef(null),r=E.useRef(null);Yt(()=>{if(r.current){const l=i?-Math.PI:0;r.current.rotation.y=ks.lerp(r.current.rotation.y,l,.1)}});const o=()=>{let l;switch(t){case"circle":l=s.jsx("circleGeometry",{args:[.3,32]});break;case"square":l=s.jsx("planeGeometry",{args:[.5,.5]});break;case"triangle":l=s.jsx("circleGeometry",{args:[.3,3]});break}return s.jsxs("mesh",{position:[e[0],e[1],.01],rotation:[0,Math.PI,0],children:[" ",l,s.jsx("meshBasicMaterial",{color:"#333"})]})};return s.jsxs("group",{ref:n,children:[s.jsxs("mesh",{ref:a,position:[-1,0,0],children:[s.jsx("planeGeometry",{args:[2,3]}),s.jsx("meshStandardMaterial",{color:"#fce7f3",side:Ms})]}),s.jsx("group",{ref:r,position:[0,0,0],children:s.jsxs("mesh",{position:[1,0,0],children:[s.jsx("planeGeometry",{args:[2,3]}),s.jsx("meshStandardMaterial",{color:"#fbcfe8",side:Ms}),s.jsx(o,{})]})}),s.jsxs("lineSegments",{position:[0,0,.01],children:[s.jsx("bufferGeometry",{children:s.jsx("float32BufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,-1.5,0,0,1.5,0]),3]})}),s.jsx("lineDashedMaterial",{color:"#999",dashSize:.2,gapSize:.1})]})]})},EK=({cutShape:i,positions:e,onClick:t})=>s.jsxs("button",{onClick:t,className:"w-full aspect-[2/3] bg-pink-50 border-2 border-pink-200 rounded-lg relative overflow-hidden hover:border-pink-400 active:scale-95 transition-all shadow-sm",children:[s.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-0 border-l-2 border-dashed border-pink-200 transform -translate-x-1/2"}),e.map((n,a)=>s.jsx("div",{className:"absolute bg-slate-700 transform -translate-x-1/2 -translate-y-1/2",style:{left:`${(n[0]+2)/4*100}%`,top:`${(-n[1]+1.5)/3*100}%`,width:"15%",height:"10%",borderRadius:i==="circle"?"50%":"0%",clipPath:i==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":"none"}},a))]}),TK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(!1),[r,o]=E.useState("circle"),[l,u]=E.useState([0,0]),[d,f]=E.useState([]),[m,x]=E.useState(0),[g,v]=E.useState(""),M=()=>e<=2?{shapes:["circle"],optionCount:2,positionVariety:"simple"}:e<=5?{shapes:["circle","square"],optionCount:3,positionVariety:"medium"}:e<=9?{shapes:["circle","square","triangle"],optionCount:3,positionVariety:"varied"}:{shapes:["circle","square","triangle"],optionCount:4,positionVariety:"complex"},_={simple:[{cut:[.5,0],dx:.5,dy:0},{cut:[.5,.8],dx:.5,dy:.8},{cut:[.5,-.8],dx:.5,dy:-.8}],medium:[{cut:[.3,.5],dx:.3,dy:.5},{cut:[.6,0],dx:.6,dy:0},{cut:[.4,-.6],dx:.4,dy:-.6},{cut:[.7,.3],dx:.7,dy:.3}],varied:[{cut:[.2,.9],dx:.2,dy:.9},{cut:[.8,.2],dx:.8,dy:.2},{cut:[.5,-.5],dx:.5,dy:-.5},{cut:[.3,0],dx:.3,dy:0},{cut:[.6,-.8],dx:.6,dy:-.8},{cut:[.4,.6],dx:.4,dy:.6}],complex:[{cut:[.15,1],dx:.15,dy:1},{cut:[.9,-.1],dx:.9,dy:-.1},{cut:[.25,-.7],dx:.25,dy:-.7},{cut:[.7,.5],dx:.7,dy:.5},{cut:[.5,-1],dx:.5,dy:-1},{cut:[.35,.3],dx:.35,dy:.3},{cut:[.8,-.6],dx:.8,dy:-.6}]},S=()=>{a(!1),v("");const N=M(),R=N.shapes[Math.floor(Math.random()*N.shapes.length)];o(R);const O=_[N.positionVariety],U=O[Math.floor(Math.random()*O.length)],z=U.cut[0],I=U.cut[1];u([z,I]);const V=U.dx,F=U.dy,q=[[-V,F],[V,F]],W=[];W.push([[V,F]]),W.push([[-V,F],[-V,-F]]),W.push([[-V,F],[V,-F]]),W.push([[-V-.3,F],[V+.3,F]]),W.push([[-V,F],[0,F],[V,F]]),W.push([[-V,F+.5],[V,F-.5]]);const ie=W.sort(()=>Math.random()-.5).slice(0,N.optionCount-1),J=[q,...ie].map(($,le)=>({val:$,sort:Math.random(),isCorrect:le===0})).sort(($,le)=>$.sort-le.sort);f(J.map($=>$.val)),x(J.findIndex($=>$.isCorrect)),setTimeout(()=>a(!0),800)},j=()=>e<=2?"":e<=5?"":e<=9?"":"";E.useEffect(()=>{S()},[e]);const A=N=>{N===m?(v(" !"),setTimeout(()=>t(R=>R+1),1500)):(v(" "),setTimeout(()=>v(""),1e3))},C=()=>{switch(r){case"circle":return"";case"square":return"";case"triangle":return""}};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${j()}] - ${C()}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-pink-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,0,6],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Ci,{intensity:.2,environment:"city",adjustCamera:!1,children:s.jsx(jK,{isFolded:n,cutPos:l,cutShape:r})}),n&&s.jsx(gs,{position:[-1,l[1],.5],center:!0,zIndexRange:[10,0],children:s.jsx("div",{className:"text-4xl animate-bounce",children:""})}),s.jsx(ht,{enabled:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-pink-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""}),s.jsx("button",{className:"absolute bottom-2 right-4 bg-white text-pink-500 border border-pink-200 px-3 py-1 rounded-full text-sm font-bold",onClick:()=>a(!n),children:n?"":""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[g&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-400 text-xl font-bold text-pink-600 shadow-xl animate-bounce",children:g})}),s.jsx("div",{className:"grid grid-cols-3 gap-3 h-full items-center",children:d.map((N,R)=>s.jsx(EK,{cutShape:r,positions:N,onClick:()=>A(R)},R))}),s.jsx("div",{className:"absolute bottom-2 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},AK=({data:i,isFalling:e})=>{const t=E.useRef(null);return Yt((n,a)=>{e&&t.current&&(t.current.rotation.z+=a*2,t.current.position.y-=a*5,t.current.position.x+=a*2)}),s.jsxs("mesh",{ref:t,position:[i.x,i.y,0],castShadow:!0,receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[i.width,i.height,i.depth]}),s.jsx("meshStandardMaterial",{color:i.color}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(i.width,i.height,i.depth)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]})},CK=()=>s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:!0,children:[s.jsx("planeGeometry",{args:[10,10]}),s.jsx("meshStandardMaterial",{color:"#e2e8f0"})]}),NK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(!0),[l,u]=E.useState(!1),[d,f]=E.useState(""),m=v=>{for(let M=0;M<v.length-1;M++){const _=v[M];let S=0,j=0;for(let R=M+1;R<v.length;R++){const O=v[R],U=O.width*O.height*O.depth;S+=U,j+=U*O.x}if(S===0)continue;const A=j/S,C=_.x-_.width/2,N=_.x+_.width/2;if(A<C-.05||A>N+.05)return!1}return!0},x=()=>{u(!1),f("");const v=3+Math.min(4,Math.floor(e/2)),M=[],_=2,S=.6;M.push({id:0,width:_,height:S,depth:1.5,x:0,y:S/2,color:"#475569"});let j=S;for(let C=1;C<v;C++){const R=M[C-1],O=(Math.random()-.5)*1.2,U=R.x+O;M.push({id:C,width:1.5,height:S,depth:1.5,x:U,y:j+S/2,color:Ot[(C-1)%Ot.length]}),j+=S}a(M);const A=m(M);o(A)};E.useEffect(()=>{x()},[e]);const g=v=>{l||(v===r?(f(" !"),r||u(!0),setTimeout(()=>t(M=>M+1),2e3)):(f(r?" ":" !"),r||u(!0),setTimeout(()=>x(),2e3)))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[70%] w-full relative bg-blue-50/50 border-b-4 border-white",children:s.jsxs(Ue,{camera:{position:[0,2,8],fov:45},shadows:!0,children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,10,10],intensity:1,castShadow:!0}),s.jsx(Ci,{intensity:.5,adjustCamera:!1,children:s.jsxs("group",{position:[0,-2,0],children:[s.jsx(CK,{}),n.map(v=>s.jsx(AK,{data:v,isFalling:l&&v.id>0},v.id))]})}),s.jsx(ht,{minPolarAngle:0,maxPolarAngle:Math.PI/2})]})}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col justify-center items-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-400 text-xl font-bold text-blue-600 shadow-xl animate-bounce",children:d})}),s.jsxs("div",{className:"flex gap-8 w-full max-w-md",children:[s.jsx(Ix,{variant:"success",className:"flex-1 h-20 text-xl rounded-3xl",onClick:()=>g(!0),children:" "}),s.jsx(Ix,{variant:"danger",className:"flex-1 h-20 text-xl rounded-3xl",onClick:()=>g(!1),children:" "})]})]})]})})},RK=({pattern:i,color:e})=>{const t=E.useRef(null);Yt(o=>{t.current&&(t.current.rotation.x=Math.sin(o.clock.elapsedTime*.5)*.5,t.current.rotation.y+=.01)});const n=[],a=3,r=-1;for(let o=0;o<a;o++)for(let l=0;l<a;l++)if(i[o][l]===1){const u=1+Math.floor(Math.random()*2);for(let d=0;d<u;d++)n.push(s.jsxs("mesh",{position:[l+r,d+.5,o+r],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e,roughness:.2}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},`${l}-${d}-${o}`))}return s.jsx("group",{ref:t,children:s.jsxs("group",{position:[0,-.5,0],children:[" ",n]})})},DK=({pattern:i,onClick:e,color:t})=>s.jsx("button",{onClick:e,className:"p-2 bg-white rounded-xl shadow-md border-2 border-slate-200 hover:border-teal-400 hover:bg-teal-50 active:scale-95 transition-all",children:s.jsx("div",{className:"grid grid-cols-3 gap-1",children:i.map((n,a)=>s.jsx(Uo.Fragment,{children:n.map((r,o)=>s.jsx("div",{className:`w-6 h-6 rounded-sm ${r?"":"bg-slate-100"}`,style:{backgroundColor:r?t:void 0}},`${a}-${o}`))},a))})}),LK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(Ot[0]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const M=()=>{const U=[[0,0,0],[0,0,0],[0,0,0]];U[1][1]=1;let z=1;const I=4+Math.floor(Math.random()*3);for(;z<I;){const V=Math.floor(Math.random()*3),F=Math.floor(Math.random()*3);U[V][F]===0&&(V>0&&U[V-1][F]||V<2&&U[V+1][F]||F>0&&U[V][F-1]||F<2&&U[V][F+1])&&(U[V][F]=1,z++)}return U},_=M();a(_),u(Ot[Math.floor(Math.random()*Ot.length)]);const S=[_];let A=(U=>U[0].map((z,I)=>U.map(V=>V[I]).reverse()))(_);JSON.stringify(A)===JSON.stringify(_)&&(A=JSON.parse(JSON.stringify(A)),A[0][0]=A[0][0]?0:1),S.push(A);const C=_.map(U=>[...U]),N=Math.floor(Math.random()*3),R=Math.floor(Math.random()*3);C[N][R]=C[N][R]?0:1,S.push(C),S.push(M());const O=S.map(U=>({val:U,sort:Math.random()})).sort((U,z)=>U.sort-z.sort).map(({val:U})=>U);o(O),f(O.findIndex(U=>JSON.stringify(U)===JSON.stringify(_))),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{M===d?(x(" !"),setTimeout(()=>t(_=>_+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-teal-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("pointLight",{position:[-5,-5,-5],intensity:.5}),s.jsx(qa,{speed:2,rotationIntensity:.2,floatIntensity:.5,children:s.jsx(RK,{pattern:n,color:l})}),s.jsxs("mesh",{position:[0,-2.5,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[5,5]}),s.jsx("meshStandardMaterial",{color:"#fff"})]}),s.jsx(ht,{enableZoom:!1,enablePan:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-teal-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4 flex flex-col items-center justify-center",children:[m&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-400 text-xl font-bold text-teal-600 shadow-xl animate-bounce",children:m})}),s.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:r.map((M,_)=>s.jsx(DK,{pattern:M,color:l,onClick:()=>v(_)},_))}),s.jsx("div",{className:"mt-4 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},Fy=({data:i})=>{let e;switch(i.type){case"box":e=s.jsx("boxGeometry",{args:[1,1,1]});break;case"sphere":e=s.jsx("sphereGeometry",{args:[.6,32,32]});break;case"cone":e=s.jsx("coneGeometry",{args:[.6,1.2,32]});break;case"cylinder":e=s.jsx("cylinderGeometry",{args:[.5,.5,1,32]});break}return s.jsxs("mesh",{position:i.offset,scale:i.scale,children:[e,s.jsx("meshStandardMaterial",{color:i.color,roughness:.3})]})},UK=({shape1:i,shape2:e,onClick:t,scale:n=1})=>{const a=E.useRef(null),[r,o]=E.useState(!1);return Yt(()=>{if(a.current&&t){a.current.rotation.y+=.01;const l=r?n*1.1:n;a.current.scale.lerp(new Q(l,l,l),.1)}}),s.jsxs("group",{ref:a,onClick:t?l=>{l.stopPropagation(),t()}:void 0,scale:[n,n,n],onPointerOver:()=>o(!0),onPointerOut:()=>o(!1),children:[s.jsx(Fy,{data:i}),s.jsx(Fy,{data:e})]})},PK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(null),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=["box","sphere","cone","cylinder"],v=g[Math.floor(Math.random()*g.length)],M=Ot[Math.floor(Math.random()*Ot.length)],_={type:v,color:M,scale:[1.5,1.5,1.5],offset:[0,0,0]};let S=g[Math.floor(Math.random()*g.length)];for(;S===v;)S=g[Math.floor(Math.random()*g.length)];const j=Ot[Math.floor(Math.random()*Ot.length)],A=[[0,1.2,0],[1.2,0,0],[0,0,1.2]],C=A[Math.floor(Math.random()*A.length)],N={type:S,color:j,scale:[1,1,1],offset:C};a({a:_,b:N});const R={a:_,b:N},O={...N,offset:[C[1],C[2],C[0]]};O.offset[0]===C[0]&&O.offset[1]===C[1]&&(O.offset=[-C[0],-C[1],-C[2]]);const U={a:_,b:O},z=g.find(J=>J!==v&&J!==S)||"box",I={...N,type:z},V={a:_,b:I},F=Ot.find(J=>J!==M&&J!==j)||"#000",q={...N,color:F},B=[R,U,V,{a:_,b:q}].slice(0,3).map(J=>({val:J,sort:Math.random()})).sort((J,$)=>J.sort-$.sort).map(({val:J})=>J);o(B),u(B.indexOf(R)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return n?s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[45%] w-full relative bg-indigo-50/50 border-b-4 border-white flex items-center justify-center",children:s.jsxs(Ue,{camera:{position:[0,0,10],fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[-3,0,0],children:s.jsx(qa,{speed:2,rotationIntensity:.5,children:s.jsx(Fy,{data:n.a})})}),s.jsx(xs,{position:[-1,0,0],fontSize:1.5,color:"#4f46e5",children:"+"}),s.jsx("group",{position:[1,0,0],children:s.jsx(qa,{speed:2.5,rotationIntensity:.5,children:s.jsx(Fy,{data:{...n.b,offset:[0,0,0],scale:[1.2,1.2,1.2]}})})}),s.jsx(xs,{position:[3,0,0],fontSize:1.5,color:"#4f46e5",children:"="}),s.jsx(xs,{position:[4.5,0,0],fontSize:2,color:"#ddd",children:"?"})]})}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-400 text-xl font-bold text-indigo-600 shadow-xl animate-bounce",children:d})}),s.jsxs(Ue,{camera:{position:[0,2,12],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:r.map((g,v)=>s.jsx("group",{position:[(v-1)*4,0,0],children:s.jsx(UK,{shape1:g.a,shape2:g.b,onClick:()=>x(v),scale:.8})},v))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})}):null};function p0(i,e){const t=document.createElement("canvas");t.width=128,t.height=128;const n=t.getContext("2d");if(n){n.fillStyle=e,n.fillRect(0,0,128,128),n.strokeStyle="rgba(0,0,0,0.1)",n.lineWidth=4,n.strokeRect(0,0,128,128),n.fillStyle="white";const a=12,r=64,o=32,l=(u,d)=>{n.beginPath(),n.arc(u,d,a,0,Math.PI*2),n.fill(),n.fillStyle="rgba(0,0,0,0.2)",n.beginPath(),n.arc(u+2,d+2,a,0,Math.PI*2),n.fill(),n.fillStyle="white"};i%2===1&&l(r,r),i>1&&(l(o,o),l(128-o,128-o)),i>3&&(l(128-o,o),l(o,128-o)),i===6&&(l(r,o),l(r,128-o))}return new Bf(t)}const OK=({topNum:i,frontNum:e,rightNum:t,color:n})=>{const a=7-i,r=7-e,o=7-t,l=E.useMemo(()=>[new yi({map:p0(t,n)}),new yi({map:p0(o,n)}),new yi({map:p0(i,n)}),new yi({map:p0(a,n)}),new yi({map:p0(e,n)}),new yi({map:p0(r,n)})],[i,e,t,n,a,r,o]),u=E.useRef(null);return Yt(d=>{u.current&&(u.current.position.y=Math.sin(d.clock.elapsedTime)*.1)}),s.jsx("mesh",{ref:u,material:l,children:s.jsx("boxGeometry",{args:[2,2,2]})})},zK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState({top:1,front:2,right:3,color:"#f43f5e"}),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{const g=Math.ceil(Math.random()*6),v=7-g;a(v);let M=Math.ceil(Math.random()*6);for(;M===g||M===v;)M=Math.ceil(Math.random()*6);const _=7-M;let S=Math.ceil(Math.random()*6);for(;S===g||S===v||S===M||S===_;)S=Math.ceil(Math.random()*6);const j=["#f43f5e","#3b82f6","#10b981","#f59e0b","#8b5cf6"];o({top:g,front:M,right:S,color:j[Math.floor(Math.random()*j.length)]});const A=v,C=[1,2,3,4,5,6].filter(R=>R!==A).sort(()=>.5-Math.random()).slice(0,2),N=[A,...C].sort((R,O)=>R-O);u(N),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===n?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(` 7 (7 - ${r.top} = ?)`),setTimeout(()=>f(""),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"7",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-rose-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[4,5,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(OK,{topNum:r.top,frontNum:r.front,rightNum:r.right,color:r.color})}),s.jsx(ht,{minPolarAngle:0,maxPolarAngle:Math.PI/2.1})]}),s.jsxs("div",{className:"absolute top-2 left-4 bg-rose-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:[" ",r.top," "]}),s.jsx("div",{className:"absolute top-10 left-4 text-rose-400 text-xs font-bold",children:"( = 7)"})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-400 text-xl font-bold text-rose-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex gap-4",children:l.map(g=>s.jsx("button",{onClick:()=>x(g),className:"w-20 h-20 bg-white border-2 border-slate-200 rounded-2xl text-4xl font-black text-slate-700 shadow-lg hover:bg-rose-50 hover:border-rose-300 hover:text-rose-600 active:scale-95 transition-all",children:g},g))}),s.jsx("div",{className:"mt-6 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},Mv=({type:i="L",rotationZ:e=0,color:t,scale:n=1,onClick:a})=>{const r=E.useRef(null),[o,l]=E.useState(!1);bl(!!a&&o),Yt(()=>{if(r.current&&a){const d=o?n*1.1:n;r.current.scale.lerp(new Q(d,d,d),.1)}});let u=[];return i==="L"?u=[[0,0,0],[0,1,0],[1,0,0]]:i==="T"?u=[[-1,1,0],[0,1,0],[1,1,0],[0,0,0]]:u=[[0,-1,0],[0,0,0],[0,1,0]],s.jsxs("group",{ref:r,rotation:[0,0,e],scale:[n,n,n],onClick:a?d=>{d.stopPropagation(),a()}:void 0,onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:[u.map((d,f)=>s.jsxs("mesh",{position:d,children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:t}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.9,.9,.9)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},f)),i==="I"&&s.jsxs("mesh",{position:[0,1.4,0],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"white"})]})]})},GK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("L"),[r,o]=E.useState(0),[l,u]=E.useState(0),[d,f]=E.useState(Ot[0]),[m,x]=E.useState([]),[g,v]=E.useState(0),[M,_]=E.useState(""),S=()=>{const A=["L","T","I"],C=A[Math.floor(Math.random()*A.length)];a(C);const N=Math.floor(Math.random()*4)*(Math.PI/2);o(N);const R=(Math.random()>.5?1:-1)*(Math.PI/2);u(R),f(Ot[Math.floor(Math.random()*Ot.length)]);const O=N+3*R,U=[O,O+Math.PI/2,O+Math.PI].sort(()=>.5-Math.random());x(U),v(U.indexOf(O)),_("")};E.useEffect(()=>{S()},[e]);const j=A=>{A===g?(_(" !"),setTimeout(()=>t(C=>C+1),1500)):(_(" "),setTimeout(()=>_(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[50%] w-full relative bg-violet-50/50 border-b-4 border-white",children:s.jsxs(Ue,{camera:{position:[0,0,10],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsxs("group",{position:[-3,0,0],children:[s.jsxs("group",{position:[-3,0,0],children:[s.jsx(Mv,{type:n,rotationZ:r,color:d,scale:.6}),s.jsx(xs,{position:[0,-2,0],fontSize:.5,color:"#8b5cf6",children:"1"})]}),s.jsx(xs,{position:[-1.5,0,0],fontSize:.8,color:"#ddd",children:""}),s.jsxs("group",{position:[0,0,0],children:[s.jsx(Mv,{type:n,rotationZ:r+l,color:d,scale:.6}),s.jsx(xs,{position:[0,-2,0],fontSize:.5,color:"#8b5cf6",children:"2"})]}),s.jsx(xs,{position:[1.5,0,0],fontSize:.8,color:"#ddd",children:""}),s.jsxs("group",{position:[3,0,0],children:[s.jsx(Mv,{type:n,rotationZ:r+l*2,color:d,scale:.6}),s.jsx(xs,{position:[0,-2,0],fontSize:.5,color:"#8b5cf6",children:"3"})]}),s.jsx(xs,{position:[4.5,0,0],fontSize:.8,color:"#ddd",children:""}),s.jsxs("group",{position:[6,0,0],children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1.5,1.5,.1]}),s.jsx("meshBasicMaterial",{color:"#ddd",transparent:!0,opacity:.3})]}),s.jsx(xs,{position:[0,0,.1],fontSize:1,color:"#8b5cf6",children:"?"})]})]})]})}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[M&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-violet-400 text-xl font-bold text-violet-600 shadow-xl animate-bounce",children:M})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:m.map((A,C)=>s.jsx("group",{position:[(C-1)*3,0,0],children:s.jsx(Mv,{type:n,rotationZ:A,color:d,scale:.8,onClick:()=>j(C)})},C))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},IK=({structure:i})=>{const e=E.useRef(null);Yt(a=>{e.current&&(e.current.rotation.y=Math.sin(a.clock.elapsedTime*.3)*.3)});const t=[],n=[Ot[0],Ot[2],Ot[4]];for(let a=0;a<3;a++)for(let r=0;r<3;r++)for(let o=0;o<3;o++)i[a][r][o]&&t.push(s.jsxs("mesh",{position:[o-1,a-1,r-1],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:n[a]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},`${o}-${a}-${r}`));return s.jsxs("group",{ref:e,children:[t,s.jsxs("mesh",{position:[0,-1.55,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[4,4]}),s.jsx("meshStandardMaterial",{color:"#ecfdf5"})]})]})},kK=({grid:i,color:e,onClick:t})=>s.jsx("button",{onClick:t,className:"p-2 bg-white rounded-xl shadow-md border-2 border-slate-200 hover:border-emerald-400 hover:bg-emerald-50 active:scale-95 transition-all",children:s.jsx("div",{className:"grid grid-cols-3 gap-1",children:i.map((n,a)=>s.jsx(Uo.Fragment,{children:n.map((r,o)=>s.jsx("div",{className:`w-8 h-8 rounded-sm ${r?"":"bg-slate-100"}`,style:{backgroundColor:r?e:void 0}},`${a}-${o}`))},a))})}),BK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(1),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=["","",""],v=[Ot[0],Ot[2],Ot[4]],M=()=>{const S=[],j=Array(3).fill(0).map(()=>Array(3).fill(!1));for(let q=0;q<3;q++)for(let W=0;W<3;W++)j[q][W]=Math.random()>.3;j[1][1]=!0,S.push(j);const A=Array(3).fill(0).map(()=>Array(3).fill(!1));for(let q=0;q<3;q++)for(let W=0;W<3;W++)j[q][W]&&Math.random()>.4&&(A[q][W]=!0);S.push(A);const C=Array(3).fill(0).map(()=>Array(3).fill(!1));for(let q=0;q<3;q++)for(let W=0;W<3;W++)A[q][W]&&Math.random()>.5&&(C[q][W]=!0);S.push(C),a(S);let N=Math.floor(Math.random()*3);S[N].flat().every(q=>!q)&&(N=0),o(N);const R=S[N];let O=S[(N+1)%3];JSON.stringify(O)===JSON.stringify(R)&&(O=JSON.parse(JSON.stringify(O)),O[1][1]=!O[1][1]);const U=JSON.parse(JSON.stringify(R)),z=Math.floor(Math.random()*3),I=Math.floor(Math.random()*3);U[z][I]=!U[z][I];const F=[R,O,U].map(q=>({val:q,sort:Math.random()})).sort((q,W)=>q.sort-W.sort).map(({val:q})=>q);u(F),f(F.findIndex(q=>JSON.stringify(q)===JSON.stringify(R))),x("")};E.useEffect(()=>{M()},[e]);const _=S=>{S===d?(x(" !"),setTimeout(()=>t(j=>j+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:`${g[r]}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-emerald-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(IK,{structure:n})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:2})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-emerald-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-1",children:[2,1,0].map(S=>s.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded transition-all ${S===r?"bg-emerald-500 text-white scale-110 shadow-lg":"bg-white text-slate-300"}`,children:g[S]},S))})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4 flex flex-col items-center justify-center",children:[m&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-emerald-400 text-xl font-bold text-emerald-600 shadow-xl animate-bounce",children:m})}),s.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:l.map((S,j)=>s.jsx(kK,{grid:S,color:v[r],onClick:()=>_(j)},j))}),s.jsx("div",{className:"mt-4 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},zT=({sceneType:i})=>{switch(i){case 0:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#fca5a5"})]}),s.jsxs("mesh",{position:[0,2.5,0],rotation:[0,Math.PI/4,0],children:[s.jsx("coneGeometry",{args:[2,1.5,4]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[0,.5,1.01],children:[s.jsx("planeGeometry",{args:[.8,1]}),s.jsx("meshStandardMaterial",{color:"#7f1d1d"})]}),s.jsxs("mesh",{position:[1.01,1.2,0],rotation:[0,Math.PI/2,0],children:[s.jsx("planeGeometry",{args:[.8,.8]}),s.jsx("meshStandardMaterial",{color:"#93c5fd"})]}),s.jsxs("mesh",{position:[-.8,2.5,-.5],children:[s.jsx("boxGeometry",{args:[.4,1,.4]}),s.jsx("meshStandardMaterial",{color:"#78350f"})]})]});case 1:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[3,.8,1.5]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{position:[.3,1.2,0],children:[s.jsx("boxGeometry",{args:[1.5,.8,1.3]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{position:[1.51,.5,.4],children:[s.jsx("sphereGeometry",{args:[.15]}),s.jsx("meshStandardMaterial",{color:"#fef08a"})]}),s.jsxs("mesh",{position:[1.51,.5,-.4],children:[s.jsx("sphereGeometry",{args:[.15]}),s.jsx("meshStandardMaterial",{color:"#fef08a"})]}),s.jsxs("mesh",{position:[-1.51,.5,.4],children:[s.jsx("sphereGeometry",{args:[.12]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[-1.51,.5,-.4],children:[s.jsx("sphereGeometry",{args:[.12]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]})]});case 2:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1.5,0],children:[s.jsx("cylinderGeometry",{args:[.5,.5,3]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]}),s.jsxs("mesh",{position:[0,3.3,0],children:[s.jsx("coneGeometry",{args:[.5,1,16]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[.7,.3,0],rotation:[0,0,-.3],children:[s.jsx("boxGeometry",{args:[.8,.1,.5]}),s.jsx("meshStandardMaterial",{color:"#fbbf24"})]}),s.jsxs("mesh",{position:[-.7,.3,0],rotation:[0,0,.3],children:[s.jsx("boxGeometry",{args:[.8,.1,.5]}),s.jsx("meshStandardMaterial",{color:"#fbbf24"})]}),s.jsxs("mesh",{position:[.51,2,0],rotation:[0,Math.PI/2,0],children:[s.jsx("circleGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#93c5fd"})]})]});case 3:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("boxGeometry",{args:[2.5,2,2]}),s.jsx("meshStandardMaterial",{color:"#a78bfa"})]}),s.jsxs("mesh",{position:[1,2.5,.8],children:[s.jsx("cylinderGeometry",{args:[.3,.3,1.5]}),s.jsx("meshStandardMaterial",{color:"#8b5cf6"})]}),s.jsxs("mesh",{position:[-1,2.5,.8],children:[s.jsx("cylinderGeometry",{args:[.3,.3,1.5]}),s.jsx("meshStandardMaterial",{color:"#8b5cf6"})]}),s.jsxs("mesh",{position:[1,2.5,-.8],children:[s.jsx("cylinderGeometry",{args:[.3,.3,1.5]}),s.jsx("meshStandardMaterial",{color:"#8b5cf6"})]}),s.jsxs("mesh",{position:[-1,2.5,-.8],children:[s.jsx("cylinderGeometry",{args:[.3,.3,1.5]}),s.jsx("meshStandardMaterial",{color:"#8b5cf6"})]}),s.jsxs("mesh",{position:[0,.6,1.01],children:[s.jsx("planeGeometry",{args:[.8,1.2]}),s.jsx("meshStandardMaterial",{color:"#4c1d95"})]}),s.jsxs("mesh",{position:[0,3.5,0],children:[s.jsx("boxGeometry",{args:[.05,1.5,.05]}),s.jsx("meshStandardMaterial",{color:"#78350f"})]}),s.jsxs("mesh",{position:[.3,3.8,0],children:[s.jsx("boxGeometry",{args:[.5,.3,.02]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]})]});default:return s.jsx("group",{children:s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#fca5a5"})]})})}},Sv=({type:i,active:e,onClick:t})=>{let n="",a="bg-orange-100 border-orange-300";return i==="dog"&&(n="",a="bg-blue-100 border-blue-300"),i==="bear"&&(n="",a="bg-brown-100 border-amber-800"),i==="rabbit"&&(n="",a="bg-pink-100 border-pink-300"),s.jsx("button",{onClick:t,className:`
                w-16 h-16 rounded-full border-4 flex items-center justify-center text-4xl shadow-lg transition-all transform
                ${a}
                ${e?"scale-125 ring-4 ring-offset-2 ring-yellow-400 z-10":"hover:scale-110 opacity-90"}
            `,children:n})},FK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("front"),[r,o]=E.useState(0),[l,u]=E.useState(""),d=()=>e<=2?{views:["front","back"],scenes:[0]}:e<=5?{views:["front","back","left","right"],scenes:[0,1]}:e<=9?{views:["front","back","left","right"],scenes:[0,1,2,3]}:{views:["front","back","left","right"],scenes:[0,1,2,3]};E.useEffect(()=>{const M=d(),_=M.views;a(_[Math.floor(Math.random()*_.length)]),o(M.scenes[Math.floor(Math.random()*M.scenes.length)]),u("")},[e]);const f=()=>e<=2?"":e<=5?"":e<=9?"":"",m=()=>["","","",""][r]||"",x=M=>{M===n?(u(" !"),setTimeout(()=>t(_=>_+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},g=()=>{switch(n){case"front":return[0,2,6];case"back":return[0,2,-6];case"left":return[-6,2,0];case"right":return[6,2,0]}},v=d();return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${f()}] - ${m()}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-fuchsia-50",children:[s.jsxs("div",{className:"flex-1 max-h-[40%] m-4 bg-white border-8 border-white shadow-2xl rotate-1 relative overflow-hidden rounded-sm",children:[s.jsxs(Ue,{camera:{position:g(),fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(zT,{sceneType:r}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.01,0],children:[s.jsx("planeGeometry",{args:[20,20]}),s.jsx("meshStandardMaterial",{color:"#eef2ff"})]})]}),s.jsxs("div",{className:"absolute bottom-2 right-2 text-slate-300 font-mono text-xs",children:["IMG_00",e,".JPG"]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,10,0],fov:45},children:[" ",s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(zT,{sceneType:r}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.01,0],children:[s.jsx("circleGeometry",{args:[4,32]}),s.jsx("meshStandardMaterial",{color:"#fff"})]}),s.jsx(gs,{position:[0,0,3.5],center:!0,children:s.jsx(Sv,{type:"cat",active:!1,onClick:()=>x("front")})}),s.jsx(gs,{position:[0,0,-3.5],center:!0,children:s.jsx(Sv,{type:"bear",active:!1,onClick:()=>x("back")})}),v.views.includes("left")&&s.jsx(gs,{position:[-3.5,0,0],center:!0,children:s.jsx(Sv,{type:"rabbit",active:!1,onClick:()=>x("left")})}),v.views.includes("right")&&s.jsx(gs,{position:[3.5,0,0],center:!0,children:s.jsx(Sv,{type:"dog",active:!1,onClick:()=>x("right")})}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`bg-white px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce ${l.includes("")?"border-green-400 text-green-600":"border-fuchsia-400 text-fuchsia-600"}`,children:l})}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},sS=[{name:"Cross",faces:[{id:0,x:1,y:1},{id:1,x:0,y:1},{id:2,x:1,y:0},{id:3,x:2,y:1},{id:4,x:1,y:2},{id:5,x:1,y:3}],pairs:[[1,3],[2,4],[0,5]]},{name:"Long T",faces:[{id:0,x:0,y:1},{id:1,x:1,y:0},{id:2,x:1,y:1},{id:3,x:2,y:1},{id:4,x:3,y:1},{id:5,x:1,y:2}],pairs:[[0,3],[1,5],[2,4]]},{name:"Stair 2-2-2",faces:[{id:0,x:0,y:0},{id:1,x:1,y:0},{id:2,x:1,y:1},{id:3,x:2,y:1},{id:4,x:2,y:2},{id:5,x:3,y:2}],pairs:[[0,4],[1,2],[3,5]]}],VK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(sS[0]),[r,o]=E.useState(0),[l,u]=E.useState(0),[d,f]=E.useState(""),[m,x]=E.useState([]),g=["#fca5a5","#fdba74","#86efac","#93c5fd","#c4b5fd","#f9a8d4"],v=()=>{const j=sS[Math.floor(Math.random()*sS.length)];a(j),x([...g].sort(()=>.5-Math.random()));const A=Math.floor(Math.random()*6);o(A);let C=-1;for(const N of j.pairs)N[0]===A&&(C=N[1]),N[1]===A&&(C=N[0]);u(C),f("")};E.useEffect(()=>{v()},[e]);const M=j=>{j!==r&&(j===l?(f(" !"),setTimeout(()=>t(A=>A+1),1500)):(f(" "),setTimeout(()=>f(""),1e3)))},_=4,S=60;return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-orange-50 items-center justify-center p-4",children:[s.jsx("div",{className:"relative bg-white p-8 rounded-3xl shadow-xl border-4 border-orange-100",children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${_}, ${S}px)`,gridTemplateRows:`repeat(${_}, ${S}px)`,gap:"4px"},children:Array(_*_).fill(null).map((j,A)=>{const C=Math.floor(A/_),N=A%_,R=n.faces.find(U=>U.x===N&&U.y===C);if(!R)return s.jsx("div",{className:"w-full h-full"},A);const O=R.id===r;return s.jsx("button",{onClick:()=>M(R.id),className:`
                                w-full h-full rounded-lg border-2 shadow-sm transition-all flex items-center justify-center text-2xl font-bold
                                ${O?"bg-red-500 border-red-600 text-white z-10 scale-110 shadow-lg cursor-default":"hover:scale-105 cursor-pointer"}
                            `,style:{backgroundColor:O?void 0:m[R.id],borderColor:O?void 0:"rgba(0,0,0,0.1)"},disabled:O,children:O?"":""},A)})})}),s.jsx("div",{className:"h-20 flex items-center justify-center w-full mt-8",children:d&&s.jsx("div",{className:"bg-white px-8 py-3 rounded-full border-2 border-orange-400 text-xl font-bold text-orange-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"text-slate-400 text-sm mt-4",children:""})]})})},GT=({structure:i,scale:e=1,onClick:t})=>{const n=E.useRef(null);return Yt(a=>{n.current&&t&&(n.current.rotation.y+=.005)}),s.jsx("group",{ref:n,scale:[e,e,e],onClick:t?a=>{a.stopPropagation(),t()}:void 0,children:i.map((a,r)=>s.jsxs("mesh",{position:a,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[r%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},r))})},HK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=4+Math.floor(e/2),v=[[0,0,0]],M=new Set(["0,0,0"]);for(let U=1;U<g;U++){const z=v[Math.floor(Math.random()*v.length)],V=[[0,1,0],[1,0,0],[0,0,1],[-1,0,0],[0,0,-1]].map(F=>[z[0]+F[0],z[1]+F[1],z[2]+F[2]]).filter(F=>!M.has(`${F[0]},${F[1]},${F[2]}`));if(V.length>0){const F=V[Math.floor(Math.random()*V.length)];v.push(F),M.add(`${F[0]},${F[1]},${F[2]}`)}}const _=v.reduce((U,z)=>U+z[0],0)/g,S=v.reduce((U,z)=>U+z[1],0)/g,j=v.reduce((U,z)=>U+z[2],0)/g,A=v.map(U=>[U[0]-_,U[1]-S,U[2]-j]);a(A);const C=A,N=[...A];N.length>1&&N.pop();const R=[...A];R.push([R[0][0],R[0][1]+1,R[0][2]]);const O=[C,N,R].map(U=>({val:U,sort:Math.random()})).sort((U,z)=>U.sort-z.sort).map(({val:U})=>U);o(O),u(O.indexOf(C)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"w-1/2 h-full bg-white border-r-2 border-slate-200 relative",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-slate-100 text-slate-500 px-2 py-1 rounded text-xs font-bold",children:" ()"}),s.jsxs(Ue,{orthographic:!0,camera:{position:[20,20,20],zoom:30},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,20,5],intensity:1}),s.jsx(GT,{structure:n})]})]}),s.jsxs("div",{className:"w-1/2 h-full bg-slate-50 relative flex flex-col p-2 gap-2 overflow-y-auto",children:[d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-4 py-2 rounded-full border-2 border-sky-400 text-lg font-bold text-sky-600 shadow-xl animate-bounce",children:d})}),r.map((g,v)=>s.jsxs("div",{className:"flex-1 min-h-[150px] relative bg-white rounded-xl shadow-sm border-2 border-slate-200 hover:border-sky-400 cursor-pointer overflow-hidden",onClick:()=>x(v),children:[s.jsxs("div",{className:"absolute top-2 left-2 bg-sky-50 text-sky-600 px-2 py-0.5 rounded text-xs font-bold z-10",children:[" ",v+1]}),s.jsxs(Ue,{camera:{position:[0,0,8],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(GT,{structure:g,scale:.8}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:2,enableZoom:!1})]})]},v))]})]})})},qK=({type:i})=>{const e=E.useRef(null);Yt(()=>{e.current&&(e.current.rotation.y+=.005,e.current.rotation.x=.2)});let t;const n=s.jsx("meshStandardMaterial",{color:"#f87171",roughness:.3});switch(i){case"sphere":t=s.jsxs("mesh",{children:[n,s.jsx("sphereGeometry",{args:[1.5,32,32]})]});break;case"cone":t=s.jsxs("mesh",{position:[0,-.5,0],children:[n,s.jsx("cylinderGeometry",{args:[0,1.5,3,32]})]});break;case"cylinder":t=s.jsxs("mesh",{children:[n,s.jsx("cylinderGeometry",{args:[1,1,3,32]})]});break;case"hourglass":t=s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1,0],rotation:[0,0,0],children:[n,s.jsx("coneGeometry",{args:[1.2,2,32]})]})," ",s.jsxs("mesh",{position:[0,.75,0],rotation:[Math.PI,0,0],children:[n,s.jsx("coneGeometry",{args:[1.2,1.5,32]})]}),s.jsxs("mesh",{position:[0,-.75,0],rotation:[0,0,0],children:[n,s.jsx("coneGeometry",{args:[1.2,1.5,32]})]})]});break}return i==="cone"&&(t=s.jsxs("mesh",{position:[0,0,0],children:[n,s.jsx("coneGeometry",{args:[1.5,3,32]})]})),s.jsxs("group",{ref:e,children:[t,s.jsxs("mesh",{position:[0,-2,0],children:[s.jsx("boxGeometry",{args:[4,.05,4]}),s.jsx("meshBasicMaterial",{color:"#ef4444",transparent:!0,opacity:.3})]}),s.jsx(XK,{})]})},XK=()=>{const i=E.useRef(null);return Yt(e=>{if(i.current){const t=Math.sin(e.clock.elapsedTime)*1.8;i.current.position.y=t}}),s.jsxs("mesh",{ref:i,rotation:[0,0,0],children:[s.jsx("boxGeometry",{args:[3.5,.02,3.5]}),s.jsx("meshBasicMaterial",{color:"#fee2e2",transparent:!0,opacity:.4}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(3.5,.02,3.5)]}),s.jsx("lineBasicMaterial",{color:"#ef4444"})]})]})},WK=({type:i,onClick:e})=>{const t=a=>{const r="bg-red-400 mx-auto";return a==="circle-s"?s.jsx("div",{className:`${r} rounded-full w-4 h-4`}):a==="circle-m"?s.jsx("div",{className:`${r} rounded-full w-8 h-8`}):a==="circle-l"?s.jsx("div",{className:`${r} rounded-full w-12 h-12`}):a==="rect"?s.jsx("div",{className:`${r} w-8 h-8`}):a==="circle-c"?s.jsx("div",{className:`${r} rounded-full w-8 h-8`}):null},n=i.split(",");return s.jsxs("button",{onClick:e,className:"flex flex-col items-center justify-between p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-red-400 hover:bg-red-50 shadow-sm h-48 w-24 active:scale-95 transition-all",children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold mb-2",children:""}),t(n[2]),s.jsx("div",{className:"w-0.5 h-4 bg-slate-200"}),t(n[1]),s.jsx("div",{className:"w-0.5 h-4 bg-slate-200"}),t(n[0]),s.jsx("div",{className:"text-xs text-slate-400 font-bold mt-2",children:""})]})},YK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("sphere"),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=["sphere","cone","cylinder","hourglass"],v=g[Math.floor(Math.random()*g.length)];a(v);const M="circle-s,circle-l,circle-s",_="circle-l,circle-m,circle-s",S="circle-c,circle-c,circle-c",j="circle-l,circle-s,circle-l";let A="";v==="sphere"&&(A=M),v==="cone"&&(A=_),v==="cylinder"&&(A=S),v==="hourglass"&&(A=j);const N=[M,_,S,j].filter(O=>O!==A).sort(()=>.5-Math.random()).slice(0,2),R=[A,...N].sort(()=>.5-Math.random());o(R),u(R.indexOf(A)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-red-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,2,8],fov:40},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(qK,{type:n}),s.jsx(ht,{enableZoom:!1,enablePan:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""}),s.jsxs("div",{className:"absolute left-4 bottom-10 flex flex-col items-center opacity-50",children:[s.jsx("div",{className:"text-4xl text-red-500 font-bold",children:""}),s.jsx("div",{className:"text-xs font-bold text-red-400",children:""})]})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-red-400 text-xl font-bold text-red-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex gap-4 justify-center w-full",children:r.map((g,v)=>s.jsx(WK,{type:g,onClick:()=>x(v)},v))}),s.jsx("div",{className:"mt-4 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},IT=({chunk:i,color:e,opacity:t=1,scale:n=1,onClick:a})=>{const r=E.useRef(null);return Yt(o=>{r.current&&a&&(r.current.rotation.y+=.01,r.current.rotation.x=Math.sin(o.clock.elapsedTime)*.2)}),s.jsx("group",{ref:r,scale:[n,n,n],onClick:a?o=>{o.stopPropagation(),a()}:void 0,children:i.map((o,l)=>s.jsxs("mesh",{position:o,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e,transparent:!0,opacity:t}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},l))})},ZK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const M=Math.random()>.5?2:3,_=[],S=(M-1)/2;for(let W=0;W<M;W++)for(let ie=0;ie<M;ie++)for(let B=0;B<M;B++)_.push([W-S,ie-S,B-S]);const j=_.filter(W=>Math.abs(W[0])===S&&Math.abs(W[1])===S&&Math.abs(W[2])===S),C=[j[Math.floor(Math.random()*j.length)]],N=Math.max(3,Math.floor(Math.random()*(M*M*M/3)));for(;C.length<N;){const W=C[Math.floor(Math.random()*C.length)],B=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(J=>[W[0]+J[0],W[1]+J[1],W[2]+J[2]]).filter(J=>_.some($=>$[0]===J[0]&&$[1]===J[1]&&$[2]===J[2])&&!C.some($=>$[0]===J[0]&&$[1]===J[1]&&$[2]===J[2]));if(B.length>0)C.push(B[Math.floor(Math.random()*B.length)]);else break}const R=_.filter(W=>!C.some(ie=>ie[0]===W[0]&&ie[1]===W[1]&&ie[2]===W[2]));a(R),o(C);const O=W=>{const ie=W.reduce(($,le)=>$+le[0],0)/W.length,B=W.reduce(($,le)=>$+le[1],0)/W.length,J=W.reduce(($,le)=>$+le[2],0)/W.length;return W.map($=>[$[0]-ie,$[1]-B,$[2]-J])},U=O(C),z=[...C];z.push([z[0][0],z[0][1]+1,z[0][2]]);const I=O(z),V=C.slice(0,Math.max(1,C.length-1)),F=O(V),q=[U,I,F].map(W=>({val:W,sort:Math.random()})).sort((W,ie)=>W.sort-ie.sort).map(({val:W})=>W);u(q),f(q.indexOf(U)),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{M===d?(x(" !"),setTimeout(()=>t(_=>_+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-cyan-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(IT,{chunk:n,color:"#06b6d4"})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-cyan-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[m&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-cyan-400 text-xl font-bold text-cyan-600 shadow-xl animate-bounce",children:m})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:l.map((M,_)=>s.jsx("group",{position:[(_-1)*3.5,0,0],children:s.jsx(IT,{chunk:M,color:"#22d3ee",scale:.7,onClick:()=>v(_)})},_))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},KK=({x:i,y:e,z:t,onClick:n,isSelected:a,showHint:r})=>{const[o,l]=E.useState(!1);return s.jsx("group",{position:[i,e,t],children:s.jsxs("mesh",{onClick:m=>{m.stopPropagation(),n()},onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:a?"#65a30d":o?"#bef264":"#e2e8f0",transparent:!0,opacity:a?1:o?.8:.15}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.9,.9,.9)]}),s.jsx("lineBasicMaterial",{color:a?"white":"#94a3b8",transparent:!0,opacity:.5})]})]})})},JK=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0]),[r,o]=E.useState([]),[l,u]=E.useState(null),[d,f]=E.useState(""),m=()=>{const g=Math.floor(Math.random()*3)-1,v=Math.floor(Math.random()*3)-1,M=Math.floor(Math.random()*3)-1;a([g,v,M]);const _=[];v===1?_.push(""):v===-1?_.push(""):_.push(""),g===1?_.push(""):g===-1?_.push(""):_.push(""),M===1?_.push(""):M===-1?_.push(""):_.push(""),o(_.sort(()=>.5-Math.random())),u(null),f("")};E.useEffect(()=>{m()},[e]);const x=(g,v,M)=>{d||(u([g,v,M]),g===n[0]&&v===n[1]&&M===n[2]?(f(" !"),setTimeout(()=>t(_=>_+1),1500)):(f(" "),setTimeout(()=>{f(""),u(null)},1e3)))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-900",children:[s.jsx("div",{className:"flex justify-center gap-4 p-4 z-10",children:r.map((g,v)=>s.jsx("div",{className:"bg-lime-500 text-white px-4 py-2 rounded-xl font-bold text-lg shadow-lg border-2 border-lime-400 animate-pulse",children:g},v))}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[5,6,8],fov:45},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("group",{children:[-1,0,1].map(g=>[-1,0,1].map(v=>[-1,0,1].map(M=>s.jsx(KK,{x:g,y:v,z:M,onClick:()=>x(g,v,M),isSelected:(l==null?void 0:l[0])===g&&(l==null?void 0:l[1])===v&&(l==null?void 0:l[2])===M,showHint:!1},`${g}${v}${M}`))))}),s.jsx(xs,{position:[0,-2,2.5],rotation:[-Math.PI/2,0,0],fontSize:.5,color:"#64748b",children:""}),s.jsx(xs,{position:[0,-2,-2.5],rotation:[-Math.PI/2,0,0],fontSize:.5,color:"#64748b",children:""}),s.jsx(xs,{position:[-2.5,-2,0],rotation:[-Math.PI/2,0,0],fontSize:.5,color:"#64748b",children:""}),s.jsx(xs,{position:[2.5,-2,0],rotation:[-Math.PI/2,0,0],fontSize:.5,color:"#64748b",children:""}),s.jsx(ht,{enablePan:!1,maxPolarAngle:Math.PI/1.5})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-lime-100 px-6 py-3 rounded-full border-4 border-lime-500 text-2xl font-black text-lime-700 shadow-2xl animate-bounce",children:d})})]})]})})},QK=({step:i,index:e})=>{const t={base:"",up:"",left:"",right:"",front:""},n={cube:"",sphere:"",cone:"",cylinder:""};return s.jsxs("div",{className:"flex flex-col items-center bg-white p-2 rounded-lg border border-slate-200 shadow-sm min-w-[70px]",children:[s.jsxs("div",{className:"text-xs font-bold text-slate-400 mb-1",children:["Step ",e+1]}),s.jsx("div",{className:"text-2xl mb-1",children:n[i.shape]}),s.jsxs("div",{className:"text-xs font-bold text-slate-600 bg-slate-100 px-1 rounded",children:[t[i.dir],""]}),s.jsx("div",{className:"w-4 h-4 rounded-full mt-1",style:{backgroundColor:i.color}})]})},$K=({steps:i,scale:e=1,onClick:t})=>s.jsx("group",{scale:[e,e,e],onClick:t?n=>{n.stopPropagation(),t()}:void 0,children:i.map((n,a)=>{let r=[0,0,0];n.dir==="up"&&(r=[0,1,0]),n.dir==="left"&&(r=[-1,0,0]),n.dir==="right"&&(r=[1,0,0]),n.dir==="front"&&(r=[0,0,1]);let o;switch(n.shape){case"cube":o=s.jsx("boxGeometry",{args:[.9,.9,.9]});break;case"sphere":o=s.jsx("sphereGeometry",{args:[.45,32,32]});break;case"cone":o=s.jsx("coneGeometry",{args:[.45,.9,32]});break;case"cylinder":o=s.jsx("cylinderGeometry",{args:[.45,.45,.9,32]});break}return s.jsxs("mesh",{position:r,children:[o,s.jsx("meshStandardMaterial",{color:n.color})]},a)})}),eJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=["cube","sphere","cone","cylinder"],M=[{shape:g[Math.floor(Math.random()*g.length)],color:Ot[Math.floor(Math.random()*Ot.length)],dir:"base"}],_=2+Math.floor(Math.random()*2),S=["up","left","right","front"],j=new Set(["base"]);for(let V=0;V<_;V++){const F=S.filter(W=>!j.has(W));if(F.length===0)break;const q=F[Math.floor(Math.random()*F.length)];j.add(q),M.push({shape:g[Math.floor(Math.random()*g.length)],color:Ot[Math.floor(Math.random()*Ot.length)],dir:q})}a(M);const A=M,C=JSON.parse(JSON.stringify(M)),N=C[C.length-1];let R=g[Math.floor(Math.random()*g.length)];for(;R===N.shape;)R=g[Math.floor(Math.random()*g.length)];N.shape=R;const O=JSON.parse(JSON.stringify(M)),U=O[O.length-1];let z=Ot[Math.floor(Math.random()*Ot.length)];for(;z===U.color;)z=Ot[Math.floor(Math.random()*Ot.length)];U.color=z;const I=[A,C,O].map(V=>({val:V,sort:Math.random()})).sort((V,F)=>V.sort-F.sort).map(({val:V})=>V);o(I),u(I.findIndex(V=>JSON.stringify(V)===JSON.stringify(A))),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[30%] w-full bg-amber-50 border-b-4 border-white flex items-center justify-center p-4 overflow-x-auto",children:s.jsx("div",{className:"flex gap-2",children:n.map((g,v)=>s.jsxs(Uo.Fragment,{children:[s.jsx(QK,{step:g,index:v}),v<n.length-1&&s.jsx("div",{className:"self-center text-amber-300 font-bold text-xl",children:""})]},v))})}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-400 text-xl font-bold text-amber-600 shadow-xl animate-bounce",children:d})}),s.jsxs(Ue,{camera:{position:[0,2,8],fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:r.map((g,v)=>s.jsx("group",{position:[(v-1)*3.5,0,0],children:s.jsx($K,{steps:g,scale:.8,onClick:()=>x(v)})},v))}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},kT=({positions:i,onClick:e,scale:t=1})=>{const n=E.useRef(null);return Yt(a=>{n.current&&e&&(n.current.rotation.y+=.005)}),s.jsx("group",{ref:n,onClick:e?a=>{a.stopPropagation(),e()}:void 0,scale:[t,t,t],children:i.map((a,r)=>s.jsxs("mesh",{position:a,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[r%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},r))})},tJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("memorize"),[r,o]=E.useState(5),[l,u]=E.useState([]),[d,f]=E.useState([]),[m,x]=E.useState(0),[g,v]=E.useState(""),M=()=>{a("memorize"),o(5),v("");const S=4+Math.floor(e/2),j=[[0,0,0]],A=new Set(["0,0,0"]);for(let z=1;z<S;z++){const I=j[Math.floor(Math.random()*j.length)],F=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(q=>[I[0]+q[0],I[1]+q[1],I[2]+q[2]]).filter(q=>!A.has(`${q[0]},${q[1]},${q[2]}`));if(F.length>0){const q=F[Math.floor(Math.random()*F.length)];j.push(q),A.add(`${q[0]},${q[1]},${q[2]}`)}}u(j);const C=j,N=[...j],R=N[Math.floor(Math.random()*N.length)];N.push([R[0],R[1]+1,R[2]]);const O=[...j];O.length>1&&O.pop();const U=[C,N,O].map(z=>({val:z,sort:Math.random()})).sort((z,I)=>z.sort-I.sort).map(({val:z})=>z);f(U),x(U.indexOf(C))};E.useEffect(()=>{M()},[e]),E.useEffect(()=>{if(n==="memorize")if(r>0){const S=setTimeout(()=>o(j=>j-1),1e3);return()=>clearTimeout(S)}else a("guess")},[n,r]);const _=S=>{S===m?(v(" !"),setTimeout(()=>t(j=>j+1),1500)):(v(" "),setTimeout(()=>v(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:n==="memorize"?` ${r} `:"",children:s.jsx("div",{className:"flex flex-col h-full",children:n==="memorize"?s.jsxs("div",{className:"h-full w-full bg-purple-50 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-6xl font-black text-purple-200 mb-4",children:r}),s.jsx("div",{className:"w-full h-[60%]",children:s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(kT,{positions:l})}),s.jsx(ht,{autoRotate:!0})]})})]}):s.jsxs("div",{className:"h-full w-full bg-slate-100 p-4 relative",children:[g&&s.jsx("div",{className:"absolute top-10 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-purple-400 text-xl font-bold text-purple-600 shadow-xl animate-bounce",children:g})}),s.jsxs(Ue,{camera:{position:[0,0,12],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:d.map((S,j)=>s.jsx("group",{position:[(j-1)*4,0,0],children:s.jsx(kT,{positions:S,scale:.6,onClick:()=>_(j)})},j))})]}),s.jsx("div",{className:"absolute bottom-8 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})})})},BT=[["2-0","5-2"],["2-3","1-0"],["2-1","3-0"],["1-3","5-3"],["3-1","5-1"],["1-2","4-3"],["3-2","4-1"]],nJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(""),[r,o]=E.useState(""),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>e<=2?{optionCount:2,pairIndices:[0,1,2]}:e<=5?{optionCount:3,pairIndices:[0,1,2,3,4]}:e<=9?{optionCount:3,pairIndices:[0,1,2,3,4,5,6]}:{optionCount:4,pairIndices:[0,1,2,3,4,5,6]},x=()=>{const _=m(),S=_.pairIndices.map(V=>BT[V]).filter(Boolean),j=S[Math.floor(Math.random()*S.length)],A=Math.random()>.5,C=A?j[1]:j[0],N=A?j[0]:j[1];a(C),o(N);const R=BT.flat(),O=[],U=_.optionCount-1;for(;O.length<U;){const V=R[Math.floor(Math.random()*R.length)];V!==C&&V!==N&&!O.includes(V)&&O.push(V)}const I=[{id:N,label:"A"},...O.map((V,F)=>({id:V,label:String.fromCharCode(66+F)}))].map(V=>({val:V,sort:Math.random()})).sort((V,F)=>V.sort-F.sort).map(({val:V},F)=>({...V,label:String.fromCharCode(65+F)}));u(I),f("")},g=()=>e<=2?"":e<=5?"":e<=9?"":"";E.useEffect(()=>{x()},[e]);const v=_=>{_===r?(f(" !"),setTimeout(()=>t(S=>S+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},M=(_,S,j)=>{const A=[0,1,2,3];return s.jsxs("div",{className:"absolute w-20 h-20 bg-white border-2 border-slate-300 flex items-center justify-center text-slate-200 font-bold text-xl",style:{left:S*80,top:j*80},children:[_,A.map(C=>{const N=`${_}-${C}`,R=N===n,O=l.find(z=>z.id===N);let U="";return C===0&&(U="top-[-2px] left-0 right-0 h-1"),C===1&&(U="right-[-2px] top-0 bottom-0 w-1"),C===2&&(U="bottom-[-2px] left-0 right-0 h-1"),C===3&&(U="left-[-2px] top-0 bottom-0 w-1"),R?s.jsx("div",{className:`absolute bg-red-500 z-10 ${U}`},C):O?s.jsx("div",{className:`absolute flex items-center justify-center z-10 ${U}`,children:s.jsx("button",{onClick:()=>v(N),className:"w-8 h-8 rounded-full bg-pink-100 border-2 border-pink-500 text-pink-700 font-bold text-sm flex items-center justify-center hover:scale-110 transition-transform -translate-y-1/2 -translate-x-1/2 absolute top-1/2 left-1/2",children:O.label})},C):null})]})};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${g()}] - `,children:s.jsxs("div",{className:"flex flex-col h-full items-center justify-center bg-pink-50 p-4",children:[s.jsxs("div",{className:"relative w-[240px] h-[320px] scale-125 origin-center",children:[M(2,1,0),M(1,0,1),M(0,1,1),M(3,2,1),M(4,1,2),M(5,1,3)]}),d&&s.jsx("div",{className:"fixed top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-400 text-xl font-bold text-pink-600 shadow-xl animate-bounce",children:d})}),s.jsxs("div",{className:"mt-12 text-slate-400 text-sm",children:[" ",l.map(_=>_.label).join("")," "]})]})})},sJ=({colors:i,onClick:e})=>{const t=i.map(n=>new yi({color:n,roughness:.2}));return s.jsx("mesh",{material:t,onClick:e?n=>{n.stopPropagation(),e()}:void 0,rotation:[.3,.4,0],children:s.jsx("boxGeometry",{args:[1.5,1.5,1.5]})})},iJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=["","","","","",""],v=()=>{const _=[2,4,0],S=[{name:"",code:"#ef4444"},{name:"",code:"#3b82f6"},{name:"",code:"#22c55e"},{name:"",code:"#eab308"}],j=[],A={},C=2+(Math.random()>.5?1:0),N=new Set;for(let F=0;F<C;F++){const q=_[Math.floor(Math.random()*_.length)];if(N.has(q))continue;N.add(q);const W=S[Math.floor(Math.random()*S.length)];j.push({face:g[q],color:W.name,colorCode:W.code}),A[q]=W.code}a(j),o(" (Top-Front-Right)");const O=(F=>{const q=Array(6).fill("#fff");return F[0]&&(q[0]=F[0]),F[2]&&(q[2]=F[2]),F[4]&&(q[4]=F[4]),q})(A),U=[...O];[U[0],U[2],U[4]]=[U[4],U[0],U[2]];const z=[...O],I=S[Math.floor(Math.random()*S.length)].code;z[2]!=="#fff"?z[2]=I:z[0]=I;const V=[O,U,z].map(F=>({val:F,sort:Math.random()})).sort((F,q)=>F.sort-q.sort).map(({val:F})=>F);u(V),f(V.indexOf(O)),x("")};E.useEffect(()=>{v()},[e]);const M=_=>{_===d?(x(" !"),setTimeout(()=>t(S=>S+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[40%] w-full bg-blue-50 border-b-4 border-white flex flex-col items-center justify-center p-4",children:[s.jsx("div",{className:"flex flex-col gap-2 mb-4 w-full max-w-xs",children:n.map((_,S)=>s.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 flex justify-between items-center",children:[s.jsxs("span",{className:"font-bold text-slate-600",children:[S+1,".  ",_.face," "]}),s.jsxs("span",{className:"font-bold px-2 py-0.5 rounded text-white",style:{backgroundColor:_.colorCode},children:[_.color,""]})]},S))}),s.jsx("div",{className:"text-xs text-slate-400",children:"..."})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[m&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-400 text-xl font-bold text-blue-600 shadow-xl animate-bounce",children:m})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:l.map((_,S)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,5],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(qa,{speed:2,rotationIntensity:.2,children:s.jsx(sJ,{colors:_,onClick:()=>M(S)})})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-blue-100 text-blue-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+S)})})]},S))})]})]})})},aJ=()=>s.jsx("group",{children:s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[3.05,3.05,3.05]}),s.jsx("meshStandardMaterial",{color:"white",transparent:!0,opacity:.1,side:Ms}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(3.05,3.05,3.05)]}),s.jsx("lineBasicMaterial",{color:"#94a3b8"})]})]})}),rJ=({blocks:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[t%Ot.length],roughness:.2}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},t))}),oJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(0),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{const M=10+Math.floor(Math.random()*10),_=27-M;o(_);const S=[];for(let C=-1;C<=1;C++)for(let N=-1;N<=1;N++)for(let R=-1;R<=1;R++)S.push([C,N,R]);const j=S.sort(()=>.5-Math.random()).slice(0,M);a(j);const A=new Set;for(A.add(_);A.size<4;){const C=_+Math.floor((Math.random()-.5)*6);C>0&&C!==_&&C<27&&A.add(C)}u(Array.from(A).sort((C,N)=>C-N)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===r?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[60%] w-full relative bg-teal-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsxs(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:[s.jsx(aJ,{}),s.jsx(rJ,{blocks:n})]}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-teal-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:": 27"})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-400 text-xl font-bold text-teal-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex gap-4 flex-wrap justify-center",children:l.map(g=>s.jsx("button",{onClick:()=>x(g),className:"w-16 h-16 sm:w-20 sm:h-20 bg-white border-b-4 border-teal-200 rounded-2xl text-3xl font-black text-teal-700 shadow-md hover:bg-teal-50 active:scale-95 transition-all",children:g},g))})]})]})})},lJ=({axis:i,shapeType:e,speed:t})=>{const n=E.useRef(null);Yt(r=>{if(n.current){const o=t*r.clock.getDelta();i==="x"&&(n.current.rotation.x+=o),i==="y"&&(n.current.rotation.y+=o),i==="z"&&(n.current.rotation.z+=o)}});const a=()=>{switch(e){case 0:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.5,0,0],children:[s.jsx("boxGeometry",{args:[1,.8,.8]}),s.jsx("meshStandardMaterial",{color:Ot[0]})]}),s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[.8,1,.8]}),s.jsx("meshStandardMaterial",{color:Ot[1]})]})]});case 1:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[2,.6,.6]}),s.jsx("meshStandardMaterial",{color:Ot[2]})]}),s.jsxs("mesh",{position:[0,-.3,0],children:[s.jsx("boxGeometry",{args:[.6,1,.6]}),s.jsx("meshStandardMaterial",{color:Ot[3]})]})]});case 2:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.5,.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:Ot[0]})]}),s.jsxs("mesh",{position:[-.5,-.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:Ot[1]})]}),s.jsxs("mesh",{position:[0,0,.8],rotation:[Math.PI/2,0,0],children:[s.jsx("coneGeometry",{args:[.3,1,16]}),s.jsx("meshStandardMaterial",{color:Ot[2]})]})]});case 3:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.6,.3,0],children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:Ot[0]})]}),s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.5,.5,1.5]}),s.jsx("meshStandardMaterial",{color:Ot[1]})]}),s.jsxs("mesh",{position:[-.6,-.3,0],children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:Ot[2]})]})]});case 4:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.4,.4,2]}),s.jsx("meshStandardMaterial",{color:Ot[3]})]}),s.jsxs("mesh",{position:[0,0,.3],children:[s.jsx("boxGeometry",{args:[2,.1,.5]}),s.jsx("meshStandardMaterial",{color:Ot[0]})]}),s.jsxs("mesh",{position:[0,0,-.8],children:[s.jsx("boxGeometry",{args:[.8,.1,.3]}),s.jsx("meshStandardMaterial",{color:Ot[1]})]})]});default:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.5,.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:Ot[0]})]}),s.jsxs("mesh",{position:[-.5,-.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:Ot[1]})]})]})}};return s.jsx("group",{ref:n,children:a()})},cJ=()=>s.jsxs("group",{children:[s.jsxs("mesh",{rotation:[0,0,-Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.05,.05,6]}),s.jsx("meshBasicMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{children:[s.jsx("cylinderGeometry",{args:[.05,.05,6]}),s.jsx("meshBasicMaterial",{color:"#22c55e"})]}),s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.05,.05,6]}),s.jsx("meshBasicMaterial",{color:"#3b82f6"})]})]}),uJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("y"),[r,o]=E.useState(0),[l,u]=E.useState(2),[d,f]=E.useState(""),m=()=>e<=2?{speed:1.5,shapes:[0,1],axes:["y"]}:e<=5?{speed:2,shapes:[0,1,2],axes:["x","y"]}:e<=9?{speed:2.5,shapes:[1,2,3,4],axes:["x","y","z"]}:{speed:3.5,shapes:[2,3,4],axes:["x","y","z"]},x=()=>{const S=m(),j=S.axes[Math.floor(Math.random()*S.axes.length)];a(j);const A=S.shapes[Math.floor(Math.random()*S.shapes.length)];o(A),u(S.speed),f("")};E.useEffect(()=>{x()},[e]);const g=()=>e<=2?"":e<=5?"":e<=9?"":"",v=S=>{S===n?(f(" !"),setTimeout(()=>t(j=>j+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},_=m().axes;return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${g()}] - `,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[60%] w-full relative bg-slate-900 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[3,3,5],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(cJ,{}),s.jsx(lJ,{axis:n,shapeType:r,speed:l}),s.jsx(ht,{enableZoom:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 text-white/50 text-sm",children:""}),s.jsxs("div",{className:"absolute top-2 right-4 text-white/70 text-sm bg-black/30 px-2 py-1 rounded",children:[": ",l>3?"":l>2?"":l>1.5?"":""]})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-400 text-xl font-bold text-indigo-600 shadow-xl animate-bounce",children:d})}),s.jsxs("div",{className:"flex gap-4 w-full max-w-md justify-center",children:[s.jsx("button",{onClick:()=>v("x"),className:`flex-1 py-5 rounded-2xl bg-red-100 border-4 border-red-500 text-red-600 font-black text-lg active:scale-95 transition-transform shadow-lg ${_.includes("x")?"":"opacity-30 pointer-events-none"}`,children:"X "}),s.jsx("button",{onClick:()=>v("y"),className:`flex-1 py-5 rounded-2xl bg-green-100 border-4 border-green-500 text-green-600 font-black text-lg active:scale-95 transition-transform shadow-lg ${_.includes("y")?"":"opacity-30 pointer-events-none"}`,children:"Y "}),s.jsx("button",{onClick:()=>v("z"),className:`flex-1 py-5 rounded-2xl bg-blue-100 border-4 border-blue-500 text-blue-600 font-black text-lg active:scale-95 transition-transform shadow-lg ${_.includes("z")?"":"opacity-30 pointer-events-none"}`,children:"Z "})]}),s.jsx("div",{className:"mt-4 text-slate-400 text-sm",children:_.length<3?` ${_.map(S=>S.toUpperCase()).join("")} `:""})]})]})})},dJ=({coords:i,color:e,scale:t=1,onClick:n})=>{const a=E.useRef(null);Yt(u=>{a.current&&n&&(a.current.rotation.y=Math.sin(u.clock.elapsedTime)*.2)});const r=i.reduce((u,d)=>u+d[0],0)/i.length,o=i.reduce((u,d)=>u+d[1],0)/i.length,l=i.reduce((u,d)=>u+d[2],0)/i.length;return s.jsx("group",{ref:a,scale:[t,t,t],onClick:n?u=>{u.stopPropagation(),n()}:void 0,children:i.map((u,d)=>s.jsxs("mesh",{position:[u[0]-r,u[1]-o,u[2]-l],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},d))})},fJ=({width:i,height:e,holeCoords:t})=>{const n=[];for(let a=0;a<i;a++)for(let r=0;r<e;r++){const o=a-Math.floor(i/2),l=r-Math.floor(e/2);t.some(d=>d[0]===o&&d[1]===l)||n.push(s.jsxs("mesh",{position:[o,l,0],children:[s.jsx("boxGeometry",{args:[.95,.95,.5]})," ",s.jsx("meshStandardMaterial",{color:"#fca5a5"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.5)]}),s.jsx("lineBasicMaterial",{color:"#b91c1c",transparent:!0,opacity:.3})]})]},`${a}-${r}`))}return s.jsx("group",{children:n})},hJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g=4+Math.floor(Math.random()*2),v=[[0,0,0]],M=new Set(["0,0,0"]);for(;v.length<g;){const R=v[Math.floor(Math.random()*v.length)],U=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0]].map(z=>[R[0]+z[0],R[1]+z[1],0]).filter(z=>!M.has(`${z[0]},${z[1]},0`)&&Math.abs(z[0])<=2&&Math.abs(z[1])<=2);if(U.length>0){const z=U[Math.floor(Math.random()*U.length)];v.push(z),M.add(`${z[0]},${z[1]},0`)}else break}a(v);const _=v,S=[...v];S.length>1&&(S.pop(),S.push([S[0][0]+1,S[0][1]+1,0]));const j=[[0,0,0],[1,0,0],[2,0,0],[3,0,0]],A=[[0,0,0],[1,0,0],[0,1,0],[1,1,0]],N=[_,S,j.length===v.length?j:A].slice(0,3).map(R=>({val:R,sort:Math.random()})).sort((R,O)=>R.sort-O.sort).map(({val:R})=>R);o(N),u(N.indexOf(_)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-rose-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(fJ,{width:5,height:5,holeCoords:n})}),s.jsx(ht,{enableRotate:!1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-rose-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-400 text-xl font-bold text-rose-600 shadow-xl animate-bounce",children:d})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:r.map((g,v)=>s.jsx("group",{position:[(v-1)*3.5,0,0],children:s.jsx(dJ,{coords:g,color:"#fca5a5",scale:.7,onClick:()=>x(v)})},v))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},mJ=({part:i,exploded:e,onClick:t})=>{const n=E.useRef(null);Yt(()=>{if(n.current){const r=e?new Q(...i.assembledPos).add(new Q(...i.explodedOffset)):new Q(...i.assembledPos);n.current.position.lerp(r,.1)}});let a;switch(i.geo){case"box":a=s.jsx("boxGeometry",{args:[1,1,1]});break;case"sphere":a=s.jsx("sphereGeometry",{args:[.5,32,32]});break;case"cyl":a=s.jsx("cylinderGeometry",{args:[.5,.5,1,32]});break}return s.jsx("group",{ref:n,scale:i.scale,onClick:t?r=>{r.stopPropagation(),t()}:void 0,children:s.jsxs("mesh",{children:[a,s.jsx("meshStandardMaterial",{color:i.color})]})})},FT=({parts:i,exploded:e,scale:t=1,onClick:n})=>{const a=E.useRef(null);return Yt(r=>{a.current&&n&&(a.current.rotation.y+=.005)}),s.jsx("group",{ref:a,scale:[t,t,t],onClick:n?r=>{r.stopPropagation(),n()}:void 0,children:i.map((r,o)=>s.jsx(mJ,{part:r,exploded:e},o))})},pJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g={id:0,geo:"box",color:Ot[0],assembledPos:[0,0,0],explodedOffset:[0,0,0],scale:[1.5,2,1]},v={id:1,geo:"sphere",color:Ot[1],assembledPos:[0,1.5,0],explodedOffset:[0,1.5,0],scale:[1,1,1]},M={id:2,geo:"cyl",color:Ot[2],assembledPos:[-1,.5,0],explodedOffset:[-1.5,0,0],scale:[.3,1,.3]},_={id:3,geo:"cyl",color:Ot[2],assembledPos:[1,.5,0],explodedOffset:[1.5,0,0],scale:[.3,1,.3]},S=[g,v,M,_];a(S);const j=S,A=JSON.parse(JSON.stringify(S));A[1].assembledPos=[0,-1.5,0];const C=JSON.parse(JSON.stringify(S));C[2].assembledPos=[-.5,1.5,0],C[3].assembledPos=[.5,1.5,0];const N=[j,A,C].map(R=>({val:R,sort:Math.random()})).sort((R,O)=>R.sort-O.sort).map(({val:R})=>R);o(N),u(N.findIndex(R=>JSON.stringify(R)===JSON.stringify(j))),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[55%] w-full relative bg-emerald-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(FT,{parts:n,exploded:!0})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-emerald-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-emerald-400 text-xl font-bold text-emerald-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:r.map((g,v)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,6],fov:35},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(FT,{parts:g,exploded:!1,scale:.4,onClick:()=>x(v)})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-emerald-100 text-emerald-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+v)})})]},v))})]})]})})},xJ=(i,e)=>{const t=document.createElement("canvas");t.width=256,t.height=256;const n=t.getContext("2d");if(n){if(n.fillStyle="#fff",n.fillRect(0,0,256,256),n.fillStyle=e,i==="h-stripe")for(let a=0;a<256;a+=32)n.fillRect(0,a,256,16);else if(i==="v-stripe")for(let a=0;a<256;a+=32)n.fillRect(a,0,16,256);else if(i==="grid"){for(let a=0;a<256;a+=64)n.fillRect(a,0,8,256);for(let a=0;a<256;a+=64)n.fillRect(0,a,256,8)}else if(i==="dots")for(let a=32;a<256;a+=64)for(let r=32;r<256;r+=64)n.beginPath(),n.arc(a,r,16,0,Math.PI*2),n.fill()}return new Bf(t)},gJ=({type:i,color:e,scale:t=1,onClick:n})=>{const a=E.useMemo(()=>xJ(i,e),[i,e]);return s.jsxs("mesh",{scale:[t,t,t],onClick:n?r=>{r.stopPropagation(),n()}:void 0,rotation:[.5,.5,0],children:[s.jsx("boxGeometry",{args:[1.5,1.5,1.5]}),s.jsx("meshStandardMaterial",{map:a})]})},vJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("h-stripe"),[r,o]=E.useState("#8b5cf6"),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const _=["h-stripe","v-stripe","grid","dots"],S=_[Math.floor(Math.random()*_.length)];a(S),o(["#8b5cf6","#ec4899","#ef4444","#10b981"][Math.floor(Math.random()*4)]);const j=_.filter(C=>C!==S).sort(()=>.5-Math.random()).slice(0,2),A=[S,...j].sort(()=>.5-Math.random());u(A),f(A.indexOf(S)),x("")};E.useEffect(()=>{g()},[e]);const v=_=>{_===d?(x(" !"),setTimeout(()=>t(S=>S+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))},M=()=>{const _={width:"100%",height:"100%"};return n==="h-stripe"&&(_.background=`repeating-linear-gradient(0deg, ${r} 0, ${r} 10px, white 10px, white 20px)`),n==="v-stripe"&&(_.background=`repeating-linear-gradient(90deg, ${r} 0, ${r} 10px, white 10px, white 20px)`),n==="grid"&&(_.background=`
          repeating-linear-gradient(0deg, ${r} 0, ${r} 2px, transparent 2px, transparent 20px),
          repeating-linear-gradient(90deg, ${r} 0, ${r} 2px, white 2px, white 20px)
      `),n==="dots"&&(_.background=`radial-gradient(${r} 20%, transparent 20%) 0 0, radial-gradient(${r} 20%, transparent 20%) 10px 10px`),n==="dots"&&(_.backgroundSize="20px 20px"),n==="dots"&&(_.backgroundColor="white"),s.jsx("div",{className:"w-40 h-40 border-4 border-slate-300 shadow-lg",style:_})};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[45%] w-full bg-purple-50 border-b-4 border-white flex flex-col items-center justify-center",children:[M(),s.jsx("div",{className:"mt-2 text-purple-600 font-bold text-sm",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100",children:[m&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-purple-400 text-xl font-bold text-purple-600 shadow-xl animate-bounce",children:m})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 h-full p-2",children:l.map((_,S)=>s.jsxs("div",{className:"relative bg-white rounded-xl shadow border-2 border-slate-200 overflow-hidden",children:[s.jsxs(Ue,{camera:{position:[0,0,4],fov:35},children:[s.jsx("ambientLight",{intensity:.9}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(gJ,{type:_,color:r,scale:.7,onClick:()=>v(S)})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center",children:s.jsx("span",{className:"bg-purple-100 text-purple-600 px-2 py-0.5 rounded text-xs font-bold",children:String.fromCharCode(65+S)})})]},S))})]})]})})},yJ=({lightPosIndex:i,objectType:e,lightCount:t})=>{const n=(t-1)/2,a=(i-n)*4,r=-a*.25,o=1+Math.abs(a)*.08,l=()=>{switch(e){case 0:return s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("coneGeometry",{args:[.5,1,32]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]});case 1:return s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]});case 2:return s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]});case 3:return s.jsxs("mesh",{position:[0,.6,0],children:[s.jsx("cylinderGeometry",{args:[.4,.4,1]}),s.jsx("meshStandardMaterial",{color:"#34d399"})]});default:return s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("coneGeometry",{args:[.5,1,32]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]})}},u=()=>{switch(e){case 0:return s.jsx("circleGeometry",{args:[.5,32]});case 1:return s.jsx("planeGeometry",{args:[.8,.8]});case 2:return s.jsx("circleGeometry",{args:[.5,32]});case 3:return s.jsx("circleGeometry",{args:[.4,32]});default:return s.jsx("circleGeometry",{args:[.5,32]})}};return s.jsxs("group",{children:[l(),s.jsxs("mesh",{position:[r,.01,0],rotation:[-Math.PI/2,0,0],scale:[o,1,1],children:[u(),s.jsx("meshBasicMaterial",{color:"#000",transparent:!0,opacity:.3})]}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[12,10]}),s.jsx("meshStandardMaterial",{color:"#e5e7eb"})]})]})},bJ=({index:i,onClick:e,active:t,totalLights:n=3})=>{const a=(n-1)/2,r=n<=3?3:2.5,o=(i-a)*r;return s.jsxs("group",{position:[o,3.5,0],onClick:u=>{u.stopPropagation(),e()},children:[s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:t?"#fbbf24":"#9ca3af",emissive:t?"#fbbf24":"#000",emissiveIntensity:t?1:0})]}),s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("cylinderGeometry",{args:[.2,.2,.4]}),s.jsx("meshStandardMaterial",{color:"#374151"})]}),t&&s.jsx("pointLight",{distance:10,intensity:2,color:"#fbbf24"}),s.jsx(gs,{position:[0,-.6,0],center:!0,children:s.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded ${t?"bg-yellow-100 text-yellow-700":"bg-slate-200 text-slate-500"}`,children:[i+1,""]})})]})},MJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState(3),[l,u]=E.useState(0),[d,f]=E.useState(null),[m,x]=E.useState(""),g=()=>e<=2?{lights:2,objects:[0]}:e<=5?{lights:3,objects:[0,1]}:e<=9?{lights:4,objects:[0,1,2,3]}:{lights:5,objects:[0,1,2,3]},v=()=>{const S=g();o(S.lights),a(Math.floor(Math.random()*S.lights)),u(S.objects[Math.floor(Math.random()*S.objects.length)]),f(null),x("")};E.useEffect(()=>{v()},[e]);const M=()=>e<=2?"":e<=5?"":e<=9?"":"",_=S=>{m||(f(S),S===n?(x(" !"),setTimeout(()=>t(j=>j+1),1500)):(x(" "),setTimeout(()=>{x(""),f(null)},1e3)))};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${M()}] - `,children:s.jsx("div",{className:"flex flex-col h-full bg-slate-800",children:s.jsxs("div",{className:"flex-1 relative",children:[m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`bg-white px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce ${m.includes("")?"border-green-400 text-green-600":"border-yellow-400 text-yellow-600"}`,children:m})}),s.jsxs(Ue,{camera:{position:[0,2,8],fov:45},children:[s.jsx("color",{attach:"background",args:["#1f2937"]}),s.jsx("ambientLight",{intensity:.4}),s.jsx(yJ,{lightPosIndex:n,objectType:l,lightCount:r}),s.jsx("group",{position:[0,1,0],children:Array.from({length:r},(S,j)=>s.jsx(bJ,{index:j,totalLights:r,active:d===j||d!==null&&j===n,onClick:()=>_(j)},j))}),s.jsx(ht,{enableRotate:!1})]}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:s.jsxs("div",{className:"bg-slate-700/80 backdrop-blur px-4 py-2 rounded-full text-slate-300 text-sm",children:[" (",r,")"]})})]})})})},iS=({voxels:i,color:e,opacity:t=1,scale:n=1,onClick:a})=>{const r=E.useRef(null),[o,l]=E.useState(!1);return Yt(u=>{if(r.current&&a){r.current.rotation.y+=.01;const d=o?n*1.1:n;r.current.scale.lerp(new Q(d,d,d),.1)}}),s.jsx("group",{ref:r,scale:[n,n,n],onClick:a?u=>{u.stopPropagation(),a()}:void 0,onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),children:i.map((u,d)=>s.jsxs("mesh",{position:u,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e,transparent:!0,opacity:t,depthWrite:t===1}),t===1&&s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},d))})},SJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const S=[];for(let q=0;q<3;q++)for(let W=0;W<3;W++)for(let ie=0;ie<3;ie++)S.push([q-1,W-1,ie-1]);a(S);const j=["column","cross","corner","tunnel"],A=j[Math.floor(Math.random()*j.length)],C=[];if(A==="column"){const q=Math.floor(Math.random()*3)-1,W=Math.floor(Math.random()*3)-1;for(let ie=-1;ie<=1;ie++)C.push([q,ie,W])}else if(A==="cross")for(let q=-1;q<=1;q++)C.push([q,0,0]),q!==0&&C.push([0,q,0]),q!==0&&C.push([0,0,q]);else if(A==="corner")C.push([1,1,1]),C.push([0,1,1]),C.push([1,0,1]),C.push([1,1,0]),C.push([0,0,0]);else{for(let q=-1;q<=1;q++)C.push([q,0,0]);for(let q=-1;q<=1;q++)C.push([0,1,q])}o(C);const N=S.filter(q=>!C.some(W=>W[0]===q[0]&&W[1]===q[1]&&W[2]===q[2])),R=C.map(q=>[q[0]+1,q[1],q[2]]),O=S.filter(q=>!R.some(W=>W[0]===q[0]&&W[1]===q[1]&&W[2]===q[2])),U=C.map(q=>[q[1],q[0],q[2]]),z=S.filter(q=>!U.some(W=>W[0]===q[0]&&W[1]===q[1]&&W[2]===q[2])),I=[...N];I.length>0&&I.pop();const V=[N,O,z,I].filter((q,W,ie)=>ie.findIndex(B=>JSON.stringify(B.sort())===JSON.stringify(q.sort()))===W).slice(0,3);for(;V.length<3;)V.push(N.slice(0,N.length-1-V.length));const F=V.map(q=>({val:q,sort:Math.random()})).sort((q,W)=>q.sort-W.sort).map(({val:q})=>q);u(F),f(F.findIndex(q=>JSON.stringify(q.sort())===JSON.stringify(N.sort()))),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{M===d?(x(" !"),setTimeout(()=>t(_=>_+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[50%] w-full relative bg-blue-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsxs(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:[s.jsxs("group",{children:[s.jsx(iS,{voxels:n,color:"#ef4444"}),s.jsx(qa,{speed:5,rotationIntensity:0,floatIntensity:0,children:s.jsx(iS,{voxels:r,color:"#3b82f6",opacity:.6,scale:1.02})})]}),s.jsx(xs,{position:[-3,0,0],fontSize:2,color:"#1e293b",children:"-"}),s.jsx(xs,{position:[3,0,0],fontSize:2,color:"#1e293b",children:"="}),s.jsx(xs,{position:[4.5,0,0],fontSize:2,color:"#94a3b8",children:"?"})]}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:" -  = ?"})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4",children:[m&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-400 text-xl font-bold text-blue-600 shadow-xl animate-bounce",children:m})}),s.jsxs(Ue,{camera:{position:[0,0,10],fov:40},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:l.map((M,_)=>s.jsx("group",{position:[(_-1)*3.5,0,0],children:s.jsx(iS,{voxels:M,color:"#ef4444",scale:.7,onClick:()=>v(_)})},_))})]}),s.jsx("div",{className:"absolute bottom-4 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},_J=({pathIndices:i})=>{const e=r=>{switch(r){case 0:return new Q(.51,0,0);case 1:return new Q(-.51,0,0);case 2:return new Q(0,.51,0);case 3:return new Q(0,-.51,0);case 4:return new Q(0,0,.51);case 5:return new Q(0,0,-.51)}return new Q},t=[],n=(r,o)=>{const l=e(r),u=e(o);return l.clone().add(u).multiplyScalar(.5).normalize().multiplyScalar(.51)};for(let r=0;r<i.length-1;r++){const o=i[r],l=i[r+1];t.push(e(o)),t.push(n(o,l))}t.push(e(i[i.length-1]));const a=E.useRef(null);return Yt(()=>{a.current&&(a.current.rotation.y+=.005,a.current.rotation.x+=.002)}),s.jsxs("group",{ref:a,children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#fce7f3",polygonOffset:!0,polygonOffsetFactor:1}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"#db2777",transparent:!0,opacity:.2})]})]}),t.length>1&&s.jsxs("line",{children:[s.jsx("bufferGeometry",{children:s.jsx("float32BufferAttribute",{attach:"attributes-position",args:[new Float32Array(t.flatMap(r=>[r.x,r.y,r.z])),3]})}),s.jsx("lineBasicMaterial",{color:"#be185d",linewidth:4})]}),i.map((r,o)=>s.jsxs("mesh",{position:e(r),children:[s.jsx("sphereGeometry",{args:[.08]}),s.jsx("meshBasicMaterial",{color:"#be185d"})]},o))]})},wJ=({pathIndices:i,onClick:e})=>{const t={2:[1,0],1:[0,1],4:[1,1],0:[2,1],3:[1,2],5:[1,3]},n=a=>{const[r,o]=t[a];return[r*60+30,o*60+30]};return s.jsx("button",{onClick:e,className:"relative bg-white border-2 border-fuchsia-200 rounded-xl hover:bg-fuchsia-50 hover:border-fuchsia-400 active:scale-95 transition-all w-48 h-64 shadow-sm overflow-hidden flex items-center justify-center",children:s.jsxs("div",{className:"relative w-[180px] h-[240px] scale-90 origin-center",children:[Object.entries(t).map(([a,[r,o]])=>s.jsx("div",{className:"absolute border border-fuchsia-200 bg-fuchsia-50/50",style:{left:r*60,top:o*60,width:60,height:60}},a)),s.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[s.jsx("polyline",{points:i.map(a=>n(a).join(",")).join(" "),fill:"none",stroke:"#be185d",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.map((a,r)=>{const[o,l]=n(a);return s.jsx("circle",{cx:o,cy:l,r:"4",fill:"#be185d"},r)})]})]})})},jJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const g={0:[2,3,4,5],1:[2,3,4,5],2:[0,1,4,5],3:[0,1,4,5],4:[0,1,2,3],5:[0,1,2,3]},M=[Math.floor(Math.random()*6)];for(let U=0;U<2;U++){const z=M[M.length-1],I=g[z].filter(V=>!M.includes(V));if(I.length===0)break;M.push(I[Math.floor(Math.random()*I.length)])}a(M);const _=M,S=[...M];if(S.length>1){const U=S.pop(),z=S.pop();S.push(U,z)}const j=[...M];j.pop();const A=j[j.length-1],C=g[A].filter(U=>U!==M[M.length-1]&&!j.includes(U));C.length>0?j.push(C[0]):j.push(M[M.length-1]);const O=[_,S,j,[0,4,2]].map(U=>JSON.stringify(U)).filter((U,z,I)=>I.indexOf(U)===z).map(U=>JSON.parse(U)).slice(0,3).map(U=>({val:U,sort:Math.random()})).sort((U,z)=>U.sort-z.sort).map(({val:U})=>U);o(O),u(O.findIndex(U=>JSON.stringify(U)===JSON.stringify(_))),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===l?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[45%] w-full relative bg-fuchsia-50/50 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[2.5,2.5,2.5],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(_J,{pathIndices:n})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:2})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-fuchsia-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-4 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-fuchsia-400 text-xl font-bold text-fuchsia-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex gap-4 overflow-x-auto w-full justify-center px-4",children:r.map((g,v)=>s.jsx(wJ,{pathIndices:g,onClick:()=>x(v)},v))}),s.jsx("div",{className:"mt-4 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},EJ=({positions:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("boxGeometry",{args:[.98,.98,.98]}),s.jsx("meshStandardMaterial",{color:Ot[t%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.98,.98,.98)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.15})]})]},t))}),TJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(0),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{let M=[];for(let C=0;C<3;C++)for(let N=0;N<3;N++)for(let R=0;R<3;R++)M.push([C-1,N-1,R-1]);const _=4+Math.floor(Math.random()*6);for(let C=0;C<_;C++){const N=M.filter(R=>[[R[0]+1,R[1],R[2]],[R[0]-1,R[1],R[2]],[R[0],R[1]+1,R[2]],[R[0],R[1]-1,R[2]],[R[0],R[1],R[2]+1],[R[0],R[1],R[2]-1]].filter(z=>M.some(I=>I[0]===z[0]&&I[1]===z[1]&&I[2]===z[2])).length<6);if(N.length>0){const R=N[Math.floor(Math.random()*N.length)];M=M.filter(O=>O!==R)}}a(M);let S=0;M.forEach(C=>{[[C[0]+1,C[1],C[2]],[C[0]-1,C[1],C[2]],[C[0],C[1]+1,C[2]],[C[0],C[1]-1,C[2]],[C[0],C[1],C[2]+1],[C[0],C[1],C[2]-1]].filter(O=>M.some(U=>U[0]===O[0]&&U[1]===O[1]&&U[2]===O[2])).length===6&&S++}),o(S);const j=S,A=new Set([j]);for(;A.size<4;){const C=Math.max(0,j+Math.floor(Math.random()*5)-2);A.add(C)}u(Array.from(A).sort((C,N)=>C-N)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===r?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"h-[60%] w-full relative bg-slate-800 border-b-4 border-white",children:[s.jsxs(Ue,{camera:{position:[5,6,6],fov:45},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(EJ,{positions:n})}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:1})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-slate-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow",children:""})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-100 p-6 flex flex-col items-center justify-center",children:[d&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-slate-400 text-xl font-bold text-slate-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"flex gap-4",children:l.map(g=>s.jsx("button",{onClick:()=>x(g),className:"w-16 h-16 sm:w-20 sm:h-20 bg-white border-b-4 border-slate-300 rounded-2xl text-3xl font-black text-slate-700 shadow-md hover:bg-slate-200 active:scale-95 transition-all",children:g},g))}),s.jsx("div",{className:"mt-4 text-slate-400 text-sm pointer-events-none",children:""})]})]})})},AJ=({shape:i,rotation:e})=>s.jsx("group",{rotation:e,children:i.map((t,n)=>s.jsxs("mesh",{position:[t[0],t[1],t[2]],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[0]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},n))}),CJ=({shape:i,onRotate:e})=>{const t=E.useRef(null),[n,a]=E.useState(!1),r=E.useRef({x:0,y:0}),o=u=>{u.stopPropagation(),a(!0),r.current={x:u.clientX,y:u.clientY}},l=u=>{if(!n||!t.current)return;u.stopPropagation();const d=u.clientX-r.current.x,f=u.clientY-r.current.y;t.current.rotation.y+=d*.01,t.current.rotation.x+=f*.01,r.current={x:u.clientX,y:u.clientY},e([t.current.rotation.x,t.current.rotation.y,t.current.rotation.z])};return E.useEffect(()=>{const u=()=>a(!1);return window.addEventListener("pointerup",u),()=>window.removeEventListener("pointerup",u)},[]),s.jsxs("group",{ref:t,onPointerDown:o,onPointerMove:l,children:[i.map((u,d)=>s.jsxs("mesh",{position:[u[0],u[1],u[2]],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:n?"#fb923c":"#f97316"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"white",transparent:!0,opacity:.5})]})]},d)),s.jsxs("mesh",{visible:!1,children:[s.jsx("sphereGeometry",{args:[2.5]}),s.jsx("meshBasicMaterial",{color:"red"})]})]})},NJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([0,0,0]),[l,u]=E.useState([0,0,0]),[d,f]=E.useState(""),m=()=>{a([[0,0,0],[0,1,0],[1,0,0]]);const j=Math.floor(Math.random()*4)*(Math.PI/2),A=Math.floor(Math.random()*4)*(Math.PI/2);o([j,A,0]),u([0,0,0]),f("")};E.useEffect(()=>{m()},[e]);const x=()=>{const S=new Wn().setFromEuler(new is(...r));new Wn().setFromEuler(new is(...l)).angleTo(S)<.3?(f(" !"),setTimeout(()=>t(C=>C+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},g=Math.PI/4,v=S=>{const j=[l[0]+S*g,l[1],l[2]];u(j)},M=S=>{const j=[l[0],l[1]+S*g,l[2]];u(j)},_=S=>{const j=[l[0],l[1],l[2]+S*g];u(j)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-orange-50",children:[s.jsxs("div",{className:"h-[35%] border-b-4 border-white relative bg-orange-100",children:[s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(AJ,{shape:n,rotation:r})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-orange-500 text-white px-2 py-1 rounded text-sm font-bold",children:" "})]}),s.jsxs("div",{className:"h-[35%] relative",children:[s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(CJ,{shape:n,onRotate:u})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-orange-400 text-white px-2 py-1 rounded text-sm font-bold",children:" "}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-orange-400 text-xl font-bold text-orange-600 shadow-xl animate-bounce",children:d})})]}),s.jsxs("div",{className:"h-[30%] bg-white p-3 border-t-2 border-orange-200",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-2 h-full",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-red-500 font-bold",children:"X"}),s.jsxs("div",{className:"flex-1 flex gap-1",children:[s.jsx("button",{onClick:()=>v(-1),className:"flex-1 bg-red-100 text-red-600 rounded-lg font-bold text-xl active:bg-red-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>v(1),className:"flex-1 bg-red-100 text-red-600 rounded-lg font-bold text-xl active:bg-red-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-green-500 font-bold",children:"Y"}),s.jsxs("div",{className:"flex-1 flex gap-1",children:[s.jsx("button",{onClick:()=>M(-1),className:"flex-1 bg-green-100 text-green-600 rounded-lg font-bold text-xl active:bg-green-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>M(1),className:"flex-1 bg-green-100 text-green-600 rounded-lg font-bold text-xl active:bg-green-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-blue-500 font-bold",children:"Z"}),s.jsxs("div",{className:"flex-1 flex gap-1",children:[s.jsx("button",{onClick:()=>_(-1),className:"flex-1 bg-blue-100 text-blue-600 rounded-lg font-bold text-xl active:bg-blue-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>_(1),className:"flex-1 bg-blue-100 text-blue-600 rounded-lg font-bold text-xl active:bg-blue-200 active:scale-95",children:""})]})]})]}),s.jsx("button",{onClick:x,className:"w-full mt-2 py-3 bg-orange-500 text-white rounded-xl text-lg font-bold shadow-lg border-b-4 border-orange-700 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]})})},_v=["#ef4444","#3b82f6","#22c55e","#eab308"],RJ=({faceColors:i})=>{const e=E.useRef(null);Yt(()=>{e.current&&(e.current.rotation.y+=.01,e.current.rotation.x+=.005)});const t=i.map(n=>new yi({color:n}));return s.jsx("mesh",{ref:e,material:t,children:s.jsx("boxGeometry",{args:[1.5,1.5,1.5]})})},DJ=({colors:i,selectedColor:e,onPaint:t})=>{const n=i.map(a=>new yi({color:a,roughness:.1}));return s.jsx("mesh",{material:n,onClick:a=>{if(a.stopPropagation(),a.face){const r=a.face.materialIndex;r!==void 0&&t(r,e)}},children:s.jsx("boxGeometry",{args:[2.5,2.5,2.5]})})},LJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(_v[0]),[d,f]=E.useState(""),m=()=>{const v=Array(6).fill("").map(()=>_v[Math.floor(Math.random()*_v.length)]);a(v),o(Array(6).fill("#ffffff")),f("")};E.useEffect(()=>{m()},[e]);const x=(v,M)=>{const _=[...r];_[v]=M,o(_)},g=()=>{r.every((M,_)=>M===n[_])?(f(" !"),setTimeout(()=>t(M=>M+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 w-32 h-32 bg-white/50 backdrop-blur border-2 border-indigo-200 rounded-xl shadow-lg z-10 pointer-events-none",children:[s.jsx("div",{className:"absolute -top-2 -left-2 bg-indigo-500 text-white text-xs px-2 py-1 rounded font-bold",children:""}),s.jsxs(Ue,{children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[2,2,2],intensity:1}),s.jsx(RJ,{faceColors:n})]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(DJ,{colors:r,selectedColor:l,onPaint:x}),s.jsx(ht,{minPolarAngle:0,maxPolarAngle:Math.PI})]})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white p-4 rounded-t-3xl shadow-2xl flex flex-col items-center gap-4",children:[s.jsx("div",{className:"flex gap-4",children:_v.map(v=>s.jsx("button",{onClick:()=>u(v),className:`w-12 h-12 rounded-full border-4 transition-transform ${l===v?"scale-125 border-slate-800":"border-white shadow-md"}`,style:{backgroundColor:v}},v))}),s.jsx("button",{onClick:g,className:"w-full max-w-xs bg-indigo-600 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition-all",children:""})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-400 text-xl font-bold text-indigo-600 shadow-xl animate-bounce",children:d})})]})})},UJ=({pos:i,isPath:e,isCurrent:t,isGoal:n,onClick:a})=>{const r=t?"#4ade80":n?"#f87171":"#e2e8f0";return s.jsxs("group",{position:i,onClick:o=>{o.stopPropagation(),a()},children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:r}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"#94a3b8",transparent:!0,opacity:.5})]})]}),t&&s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-3xl animate-bounce",children:""})}),n&&s.jsx(gs,{center:!0,position:[0,.5,0],children:s.jsx("div",{className:"text-3xl",children:""})})]})},PJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([0,0,0]),[l,u]=E.useState([0,0,0]),[d,f]=E.useState(""),m=()=>{const g=5+e,v=[[0,0,0]],M=new Set(["0,0,0"]);let _=[0,0,0];for(let S=0;S<g;S++){const A=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(N=>[_[0]+N[0],_[1]+N[1],_[2]+N[2]]).filter(N=>!M.has(`${N[0]},${N[1]},${N[2]}`));if(A.length===0)break;const C=A[Math.floor(Math.random()*A.length)];v.push(C),M.add(`${C[0]},${C[1]},${C[2]}`),_=C}a(v),o([0,0,0]),u(v[v.length-1]),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{if(d)return;const v=Math.abs(g[0]-r[0]),M=Math.abs(g[1]-r[1]),_=Math.abs(g[2]-r[2]);v+M+_===1&&(o(g),g[0]===l[0]&&g[1]===l[1]&&g[2]===l[2]&&(f(" !"),setTimeout(()=>t(j=>j+1),1500)))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:50},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("group",{position:[0,0,0],children:n.map((g,v)=>s.jsx(UJ,{pos:g,isPath:!0,isCurrent:g[0]===r[0]&&g[1]===r[1]&&g[2]===r[2],isGoal:g[0]===l[0]&&g[1]===l[1]&&g[2]===l[2],onClick:()=>x(g)},v))}),s.jsx(ht,{autoRotate:!1})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-green-100 px-6 py-2 rounded-full border-2 border-green-500 text-xl font-bold text-green-700 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"absolute bottom-8 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})})})},OJ=({voxels:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:Ot[0]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.9,.9,.9)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},t))}),zJ=({blocks:i,onAdd:e,onRemove:t,mode:n})=>{const[a,r]=E.useState(null),o=u=>{if(u.stopPropagation(),n==="build"){if(u.object.name==="ground"){const d=Math.round(u.point.x),f=Math.round(u.point.z);r([d,0,f])}else if(u.face){const d=new Q().copy(u.object.position).add(u.face.normal);r([d.x,d.y,d.z])}}else r(null)},l=u=>{if(u.stopPropagation(),n==="build"&&a)e(a);else if(n==="destroy"&&u.object.name!=="ground"){const d=u.object.position,f=i.findIndex(m=>m[0]===d.x&&m[1]===d.y&&m[2]===d.z);f!==-1&&t(f)}};return s.jsxs("group",{children:[s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#94a3b8",cellColor:"#cbd5e1",position:[0,-.5,0]}),s.jsxs("mesh",{name:"ground",rotation:[-Math.PI/2,0,0],position:[0,-.5,0],onPointerMove:o,onClick:l,children:[s.jsx("planeGeometry",{args:[20,20]}),s.jsx("meshBasicMaterial",{visible:!1})]}),i.map((u,d)=>s.jsxs("mesh",{position:u,onPointerMove:o,onClick:l,onPointerOver:f=>{f.stopPropagation(),document.body.style.cursor=n==="destroy"?"not-allowed":"auto"},onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:n==="destroy"?"#ef4444":"#fcd34d"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},d)),n==="build"&&a&&s.jsxs("mesh",{position:a,children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshBasicMaterial",{color:"#fcd34d",transparent:!0,opacity:.5})]})]})},GJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState("build"),[d,f]=E.useState(""),m={single:[[0,0,0]],stack2:[[0,0,0],[0,1,0]],line2:[[0,0,0],[1,0,0]],corner2:[[0,0,0],[1,0,0],[0,0,1]],L_flat:[[0,0,0],[1,0,0],[2,0,0],[0,0,1]],T_flat:[[0,0,0],[1,0,0],[2,0,0],[1,0,1]],stack3:[[0,0,0],[0,1,0],[0,2,0]],step2:[[0,0,0],[1,0,0],[1,1,0]],stairs:[[0,0,0],[1,0,0],[1,1,0],[2,0,0],[2,1,0],[2,2,0]],bridge:[[0,0,0],[2,0,0],[0,1,0],[1,1,0],[2,1,0]],tower_base:[[0,0,0],[1,0,0],[0,0,1],[1,0,1],[0,1,0]],snake:[[0,0,0],[1,0,0],[1,0,1],[2,0,1],[2,0,2]],plus:[[1,0,0],[0,0,1],[1,0,1],[2,0,1],[1,0,2]],chair:[[0,0,0],[1,0,0],[0,0,1],[1,0,1],[0,1,0],[0,2,0]],table:[[0,0,0],[2,0,0],[0,0,2],[2,0,2],[1,1,1]],arch:[[0,0,0],[0,1,0],[0,2,0],[1,2,0],[2,2,0],[2,1,0],[2,0,0]],pyramid:[[0,0,0],[1,0,0],[0,0,1],[1,0,1],[0,1,0],[1,1,0],[0,1,1],[1,1,1],[0,2,0]],castle:[[0,0,0],[2,0,0],[0,0,2],[2,0,2],[0,1,0],[2,1,0],[0,1,2],[2,1,2],[0,2,0],[2,2,0],[0,2,2],[2,2,2]],spiral:[[0,0,0],[1,0,0],[1,0,1],[0,0,1],[0,1,1],[0,1,0],[1,1,0],[1,1,1]],cross3d:[[1,0,1],[0,0,1],[2,0,1],[1,0,0],[1,0,2],[1,1,1],[1,2,1]]},x=()=>{let S;if(e===1)S=[...m.single];else if(e===2)S=[...m.stack2];else if(e===3)S=[...m.corner2];else if(e<=6){const j=["L_flat","T_flat","stack3","step2"];S=[...m[j[(e-4)%j.length]]]}else if(e<=10){const j=["stairs","bridge","tower_base","snake","plus"];S=[...m[j[(e-7)%j.length]]]}else if(e<=14){const j=["chair","table","arch","pyramid"];S=[...m[j[(e-11)%j.length]]]}else if(e<=18){const j=["castle","spiral","cross3d"];S=[...m[j[(e-15)%j.length]]]}else{const j=10+Math.floor((e-18)*1.5);S=[[0,0,0]];const A=new Set(["0,0,0"]);for(let C=1;C<j;C++){const N=S[Math.floor(Math.random()*S.length)],O=[[0,1,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1]].map(U=>[N[0]+U[0],N[1]+U[1],N[2]+U[2]]).filter(U=>!A.has(`${U[0]},${U[1]},${U[2]}`)&&U[1]>=0);if(O.length>0){const U=O[Math.floor(Math.random()*O.length)];S.push(U),A.add(`${U[0]},${U[1]},${U[2]}`)}}}if(e>=5){const j=Math.floor(Math.random()*4);for(let A=0;A<j;A++)S=S.map(([C,N,R])=>[-R,N,C])}e>=8&&Math.random()>.5&&(S=S.map(([j,A,C])=>[-j,A,C])),a(S),o([]),f(""),u("build")};E.useEffect(()=>{x()},[e]);const g=S=>{r.some(j=>j[0]===S[0]&&j[1]===S[1]&&j[2]===S[2])||o([...r,S])},v=S=>{const j=[...r];j.splice(S,1),o(j)},M=()=>{if(r.length===0)return;const S=C=>{if(C.length===0)return[];const N=Math.min(...C.map(z=>z[0])),R=Math.min(...C.map(z=>z[1])),O=Math.min(...C.map(z=>z[2]));return C.map(z=>[z[0]-N,z[1]-R,z[2]-O]).sort((z,I)=>z[0]-I[0]||z[1]-I[1]||z[2]-I[2])},j=S(n),A=S(r);JSON.stringify(j)===JSON.stringify(A)?(f(" !"),setTimeout(()=>t(C=>C+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},_=()=>e<=3?"":e<=6?"":e<=10?"":e<=14?"":"";return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${_()}] - ${n.length}`,children:s.jsxs("div",{className:"flex flex-col h-full relative bg-slate-50",children:[s.jsxs("div",{className:"absolute top-4 left-4 w-40 h-40 bg-white/80 backdrop-blur border-4 border-yellow-400 rounded-xl shadow-xl z-10 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 bg-yellow-400 text-white text-xs px-2 py-1 font-bold rounded-br-lg z-20",children:""}),s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-1,0],children:s.jsx(OJ,{voxels:n})}),s.jsx(ht,{autoRotate:!0})]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[8,8,8],fov:45},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,20,10],intensity:1,castShadow:!0}),s.jsx(zJ,{blocks:r,onAdd:g,onRemove:v,mode:l}),s.jsx(ht,{makeDefault:!0})]})}),s.jsxs("div",{className:"absolute bottom-6 left-0 right-0 flex flex-col items-center gap-4 pointer-events-none",children:[d&&s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-yellow-400 text-xl font-bold text-yellow-600 shadow-xl animate-bounce",children:d}),s.jsxs("div",{className:"pointer-events-auto flex gap-4 bg-white p-2 rounded-2xl shadow-lg border border-slate-200",children:[s.jsx("button",{onClick:()=>u("build"),className:`px-6 py-3 rounded-xl font-bold transition-all ${l==="build"?"bg-yellow-400 text-white shadow-md":"bg-slate-100 text-slate-500"}`,children:" "}),s.jsx("button",{onClick:()=>u("destroy"),className:`px-6 py-3 rounded-xl font-bold transition-all ${l==="destroy"?"bg-red-400 text-white shadow-md":"bg-slate-100 text-slate-500"}`,children:" "}),s.jsx("div",{className:"w-px bg-slate-200 mx-1"}),s.jsx("button",{onClick:M,className:"px-6 py-3 rounded-xl font-bold bg-green-500 text-white shadow-md hover:bg-green-600 active:scale-95",children:" "})]})]})]})})},t6=({shapeType:i,isTarget:e})=>{const t=e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):null;switch(i){case 0:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.5,0,0],children:[s.jsx("boxGeometry",{args:[1,3,1]}),e?t:s.jsx("meshStandardMaterial",{color:"#6366f1"})]}),s.jsxs("mesh",{position:[-.5,1,0],children:[s.jsx("sphereGeometry",{args:[.8]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[0,-1,.5],rotation:[Math.PI/2,0,0],children:[s.jsx("coneGeometry",{args:[.6,2]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#22c55e"})]})]});case 1:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[1,2,1]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#f97316"})]}),s.jsxs("mesh",{position:[1,-.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#fb923c"})]})]});case 2:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[3,1,1]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#8b5cf6"})]}),s.jsxs("mesh",{position:[0,-.5,0],children:[s.jsx("boxGeometry",{args:[1,2,1]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#a78bfa"})]})]});case 3:return s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.5,.5,2.5]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{position:[0,0,.3],children:[s.jsx("boxGeometry",{args:[2.5,.1,.6]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{position:[0,.3,-1],children:[s.jsx("boxGeometry",{args:[.1,.6,.3]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#2563eb"})]})]});default:return s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,1]}),e?s.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.3,wireframe:!0}):s.jsx("meshStandardMaterial",{color:"#6366f1"})]})}},IJ=({rotation:i,shapeType:e})=>s.jsx("group",{rotation:i,children:s.jsx(t6,{shapeType:e,isTarget:!0})}),kJ=({rotation:i,shapeType:e})=>s.jsx("group",{rotation:i,children:s.jsx(t6,{shapeType:e,isTarget:!1})}),BJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0]),[r,o]=E.useState([0,0,0]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>e<=2?{shapes:[1,2],axes:1,tolerance:.4,step:Math.PI/4}:e<=5?{shapes:[0,1,2],axes:2,tolerance:.35,step:Math.PI/4}:e<=9?{shapes:[0,1,2,3],axes:2,tolerance:.3,step:Math.PI/6}:{shapes:[0,1,2,3],axes:2,tolerance:.25,step:Math.PI/8},x=()=>{const S=m();u(S.shapes[Math.floor(Math.random()*S.shapes.length)]);const j=S.axes>=1?Math.floor(Math.random()*4)*Math.PI/2:0,A=S.axes>=2?Math.floor(Math.random()*4)*Math.PI/2:0;a([j,A,0]),o([0,0,0]),f("")};E.useEffect(()=>{x()},[e]);const g=()=>e<=2?"":e<=5?"":e<=9?"":"",v=(S,j)=>{if(d)return;const A=m(),C=[...r];S==="x"&&(C[0]+=j*A.step),S==="y"&&(C[1]+=j*A.step),o(C)},M=()=>{d||o([0,0,0])},_=()=>{const S=m(),j=new Wn().setFromEuler(new is(...n));new Wn().setFromEuler(new is(...r)).angleTo(j)<S.tolerance?(f(" !"),setTimeout(()=>t(N=>N+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${g()}] - `,children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-900",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8]},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("pointLight",{position:[-10,-10,5],intensity:.5}),s.jsx(IJ,{rotation:n,shapeType:l}),s.jsx(kJ,{rotation:r,shapeType:l})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`bg-slate-100 px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce ${d.includes("")?"border-green-500 text-green-700":"border-indigo-500 text-indigo-700"}`,children:d})})]}),s.jsxs("div",{className:"bg-slate-800 p-4 border-t-2 border-slate-700",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-red-400 font-bold",children:""}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>v("x",-1),className:"flex-1 py-4 bg-red-900/50 text-red-400 rounded-lg font-bold text-xl active:bg-red-800 active:scale-95",children:""}),s.jsx("button",{onClick:()=>v("x",1),className:"flex-1 py-4 bg-red-900/50 text-red-400 rounded-lg font-bold text-xl active:bg-red-800 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-green-400 font-bold",children:""}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>v("y",-1),className:"flex-1 py-4 bg-green-900/50 text-green-400 rounded-lg font-bold text-xl active:bg-green-800 active:scale-95",children:""}),s.jsx("button",{onClick:()=>v("y",1),className:"flex-1 py-4 bg-green-900/50 text-green-400 rounded-lg font-bold text-xl active:bg-green-800 active:scale-95",children:""})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:M,className:"flex-1 py-3 bg-slate-700 text-slate-300 rounded-xl font-bold active:bg-slate-600 active:scale-95",children:" "}),s.jsx("button",{onClick:_,className:"flex-[2] py-3 bg-indigo-500 text-white rounded-xl font-bold shadow-lg border-b-4 border-indigo-700 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]})]})})},FJ=({type:i,rot:e,onClick:t,connected:n})=>{const a=[0,0,e*Math.PI/2],r=n?"#60a5fa":"#cbd5e1";return s.jsxs("group",{rotation:a,onClick:o=>{o.stopPropagation(),t==null||t()},children:[s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.35]}),s.jsx("meshStandardMaterial",{color:r})]}),s.jsxs("mesh",{position:[.5,0,0],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.2,.2,1]}),s.jsx("meshStandardMaterial",{color:r})]}),i==="straight"&&s.jsxs("mesh",{position:[-.5,0,0],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.2,.2,1]}),s.jsx("meshStandardMaterial",{color:r})]}),i==="corner"&&s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("cylinderGeometry",{args:[.2,.2,1]}),s.jsx("meshStandardMaterial",{color:r})]})]})},VJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=3,f=()=>{const x=Array(d).fill(null).map(()=>Array(d).fill(null));let g=0;for(let v=0;v<d;v++)for(let M=0;M<d;M++)M===0&&v===1?x[v][M]={id:g++,type:"straight",rot:0,fixed:!0}:M===2&&v===1?x[v][M]={id:g++,type:"straight",rot:0,fixed:!0}:x[v][M]={id:g++,type:Math.random()>.5?"straight":"corner",rot:Math.floor(Math.random()*4)};a(x),u("")};E.useEffect(()=>{f()},[e]),E.useEffect(()=>{const x=Array(d).fill(!1).map(()=>Array(d).fill(!1)),g=[[0,1]];x[1][0]=!0;const v=(M,_,S)=>{const j=n[_][M];if(!j)return!1;const A=(S-j.rot+4)%4;return j.type==="straight"?A===0||A===2:j.type==="corner"?A===0||A===1:!1};for(;g.length>0;){const[M,_]=g.shift();[[1,0],[0,1],[-1,0],[0,-1]].forEach(([j,A],C)=>{const N=M+j,R=_+A;N>=0&&N<d&&R>=0&&R<d&&!x[R][N]&&v(M,_,C)&&v(N,R,(C+2)%4)&&(x[R][N]=!0,g.push([N,R]))})}o(x),x[1][2]&&!l&&(u(" !"),setTimeout(()=>t(M=>M+1),2e3))},[n,l]);const m=(x,g)=>{var _;if(l||(_=n[g][x])!=null&&_.fixed)return;const v=[...n];v[g]=[...v[g]];const M=v[g][x];v[g][x]={...M,rot:(M.rot+1)%4},a(v)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-blue-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("group",{position:[-1.5,-1.5,0],children:n.map((x,g)=>x.map((v,M)=>v&&s.jsxs("group",{position:[M*1.5,g*1.5,0],children:[s.jsx(FJ,{type:v.type,rot:v.rot,onClick:()=>m(M,g),connected:r[g]?r[g][M]:!1}),M===0&&g===1&&s.jsxs("mesh",{position:[-.8,0,0],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#22c55e"})]}),M===2&&g===1&&s.jsxs("mesh",{position:[.8,0,0],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]})]},v.id)))}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-400 text-xl font-bold text-blue-600 shadow-xl animate-bounce",children:l})})]})})})},HJ=({voxels:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[0]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},t))}),qJ=({blocks:i,onToggle:e})=>{const[t,n]=E.useState(null),a=o=>{if(o.stopPropagation(),o.object.name==="plane"){const l=Math.round(o.point.x);Math.round(o.point.y);const u=Math.round(o.point.z);l>0?n([l,0,u]):n(null)}else o.object.name==="block"&&n(null)},r=o=>{if(o.stopPropagation(),o.object.name==="plane"&&t)e(t);else if(o.object.name==="block"){const l=o.object.position;e([l.x,l.y,l.z])}};return s.jsxs("group",{children:[s.jsxs("mesh",{name:"plane",rotation:[-Math.PI/2,0,0],position:[2.5,-.5,0],onPointerMove:a,onClick:r,children:[s.jsx("planeGeometry",{args:[5,10]}),s.jsx("meshBasicMaterial",{visible:!1})]}),s.jsx(Gi,{args:[10,10],sectionColor:"#94a3b8",cellColor:"#cbd5e1",position:[0,-.5,0],infiniteGrid:!1}),s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.2,.1,10]}),s.jsx("meshStandardMaterial",{color:"#0ea5e9",emissive:"#0ea5e9",emissiveIntensity:.5})]}),s.jsxs("mesh",{position:[0,2,0],rotation:[0,Math.PI/2,0],children:[s.jsx("planeGeometry",{args:[10,4]}),s.jsx("meshPhysicalMaterial",{color:"#e0f2fe",transparent:!0,opacity:.3,side:Ms,metalness:.8,roughness:.1})]}),i.map((o,l)=>s.jsxs("mesh",{name:"block",position:o,onClick:r,onPointerOver:u=>{u.stopPropagation(),document.body.style.cursor="pointer"},onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[2]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"white",transparent:!0,opacity:.5})]})]},l)),t&&s.jsxs("mesh",{position:t,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshBasicMaterial",{color:Ot[2],transparent:!0,opacity:.4})]})]})},XJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const x=3+Math.min(4,Math.floor(e/2)),g=[],v=new Set;for(let M=0;M<x;M++){let _,S;do _=-(Math.floor(Math.random()*3)+1),S=Math.floor(Math.random()*5)-2;while(v.has(`${_},0,${S}`));v.add(`${_},0,${S}`),g.push([_,0,S])}a(g),o([]),u("")};E.useEffect(()=>{d()},[e]);const f=x=>{const g=r.findIndex(v=>v[0]===x[0]&&v[1]===x[1]&&v[2]===x[2]);if(g!==-1){const v=[...r];v.splice(g,1),o(v)}else o([...r,x])},m=()=>{const x=n.map(v=>`${-v[0]},${v[1]},${v[2]}`).sort().join("|"),g=r.map(v=>`${v[0]},${v[1]},${v[2]}`).sort().join("|");x===g?(u(" !"),setTimeout(()=>t(v=>v+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-cyan-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,8,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1,castShadow:!0}),s.jsx(HJ,{voxels:n}),s.jsx(qJ,{blocks:r,onToggle:f}),s.jsx(ht,{maxPolarAngle:Math.PI/2.1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-cyan-400 text-xl font-bold text-cyan-600 shadow-xl animate-bounce",children:l})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center gap-4",children:s.jsx("button",{onClick:m,className:"bg-cyan-500 text-white px-8 py-3 rounded-full text-xl font-bold shadow-lg border-b-4 border-cyan-700 active:scale-95 transition-all",children:""})})]})})})},n6={I:[[0,0,0],[0,1,0],[0,-1,0]],L:[[0,0,0],[0,1,0],[1,0,0]],T:[[0,0,0],[-1,0,0],[1,0,0],[0,1,0]],Z:[[0,0,0],[-1,0,0],[0,1,0],[1,1,0]]},WJ=({shapeKey:i,holeRot:e})=>{const t=n6[i],n=e,a=Math.cos(n),r=Math.sin(n),o=new Set;t.forEach(u=>{const d=Math.round(u[0]*a-u[1]*r),f=Math.round(u[0]*r+u[1]*a);o.add(`${d},${f}`)});const l=[];for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)o.has(`${u},${d}`)||l.push(s.jsxs("mesh",{position:[u,d,0],children:[s.jsx("boxGeometry",{args:[1,1,.5]}),s.jsx("meshStandardMaterial",{color:"#ef4444"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,.5)]}),s.jsx("lineBasicMaterial",{color:"#7f1d1d",transparent:!0,opacity:.3})]})]},`${u}-${d}`));return s.jsxs("group",{position:[0,0,-5],children:[" ",l]})},YJ=({shapeKey:i,rotation:e,zPos:t,onRotate:n})=>{const a=E.useRef(null),[r,o]=E.useState(!1),l=E.useRef({x:0,y:0}),u=m=>{m.stopPropagation(),o(!0),l.current={x:m.clientX,y:m.clientY}},d=m=>{if(!r)return;m.stopPropagation();const x=m.clientX-l.current.x,g=[e[0],e[1],e[2]-x*.01];l.current={x:m.clientX,y:m.clientY},n(g)};E.useEffect(()=>{const m=()=>o(!1);return window.addEventListener("pointerup",m),()=>window.removeEventListener("pointerup",m)},[]),Yt(()=>{a.current&&(a.current.position.z=ks.lerp(a.current.position.z,t,.1))});const f=n6[i];return s.jsxs("group",{ref:a,rotation:e,position:[0,0,0],onPointerDown:u,onPointerMove:d,children:[f.map((m,x)=>s.jsxs("mesh",{position:[m[0],m[1],m[2]],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#22c55e"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"white",transparent:!0,opacity:.5})]})]},x)),s.jsxs("mesh",{visible:!1,children:[s.jsx("sphereGeometry",{args:[3]}),s.jsx("meshBasicMaterial",{color:"red"})]})]})},ZJ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("L"),[r,o]=E.useState(0),[l,u]=E.useState([0,0,0]),[d,f]=E.useState("aiming"),[m,x]=E.useState(0),[g,v]=E.useState(""),M=()=>{const C=["L","T","Z"],N=C[Math.floor(Math.random()*C.length)];a(N);const R=Math.floor(Math.random()*4);o(R*Math.PI/2),u([0,0,0]),x(0),f("aiming"),v("")};E.useEffect(()=>{M()},[e]);const _=()=>{f("flying"),x(-5),setTimeout(()=>{let C=l[2]%(Math.PI*2);C<0&&(C+=Math.PI*2);let N=r%(Math.PI*2),R=Math.abs(C-N);R=Math.min(R,Math.PI*2-R),R<.3?(f("passed"),v(" !"),setTimeout(()=>t(O=>O+1),1500)):(f("crashed"),v(" !"),setTimeout(()=>{x(0),f("aiming"),v("")},1500))},800)},S=Math.PI/8,j=C=>{if(d!=="aiming")return;const N=[l[0],l[1],l[2]+C*S];u(N)},A=C=>{if(d!=="aiming")return;const N=[l[0],l[1],l[2]+C*Math.PI/2];u(N)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-900",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:50},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[5,10,10],intensity:1}),s.jsx(WJ,{shapeKey:n,holeRot:r}),s.jsx(YJ,{shapeKey:n,rotation:l,zPos:m,onRotate:C=>{d==="aiming"&&u(C)}})]}),g&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`px-6 py-2 rounded-full border-4 text-2xl font-black shadow-xl animate-bounce bg-white ${d==="passed"?"border-green-500 text-green-600":"border-red-500 text-red-600"}`,children:g})})]}),s.jsxs("div",{className:"bg-slate-800 p-4 border-t-2 border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[s.jsx("button",{onClick:()=>A(-1),disabled:d!=="aiming",className:`w-14 h-14 rounded-xl font-bold text-lg flex items-center justify-center ${d!=="aiming"?"bg-slate-600 text-slate-400":"bg-blue-500 text-white active:bg-blue-600 active:scale-95"}`,children:"90"}),s.jsx("button",{onClick:()=>j(-1),disabled:d!=="aiming",className:`w-16 h-16 rounded-full font-bold text-2xl ${d!=="aiming"?"bg-slate-600 text-slate-400":"bg-green-500 text-white active:bg-green-600 active:scale-95"}`,children:""}),s.jsxs("div",{className:"w-20 text-center",children:[s.jsx("div",{className:"text-slate-400 text-xs",children:""}),s.jsxs("div",{className:"text-white font-bold text-lg",children:[Math.round(l[2]*180/Math.PI%360),""]})]}),s.jsx("button",{onClick:()=>j(1),disabled:d!=="aiming",className:`w-16 h-16 rounded-full font-bold text-2xl ${d!=="aiming"?"bg-slate-600 text-slate-400":"bg-green-500 text-white active:bg-green-600 active:scale-95"}`,children:""}),s.jsx("button",{onClick:()=>A(1),disabled:d!=="aiming",className:`w-14 h-14 rounded-xl font-bold text-lg flex items-center justify-center ${d!=="aiming"?"bg-slate-600 text-slate-400":"bg-blue-500 text-white active:bg-blue-600 active:scale-95"}`,children:"90"})]}),s.jsx("button",{onClick:_,disabled:d!=="aiming",className:`w-full py-4 rounded-xl text-xl font-black shadow-lg border-b-4 transition-all ${d!=="aiming"?"bg-slate-600 text-slate-400 border-slate-700":"bg-red-500 text-white border-red-700 active:scale-[0.98] active:border-b-0"}`,children:" !"})]})]})})},KJ=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("cylinderGeometry",{args:[1,1,1,32]}),s.jsx("meshStandardMaterial",{color:"#a78bfa"})]}),s.jsxs("mesh",{position:[0,1.5,0],children:[s.jsx("boxGeometry",{args:[1.5,1,1.5]}),s.jsx("meshStandardMaterial",{color:"#818cf8"})]}),s.jsxs("mesh",{position:[0,2.5,0],children:[s.jsx("coneGeometry",{args:[.8,1,32]}),s.jsx("meshStandardMaterial",{color:"#fb7185"})]})]}),JJ=({yPos:i})=>{const e=E.useRef(null);return Yt(()=>{e.current&&(e.current.position.y=i)}),s.jsxs("mesh",{ref:e,rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[4,4]}),s.jsx("meshBasicMaterial",{color:"#f472b6",transparent:!0,opacity:.4,side:Ms}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new Ta(4,4)]}),s.jsx("lineBasicMaterial",{color:"#be185d",linewidth:2})]})]})},QJ=({type:i})=>{let e;return i==="circle"&&(e=s.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500"})),i==="square"&&(e=s.jsx("div",{className:"w-16 h-16 bg-indigo-500"})),i==="small_circle"&&(e=s.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-500"})),s.jsxs("div",{className:"absolute top-4 right-4 bg-white p-4 rounded-xl border-4 border-purple-200 shadow-lg flex flex-col items-center",children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 mb-2",children:""}),e]})},$J=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("circle"),[r,o]=E.useState(0),[l,u]=E.useState(""),d=()=>{const m=["circle","square","small_circle"];a(m[Math.floor(Math.random()*m.length)]),o(0),u("")};E.useEffect(()=>{d()},[e]);const f=()=>{let m=!1;n==="circle"&&r>.1&&r<.9&&(m=!0),n==="square"&&r>1.1&&r<1.9&&(m=!0),n==="small_circle"&&r>2.2&&r<2.9&&(m=!0),m?(u(" !"),setTimeout(()=>t(x=>x+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full relative bg-purple-50",children:[s.jsx(QJ,{type:n}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[4,4,6],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(KJ,{}),s.jsx(JJ,{yPos:r}),s.jsx(ht,{enableZoom:!1,enablePan:!1,maxPolarAngle:Math.PI/1.8}),s.jsxs("mesh",{position:[2,1.5,0],children:[s.jsx("cylinderGeometry",{args:[.05,.05,3]}),s.jsx("meshBasicMaterial",{color:"#ddd"})]})]})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-purple-400 text-xl font-bold text-purple-600 shadow-xl animate-bounce",children:l})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t-2 border-purple-200 p-4 pb-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4 px-2",children:[s.jsx("button",{onClick:()=>o(Math.max(0,r-.3)),className:"w-14 h-14 rounded-full bg-purple-100 text-purple-600 text-2xl font-bold active:bg-purple-200 active:scale-95 transition-all flex items-center justify-center shadow",children:""}),s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:r,onChange:m=>o(parseFloat(m.target.value)),className:"w-full h-3 bg-purple-200 rounded-full appearance-none cursor-pointer accent-purple-500",style:{background:`linear-gradient(to right, #a855f7 0%, #a855f7 ${r/3*100}%, #e9d5ff ${r/3*100}%, #e9d5ff 100%)`}}),s.jsxs("div",{className:"text-sm text-purple-600 font-bold mt-1",children:[": ",r.toFixed(1)]})]}),s.jsx("button",{onClick:()=>o(Math.min(3,r+.3)),className:"w-14 h-14 rounded-full bg-purple-100 text-purple-600 text-2xl font-bold active:bg-purple-200 active:scale-95 transition-all flex items-center justify-center shadow",children:""})]}),s.jsx("button",{onClick:f,className:"w-full bg-purple-500 text-white py-4 rounded-2xl text-xl font-bold shadow-lg border-b-4 border-purple-700 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]})})},eQ=({rot:i,onClick:e})=>{const t=i===0?Math.PI/4:-Math.PI/4;return s.jsxs("group",{onClick:n=>{n.stopPropagation(),e()},rotation:[0,t,0],children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.1,.8,1.2]}),s.jsx("meshStandardMaterial",{color:"#a7f3d0",metalness:.8,roughness:.1})]}),s.jsxs("mesh",{position:[0,-.45,0],children:[s.jsx("cylinderGeometry",{args:[.4,.4,.1]}),s.jsx("meshStandardMaterial",{color:"#333"})]})]})},tQ=({points:i})=>{const e=E.useMemo(()=>new md(i,!1,"catmullrom",0),[i]);return i.length<2?null:s.jsx(lg,{args:[e,64,.05,8,!1],children:s.jsx("meshBasicMaterial",{color:"#34d399",transparent:!0,opacity:.8,toneMapped:!1})})},nQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=5,f=()=>{const x=[];for(let _=0;_<d;_++){const S=[];for(let j=0;j<d;j++)S.push({type:"empty",rotation:0,x:j,y:_});x.push(S)}const g=Math.floor(Math.random()*d);x[g][0]={type:"source",rotation:0,x:0,y:g};const v=Math.floor(Math.random()*d);x[v][d-1]={type:"target",rotation:0,x:d-1,y:v};const M=4+Math.floor(e/2);for(let _=0;_<M;_++){let S,j;do S=Math.floor(Math.random()*(d-2))+1,j=Math.floor(Math.random()*d);while(x[j][S].type!=="empty");x[j][S]={type:"mirror",rotation:Math.random()>.5?0:1,x:S,y:j}}a(x),u(""),o([])};E.useEffect(()=>{f()},[e]);const m=(x,g)=>{if(l)return;const v=[...n];v[g]=[...v[g]];const M=v[g][x];M.type==="mirror"&&(M.rotation=M.rotation===0?1:0,a(v))};return E.useEffect(()=>{if(n.length===0)return;let x=0,g=0;for(let N=0;N<d;N++)for(let R=0;R<d;R++)n[N][R].type==="source"&&(x=R,g=N);let v=x,M=g,_=1,S=0;const j=[new Q(v,0,M)];let A=0,C=!1;for(;A<20&&(v+=_,M+=S,j.push(new Q(v,0,M)),!(v<0||v>=d||M<0||M>=d));){const N=n[M][v];if(N.type==="target"){C=!0;break}else if(N.type==="mirror")if(N.rotation===0){const R=_;_=-S,S=-R}else{const R=_;_=S,S=R}A++}o(j),C&&!l&&(u(" !"),setTimeout(()=>t(N=>N+1),1500))},[n]),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[2,8,2],fov:50},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsxs("group",{position:[-2,0,-2],children:[n.map((x,g)=>x.map((v,M)=>s.jsxs("group",{position:[M,0,g],children:[s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.5,0],children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshStandardMaterial",{color:"#1f2937"})]}),v.type==="mirror"&&s.jsx(eQ,{rot:v.rotation,onClick:()=>m(M,g)}),v.type==="source"&&s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.5,.5,.5]}),s.jsx("meshStandardMaterial",{color:"#10b981",emissive:"#10b981"})]}),v.type==="target"&&s.jsxs("group",{children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("torusGeometry",{args:[.3,.05,16,32]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshStandardMaterial",{color:"#ef4444",emissive:"#ef4444"})]})]})]},`${M}-${g}`))),s.jsx(tQ,{points:r})]}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-emerald-100 px-6 py-2 rounded-full border-2 border-emerald-500 text-xl font-bold text-emerald-700 shadow-xl animate-bounce",children:l})})]})})})},aS=["#ef4444","#3b82f6","#22c55e","#eab308","#a855f7","#ec4899"],sQ=({colors:i})=>{const e=i.map(t=>new yi({color:t}));return s.jsx("mesh",{material:e,children:s.jsx("boxGeometry",{args:[2,2,2]})})},iQ=({idx:i,color:e,onClick:t})=>{const n={2:[1,0],1:[0,1],4:[1,1],0:[2,1],3:[1,2],5:[1,3]},[a,r]=n[i],o=60;return s.jsx("button",{onClick:t,className:"absolute w-[58px] h-[58px] border-2 border-slate-300 rounded shadow-sm hover:scale-105 active:scale-95 transition-all",style:{left:a*o,top:r*o,backgroundColor:e||"white"}})},aQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(Array(6).fill("")),[l,u]=E.useState(aS[0]),[d,f]=E.useState(""),m=()=>{const v=[...aS].sort(()=>.5-Math.random());a(v),o(Array(6).fill("")),f("")};E.useEffect(()=>{m()},[e]);const x=v=>{const M=[...r];M[v]=l,o(M)},g=()=>{r.every((M,_)=>M===n[_])?(f(" !"),setTimeout(()=>t(M=>M+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-pink-50 relative",children:[s.jsx("div",{className:"absolute top-4 left-4 w-40 h-40 bg-white border-2 border-pink-200 rounded-xl shadow-lg z-10",children:s.jsxs(Ue,{camera:{position:[4,4,4]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[2,5,2],intensity:1}),s.jsx(sQ,{colors:n}),s.jsx(ht,{autoRotate:!0})]})}),s.jsx("div",{className:"flex-1 flex items-center justify-center pt-20",children:s.jsx("div",{className:"relative w-[180px] h-[240px]",children:[0,1,2,3,4,5].map(v=>s.jsx(iQ,{idx:v,color:r[v],onClick:()=>x(v)},v))})}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-xl flex flex-col items-center gap-4",children:[s.jsx("div",{className:"flex gap-3",children:aS.map(v=>s.jsx("button",{onClick:()=>u(v),className:`w-10 h-10 rounded-full border-4 transition-transform ${l===v?"scale-125 border-slate-800":"border-white shadow-md"}`,style:{backgroundColor:v}},v))}),s.jsx("button",{onClick:g,className:"w-full max-w-xs bg-pink-500 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition-all",children:""})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-400 text-xl font-bold text-pink-600 shadow-xl animate-bounce",children:d})})]})})},rS=({grid:i,label:e})=>s.jsxs("div",{className:"flex flex-col items-center bg-white p-2 rounded shadow-sm border border-slate-200",children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 mb-1",children:e}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:i.map((t,n)=>t.map((a,r)=>s.jsx("div",{className:`w-4 h-4 rounded-sm ${a?"bg-blue-500":"bg-slate-100"}`},`${n}-${r}`)))})]}),rQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState({top:[],front:[],right:[]}),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const g=[];for(let j=0;j<6+e;j++){const A=Math.floor(Math.random()*3),C=Math.floor(Math.random()*3),N=Math.floor(Math.random()*3);g.some(R=>R[0]===A&&R[1]===C&&R[2]===N)||(C===0||g.some(R=>R[0]===A&&R[1]===C-1&&R[2]===N))&&g.push([A,C,N])}const M=Array(3).fill(0).map(()=>Array(3).fill(!1)),_=Array(3).fill(0).map(()=>Array(3).fill(!1)),S=Array(3).fill(0).map(()=>Array(3).fill(!1));g.forEach(([j,A,C])=>{M[C][j]=!0,_[2-A][j]=!0,S[2-A][C]=!0}),a({top:M,front:_,right:S}),o([]),u("")};E.useEffect(()=>{d()},[e]);const f=g=>{if(l)return;const v=r.findIndex(M=>M[0]===g[0]&&M[1]===g[1]&&M[2]===g[2]);if(v!==-1){const M=[...r];M.splice(v,1),o(M)}else o([...r,g])},m=g=>{if(g.stopPropagation(),g.object.name==="ground"){Math.floor(g.point.x+1.5);const v=Math.floor(g.point.x+1.5),M=Math.floor(g.point.z+1.5);v>=0&&v<3&&M>=0&&M<3&&f([v,0,M])}else if(g.object.name==="block"){const v=g.object.position,M=g.face.normal,_=Math.round(v.x+M.x+1),S=Math.round(v.y+M.y),j=Math.round(v.z+M.z+1);if(_>=0&&_<3&&S>=0&&S<3&&j>=0&&j<3)f([_,S,j]);else{const A=Math.round(v.x+1),C=Math.round(v.y),N=Math.round(v.z+1);f([A,C,N])}}},x=()=>{const g=Array(3).fill(0).map(()=>Array(3).fill(!1)),v=Array(3).fill(0).map(()=>Array(3).fill(!1)),M=Array(3).fill(0).map(()=>Array(3).fill(!1));r.forEach(([A,C,N])=>{g[N][A]=!0,v[2-C][A]=!0,M[2-C][N]=!0});const _=JSON.stringify(g)===JSON.stringify(n.top),S=JSON.stringify(v)===JSON.stringify(n.front),j=JSON.stringify(M)===JSON.stringify(n.right);_&&S&&j?(u(" !"),setTimeout(()=>t(A=>A+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-blue-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-2",children:[s.jsx(rS,{grid:n.top,label:""}),s.jsx(rS,{grid:n.front,label:""}),s.jsx(rS,{grid:n.right,label:""})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[3,3],position:[0,-.5,0],cellColor:"#94a3b8",sectionColor:"#64748b"}),s.jsxs("mesh",{name:"ground",rotation:[-Math.PI/2,0,0],position:[0,-.5,0],onClick:m,children:[s.jsx("planeGeometry",{args:[3,3]}),s.jsx("meshBasicMaterial",{visible:!1})]}),r.map((g,v)=>s.jsxs("mesh",{name:"block",position:[g[0]-1,g[1],g[2]-1],onClick:m,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[0]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},v)),s.jsx(ht,{makeDefault:!0})]})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-400 text-xl font-bold text-blue-600 shadow-xl animate-bounce",children:l})}),s.jsxs("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>o([]),className:"bg-white text-slate-500 px-6 py-3 rounded-full font-bold shadow-md border active:scale-95",children:""}),s.jsx("button",{onClick:x,className:"bg-blue-500 text-white px-8 py-3 rounded-full text-xl font-bold shadow-lg border-b-4 border-blue-700 active:scale-95 transition-all",children:""})]})]})})},oQ=({pos:i,rotation:e})=>{const t=E.useRef(null),n=new Q(i[0],.5,i[1]);return Yt(()=>{t.current&&(t.current.position.lerp(n,.2),t.current.quaternion.slerp(e,.2))}),s.jsxs("group",{ref:t,children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#fbbf24"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]}),s.jsx("group",{position:[0,.51,0],rotation:[-Math.PI/2,0,0],children:s.jsx(xs,{fontSize:.6,color:"#ef4444",children:""})}),s.jsx("group",{position:[0,0,.51],children:s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshBasicMaterial",{color:"#333"})]})}),s.jsx("group",{position:[0,0,-.51],children:s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshBasicMaterial",{color:"#333"})]})}),s.jsx("group",{position:[.51,0,0],children:s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshBasicMaterial",{color:"#333"})]})}),s.jsx("group",{position:[-.51,0,0],children:s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshBasicMaterial",{color:"#333"})]})}),s.jsx("group",{position:[0,-.51,0],children:s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshBasicMaterial",{color:"#333"})]})})]})},lQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0]),[r,o]=E.useState(new Wn),[l,u]=E.useState([0,0]),[d,f]=E.useState(""),m=5,x=2,g=()=>{const M=Math.floor(Math.random()*m)-2,_=Math.floor(Math.random()*m)-2;a([M,_]),o(new Wn);let S,j;do S=Math.floor(Math.random()*m)-2,j=Math.floor(Math.random()*m)-2;while(Math.abs(S-M)+Math.abs(j-_)<3);u([S,j]),f("")};E.useEffect(()=>{g()},[e]);const v=(M,_)=>{if(d)return;const S=n[0]+M,j=n[1]+_;if(S<-x||S>x||j<-x||j>x)return;a([S,j]);const A=new Q;M===1?A.set(0,0,-1):M===-1?A.set(0,0,1):_===1?A.set(1,0,0):_===-1&&A.set(-1,0,0);const C=new Wn().setFromAxisAngle(A,Math.PI/2),N=r.clone().multiply(C);o(N),S===l[0]&&j===l[1]&&(new Q(0,1,0).clone().applyQuaternion(N).dot(new Q(0,1,0))>.9?(f(" !"),setTimeout(()=>t(U=>U+1),1500)):(f(" "),setTimeout(()=>{f("")},1500)))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-amber-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,6,6],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[5,5],sectionColor:"#d97706",cellColor:"#fcd34d",position:[0,-.01,0]}),s.jsxs("group",{position:[l[0],0,l[1]],children:[s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshBasicMaterial",{color:"#f87171",transparent:!0,opacity:.5})]}),s.jsx(gs,{position:[0,.5,0],center:!0,children:s.jsx("div",{className:"text-3xl",children:""})})]}),s.jsx(oQ,{pos:n,rotation:r}),s.jsx(ht,{enabled:!1})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-400 text-xl font-bold text-amber-600 shadow-xl animate-bounce",children:d})}),s.jsxs("div",{className:"absolute bottom-8 left-0 right-0 flex flex-col items-center gap-2",children:[s.jsx("button",{className:"bg-white p-4 rounded-full shadow-lg active:scale-90",onClick:()=>v(0,-1),children:s.jsx(yD,{size:32})}),s.jsxs("div",{className:"flex gap-16",children:[s.jsx("button",{className:"bg-white p-4 rounded-full shadow-lg active:scale-90",onClick:()=>v(-1,0),children:s.jsx(pD,{size:32})}),s.jsx("button",{className:"bg-white p-4 rounded-full shadow-lg active:scale-90",onClick:()=>v(1,0),children:s.jsx(gD,{size:32})})]}),s.jsx("button",{className:"bg-white p-4 rounded-full shadow-lg active:scale-90",onClick:()=>v(0,1),children:s.jsx(hD,{size:32})})]})]})})})},s6=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#fca5a5"})]}),s.jsxs("mesh",{position:[0,2.5,0],rotation:[0,Math.PI/4,0],children:[s.jsx("coneGeometry",{args:[2,1.5,4]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[3,1,1],children:[s.jsx("cylinderGeometry",{args:[.2,.4,2]}),s.jsx("meshStandardMaterial",{color:"#78350f"})]}),s.jsxs("mesh",{position:[3,2.5,1],children:[s.jsx("dodecahedronGeometry",{args:[1.2]}),s.jsx("meshStandardMaterial",{color:"#15803d"})]}),s.jsxs("mesh",{position:[-2,.05,2],rotation:[-Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[1.5,32]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[s.jsx("planeGeometry",{args:[20,20]}),s.jsx("meshStandardMaterial",{color:"#f0fdf4"})]})]}),cQ=({pos:i})=>s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:i,fov:45}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(s6,{})]}),uQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,5,10]),[r,o]=E.useState(""),l=E.useRef(null),u=()=>{const f=Math.random()*Math.PI*2,m=Math.PI/6+Math.random()*Math.PI/3,x=10,g=x*Math.sin(m)*Math.sin(f),v=x*Math.cos(m),M=x*Math.sin(m)*Math.cos(f);a([g,v,M]),o("")};E.useEffect(()=>{u()},[e]);const d=()=>{if(!l.current)return;const f=l.current.position,m=new Q(...n);f.distanceTo(m)<2?(o(" !"),setTimeout(()=>t(g=>g+1),1500)):(o(" "),setTimeout(()=>o(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-fuchsia-50",children:[s.jsxs("div",{className:"flex-1 flex gap-2 p-2",children:[s.jsxs("div",{className:"w-1/2 relative bg-white border-4 border-fuchsia-200 rounded-xl overflow-hidden shadow-inner",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-fuchsia-500 text-white px-2 py-1 rounded text-xs font-bold z-10",children:""}),s.jsx(cQ,{pos:n})]}),s.jsxs("div",{className:"w-1/2 relative bg-white border-4 border-blue-200 rounded-xl overflow-hidden shadow-inner",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded text-xs font-bold z-10",children:""}),s.jsxs(Ue,{children:[s.jsx(ru,{ref:l,makeDefault:!0,position:[0,8,12],fov:45}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(s6,{}),s.jsx(ht,{maxDistance:20,minDistance:5,maxPolarAngle:Math.PI/2})]})]})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-fuchsia-400 text-xl font-bold text-fuchsia-600 shadow-xl animate-bounce",children:r})}),s.jsx("div",{className:"h-20 flex items-center justify-center",children:s.jsx("button",{onClick:d,className:"bg-fuchsia-600 text-white px-8 py-3 rounded-full text-xl font-bold shadow-lg active:scale-95 transition-all",children:" "})})]})})},VT=.5,wv=1,HT=1.5,dQ=({data:i})=>{const e=E.useRef(null);Yt(()=>{e.current&&i.speed&&(e.current.rotation.z+=i.speed)});const t=Math.round(i.radius*12);return s.jsxs("group",{ref:e,position:[i.x,i.y,.1],children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[i.radius-.1,i.radius-.1,.2,32]}),s.jsx("meshStandardMaterial",{color:i.color})]}),Array.from({length:t}).map((n,a)=>{const r=a/t*Math.PI*2;return s.jsxs("mesh",{position:[Math.cos(r)*i.radius,Math.sin(r)*i.radius,0],rotation:[0,0,r],children:[s.jsx("boxGeometry",{args:[.15,.15,.2]}),s.jsx("meshStandardMaterial",{color:i.color})]},a)}),s.jsxs("mesh",{position:[0,0,.15],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.1,.1,.1,16]}),s.jsx("meshStandardMaterial",{color:"#fff"})]})]})},fQ=({x:i,y:e,onClick:t})=>s.jsxs("group",{position:[i,e,0],children:[s.jsxs("mesh",{onClick:n=>{n.stopPropagation(),t()},rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.15,.15,.1,16]}),s.jsx("meshStandardMaterial",{color:"#9ca3af"})]}),s.jsxs("mesh",{position:[0,0,-.05],children:[s.jsx("circleGeometry",{args:[.3,32]}),s.jsx("meshBasicMaterial",{color:"#e5e7eb",opacity:.5,transparent:!0})]})]}),hQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=5,u=3,d=1.5,f=()=>{const x=[];x.push({id:"source",x:0,y:1.5,radius:wv,color:"#22c55e",fixed:!0,connected:!0,speed:.05}),x.push({id:"target",x:(l-1)*d,y:1.5,radius:wv,color:"#ef4444",fixed:!0,connected:!1,speed:0}),a(x),o("")};E.useEffect(()=>{f()},[e]),E.useEffect(()=>{const x=n.map(M=>({...M,connected:M.id==="source",speed:M.id==="source"?.05:0}));let g=!0;for(;g;){g=!1;for(let M=0;M<x.length;M++)if(x[M].connected)for(let _=0;_<x.length;_++){if(M===_||x[_].connected)continue;const S=x[M],j=x[_],A=S.x-j.x,C=S.y-j.y,N=Math.sqrt(A*A+C*C),R=S.radius+j.radius;Math.abs(N-R)<.15&&(x[_].connected=!0,x[_].speed=-S.speed*(S.radius/j.radius),g=!0)}}if(n.some((M,_)=>M.speed!==x[_].speed)){a(x);const M=x.find(_=>_.id==="target");M&&M.connected&&Math.abs(M.speed)>.01&&(o(" !"),setTimeout(()=>t(_=>_+1),2e3))}},[n]);const m=(x,g)=>{if(r)return;const v=n.findIndex(_=>Math.abs(_.x-x)<.1&&Math.abs(_.y-g)<.1),M=[...n];if(v!==-1){if(n[v].fixed)return;const _=n[v];_.radius===wv?M[v].radius=HT:_.radius===HT?M.splice(v,1):_.radius===VT&&(M[v].radius=wv)}else M.push({id:`g-${Date.now()}`,x,y:g,radius:VT,color:"#f59e0b",fixed:!1,connected:!1,speed:0});a(M)};return s.jsx(tt,{title:"",onBack:i,instruction:"/",children:s.jsx("div",{className:"flex flex-col h-full bg-orange-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[3,1.5,8],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsxs("mesh",{position:[3,1.5,-.1],children:[s.jsx("boxGeometry",{args:[8,5,.1]}),s.jsx("meshStandardMaterial",{color:"#fff7ed"})]}),Array.from({length:l}).map((x,g)=>Array.from({length:u}).map((v,M)=>{const _=g*d,S=M*d;return s.jsx(fQ,{x:_,y:S,onClick:()=>m(_,S)},`${g}-${M}`)})),n.map(x=>s.jsx(dQ,{data:x},x.id)),s.jsx(ht,{enabled:!1})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-orange-400 text-xl font-bold text-orange-600 shadow-xl animate-bounce",children:r})})]})})})},mQ=({voxels:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:Ot[0]})]},t))}),pQ=({pos:i,onClick:e,visible:t})=>t?s.jsxs("mesh",{position:i,onClick:n=>{n.stopPropagation(),e()},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#a8a29e"})," ",s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]}):null,xQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=[];for(let M=-1;M<=1;M++)for(let _=-1;_<=1;_++)for(let S=-1;S<=1;S++)m.push([M,_,S]);o(m);const x=5+Math.floor(Math.random()*5),g=[[0,0,0]],v=new Set(["0,0,0"]);for(;g.length<x;){const M=g[Math.floor(Math.random()*g.length)],S=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(j=>[M[0]+j[0],M[1]+j[1],M[2]+j[2]]).filter(j=>Math.abs(j[0])<=1&&Math.abs(j[1])<=1&&Math.abs(j[2])<=1&&!v.has(`${j[0]},${j[1]},${j[2]}`));if(S.length>0){const j=S[Math.floor(Math.random()*S.length)];g.push(j),v.add(`${j[0]},${j[1]},${j[2]}`)}else break}a(g),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{if(l)return;if(n.some(v=>v[0]===m[0]&&v[1]===m[1]&&v[2]===m[2])){u(" "),setTimeout(()=>u(""),1e3);return}const g=r.filter(v=>!(v[0]===m[0]&&v[1]===m[1]&&v[2]===m[2]));o(g),g.length===n.length&&(u(" !"),setTimeout(()=>t(v=>v+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-stone-100 relative",children:[s.jsx("div",{className:"absolute top-4 left-4 w-32 h-32 bg-white/80 backdrop-blur border-4 border-stone-400 rounded-xl shadow-xl z-10",children:s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(mQ,{voxels:n}),s.jsx(ht,{autoRotate:!0})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ue,{camera:{position:[6,6,6],fov:45},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,10,10],intensity:1,castShadow:!0}),s.jsx("group",{children:r.map((m,x)=>s.jsx(pQ,{pos:m,visible:!0,onClick:()=>f(m)},`${m[0]}-${m[1]}-${m[2]}`))}),s.jsx(ht,{makeDefault:!0})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-stone-500 text-xl font-bold text-stone-700 shadow-xl animate-bounce",children:l})})]})]})})},jv={heart:{points:[[0,.5],[.3,.8],[.6,.8],[.8,.5],[0,-.8],[-.8,.5],[-.6,.8],[-.3,.8]],icon:"",name:""},star:{points:[[0,1.5],[.3,.5],[1.5,.5],[.6,-.2],[.9,-1.2],[0,-.6],[-.9,-1.2],[-.6,-.2],[-1.5,.5],[-.3,.5]],icon:"",name:""},smile:{points:[[-.5,.5],[.5,.5],[-.8,-.2],[-.4,-.6],[.4,-.6],[.8,-.2]],icon:"",name:""},moon:{points:[[.5,.8],[.8,.3],[.8,-.3],[.5,-.8],[0,-.5],[0,.5]],icon:"",name:""},diamond:{points:[[0,1],[1,0],[0,-1],[-1,0]],icon:"",name:""},arrow:{points:[[0,1],[.5,.3],[.2,.3],[.2,-1],[-.2,-1],[-.2,.3],[-.5,.3]],icon:"",name:""}},gQ=({points:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsxs("mesh",{position:e,children:[s.jsx("sphereGeometry",{args:[.1+Math.random()*.05]}),s.jsx("meshStandardMaterial",{color:new Lt().setHSL(Math.random(),.7,.5)})]},t))}),vQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState("heart"),[l,u]=E.useState(""),[d,f]=E.useState([5,5,5]),m=E.useRef(null),x=()=>e<=2?{shapes:["heart","diamond"],pointsPerCluster:3,depthSpread:5,tolerance:.92}:e<=5?{shapes:["heart","star","diamond","moon"],pointsPerCluster:4,depthSpread:8,tolerance:.94}:e<=9?{shapes:Object.keys(jv),pointsPerCluster:5,depthSpread:10,tolerance:.96}:{shapes:Object.keys(jv),pointsPerCluster:6,depthSpread:12,tolerance:.97},g=()=>{const S=x(),j=S.shapes[Math.floor(Math.random()*S.shapes.length)];o(j);const A=jv[j],C=[];A.points.forEach(([O,U])=>{for(let z=0;z<S.pointsPerCluster;z++){const I=(Math.random()-.5)*S.depthSpread,V=(Math.random()-.5)*.3,F=(Math.random()-.5)*.3;C.push([O+V,U+F,I])}}),a(C),u("");const N=[[5,5,5],[-5,5,5],[5,-5,5],[5,5,-5],[-5,-5,5]],R=N[Math.floor(Math.random()*N.length)];f(R),m.current&&(m.current.reset(),m.current.object.position.set(...R),m.current.object.lookAt(0,0,0))};E.useEffect(()=>{g()},[e]);const v=()=>e<=2?"":e<=5?"":e<=9?"":"",M=()=>{const S=x();return Yt(({camera:j})=>{if(l)return;new Q(0,0,-1).applyQuaternion(j.quaternion).dot(new Q(0,0,-1))>S.tolerance&&(u(" !"),setTimeout(()=>t(N=>N+1),2e3))}),null},_=jv[r];return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${v()}] - `,children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:d,fov:45},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(gQ,{points:n}),s.jsx(ht,{ref:m,enableZoom:!0}),s.jsx(M,{})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white/90 px-8 py-4 rounded-full border-4 border-purple-500 text-3xl font-black text-purple-700 shadow-[0_0_50px_rgba(168,85,247,0.5)] animate-bounce backdrop-blur",children:l})}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:s.jsxs("div",{className:"bg-slate-800/80 backdrop-blur px-4 py-2 rounded-full flex items-center gap-2",children:[s.jsx("span",{className:"text-slate-400 text-sm",children:":"}),s.jsx("span",{className:"text-2xl",children:_==null?void 0:_.icon}),s.jsx("span",{className:"text-white font-bold",children:_==null?void 0:_.name})]})}),s.jsx("div",{className:"absolute top-4 left-4 bg-slate-800/60 backdrop-blur px-3 py-1 rounded text-slate-300 text-xs",children:""})]})})})},yQ=({blocks:i,player:e,goal:t,onFaceClick:n})=>{const a=(r,o)=>{const[l,u,d]=r,f=.51;switch(o){case 0:return[l+f,u,d];case 1:return[l-f,u,d];case 2:return[l,u+f,d];case 3:return[l,u-f,d];case 4:return[l,u,d+f];case 5:return[l,u,d-f]}return[l,u,d]};return s.jsxs("group",{children:[i.map((r,o)=>s.jsxs("mesh",{position:r,onClick:l=>{if(l.stopPropagation(),l.face){const u=l.face.materialIndex;u!==void 0&&n(o,u)}},children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#0ea5e9",roughness:.8}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"#0369a1",transparent:!0,opacity:.3})]})]},o)),(()=>{const r=a(e.blockPos,e.face);return s.jsxs("mesh",{position:r,children:[s.jsx("sphereGeometry",{args:[.15]}),s.jsx("meshStandardMaterial",{color:"#fcd34d",emissive:"#fcd34d"}),s.jsx(gs,{center:!0,pointerEvents:"none",children:s.jsx("div",{className:"text-2xl",children:""})})]})})(),(()=>{const r=a(t.blockPos,t.face);return s.jsxs("mesh",{position:r,children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshStandardMaterial",{color:"#ef4444"}),s.jsx(gs,{center:!0,pointerEvents:"none",children:s.jsx("div",{className:"text-2xl",children:""})})]})})()]})},bQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState({blockPos:[0,0,0],face:2}),[l,u]=E.useState({blockPos:[0,0,0],face:2}),[d,f]=E.useState(""),m=()=>{const g=6+Math.floor(Math.random()*4),v=[[0,0,0]],M=new Set(["0,0,0"]);for(let C=1;C<g;C++){const N=v[Math.floor(Math.random()*v.length)],O=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(U=>[N[0]+U[0],N[1]+U[1],N[2]+U[2]]).filter(U=>!M.has(`${U[0]},${U[1]},${U[2]}`));if(O.length>0){const U=O[Math.floor(Math.random()*O.length)];v.push(U),M.add(`${U[0]},${U[1]},${U[2]}`)}}a(v),o({blockPos:v[0],face:2});let _=v[v.length-1],S=0,j=!1,A=0;for(;!j&&A<100;){_=v[Math.floor(Math.random()*v.length)],S=Math.floor(Math.random()*6);const C=[..._];S===0?C[0]++:S===1?C[0]--:S===2?C[1]++:S===3?C[1]--:S===4?C[2]++:S===5&&C[2]--,!M.has(`${C[0]},${C[1]},${C[2]}`)&&(_!==v[0]||S!==2)&&(j=!0),A++}u({blockPos:_,face:S}),f("")};E.useEffect(()=>{m()},[e]);const x=(g,v)=>{if(d)return;const M=n[g],_=(C,N)=>{const[R,O,U]=C,z=.5;switch(N){case 0:return[R+z,O,U];case 1:return[R-z,O,U];case 2:return[R,O+z,U];case 3:return[R,O-z,U];case 4:return[R,O,U+z];case 5:return[R,O,U-z]}return[R,O,U]},S=_(r.blockPos,r.face),j=_(M,v),A=Math.sqrt(Math.pow(S[0]-j[0],2)+Math.pow(S[1]-j[1],2)+Math.pow(S[2]-j[2],2));A<1.1&&A>.1&&(o({blockPos:M,face:v}),M[0]===l.blockPos[0]&&M[1]===l.blockPos[1]&&M[2]===l.blockPos[2]&&v===l.face&&(f(" !"),setTimeout(()=>t(C=>C+1),1500)))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:50},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(yQ,{blocks:n,player:r,goal:l,onFaceClick:x}),s.jsx(ht,{makeDefault:!0})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-sky-100 px-6 py-2 rounded-full border-2 border-sky-500 text-xl font-bold text-sky-700 shadow-xl animate-bounce",children:d})})]})})})},MQ=({walls:i})=>s.jsxs("group",{children:[i.map((e,t)=>s.jsxs("mesh",{position:[e[0],e[1],0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#64748b"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,1,1)]}),s.jsx("lineBasicMaterial",{color:"#334155"})]})]},t)),s.jsxs("mesh",{position:[0,0,-.6],children:[s.jsx("planeGeometry",{args:[10,10]}),s.jsx("meshStandardMaterial",{color:"#f1f5f9"})]})]}),SQ=({pos:i,isWinning:e})=>{const t=E.useRef(null);return Yt(()=>{t.current&&t.current.position.lerp(new Q(i[0],i[1],0),.2)}),s.jsxs("mesh",{ref:t,children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:e?"#4ade80":"#f43f5e"})]})},_Q=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState([0,0]),[l,u]=E.useState([0,0]),[d,f]=E.useState([]),[m,x]=E.useState(""),[g,v]=E.useState(!1),M=7,_=3,S=()=>{const C=[];for(let O=-_-1;O<=_+1;O++)C.push([O,-_-1],[O,_+1],[-_-1,O],[_+1,O]);for(let O=0;O<15;O++){const U=Math.floor(Math.random()*M)-_,z=Math.floor(Math.random()*M)-_;(U!==0||z!==0)&&C.push([U,z])}f(C),o([0,0]);let N,R;do N=Math.floor(Math.random()*M)-_,R=Math.floor(Math.random()*M)-_;while(N===0&&R===0||C.some(O=>O[0]===N&&O[1]===R));u([N,R]),a(0),v(!1),x("")};E.useEffect(()=>{S()},[e]);const j=C=>{const N=(C%360+360)%360;let R=0,O=0;N===0?O=-1:N===90?R=1:N===180?O=1:N===270&&(R=-1);let U=r[0],z=r[1];for(let I=0;I<M;I++){const V=U+R,F=z+O;if(d.some(q=>q[0]===V&&q[1]===F))break;if(U=V,z=F,U===l[0]&&z===l[1])break}o([U,z]),U===l[0]&&z===l[1]&&(v(!0),x(" !"),setTimeout(()=>t(I=>I+1),1500))},A=C=>{if(m)return;const N=n+C*90;a(N),setTimeout(()=>j(N),500)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-rose-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,15],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsxs("group",{rotation:[0,0,-n*Math.PI/180],children:[s.jsx(MQ,{walls:d}),s.jsx(SQ,{pos:r,isWinning:g}),s.jsxs("group",{position:[l[0],l[1],0],children:[s.jsxs("mesh",{children:[s.jsx("planeGeometry",{args:[.8,.8]}),s.jsx("meshBasicMaterial",{color:"#fbbf24",transparent:!0,opacity:.5})]}),s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-2xl",children:""})})]})]}),s.jsx(ht,{enabled:!1})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-400 text-xl font-bold text-rose-600 shadow-xl animate-bounce",children:m})}),s.jsxs("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center gap-8",children:[s.jsx("button",{onClick:()=>A(-1),className:"bg-white p-4 rounded-full shadow-lg border-2 border-slate-200 active:scale-95",children:s.jsx(mx,{size:32,className:"text-slate-600"})}),s.jsx("button",{onClick:()=>A(1),className:"bg-white p-4 rounded-full shadow-lg border-2 border-slate-200 active:scale-95",children:s.jsx(c_,{size:32,className:"text-slate-600"})})]})]})})})},wQ=({r:i,g:e,b:t})=>{const n=new Lt(0,0,0);return i&&n.add(new Lt(1,0,0)),e&&n.add(new Lt(0,1,0)),t&&n.add(new Lt(0,0,1)),s.jsxs("mesh",{position:[0,0,-2],children:[s.jsx("boxGeometry",{args:[4,3,.1]}),s.jsx("meshBasicMaterial",{color:n})]})},oS=({color:i,pos:e,blocked:t,onToggle:n})=>s.jsxs("group",{position:e,children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],position:[0,0,-1],children:[s.jsx("cylinderGeometry",{args:[.5,.1,2]}),s.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:t?.1:.6})]}),s.jsxs("group",{position:[0,0,-1],onClick:a=>{a.stopPropagation(),n()},children:[s.jsxs("mesh",{position:[0,t?0:1,0],children:[s.jsx("boxGeometry",{args:[1.2,1.2,.1]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsx(gs,{position:[0,-1,0],center:!0,children:s.jsx("button",{className:`px-2 py-1 rounded text-xs font-bold text-white ${t?"bg-red-500":"bg-green-500"}`,children:t?"":""})})]})]}),jQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState({r:!0,g:!0,b:!1}),[r,o]=E.useState({r:!0,g:!0,b:!0}),[l,u]=E.useState(""),d=()=>{let g,v,M;do g=Math.random()>.5,v=Math.random()>.5,M=Math.random()>.5;while(!g&&!v&&!M);a({r:g,g:v,b:M}),o({r:!0,g:!0,b:!0}),u("")};E.useEffect(()=>{d()},[e]);const f=g=>{o(v=>({...v,[g]:!v[g]}))},m=()=>{const g=!r.r===n.r,v=!r.g===n.g,M=!r.b===n.b;g&&v&&M?(u(" !"),setTimeout(()=>t(_=>_+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},x=()=>{const{r:g,g:v,b:M}=n;return g&&v&&M?"":g&&v?"":g&&M?"":v&&M?"":g?"":v?"":M?"":""};return s.jsx(tt,{title:"",onBack:i,instruction:`${x()}`,children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,5,5],fov:50},children:[s.jsx("ambientLight",{intensity:.2}),s.jsx("pointLight",{position:[0,5,0],intensity:.5}),s.jsx(oS,{color:"#ff0000",pos:[-1.5,0,1],blocked:r.r,onToggle:()=>f("r")}),s.jsx(oS,{color:"#00ff00",pos:[0,0,1],blocked:r.g,onToggle:()=>f("g")}),s.jsx(oS,{color:"#0000ff",pos:[1.5,0,1],blocked:r.b,onToggle:()=>f("b")}),s.jsx(wQ,{r:!r.r,g:!r.g,b:!r.b}),s.jsx(gs,{position:[0,2,-2],center:!0,children:s.jsxs("div",{className:"bg-white/90 p-2 rounded-lg text-center shadow-lg border-2 border-indigo-200",children:[s.jsx("div",{className:"text-xs text-slate-500 font-bold",children:""}),s.jsx("div",{className:"w-12 h-12 rounded mt-1 border border-slate-300",style:{backgroundColor:`rgb(${n.r?255:0},${n.g?255:0},${n.b?255:0})`}})]})}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:l})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:m,className:"bg-indigo-600 text-white px-8 py-3 rounded-full text-xl font-bold shadow-lg border-b-4 border-indigo-800 active:scale-95 transition-all",children:""})})]})})})},EQ=({slice:i})=>{let e;const t=i.size;return i.shape==="circle"&&(e=s.jsx("cylinderGeometry",{args:[t,t,.2,32]})),i.shape==="square"&&(e=s.jsx("boxGeometry",{args:[t*2,.2,t*2]})),i.shape==="triangle"&&(e=s.jsx("cylinderGeometry",{args:[t,t,.2,3]})),s.jsxs("mesh",{children:[e,s.jsx("meshStandardMaterial",{color:i.color}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[i.shape==="square"?new nn(t*2,.2,t*2):new Q0(t,t,.2,i.shape==="triangle"?3:32)]}),s.jsx("lineBasicMaterial",{color:"rgba(0,0,0,0.3)"})]})]})},qT=({slices:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsx("group",{position:[0,t*.25,0],children:s.jsx(EQ,{slice:e})},t))}),TQ=({slice:i,onClick:e})=>s.jsx("button",{onClick:e,className:"w-16 h-16 bg-white border-2 border-slate-200 rounded-lg flex items-center justify-center hover:bg-teal-50 active:scale-95 transition-all shadow-sm",children:s.jsx("div",{className:"opacity-80",style:{backgroundColor:i.color,width:(i.shape==="square",i.size*30+"px"),height:(i.shape==="square",i.size*30+"px"),borderRadius:i.shape==="circle"?"50%":"2px",clipPath:i.shape==="triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":"none"}})}),AQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{const M=[[{shape:"circle",size:1,color:"#f87171"},{shape:"circle",size:.7,color:"#f87171"},{shape:"circle",size:.4,color:"#f87171"}],[{shape:"square",size:1,color:"#60a5fa"},{shape:"square",size:.5,color:"#60a5fa"},{shape:"square",size:1,color:"#60a5fa"}],[{shape:"circle",size:.3,color:"#78350f"},{shape:"circle",size:1,color:"#22c55e"},{shape:"circle",size:.6,color:"#22c55e"}]],_=M[Math.floor(Math.random()*M.length)];a(_),o([]);const S=[..._,{shape:_[0].shape,size:.8,color:_[0].color}];u(S.map(j=>({val:j,sort:Math.random()})).sort((j,A)=>j.sort-A.sort).map(({val:j})=>j)),f("")};E.useEffect(()=>{m()},[e]);const x=M=>{r.length>=n.length||o([...r,M])},g=()=>o(M=>M.slice(0,-1)),v=()=>{JSON.stringify(r)===JSON.stringify(n)?(f(" !"),setTimeout(()=>t(M=>M+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-teal-50",children:[s.jsxs("div",{className:"flex-1 flex gap-2 p-2",children:[s.jsxs("div",{className:"w-1/2 relative bg-white border-4 border-teal-200 rounded-xl overflow-hidden shadow-inner",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-teal-500 text-white px-2 py-1 rounded text-xs font-bold z-10",children:""}),s.jsxs(Ue,{camera:{position:[3,2,3],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:s.jsx(qT,{slices:n})}),s.jsx(ht,{autoRotate:!0})]})]}),s.jsxs("div",{className:"w-1/2 relative bg-white border-4 border-blue-200 rounded-xl overflow-hidden shadow-inner",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded text-xs font-bold z-10",children:""}),s.jsxs(Ue,{camera:{position:[3,2,3],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsxs("group",{position:[0,-.5,0],children:[s.jsx(qT,{slices:r}),s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("cylinderGeometry",{args:[.05,.05,3]}),s.jsx("meshBasicMaterial",{color:"#e2e8f0",transparent:!0,opacity:.5})]})]}),s.jsx(ht,{})]})]})]}),s.jsxs("div",{className:"h-40 bg-white shadow-xl rounded-t-3xl p-4 flex flex-col items-center",children:[s.jsx("div",{className:"flex gap-4 mb-4 overflow-x-auto w-full justify-center",children:l.map((M,_)=>s.jsx(TQ,{slice:M,onClick:()=>x(M)},_))}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:g,className:"px-6 py-2 bg-slate-200 text-slate-600 rounded-full font-bold",children:""}),s.jsx("button",{onClick:v,className:"px-8 py-2 bg-teal-500 text-white rounded-full font-bold shadow-lg",children:""})]})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-400 text-xl font-bold text-teal-600 shadow-xl animate-bounce",children:d})})]})})},CQ=({holes:i})=>{const e=[];for(let a=0;a<3;a++)for(let r=0;r<3;r++)for(let o=0;o<3;o++){const l=a-1,u=r-1,d=o-1;let f=!1;i.includes("x")&&u===0&&d===0&&(f=!0),i.includes("y")&&l===0&&d===0&&(f=!0),i.includes("z")&&l===0&&u===0&&(f=!0),f?e.push(s.jsxs("mesh",{position:[l,u,d],children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshBasicMaterial",{color:"black",wireframe:!0,opacity:.1,transparent:!0})]},`hole-${a}-${r}-${o}`)):e.push(s.jsxs("mesh",{position:[l,u,d],children:[s.jsx("boxGeometry",{args:[.98,.98,.98]}),s.jsx("meshStandardMaterial",{color:Ot[0]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.98,.98,.98)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},`${a}-${r}-${o}`))}return s.jsx("group",{children:e})},NQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(0),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{const g=["x","y","z"],v=1+Math.floor(Math.random()*3),M=[];for(;M.length<v;){const C=g[Math.floor(Math.random()*g.length)];M.includes(C)||M.push(C)}a(M);const _=new Set;M.includes("x")&&(_.add("-1,0,0"),_.add("0,0,0"),_.add("1,0,0")),M.includes("y")&&(_.add("0,-1,0"),_.add("0,0,0"),_.add("0,1,0")),M.includes("z")&&(_.add("0,0,-1"),_.add("0,0,0"),_.add("0,0,1"));const S=_.size;o(S);const j=new Set([S]);for(j.add(M.length*3);j.size<4;)j.add(S+Math.floor(Math.random()*5)-2);const A=Array.from(j).filter(C=>C>0&&C<=27).sort((C,N)=>C-N);for(;A.length<4;){const C=A[A.length-1]||S;A.push(C+1)}u(A.sort((C,N)=>C-N)),f("")};E.useEffect(()=>{m()},[e]);const x=g=>{g===r?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-zinc-800",children:[s.jsxs("div",{className:"flex-1 relative border-b-4 border-zinc-600",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx(Ci,{intensity:.5,environment:"city",adjustCamera:!1,children:s.jsx(CQ,{holes:n})}),s.jsx(ht,{autoRotate:!0})]}),s.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[s.jsx("div",{className:"text-white text-sm font-bold bg-zinc-700 px-2 py-1 rounded",children:":"}),n.includes("x")&&s.jsx("div",{className:"text-red-400 font-bold",children:"X ()"}),n.includes("y")&&s.jsx("div",{className:"text-green-400 font-bold",children:"Y ()"}),n.includes("z")&&s.jsx("div",{className:"text-blue-400 font-bold",children:"Z ()"})]})]}),s.jsx("div",{className:"p-4 bg-zinc-900 flex flex-wrap justify-center gap-3",children:l.map(g=>s.jsx("button",{onClick:()=>x(g),className:"w-16 h-16 rounded-xl bg-zinc-700 hover:bg-zinc-600 text-white text-2xl font-black shadow-lg transition-all active:scale-95",children:g},g))}),d&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"text-3xl font-bold text-white bg-zinc-800/90 px-6 py-4 rounded-2xl shadow-xl",children:d})})]})})},RQ=({pos:i,dir:e})=>s.jsxs("group",{position:[i[0],0,i[1]],rotation:[0,-e*Math.PI/2,0],children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[.6,.8,.6]}),s.jsx("meshStandardMaterial",{color:"#84cc16"})]}),s.jsxs("mesh",{position:[.15,.7,-.3],children:[s.jsx("sphereGeometry",{args:[.05]}),s.jsx("meshBasicMaterial",{color:"black"})]}),s.jsxs("mesh",{position:[-.15,.7,-.3],children:[s.jsx("sphereGeometry",{args:[.05]}),s.jsx("meshBasicMaterial",{color:"black"})]})]}),DQ=({x:i,y:e,onClick:t,isSelected:n})=>s.jsxs("mesh",{position:[i,.01,e],rotation:[-Math.PI/2,0,0],onClick:a=>{a.stopPropagation(),t()},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshBasicMaterial",{color:n?"#bef264":"white",transparent:!0,opacity:.5,side:Ms})]}),LQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0]),[r,o]=E.useState(0),[l,u]=E.useState([]),[d,f]=E.useState([0,0]),[m,x]=E.useState(""),[g,v]=E.useState(null),M=5,_=2,S=()=>{const C=Math.floor(Math.random()*M)-_,N=Math.floor(Math.random()*M)-_;a([C,N]);const R=Math.floor(Math.random()*4);o(R);const O=[];let U=C,z=N,I=R;const V=3+Math.floor(e/2);for(let F=0;F<V;F++){let q=U,W=z;if(I===0&&(W-=1),I===1&&(q+=1),I===2&&(W+=1),I===3&&(q-=1),q>=-_&&q<=_&&W>=-_&&W<=_&&Math.random()>.4)O.push("forward"),U=q,z=W;else{const B=Math.random()>.5?"left":"right";O.push(B),B==="left"?I=(I+3)%4:I=(I+1)%4}}u(O),f([U,z]),v(null),x("")};E.useEffect(()=>{S()},[e]);const j=(C,N)=>{m||(v([C,N]),C===d[0]&&N===d[1]?(x(" !"),setTimeout(()=>t(R=>R+1),1500)):(x(" "),setTimeout(()=>x(""),1e3)))},A=C=>{if(C==="forward")return s.jsx(q0,{size:24});if(C==="left")return s.jsx(WD,{size:24});if(C==="right")return s.jsx(ZD,{size:24})};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-lime-50",children:[s.jsxs("div",{className:"h-24 bg-white border-b-4 border-lime-200 flex items-center p-4 gap-2 overflow-x-auto",children:[s.jsx("div",{className:"font-bold text-lime-700 whitespace-nowrap",children:":"}),l.map((C,N)=>s.jsxs("div",{className:"flex flex-col items-center bg-lime-100 p-2 rounded border border-lime-300 min-w-[50px]",children:[A(C),s.jsx("span",{className:"text-xs font-bold text-lime-800 mt-1",children:C==="forward"?"":C==="left"?"":""})]},N))]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,8,4],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[5,5],sectionColor:"#65a30d",cellColor:"#a3e635",position:[0,0,0]}),s.jsx("group",{children:Array.from({length:5}).map((C,N)=>Array.from({length:5}).map((R,O)=>{const U=N-2,z=O-2;return s.jsx(DQ,{x:U,y:z,onClick:()=>j(U,z),isSelected:(g==null?void 0:g[0])===U&&(g==null?void 0:g[1])===z},`${U}-${z}`)}))}),s.jsx(RQ,{pos:n,dir:r}),s.jsx(ht,{enabled:!1})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-lime-600 px-6 py-2 rounded-full border-2 border-white text-xl font-bold text-white shadow-xl animate-bounce",children:m})})]})]})})},UQ=({type:i,color:e,scale:t=1,onClick:n})=>{const a=E.useRef(null);Yt(()=>{a.current&&n&&(a.current.rotation.y+=.01)});let r;return i===0&&(r=s.jsx("cylinderGeometry",{args:[1,1,2]})),i===1&&(r=s.jsx("coneGeometry",{args:[1.2,2.5]})),i===2&&(r=s.jsx("sphereGeometry",{args:[1.3]})),i===3&&(r=s.jsx("boxGeometry",{args:[2,2,2]})),i===4&&(r=s.jsx("cylinderGeometry",{args:[1,1,2]})),s.jsx("group",{ref:a,scale:[t,t,t],onClick:n?o=>{o.stopPropagation(),n()}:void 0,children:s.jsxs("mesh",{rotation:i===4?[0,0,Math.PI/2]:[0,0,0],children:[r,s.jsx("meshStandardMaterial",{color:e}),s.jsx("lineSegments",{})]})})},XT=({label:i,shapeType:e})=>s.jsxs("div",{className:"flex flex-col items-center bg-white p-2 rounded-lg shadow-md border border-slate-200 w-24",children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 mb-2",children:i}),s.jsxs("div",{className:"w-12 h-12 bg-black opacity-80 flex items-center justify-center",children:[e==="circle"&&s.jsx("div",{className:"w-10 h-10 bg-white rounded-full"}),e==="square"&&s.jsx("div",{className:"w-10 h-10 bg-white"}),e==="rect"&&s.jsx("div",{className:"w-8 h-10 bg-white"}),e==="triangle"&&s.jsx("div",{className:"w-0 h-0 border-l-[20px] border-r-[20px] border-b-[35px] border-l-transparent border-r-transparent border-b-white"})]})]}),PQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState({front:"rect",side:"rect"}),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const M=[0,1,2,4],_=Math.floor(Math.random()*M.length),S=M[_];a(S);let j="rect",A="rect";S===0&&(j="rect",A="rect"),S===1&&(j="triangle",A="triangle"),S===2&&(j="circle",A="circle"),S===3&&(j="square",A="square"),S===4&&(j="circle",A="rect"),S===4&&(j="rect",A="circle"),o({front:j,side:A});const C=[S];for(;C.length<3;){const R=M[Math.floor(Math.random()*M.length)];C.includes(R)||C.push(R)}const N=C.map(R=>({val:R,sort:Math.random()})).sort((R,O)=>R.sort-O.sort).map(({val:R})=>R);u(N),f(N.indexOf(S)),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{M===d?(x(" !"),setTimeout(()=>t(_=>_+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-sky-50",children:[s.jsxs("div",{className:"h-[30%] w-full bg-slate-800 flex items-center justify-center gap-8 border-b-4 border-white",children:[s.jsx(XT,{label:"",shapeType:r.front}),s.jsx(XT,{label:"",shapeType:r.side})]}),s.jsxs("div",{className:"flex-1 relative p-4",children:[m&&s.jsx("div",{className:"absolute top-4 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-sky-400 text-xl font-bold text-sky-600 shadow-xl animate-bounce",children:m})}),s.jsx("div",{className:"h-full flex gap-2",children:l.map((M,_)=>s.jsx("div",{className:"flex-1 bg-white rounded-xl shadow-md border-2 border-sky-100 overflow-hidden cursor-pointer hover:border-sky-400 active:scale-95 transition-all",onClick:()=>v(_),children:s.jsxs(Ue,{camera:{position:[0,2,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(UQ,{type:M,color:Ot[_%Ot.length]}),s.jsx(ht,{autoRotate:!0,enableZoom:!1})]})},_))}),s.jsx("div",{className:"absolute bottom-2 w-full text-center text-slate-400 text-sm pointer-events-none",children:""})]})]})})},OQ=({active:i})=>s.jsxs("group",{position:[0,0,4],children:[s.jsxs("mesh",{rotation:[0,Math.PI,0],children:[s.jsx("boxGeometry",{args:[.5,.8,1.5]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[0,-.5,.5],rotation:[Math.PI/4,0,0],children:[s.jsx("boxGeometry",{args:[.3,.8,.3]}),s.jsx("meshStandardMaterial",{color:"#334155"})]}),s.jsxs("mesh",{position:[0,.1,-.8],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.1,.2,.3]}),s.jsx("meshStandardMaterial",{color:"#94a3b8"})]}),i&&s.jsxs("mesh",{position:[0,.1,-2.5],rotation:[Math.PI/2,0,0],children:[s.jsx("coneGeometry",{args:[.8,3,16,1,!0]}),s.jsx("meshBasicMaterial",{color:"#d946ef",transparent:!0,opacity:.3,side:Ms})]})]}),zQ=({paintedFaces:i,targetFaces:e})=>{for(let t=-1;t<=1;t+=2)for(let n=-1;n<=1;n+=2)for(let a=-1;a<=1;a+=2){const r=u=>i.has(u),o=u=>e.has(u),l=[0,1,2,3,4,5].map(u=>{const d=r(u),f=o(u);return new yi({color:d?"#d946ef":"#f1f5f9",map:!d&&f?GQ():null})});return s.jsx("mesh",{material:l,children:s.jsx("boxGeometry",{args:[2,2,2]})},"main")}return null};function GQ(){const i=document.createElement("canvas");i.width=64,i.height=64;const e=i.getContext("2d");return e&&(e.fillStyle="#e2e8f0",e.fillRect(0,0,64,64),e.strokeStyle="#94a3b8",e.lineWidth=4,e.strokeRect(0,0,64,64),e.fillStyle="#cbd5e1",e.beginPath(),e.arc(32,32,10,0,Math.PI*2),e.fill()),new Bf(i)}const IQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(new Set),[r,o]=E.useState(new Set),[l,u]=E.useState(!1),[d,f]=E.useState(""),m=E.useRef(null),x=()=>{const v=new Set,M=[0,1,2,3,4,5],_=3+Math.floor(Math.random()*3);for(let S=0;S<_;S++){const j=Math.floor(Math.random()*M.length);v.add(M[j]),M.splice(j,1)}o(v),a(new Set),f("")};E.useEffect(()=>{x()},[e]);const g=()=>{if(u(!0),setTimeout(()=>u(!1),500),!m.current)return;const M=[new Q(1,0,0),new Q(-1,0,0),new Q(0,1,0),new Q(0,-1,0),new Q(0,0,1),new Q(0,0,-1)].map(A=>A.applyQuaternion(m.current.quaternion)),_=new Q(0,0,1);let S=-1,j=-1;if(M.forEach((A,C)=>{A.dot(_)>j&&(j=A.dot(_),S=C)}),j>.6){const A=new Set(n);A.add(S),a(A),Array.from(r).every(N=>A.has(N))&&(f(" !"),setTimeout(()=>t(N=>N+1),1500))}};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-fuchsia-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,6],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{ref:m,children:s.jsx(zQ,{paintedFaces:n,targetFaces:r})}),s.jsx(OQ,{active:l}),s.jsx(ht,{enableZoom:!1,enablePan:!1})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-fuchsia-400 text-xl font-bold text-fuchsia-600 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center pointer-events-none",children:s.jsx("button",{onClick:g,className:"pointer-events-auto w-24 h-24 rounded-full bg-fuchsia-500 border-4 border-white shadow-xl flex items-center justify-center active:scale-90 transition-all",children:s.jsx("span",{className:"text-4xl",children:""})})})]})})})},kQ=({data:i,onClick:e})=>s.jsxs("group",{position:i.pos,rotation:[0,i.rot*Math.PI/2,0],onClick:a=>{a.stopPropagation(),e()},children:[s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.15*1.2]}),s.jsx("meshStandardMaterial",{color:i.filled?"#3b82f6":"#cbd5e1"})]}),i.type==="straight"&&s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.5/2,0,0],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.15,.15,.5]}),s.jsx("meshStandardMaterial",{color:i.filled?"#3b82f6":"#cbd5e1"})]}),s.jsxs("mesh",{position:[-.5/2,0,0],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.15,.15,.5]}),s.jsx("meshStandardMaterial",{color:i.filled?"#3b82f6":"#cbd5e1"})]})]}),i.type==="corner"&&s.jsxs(s.Fragment,{children:[s.jsxs("mesh",{position:[.5/2,0,0],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.15,.15,.5]}),s.jsx("meshStandardMaterial",{color:i.filled?"#3b82f6":"#cbd5e1"})]}),s.jsxs("mesh",{position:[0,0,.5/2],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.15,.15,.5]}),s.jsx("meshStandardMaterial",{color:i.filled?"#3b82f6":"#cbd5e1"})]})]})]}),BQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=()=>{const d=[];for(let f=0;f<3;f++)for(let m=0;m<3;m++)d.push({id:`${f}-${m}`,pos:[f-1,0,m-1],type:Math.random()>.5?"straight":"corner",rot:Math.floor(Math.random()*4),color:"white",filled:!1});d[0].filled=!0,a(d),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{if(r)return;const f=[...n];f[d].rot=(f[d].rot+1)%4,f.forEach(v=>v.filled=!1);const m=[0];f[0].filled=!0;const x=new Set([0]),g=(v,M)=>v==="straight"?M%2===0?[0,2]:[1,3]:v==="corner"?[M,(M+1)%4]:[];for(;m.length>0;){const v=m.shift(),M=f[v],_=Math.floor(v/3),S=v%3;g(M.type,M.rot).forEach(A=>{let C=_,N=S;if(A===0&&C++,A===1&&N++,A===2&&C--,A===3&&N--,C>=0&&C<3&&N>=0&&N<3){const R=C*3+N;if(!x.has(R)){const O=(A+2)%4,U=f[R];g(U.type,U.rot).includes(O)&&(x.add(R),f[R].filled=!0,m.push(R))}}})}a(f),f[8].filled&&(o(" !"),setTimeout(()=>t(v=>v+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-blue-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),n.map((d,f)=>s.jsx(kQ,{data:d,onClick:()=>u(f)},d.id)),s.jsxs("mesh",{position:[-1.2,0,-1],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#3b82f6",emissive:"#3b82f6"})]}),s.jsxs("mesh",{position:[1.2,0,1],children:[s.jsx("boxGeometry",{args:[.4,.4,.4]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsx(ht,{enabled:!1})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-400 text-xl font-bold text-blue-600 shadow-xl animate-bounce",children:r})})]})})})},Mf=({type:i,rot:e,onClick:t})=>{const a=document.createElement("canvas");a.width=128,a.height=128;const r=a.getContext("2d");r&&(r.fillStyle="#fef3c7",r.fillRect(0,0,128,128),r.strokeStyle="#d97706",r.lineWidth=20,r.lineCap="round",r.translate(128/2,128/2),r.rotate(e*Math.PI/2),r.translate(-128/2,-128/2),i==="line"?(r.beginPath(),r.moveTo(128/2,0),r.lineTo(128/2,128),r.stroke()):i==="corner"?(r.beginPath(),r.moveTo(128/2,0),r.quadraticCurveTo(128/2,128/2,128,128/2),r.stroke()):i==="cross"&&(r.beginPath(),r.moveTo(128/2,0),r.lineTo(128/2,128),r.stroke(),r.beginPath(),r.moveTo(0,128/2),r.lineTo(128,128/2),r.stroke()));const o=new Bf(a);return s.jsxs("mesh",{onClick:l=>{l.stopPropagation(),t==null||t()},children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx("meshStandardMaterial",{map:o})]})},FQ=({configs:i})=>s.jsxs("group",{children:[s.jsx("group",{position:[.51,0,0],rotation:[0,Math.PI/2,0],children:s.jsx(Mf,{type:i[0].type,rot:i[0].rot})}),s.jsx("group",{position:[-.51,0,0],rotation:[0,-Math.PI/2,0],children:s.jsx(Mf,{type:i[1].type,rot:i[1].rot})}),s.jsx("group",{position:[0,.51,0],rotation:[-Math.PI/2,0,0],children:s.jsx(Mf,{type:i[2].type,rot:i[2].rot})}),s.jsx("group",{position:[0,-.51,0],rotation:[Math.PI/2,0,0],children:s.jsx(Mf,{type:i[3].type,rot:i[3].rot})}),s.jsx("group",{position:[0,0,.51],rotation:[0,0,0],children:s.jsx(Mf,{type:i[4].type,rot:i[4].rot})}),s.jsx("group",{position:[0,0,-.51],rotation:[0,Math.PI,0],children:s.jsx(Mf,{type:i[5].type,rot:i[5].rot})}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]})]}),VQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const x=["line","corner"],g=Array(6).fill(null).map(()=>({type:x[Math.floor(Math.random()*x.length)],rot:Math.floor(Math.random()*4)}));a(g),o(g.map(v=>({type:v.type,rot:Math.floor(Math.random()*4)}))),u("")};E.useEffect(()=>{d()},[e]);const f=x=>{if(l)return;const g=[...r];g[x]={...g[x],rot:(g[x].rot+1)%4},o(g),g.every((v,M)=>v.rot===n[M].rot)&&(u(" !"),setTimeout(()=>t(v=>v+1),1500))},m=(x,g,v)=>{const M=r[x];return M?s.jsx("div",{className:"absolute w-16 h-16 border border-slate-300",style:{left:g*64,top:v*64},children:s.jsx("div",{className:"w-full h-full relative cursor-pointer",onClick:()=>f(x),children:s.jsxs(Ue,{orthographic:!0,camera:{zoom:30,position:[0,0,10]},children:[s.jsx("ambientLight",{intensity:1}),s.jsx(Mf,{type:M.type,rot:M.rot})]})})}):null};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-amber-50",children:[s.jsxs("div",{className:"h-[40%] bg-amber-100 border-b-4 border-white relative",children:[s.jsxs(Ue,{camera:{position:[2.5,2.5,2.5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(FQ,{configs:n}),s.jsx(ht,{autoRotate:!0,autoRotateSpeed:2})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-amber-600 text-white px-2 py-1 rounded text-sm font-bold",children:""})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-auto",children:s.jsxs("div",{className:"relative w-[192px] h-[256px] scale-110 origin-top",children:[m(2,1,0),m(1,0,1),m(4,1,1),m(0,2,1),m(3,1,2),m(5,1,3)]})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-400 text-xl font-bold text-amber-600 shadow-xl animate-bounce",children:l})})]})})},HQ=({x:i,z:e,height:t,onClick:n})=>{const a=[];for(let r=0;r<t;r++)a.push(s.jsxs("mesh",{position:[i,r+.5,e],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[Math.min(r,5)]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},r));return s.jsxs("group",{onClick:r=>{r.stopPropagation(),n()},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="auto",children:[a,t===0&&s.jsxs("mesh",{position:[i,.05,e],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshBasicMaterial",{color:"black",opacity:.1,transparent:!0})]}),s.jsx("mesh",{position:[i,t+.5,e],visible:!1,children:s.jsx("boxGeometry",{args:[1,1,1]})})]})},qQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=Array(3).fill(0).map(()=>Array(3).fill(0));for(let x=0;x<3;x++)for(let g=0;g<3;g++)m[x][g]=Math.floor(Math.random()*4);m.flat().reduce((x,g)=>x+g,0)===0&&(m[1][1]=2),a(m),o(Array(3).fill(0).map(()=>Array(3).fill(0))),u("")};E.useEffect(()=>{d()},[e]);const f=(m,x)=>{if(l)return;const g=r.map(v=>[...v]);g[m][x]=(g[m][x]+1)%4,o(g),JSON.stringify(g)===JSON.stringify(n)&&(u(" !"),setTimeout(()=>t(v=>v+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-green-50",children:[s.jsxs("div",{className:"absolute top-4 left-4 bg-white p-3 rounded-xl shadow-lg border-2 border-green-200 z-10",children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 mb-2",children:""}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:n.map((m,x)=>m.map((g,v)=>s.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 font-bold text-green-700 rounded",children:g},`${x}-${v}`)))})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[5,6,6],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[3,3],position:[0,0,0],sectionColor:"#15803d",cellColor:"#86efac"}),s.jsx("group",{position:[-1,0,-1],children:r.map((m,x)=>m.map((g,v)=>s.jsx(HQ,{x:v,z:x,height:g,onClick:()=>f(x,v)},`${x}-${v}`)))}),s.jsx(ht,{makeDefault:!0})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-green-400 text-xl font-bold text-green-600 shadow-xl animate-bounce",children:l})}),s.jsx("div",{className:"absolute bottom-8 w-full text-center text-slate-400 text-sm pointer-events-none",children:" (0-3)"})]})]})})},Ev=({voxels:i,axis:e})=>{const t=Array(3).fill(0).map(()=>Array(3).fill(!1));return i.forEach(([n,a,r])=>{const o=2-(a+1);let l=0;e==="front"&&(l=n+1),e==="side"&&(l=r+1),o>=0&&o<3&&l>=0&&l<3&&(t[o][l]=!0)}),s.jsx("div",{className:"bg-black p-2 rounded border border-slate-600",children:s.jsx("div",{className:"grid grid-cols-3 gap-1",children:t.map((n,a)=>n.map((r,o)=>s.jsx("div",{className:`w-6 h-6 rounded-sm ${r?"bg-white":"bg-gray-800"}`},`${a}-${o}`)))})})},XQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=[];for(let g=-1;g<=1;g++)for(let v=-1;v<=1;v++)for(let M=-1;M<=1;M++)Math.random()>.4&&m.push([g,v,M]);a(m);const x=[];for(let g=-1;g<=1;g++)for(let v=-1;v<=1;v++)for(let M=-1;M<=1;M++)x.push([g,v,M]);o(x),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{if(l)return;const x=r.filter(v=>!(v[0]===m[0]&&v[1]===m[1]&&v[2]===m[2]));o(x);const g=v=>{const M=j=>{const A=new Set;return j.forEach(([C,N,R])=>{v==="front"?A.add(`${C},${N}`):A.add(`${R},${N}`)}),A},_=M(n),S=M(x);if(_.size!==S.size)return!1;for(let j of _)if(!S.has(j))return!1;return!0};g("front")&&g("side")&&(u(" !"),setTimeout(()=>t(v=>v+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-stone-800 text-stone-100",children:[s.jsxs("div",{className:"flex justify-center gap-8 p-4 bg-stone-900 border-b border-stone-700",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"text-xs mb-1 text-stone-400",children:""}),s.jsx(Ev,{voxels:n,axis:"front"})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"text-xs mb-1 text-stone-400",children:""}),s.jsx(Ev,{voxels:n,axis:"side"})]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx("group",{children:r.map((m,x)=>s.jsxs("mesh",{position:m,onClick:g=>{g.stopPropagation(),f(m)},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#a8a29e"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},x))}),s.jsx(ht,{makeDefault:!0})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-stone-500 text-xl font-bold text-stone-700 shadow-xl animate-bounce",children:l})}),s.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between pointer-events-none",children:[s.jsxs("div",{className:"bg-black/50 p-2 rounded text-xs",children:[":",s.jsx("div",{className:"mt-1",children:s.jsx(Ev,{voxels:r,axis:"front"})})]}),s.jsxs("div",{className:"bg-black/50 p-2 rounded text-xs",children:[":",s.jsx("div",{className:"mt-1",children:s.jsx(Ev,{voxels:r,axis:"side"})})]})]})]})]})})},WT=({x:i,y:e,filled:t,onClick:n,isHint:a})=>s.jsxs("mesh",{position:[i,e,0],onClick:n?r=>{r.stopPropagation(),n()}:void 0,children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshStandardMaterial",{color:t?a?"#818cf8":"#4f46e5":"#e0e7ff"})]}),WQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=Array(4).fill(!1).map(()=>Array(2).fill(!1));for(let x=0;x<4;x++)for(let g=0;g<2;g++)m[x][g]=Math.random()>.5;m.flat().some(Boolean)||(m[1][1]=!0),a(m),o(Array(4).fill(!1).map(()=>Array(2).fill(!1))),u("")};E.useEffect(()=>{d()},[e]);const f=(m,x)=>{if(l)return;const g=r.map(M=>[...M]);g[m][x]=!g[m][x],o(g);let v=!0;for(let M=0;M<4;M++)n[M][1]!==g[M][0]&&(v=!1),n[M][0]!==g[M][1]&&(v=!1);v&&(u(" !"),setTimeout(()=>t(M=>M+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex-1 bg-indigo-50 relative h-full",children:[s.jsxs(Ue,{camera:{position:[0,0,6],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsxs("mesh",{position:[0,0,.05],children:[s.jsx("cylinderGeometry",{args:[.05,.05,4.5]}),s.jsx("meshBasicMaterial",{color:"#a5b4fc"})]}),s.jsxs("group",{position:[-1,0,0],children:[" ",n.map((m,x)=>m.map((g,v)=>s.jsx(WT,{x:v-1,y:1.5-x,filled:g,isHint:!0},`t-${x}-${v}`)))]}),s.jsxs("group",{position:[1,0,0],children:[" ",r.map((m,x)=>m.map((g,v)=>s.jsx(WT,{x:v,y:1.5-x,filled:g,onClick:()=>f(x,v)},`u-${x}-${v}`)))]}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:l})})]})})},YQ=({type:i,x:e,y:t,onClick:n})=>{const a=document.createElement("canvas");a.width=128,a.height=128;const r=a.getContext("2d");if(r){r.fillStyle=i===0?"#f8fafc":"#fef3c7",r.fillRect(0,0,128,128),r.strokeStyle="#d97706",r.lineWidth=20,r.lineCap="round";const l=64;r.beginPath(),i===1&&(r.moveTo(0,l),r.lineTo(128,l)),i===2&&(r.moveTo(l,0),r.lineTo(l,128)),i===3&&(r.moveTo(0,l),r.quadraticCurveTo(l,l,l,0)),i===4&&(r.moveTo(l,0),r.quadraticCurveTo(l,l,128,l)),i===5&&(r.moveTo(128,l),r.quadraticCurveTo(l,l,l,128)),i===6&&(r.moveTo(l,128),r.quadraticCurveTo(l,l,0,l)),r.stroke()}const o=new Bf(a);return s.jsxs("mesh",{position:[e,-t,0],onClick:l=>{l.stopPropagation(),n()},children:[s.jsx("planeGeometry",{args:[.95,.95]}),s.jsx("meshBasicMaterial",{map:o})]})},ZQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=4,u=()=>{const m=Array(l).fill(0).map(()=>Array(l).fill(0));a(m),o("")};E.useEffect(()=>{u()},[e]);const d=(m,x)=>{if(m===0&&x===0||m===l-1&&x===l-1||r)return;const g=n.map(v=>[...v]);g[m][x]=(g[m][x]+1)%7,a(g),f(g)&&(o(" !"),setTimeout(()=>t(v=>v+1),1500))},f=m=>{const x=(_,S)=>_===1?S===0||S===2:_===2?S===1||S===3:_===3?S===0||S===1:_===4?S===1||S===2:_===5?S===2||S===3:_===6?S===3||S===0:!1,g=new Set,v=[[0,0]];g.add("0,0");let M=!1;for(;v.length>0;){const[_,S]=v.pop();_===l-1&&S===l-1&&(M=!0);const j=m[_][S];if(j===0)continue;[[0,-1],[-1,0],[0,1],[1,0]].forEach(([C,N],R)=>{if(x(j,R)){let O=_,U=S;if(R===0&&U--,R===1&&O--,R===2&&U++,R===3&&O++,O>=0&&O<l&&U>=0&&U<l){const z=m[O][U];x(z,(R+2)%4)&&(g.has(`${O},${U}`)||(g.add(`${O},${U}`),v.push([O,U])))}}})}return M};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"h-full bg-amber-50 relative flex items-center justify-center",children:[s.jsxs(Ue,{camera:{position:[1.5,-1.5,6],fov:60},children:[s.jsx("ambientLight",{intensity:.9}),s.jsxs("group",{position:[-1.5,1.5,0],children:[" ",n.map((m,x)=>m.map((g,v)=>s.jsx(YQ,{type:g,x:v,y:x,onClick:()=>d(x,v)},`${x}-${v}`))),s.jsx(xs,{position:[0,0,.1],fontSize:.5,color:"green",children:"S"}),s.jsx(xs,{position:[3,-3,.1],fontSize:.5,color:"red",children:"E"})]})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-500 text-xl font-bold text-amber-700 shadow-xl animate-bounce",children:r})})]})})},YT=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]}),s.jsxs("mesh",{position:[1.5,.5,1],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{position:[-1,1,-1],children:[s.jsx("coneGeometry",{args:[.5,2]}),s.jsx("meshStandardMaterial",{color:"#facc15"})]}),s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#aaa",cellColor:"#ddd"})]}),KQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState(0),[l,u]=E.useState(0),[d,f]=E.useState(10),[m,x]=E.useState(""),g=()=>{a(Math.floor(Math.random()*360)),o(10+Math.floor(Math.random()*80)),u(0),f(45),x("")};E.useEffect(()=>{g()},[e]);const v=(_,S)=>{const j=(90-S)*Math.PI/180,A=_*Math.PI/180,C=10,N=C*Math.sin(j)*Math.sin(A),R=C*Math.cos(j),O=C*Math.sin(j)*Math.cos(A);return[N,R,O]},M=()=>{const _=Math.abs(n-l),S=Math.abs(r-d);Math.min(_,360-_)<15&&S<10?(x(" !"),setTimeout(()=>t(A=>A+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-pink-50 relative",children:[s.jsxs("div",{className:"absolute top-4 right-4 w-40 h-40 border-4 border-white shadow-xl rounded-lg overflow-hidden bg-black z-10 pointer-events-none",children:[s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:v(n,r),fov:45}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(YT,{})]}),s.jsx("div",{className:"absolute bottom-1 right-1 text-white text-xs font-bold shadow-black drop-shadow-md",children:""})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:v(l,d),fov:45}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(YT,{})]})}),s.jsxs("div",{className:"h-48 bg-white rounded-t-3xl shadow-2xl p-6 flex flex-col gap-4 z-20",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{className:"text-sm font-bold text-slate-500",children:" (360)"}),s.jsx("input",{type:"range",min:"0",max:"360",value:l,onChange:_=>u(Number(_.target.value)),className:"w-full h-4 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-pink-500"})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{className:"text-sm font-bold text-slate-500",children:" (90)"}),s.jsx("input",{type:"range",min:"10",max:"90",value:d,onChange:_=>f(Number(_.target.value)),className:"w-full h-4 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-pink-500"})]}),s.jsx("button",{onClick:M,className:"mt-2 w-full bg-pink-500 text-white font-bold py-3 rounded-xl shadow-md active:scale-95 transition-all",children:""})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-30",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-500 text-xl font-bold text-pink-700 shadow-xl animate-bounce",children:m})})]})})},JQ=({x:i,z:e,height:t,onDrag:n})=>{E.useRef(null);const[a,r]=E.useState(!1),o=E.useRef(0),l=u=>{u.stopPropagation(),r(!0),o.current=u.clientY};return E.useEffect(()=>{const u=f=>{if(!a)return;const m=o.current-f.clientY;if(Math.abs(m)>20){const x=m>0?1:-1,g=Math.max(0,Math.min(3,t+x));g!==t&&(n(g),o.current=f.clientY)}},d=()=>r(!1);return window.addEventListener("pointermove",u),window.addEventListener("pointerup",d),()=>{window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",d)}},[a,t,n]),s.jsxs("group",{position:[i-1,0,e-1],onPointerDown:l,children:[Array.from({length:t}).map((u,d)=>s.jsxs("mesh",{position:[0,d+.5,0],children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:a?"#2dd4bf":"#0d9488"})]},d)),s.jsxs("mesh",{position:[0,.05,0],children:[s.jsx("boxGeometry",{args:[.9,.1,.9]}),s.jsx("meshStandardMaterial",{color:"#99f6e4"})]}),s.jsx("mesh",{position:[0,2,0],visible:!1,children:s.jsx("boxGeometry",{args:[1,4,1]})})]})},ZT=({grid:i,label:e})=>s.jsxs("div",{className:"bg-white p-2 rounded shadow border border-teal-200",children:[s.jsx("div",{className:"text-xs text-slate-400 mb-1",children:e}),s.jsx("div",{className:"flex gap-1 items-end h-16",children:i.map((t,n)=>{const a=Math.max(...t);return s.jsx("div",{className:"w-6 bg-teal-500 rounded-t",style:{height:`${a*33}%`}},n)})})]}),QQ=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const x=Array(3).fill(0).map(()=>Array(3).fill(0).map(()=>Math.floor(Math.random()*4)));x.flat().reduce((g,v)=>g+v,0)===0&&(x[1][1]=2),a(x),o(Array(3).fill(0).map(()=>Array(3).fill(0))),u("")};E.useEffect(()=>{d()},[e]);const f=(x,g,v)=>{const M=r.map(_=>[..._]);M[x][g]=v,o(M)},m=()=>{const x=j=>[0,1,2].map(A=>Math.max(j[0][A],j[1][A],j[2][A])),g=j=>[0,1,2].map(A=>Math.max(j[A][0],j[A][1],j[A][2])),v=x(n),M=g(n),_=x(r),S=g(r);JSON.stringify(v)===JSON.stringify(_)&&JSON.stringify(M)===JSON.stringify(S)?(u(" !"),setTimeout(()=>t(j=>j+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-teal-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-center gap-4 z-10",children:[s.jsx(ZT,{grid:[[0,1,2].map(x=>Math.max(n[0][x],n[1][x],n[2][x]))],label:""}),s.jsx(ZT,{grid:[[0,1,2].map(x=>Math.max(n[x][0],n[x][1],n[x][2]))],label:""})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("group",{position:[0,-1,0],children:r.map((x,g)=>x.map((v,M)=>s.jsx(JQ,{x:M,z:g,height:v,onDrag:_=>f(g,M,_)},`${g}-${M}`)))}),s.jsx(ht,{makeDefault:!0})]})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-500 text-xl font-bold text-teal-700 shadow-xl animate-bounce",children:l})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:m,className:"bg-teal-600 text-white px-8 py-3 rounded-full text-xl font-bold shadow-lg active:scale-95 transition-all",children:""})})]})})},$Q=({idx:i,angle:e,isLast:t,children:n})=>{const a=E.useRef(null);return Yt(()=>{if(a.current){const r=e*Math.PI/2;a.current.rotation.z=ks.lerp(a.current.rotation.z,r,.1)}}),s.jsxs("group",{children:[s.jsxs("mesh",{position:[.5,0,0],children:[s.jsx("boxGeometry",{args:[1,.9,.9]}),s.jsx("meshStandardMaterial",{color:"#fb923c"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,.9,.9)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]}),!t&&s.jsx("group",{position:[1,0,0],ref:a,children:n})]})},KT=({angles:i})=>{const e=t=>t>=i.length?s.jsxs("mesh",{position:[.5,0,0],children:[s.jsx("boxGeometry",{args:[1,.9,.9]}),s.jsx("meshStandardMaterial",{color:"#f97316"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(1,.9,.9)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]}):s.jsx($Q,{idx:t,angle:i[t],isLast:!1,children:e(t+1)});return s.jsx("group",{position:[-2,0,0],children:e(0)})},e$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0,0]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=[0,0,0,0].map(()=>Math.floor(Math.random()*3)-1);o(m),a([0,0,0,0]),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{if(l)return;const x=[...n];x[m]===0?x[m]=1:x[m]===1?x[m]=-1:x[m]=0,a(x),JSON.stringify(x)===JSON.stringify(r)&&(u(" !"),setTimeout(()=>t(g=>g+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-orange-50",children:[s.jsxs("div",{className:"h-[35%] border-b-4 border-white bg-orange-100 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(qa,{speed:2,rotationIntensity:.2,children:s.jsx(KT,{angles:r})})]}),s.jsx("div",{className:"absolute top-2 left-4 bg-orange-500 text-white px-2 py-1 rounded text-sm font-bold",children:""})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(KT,{angles:n}),s.jsx(ht,{})]})}),s.jsx("div",{className:"h-24 bg-white shadow-xl flex items-center justify-center gap-4 p-4",children:n.map((m,x)=>s.jsxs("button",{onClick:()=>f(x),className:"w-12 h-12 rounded-full bg-orange-500 text-white font-bold shadow-lg border-2 border-orange-600 active:scale-95",children:[x+1,s.jsx("span",{className:"block text-[10px]",children:m===0?"-":m===1?"":""})]},x))}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-orange-500 text-xl font-bold text-orange-700 shadow-xl animate-bounce",children:l})})]})})},t$=({index:i,rotation:e,onRotate:t})=>{const a=["#f87171","#fbbf24","#34d399","#60a5fa","#a78bfa","#f472b6","#fb923c","#94a3b8"];return s.jsx("group",{position:[0,i*.6,0],rotation:[0,e,0],children:Array.from({length:8}).map((r,o)=>{const l=o/8*Math.PI*2;return s.jsxs("mesh",{position:[Math.sin(l)*1.5,0,Math.cos(l)*1.5],rotation:[0,l,0],onClick:u=>{u.stopPropagation(),t()},children:[s.jsx("boxGeometry",{args:[1.1,.5,.2]}),s.jsx("meshStandardMaterial",{color:a[o]})]},o)})})},n$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0,0]),[r,o]=E.useState(""),l=()=>{const d=[0,0,0,0].map(()=>Math.floor(Math.random()*8)*(Math.PI/4));a(d),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{if(r)return;const f=[...n];f[d]+=Math.PI/4,a(f);const m=g=>Math.round(g%(Math.PI*2)*100)/100,x=m(f[0]);f.every(g=>m(g)===x)&&(o(" !"),setTimeout(()=>t(g=>g+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-violet-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,2,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-1,0],children:n.map((d,f)=>s.jsx(t$,{index:f,rotation:d,onRotate:()=>u(f)},f))}),s.jsx(ht,{enableZoom:!1,enablePan:!1,maxPolarAngle:Math.PI/1.5})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-violet-500 text-xl font-bold text-violet-700 shadow-xl animate-bounce",children:r})})]})})})},s$=({grid:i,onPlace:e})=>s.jsx("group",{children:i.map((t,n)=>t.map((a,r)=>s.jsxs("mesh",{position:[r-2,0,n-2],rotation:[-Math.PI/2,0,0],onClick:o=>{o.stopPropagation(),e(r,n)},children:[s.jsx("planeGeometry",{args:[.95,.95]}),s.jsx("meshStandardMaterial",{color:a===0?"#1e293b":"#334155"}),a!==0&&s.jsxs("mesh",{rotation:[0,0,a===1?Math.PI/4:-Math.PI/4],position:[0,0,.5],children:[s.jsx("boxGeometry",{args:[.1,.8,.5]}),s.jsx("meshStandardMaterial",{color:"#22d3ee",metalness:.8})]})]},`${r}-${n}`)))}),i$=({path:i})=>{const[e,t]=E.useState(i[0]),n=E.useRef(0);return E.useEffect(()=>{const a=setInterval(()=>{n.current=(n.current+1)%i.length,t(i[n.current])},200);return()=>clearInterval(a)},[i]),s.jsxs("mesh",{position:new Q(...e),children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshBasicMaterial",{color:"#fcd34d"})]})},a$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=5,f=()=>{const g=Array(d).fill(0).map(()=>Array(d).fill(0));a(g),u(""),m(g)};E.useEffect(()=>{f()},[e]);const m=g=>{let v=0,M=2,_=1,S=0;const j=[[v-2,.5,M-2]];let A=0;for(;A<20&&(v+=_,M+=S,!(v<0||v>=d||M<0||M>=d));){j.push([v-2,.5,M-2]);const C=g[M][v];if(C===1){const N=_;_=-S,S=-N}else if(C===2){const N=_;_=S,S=N}A++}o(j),v===4&&M===2&&!l&&(u(" !"),setTimeout(()=>t(C=>C+1),1500))},x=(g,v)=>{if(l)return;const M=n.map(_=>[..._]);M[v][g]=(M[v][g]+1)%3,a(M),m(M)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-cyan-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,8,0]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(s$,{grid:n,onPlace:x}),s.jsx(i$,{path:r}),s.jsxs("mesh",{position:[-2.5,0,0],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshBasicMaterial",{color:"green"})]}),s.jsxs("mesh",{position:[2.5,0,0],children:[s.jsx("boxGeometry",{args:[.5,.5,.5]}),s.jsx("meshBasicMaterial",{color:"red"})]}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-cyan-100 px-6 py-2 rounded-full border-2 border-cyan-500 text-xl font-bold text-cyan-700 shadow-xl animate-bounce",children:l})})]})})})},JT=({voxels:i,color:e,onClick:t})=>s.jsx("group",{children:i.map(([n,a,r],o)=>s.jsxs("mesh",{position:[n,a,r],onClick:l=>{t&&(l.stopPropagation(),t(n,a,r))},children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},o))}),r$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const x=[[0,0,0]];for(let v=0;v<3;v++){const M=x[Math.floor(Math.random()*x.length)],_=[M[0]+Math.round(Math.random()),M[1]+Math.round(Math.random()),M[2]];Math.abs(_[0])<=1&&Math.abs(_[1])<=1&&x.push(_)}a(x);const g=[];for(let v=-1;v<=1;v++)for(let M=-1;M<=1;M++)for(let _=-1;_<=1;_++)g.push([v,M,_]);o(g),u("")};E.useEffect(()=>{d()},[e]);const f=(x,g,v)=>{if(l)return;const M=r.findIndex(_=>_[0]===x&&_[1]===g&&_[2]===v);if(M!==-1){const _=[...r];_.splice(M,1),o(_)}else o([...r,[x,g,v]])},m=()=>{const x=new Set;for(let _=-1;_<=1;_++)for(let S=-1;S<=1;S++)for(let j=-1;j<=1;j++)x.add(`${_},${S},${j}`);const g=new Set(n.map(_=>`${_[0]},${_[1]},${_[2]}`)),v=new Set(r.map(_=>`${_[0]},${_[1]},${_[2]}`));let M=!0;x.forEach(_=>{const S=g.has(_),j=v.has(_);S&&j&&(M=!1),!S&&!j&&(M=!1)}),M?(u(" !"),setTimeout(()=>t(_=>_+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-slate-100",children:[s.jsxs("div",{className:"w-1/2 border-r-4 border-white relative bg-white",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-slate-500 text-white px-2 py-1 rounded",children:""}),s.jsxs(Ue,{camera:{position:[4,4,4]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(V0,{children:s.jsx(JT,{voxels:n,color:"#f43f5e"})}),s.jsx(ht,{autoRotate:!0})]})]}),s.jsxs("div",{className:"w-1/2 relative bg-slate-200",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-slate-700 text-white px-2 py-1 rounded",children:" ()"}),s.jsxs(Ue,{camera:{position:[4,4,4]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx(V0,{children:s.jsx(JT,{voxels:r,color:"#94a3b8",onClick:f})}),s.jsx(ht,{})]}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:m,className:"bg-slate-700 text-white px-6 py-2 rounded-full font-bold shadow-lg active:scale-95",children:""})})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-slate-500 text-xl font-bold text-slate-700 shadow-xl animate-bounce",children:l})})]})})},o$=({colors:i,onPaint:e})=>{const t=i.map(n=>new yi({color:n||"#fff"}));return s.jsx("mesh",{material:t,onClick:n=>{n.stopPropagation(),n.face&&e(n.face.materialIndex)},children:s.jsx("boxGeometry",{args:[2,2,2]})})},l$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(Array(6).fill("")),[r,o]=E.useState("#ff0000"),[l,u]=E.useState(""),d=["#ff0000","#000000","#00ff00","#000000","#0000ff","#000000"],f=["#ff0000","#00ff00","#0000ff","#000000"];E.useEffect(()=>{a(Array(6).fill("")),u("")},[e]);const m=x=>{const g=[...n];g[x]=r,a(g),g.every((v,M)=>v===d[M])&&(u(" !"),setTimeout(()=>t(v=>v+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.1}),s.jsx("pointLight",{position:[10,0,0],color:"red",intensity:2,distance:20}),s.jsx("pointLight",{position:[0,10,0],color:"green",intensity:2,distance:20}),s.jsx("pointLight",{position:[0,0,10],color:"blue",intensity:2,distance:20}),s.jsxs("mesh",{position:[3,0,0],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshBasicMaterial",{color:"red"})]}),s.jsxs("mesh",{position:[0,3,0],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshBasicMaterial",{color:"green"})]}),s.jsxs("mesh",{position:[0,0,3],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshBasicMaterial",{color:"blue"})]}),s.jsx(o$,{colors:n,onPaint:m}),s.jsx(ht,{})]}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center gap-4",children:f.map(x=>s.jsx("button",{onClick:()=>o(x),className:`w-12 h-12 rounded-full border-4 ${r===x?"border-white scale-110":"border-transparent"}`,style:{backgroundColor:x}},x))}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-500 text-xl font-bold text-rose-700 shadow-xl animate-bounce",children:l})})]})})})},c$=({angle:i})=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,-2,0],children:[s.jsx("cylinderGeometry",{args:[.2,.5,4]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("group",{position:[0,0,0],rotation:[0,0,i],children:[s.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.1,.1,6]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),s.jsxs("group",{position:[-3,-1,0],children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("cylinderGeometry",{args:[.02,.02,1]}),s.jsx("meshBasicMaterial",{color:"#94a3b8"})]}),s.jsxs("mesh",{children:[s.jsx("cylinderGeometry",{args:[1,.8,.2]}),s.jsx("meshStandardMaterial",{color:"#cbd5e1"})]})]}),s.jsxs("group",{position:[3,-1,0],children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("cylinderGeometry",{args:[.02,.02,1]}),s.jsx("meshBasicMaterial",{color:"#94a3b8"})]}),s.jsxs("mesh",{children:[s.jsx("cylinderGeometry",{args:[1,.8,.2]}),s.jsx("meshStandardMaterial",{color:"#cbd5e1"})]})]})]})]}),u$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState(0),[l,u]=E.useState([1,2,3]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const _=3+Math.floor(Math.random()*5);a(_),o(0),u([1,2,3,4,5]),x("")};E.useEffect(()=>{g()},[e]),E.useEffect(()=>{let _=0;n>r&&(_=.3),r>n&&(_=-.3);const S=setInterval(()=>{f(j=>j+(_-j)*.1)},16);return n===r&&n>0&&!m&&(x(" !"),setTimeout(()=>t(j=>j+1),1500)),()=>clearInterval(S)},[n,r,m]);const v=_=>{o(r+_),u(l.filter(S=>S!==_))},M=()=>{o(0),u([1,2,3,4,5]),x("")};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-emerald-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,2,10],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(c$,{angle:d}),s.jsx("group",{position:[-3,-1+Math.sin(d)*3,0],children:s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#ef4444"}),s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-white font-bold",children:"?"})})]})}),s.jsx("group",{position:[3,-1-Math.sin(d)*3,0],children:s.jsxs("mesh",{position:[0,.5+r*.1,0],children:[s.jsx("boxGeometry",{args:[1,1+r*.2,1]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"}),s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-white font-bold",children:r>0?r:""})})]})}),s.jsx(ht,{enabled:!1})]}),s.jsxs("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center gap-4",children:[l.map(_=>s.jsx("button",{onClick:()=>v(_),className:"w-16 h-16 bg-white rounded-xl shadow-lg border-b-4 border-emerald-200 font-black text-xl text-emerald-600 active:scale-95",children:_},_)),s.jsx("button",{onClick:M,className:"w-16 h-16 bg-red-100 rounded-xl shadow-lg border-b-4 border-red-200 font-bold text-red-500 active:scale-95",children:""})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-emerald-500 text-xl font-bold text-emerald-700 shadow-xl animate-bounce",children:m})})]})})})},d$=({piece:i,onClick:e})=>{const t=E.useRef(null);return Yt(()=>{if(t.current){const n=i.placed?new Q(...i.targetPos):new Q(...i.startPos);t.current.position.lerp(n,.1),i.placed?t.current.rotation.y=ks.lerp(t.current.rotation.y,0,.1):t.current.rotation.y=Math.sin(Date.now()*.002)*.2}}),s.jsx("group",{ref:t,onClick:n=>{n.stopPropagation(),e()},children:i.voxels.map((n,a)=>s.jsxs("mesh",{position:n,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:i.color}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},a))})},f$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=()=>{const d=["#ef4444","#3b82f6","#22c55e","#eab308"],f=[],m=[];for(let _=-1;_<=1;_++)for(let S=-1;S<=1;S++)m.push([_,-1,S]);f.push({id:0,voxels:m.map(_=>[_[0],0,_[2]]),color:d[0],targetPos:[0,-1,0],startPos:[-3,0,0],placed:!1});const x=[];x.push([-1,0,-1],[0,0,-1],[1,0,-1],[-1,0,0],[1,0,0]),f.push({id:1,voxels:x,color:d[1],targetPos:[0,0,0],startPos:[0,3,0],placed:!1});const g=[];g.push([-1,0,1],[0,0,1],[1,0,1],[0,0,0]);for(let _=-1;_<=1;_++)for(let S=-1;S<=1;S++)g.push([_,1,S]);const v=(_,S,j,A)=>({id:_,voxels:S,color:A,targetPos:[0,0,0],startPos:j,placed:!1}),M=[v(0,m,[0,-4,0],d[0]),v(1,x,[-4,0,0],d[1]),v(2,g,[0,4,0],d[2])];a(M),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{if(r||n[d].placed)return;const f=n.filter(m=>m.placed).length;if(d===f){const m=[...n];m[d].placed=!0,a(m),m.every(x=>x.placed)&&(o(" !"),setTimeout(()=>t(x=>x+1),1500))}else o(" !"),setTimeout(()=>o(""),1e3)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex-1 relative bg-blue-50 h-full",children:[s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsxs(V0,{children:[n.map((d,f)=>s.jsx(d$,{piece:d,onClick:()=>u(f)},f)),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[3.1,3.1,3.1]}),s.jsx("meshBasicMaterial",{color:"#cbd5e1",wireframe:!0})]})]}),s.jsx(ht,{})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-500 text-xl font-bold text-blue-700 shadow-xl animate-bounce",children:r})})]})})},h$=({angle:i,distance:e=8})=>{const t=-Math.cos(i)*e,n=Math.sin(i)*e;return s.jsxs("group",{children:[s.jsx("directionalLight",{position:[t,n,0],intensity:2,castShadow:!0,"shadow-mapSize":[1024,1024],children:s.jsx("orthographicCamera",{attach:"shadow-camera",args:[-5,5,5,-5]})}),s.jsxs("mesh",{position:[t,n,0],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshBasicMaterial",{color:"#fcd34d"})]})]})},m$=()=>s.jsxs("mesh",{position:[0,1,0],castShadow:!0,receiveShadow:!0,children:[s.jsx("cylinderGeometry",{args:[.1,.1,2]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),p$=({angle:i})=>{const e=2*(1/Math.tan(i));return s.jsxs("mesh",{position:[e/2,.01,0],rotation:[0,0,Math.PI/2],children:[s.jsx("planeGeometry",{args:[.2,Math.abs(e)]}),s.jsx("meshBasicMaterial",{color:"#ef4444",opacity:.3,transparent:!0})]})},x$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(Math.PI/2),[r,o]=E.useState(Math.PI/2),[l,u]=E.useState(""),d=()=>{const m=.3+Math.random()*(Math.PI-.6);a(m),o(Math.PI/2),u("")};E.useEffect(()=>{d()},[e]);const f=()=>{Math.abs(r-n)<.1?(u(" !"),setTimeout(()=>t(m=>m+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-sky-50",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[0,5,10],fov:45},shadows:!0,children:[s.jsx("ambientLight",{intensity:.4}),s.jsx(h$,{angle:r}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[s.jsx("planeGeometry",{args:[20,20]}),s.jsx("meshStandardMaterial",{color:"#e0f2fe"})]}),s.jsx(m$,{}),s.jsx(p$,{angle:n}),s.jsx(ht,{enabled:!1})]})}),s.jsxs("div",{className:"bg-white p-6 rounded-t-3xl shadow-xl flex flex-col items-center gap-4",children:[s.jsx("input",{type:"range",min:"0.2",max:"2.94",step:"0.01",value:r,onChange:m=>o(Number(m.target.value)),className:"w-full max-w-md h-6 bg-slate-200 rounded-full appearance-none cursor-pointer accent-yellow-500"}),s.jsx("button",{onClick:f,className:"bg-yellow-500 text-white px-8 py-3 rounded-full font-bold shadow-lg active:scale-95",children:""})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-yellow-500 text-xl font-bold text-yellow-700 shadow-xl animate-bounce",children:l})})]})})},QT=({type:i,color:e})=>{if(i==="empty")return null;let t;return i==="square"&&(t=s.jsx("boxGeometry",{args:[1.5,.2,1.5]})),i==="circle"&&(t=s.jsx("cylinderGeometry",{args:[.8,.8,.2,32]})),i==="cross"&&(t=s.jsxs("group",{children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1.5,.2,.5]}),s.jsx("meshStandardMaterial",{color:e})]}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.5,.2,1.5]}),s.jsx("meshStandardMaterial",{color:e})]})]})),s.jsxs("mesh",{children:[i!=="cross"&&t,i==="cross"?t:s.jsx("meshStandardMaterial",{color:e})]})},g$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(["empty","empty","empty"]),[l,u]=E.useState(0),[d,f]=E.useState(""),m=()=>{const v=["square","circle","cross"],M=[0,1,2].map(()=>v[Math.floor(Math.random()*v.length)]);a(M),o(["empty","empty","empty"]),u(0),f("")};E.useEffect(()=>{m()},[e]);const x=v=>{const M=[...r];M[l]=v,o(M)},g=()=>{JSON.stringify(r)===JSON.stringify(n)?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-indigo-50",children:[s.jsxs("div",{className:"flex-1 flex gap-2 p-2",children:[s.jsxs("div",{className:"w-1/2 bg-white rounded-xl border-4 border-indigo-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-indigo-500 text-white text-xs px-2 py-1 rounded z-10",children:""}),s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:n.map((v,M)=>s.jsx("group",{position:[0,M*.3,0],children:s.jsx(QT,{type:v,color:"#6366f1"})},M))}),s.jsx(ht,{autoRotate:!0})]})]}),s.jsxs("div",{className:"w-1/2 bg-white rounded-xl border-4 border-slate-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-slate-500 text-white text-xs px-2 py-1 rounded z-10",children:""}),s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("group",{position:[0,-.5,0],children:r.map((v,M)=>s.jsxs("group",{position:[0,M*.3,0],children:[s.jsx(QT,{type:v,color:M===l?"#fbbf24":"#94a3b8"}),M===l&&s.jsxs("mesh",{position:[1.5,0,0],children:[s.jsx("sphereGeometry",{args:[.1]}),s.jsx("meshBasicMaterial",{color:"red"})]})]},M))}),s.jsx(ht,{})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-lg flex flex-col gap-4",children:[s.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2].map(v=>s.jsxs("button",{onClick:()=>u(v),className:`px-4 py-2 rounded-full font-bold ${l===v?"bg-indigo-500 text-white":"bg-slate-100 text-slate-500"}`,children:["",v+1,""]},v))}),s.jsxs("div",{className:"flex justify-center gap-4",children:[["square","circle","cross"].map(v=>s.jsx("button",{onClick:()=>x(v),className:"w-16 h-16 bg-slate-100 rounded-xl border-2 border-slate-200 hover:bg-indigo-50 active:scale-95 flex items-center justify-center text-3xl",children:v==="square"?"":v==="circle"?"":""},v)),s.jsx("button",{onClick:()=>x("empty"),className:"w-16 h-16 bg-red-100 rounded-xl border-2 border-red-200 text-red-500 flex items-center justify-center font-bold",children:""})]}),s.jsx("button",{onClick:g,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl shadow-md",children:""})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:d})})]})})},$T=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,.5,0],children:[s.jsx("boxGeometry",{}),s.jsx("meshStandardMaterial",{color:"#f87171"})]}),s.jsxs("mesh",{position:[1,.5,1],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{position:[-1,1,-1],children:[s.jsx("coneGeometry",{args:[.5,2]}),s.jsx("meshStandardMaterial",{color:"#facc15"})]}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[10,10]}),s.jsx("meshStandardMaterial",{color:"#f1f5f9"})]})]}),v$=({pos:i,id:e,onClick:t})=>s.jsxs("group",{position:i,onClick:n=>{n.stopPropagation(),t()},children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.5,.3,.3]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsx(gs,{center:!0,position:[0,.5,0],pointerEvents:"none",children:s.jsx("div",{className:"bg-black text-white px-1.5 rounded text-xs font-bold",children:e})})]}),y$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(1),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const g=[[5,3,5],[-5,3,5],[5,3,-5],[-5,3,-5],[0,6,6],[6,2,0]].map((v,M)=>({id:M+1,pos:v}));o(g),a(Math.floor(Math.random()*g.length)+1),u("")};E.useEffect(()=>{d()},[e]);const f=x=>{x===n?(u(" !"),setTimeout(()=>t(g=>g+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},m=()=>{const x=r.find(g=>g.id===n);return x?x.pos:[5,5,5]};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-200 relative",children:[s.jsxs("div",{className:"absolute top-4 right-4 w-40 h-40 border-4 border-white shadow-xl bg-black rounded-lg overflow-hidden z-10 pointer-events-none",children:[s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:m(),fov:45}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx($T,{})]}),s.jsx("div",{className:"absolute bottom-1 right-1 text-white text-xs font-bold",children:""})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[0,10,0],fov:60},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx($T,{}),r.map(x=>s.jsx(v$,{id:x.id,pos:x.pos,onClick:()=>f(x.id)},x.id)),s.jsx(ht,{})]})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-fuchsia-500 text-xl font-bold text-fuchsia-700 shadow-xl animate-bounce",children:l})})]})})},b$=({pos:i})=>s.jsxs("mesh",{position:[i[0],.5,i[1]],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.4,.4,.8,16]}),s.jsx("meshStandardMaterial",{color:"#ec4899"})]}),M$=({pos:i})=>s.jsxs("mesh",{position:[i[0],.5,i[1]],children:[s.jsx("boxGeometry",{args:[.9,1,.9]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),S$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([0,0]),[l,u]=E.useState(""),d=5,f=()=>{const x=Array(d).fill(0).map(()=>Array(d).fill(0));for(let g=0;g<5;g++){const v=Math.floor(Math.random()*d),M=Math.floor(Math.random()*d);(v!==0||M!==0)&&(x[M][v]=1)}x[0][0]=2,a(x),o([0,0]),u("")};E.useEffect(()=>{f()},[e]);const m=(x,g)=>{if(l)return;let v=r[0],M=r[1];const _=n.map(j=>[...j]);for(;;){const j=v+x,A=M+g;if(j<0||j>=d||A<0||A>=d||_[A][j]===1)break;v=j,M=A,_[M][v]===0&&(_[M][v]=2)}o([v,M]),a(_),_.flat().filter(j=>j===0).length===0&&(u(" !"),setTimeout(()=>t(j=>j+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-green-50",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[0,8,4],fov:50},children:[s.jsx("ambientLight",{intensity:.6}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[5,5],sectionColor:"#15803d",cellColor:"#86efac",position:[0,-.01,0]}),s.jsxs("group",{position:[-2,0,-2],children:[n.map((x,g)=>x.map((v,M)=>v===1?s.jsx(M$,{pos:[M,g]},`${M}-${g}`):v===2?s.jsxs("mesh",{position:[M,.05,g],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]},`${M}-${g}`):null)),s.jsx(b$,{pos:r})]}),s.jsx(ht,{enabled:!1})]})}),s.jsxs("div",{className:"h-40 bg-white shadow-xl flex items-center justify-center gap-4",children:[s.jsx("button",{className:"p-4 bg-green-100 rounded-full active:bg-green-300",onClick:()=>m(0,-1),children:s.jsx(q0,{})}),s.jsxs("div",{className:"flex gap-16",children:[s.jsx("button",{className:"p-4 bg-green-100 rounded-full active:bg-green-300",onClick:()=>m(-1,0),children:s.jsx(ud,{})}),s.jsx("button",{className:"p-4 bg-green-100 rounded-full active:bg-green-300",onClick:()=>m(1,0),children:s.jsx(kx,{})})]}),s.jsx("button",{className:"p-4 bg-green-100 rounded-full active:bg-green-300",onClick:()=>m(0,1),children:s.jsx(tu,{})})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-green-500 text-xl font-bold text-green-700 shadow-xl animate-bounce",children:l})})]})})},_$=({data:i})=>{const e=Uo.useRef(null);return Yt(()=>{e.current&&(e.current.rotation.z+=i.speed)}),s.jsxs("group",{ref:e,position:[i.x,i.y,0],children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[i.radius,i.radius,.2,32]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[i.radius*.6,0,.11],children:[s.jsx("sphereGeometry",{args:[i.radius*.2]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]})]})},w$=({p1:i,p2:e,type:t,onClick:n})=>{if(t==="none")return null;const a=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),r=Math.atan2(e.y-i.y,e.x-i.x),o=({y1:l,y2:u,cross:d})=>{const f=new Q(0,l,0).applyAxisAngle(new Q(0,0,1),r),m=new Q(0,u,0).applyAxisAngle(new Q(0,0,1),r),x=new Q(i.x,i.y,0).add(f),g=new Q(e.x,e.y,0).add(m),v=x.clone().add(g).multiplyScalar(.5),M=x.distanceTo(g),_=Math.atan2(g.y-x.y,g.x-x.x);return s.jsxs("mesh",{position:v,rotation:[0,0,_],children:[s.jsx("boxGeometry",{args:[M,.1,.1]}),s.jsx("meshBasicMaterial",{color:"#475569"})]})};return s.jsxs("group",{onClick:l=>{l.stopPropagation(),n()},children:[t==="straight"?s.jsxs(s.Fragment,{children:[s.jsx(o,{y1:i.radius,y2:e.radius}),s.jsx(o,{y1:-i.radius,y2:-e.radius})]}):s.jsxs(s.Fragment,{children:[s.jsx(o,{y1:i.radius,y2:-e.radius,cross:!0}),s.jsx(o,{y1:-i.radius,y2:e.radius,cross:!0})]}),s.jsxs("mesh",{position:[(i.x+e.x)/2,(i.y+e.y)/2,0],children:[s.jsx("planeGeometry",{args:[a,1]}),s.jsx("meshBasicMaterial",{visible:!1})]})]})},j$=({onBack:i})=>{var m,x;const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const v=[];for(let M=0;M<3;M++)v.push({id:M,x:(M-1)*2.5,y:M%2===0?0:1,radius:.6+Math.random()*.4,speed:M===0?.05:0});a(v),o(Array(2).fill("none")),u("")};E.useEffect(()=>{d()},[e]);const f=g=>{if(l)return;const v=[...r];v[g]==="none"?v[g]="straight":v[g]==="straight"?v[g]="cross":v[g]="none",o(v)};return E.useEffect(()=>{if(n.length===0)return;const g=[...n];for(let M=0;M<r.length;M++){const _=r[M],S=g[M],j=g[M+1];if(_==="none")j.speed=0;else{const A=S.radius/j.radius,C=_==="straight"?1:-1;j.speed=S.speed*A*C}}a(g),g[g.length-1].speed<-.01&&(u(" !"),setTimeout(()=>t(M=>M+1),1500))},[r]),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-amber-50 relative",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[0,0,8]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),n.map(g=>s.jsx(_$,{data:g},g.id)),r.map((g,v)=>s.jsxs("group",{children:[s.jsx(w$,{p1:n[v],p2:n[v+1],type:g,onClick:()=>f(v)}),g==="none"&&s.jsx(gs,{position:[(n[v].x+n[v+1].x)/2,(n[v].y+n[v+1].y)/2,0],center:!0,children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-200/50 border-2 border-dashed border-amber-400 flex items-center justify-center cursor-pointer animate-pulse pointer-events-none",children:"+"})})]},v)),s.jsx(gs,{position:[((m=n[n.length-1])==null?void 0:m.x)||0,(((x=n[n.length-1])==null?void 0:x.y)||0)-1.5,0],center:!0,children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("span",{className:"text-xs font-bold text-amber-600",children:": "})]})}),s.jsx(ht,{enabled:!1})]})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-500 text-xl font-bold text-amber-700 shadow-xl animate-bounce",children:l})})]})})},E$=({type:i,height:e,x:t,z:n,onClick:a})=>{const r=()=>i==="flat"?s.jsxs("mesh",{position:[0,e+.1,0],children:[s.jsx("boxGeometry",{args:[.9,.2,.9]}),s.jsx("meshStandardMaterial",{color:"#94a3b8"})]}):i==="ramp_up"?s.jsxs("mesh",{position:[0,e+.5,0],rotation:[0,0,Math.PI/4],children:[s.jsx("boxGeometry",{args:[1.4,.2,.9]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}):i==="ramp_down"?s.jsxs("mesh",{position:[0,e+.5,0],rotation:[0,0,-Math.PI/4],children:[s.jsx("boxGeometry",{args:[1.4,.2,.9]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}):null;return s.jsxs("group",{position:[t,0,n],onClick:o=>{o.stopPropagation(),a()},children:[e>0&&s.jsxs("mesh",{position:[0,e/2,0],children:[s.jsx("boxGeometry",{args:[.8,e,.8]}),s.jsx("meshStandardMaterial",{color:"#e2e8f0"})]}),s.jsx("mesh",{position:[0,e+.5,0],visible:!1,children:s.jsx("boxGeometry",{args:[1,1,1]})}),r()]})},T$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=()=>{const d=[];for(let f=0;f<5;f++)d.push({x:f,z:0,height:f===0?0:f===4?2:0,type:f===0||f===4?"flat":"empty",fixed:f===0||f===4});a(d),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{if(r)return;const f=n.findIndex(S=>S.x===d);if(f===-1||n[f].fixed)return;const m=["empty","flat","ramp_up","ramp_down"],x=n[f].type,g=m[(m.indexOf(x)+1)%m.length],v=[...n];v[f]={...v[f],type:g},a(v);let M=!0;for(let S=0;S<5;S++)v[S];let _=0;for(let S=0;S<5;S++)v[S].height=_,v[S].type==="ramp_up"?_++:v[S].type==="ramp_down"?_--:v[S].type==="empty"&&(M=!1);M&&_===0&&v[4].height===2&&v[4].height===2&&(o(" !"),setTimeout(()=>t(S=>S+1),1500)),a(v)};return s.jsx(tt,{title:"",onBack:i,instruction:"//",children:s.jsxs("div",{className:"flex-1 bg-teal-50 relative h-full",children:[s.jsxs(Ue,{camera:{position:[2,3,6],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[5,1],position:[2,-.01,0],cellColor:"#99f6e4",sectionColor:"#5eead4"}),n.map(d=>s.jsx(E$,{...d,onClick:()=>u(d.x)},d.x)),s.jsx(ht,{enabled:!1})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-500 text-xl font-bold text-teal-700 shadow-xl animate-bounce",children:r})})]})})},eA=[{name:"",hint:"",targets:[{x:0,y:.6},{x:0,y:-.5}],shapes:["sphere","box"]},{name:"",hint:"",targets:[{x:0,y:.6},{x:0,y:-.4}],shapes:["sphere","sphere"]},{name:"",hint:"",targets:[{x:0,y:.5},{x:0,y:-.5}],shapes:["box","box"]},{name:"",hint:"",targets:[{x:-.6,y:0},{x:.6,y:0}],shapes:["sphere","box"]},{name:"",hint:"",targets:[{x:-.6,y:.6},{x:.6,y:-.6}],shapes:["sphere","box"]}],A$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([-1,0]),[r,o]=E.useState([1,0]),[l,u]=E.useState(eA[0]),[d,f]=E.useState(""),m=()=>e<=2?{targets:[0,1],tolerance:.3,step:.2}:e<=5?{targets:[0,1,2,3],tolerance:.25,step:.15}:e<=9?{targets:[0,1,2,3,4],tolerance:.2,step:.1}:{targets:[0,1,2,3,4],tolerance:.15,step:.1},x=()=>{const _=m(),S=_.targets[Math.floor(Math.random()*_.targets.length)];u(eA[S]),a([-2+Math.random(),Math.random()*2-1]),o([2-Math.random(),Math.random()*2-1]),f("")};E.useEffect(()=>{x()},[e]);const g=()=>e<=2?"":e<=5?"":e<=9?"":"",v=()=>{const _=m(),S=l.targets;Math.abs(n[0]-S[0].x)<_.tolerance&&Math.abs(n[1]-S[0].y)<_.tolerance&&Math.abs(r[0]-S[1].x)<_.tolerance&&Math.abs(r[1]-S[1].y)<_.tolerance?(f(" !"),setTimeout(()=>t(j=>j+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},M=(_,S,j)=>{if(d)return;const A=m();if(_===1){const C=[...n];S==="x"&&(C[0]=Math.max(-3,Math.min(3,C[0]+j*A.step))),S==="y"&&(C[1]=Math.max(-3,Math.min(3,C[1]+j*A.step))),a(C)}else{const C=[...r];S==="x"&&(C[0]=Math.max(-3,Math.min(3,C[0]+j*A.step))),S==="y"&&(C[1]=Math.max(-3,Math.min(3,C[1]+j*A.step))),o(C)}};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${g()}] - "${l.name}"${l.hint}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-stone-100 relative",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,10]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[0,0,5],intensity:1,castShadow:!0}),s.jsxs("mesh",{position:[0,0,-2],receiveShadow:!0,children:[s.jsx("planeGeometry",{args:[10,10]}),s.jsx("meshStandardMaterial",{color:"#e7e5e4"})]}),s.jsxs("mesh",{position:[n[0],n[1],2],castShadow:!0,children:[l.shapes[0]==="sphere"?s.jsx("sphereGeometry",{args:[.5]}):s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[r[0],r[1],2],castShadow:!0,children:[l.shapes[1]==="sphere"?s.jsx("sphereGeometry",{args:[.5]}):s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]})]}),s.jsxs("div",{className:"absolute top-4 left-4 bg-stone-800/70 backdrop-blur px-3 py-1 rounded-lg text-white text-sm",children:[" : ",l.name]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-t-2xl shadow-xl border-t-2 border-stone-200",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{className:"bg-red-50 p-2 rounded-xl",children:[s.jsxs("div",{className:"text-xs text-center text-red-500 font-bold mb-1",children:[" ",l.shapes[0]==="sphere"?"":""]}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsx("div",{}),s.jsx("button",{onClick:()=>M(1,"y",1),className:"py-2 bg-red-200 text-red-600 rounded font-bold active:bg-red-300",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>M(1,"x",-1),className:"py-2 bg-red-200 text-red-600 rounded font-bold active:bg-red-300",children:""}),s.jsx("div",{className:"py-2 bg-red-100 rounded text-center text-xs text-red-400",children:""}),s.jsx("button",{onClick:()=>M(1,"x",1),className:"py-2 bg-red-200 text-red-600 rounded font-bold active:bg-red-300",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>M(1,"y",-1),className:"py-2 bg-red-200 text-red-600 rounded font-bold active:bg-red-300",children:""}),s.jsx("div",{})]})]}),s.jsxs("div",{className:"bg-blue-50 p-2 rounded-xl",children:[s.jsxs("div",{className:"text-xs text-center text-blue-500 font-bold mb-1",children:[" ",l.shapes[1]==="sphere"?"":""]}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsx("div",{}),s.jsx("button",{onClick:()=>M(2,"y",1),className:"py-2 bg-blue-200 text-blue-600 rounded font-bold active:bg-blue-300",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>M(2,"x",-1),className:"py-2 bg-blue-200 text-blue-600 rounded font-bold active:bg-blue-300",children:""}),s.jsx("div",{className:"py-2 bg-blue-100 rounded text-center text-xs text-blue-400",children:""}),s.jsx("button",{onClick:()=>M(2,"x",1),className:"py-2 bg-blue-200 text-blue-600 rounded font-bold active:bg-blue-300",children:""}),s.jsx("div",{}),s.jsx("button",{onClick:()=>M(2,"y",-1),className:"py-2 bg-blue-200 text-blue-600 rounded font-bold active:bg-blue-300",children:""}),s.jsx("div",{})]})]})]}),s.jsx("button",{onClick:v,className:"w-full py-3 bg-stone-600 text-white rounded-xl font-bold shadow-lg border-b-4 border-stone-800 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`bg-white px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce ${d.includes("")?"border-green-500 text-green-700":"border-stone-500 text-stone-700"}`,children:d})})]})})},tA=({rotation:i,colors:e})=>{const t=Uo.useRef(null);Yt(()=>{t.current&&(t.current.rotation.x=ks.lerp(t.current.rotation.x,i.x,.2),t.current.rotation.y=ks.lerp(t.current.rotation.y,i.y,.2),t.current.rotation.z=ks.lerp(t.current.rotation.z,i.z,.2))});const n=e.map(a=>new yi({color:a}));return s.jsx("group",{ref:t,children:s.jsx("mesh",{material:n,children:s.jsx("boxGeometry",{args:[1.5,1.5,1.5]})})})},C$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(Array(6).fill("#ffffff")),[r,o]=E.useState(new is(0,0,0)),[l,u]=E.useState([]),[d,f]=E.useState(""),m=()=>{const M=Array(6).fill("#ffffff");M[2]="#ef4444",M[4]="#3b82f6",u(M),a(Array(6).fill("#ffffff")),o(new is(0,0,0)),f("")};E.useEffect(()=>{m()},[e]);const x=()=>o(new is(r.x,r.y+Math.PI/2,r.z)),g=()=>o(new is(r.x+Math.PI/2,r.y,r.z)),v=M=>{const S=new Wn().setFromEuler(r).invert(),j=new Q(0,1,0).applyQuaternion(S);let A=-1;const C=Math.abs(j.x),N=Math.abs(j.y),R=Math.abs(j.z);C>N&&C>R?A=j.x>0?0:1:N>R?A=j.y>0?2:3:A=j.z>0?4:5;const O=[...n];O[A]=M,a(O),JSON.stringify(O)===JSON.stringify(l)&&(f(" !"),setTimeout(()=>t(U=>U+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-rose-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 w-24 h-24 border-2 border-rose-200 bg-white rounded-lg z-10 pointer-events-none",children:[s.jsxs(Ue,{children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[2,2,2]}),s.jsx(tA,{rotation:new is(0,0,0),colors:l}),s.jsx(ht,{autoRotate:!0})]}),s.jsx("div",{className:"absolute bottom-0 w-full text-center text-xs bg-rose-100 text-rose-500",children:""})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[4,4,4]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[2,2,2]}),s.jsx(tA,{rotation:r,colors:n})]})}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-xl flex flex-col gap-4",children:[s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx("button",{onClick:g,className:"px-4 py-2 bg-slate-200 rounded font-bold text-slate-600",children:" "}),s.jsx("button",{onClick:x,className:"px-4 py-2 bg-slate-200 rounded font-bold text-slate-600",children:" "})]}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>v("#ef4444"),className:"px-6 py-3 bg-red-500 text-white rounded-xl font-bold shadow active:scale-95",children:""}),s.jsx("button",{onClick:()=>v("#3b82f6"),className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-bold shadow active:scale-95",children:""})]})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-500 text-xl font-bold text-rose-700 shadow-xl animate-bounce",children:d})})]})})},N$=[{id:"red",color:"#ef4444",colorName:"",shape:"box",xPos:-1,yPos:0},{id:"green",color:"#22c55e",colorName:"",shape:"circle",xPos:.5,yPos:.5},{id:"blue",color:"#3b82f6",colorName:"",shape:"triangle",xPos:0,yPos:-.5},{id:"yellow",color:"#eab308",colorName:"",shape:"star",xPos:1,yPos:-.3},{id:"purple",color:"#a855f7",colorName:"",shape:"diamond",xPos:-.5,yPos:.8}],R$=({config:i,zPos:e})=>{const t=()=>{switch(i.shape){case"box":return s.jsx("boxGeometry",{args:[1.2,1.2,.1]});case"circle":return s.jsx("circleGeometry",{args:[.7,32]});case"triangle":return s.jsx("cylinderGeometry",{args:[.7,.7,.1,3]});case"star":return s.jsx("cylinderGeometry",{args:[.6,.6,.1,5]});case"diamond":return s.jsx("cylinderGeometry",{args:[.6,.6,.1,4]})}};return s.jsxs("mesh",{position:[i.xPos,i.yPos,e],children:[t(),s.jsx("meshStandardMaterial",{color:i.color})]})},nA=({shapes:i,zPositions:e})=>s.jsx("group",{children:i.map((t,n)=>s.jsx(R$,{config:t,zPos:e[n]},t.id))}),D$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>e<=2?2:e<=5?3:e<=9?4:5,f=()=>e<=3?2:e<=6?3:e<=10?4:5,m=d(),x=f(),g=E.useMemo(()=>N$.slice(0,m),[m]),v=()=>{const C=[];for(let N=0;N<x;N++)C.push(-2+4/(x-1)*N);return C},M=()=>{const R=[...v()].sort(()=>.5-Math.random()).slice(0,m);a(R),o(new Array(m).fill(0)),u("")};E.useEffect(()=>{M()},[e]);const _=(C,N)=>{const R=[...r];R[C]=N,o(R)},S=()=>{const C=N=>{const R=N.map((O,U)=>({v:O,i:U}));return R.sort((O,U)=>U.v-O.v),R.map(O=>O.i).join(",")};C(r)===C(n)?(u(" !"),setTimeout(()=>t(N=>N+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},j=()=>e<=2?"":e<=5?"":e<=9?"":"",A=C=>{const N="w-6 h-6 flex-shrink-0";switch(C.shape){case"box":return s.jsx("div",{className:N,style:{backgroundColor:C.color,borderRadius:2}});case"circle":return s.jsx("div",{className:N,style:{backgroundColor:C.color,borderRadius:"50%"}});case"triangle":return s.jsx("div",{className:"w-0 h-0 flex-shrink-0",style:{borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderBottom:`20px solid ${C.color}`}});case"star":return s.jsx("div",{className:N,style:{backgroundColor:C.color,borderRadius:2,transform:"rotate(45deg)"}});case"diamond":return s.jsx("div",{className:"w-5 h-5 flex-shrink-0",style:{backgroundColor:C.color,transform:"rotate(45deg)"}})}};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${j()}] - ${m}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-indigo-50",children:[s.jsxs("div",{className:"h-[35%] bg-black border-b-4 border-white relative pointer-events-none",children:[s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:[0,0,10]}),s.jsx("ambientLight",{intensity:1}),s.jsx(nA,{shapes:g,zPositions:n})]}),s.jsx("div",{className:"absolute top-2 left-2 text-white bg-black/50 px-2 py-1 rounded text-xs font-bold",children:" "})]}),s.jsxs("div",{className:"h-[25%] relative border-b-2 border-indigo-200",children:[s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:[0,5,5],rotation:[-Math.PI/4,0,0]}),s.jsx("ambientLight",{intensity:1}),s.jsx(nA,{shapes:g,zPositions:r}),s.jsx("gridHelper",{args:[10,10],position:[0,-1,0]})]}),s.jsx("div",{className:"absolute top-2 left-2 text-indigo-800 bg-white/80 px-2 py-1 rounded text-xs font-bold",children:" "})]}),s.jsxs("div",{className:"flex-1 bg-white p-4 overflow-y-auto",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-2 text-center",children:"  |  "}),s.jsx("div",{className:"flex flex-col gap-3",children:g.map((C,N)=>s.jsxs("div",{className:"flex items-center gap-3",children:[A(C),s.jsx("span",{className:"text-sm font-bold w-6",style:{color:C.color},children:C.colorName}),s.jsx("input",{type:"range",min:"-2",max:"2",step:4/(x-1),value:r[N]||0,onChange:R=>_(N,Number(R.target.value)),className:"flex-1 h-3 bg-indigo-100 rounded-full appearance-none cursor-pointer accent-indigo-500"})]},C.id))}),s.jsx("button",{onClick:S,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl mt-4 shadow-lg border-b-4 border-indigo-800 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:l})})]})})},sA=({blocks:i,color:e,onClick:t})=>s.jsx("group",{children:i.map((n,a)=>s.jsxs("mesh",{position:n,onClick:r=>{t&&(r.stopPropagation(),t(n))},onPointerOver:()=>{t&&(document.body.style.cursor="pointer")},onPointerOut:()=>{t&&(document.body.style.cursor="auto")},children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},a))}),L$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const m=[],x=[];for(let M=1;M<=2;M++)for(let _=0;_<3;_++)for(let S=-1;S<=1;S++)x.push([M,_,S]);const g=5+Math.floor(Math.random()*5);m.push([-1,0,0]);const v=new Set(["-1,0,0"]);for(;m.length<g;){const M=m[Math.floor(Math.random()*m.length)],S=[[-1,0,0],[1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].map(j=>[M[0]+j[0],M[1]+j[1],M[2]+j[2]]).filter(j=>!v.has(`${j[0]},${j[1]},${j[2]}`)&&j[0]<0&&j[0]>=-2&&j[1]>=0&&j[1]<3&&Math.abs(j[2])<=1);if(S.length>0){const j=S[Math.floor(Math.random()*S.length)];m.push(j),v.add(`${j[0]},${j[1]},${j[2]}`)}else break}a(m),o(x),u("")};E.useEffect(()=>{d()},[e]);const f=m=>{if(l)return;o(r.filter(S=>!(S[0]===m[0]&&S[1]===m[1]&&S[2]===m[2])));const x=r.filter(S=>!(S[0]===m[0]&&S[1]===m[1]&&S[2]===m[2])),g=n.map(S=>[-S[0],S[1],S[2]]),v=(S,j)=>S[0]-j[0]||S[1]-j[1]||S[2]-j[2],M=JSON.stringify(x.sort(v)),_=JSON.stringify(g.sort(v));M===_&&(u(" !"),setTimeout(()=>t(S=>S+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-purple-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,5,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsxs("mesh",{position:[0,1.5,0],children:[s.jsx("boxGeometry",{args:[.1,4,4]}),s.jsx("meshStandardMaterial",{color:"#c084fc",transparent:!0,opacity:.3})]}),s.jsx(sA,{blocks:n,color:"#a855f7"}),s.jsx(sA,{blocks:r,color:"#d8b4fe",onClick:f}),s.jsx(ht,{})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-purple-500 text-xl font-bold text-purple-700 shadow-xl animate-bounce",children:l})})]})})})},U$=({pos:i,rot:e,onClick:t})=>s.jsxs("group",{position:[i[0],0,i[1]],onClick:n=>{n.stopPropagation(),t()},children:[s.jsxs("mesh",{rotation:[0,e*Math.PI/2,0],children:[s.jsx("boxGeometry",{args:[.6,.6,.6]}),s.jsx("meshPhysicalMaterial",{color:"#a5f3fc",transmission:.9,roughness:0})]}),s.jsxs("mesh",{rotation:[0,e*Math.PI/2+Math.PI/4,0],children:[s.jsx("boxGeometry",{args:[.05,.5,.8]}),s.jsx("meshBasicMaterial",{color:"white",opacity:.5,transparent:!0})]})]}),P$=({path:i})=>{const e=E.useMemo(()=>new md(i.map(t=>new Q(...t)),!1,"catmullrom",0),[i]);return i.length<2?null:s.jsx(lg,{args:[e,64,.05,8,!1],children:s.jsx("meshBasicMaterial",{color:"#ef4444"})})},O$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState([]),[d,f]=E.useState(""),m=5,x=()=>{const v=[],M=[];v.push({x:2,y:2,rot:Math.floor(Math.random()*4)}),M.push({x:0,y:2}),M.push({x:4,y:2}),M.push({x:2,y:0}),a(v),o(M),f("")};E.useEffect(()=>{x()},[e]),E.useEffect(()=>{const v=[],M=[{x:2,y:5,dx:0,dy:-1}],_=new Set,S=new Set;for(;M.length>0;){const j=M.shift(),A=`${j.x},${j.y},${j.dx},${j.dy}`;if(S.has(A))continue;S.add(A);let C=j.x,N=j.y;const R=[[C,0,N]];let O=0;for(;O<10;){C+=j.dx,N+=j.dy,R.push([C,0,N]);const U=n.findIndex(z=>z.x===C&&z.y===N);if(U!==-1){const z=n[U];let I=0,V=0;z.rot%2===0?(I=-j.dy,V=-j.dx):(I=j.dy,V=j.dx),M.push({x:C,y:N,dx:I,dy:V}),M.push({x:C,y:N,dx:j.dx,dy:j.dy});break}if(r.some(z=>z.x===C&&z.y===N)){_.add(`${C},${N}`);break}if(C<0||C>=m||N<0||N>=m)break;O++}v.push(R)}u(v),_.size===r.length&&!d&&(f(" !"),setTimeout(()=>t(j=>j+1),1500))},[n,r]);const g=v=>{if(d)return;const M=[...n];M[v].rot=(M[v].rot+1)%2,a(M)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[2,8,2],fov:50},children:[s.jsx("ambientLight",{intensity:.5}),s.jsxs("group",{position:[-2,0,-2],children:[n.map((v,M)=>s.jsx(U$,{pos:[v.x,v.y],rot:v.rot,onClick:()=>g(M)},M)),r.map((v,M)=>s.jsxs("mesh",{position:[v.x,0,v.y],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#ef4444",emissive:"#ef4444"})]},M)),l.map((v,M)=>s.jsx(P$,{path:v},M)),s.jsxs("mesh",{position:[2,0,5],children:[s.jsx("boxGeometry",{args:[.5,.5,.5]}),s.jsx("meshStandardMaterial",{color:"red"})]})]}),s.jsx(ht,{enabled:!1})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-red-500 text-xl font-bold text-red-700 shadow-xl animate-bounce",children:d})})]})})})},z$=({path:i,start:e,end:t,obstacles:n,onFaceClick:a})=>{const r=[];for(let o=0;o<3;o++)for(let l=0;l<3;l++)for(let u=0;u<3;u++)(o===0||o===2||l===0||l===2||u===0||u===2)&&r.push([o,l,u]);return s.jsx("group",{position:[-1,-1,-1],children:r.map((o,l)=>{const u=o[0]===e[0]&&o[1]===e[1]&&o[2]===e[2],d=o[0]===t[0]&&o[1]===t[1]&&o[2]===t[2],f=n.some(g=>g[0]===o[0]&&g[1]===o[1]&&g[2]===o[2]),m=i.some(g=>g[0]===o[0]&&g[1]===o[1]&&g[2]===o[2]);let x="#e0f2fe";return f&&(x="#475569"),m&&(x="#38bdf8"),u&&(x="#4ade80"),d&&(x="#f87171"),s.jsxs("mesh",{position:o,onClick:g=>{g.stopPropagation(),a(o)},children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:x})]},l)})})},G$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([1,2,1]),[l,u]=E.useState([1,0,1]),[d,f]=E.useState([]),[m,x]=E.useState(""),g=()=>{o([1,2,1]),u([1,0,1]),a([]);const M=[];for(let _=0;_<8;_++){const S=Math.floor(Math.random()*3),j=Math.floor(Math.random()*3),A=Math.floor(Math.random()*3);(S!==1||j!==2||A!==1)&&(S!==1||j!==0||A!==1)&&(S===0||S===2||j===0||j===2||A===0||A===2)&&M.push([S,j,A])}f(M),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{if(m||d.some(N=>N[0]===M[0]&&N[1]===M[1]&&N[2]===M[2]))return;const _=n.length>0?n[n.length-1]:r,S=Math.abs(M[0]-_[0]),j=Math.abs(M[1]-_[1]),A=Math.abs(M[2]-_[2]);S+j+A===1?(a([...n,M]),M[0]===l[0]&&M[1]===l[1]&&M[2]===l[2]&&(x(" !"),setTimeout(()=>t(N=>N+1),1500))):n.length>0&&M[0]===n[n.length-1][0]&&M[1]===n[n.length-1][1]&&a(n.slice(0,-1))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-sky-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,5,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),s.jsx(z$,{path:n,start:r,end:l,obstacles:d,onFaceClick:v}),s.jsx(ht,{})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-sky-500 text-xl font-bold text-sky-700 shadow-xl animate-bounce",children:m})})]})})})},iA=({blocks:i,ghost:e})=>s.jsxs("group",{children:[i.map((t,n)=>s.jsxs("mesh",{position:t,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:Ot[t[1]%Ot.length]}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},n)),e&&s.jsxs("mesh",{position:e,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"white",transparent:!0,opacity:.5})]})]}),I$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(null),[d,f]=E.useState(""),m={tower2:[[0,.5,0],[0,1.5,0]],tower3:[[0,.5,0],[0,1.5,0],[0,2.5,0]],line3:[[0,.5,0],[1,.5,0],[2,.5,0]],corner:[[0,.5,0],[1,.5,0],[0,.5,1]],L_shape:[[0,.5,0],[1,.5,0],[2,.5,0],[0,.5,1]],T_shape:[[0,.5,0],[1,.5,0],[2,.5,0],[1,.5,1]],stairs3:[[0,.5,0],[1,.5,0],[1,1.5,0],[2,.5,0],[2,1.5,0],[2,2.5,0]],bridge:[[0,.5,0],[2,.5,0],[0,1.5,0],[1,1.5,0],[2,1.5,0]],tower4:[[0,.5,0],[0,1.5,0],[0,2.5,0],[0,3.5,0]],square:[[0,.5,0],[1,.5,0],[0,.5,1],[1,.5,1]],pyramid:[[0,.5,0],[1,.5,0],[0,.5,1],[1,.5,1],[.5,1.5,.5]],chair:[[0,.5,0],[1,.5,0],[0,.5,1],[1,.5,1],[0,1.5,0],[0,2.5,0]],table:[[0,.5,0],[2,.5,0],[0,.5,2],[2,.5,2],[0,1.5,0],[1,1.5,0],[2,1.5,0],[0,1.5,1],[1,1.5,1],[2,1.5,1],[0,1.5,2],[1,1.5,2],[2,1.5,2]],cross3d:[[0,.5,0],[1,.5,0],[-1,.5,0],[0,.5,1],[0,.5,-1],[0,1.5,0]],snake:[[0,.5,0],[1,.5,0],[1,.5,1],[2,.5,1],[2,.5,2]],castle:[[0,.5,0],[2,.5,0],[0,.5,2],[2,.5,2],[0,1.5,0],[2,1.5,0],[0,1.5,2],[2,1.5,2],[0,2.5,0],[2,2.5,0],[0,2.5,2],[2,2.5,2]],spiral:[[0,.5,0],[1,.5,0],[1,.5,1],[0,.5,1],[0,1.5,1],[0,1.5,0],[1,1.5,0]],arch:[[0,.5,0],[0,1.5,0],[0,2.5,0],[1,2.5,0],[2,2.5,0],[2,1.5,0],[2,.5,0]],cube_hollow:[[0,.5,0],[1,.5,0],[2,.5,0],[0,.5,1],[2,.5,1],[0,.5,2],[1,.5,2],[2,.5,2],[0,1.5,0],[2,1.5,0],[0,1.5,2],[2,1.5,2],[0,2.5,0],[1,2.5,0],[2,2.5,0],[0,2.5,1],[2,2.5,1],[0,2.5,2],[1,2.5,2],[2,2.5,2]]},x=()=>{let S;if(e<=3){const j=["tower2","tower3","line3","corner"],A=j[Math.min(e-1,j.length-1)];S=[...m[A]]}else if(e<=7){const j=["L_shape","T_shape","stairs3","bridge","tower4","square"],A=j[(e-4)%j.length];S=[...m[A]]}else if(e<=12){const j=["pyramid","chair","cross3d","snake","table"],A=j[(e-8)%j.length];S=[...m[A]]}else{const j=["castle","spiral","arch","cube_hollow"];if(e<=16){const A=j[(e-13)%j.length];S=[...m[A]]}else{S=[[0,.5,0]];const A=8+Math.floor((e-16)*1.5);for(let C=0;C<A;C++){const N=S[Math.floor(Math.random()*S.length)],O=[[1,0,0],[-1,0,0],[0,1,0],[0,0,1],[0,0,-1]].map(U=>[N[0]+U[0],N[1]+U[1],N[2]+U[2]]).filter(U=>U[1]>=.5&&!S.some(z=>z[0]===U[0]&&z[1]===U[1]&&z[2]===U[2]));O.length>0&&S.push(O[Math.floor(Math.random()*O.length)])}}}if(e>2){const j=Math.floor(Math.random()*4);for(let A=0;A<j;A++)S=S.map(([C,N,R])=>[-R,N,C])}if(e>5){const j=Math.floor(Math.random()*3)-1,A=Math.floor(Math.random()*3)-1;S=S.map(([C,N,R])=>[C+j,N,R+A])}a(S),o([]),f("")};E.useEffect(()=>{x()},[e]);const g=S=>{if(S.stopPropagation(),!d&&(S.object.name==="plane"||S.object.geometry.type==="BoxGeometry")){const j=S.point.add(S.face.normal.multiplyScalar(.5));Math.round(j.x);const A=Math.round(j.y);if(Math.round(j.z),A>=0){const C=[Math.round(j.x),Math.round(j.y-.5)+.5,Math.round(j.z)];if(S.face.normal.y<0)return;r.some(N=>N[0]===C[0]&&N[1]===C[1]&&N[2]===C[2])||o([...r,C])}}},v=()=>o(r.slice(0,-1)),M=()=>{const S=new Set(n.map(C=>`${C[0]},${C[1]},${C[2]}`)),j=new Set(r.map(C=>`${C[0]},${C[1]},${C[2]}`));let A=S.size===j.size;S.forEach(C=>{j.has(C)||(A=!1)}),A?(f(" !"),setTimeout(()=>t(C=>C+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))},_=()=>e<=3?"":e<=7?"":e<=12?"":e<=16?"":"";return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${_()}] - ${n.length}`,children:s.jsxs("div",{className:"flex h-full bg-yellow-50",children:[s.jsxs("div",{className:"w-1/2 relative border-r-4 border-white",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-yellow-600 text-white px-2 py-1 rounded",children:""}),s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(iA,{blocks:n}),s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#ca8a04",cellColor:"#fde047"}),s.jsx(ht,{})]})]}),s.jsxs("div",{className:"w-1/2 relative",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-slate-600 text-white px-2 py-1 rounded",children:""}),s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},onPointerMissed:()=>{},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(iA,{blocks:r}),s.jsxs("mesh",{name:"plane",rotation:[-Math.PI/2,0,0],position:[0,-.01,0],onClick:g,children:[s.jsx("planeGeometry",{args:[20,20]}),s.jsx("meshBasicMaterial",{visible:!1})]}),s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#94a3b8",cellColor:"#cbd5e1"}),s.jsx(ht,{})]}),s.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4",children:[s.jsx("button",{onClick:v,className:"bg-white text-slate-500 px-4 py-2 rounded shadow font-bold",children:""}),s.jsx("button",{onClick:M,className:"bg-yellow-500 text-white px-6 py-2 rounded shadow font-bold",children:""})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-yellow-500 text-xl font-bold text-yellow-700 shadow-xl animate-bounce",children:d})})]})]})})},k$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(2),[l,u]=E.useState(2),[d,f]=E.useState("");return s.jsx(tt,{title:"",onBack:i,instruction:"... (Logic too complex for single file)",children:s.jsx("div",{className:"flex h-full items-center justify-center bg-lime-50",children:s.jsx("div",{className:"text-xl text-slate-500",children:"  "})})})},B$=({rotation:i})=>{const e=E.useRef(null);return Yt(()=>{e.current&&e.current.rotation.copy(i)}),s.jsx("group",{ref:e,children:s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#2dd4bf",transparent:!0,opacity:.8}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(2,2,2)]}),s.jsx("lineBasicMaterial",{color:"white"})]})]})})},F$=()=>s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[4,4]}),s.jsx("meshBasicMaterial",{color:"#f43f5e",transparent:!0,opacity:.3,side:Ms}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new Ta(4,4)]}),s.jsx("lineBasicMaterial",{color:"#f43f5e"})]})]}),V$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("rect"),[r,o]=E.useState(new is(0,0,0)),[l,u]=E.useState(""),[d,f]=E.useState(Math.PI/4),m=()=>e<=2?{shapes:["rect"],step:Math.PI/2,tolerance:.15}:e<=5?{shapes:["rect","hexagon"],step:Math.PI/4,tolerance:.1}:e<=9?{shapes:["rect","hexagon","diamond"],step:Math.PI/6,tolerance:.08}:{shapes:["rect","hexagon","diamond"],step:Math.PI/8,tolerance:.05},x=()=>{const j=m(),A=j.shapes,C=A[Math.floor(Math.random()*A.length)];if(a(C),f(j.step),e<=2)o(new is(0,0,0));else if(e<=5){const N=Math.floor(Math.random()*2)*Math.PI/2;o(new is(N,0,0))}else{const N=Math.floor(Math.random()*4)*Math.PI/4,R=Math.floor(Math.random()*4)*Math.PI/4;o(new is(N,R,0))}u("")};E.useEffect(()=>{x()},[e]);const g=()=>e<=2?"":e<=5?"":e<=9?"":"",v=()=>{switch(n){case"rect":return"";case"hexagon":return"";case"diamond":return""}},M=(j,A)=>{l||o(C=>new is(C.x+(j==="x"?A*d:0),C.y+(j==="y"?A*d:0),C.z+(j==="z"?A*d:0)))},_=()=>{const j=new Wn().setFromEuler(r);new Q(0,1,0).applyQuaternion(j.invert()),new Q(0,1,0).applyQuaternion(new Wn().setFromEuler(r));const N=[new Q(1,0,0),new Q(0,1,0),new Q(0,0,1)].map(I=>I.applyEuler(r)).map(I=>Math.abs(I.dot(new Q(0,1,0)))),R=Math.max(...N),U=m().tolerance;let z=!1;n==="rect"&&R>.9-U&&(z=!0),n==="hexagon"&&R>.55-U&&R<.6+U&&(z=!0),n==="diamond"&&R>.69-U&&R<.72+U&&(z=!0),z?(u(" !"),setTimeout(()=>t(I=>I+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},S=()=>Math.round(d*180/Math.PI);return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${g()}] - ${v()}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-teal-50",children:[s.jsxs("div",{className:"absolute top-16 right-4 z-10 bg-white/90 backdrop-blur p-3 rounded-xl shadow-lg border-2 border-teal-200",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1 text-center",children:""}),s.jsxs("div",{className:"text-2xl text-center",children:[n==="rect"&&"",n==="hexagon"&&"",n==="diamond"&&""]}),s.jsx("div",{className:"text-sm font-bold text-teal-700 text-center",children:v()})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[4,4,4],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(B$,{rotation:r}),s.jsx(F$,{}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-500 text-xl font-bold text-teal-700 shadow-xl animate-bounce",children:l})})]}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-xl",children:[s.jsxs("div",{className:"text-xs text-slate-400 text-center mb-2",children:[" ",S(),""]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-red-500 font-bold",children:"X"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>M("x",-1),className:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg font-bold text-lg active:bg-red-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>M("x",1),className:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg font-bold text-lg active:bg-red-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-green-500 font-bold",children:"Y"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>M("y",-1),className:"flex-1 py-3 bg-green-100 text-green-600 rounded-lg font-bold text-lg active:bg-green-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>M("y",1),className:"flex-1 py-3 bg-green-100 text-green-600 rounded-lg font-bold text-lg active:bg-green-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-blue-500 font-bold",children:"Z"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>M("z",-1),className:"flex-1 py-3 bg-blue-100 text-blue-600 rounded-lg font-bold text-lg active:bg-blue-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>M("z",1),className:"flex-1 py-3 bg-blue-100 text-blue-600 rounded-lg font-bold text-lg active:bg-blue-200 active:scale-95",children:""})]})]})]}),s.jsx("button",{onClick:_,className:"w-full py-4 bg-teal-500 text-white rounded-xl font-bold text-lg shadow-lg border-b-4 border-teal-700 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]})})},Tv=({radius:i,speed:e,x:t,color:n})=>{const a=Uo.useRef(null);Yt(()=>{a.current&&(a.current.rotation.z+=e)});const r=Math.round(i*12);return s.jsxs("group",{ref:a,position:[t,0,0],children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[i,i,.2,32]}),s.jsx("meshStandardMaterial",{color:n})]}),Array.from({length:r}).map((o,l)=>s.jsxs("mesh",{position:[Math.cos(l/r*Math.PI*2)*i,Math.sin(l/r*Math.PI*2)*i,0],rotation:[0,0,l/r*Math.PI*2],children:[s.jsx("boxGeometry",{args:[.15,.15,.2]}),s.jsx("meshStandardMaterial",{color:n})]},l))]})},H$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("small"),[r,o]=E.useState("fast"),[l,u]=E.useState("");E.useEffect(()=>{o(Math.random()>.5?"fast":"slow"),u("")},[e]);const d=1,f=1,m=.5,x=1.5,g=.02,v=n==="small"?m:x,M=n==="small"?x:m,_=-g*(d/v),S=-_*(M/f),j=()=>{const A=Math.abs(S)>g;r==="fast"&&A||r==="slow"&&!A?(u(" !"),setTimeout(()=>t(C=>C+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:`${r==="fast"?"":""}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-orange-50",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(Tv,{x:-2.5,radius:d,speed:g,color:"#22c55e"}),s.jsxs("group",{position:[0,0,0],children:[s.jsx(Tv,{x:0,radius:v,speed:_,color:"#f59e0b"}),s.jsx("group",{position:[0,0,.3],children:s.jsx(Tv,{x:0,radius:M,speed:_,color:"#fcd34d"})})]}),s.jsx("group",{position:[2.5,0,.3],children:s.jsx(Tv,{x:0,radius:f,speed:S,color:"#ef4444"})})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-orange-500 text-xl font-bold text-orange-700 shadow-xl animate-bounce",children:l})})]}),s.jsxs("div",{className:"bg-white p-4 flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>a("small"),className:`px-4 py-2 rounded font-bold ${n==="small"?"bg-orange-500 text-white":"bg-slate-200"}`,children:""}),s.jsx("button",{onClick:()=>a("large"),className:`px-4 py-2 rounded font-bold ${n==="large"?"bg-orange-500 text-white":"bg-slate-200"}`,children:""}),s.jsx("button",{onClick:j,className:"px-6 py-2 bg-green-500 text-white rounded font-bold shadow active:scale-95",children:""})]})]})})},q$=({x:i,y:e,type:t,onClick:n})=>s.jsxs("group",{position:[i,e,0],onClick:a=>{a.stopPropagation(),n()},children:[s.jsxs("mesh",{children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshBasicMaterial",{color:"#334155"})]}),t==="slash"&&s.jsxs("mesh",{rotation:[0,0,Math.PI/4],children:[s.jsx("boxGeometry",{args:[.1,1.2,.5]}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]}),t==="backslash"&&s.jsxs("mesh",{rotation:[0,0,-Math.PI/4],children:[s.jsx("boxGeometry",{args:[.1,1.2,.5]}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]})]}),X$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([2,5]),[l,u]=E.useState(0),[d,f]=E.useState(""),[m,x]=E.useState(!1),g=6,v=5,M=()=>{const S=Array(g).fill(null).map(()=>Array(v).fill("empty"));a(S),o([2,5.5]),u(Math.floor(Math.random()*v)),x(!1),f("")};E.useEffect(()=>{M()},[e]),E.useEffect(()=>{if(!m)return;const S=setInterval(()=>{o(([j,A])=>{const C=Math.round(j),N=Math.round(A);if(N<0)return x(!1),C===l?(f(" !"),setTimeout(()=>t(U=>U+1),1500)):(f(" "),setTimeout(()=>{o([2,5.5]),f("")},1e3)),[j,A];let R=0,O=-.1;if(N<g&&C>=0&&C<v){const U=n[N][C];U==="slash"?R=-.1:U==="backslash"&&(R=.1)}return[j+R,A+O]})},30);return()=>clearInterval(S)},[m,n,l]);const _=(S,j)=>{if(m)return;const A=n.map(R=>[...R]),C=["empty","slash","backslash"],N=C.indexOf(A[j][S]);A[j][S]=C[(N+1)%3],a(A)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-slate-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[2,2.5,8]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[5,5,5],intensity:1}),n.map((S,j)=>S.map((A,C)=>s.jsx(q$,{x:C,y:j,type:A,onClick:()=>_(C,j)},`${C}-${j}`))),s.jsxs("mesh",{position:[r[0],r[1],0],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#38bdf8"})]}),s.jsxs("mesh",{position:[l,-1,0],children:[s.jsx("boxGeometry",{args:[.8,.5,.5]}),s.jsx("meshStandardMaterial",{color:"#4ade80"})]})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-slate-500 text-xl font-bold text-slate-700 shadow-xl animate-bounce",children:d})}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:()=>x(!0),className:"bg-green-500 text-white px-8 py-3 rounded-full font-bold shadow-lg active:scale-95",children:""})})]})})})},aA=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[2,.5,2],children:[s.jsx("boxGeometry",{}),s.jsx("meshStandardMaterial",{color:"#f87171"})]}),s.jsxs("mesh",{position:[-2,.5,2],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{position:[0,.5,-2],children:[s.jsx("coneGeometry",{args:[.5,1]}),s.jsx("meshStandardMaterial",{color:"#facc15"})]}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[10,10]}),s.jsx("meshStandardMaterial",{color:"#e2e8f0"})]}),s.jsx("gridHelper",{args:[10,10]})]}),W$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0]),[r,o]=E.useState(0),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState(""),g=()=>{const _=Math.random()*Math.PI*2,S=Math.sin(_)*4,j=Math.cos(_)*4;a([S,.5,j]),o(Math.atan2(S,j)+Math.PI);const A=Math.atan2(S,j)+Math.PI,C=[A,A+Math.PI/2,A+Math.PI].sort(()=>.5-Math.random());u(C),f(C.indexOf(A)),x("")};E.useEffect(()=>{g()},[e]);const v=M=>{M===d?(x(" !"),setTimeout(()=>t(_=>_+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-blue-50",children:[s.jsxs("div",{className:"w-1/3 bg-white border-r-4 border-blue-200 relative",children:[s.jsxs(Ue,{camera:{position:[0,10,0]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(aA,{}),s.jsxs("mesh",{position:[n[0],1,n[2]],rotation:[0,r,0],children:[s.jsx("coneGeometry",{args:[.3,.8,4]}),s.jsx("meshBasicMaterial",{color:"red"})]})]}),s.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded",children:""})]}),s.jsx("div",{className:"flex-1 flex flex-col p-4 gap-4 overflow-y-auto",children:l.map((M,_)=>s.jsx("div",{className:"flex-1 bg-white border-4 border-white shadow-lg rounded-xl overflow-hidden cursor-pointer hover:border-blue-400",onClick:()=>v(_),children:s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:new Q(...n),rotation:[0,M,0],fov:60}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(aA,{})]})},_))}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-500 text-xl font-bold text-blue-700 shadow-xl animate-bounce",children:m})})]})})},Y$=({leftContent:i,rightContent:e,angle:t})=>s.jsxs("group",{rotation:[0,0,t],children:[s.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.1,.1,6]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("group",{position:[-3,-1,0],children:[s.jsxs("mesh",{position:[0,.2,0],children:[s.jsx("cylinderGeometry",{args:[1,.8,.2]}),s.jsx("meshStandardMaterial",{color:"#cbd5e1"})]}),s.jsx("group",{position:[0,.5,0],children:i})]}),s.jsxs("group",{position:[3,-1,0],children:[s.jsxs("mesh",{position:[0,.2,0],children:[s.jsx("cylinderGeometry",{args:[1,.8,.2]}),s.jsx("meshStandardMaterial",{color:"#cbd5e1"})]}),s.jsx("group",{position:[0,.5,0],children:e})]})]}),Z$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),[l,u]=E.useState(0),d=4;E.useEffect(()=>{a([]),o("")},[e]),E.useEffect(()=>{const g=n.reduce((_,S)=>_+(S==="cube"?2:1),0);let v=0;g<d?v=.2:g>d?v=-.2:v=0;const M=setInterval(()=>u(_=>_+(v-_)*.1),16);return()=>clearInterval(M)},[n]);const f=g=>{if(r)return;const v=[...n,g];a(v),v.reduce((_,S)=>_+(S==="cube"?2:1),0)===d&&(o(" !"),setTimeout(()=>t(_=>_+1),1500))},m=()=>a([]),x=g=>s.jsx("group",{children:g.map((v,M)=>s.jsxs("mesh",{position:[0,M*.6,0],children:[v==="cube"?s.jsx("boxGeometry",{args:[.5,.5,.5]}):s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:v==="cube"?"#f43f5e":"#3b82f6"})]},M))});return s.jsx(tt,{title:"",onBack:i,instruction:"1 = 2",children:s.jsxs("div",{className:"flex flex-col h-full bg-emerald-50",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,2,8]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(Y$,{angle:l,leftContent:x(["cube","cube"]),rightContent:x(n)})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-emerald-500 text-xl font-bold text-emerald-700 shadow-xl animate-bounce",children:r})})]}),s.jsxs("div",{className:"bg-white p-4 flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>f("cube"),className:"p-4 bg-red-100 rounded-xl border border-red-300",children:" +"}),s.jsx("button",{onClick:()=>f("sphere"),className:"p-4 bg-blue-100 rounded-xl border border-blue-300",children:" +"}),s.jsx("button",{onClick:m,className:"p-4 bg-slate-200 rounded-xl",children:""})]})]})})},kp=({index:i,pos:e,rot:t,isFolded:n,onClick:a,label:r})=>{const o=E.useRef(null);return Yt(()=>{if(o.current){let l=0;n?l=Math.PI/2:l=0,i===1&&(o.current.rotation.x=ks.lerp(o.current.rotation.x,l,.1)),i===2&&(o.current.rotation.x=ks.lerp(o.current.rotation.x,-l,.1)),i===3&&(o.current.rotation.y=ks.lerp(o.current.rotation.y,-l,.1)),i===4&&(o.current.rotation.y=ks.lerp(o.current.rotation.y,l,.1))}}),i===0?s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("planeGeometry",{args:[.95,.95]}),s.jsx("meshStandardMaterial",{color:"#fcd34d",side:Ms}),s.jsx(xs,{position:[0,0,.1],fontSize:.5,color:"black",children:"Base"})]}):s.jsx("group",{ref:o,position:e,children:s.jsxs("mesh",{position:[i===3?-.5:i===4?.5:0,i===1?.5:i===2?-.5:0,0],onClick:l=>{l.stopPropagation(),a()},children:[s.jsx("planeGeometry",{args:[.95,.95]}),s.jsx("meshStandardMaterial",{color:n?"#fbbf24":"#a78bfa",side:Ms}),s.jsx(xs,{position:[0,0,.1],fontSize:.4,color:"white",children:r})]})})},K$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([!1,!1,!1,!1,!1]),[r,o]=E.useState(""),[l,u]=E.useState([]),[d,f]=E.useState(0),[m,x]=E.useState([1,2,3,4]),g=()=>e<=2?{faceCount:2,requireOrder:!1}:e<=5?{faceCount:3,requireOrder:!1}:e<=9?{faceCount:4,requireOrder:!0}:{faceCount:4,requireOrder:!0},v=[[1,2,3,4],[3,4,1,2],[1,3,2,4],[4,2,3,1],[2,4,1,3]],M=()=>{const N=g(),U=[...[1,2,3,4]].sort(()=>Math.random()-.5).slice(0,N.faceCount);if(x(U),N.requireOrder){const I=v[Math.floor(Math.random()*v.length)].filter(V=>U.includes(V));u(I)}else u([]);a([!1,!1,!1,!1,!1]),f(0),o("")};E.useEffect(()=>{M()},[e]);const _=()=>e<=2?"":e<=5?"":e<=9?"":"",S=N=>{if(N===0||r||!m.includes(N))return;if(l.length>0){const U=l[d];if(N!==U){o(" "),setTimeout(()=>{o(""),a([!1,!1,!1,!1,!1]),f(0)},1e3);return}}const R=[...n];R[N]=!R[N],a(R),R[N]&&f(U=>U+1),m.every(U=>R[U])&&(o(" !"),setTimeout(()=>t(U=>U+1),1500))},j=()=>{if(l.length===0||d>=l.length)return null;const N=l[d];return["","","","",""][N]},A=["","","","",""],C=m.filter(N=>n[N]).length;return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${_()}] - ${m.length}${l.length>0?"":""}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-violet-50",children:[s.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-white border-b border-violet-200",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-slate-500",children:": "}),s.jsxs("span",{className:"font-bold text-violet-600",children:[C," / ",m.length]})]}),l.length>0&&j()&&s.jsxs("div",{className:"text-sm bg-violet-100 px-3 py-1 rounded-full",children:[s.jsx("span",{className:"text-slate-500",children:": "}),s.jsxs("span",{className:"font-bold text-violet-600",children:["",j(),""]})]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsxs(V0,{children:[s.jsx(kp,{index:0,pos:[0,0,0],rot:[0,0,0],isFolded:!1,onClick:()=>{},label:""}),m.includes(1)&&s.jsx(kp,{index:1,pos:[0,.5,0],rot:[0,0,0],isFolded:n[1],onClick:()=>S(1),label:""}),m.includes(2)&&s.jsx(kp,{index:2,pos:[0,-.5,0],rot:[0,0,0],isFolded:n[2],onClick:()=>S(2),label:""}),m.includes(3)&&s.jsx(kp,{index:3,pos:[-.5,0,0],rot:[0,0,0],isFolded:n[3],onClick:()=>S(3),label:""}),m.includes(4)&&s.jsx(kp,{index:4,pos:[.5,0,0],rot:[0,0,0],isFolded:n[4],onClick:()=>S(4),label:""})]}),s.jsx(ht,{minPolarAngle:0,maxPolarAngle:Math.PI})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce bg-white ${r.includes("")?"border-red-500 text-red-600":"border-violet-500 text-violet-700"}`,children:r})})]}),s.jsxs("div",{className:"bg-white p-4 border-t-2 border-violet-200",children:[s.jsx("div",{className:"text-center text-sm text-slate-500 mb-2",children:l.length>0?`: ${l.map(N=>A[N]).join("  ")}`:""}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(N=>s.jsx("button",{onClick:()=>S(N),disabled:!m.includes(N)||n[N],className:`py-3 rounded-xl font-bold transition-all ${m.includes(N)?n[N]?"bg-green-100 text-green-600 border-2 border-green-400":l.length>0&&l[d]===N?"bg-violet-500 text-white animate-pulse":"bg-violet-100 text-violet-600 active:bg-violet-200 active:scale-95":"bg-slate-100 text-slate-300"}`,children:n[N]?"":A[N]},N))})]})]})})},J$=({x:i,z:e,carrying:t})=>{const n=E.useRef(null);return Yt(()=>{n.current&&(n.current.position.x=ks.lerp(n.current.position.x,i,.1),n.current.position.z=ks.lerp(n.current.position.z,e,.1))}),s.jsxs("group",{ref:n,position:[0,4,0],children:[s.jsxs("mesh",{position:[0,-1.5,0],children:[s.jsx("cylinderGeometry",{args:[.05,.05,3]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),s.jsxs("mesh",{position:[0,-3,0],children:[s.jsx("boxGeometry",{args:[.5,.2,.5]}),s.jsx("meshStandardMaterial",{color:"#fbbf24"})]}),s.jsxs("mesh",{position:[0,-3.95,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.3]}),s.jsx("meshBasicMaterial",{color:"black",opacity:.3,transparent:!0})]}),t&&s.jsxs("mesh",{position:[0,-3.5,0],children:[s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]})]})},Q$=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0]),[r,o]=E.useState([-2,-2]),[l,u]=E.useState([2,2]),[d,f]=E.useState(!1),[m,x]=E.useState(""),[g,v]=E.useState([]),M=()=>e<=2?{distance:2,obstacleCount:0}:e<=5?{distance:3,obstacleCount:1}:e<=9?{distance:4,obstacleCount:2}:{distance:4,obstacleCount:3},_=()=>{const C=M(),N=Math.floor(Math.random()*3)-1,R=Math.floor(Math.random()*3)-1;a([N,R]);let O,U;do O=Math.floor(Math.random()*7)-3,U=Math.floor(Math.random()*7)-3;while(O===N&&U===R);o([O,U]);let z,I;do z=Math.floor(Math.random()*7)-3,I=Math.floor(Math.random()*7)-3;while(z===O&&I===U||Math.abs(z-O)+Math.abs(I-U)<C.distance);u([z,I]);const V=[];for(let F=0;F<C.obstacleCount;F++){let q,W;do q=Math.floor(Math.random()*7)-3,W=Math.floor(Math.random()*7)-3;while(q===O&&W===U||q===z&&W===I||q===N&&W===R||V.some(ie=>ie[0]===q&&ie[1]===W));V.push([q,W])}v(V),f(!1),x("")};E.useEffect(()=>{_()},[e]);const S=()=>e<=2?"":e<=5?"":e<=9?"":"",j=(C,N)=>{m||a(R=>[Math.max(-3,Math.min(3,R[0]+C)),Math.max(-3,Math.min(3,R[1]+N))])},A=()=>{if(m)return;const[C,N]=n;d?C===l[0]&&N===l[1]?(f(!1),x(" !"),setTimeout(()=>t(R=>R+1),1500)):(f(!1),o([C,N])):C===r[0]&&N===r[1]&&f(!0)};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${S()}] - `,children:s.jsxs("div",{className:"flex flex-col h-full bg-amber-50",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,8,6],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("gridHelper",{args:[8,8,0,13421772],position:[0,.01,0]}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[8,8]}),s.jsx("meshStandardMaterial",{color:"#fffbeb"})]}),s.jsxs("mesh",{position:[l[0],.02,l[1]],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx("meshBasicMaterial",{color:"#4ade80",opacity:.5,transparent:!0}),s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-2xl",children:""})})]}),g.map((C,N)=>s.jsxs("mesh",{position:[C[0],.3,C[1]],children:[s.jsx("boxGeometry",{args:[.9,.6,.9]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]},N)),!d&&s.jsxs("mesh",{position:[r[0],.4,r[1]],children:[s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsx(J$,{x:n[0],z:n[1],carrying:d}),s.jsx(ht,{enabled:!1})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`bg-white px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce ${m.includes("")?"border-green-500 text-green-700":"border-amber-500 text-amber-700"}`,children:m})})]}),s.jsxs("div",{className:"bg-white shadow-xl p-4 border-t-2 border-amber-200",children:[s.jsx("div",{className:"flex items-center justify-center gap-8",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("div",{}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-lg active:bg-amber-300 shadow",onClick:()=>j(0,-1),children:s.jsx(q0,{})}),s.jsx("div",{}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-lg active:bg-amber-300 shadow",onClick:()=>j(-1,0),children:s.jsx(ud,{})}),s.jsx("button",{className:"p-4 bg-amber-500 text-white rounded-lg active:bg-amber-600 shadow font-bold text-lg",onClick:A,children:d?"":""}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-lg active:bg-amber-300 shadow",onClick:()=>j(1,0),children:s.jsx(kx,{})}),s.jsx("div",{}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-lg active:bg-amber-300 shadow",onClick:()=>j(0,1),children:s.jsx(tu,{})}),s.jsx("div",{})]})}),s.jsx("div",{className:"mt-3 text-center text-sm text-amber-600",children:d?' ""':' ""'})]})]})})},$$=({targetRot:i})=>{const e=[[0,.5],[.3,.8],[.6,.8],[.8,.5],[0,-.8],[-.8,.5],[-.6,.8],[-.3,.8]];return s.jsxs("group",{children:[e.map((t,n)=>s.jsxs("mesh",{position:[t[0],t[1],(Math.random()-.5)*2],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#6366f1"})]},n)),Array.from({length:5}).map((t,n)=>s.jsxs("mesh",{position:[(Math.random()-.5)*3,(Math.random()-.5)*3,(Math.random()-.5)*3],children:[s.jsx("boxGeometry",{args:[.1,.1,.1]}),s.jsx("meshStandardMaterial",{color:"#818cf8"})]},`n-${n}`))]})},eee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(""),r=E.useRef(null),o=()=>{a(""),r.current&&(r.current.reset(),r.current.object.rotation.y=Math.random()*Math.PI,r.current.object.rotation.x=Math.random()*Math.PI)};E.useEffect(()=>{o()},[e]);const l=()=>(Yt(({camera:u})=>{if(n)return;new Q(0,0,-1).applyQuaternion(u.quaternion).dot(new Q(0,0,-1))>.95&&(a(" !"),setTimeout(()=>t(m=>m+1),1500))}),null);return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-indigo-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[3,3,5]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx($$,{targetRot:new is(0,0,0)}),s.jsx(ht,{ref:r}),s.jsx(l,{})]}),n&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:n})})]})})})},rA=[{id:0,color:"bg-red-500",shape:"rounded-full"},{id:1,color:"bg-blue-500",shape:"rounded-none"},{id:2,color:"bg-yellow-400",shape:"clip-triangle"}],tee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([0,1,2]),[l,u]=E.useState(""),d=()=>{a([0,1,2].sort(()=>.5-Math.random())),o([0,1,2]),u("")};E.useEffect(()=>{d()},[e]);const f=(g,v)=>{if(l)return;const M=[...r],_=M.indexOf(g),S=_+v;if(S>=0&&S<3){const j=M[S];M[S]=M[_],M[_]=j,o(M)}},m=()=>{JSON.stringify(r)===JSON.stringify(n)?(u(" !"),setTimeout(()=>t(g=>g+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},x=g=>s.jsx("div",{className:"relative w-32 h-32 bg-white border shadow-md",children:g.map((v,M)=>{const _=rA[v];return s.jsx("div",{className:`absolute inset-0 m-4 opacity-80 ${_.color} ${_.shape==="clip-triangle"?"":_.shape}`,style:{zIndex:M,clipPath:_.shape==="clip-triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":void 0}},v)})});return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-rose-50 items-center p-8 gap-8",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"font-bold text-rose-500",children:""}),x(n)]}),s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"font-bold text-slate-500",children:""}),x(r)]}),s.jsx("div",{className:"w-full max-w-sm flex flex-col gap-2",children:r.map((g,v)=>{const M=rA[g];return s.jsxs("div",{className:"bg-white p-2 rounded shadow flex items-center justify-between",children:[s.jsx("div",{className:`w-8 h-8 ${M.color} ${M.shape==="clip-triangle"?"":"rounded-sm"}`,style:{clipPath:M.shape==="clip-triangle"?"polygon(50% 0%, 0% 100%, 100% 100%)":void 0}}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>f(g,-1),disabled:v===0,className:"px-2 bg-slate-100 rounded disabled:opacity-30",children:""}),s.jsx("button",{onClick:()=>f(g,1),disabled:v===2,className:"px-2 bg-slate-100 rounded disabled:opacity-30",children:""})]})]},g)})}),s.jsx("button",{onClick:m,className:"bg-rose-500 text-white px-8 py-3 rounded-full font-bold shadow-lg active:scale-95",children:""}),l&&s.jsx("div",{className:"fixed top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-500 text-xl font-bold text-rose-700 shadow-xl animate-bounce",children:l})})]})})},Av=({axis:i,pos:e,speed:t,color:n})=>{const a=Uo.useRef(null);Yt(()=>{a.current&&(i==="z"&&(a.current.rotation.z+=t),i==="x"&&(a.current.rotation.x+=t))});const r=i==="z"?[Math.PI/2,0,0]:[0,0,Math.PI/2];return s.jsxs("group",{position:e,ref:a,children:[s.jsxs("mesh",{rotation:r,children:[s.jsx("cylinderGeometry",{args:[.5,.2,.3,16]}),s.jsx("meshStandardMaterial",{color:n})]}),s.jsxs("mesh",{rotation:r,children:[s.jsx("cylinderGeometry",{args:[.55,.55,.1,8]}),s.jsx("meshStandardMaterial",{color:n,wireframe:!0})]})]})},nee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(!1),[r,o]=E.useState(""),l=()=>{a(!1),o("")};E.useEffect(()=>{l()},[e]);const u=()=>{n?(o(" !"),setTimeout(()=>t(d=>d+1),1500)):(o(" "),setTimeout(()=>o(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-teal-50",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[3,3,3]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsxs("mesh",{position:[0,0,-.1],rotation:[0,0,0],children:[s.jsx("planeGeometry",{args:[4,4]}),s.jsx("meshStandardMaterial",{color:"#ccfbf1",side:Ms})]}),s.jsxs("mesh",{position:[-.1,0,0],rotation:[0,Math.PI/2,0],children:[s.jsx("planeGeometry",{args:[4,4]}),s.jsx("meshStandardMaterial",{color:"#99f6e4",side:Ms})]}),s.jsx(Av,{axis:"z",pos:[1.5,0,.1],speed:.05,color:"#22c55e"}),s.jsx(Av,{axis:"x",pos:[-.1,0,1.5],speed:n?.05:0,color:"#ef4444"}),s.jsxs("group",{position:[0,0,0],onClick:()=>a(!n),children:[!n&&s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshBasicMaterial",{color:"yellow",transparent:!0,opacity:.5})]}),n&&s.jsxs("group",{children:[s.jsx(Av,{axis:"z",pos:[0,0,.15],speed:.05,color:"#f59e0b"}),s.jsx(Av,{axis:"x",pos:[-.15,0,0],speed:.05,color:"#f59e0b"})]})]}),s.jsx(ht,{})]})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:u,className:"bg-teal-600 text-white px-8 py-3 rounded-full font-bold shadow-lg active:scale-95",children:""})}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-500 text-xl font-bold text-teal-700 shadow-xl animate-bounce",children:r})})]})})},oA=({voxels:i,color:e})=>s.jsx("group",{children:i.map((t,n)=>s.jsxs("mesh",{position:t,children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:e}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},n))}),see=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d={tower2:[[0,.5,0],[0,1.5,0]],line2:[[0,.5,0],[1,.5,0]],L3:[[0,.5,0],[1,.5,0],[0,.5,1]],tower3:[[0,.5,0],[0,1.5,0],[0,2.5,0]],step:[[0,.5,0],[1,.5,0],[1,1.5,0]],L4:[[0,.5,0],[1,.5,0],[2,.5,0],[0,.5,1]],T4:[[0,.5,0],[1,.5,0],[2,.5,0],[1,.5,1]],stairs3:[[0,.5,0],[1,.5,0],[1,1.5,0],[2,.5,0],[2,1.5,0],[2,2.5,0]],bridge:[[0,.5,0],[2,.5,0],[0,1.5,0],[1,1.5,0],[2,1.5,0]],chair:[[0,.5,0],[1,.5,0],[0,.5,1],[1,.5,1],[0,1.5,0],[0,2.5,0]],arch:[[0,.5,0],[0,1.5,0],[0,2.5,0],[1,2.5,0],[2,2.5,0],[2,1.5,0],[2,.5,0]],cross:[[1,.5,0],[0,.5,1],[1,.5,1],[2,.5,1],[1,.5,2],[1,1.5,1]],snake:[[0,.5,0],[1,.5,0],[1,.5,1],[2,.5,1],[2,.5,2],[3,.5,2]],castle:[[0,.5,0],[2,.5,0],[0,.5,2],[2,.5,2],[0,1.5,0],[2,1.5,0],[0,1.5,2],[2,1.5,2],[0,2.5,0],[2,2.5,0],[0,2.5,2],[2,2.5,2]],spiral:[[0,.5,0],[1,.5,0],[1,.5,1],[0,.5,1],[0,1.5,1],[0,1.5,0],[1,1.5,0],[1,1.5,1],[1,2.5,1]],tower_complex:[[0,.5,0],[1,.5,0],[0,.5,1],[1,.5,1],[0,1.5,0],[1,1.5,0],[0,1.5,1],[1,1.5,1],[.5,2.5,.5]]},f=()=>{let v;if(e<=2){const M=["tower2","line2"];v=[...d[M[(e-1)%M.length]]]}else if(e<=5){const M=["L3","tower3","step"];v=[...d[M[(e-3)%M.length]]]}else if(e<=9){const M=["L4","T4","stairs3","bridge"];v=[...d[M[(e-6)%M.length]]]}else if(e<=13){const M=["chair","arch","cross","snake"];v=[...d[M[(e-10)%M.length]]]}else if(e<=17){const M=["castle","spiral","tower_complex"];v=[...d[M[(e-14)%M.length]]]}else{v=[[0,.5,0]];const M=10+Math.floor((e-17)*1.5),_=new Set(["0,0.5,0"]);for(;v.length<M;){const S=v[Math.floor(Math.random()*v.length)],A=[[1,0,0],[-1,0,0],[0,1,0],[0,0,1],[0,0,-1]].map(C=>[S[0]+C[0],S[1]+C[1],S[2]+C[2]]).filter(C=>C[1]>=.5&&!_.has(`${C[0]},${C[1]},${C[2]}`));if(A.length>0){const C=A[Math.floor(Math.random()*A.length)];v.push(C),_.add(`${C[0]},${C[1]},${C[2]}`)}}}if(e>=4){const M=Math.floor(Math.random()*4);for(let _=0;_<M;_++)v=v.map(([S,j,A])=>[-A,j,S])}e>=7&&Math.random()>.5&&(v=v.map(([M,_,S])=>[-M,_,S])),a(v),o([]),u("")},m=()=>e<=2?"":e<=5?"":e<=9?"":e<=13?"":"";E.useEffect(()=>{f()},[e]);const x=v=>{if(v.stopPropagation(),l)return;let M=null;if(v.object.name==="plane"){const _=Math.round(v.point.x),S=Math.round(v.point.z);M=[_,.5,S]}else{const _=v.point.add(v.face.normal.multiplyScalar(.5));M=[Math.round(_.x),Math.round(_.y),Math.round(_.z)]}if(M&&M[1]>=.5){const _=r.findIndex(S=>S[0]===M[0]&&S[1]===M[1]&&S[2]===M[2]);if(_!==-1){const S=[...r];S.splice(_,1),o(S)}else o([...r,M])}},g=()=>{const v=new Set(n.map(S=>`${S[0]},${S[1]},${S[2]}`)),M=new Set(r.map(S=>`${S[0]},${S[1]},${S[2]}`));let _=v.size===M.size;v.forEach(S=>{M.has(S)||(_=!1)}),_?(u(" !"),setTimeout(()=>t(S=>S+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${m()}] - ${n.length}`,children:s.jsxs("div",{className:"flex h-full bg-blue-50",children:[s.jsxs("div",{className:"w-1/2 relative border-r-4 border-white",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white px-2 py-1 rounded shadow",children:""}),s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(oA,{voxels:n,color:Ot[3]}),s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#60a5fa",cellColor:"#bfdbfe",position:[0,0,0]}),s.jsx(ht,{autoRotate:!0})]})]}),s.jsxs("div",{className:"w-1/2 relative",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-slate-600 text-white px-2 py-1 rounded shadow",children:" (/)"}),s.jsxs(Ue,{camera:{position:[5,5,5],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(oA,{voxels:r,color:Ot[3]}),s.jsxs("mesh",{name:"plane",rotation:[-Math.PI/2,0,0],position:[0,0,0],onClick:x,onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("planeGeometry",{args:[20,20]}),s.jsx("meshBasicMaterial",{visible:!1})]}),s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#94a3b8",cellColor:"#cbd5e1",position:[0,0,0]}),s.jsx(ht,{})]}),s.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>o([]),className:"bg-white text-slate-500 px-4 py-2 rounded shadow font-bold",children:""}),s.jsx("button",{onClick:g,className:"bg-blue-500 text-white px-6 py-2 rounded shadow font-bold",children:""})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-500 text-xl font-bold text-blue-700 shadow-xl animate-bounce",children:l})})]})]})})},iee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=()=>{const d=[],f=5+Math.floor(Math.random()*3),m=new Set;for(let g=0;g<f;g++){const v=Math.floor(Math.random()*3)+1,M=Math.floor(Math.random()*3),_=Math.floor(Math.random()*3)-1;m.has(`${v},${M},${_}`)||(d.push([v,M+.5,_]),d.push([-v,M+.5,_]),m.add(`${v},${M},${_}`))}d.push([0,.5,0]),d.push([0,1.5,0]);const x=1+Math.floor(Math.random()*2);for(let g=0;g<x;g++){let v,M,_;do v=Math.floor(Math.random()*7)-3,M=Math.floor(Math.random()*3),_=Math.floor(Math.random()*3)-1;while(d.some(S=>S[0]===v&&S[1]===M+.5&&S[2]===_));d.some(S=>S[0]===-v&&S[1]===M+.5&&S[2]===_)||d.push([v,M+.5,_])}a(d),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{if(r)return;const f=n.filter(g=>!(g[0]===d[0]&&g[1]===d[1]&&g[2]===d[2]));a(f);const m=new Set(f.map(g=>`${g[0]},${g[1]},${g[2]}`));let x=!0;for(const g of f){const v=`${-g[0]},${g[1]},${g[2]}`;if(!m.has(v)){x=!1;break}}x&&f.length>0&&(o(" !"),setTimeout(()=>t(g=>g+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-purple-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,5,10],fov:45},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsxs("mesh",{position:[0,1.5,0],children:[s.jsx("boxGeometry",{args:[.05,4,4]}),s.jsx("meshBasicMaterial",{color:"#d8b4fe",transparent:!0,opacity:.2})]}),n.map((d,f)=>s.jsxs("mesh",{position:d,onClick:m=>{m.stopPropagation(),u(d)},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="auto",children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#a855f7"}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.3})]})]},f)),s.jsx(Gi,{infiniteGrid:!0,sectionColor:"#c084fc",cellColor:"#e9d5ff"}),s.jsx(ht,{})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-purple-500 text-xl font-bold text-purple-700 shadow-xl animate-bounce",children:r})})]})})})},aee=({data:i,onClick:e})=>{const t=i.connected?"#06b6d4":"#cbd5e1";return s.jsxs("group",{position:i.pos,onClick:n=>{e&&(n.stopPropagation(),e())},children:[s.jsxs("mesh",{children:[s.jsx("sphereGeometry",{args:[.25]}),s.jsx("meshStandardMaterial",{color:t})]}),i.dirs.map((n,a)=>{const r=new Q(...n),o=new Wn().setFromUnitVectors(new Q(0,1,0),r);return s.jsxs("mesh",{position:r.multiplyScalar(.25),quaternion:o,children:[s.jsx("cylinderGeometry",{args:[.15,.15,.5]}),s.jsx("meshStandardMaterial",{color:t})]},a)})]})},ree=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState(""),l=3,u=()=>{const f=[];for(let m=0;m<l;m++){const x=[];for(let g=0;g<l;g++){const v=[];for(let M=0;M<l;M++){const _=A=>A===0?[1,0,0]:A===1?[-1,0,0]:A===2?[0,1,0]:A===3?[0,-1,0]:A===4?[0,0,1]:[0,0,-1],S=Math.floor(Math.random()*6);let j=Math.floor(Math.random()*6);for(;Math.floor(S/2)===Math.floor(j/2)||S===j;)j=Math.floor(Math.random()*6);for(;S===j;)j=Math.floor(Math.random()*6);v.push({id:`${m},${g},${M}`,pos:[m-1,g-1,M-1],dirs:[_(S),_(j)],connected:!1,fixed:m===0&&g===0&&M===0||m===2&&g===2&&M===2})}x.push(v)}f.push(x)}f[0][0][0].dirs=[[1,0,0],[0,1,0]],f[0][0][0].connected=!0,f[2][2][2].dirs=[[-1,0,0],[0,-1,0]],a(f),o("")};E.useEffect(()=>{u()},[e]);const d=(f,m,x)=>{if(r)return;const g=[...n],v=g[f][m][x],M=Math.floor(Math.random()*3),_=v.dirs.map(A=>M===0?[A[0],-A[2],A[1]]:M===1?[A[2],A[1],-A[0]]:[-A[1],A[0],A[2]]);v.dirs=_;for(let A=0;A<l;A++)for(let C=0;C<l;C++)for(let N=0;N<l;N++)g[A][C][N].connected=!1;const S=[[0,0,0]];g[0][0][0].connected=!0;const j=new Set(["0,0,0"]);for(;S.length>0;){const[A,C,N]=S.shift();g[A][C][N].dirs.forEach(O=>{const U=A+O[0],z=C+O[1],I=N+O[2];if(U>=0&&U<l&&z>=0&&z<l&&I>=0&&I<l){const V=g[U][z][I];V.dirs.some(q=>q[0]===-O[0]&&q[1]===-O[1]&&q[2]===-O[2])&&!j.has(`${U},${z},${I}`)&&(j.add(`${U},${z},${I}`),V.connected=!0,S.push([U,z,I]))}})}a(g),g[2][2][2].connected&&(o(" !"),setTimeout(()=>t(A=>A+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-cyan-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[3.2,3.2,3.2]}),s.jsx("meshBasicMaterial",{color:"#ccc",wireframe:!0})]}),n.map((f,m)=>f.map((x,g)=>x.map((v,M)=>s.jsx(aee,{data:v,onClick:()=>d(m,g,M)},v.id)))),s.jsxs("mesh",{position:[-1.3,-1.3,-1.3],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#22c55e"})]}),s.jsxs("mesh",{position:[1.3,1.3,1.3],children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsx(ht,{})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-cyan-500 text-xl font-bold text-cyan-700 shadow-xl animate-bounce",children:r})})]})})})},lS=({color:i,pos:e,active:t,onClick:n})=>s.jsxs("group",{position:e,onClick:a=>{a.stopPropagation(),n()},children:[s.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.2,.2,1]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsxs("mesh",{position:[0,.6,0],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:t?i:"#555",emissive:t?i:"#000"})]}),t&&s.jsxs("mesh",{position:[0,-2,0],rotation:[0,0,0],children:[s.jsx("cylinderGeometry",{args:[.05,.05,4]}),s.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.6})]})]}),oee=({color:i})=>s.jsxs("mesh",{position:[0,-2,0],children:[s.jsx("dodecahedronGeometry",{args:[1]}),s.jsx("meshPhysicalMaterial",{color:i,transmission:.6,roughness:.1,thickness:1}),s.jsx("meshBasicMaterial",{color:i,wireframe:!0}),s.jsx("pointLight",{color:i,intensity:2,distance:5})]}),lee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState({r:!1,g:!1,b:!1}),[r,o]=E.useState({r:!0,g:!0,b:!1}),[l,u]=E.useState(new Lt(0,0,0)),[d,f]=E.useState(""),m=()=>{let g,v,M;do g=Math.random()>.5,v=Math.random()>.5,M=Math.random()>.5;while(!g&&!v&&!M);o({r:g,g:v,b:M}),a({r:!1,g:!1,b:!1}),u(new Lt(.2,.2,.2)),f("")};E.useEffect(()=>{m()},[e]),E.useEffect(()=>{const g=new Lt(.1,.1,.1);n.r&&g.add(new Lt(1,0,0)),n.g&&g.add(new Lt(0,1,0)),n.b&&g.add(new Lt(0,0,1)),u(g),n.r===r.r&&n.g===r.g&&n.b===r.b&&(f(" !"),setTimeout(()=>t(v=>v+1),1500))},[n,r]);const x=()=>{const g=new Lt(0,0,0);return r.r&&g.add(new Lt(1,0,0)),r.g&&g.add(new Lt(0,1,0)),r.b&&g.add(new Lt(0,0,1)),g.getStyle()};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-gray-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 flex flex-col items-center bg-white/10 p-2 rounded backdrop-blur",children:[s.jsx("div",{className:"text-white text-xs mb-1",children:""}),s.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white",style:{backgroundColor:x()}})]}),s.jsxs(Ue,{camera:{position:[0,2,8],fov:45},children:[s.jsx("ambientLight",{intensity:.2}),s.jsxs("group",{position:[0,2,0],children:[s.jsx(lS,{color:"red",pos:[-2,0,0],active:n.r,onClick:()=>a(g=>({...g,r:!g.r}))}),s.jsx(lS,{color:"green",pos:[0,0,0],active:n.g,onClick:()=>a(g=>({...g,g:!g.g}))}),s.jsx(lS,{color:"blue",pos:[2,0,0],active:n.b,onClick:()=>a(g=>({...g,b:!g.b}))})]}),s.jsx(oee,{color:l}),s.jsx(ht,{enableRotate:!1})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-500 text-xl font-bold text-pink-700 shadow-xl animate-bounce",children:d})})]})})})},cee=({pos:i,rot:e})=>{const t=E.useRef(null);return Yt(()=>{t.current&&(t.current.position.lerp(new Q(i[0],.5,i[1]),.2),t.current.quaternion.slerp(e,.2))}),s.jsxs("group",{ref:t,children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]}),s.jsxs("mesh",{position:[0,-.51,0],rotation:[Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.8,.8]}),s.jsx("meshBasicMaterial",{color:"#ef4444"})]})]})},uee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0]),[r,o]=E.useState(new Wn),[l,u]=E.useState([]),[d,f]=E.useState([]),[m,x]=E.useState(""),g=5,v=2,M=()=>{const S=[],j=3+Math.floor(Math.random()*3);for(let A=0;A<j;A++){let C,N;do C=Math.floor(Math.random()*g)-v,N=Math.floor(Math.random()*g)-v;while(C===0&&N===0||S.includes(`${C},${N}`));S.push(`${C},${N}`)}f(S),u([]),a([0,0]),o(new Wn),x("")};E.useEffect(()=>{M()},[e]);const _=(S,j)=>{if(m)return;const A=n[0]+S,C=n[1]+j;if(A<-v||A>v||C<-v||C>v)return;a([A,C]);const N=new Q;S===1?N.set(0,0,-1):S===-1?N.set(0,0,1):j===1?N.set(1,0,0):j===-1&&N.set(-1,0,0);const R=new Wn().setFromAxisAngle(N,Math.PI/2),O=r.clone().multiply(R);if(o(O),new Q(0,-1,0).applyQuaternion(O).y<-.9){const z=`${A},${C}`;if(!l.includes(z)){const I=[...l,z];u(I),d.every(V=>I.includes(V))&&I.every(V=>d.includes(V))?(x(" !"),setTimeout(()=>t(V=>V+1),1500)):I.some(V=>!d.includes(V))&&(x(" "),setTimeout(()=>M(),1e3))}}};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-amber-50",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[0,8,4],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(Gi,{infiniteGrid:!1,args:[5,5],sectionColor:"#d97706",cellColor:"#fcd34d",position:[0,-.01,0]}),d.map(S=>{const[j,A]=S.split(",").map(Number),C=l.includes(S);return s.jsxs("mesh",{position:[j,.01,A],rotation:[-Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.4]}),s.jsx("meshBasicMaterial",{color:C?"#ef4444":"white"}),!C&&s.jsx("meshBasicMaterial",{color:"#ef4444",wireframe:!0})]},S)}),s.jsx(cee,{pos:n,rot:r}),s.jsx(ht,{enabled:!1})]})}),s.jsxs("div",{className:"h-40 bg-white shadow-xl flex items-center justify-center gap-4",children:[s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(0,-1),children:s.jsx(q0,{})}),s.jsxs("div",{className:"flex gap-16",children:[s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(-1,0),children:s.jsx(ud,{})}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(1,0),children:s.jsx(kx,{})})]}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(0,1),children:s.jsx(tu,{})})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-500 text-xl font-bold text-amber-700 shadow-xl animate-bounce",children:m})})]})})},dee=({pos:i,colors:e})=>{const t=e.map(n=>new yi({color:n}));return s.jsx("mesh",{position:i,material:t,children:s.jsx("boxGeometry",{args:[.95,.95,.95]})})},fee=({state:i})=>s.jsx("group",{children:i.map((e,t)=>s.jsx(dee,{pos:e.pos,colors:e.colors},t))}),hee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d={F:"#22c55e",B:"#3b82f6",U:"#ffffff",D:"#eab308",R:"#ef4444",L:"#f97316"},f=()=>{const x=[];for(let g of[-.5,.5])for(let v of[-.5,.5])for(let M of[-.5,.5]){const _=[g>0?d.R:"#333",g<0?d.L:"#333",v>0?d.U:"#333",v<0?d.D:"#333",M>0?d.F:"#333",M<0?d.B:"#333"];x.push({pos:[g,v,M],colors:_,id:x.length})}return x},m=(x,g,v)=>{const M=n.filter(S=>x==="x"?Math.abs(S.pos[0]-g)<.1:x==="y"?Math.abs(S.pos[1]-g)<.1:Math.abs(S.pos[2]-g)<.1),_=n.map(S=>{if(!M.includes(S))return S;const j=S.pos[0],A=S.pos[1],C=S.pos[2];let N=j,R=A,O=C;x==="y"?v===1?(N=-C,O=j):(N=C,O=-j):x==="x"?v===1?(R=-C,O=A):(R=C,O=-A):x==="z"&&(v===1?(N=-A,R=j):(N=A,R=-j));const U=[...S.colors];if(x==="y")if(v===1){const z=U[0];U[0]=U[4],U[4]=U[1],U[1]=U[5],U[5]=z}else{const z=U[0];U[0]=U[5],U[5]=U[1],U[1]=U[4],U[4]=z}if(x==="x")if(v===1){const z=U[2];U[2]=U[5],U[5]=U[3],U[3]=U[4],U[4]=z}else{const z=U[2];U[2]=U[4],U[4]=U[3],U[3]=U[5],U[5]=z}if(x==="z")if(v===1){const z=U[2];U[2]=U[0],U[0]=U[3],U[3]=U[1],U[1]=z}else{const z=U[2];U[2]=U[1],U[1]=U[3],U[3]=U[0],U[0]=z}return{...S,pos:[N,R,O],colors:U}});a(_)};return E.useEffect(()=>{const x=f();a(x),o([d.F,d.F,d.F,d.F]),setTimeout(()=>{o(["#3b82f6","#22c55e","#22c55e","#3b82f6"])},100)},[e]),E.useEffect(()=>{const x=n.filter(M=>M.pos[2]>.1),g=(M,_)=>{const S=x.find(j=>Math.abs(j.pos[0]-M)<.1&&Math.abs(j.pos[1]-_)<.1);return S?S.colors[4]:""};[g(-.5,.5),g(.5,.5),g(-.5,-.5),g(.5,-.5)].join("")===r.join("")&&l===""&&(u(" !"),setTimeout(()=>t(M=>M+1),1500))},[n,r]),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-red-50",children:[s.jsxs("div",{className:"absolute top-4 left-4 p-2 bg-white rounded shadow border border-red-200",children:[s.jsx("div",{className:"text-xs text-center mb-1 font-bold text-red-500",children:""}),s.jsx("div",{className:"grid grid-cols-2 gap-1 w-16 h-16",children:r.map((x,g)=>s.jsx("div",{className:"w-full h-full",style:{backgroundColor:x}},g))})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[4,4,6],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx(fee,{state:n}),s.jsx(ht,{enabled:!1})]})}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-xl grid grid-cols-3 gap-4",children:[s.jsx("button",{className:"p-3 bg-slate-100 rounded font-bold text-slate-600",onClick:()=>m("y",.5,-1),children:" "}),s.jsx("button",{className:"p-3 bg-slate-100 rounded font-bold text-slate-600",onClick:()=>m("x",.5,-1),children:" "}),s.jsx("button",{className:"p-3 bg-slate-100 rounded font-bold text-slate-600",onClick:()=>m("z",.5,-1),children:" "}),s.jsx("button",{className:"p-3 bg-slate-100 rounded font-bold text-slate-600",onClick:()=>m("y",.5,1),children:" "}),s.jsx("button",{className:"p-3 bg-slate-100 rounded font-bold text-slate-600",onClick:()=>m("x",.5,1),children:" "}),s.jsx("button",{className:"p-3 bg-slate-100 rounded font-bold text-slate-600",onClick:()=>m("z",.5,1),children:" "})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-red-500 text-xl font-bold text-red-700 shadow-xl animate-bounce",children:l})})]})})},cS=({type:i,pos:e,rot:t,onClick:n})=>s.jsxs("group",{position:e,rotation:t,onClick:a=>{a.stopPropagation(),n==null||n()},children:[i==="empty"&&s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.5,.1,.5]}),s.jsx("meshStandardMaterial",{color:"#ddd",transparent:!0,opacity:.3})]}),i==="straight"&&s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,.1,.4]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),i==="slope"&&s.jsxs("mesh",{rotation:[0,0,-Math.PI/4],children:[s.jsx("boxGeometry",{args:[1.4,.1,.4]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),i==="corner"&&s.jsxs("group",{children:[s.jsxs("mesh",{position:[.25,0,0],children:[s.jsx("boxGeometry",{args:[.5,.1,.4]}),s.jsx("meshStandardMaterial",{color:"#f59e0b"})]}),s.jsxs("mesh",{position:[0,0,.25],rotation:[0,Math.PI/2,0],children:[s.jsx("boxGeometry",{args:[.5,.1,.4]}),s.jsx("meshStandardMaterial",{color:"#f59e0b"})]})]})]}),mee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("empty"),[r,o]=E.useState(""),l=()=>{a("empty"),o("")};E.useEffect(()=>{l()},[e]);const u=()=>{r||a(n==="empty"?"straight":n==="straight"?"corner":n==="corner"?"slope":"empty")},d=()=>{n==="slope"?(o(" !"),setTimeout(()=>t(f=>f+1),1500)):(o(" !"),setTimeout(()=>o(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-blue-50 relative",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[5,5,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(cS,{type:"straight",pos:[-1,2,0],rot:[0,0,0]}),s.jsx(cS,{type:n,pos:[0,1.5,0],rot:[0,0,0],onClick:u}),s.jsx(cS,{type:"straight",pos:[1,1,0],rot:[0,0,0]}),s.jsx(ht,{})]})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:""})}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-blue-500 text-xl font-bold text-blue-700 shadow-xl animate-bounce",children:r})})]})})},pee=({x:i,y:e,dir:t,onClick:n})=>s.jsxs("group",{position:[i,0,e],onClick:a=>{a.stopPropagation(),n()},children:[s.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.05,0],children:[s.jsx("planeGeometry",{args:[.9,.9]}),s.jsx("meshBasicMaterial",{color:"white"})]}),s.jsxs("mesh",{rotation:[-Math.PI/2,0,t*Math.PI/2],children:[s.jsx("coneGeometry",{args:[.3,.8,3]})," ",s.jsx("meshStandardMaterial",{color:"#16a34a"})]})]}),xee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([0,0]),[l,u]=E.useState(""),d=()=>{const x=Array(4).fill(0).map(()=>Array(4).fill(0).map(()=>Math.floor(Math.random()*4)));a(x),o([0,0]),u("")};E.useEffect(()=>{d()},[e]);const f=(x,g)=>{if(l)return;const v=n.map(M=>[...M]);v[x][g]=(v[x][g]+1)%4,a(v)},m=()=>{let[x,g]=r,v=0;const M=setInterval(()=>{if(v>10){clearInterval(M);return}const _=n[g][x];if(_===0?x++:_===1?g++:_===2?x--:g--,x<0||x>=4||g<0||g>=4){clearInterval(M),u(" "),setTimeout(()=>u(""),1e3),o([0,0]);return}o([x,g]),v++,x===3&&g===3&&(clearInterval(M),u(" !"),setTimeout(()=>t(S=>S+1),1500))},500)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-green-50 relative",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[2,6,4]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsxs("group",{position:[-1.5,0,-1.5],children:[n.map((x,g)=>x.map((v,M)=>s.jsx(pee,{x:M,y:g,dir:v,onClick:()=>f(g,M)},`${g}-${M}`))),s.jsxs("mesh",{position:[r[0],.5,r[1]],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#ea580c"})]}),s.jsxs("mesh",{position:[3,0,3],children:[s.jsx("boxGeometry",{args:[.8,.1,.8]}),s.jsx("meshStandardMaterial",{color:"red"})]})]}),s.jsx(ht,{enabled:!1})]})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:m,className:"bg-green-600 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:""})}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-green-500 text-xl font-bold text-green-700 shadow-xl animate-bounce",children:l})})]})})},gee=({rot:i})=>{const e=E.useRef(null);return Yt(()=>{e.current&&(e.current.rotation.x=ks.lerp(e.current.rotation.x,i[0],.2),e.current.rotation.y=ks.lerp(e.current.rotation.y,i[1],.2),e.current.rotation.z=ks.lerp(e.current.rotation.z,i[2],.2))}),s.jsxs("group",{ref:e,position:[0,2,0],children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]}),s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]}),s.jsxs("mesh",{position:[1,0,0],children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]})]})},vee=()=>s.jsxs("group",{position:[0,-2,0],children:[s.jsxs("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[5,5]}),s.jsx("meshStandardMaterial",{color:"#334155"})]}),s.jsxs("mesh",{position:[0,.01,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx("meshBasicMaterial",{color:"black"})]}),s.jsxs("mesh",{position:[0,.01,-1],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx("meshBasicMaterial",{color:"black"})]}),s.jsxs("mesh",{position:[1,.01,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx("meshBasicMaterial",{color:"black"})]})]}),yee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0]),[r,o]=E.useState([0,0,0]),[l,u]=E.useState(""),d=()=>e<=2?{rotations:1,tolerance:.3}:e<=5?{rotations:2,tolerance:.25}:e<=9?{rotations:2,tolerance:.2}:{rotations:3,tolerance:.15},f=()=>{const M=d(),j=[...["x","y","z"]].sort(()=>Math.random()-.5).slice(0,M.rotations),A=[0,0,0];j.forEach(C=>{const N=Math.floor(Math.random()*3)+1;C==="x"&&(A[0]=N*Math.PI/2),C==="y"&&(A[1]=N*Math.PI/2),C==="z"&&(A[2]=N*Math.PI/2)}),o(A),a([0,0,0]),u("")};E.useEffect(()=>{f()},[e]);const m=()=>e<=2?"":e<=5?"":e<=9?"":"",x=()=>{const M=d(),_=new Wn().setFromEuler(new is(...r));new Wn().setFromEuler(new is(...n)).angleTo(_)<M.tolerance?(u(" !"),setTimeout(()=>t(A=>A+1),1500)):(u(" !"),setTimeout(()=>u(""),1500))},g=(M,_)=>{if(l)return;const S=Math.PI/2,j=[...n];M==="x"&&(j[0]+=_*S),M==="y"&&(j[1]+=_*S),M==="z"&&(j[2]+=_*S),a(j)},v=()=>{l||a([0,0,0])};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${m()}] - `,children:s.jsxs("div",{className:"flex flex-col h-full bg-orange-50 relative",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[0,5,8],fov:45},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(gee,{rot:n}),s.jsx(vee,{}),s.jsx(ht,{})]})}),s.jsxs("div",{className:"bg-white p-4 border-t-2 border-orange-200",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-red-500 font-bold",children:"X"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>g("x",-1),className:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg font-bold text-lg active:bg-red-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>g("x",1),className:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg font-bold text-lg active:bg-red-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-green-500 font-bold",children:"Y"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>g("y",-1),className:"flex-1 py-3 bg-green-100 text-green-600 rounded-lg font-bold text-lg active:bg-green-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>g("y",1),className:"flex-1 py-3 bg-green-100 text-green-600 rounded-lg font-bold text-lg active:bg-green-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-blue-500 font-bold",children:"Z"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>g("z",-1),className:"flex-1 py-3 bg-blue-100 text-blue-600 rounded-lg font-bold text-lg active:bg-blue-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>g("z",1),className:"flex-1 py-3 bg-blue-100 text-blue-600 rounded-lg font-bold text-lg active:bg-blue-200 active:scale-95",children:""})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:v,className:"flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold active:bg-slate-200 active:scale-95",children:" "}),s.jsx("button",{onClick:x,className:"flex-[2] py-3 bg-orange-500 text-white rounded-xl font-bold shadow-lg border-b-4 border-orange-700 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce bg-white ${l.includes("")?"border-red-500 text-red-600":"border-orange-500 text-orange-700"}`,children:l})})]})})},lA=({pos:i,rot:e,onClick:t})=>s.jsxs("group",{position:i,rotation:e,onClick:n=>{n.stopPropagation(),t()},children:[s.jsxs("mesh",{rotation:[0,0,Math.PI/4],children:[s.jsx("boxGeometry",{args:[.1,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#a5f3fc",metalness:.8,roughness:.1})]}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshBasicMaterial",{color:"white",wireframe:!0,opacity:.1,transparent:!0})]})]}),bee=()=>s.jsxs("mesh",{position:[0,0,0],rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.05,.05,4]}),s.jsx("meshBasicMaterial",{color:"red"})]}),Mee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(""),r=()=>{a(" !"),setTimeout(()=>t(o=>o+1),1500)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-purple-900 relative",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[5,5,5]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10]}),s.jsxs("mesh",{position:[-2,0,0],children:[s.jsx("boxGeometry",{args:[.5,.5,.5]}),s.jsx("meshStandardMaterial",{color:"red"})]}),s.jsx(lA,{pos:[0,0,0],rot:[0,Math.PI/4,0],onClick:()=>{}}),s.jsx(lA,{pos:[0,0,2],rot:[Math.PI/4,0,0],onClick:()=>{}}),s.jsxs("mesh",{position:[0,2,2],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"green"})]}),s.jsx(bee,{}),s.jsx(ht,{})]})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:r,className:"bg-purple-500 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:""})}),n&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-purple-500 text-xl font-bold text-purple-700 shadow-xl animate-bounce",children:n})})]})})},cA=({pos:i,color:e})=>s.jsxs("mesh",{position:[i[0],.5,i[1]],children:[s.jsx("boxGeometry",{args:[.9,.9,.9]}),s.jsx("meshStandardMaterial",{color:e}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.9,.9,.9)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]}),See=({pos:i})=>s.jsxs("mesh",{position:[i[0],.5,i[1]],children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]}),_ee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0]),[r,o]=E.useState([0,0]),[l,u]=E.useState([0,0]),[d,f]=E.useState([]),[m,x]=E.useState(""),g=5,v=2,M=()=>{const S=[];for(let R=0;R<5;R++){const O=Math.floor(Math.random()*g)-v,U=Math.floor(Math.random()*g)-v;S.push(`${O},${U}`)}f(S);const j=()=>{let R,O;do R=Math.floor(Math.random()*g)-v,O=Math.floor(Math.random()*g)-v;while(S.includes(`${R},${O}`));return[R,O]},A=j();let C=j();for(;C[0]===A[0]&&C[1]===A[1];)C=j();let N=j();for(;N[0]===A[0]&&N[1]===A[1]||N[0]===C[0]&&N[1]===C[1];)N=j();a(A),o(C),u(N),x("")};E.useEffect(()=>{M()},[e]);const _=(S,j)=>{if(m)return;const A=n[0]+S,C=n[1]+j;if(!(A<-v||A>v||C<-v||C>v||d.includes(`${A},${C}`))){if(A===r[0]&&C===r[1]){const N=A+S,R=C+j;if(N<-v||N>v||R<-v||R>v||d.includes(`${N},${R}`))return;o([N,R]),N===l[0]&&R===l[1]&&(x(" !"),setTimeout(()=>t(O=>O+1),1500))}a([A,C])}};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-amber-50",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[0,8,4],fov:50},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(Gi,{infiniteGrid:!1,args:[5,5],sectionColor:"#d97706",cellColor:"#fcd34d",position:[0,-.01,0]}),d.map(S=>{const[j,A]=S.split(",").map(Number);return s.jsx(cA,{pos:[j,A],color:"#78350f"},S)}),s.jsx(cA,{pos:r,color:"#3b82f6"}),s.jsx(See,{pos:n}),s.jsxs("mesh",{position:[l[0],.01,l[1]],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.8,.8]}),s.jsx("meshBasicMaterial",{color:"#ef4444",opacity:.5,transparent:!0})]}),s.jsx(ht,{enabled:!1})]})}),s.jsxs("div",{className:"h-40 bg-white shadow-xl flex items-center justify-center gap-4",children:[s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(0,-1),children:s.jsx(q0,{})}),s.jsxs("div",{className:"flex gap-16",children:[s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(-1,0),children:s.jsx(ud,{})}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(1,0),children:s.jsx(kx,{})})]}),s.jsx("button",{className:"p-4 bg-amber-100 rounded-full active:bg-amber-300",onClick:()=>_(0,1),children:s.jsx(tu,{})})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-500 text-xl font-bold text-amber-700 shadow-xl animate-bounce",children:m})})]})})},wee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([0,0,0]),[l,u]=E.useState([0,0,0]),[d,f]=E.useState([]),[m,x]=E.useState(""),g=()=>{o([0,0,0]),u([2,2,2]),a([[0,0,0]]);const _=[];for(let j=0;j<5;j++)_.push([Math.floor(Math.random()*3),Math.floor(Math.random()*3),Math.floor(Math.random()*3)]);const S=_.filter(j=>!(j[0]===0&&j[1]===0&&j[2]===0)&&!(j[0]===2&&j[1]===2&&j[2]===2));f(S),x("")};E.useEffect(()=>{g()},[e]);const v=(_,S,j)=>{if(m)return;const A=n[n.length-1],C=[A[0]+_,A[1]+S,A[2]+j];if(!(C[0]<0||C[0]>2||C[1]<0||C[1]>2||C[2]<0||C[2]>2)){if(d.some(N=>N[0]===C[0]&&N[1]===C[1]&&N[2]===C[2])){x(" !"),setTimeout(()=>x(""),1e3);return}if(n.some(N=>N[0]===C[0]&&N[1]===C[1]&&N[2]===C[2])){if(n.length>1){const N=n[n.length-2];if(N[0]===C[0]&&N[1]===C[1]&&N[2]===C[2]){a(n.slice(0,-1));return}}return}a([...n,C]),C[0]===l[0]&&C[1]===l[1]&&C[2]===l[2]&&(x(" !"),setTimeout(()=>t(N=>N+1),1500))}},M=Uo.useMemo(()=>{if(n.length<2)return null;const _=n.map(j=>new Q(...j)),S=new md(_,!1,"catmullrom",.1);return s.jsx(lg,{args:[S,64,.1,8,!1],children:s.jsx("meshStandardMaterial",{color:"#22d3ee"})})},[n]);return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-cyan-900",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsxs("group",{position:[-1,-1,-1],children:[s.jsxs("mesh",{position:r,children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#4ade80"})]}),s.jsxs("mesh",{position:l,children:[s.jsx("sphereGeometry",{args:[.2]}),s.jsx("meshStandardMaterial",{color:"#f87171"})]}),d.map((_,S)=>s.jsxs("mesh",{position:_,children:[s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#475569",transparent:!0,opacity:.8})]},S)),s.jsxs("mesh",{position:n[n.length-1],children:[s.jsx("sphereGeometry",{args:[.15]}),s.jsx("meshStandardMaterial",{color:"#fff"})]}),M,s.jsxs("mesh",{position:[1,1,1],children:[s.jsx("boxGeometry",{args:[3,3,3]}),s.jsx("meshBasicMaterial",{color:"#333",wireframe:!0})]})]}),s.jsx(ht,{})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-cyan-500 text-xl font-bold text-cyan-700 shadow-xl animate-bounce",children:m})})]}),s.jsxs("div",{className:"bg-white p-4 grid grid-cols-3 gap-2 justify-items-center",children:[s.jsx("button",{className:"p-3 bg-slate-200 rounded font-bold",onClick:()=>v(0,1,0),children:" (+Y)"}),s.jsx("button",{className:"p-3 bg-slate-200 rounded font-bold",onClick:()=>v(0,0,-1),children:" (-Z)"}),s.jsx("div",{}),s.jsx("button",{className:"p-3 bg-slate-200 rounded font-bold",onClick:()=>v(-1,0,0),children:" (-X)"}),s.jsx("button",{className:"p-3 bg-slate-200 rounded font-bold",onClick:()=>v(0,0,1),children:" (+Z)"}),s.jsx("button",{className:"p-3 bg-slate-200 rounded font-bold",onClick:()=>v(1,0,0),children:" (+X)"}),s.jsx("div",{}),s.jsx("button",{className:"p-3 bg-slate-200 rounded font-bold",onClick:()=>v(0,-1,0),children:" (-Y)"}),s.jsx("div",{})]})]})})},jee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(2),[r,o]=E.useState(2),[l,u]=E.useState(1),[d,f]=E.useState(0),[m,x]=E.useState(""),g=1,v=()=>{const M=Math.floor(Math.random()*4)+1;o(1),a(M),u(1),x("")};return E.useEffect(()=>{v()},[e]),E.useEffect(()=>{const M=r*n,_=g*l;let S=0;M>_&&(S=.3),_>M&&(S=-.3);const j=setInterval(()=>f(A=>A+(S-A)*.1),16);return M===_&&!m&&(x(" !"),setTimeout(()=>t(A=>A+1),1500)),()=>clearInterval(j)},[r,n,l,m]),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-indigo-50",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,2,10]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsxs("group",{rotation:[0,0,d],children:[s.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.1,.1,10]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[0,-1,0],rotation:[0,0,0],children:[s.jsx("coneGeometry",{args:[.5,1]}),s.jsx("meshStandardMaterial",{color:"#334155"})]}),[-4,-3,-2,-1,1,2,3,4].map(M=>s.jsxs("mesh",{position:[M,.1,0],children:[s.jsx("boxGeometry",{args:[.05,.2,.1]}),s.jsx("meshStandardMaterial",{color:"white"})]},M)),s.jsxs("mesh",{position:[-n,.5,0],children:[s.jsx("boxGeometry",{args:[.8,.8,.8]}),s.jsx("meshStandardMaterial",{color:"#ef4444"}),s.jsx(gs,{center:!0,children:s.jsxs("div",{className:"text-white font-bold",children:[r,"kg"]})})]}),s.jsxs("mesh",{position:[l,.5,0],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"}),s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-white font-bold",children:"1kg"})})]})]}),s.jsx(ht,{enabled:!1})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:m})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-t-3xl shadow-xl flex flex-col items-center",children:[s.jsxs("label",{className:"font-bold text-indigo-600 mb-2",children:[": ",l]}),s.jsx("input",{type:"range",min:"1",max:"4",step:"1",value:l,onChange:M=>u(Number(M.target.value)),className:"w-full h-4 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]})})},Eee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=["#f87171","#60a5fa","#4ade80"],f=()=>{const g=Array(3).fill(0).map(()=>Array(3).fill(0).map(()=>d[Math.floor(Math.random()*3)]));o(g);let v=JSON.parse(JSON.stringify(g));for(let M=0;M<5;M++)if(Math.random()>.5){const _=Math.floor(Math.random()*3);v[_].unshift(v[_].pop())}else{const _=Math.floor(Math.random()*3),S=v[2][_];v[2][_]=v[1][_],v[1][_]=v[0][_],v[0][_]=S}a(v),u("")};E.useEffect(()=>{f()},[e]);const m=g=>{if(l)return;const v=[...n];v[g]=[...v[g]],v[g].unshift(v[g].pop()),a(v)},x=g=>{if(l)return;const v=n.map(_=>[..._]),M=v[2][g];v[2][g]=v[1][g],v[1][g]=v[0][g],v[0][g]=M,a(v)};return E.useEffect(()=>{n.length>0&&JSON.stringify(n)===JSON.stringify(r)&&(u(" !"),setTimeout(()=>t(g=>g+1),1500))},[n]),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full items-center justify-center bg-rose-50 gap-8 p-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-1",children:[s.jsx("div",{}),[0,1,2].map(g=>s.jsx("button",{onClick:()=>x(g),className:"text-rose-500 font-bold",children:""},g))]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"flex flex-col gap-1",children:[0,1,2].map(g=>s.jsx("button",{onClick:()=>m(g),className:"text-rose-500 font-bold h-12 flex items-center",children:""},g))}),s.jsx("div",{className:"grid grid-cols-3 gap-1 bg-white p-2 rounded shadow border border-rose-200",children:n.map((g,v)=>g.map((M,_)=>s.jsx("div",{className:"w-12 h-12 rounded",style:{backgroundColor:M}},`${v}-${_}`)))})]})]}),s.jsxs("div",{className:"bg-white p-2 rounded shadow border border-slate-300 opacity-80 scale-75",children:[s.jsx("div",{className:"text-xs text-center mb-1 text-slate-400 font-bold",children:""}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:r.map((g,v)=>g.map((M,_)=>s.jsx("div",{className:"w-12 h-12 rounded",style:{backgroundColor:M}},`${v}-${_}`)))})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-500 text-xl font-bold text-rose-700 shadow-xl animate-bounce",children:l})})]})})},uA=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#f87171"})]}),s.jsxs("mesh",{position:[1,0,0],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]}),s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("coneGeometry",{args:[.5,1]}),s.jsx("meshStandardMaterial",{color:"#facc15"})]}),s.jsxs("mesh",{position:[0,0,1],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.3,.3,1]}),s.jsx("meshStandardMaterial",{color:"#34d399"})]})]}),Tee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(new is(0,0,0)),[r,o]=E.useState([0,0,0]),[l,u]=E.useState(""),d=()=>{const v=Math.floor(Math.random()*4)*Math.PI/2,M=Math.floor(Math.random()*4)*Math.PI/2;a(new is(v,M,0)),o([0,0,0]),u("")};E.useEffect(()=>{d()},[e]);const f=(v,M)=>{if(l)return;const _=Math.PI/4,S=[...r];v==="x"&&(S[0]+=M*_),v==="y"&&(S[1]+=M*_),o(S)},m=()=>{l||o([0,0,0])},x=()=>{const v=new Wn().setFromEuler(n);new Wn().setFromEuler(new is(...r)).angleTo(v)<.4?(u(" !"),setTimeout(()=>t(S=>S+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))},g=new is(...r);return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-teal-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 w-32 h-32 bg-black border-2 border-white rounded-xl overflow-hidden z-10 pointer-events-none shadow-lg",children:[s.jsxs(Ue,{children:[s.jsx(ru,{makeDefault:!0,position:[0,0,5]}),s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx("group",{rotation:n,children:s.jsx(uA,{})})]}),s.jsx("div",{className:"absolute bottom-0 text-white text-xs bg-teal-600 w-full text-center py-0.5 font-bold",children:" "})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[0,0,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx("group",{rotation:g,children:s.jsx(uA,{})})]})}),s.jsxs("div",{className:"bg-white p-4 border-t-2 border-teal-200",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-red-500 font-bold",children:""}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>f("x",-1),className:"flex-1 py-4 bg-red-100 text-red-600 rounded-lg font-bold text-xl active:bg-red-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>f("x",1),className:"flex-1 py-4 bg-red-100 text-red-600 rounded-lg font-bold text-xl active:bg-red-200 active:scale-95",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-xs text-center text-green-500 font-bold",children:""}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>f("y",-1),className:"flex-1 py-4 bg-green-100 text-green-600 rounded-lg font-bold text-xl active:bg-green-200 active:scale-95",children:""}),s.jsx("button",{onClick:()=>f("y",1),className:"flex-1 py-4 bg-green-100 text-green-600 rounded-lg font-bold text-xl active:bg-green-200 active:scale-95",children:""})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:m,className:"flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold active:bg-slate-200 active:scale-95",children:" "}),s.jsx("button",{onClick:x,className:"flex-[2] py-3 bg-teal-600 text-white rounded-xl font-bold shadow-lg border-b-4 border-teal-800 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce bg-white ${l.includes("")?"border-teal-500 text-teal-700":"border-orange-500 text-orange-700"}`,children:l})})]})})},Aee=({z:i,shapeType:e,holeRot:t})=>{const n=[],a=(r,o)=>{const l=-t,u=Math.round(r*Math.cos(l)-o*Math.sin(l)),d=Math.round(r*Math.sin(l)+o*Math.cos(l));return e==="I"?u===0&&d>=-1&&d<=1:e==="L"?u===0&&d>=0&&d<=1||d===0&&u>=0&&u<=1:!1};for(let r=-2;r<=2;r++)for(let o=-2;o<=2;o++)a(r,o)||n.push(s.jsxs("mesh",{position:[r,o,0],children:[s.jsx("boxGeometry",{args:[1,1,.5]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]},`${r}-${o}`));return s.jsx("group",{position:[0,0,i],children:n})},Cee=({shapeType:i,rot:e})=>{const t=E.useRef(null);Yt(()=>{t.current&&(t.current.rotation.z=ks.lerp(t.current.rotation.z,e,.2))});const n=[];return i==="I"?n.push([0,-1,0],[0,0,0],[0,1,0]):n.push([0,0,0],[0,1,0],[1,0,0]),s.jsx("group",{ref:t,children:n.map((a,r)=>s.jsxs("mesh",{position:new Q(...a),children:[s.jsx("boxGeometry",{args:[.9,.9,2]}),s.jsx("meshStandardMaterial",{color:"#22c55e"})]},r))})},Nee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(-20),[r,o]=E.useState(0),[l,u]=E.useState(0),[d,f]=E.useState("I"),[m,x]=E.useState("playing"),[g,v]=E.useState(""),M=()=>{f(Math.random()>.5?"I":"L"),u(Math.floor(Math.random()*4)*Math.PI/2),o(0),a(-20),x("playing"),v("")};E.useEffect(()=>{M()},[e]),E.useEffect(()=>{if(m!=="playing")return;const S=setInterval(()=>{a(j=>{if(j>=0){const A=(r%(Math.PI*2)+Math.PI*2)%(Math.PI*2),C=(l%(Math.PI*2)+Math.PI*2)%(Math.PI*2);return Math.abs(A-C)<.1?(x("passed"),v(" !"),setTimeout(()=>t(N=>N+1),1500),j):(x("crashed"),v(" !"),setTimeout(()=>M(),1500),0)}return j+.2})},30);return()=>clearInterval(S)},[m,r,l]);const _=S=>{o(j=>j+S*Math.PI/2)};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-900",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8],fov:60},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[5,10,5],intensity:1}),s.jsx("fog",{attach:"fog",args:["#0f172a",5,30]}),s.jsx(Aee,{z:n,shapeType:d,holeRot:l}),s.jsx(Cee,{shapeType:d,rot:r}),s.jsx("gridHelper",{args:[50,50,3359061,1976635],rotation:[Math.PI/2,0,0],position:[0,0,0]})]}),g&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`px-6 py-3 rounded-full border-4 text-2xl font-black bg-white shadow-xl animate-bounce ${m==="passed"?"border-green-500 text-green-600":"border-red-500 text-red-600"}`,children:g})})]}),s.jsxs("div",{className:"h-40 bg-slate-800 flex items-center justify-center gap-12",children:[s.jsx("button",{onClick:()=>_(1),className:"w-24 h-24 rounded-full bg-slate-700 border-4 border-slate-500 text-4xl active:bg-slate-600 active:scale-95 shadow-lg",children:""}),s.jsx("button",{onClick:()=>_(-1),className:"w-24 h-24 rounded-full bg-slate-700 border-4 border-slate-500 text-4xl active:bg-slate-600 active:scale-95 shadow-lg",children:""})]})]})})},Ree=({shapeType:i})=>{switch(i){case 0:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[2,0,0],children:[s.jsx("sphereGeometry",{args:[1]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{position:[-2,0,0],children:[s.jsx("sphereGeometry",{args:[1]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.3,.3,4]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]})]});case 1:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[1.5,1,0],children:[s.jsx("boxGeometry",{args:[1,1,.5]}),s.jsx("meshStandardMaterial",{color:"#ec4899"})]}),s.jsxs("mesh",{position:[-1.5,1,0],children:[s.jsx("boxGeometry",{args:[1,1,.5]}),s.jsx("meshStandardMaterial",{color:"#ec4899"})]}),s.jsxs("mesh",{position:[1.5,-1,0],children:[s.jsx("boxGeometry",{args:[1,1,.5]}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]}),s.jsxs("mesh",{position:[-1.5,-1,0],children:[s.jsx("boxGeometry",{args:[1,1,.5]}),s.jsx("meshStandardMaterial",{color:"#f472b6"})]}),s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#be185d"})]})]});case 2:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1.5,0],children:[s.jsx("boxGeometry",{args:[4,1,1]}),s.jsx("meshStandardMaterial",{color:"#22c55e"})]}),s.jsxs("mesh",{position:[0,-.5,0],children:[s.jsx("boxGeometry",{args:[1,3,1]}),s.jsx("meshStandardMaterial",{color:"#16a34a"})]})]});case 3:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[.5,.5,3]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]}),s.jsxs("mesh",{position:[0,0,.5],children:[s.jsx("boxGeometry",{args:[3,.1,.8]}),s.jsx("meshStandardMaterial",{color:"#fb923c"})]}),s.jsxs("mesh",{position:[0,0,-1],children:[s.jsx("boxGeometry",{args:[1.5,.1,.5]}),s.jsx("meshStandardMaterial",{color:"#fdba74"})]}),s.jsxs("mesh",{position:[0,.5,-1],children:[s.jsx("boxGeometry",{args:[.1,.8,.4]}),s.jsx("meshStandardMaterial",{color:"#ea580c"})]})]});case 4:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[4,1,1]}),s.jsx("meshStandardMaterial",{color:"#8b5cf6"})]}),s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("boxGeometry",{args:[1,4,1]}),s.jsx("meshStandardMaterial",{color:"#a78bfa"})]})]});case 5:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[1,0,0],children:[s.jsx("boxGeometry",{args:[2,1,1]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),s.jsxs("mesh",{position:[-1.5,1,0],children:[s.jsx("sphereGeometry",{args:[.8]}),s.jsx("meshStandardMaterial",{color:"#f87171"})]})]});default:return s.jsxs("group",{children:[s.jsxs("mesh",{position:[2,0,0],children:[s.jsx("sphereGeometry",{args:[1]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{position:[-2,0,0],children:[s.jsx("sphereGeometry",{args:[1]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[.3,.3,4]}),s.jsx("meshStandardMaterial",{color:"#60a5fa"})]})]})}},Dee=({angle:i})=>s.jsxs("mesh",{rotation:[0,i,0],children:[s.jsx("boxGeometry",{args:[6,6,.05]}),s.jsx("meshStandardMaterial",{color:"#fbbf24",transparent:!0,opacity:.4,side:Ms}),s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(6,6,.05)]}),s.jsx("lineBasicMaterial",{color:"#d97706"})]})]}),Lee=[{type:0,targetAngle:Math.PI/2,hasSymmetry:!0,name:""},{type:1,targetAngle:Math.PI/2,hasSymmetry:!0,name:""},{type:2,targetAngle:Math.PI/2,hasSymmetry:!0,name:"T"},{type:3,targetAngle:Math.PI/2,hasSymmetry:!0,name:""},{type:4,targetAngle:Math.PI/2,hasSymmetry:!0,name:""},{type:5,targetAngle:-1,hasSymmetry:!1,name:""}],Uee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState(0),[l,u]=E.useState(Math.PI/2),[d,f]=E.useState(!0),[m,x]=E.useState(""),g=()=>e<=2?{shapes:[0,2],tolerance:.2,includeNoSymmetry:!1,step:.1}:e<=5?{shapes:[0,1,2,3],tolerance:.15,includeNoSymmetry:!1,step:.08}:e<=9?{shapes:[0,1,2,3,4],tolerance:.1,includeNoSymmetry:!0,step:.05}:{shapes:[0,1,2,3,4,5],tolerance:.08,includeNoSymmetry:!0,step:.03},v=()=>{const A=g();let C=A.shapes;A.includeNoSymmetry&&Math.random()<.2&&(C=[5]);const N=C[Math.floor(Math.random()*C.length)],R=Lee[N];o(R.type),u(R.targetAngle),f(R.hasSymmetry),a(0),x("")};E.useEffect(()=>{v()},[e]);const M=()=>e<=2?"":e<=5?"":e<=9?"":"",_=()=>{const A=g();if(!d){x(" "),setTimeout(()=>x(""),1500);return}const C=Math.abs(n-l);Math.min(C%Math.PI,Math.PI-C%Math.PI)<A.tolerance?(x(" !"),setTimeout(()=>t(R=>R+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))},S=()=>{d?(x(" "),setTimeout(()=>x(""),1e3)):(x(" "),setTimeout(()=>t(A=>A+1),1500))},j=g();return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${M()}] - `,children:s.jsxs("div",{className:"flex flex-col h-full bg-blue-50 relative",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsxs(Ue,{camera:{position:[0,5,8],fov:50},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(Ree,{shapeType:r}),s.jsx(Dee,{angle:n}),s.jsx(ht,{})]})}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("button",{onClick:()=>a(Math.max(0,n-j.step*2)),className:"w-12 h-12 bg-yellow-100 text-yellow-600 rounded-full font-bold text-xl active:bg-yellow-200",children:""}),s.jsx("input",{type:"range",min:"0",max:Math.PI,step:j.step,value:n,onChange:A=>a(Number(A.target.value)),className:"flex-1 h-4 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),s.jsx("button",{onClick:()=>a(Math.min(Math.PI,n+j.step*2)),className:"w-12 h-12 bg-yellow-100 text-yellow-600 rounded-full font-bold text-xl active:bg-yellow-200",children:""})]}),s.jsxs("div",{className:"text-center text-sm text-slate-500 mb-3",children:[": ",Math.round(n*180/Math.PI),""]}),s.jsxs("div",{className:"flex gap-3",children:[j.includeNoSymmetry&&s.jsx("button",{onClick:S,className:"flex-1 py-3 bg-red-100 text-red-600 rounded-xl font-bold active:bg-red-200 active:scale-95",children:" "}),s.jsx("button",{onClick:_,className:`${j.includeNoSymmetry?"flex-1":"w-full"} py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg border-b-4 border-blue-800 active:scale-[0.98] active:border-b-0 transition-all`,children:" "})]})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:`px-6 py-2 rounded-full border-2 text-xl font-bold shadow-xl animate-bounce bg-white ${m.includes("")||m.includes("")?"border-green-500 text-green-700":"border-red-500 text-red-700"}`,children:m})})]})})},Bp=["#ef4444","#22c55e","#3b82f6"],uS=({label:i,color:e})=>s.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200 shadow flex flex-col items-center w-20",children:[s.jsx("div",{className:"text-xs text-slate-400 mb-1",children:i}),s.jsx("div",{className:"w-12 h-12 rounded",style:{backgroundColor:e}})]}),Pee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState({front:"",top:"",right:""}),[r,o]=E.useState(Array(6).fill("")),[l,u]=E.useState(Bp[0]),[d,f]=E.useState(""),m=()=>{const v=Bp[Math.floor(Math.random()*3)],M=Bp[Math.floor(Math.random()*3)],_=Bp[Math.floor(Math.random()*3)];a({front:v,top:M,right:_}),o(Array(6).fill("")),f("")};E.useEffect(()=>{m()},[e]);const x=v=>{const M=[...r];M[v]=l,o(M)},g=()=>{r[4]===n.front&&r[2]===n.top&&r[0]===n.right?(f(" !"),setTimeout(()=>t(v=>v+1),1500)):(f(" "),setTimeout(()=>f(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-0 right-0 flex justify-center gap-4 z-10",children:[s.jsx(uS,{label:"",color:n.front}),s.jsx(uS,{label:"",color:n.top}),s.jsx(uS,{label:"",color:n.right})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsxs("mesh",{onClick:v=>{v.stopPropagation(),v.face&&x(v.face.materialIndex)},children:[s.jsx("boxGeometry",{args:[2,2,2]}),r.map((v,M)=>s.jsx("meshStandardMaterial",{attach:`material-${M}`,color:v||"white"},M))]}),s.jsx(ht,{})]})}),s.jsxs("div",{className:"bg-white p-4 flex flex-col items-center gap-4 shadow-xl",children:[s.jsx("div",{className:"flex gap-4",children:Bp.map(v=>s.jsx("button",{onClick:()=>u(v),className:`w-12 h-12 rounded-full border-4 ${l===v?"border-slate-800 scale-110":"border-white shadow"}`,style:{backgroundColor:v}},v))}),s.jsx("button",{onClick:g,className:"bg-green-600 text-white px-8 py-2 rounded-full font-bold shadow active:scale-95",children:""})]}),d&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-green-500 text-xl font-bold text-green-700 shadow-xl animate-bounce",children:d})})]})})},Oee=({holes:i,onClick:e})=>s.jsxs("group",{children:[s.jsxs("mesh",{onClick:t=>{t.stopPropagation();const n=["x+","x-","y+","y-","z+","z-"];t.face&&e(n[t.face.materialIndex])},children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#a78bfa"})]}),i.includes("x+")&&s.jsxs("mesh",{position:[1.01,0,0],rotation:[0,Math.PI/2,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("x-")&&s.jsxs("mesh",{position:[-1.01,0,0],rotation:[0,-Math.PI/2,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("y+")&&s.jsxs("mesh",{position:[0,1.01,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("y-")&&s.jsxs("mesh",{position:[0,-1.01,0],rotation:[Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("z+")&&s.jsxs("mesh",{position:[0,0,1.01],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("z-")&&s.jsxs("mesh",{position:[0,0,-1.01],rotation:[0,Math.PI,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]})]}),zee=({holes:i})=>s.jsxs("group",{scale:.5,children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#a78bfa"})]}),i.includes("x+")&&s.jsxs("mesh",{position:[1.01,0,0],rotation:[0,Math.PI/2,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("y+")&&s.jsxs("mesh",{position:[0,1.01,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]}),i.includes("z+")&&s.jsxs("mesh",{position:[0,0,1.01],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#333"})]})]}),Gee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>e<=2?{minHoles:1,maxHoles:1,faces:["z+","y+","x+"]}:e<=5?{minHoles:1,maxHoles:2,faces:["x+","y+","z+","x-","y-","z-"]}:e<=9?{minHoles:2,maxHoles:3,faces:["x+","y+","z+","x-","y-","z-"]}:{minHoles:3,maxHoles:4,faces:["x+","y+","z+","x-","y-","z-"]},f=()=>{const M=d(),_=M.minHoles+Math.floor(Math.random()*(M.maxHoles-M.minHoles+1)),S=[...M.faces],j=[];for(let A=0;A<_&&S.length>0;A++){const C=Math.floor(Math.random()*S.length);j.push(S[C]),S.splice(C,1)}a(j),o([]),u("")};E.useEffect(()=>{f()},[e]);const m=()=>e<=2?"":e<=5?"":e<=9?"":"",x=M=>{l||(r.includes(M)?o(r.filter(_=>_!==M)):o([...r,M]))},g=()=>{const M=new Set(n),_=new Set(r);if(M.size===_.size&&[...M].every(S=>_.has(S)))u(" !"),setTimeout(()=>t(S=>S+1),1500);else{const S=[...M].filter(A=>!_.has(A)).length,j=[..._].filter(A=>!M.has(A)).length;S>0&&j>0?u(` ${S}${j}`):S>0?u(` ${S}`):j>0&&u(` ${j}`),setTimeout(()=>u(""),1500)}},v=()=>{l||o([])};return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${m()}] - ${n.length}`,children:s.jsxs("div",{className:"flex flex-col h-full bg-violet-50 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 w-32 h-32 bg-white border-2 border-violet-300 rounded-xl z-10 pointer-events-none shadow-lg overflow-hidden",children:[s.jsxs(Ue,{children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[2,5,2]}),s.jsx(zee,{holes:n}),s.jsx(ht,{autoRotate:!0})]}),s.jsx("div",{className:"absolute bottom-0 w-full text-center bg-violet-500 text-white text-xs font-bold py-1",children:" "})]}),s.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-2 rounded-xl shadow-lg z-10",children:[s.jsx("div",{className:"text-xs text-slate-500",children:""}),s.jsxs("div",{className:"text-2xl font-black text-violet-600 text-center",children:[r.length," / ",n.length]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(Oee,{holes:r,onClick:x}),s.jsx(ht,{})]})}),s.jsxs("div",{className:"bg-white p-4 border-t-2 border-violet-200",children:[s.jsx("div",{className:"text-xs text-slate-400 text-center mb-2",children:"/"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:v,className:"flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold active:bg-slate-200 active:scale-95 transition-all",children:" "}),s.jsx("button",{onClick:g,className:"flex-[2] py-3 bg-violet-500 text-white rounded-xl font-bold shadow-lg border-b-4 border-violet-700 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl border-2 border-violet-500 text-xl font-bold text-violet-700 shadow-xl animate-bounce",children:l})})]})})},x0=({pos:i,rot:e,texRot:t,onClick:n})=>{const a=document.createElement("canvas");a.width=128,a.height=128;const r=a.getContext("2d");r&&(r.fillStyle="#ecfeff",r.fillRect(0,0,128,128),r.strokeStyle="#06b6d4",r.lineWidth=20,r.translate(64,64),r.rotate(t*Math.PI/2),r.translate(-64,-64),r.beginPath(),r.moveTo(64,0),r.lineTo(64,128),r.stroke());const o=new Bf(a);return s.jsxs("mesh",{position:i,rotation:e,onClick:l=>{l.stopPropagation(),n()},children:[s.jsx("planeGeometry",{args:[.95,.95]}),s.jsx("meshStandardMaterial",{map:o})]})},Iee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0,0,0,0]),[r,o]=E.useState(""),l=()=>{a(Array(6).fill(0).map(()=>Math.floor(Math.random()*2))),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{const f=[...n];f[d]=(f[d]+1)%2,a(f),f.every(m=>m===0)&&(o(" !"),setTimeout(()=>t(m=>m+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-cyan-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[3,3,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[.98,.98,.98]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsx(x0,{pos:[.5,0,0],rot:[0,Math.PI/2,0],texRot:n[0],onClick:()=>u(0)}),s.jsx(x0,{pos:[-.5,0,0],rot:[0,-Math.PI/2,0],texRot:n[1],onClick:()=>u(1)}),s.jsx(x0,{pos:[0,.5,0],rot:[-Math.PI/2,0,0],texRot:n[2],onClick:()=>u(2)}),s.jsx(x0,{pos:[0,-.5,0],rot:[Math.PI/2,0,0],texRot:n[3],onClick:()=>u(3)}),s.jsx(x0,{pos:[0,0,.5],rot:[0,0,0],texRot:n[4],onClick:()=>u(4)}),s.jsx(x0,{pos:[0,0,-.5],rot:[0,Math.PI,0],texRot:n[5],onClick:()=>u(5)}),s.jsx(ht,{})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-cyan-500 text-xl font-bold text-cyan-700 shadow-xl animate-bounce",children:r})})]})})})},kee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(5),[r,o]=E.useState(1.5),[l,u]=E.useState(""),d=()=>{const x=20/(5+Math.random()*10);o(x),a(10),u("")};E.useEffect(()=>{d()},[e]);const f=()=>{const m=20/n;Math.abs(m-r)<.2?(u(" !"),setTimeout(()=>t(x=>x+1),1500)):(u(m<r?" ":" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-stone-100",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[10,10,20],fov:50},children:[s.jsx("ambientLight",{intensity:.2}),s.jsx("pointLight",{position:[0,0,0],intensity:1.5,castShadow:!0}),s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshBasicMaterial",{color:"#fcd34d"})]}),s.jsxs("mesh",{position:[0,0,n],castShadow:!0,children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),s.jsxs("mesh",{position:[0,0,20],rotation:[0,Math.PI,0],receiveShadow:!0,children:[s.jsx("planeGeometry",{args:[30,20]}),s.jsx("meshStandardMaterial",{color:"#e7e5e4"})]}),s.jsxs("mesh",{position:[0,0,19.9],rotation:[0,Math.PI,0],children:[s.jsx("planeGeometry",{args:[2*r,2*r]}),s.jsx("meshBasicMaterial",{color:"red",wireframe:!0})]}),s.jsx(ht,{enabled:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-stone-500 text-xl font-bold text-stone-700 shadow-xl animate-bounce",children:l})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-t-3xl shadow-xl flex flex-col gap-4 items-center",children:[s.jsx("label",{className:"text-sm font-bold text-stone-500",children:""}),s.jsx("input",{type:"range",min:"3",max:"17",step:"0.1",value:n,onChange:m=>a(Number(m.target.value)),className:"w-full h-6 bg-stone-200 rounded-full appearance-none cursor-pointer accent-stone-500"}),s.jsx("button",{onClick:f,className:"bg-stone-600 text-white px-8 py-2 rounded-full font-bold shadow active:scale-95",children:""})]})]})})},Bee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(0),[r,o]=E.useState(0),[l,u]=E.useState(0),[d,f]=E.useState({r:1,g:1,b:1}),[m,x]=E.useState(""),g=()=>{const _=[0,.5,1],S=_[Math.floor(Math.random()*3)],j=_[Math.floor(Math.random()*3)],A=_[Math.floor(Math.random()*3)];if(S===0&&j===0&&A===0)return g();f({r:S,g:j,b:A}),a(0),o(0),u(0),x("")};E.useEffect(()=>{g()},[e]);const v=()=>{Math.abs(n-d.r)<.1&&Math.abs(r-d.g)<.1&&Math.abs(l-d.b)<.1?(x(" !"),setTimeout(()=>t(S=>S+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))},M=()=>new Lt(d.r,d.g,d.b).getStyle();return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-900",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 p-2 bg-white/10 rounded backdrop-blur flex flex-col items-center",children:[s.jsx("div",{className:"text-xs text-white mb-1",children:""}),s.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white",style:{backgroundColor:M()}})]}),s.jsxs(Ue,{camera:{position:[0,0,5]},children:[s.jsx("ambientLight",{intensity:.1}),s.jsx(GY,{args:[1.5,64,64],children:s.jsx("meshStandardMaterial",{color:"white",roughness:.4,metalness:.1})}),s.jsx("pointLight",{position:[3,3,5],color:"red",intensity:n*3,distance:10}),s.jsx("pointLight",{position:[-3,3,5],color:"green",intensity:r*3,distance:10}),s.jsx("pointLight",{position:[0,-3,5],color:"blue",intensity:l*3,distance:10}),s.jsx(ht,{enableZoom:!1})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-violet-500 text-xl font-bold text-violet-700 shadow-xl animate-bounce",children:m})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-t-3xl shadow-xl flex flex-col gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-red-500 w-8",children:"R"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n,onChange:_=>a(Number(_.target.value)),className:"flex-1 accent-red-500 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-green-500 w-8",children:"G"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:r,onChange:_=>o(Number(_.target.value)),className:"flex-1 accent-green-500 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-blue-500 w-8",children:"B"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l,onChange:_=>u(Number(_.target.value)),className:"flex-1 accent-blue-500 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"})]}),s.jsx("button",{onClick:v,className:"bg-violet-600 text-white font-bold py-2 rounded-lg mt-2 shadow active:scale-95",children:""})]})]})})},Fee=({shape:i,onHit:e})=>{let t;return i==="cube"&&(t=s.jsx("boxGeometry",{args:[2,2,2]})),i==="sphere"&&(t=s.jsx("sphereGeometry",{args:[1.2]})),i==="pyramid"&&(t=s.jsx("coneGeometry",{args:[1.5,2,4]})),s.jsxs("mesh",{onClick:n=>{n.stopPropagation(),e(n.point)},visible:!1,children:[t,s.jsx("meshBasicMaterial",{color:"red"})]})},Vee=({onMiss:i})=>s.jsxs("mesh",{onClick:e=>{e.stopPropagation(),i()},scale:[-1,-1,-1],children:[s.jsx("sphereGeometry",{args:[10]}),s.jsx("meshBasicMaterial",{color:"#fce7f3",side:la})]}),Hee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("cube"),[r,o]=E.useState([]),[l,u]=E.useState(""),d=()=>{const x=["cube","sphere","pyramid"];a(x[Math.floor(Math.random()*x.length)]),o([]),u("")};E.useEffect(()=>{d()},[e]);const f=x=>{o(g=>[...g,x])},m=x=>{x===n?(u(" !"),setTimeout(()=>t(g=>g+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-pink-50",children:[s.jsxs("div",{className:"flex-1 relative cursor-crosshair",children:[s.jsxs(Ue,{camera:{position:[0,0,5]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx(Fee,{shape:n,onHit:f}),s.jsx(Vee,{onMiss:()=>{}}),r.map((x,g)=>s.jsxs("mesh",{position:x,children:[s.jsx("sphereGeometry",{args:[.05]}),s.jsx("meshBasicMaterial",{color:"#ef4444"})]},g)),s.jsx(ht,{})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-500 text-xl font-bold text-pink-700 shadow-xl animate-bounce",children:l})})]}),s.jsxs("div",{className:"bg-white p-4 flex justify-center gap-4 shadow-xl",children:[s.jsx("button",{onClick:()=>m("cube"),className:"flex flex-col items-center gap-2 p-2 rounded hover:bg-slate-100 border border-transparent hover:border-slate-200",children:s.jsx("div",{className:"w-10 h-10 border-2 border-black flex items-center justify-center text-xs",children:""})}),s.jsx("button",{onClick:()=>m("sphere"),className:"flex flex-col items-center gap-2 p-2 rounded hover:bg-slate-100 border border-transparent hover:border-slate-200",children:s.jsx("div",{className:"w-10 h-10 border-2 border-black rounded-full flex items-center justify-center text-xs",children:""})}),s.jsxs("button",{onClick:()=>m("pyramid"),className:"flex flex-col items-center gap-2 p-2 rounded hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[s.jsx("div",{className:"w-0 h-0 border-l-[20px] border-r-[20px] border-b-[35px] border-l-transparent border-r-transparent border-b-black mb-1"}),s.jsx("span",{className:"text-xs",children:""})]})]})]})})},qee=({offsets:i,activeLayer:e})=>{const t=[.6,.8,.5,.3,.5];return s.jsx("group",{children:i.map((n,a)=>s.jsx("group",{position:[n,(a-2)*.6,0],children:s.jsxs("mesh",{children:[s.jsx("cylinderGeometry",{args:[t[a],t[Math.max(0,a-1)],.55,32]}),s.jsx("meshStandardMaterial",{color:a===e?"#fbbf24":"#6366f1"})]})},a))})},Xee=({onBack:i})=>{var j;const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0,0,0]),[r,o]=E.useState(0),[l,u]=E.useState(""),d=()=>e<=2?{layers:3,tolerance:.4,maxOffset:1.5,step:.1}:e<=5?{layers:4,tolerance:.3,maxOffset:2,step:.1}:e<=9?{layers:5,tolerance:.2,maxOffset:2.5,step:.05}:{layers:5,tolerance:.1,maxOffset:3,step:.05},f=d(),m=()=>{const A=d(),C=Array(5).fill(0).map((N,R)=>{if(R>=A.layers)return 0;const O=(Math.random()-.5)*A.maxOffset*2;return Math.abs(O)<.3?O+(O>=0?.3:-.3):O});a(C),o(Math.floor(A.layers/2)),u("")};E.useEffect(()=>{m()},[e]);const x=()=>e<=2?"":e<=5?"":e<=9?"":"",g=A=>{const C=[...n];C[r]=A,a(C)},v=()=>{const A=d(),C=n.slice(0,A.layers);if(C.every(R=>Math.abs(R)<=A.tolerance))u(" !"),setTimeout(()=>t(R=>R+1),1500);else{const R=C.filter(U=>Math.abs(U)>A.tolerance).length,O=Math.max(...C.map(U=>Math.abs(U)));u(R===1?` 1 (${O.toFixed(1)})`:` ${R}`),setTimeout(()=>u(""),1500)}},_=(()=>{const A=d();return{aligned:n.slice(0,A.layers).filter(R=>Math.abs(R)<=A.tolerance).length,total:A.layers}})(),S=A=>Math.abs(n[A])<=f.tolerance;return s.jsx(tt,{title:"",onBack:i,instruction:`${e} [${x()}] - ${f.layers} (${f.tolerance})`,children:s.jsxs("div",{className:"flex flex-col h-full bg-indigo-50",children:[s.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-2 rounded-xl shadow-lg z-10",children:[s.jsx("div",{className:"text-xs text-slate-500",children:""}),s.jsxs("div",{className:"text-2xl font-black text-indigo-600 text-center",children:[_.aligned," / ",_.total]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(qee,{offsets:n,activeLayer:r}),s.jsx(ht,{enableRotate:!1})]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-3 rounded-2xl border-2 border-indigo-500 text-xl font-bold text-indigo-700 shadow-xl animate-bounce",children:l})})]}),s.jsxs("div",{className:"bg-white p-4 rounded-t-3xl shadow-xl flex flex-col gap-3",children:[s.jsx("div",{className:"flex justify-center gap-2",children:Array(f.layers).fill(0).map((A,C)=>s.jsx("button",{onClick:()=>o(C),className:`w-12 h-12 rounded-full font-bold transition-all ${r===C?"bg-amber-400 text-white shadow-lg scale-110":S(C)?"bg-green-100 text-green-600 border-2 border-green-400":"bg-slate-200 text-slate-500"}`,children:S(C)?"":C+1},C))}),s.jsxs("div",{className:"text-center text-sm",children:[s.jsxs("span",{className:"text-slate-500",children:["",r+1,": "]}),s.jsx("span",{className:`font-bold ${S(r)?"text-green-600":"text-red-500"}`,children:((j=n[r])==null?void 0:j.toFixed(2))||"0.00"}),S(r)&&s.jsx("span",{className:"text-green-600 ml-1",children:""})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>g(Math.max(-2,(n[r]||0)-f.step)),className:"w-12 h-12 bg-indigo-100 text-indigo-600 rounded-full font-bold text-xl active:bg-indigo-200",children:""}),s.jsx("input",{type:"range",min:"-2",max:"2",step:f.step,value:n[r]||0,onChange:A=>g(Number(A.target.value)),className:"flex-1 h-4 bg-slate-200 rounded-full appearance-none cursor-pointer accent-indigo-500"}),s.jsx("button",{onClick:()=>g(Math.min(2,(n[r]||0)+f.step)),className:"w-12 h-12 bg-indigo-100 text-indigo-600 rounded-full font-bold text-xl active:bg-indigo-200",children:""})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>g(0),className:"flex-1 py-2 bg-slate-100 text-slate-600 rounded-xl font-bold active:bg-slate-200",children:" "}),s.jsx("button",{onClick:v,className:"flex-[2] py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg border-b-4 border-indigo-800 active:scale-[0.98] active:border-b-0 transition-all",children:" "})]})]})]})})},Wee=({pos:i,rot:e})=>s.jsxs("group",{position:[0,0,i],rotation:[0,0,e],children:[s.jsxs("mesh",{children:[s.jsx("cylinderGeometry",{args:[1.2,1.2,.2,32]}),s.jsx("meshStandardMaterial",{color:"#34d399"})]}),s.jsxs("mesh",{position:[.6,.11,0],rotation:[Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.3,32]}),s.jsx("meshBasicMaterial",{color:"#000"})]})]}),Yee=({success:i})=>s.jsxs("mesh",{position:[.6,0,0],rotation:[Math.PI/2,0,0],children:[s.jsx("cylinderGeometry",{args:[.1,.1,8]}),s.jsx("meshBasicMaterial",{color:i?"#bef264":"#ef4444",transparent:!0,opacity:.6})]}),Zee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0,0]),[r,o]=E.useState(""),l=()=>{a([0,0,0,0].map(()=>Math.random()*Math.PI*2)),o("")};E.useEffect(()=>{l()},[e]);const u=d=>{if(r)return;const f=[...n];f[d]+=Math.PI/4,a(f),f.every(x=>{const g=(x%(Math.PI*2)+Math.PI*2)%(Math.PI*2);return g<.2||g>Math.PI*2-.2})&&(o(" !"),setTimeout(()=>t(x=>x+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-emerald-50",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsxs("group",{rotation:[.5,.5,0],children:[n.map((d,f)=>s.jsx(Wee,{pos:(f-1.5)*1.5,rot:d},f)),s.jsx(Yee,{success:!!r})]}),s.jsx(ht,{enabled:!1})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-emerald-500 text-xl font-bold text-emerald-700 shadow-xl animate-bounce",children:r})})]}),s.jsx("div",{className:"h-32 bg-white flex items-center justify-center gap-4",children:n.map((d,f)=>s.jsx("button",{onClick:()=>u(f),className:"w-14 h-14 bg-emerald-100 rounded-full border-2 border-emerald-300 text-emerald-700 font-bold active:bg-emerald-300",children:f+1},f))})]})})},dA=({ops:i})=>{let e="#fff",t=!1;return i.forEach(n=>{n==="paint_red"&&(e="#ef4444"),n==="paint_blue"&&(e="#3b82f6"),n==="sticker"&&(t=!0)}),s.jsxs("group",{children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1.5,1.5,1.5]}),s.jsx("meshStandardMaterial",{color:e})]}),t&&s.jsxs("mesh",{position:[0,0,.76],children:[s.jsx("planeGeometry",{args:[.8,.8]}),s.jsx("meshBasicMaterial",{color:"#fcd34d"})]})]})},Kee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([null,null,null]),[l,u]=E.useState(""),d=()=>{const m=["paint_red","paint_blue","sticker"],x=[m[Math.floor(Math.random()*2)],"sticker",m[Math.floor(Math.random()*2)]].slice(0,2+Math.floor(Math.random()*2));a(x),o([null,null,null]),u("")};E.useEffect(()=>{d()},[e]);const f=()=>{const m=v=>{let M="white",_=!1;return v.forEach(S=>{S==="paint_red"&&(M="red"),S==="paint_blue"&&(M="blue"),S==="sticker"&&(_=!0)}),{c:M,s:_}},x=m(n),g=m(r.filter(v=>v!==null));x.c===g.c&&x.s===g.s?(u(" !"),setTimeout(()=>t(v=>v+1),1500)):(u(" "),setTimeout(()=>u(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex h-full bg-blue-50",children:[s.jsxs("div",{className:"w-1/3 border-r-4 border-white relative",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white px-2 py-1 rounded shadow",children:""}),s.jsxs(Ue,{camera:{position:[3,3,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(dA,{ops:n}),s.jsx(ht,{autoRotate:!0})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col p-4 items-center",children:[s.jsx("div",{className:"flex-1 w-full",children:s.jsxs(Ue,{camera:{position:[3,3,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsx(dA,{ops:r.filter(m=>m!==null)}),s.jsx(ht,{})]})}),s.jsx("div",{className:"flex gap-2 mb-4",children:r.map((m,x)=>s.jsxs("button",{onClick:()=>{const g=[...r];g[x]=null,o(g)},className:"w-16 h-16 border-2 border-dashed border-slate-400 rounded flex items-center justify-center bg-white",children:[m==="paint_red"&&s.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full"}),m==="paint_blue"&&s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full"}),m==="sticker"&&s.jsx("div",{className:"w-10 h-10 bg-yellow-400 rounded text-xs flex items-center justify-center",children:""})]},x))}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsx("button",{onClick:()=>{const m=r.indexOf(null);if(m!==-1){const x=[...r];x[m]="paint_red",o(x)}},className:"px-4 py-2 bg-red-100 border border-red-300 rounded font-bold text-red-600",children:""}),s.jsx("button",{onClick:()=>{const m=r.indexOf(null);if(m!==-1){const x=[...r];x[m]="paint_blue",o(x)}},className:"px-4 py-2 bg-blue-100 border border-blue-300 rounded font-bold text-blue-600",children:""}),s.jsx("button",{onClick:()=>{const m=r.indexOf(null);if(m!==-1){const x=[...r];x[m]="sticker",o(x)}},className:"px-4 py-2 bg-yellow-100 border border-yellow-300 rounded font-bold text-yellow-600",children:""})]}),s.jsx("button",{onClick:f,className:"bg-blue-600 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:""}),l&&s.jsx("div",{className:"mt-2 font-bold text-blue-600",children:l})]})]})})},Jee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(new Set),[r,o]=E.useState(""),l=()=>{const f=new Set;for(let m=-1;m<=1;m++)for(let x=-1;x<=1;x++)for(let g=-1;g<=1;g++)Math.random()>.5&&f.add(`${m},${x},${g}`);a(f),o("")};E.useEffect(()=>{l()},[e]);const u=(f,m,x)=>{const g=`${f},${m},${x}`,v=new Set(n);v.has(g)?v.delete(g):v.add(g),a(v)},d=()=>{let f=!0;for(let m=-1;m<=1;m++)for(let x=-1;x<=1;x++)for(let g=-1;g<=1;g++){const v=`${m},${x},${g}`,M=!(m===0&&x===0&&g===0);n.has(v)!==M&&(f=!1)}f?(o(" !"),setTimeout(()=>t(m=>m+1),1500)):(o(" "),setTimeout(()=>o(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"3x3x3",children:s.jsx("div",{className:"flex flex-col h-full bg-yellow-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[5,5,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(Gi,{infiniteGrid:!1,args:[3,3],position:[0,-1.5,0],cellColor:"#eab308",sectionColor:"#ca8a04"}),s.jsx("group",{children:Array.from({length:3}).map((f,m)=>Array.from({length:3}).map((x,g)=>Array.from({length:3}).map((v,M)=>{const _=`${m-1},${g-1},${M-1}`,S=n.has(_);return s.jsxs("mesh",{position:[m-1,g-1,M-1],onClick:j=>{j.stopPropagation(),u(m-1,g-1,M-1)},children:[s.jsx("boxGeometry",{args:[.95,.95,.95]}),s.jsx("meshStandardMaterial",{color:S?"#facc15":"white",transparent:!0,opacity:S?1:.1,depthWrite:S}),S&&s.jsxs("lineSegments",{children:[s.jsx("edgesGeometry",{args:[new nn(.95,.95,.95)]}),s.jsx("lineBasicMaterial",{color:"black",transparent:!0,opacity:.2})]})]},_)})))}),s.jsx(ht,{})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-yellow-500 text-xl font-bold text-yellow-700 shadow-xl animate-bounce",children:r})}),s.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center",children:s.jsx("button",{onClick:d,className:"bg-yellow-600 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:""})})]})})})},Qee=({start:i,end:e})=>s.jsxs("mesh",{position:[(i[0]+e[0])/2,(i[1]+e[1])/2,0],rotation:[0,0,Math.atan2(e[1]-i[1],e[0]-i[0])],children:[s.jsx("boxGeometry",{args:[Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2)),.2,.2]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]}),$ee=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0]),[r,o]=E.useState(""),l=()=>{let m=-1,x=-1,g=0;const v=[[m,x,0]];return m+=2,v.push([m,x,0]),g=(g+n[0])%4,g===0?m+=2:g===1?x+=2:g===2?m-=2:x-=2,v.push([m,x,0]),g=(g+n[1])%4,g===0?m+=2:g===1?x+=2:g===2?m-=2:x-=2,v.push([m,x,0]),g=(g+n[2])%4,g===0?m+=2:g===1?x+=2:g===2?m-=2:x-=2,v.push([m,x,0]),v},u=f=>{const m=[...n];m[f]=(m[f]+1)%4,a(m)},d=l();return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex flex-col h-full bg-orange-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),d.slice(0,-1).map((f,m)=>s.jsxs("group",{children:[s.jsx(Qee,{start:f,end:d[m+1]}),m<3&&s.jsxs("mesh",{position:d[m+1],onClick:x=>{x.stopPropagation(),u(m)},children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]})]},m)),s.jsx(ht,{enabled:!1})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-orange-500 text-xl font-bold text-orange-700 shadow-xl animate-bounce",children:r})})]})})})},ete=({path:i,progress:e})=>{const t=new Q;return i.length>1&&new md(i).getPoint(e,t),s.jsxs("mesh",{position:t,children:[s.jsx("boxGeometry",{args:[.5,.3,.8]}),s.jsx("meshStandardMaterial",{color:"#3b82f6"})]})},tte=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState("left"),[r,o]=E.useState(0),[l,u]=E.useState(!1),[d,f]=E.useState("right"),[m,x]=E.useState(""),g=()=>{f(Math.random()>.5?"left":"right"),a("left"),o(0),u(!0),x("")};E.useEffect(()=>{g()},[e]);const v=()=>{const M=[new Q(0,0,5),new Q(0,0,0)];return n==="left"?M.push(new Q(-3,0,-5)):M.push(new Q(3,0,-5)),M};return Yt((M,_)=>{l&&o(S=>S>=1?(u(!1),n===d?(x(" !"),setTimeout(()=>t(j=>j+1),1500)):(x(" "),setTimeout(()=>g(),1500)),1):S+_*.2)}),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-slate-800 relative",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ue,{camera:{position:[0,10,5]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsxs("mesh",{position:[0,-.1,2.5],rotation:[-Math.PI/2,0,0],children:[s.jsx("planeGeometry",{args:[.5,5]}),s.jsx("meshBasicMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[-1.5,-.1,-2.5],rotation:[-Math.PI/2,0,-.5],children:[s.jsx("planeGeometry",{args:[.5,6]}),s.jsx("meshBasicMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[1.5,-.1,-2.5],rotation:[-Math.PI/2,0,.5],children:[s.jsx("planeGeometry",{args:[.5,6]}),s.jsx("meshBasicMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[0,0,0],onClick:()=>a(M=>M==="left"?"right":"left"),children:[s.jsx("sphereGeometry",{args:[.5]}),s.jsx("meshStandardMaterial",{color:"#facc15"}),s.jsx(gs,{center:!0,children:s.jsx("div",{className:"text-xs font-bold",children:n==="left"?"":""})})]}),s.jsxs("mesh",{position:[-3,0,-5],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:d==="left"?"#22c55e":"#9ca3af"})]}),s.jsxs("mesh",{position:[3,0,-5],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:d==="right"?"#22c55e":"#9ca3af"})]}),s.jsx(ete,{path:v(),progress:r}),s.jsx(ht,{enabled:!1})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-slate-500 text-xl font-bold text-slate-700 shadow-xl animate-bounce",children:m})})]})})})},nte=[[2,3,4,5],[2,3,4,5],[0,1,4,5],[0,1,4,5],[0,1,2,3],[0,1,2,3]],ste=({idx:i,active:e,isStart:t,onClick:n})=>{let a=[0,0,0],r=[0,0,0];const o=1.01;return i===0&&(a=[o,0,0],r=[0,Math.PI/2,0]),i===1&&(a=[-o,0,0],r=[0,-Math.PI/2,0]),i===2&&(a=[0,o,0],r=[-Math.PI/2,0,0]),i===3&&(a=[0,-o,0],r=[Math.PI/2,0,0]),i===4&&(a=[0,0,o],r=[0,0,0]),i===5&&(a=[0,0,-o],r=[0,Math.PI,0]),s.jsxs("mesh",{position:a,rotation:r,onClick:l=>{l.stopPropagation(),n()},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:t?"#4ade80":e?"#ec4899":"#e2e8f0"})]})},ite=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([4]),[r,o]=E.useState(""),l=u=>{if(r)return;const d=n[n.length-1];if(n.length>1&&u===n[n.length-2]){a(n.slice(0,-1));return}if(nte[d].includes(u)){const f=[...n,u];a(f),f.length===5&&f[4]===f[0]?(o(" !"),setTimeout(()=>t(m=>m+1),1500)):f.length>5&&(o(" "),setTimeout(()=>{a([4]),o("")},1e3))}};return E.useEffect(()=>{a([4]),o("")},[e]),s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-pink-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5]}),s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[2,2,2]}),s.jsx("meshStandardMaterial",{color:"#fff"})]}),[0,1,2,3,4,5].map(u=>s.jsx(ste,{idx:u,active:n.includes(u),isStart:n[0]===u,onClick:()=>l(u)},u)),s.jsx(ht,{})]}),r&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-pink-500 text-xl font-bold text-pink-700 shadow-xl animate-bounce",children:r})})]})})})},To=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#a855f7"],ate=({activeFace:i,onClick:e})=>s.jsxs("group",{children:[s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1.9,1.9,1.9]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),s.jsxs("mesh",{position:[1,0,0],rotation:[0,Math.PI/2,0],onClick:t=>{t.stopPropagation(),e(0)},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:To[0],emissive:To[0],emissiveIntensity:i===0?2:0})]}),s.jsxs("mesh",{position:[-1,0,0],rotation:[0,-Math.PI/2,0],onClick:t=>{t.stopPropagation(),e(1)},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:To[1],emissive:To[1],emissiveIntensity:i===1?2:0})]}),s.jsxs("mesh",{position:[0,1,0],rotation:[-Math.PI/2,0,0],onClick:t=>{t.stopPropagation(),e(2)},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:To[2],emissive:To[2],emissiveIntensity:i===2?2:0})]}),s.jsxs("mesh",{position:[0,-1,0],rotation:[Math.PI/2,0,0],onClick:t=>{t.stopPropagation(),e(3)},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:To[3],emissive:To[3],emissiveIntensity:i===3?2:0})]}),s.jsxs("mesh",{position:[0,0,1],rotation:[0,0,0],onClick:t=>{t.stopPropagation(),e(4)},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:To[4],emissive:To[4],emissiveIntensity:i===4?2:0})]}),s.jsxs("mesh",{position:[0,0,-1],rotation:[0,Math.PI,0],onClick:t=>{t.stopPropagation(),e(5)},children:[s.jsx("planeGeometry",{args:[1.8,1.8]}),s.jsx("meshStandardMaterial",{color:To[5],emissive:To[5],emissiveIntensity:i===5?2:0})]})]}),rte=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([]),[r,o]=E.useState([]),[l,u]=E.useState(null),[d,f]=E.useState(!1),[m,x]=E.useState(""),g=()=>{const _=3+Math.floor(e/2),S=Array(_).fill(0).map(()=>Math.floor(Math.random()*6));a(S),o([]),x(" ..."),v(S)},v=async _=>{f(!0),u(null),await new Promise(S=>setTimeout(S,1e3));for(let S of _)u(S),await new Promise(j=>setTimeout(j,600)),u(null),await new Promise(j=>setTimeout(j,200));f(!1),x(" ")};E.useEffect(()=>{g()},[e]);const M=_=>{if(d||m.includes("")||m.includes(""))return;u(_),setTimeout(()=>u(null),200);const S=[...r,_];o(S);const j=S.length-1;if(S[j]!==n[j]){x(" !"),setTimeout(()=>{o([]),x(" ..."),v(n)},1500);return}S.length===n.length&&(x(" !"),setTimeout(()=>t(A=>A+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:m||"...",children:s.jsx("div",{className:"flex h-full bg-indigo-900",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[4,4,6]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10]}),s.jsx(ate,{activeFace:l,onClick:M}),s.jsx(ht,{autoRotate:d,autoRotateSpeed:2})]}),s.jsx("div",{className:"absolute bottom-8 w-full text-center text-indigo-300 pointer-events-none text-sm",children:d?"...":""})]})})})},ote=({walls:i,hole:e,tilt:t})=>s.jsxs("group",{rotation:[t.x,0,t.z],children:[s.jsxs("mesh",{position:[0,-.1,0],rotation:[-Math.PI/2,0,0],children:[s.jsx("boxGeometry",{args:[10,10,.2]}),s.jsx("meshStandardMaterial",{color:"#f1f5f9"})]}),i.map((n,a)=>s.jsxs("mesh",{position:[n[0],.5,n[1]],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]},a)),s.jsxs("mesh",{position:[0,.5,-5.5],children:[s.jsx("boxGeometry",{args:[12,1,1]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),s.jsxs("mesh",{position:[0,.5,5.5],children:[s.jsx("boxGeometry",{args:[12,1,1]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),s.jsxs("mesh",{position:[-5.5,.5,0],children:[s.jsx("boxGeometry",{args:[1,1,12]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),s.jsxs("mesh",{position:[5.5,.5,0],children:[s.jsx("boxGeometry",{args:[1,1,12]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),s.jsxs("mesh",{position:[e[0],.01,e[1]],rotation:[-Math.PI/2,0,0],children:[s.jsx("circleGeometry",{args:[.6]}),s.jsx("meshBasicMaterial",{color:"#000"})]})]}),lte=({pos:i})=>s.jsxs("mesh",{position:i,children:[s.jsx("sphereGeometry",{args:[.4]}),s.jsx("meshStandardMaterial",{color:"#ef4444"})]}),cte=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState({x:0,z:0}),[r,o]=E.useState(new Q(0,.4,0)),[l,u]=E.useState(new Q(0,0,0)),[d,f]=E.useState([]),[m,x]=E.useState([0,0]),[g,v]=E.useState(""),[M,_]=E.useState(!0),S=()=>{const A=[];for(let C=0;C<10;C++){const N=Math.floor(Math.random()*9)-4,R=Math.floor(Math.random()*9)-4;(Math.abs(N)>1||Math.abs(R)>1)&&A.push([N,R])}f(A),x([4,4]),o(new Q(-4,.4,-4)),u(new Q(0,0,0)),a({x:0,z:0}),_(!0),v("")};E.useEffect(()=>{S()},[e]),E.useEffect(()=>{if(!M)return;const A=setInterval(()=>{o(C=>{const N=l.clone();N.z+=Math.sin(n.x)*.02,N.x-=Math.sin(n.z)*.02,N.multiplyScalar(.98);const R=C.clone().add(N);(R.x>5||R.x<-5)&&(N.x*=-.5,R.x=C.x),(R.z>5||R.z<-5)&&(N.z*=-.5,R.z=C.z);const O=Math.round(R.x),U=Math.round(R.z);if(d.some(V=>V[0]===O&&V[1]===U))return N.multiplyScalar(-.5),C;const z=R.x-m[0],I=R.z-m[1];return z*z+I*I<.5?(_(!1),v(" !"),setTimeout(()=>t(V=>V+1),1500),new Q(m[0],-5,m[1])):(u(N),R)})},16);return()=>clearInterval(A)},[M,n,l,d,m]);const j=(A,C)=>{a(N=>({x:Math.max(-.5,Math.min(.5,N.x+A)),z:Math.max(-.5,Math.min(.5,N.z+C))}))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-800",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,10,8],fov:50},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsxs("group",{rotation:[n.x,0,n.z],children:[s.jsx(ote,{walls:d,hole:m,tilt:{x:0,z:0}})," ",s.jsx(lte,{pos:r})]}),s.jsx(ht,{enabled:!1})]}),g&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-teal-500 text-xl font-bold text-teal-700 shadow-xl animate-bounce",children:g})})]}),s.jsxs("div",{className:"h-40 bg-slate-900 flex items-center justify-center gap-4 border-t border-slate-700",children:[s.jsx("button",{className:"p-4 bg-slate-700 rounded-full active:bg-slate-600 shadow",onClick:()=>j(-.1,0),children:s.jsx(q0,{className:"text-white"})}),s.jsxs("div",{className:"flex gap-12",children:[s.jsx("button",{className:"p-4 bg-slate-700 rounded-full active:bg-slate-600 shadow",onClick:()=>j(0,.1),children:s.jsx(ud,{className:"text-white"})}),s.jsx("button",{className:"p-4 bg-slate-700 rounded-full active:bg-slate-600 shadow",onClick:()=>j(0,-.1),children:s.jsx(kx,{className:"text-white"})})]}),s.jsx("button",{className:"p-4 bg-slate-700 rounded-full active:bg-slate-600 shadow",onClick:()=>j(.1,0),children:s.jsx(tu,{className:"text-white"})})]})]})})},ute=()=>s.jsxs("group",{children:[s.jsxs("mesh",{position:[-3,0,0],children:[s.jsx("boxGeometry",{args:[2,.5,2]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[-3,.5,0],children:[s.jsx("sphereGeometry",{args:[.3]}),s.jsx("meshStandardMaterial",{color:"#facc15"}),s.jsx(gs,{center:!0,position:[0,.5,0],children:s.jsx("div",{className:"text-xl",children:""})})]}),s.jsxs("mesh",{position:[3,0,2],children:[" ",s.jsx("boxGeometry",{args:[2,.5,2]}),s.jsx("meshStandardMaterial",{color:"#64748b"})]}),s.jsxs("mesh",{position:[3,.5,2],children:[s.jsx("boxGeometry",{args:[.5,.5,.5]}),s.jsx("meshStandardMaterial",{color:"#4ade80"}),s.jsx(gs,{center:!0,position:[0,.5,0],children:s.jsx("div",{className:"text-xl",children:""})})]}),s.jsxs("mesh",{position:[0,-2,1],children:[" ",s.jsx("boxGeometry",{args:[4,.5,2]}),s.jsx("meshStandardMaterial",{color:"#f97316"})]})]}),dte=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState(""),r=E.useRef(null),o=()=>{if(!r.current)return;r.current.getAzimuthalAngle(),r.current.getPolarAngle();const u=r.current.object.position.clone().normalize(),d=new Q(0,1,.5).normalize();u.dot(d)>.95&&(a(" !"),setTimeout(()=>t(f=>f+1),1500))},l=()=>(Yt(()=>{n||o()}),null);return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsx("div",{className:"flex h-full bg-sky-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[5,5,5]},children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsx(ute,{}),s.jsx(ht,{ref:r}),s.jsx(l,{})]}),n&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-sky-500 text-xl font-bold text-sky-700 shadow-xl animate-bounce",children:n})})]})})})},fte=({color:i,x:e,y:t,onMove:n})=>{const a=E.useRef(!1);return s.jsx("div",{className:"absolute w-32 h-32 rounded-full border-4 border-white shadow-xl cursor-move backdrop-brightness-100 mix-blend-multiply flex items-center justify-center",style:{left:e,top:t,backgroundColor:i,opacity:.9},onPointerDown:r=>{a.current=!0,r.currentTarget.setPointerCapture(r.pointerId)},onPointerMove:r=>{a.current&&n(r.movementX,r.movementY)},onPointerUp:r=>{a.current=!1,r.currentTarget.releasePointerCapture(r.pointerId)},children:s.jsx("span",{className:"text-white font-bold opacity-50 select-none",children:""})})},hte=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState({x:100,y:100}),[r,o]=E.useState("circle"),[l,u]=E.useState("red"),[d,f]=E.useState("#ef4444"),[m,x]=E.useState(""),g=()=>{o(["circle","square","triangle"][Math.floor(Math.random()*3)]),u("red"),f("#3b82f6"),x("")};E.useEffect(()=>{g()},[e]);const v=()=>s.jsxs("svg",{className:"w-full h-full bg-white",children:[Array.from({length:50}).map((_,S)=>s.jsx("line",{x1:Math.random()*100+"%",y1:Math.random()*100+"%",x2:Math.random()*100+"%",y2:Math.random()*100+"%",stroke:"#3b82f6",strokeWidth:"2"},S)),r==="circle"&&s.jsx("circle",{cx:"50%",cy:"50%",r:"50",stroke:"#ef4444",strokeWidth:"5",fill:"none"}),r==="square"&&s.jsx("rect",{x:"35%",y:"35%",width:"30%",height:"30%",stroke:"#ef4444",strokeWidth:"5",fill:"none"}),r==="triangle"&&s.jsx("polygon",{points:"150,100 200,200 100,200",transform:"translate(50,50)",stroke:"#ef4444",strokeWidth:"5",fill:"none"})]}),M=_=>{_===r?(x(" !"),setTimeout(()=>t(S=>S+1),1500)):(x(" "),setTimeout(()=>x(""),1e3))};return s.jsx(tt,{title:"",onBack:i,instruction:"",children:s.jsxs("div",{className:"flex flex-col h-full bg-slate-100 relative overflow-hidden",children:[s.jsxs("div",{className:"flex-1 relative m-4 border-4 border-slate-300 bg-white shadow-inner",children:[v(),s.jsx(fte,{color:d,x:n.x,y:n.y,onMove:(_,S)=>a(j=>({x:j.x+_,y:j.y+S}))})]}),m&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-30",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-rose-500 text-xl font-bold text-rose-700 shadow-xl animate-bounce",children:m})}),s.jsxs("div",{className:"h-32 bg-white flex items-center justify-center gap-8",children:[s.jsx("button",{onClick:()=>M("circle"),className:"p-4 rounded-xl border hover:bg-rose-50",children:" "}),s.jsx("button",{onClick:()=>M("square"),className:"p-4 rounded-xl border hover:bg-rose-50",children:" "}),s.jsx("button",{onClick:()=>M("triangle"),className:"p-4 rounded-xl border hover:bg-rose-50",children:" "})]})]})})},mte=({index:i,value:e,onClick:t})=>{const n=E.useRef(null),a=e*(Math.PI*2/10);return Yt(()=>{n.current&&(n.current.rotation.x=ks.lerp(n.current.rotation.x,a,.1))}),s.jsxs("group",{position:[i*1.5-2.25,0,0],children:[s.jsxs("group",{ref:n,children:[s.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[s.jsx("cylinderGeometry",{args:[1,1,1,32]}),s.jsx("meshStandardMaterial",{color:"#475569"})]}),Array.from({length:10}).map((r,o)=>{const l=o*(Math.PI*2/10);return s.jsx("group",{rotation:[l,0,0],position:[0,0,0],children:s.jsx(xs,{position:[0,0,1.05],fontSize:.5,color:"white",anchorX:"center",anchorY:"middle",rotation:[0,0,0],children:(10-o)%10})},o)})]}),s.jsxs("mesh",{position:[0,1.5,0],onClick:()=>t(1),children:[s.jsx("coneGeometry",{args:[.3,.5]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]}),s.jsxs("mesh",{position:[0,-1.5,0],rotation:[Math.PI,0,0],onClick:()=>t(-1),children:[s.jsx("coneGeometry",{args:[.3,.5]}),s.jsx("meshStandardMaterial",{color:"#fcd34d"})]})]})},pte=({onBack:i})=>{const[e,t]=E.useState(1),[n,a]=E.useState([0,0,0,0]),[r,o]=E.useState(10),[l,u]=E.useState(""),d=()=>{const m=10+Math.floor(Math.random()*10);o(m),a([0,0,0,0]),u("")};E.useEffect(()=>{d()},[e]);const f=(m,x)=>{if(l)return;const g=[...n];g[m]=(g[m]+x+10)%10,a(g),g.reduce((M,_)=>M+_,0)===r&&(u(" !"),setTimeout(()=>t(M=>M+1),1500))};return s.jsx(tt,{title:"",onBack:i,instruction:`4${r}`,children:s.jsx("div",{className:"flex h-full bg-amber-50",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Ue,{camera:{position:[0,0,8]},children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,10,5]}),s.jsxs("mesh",{position:[0,0,-1.5],children:[s.jsx("boxGeometry",{args:[7,3,1]}),s.jsx("meshStandardMaterial",{color:"#333"})]}),n.map((m,x)=>s.jsx(mte,{index:x,value:m,onClick:g=>f(x,g)},x)),s.jsx(ht,{enabled:!1})]}),s.jsxs("div",{className:"absolute bottom-8 w-full text-center text-amber-700 text-xl font-bold",children:[": ",n.reduce((m,x)=>m+x,0)]}),l&&s.jsx("div",{className:"absolute top-1/2 left-0 right-0 flex justify-center pointer-events-none z-20",children:s.jsx("div",{className:"bg-white px-6 py-2 rounded-full border-2 border-amber-500 text-xl font-bold text-amber-700 shadow-xl animate-bounce",children:l})})]})})})},fA=()=>{const[i,e]=E.useState(ne.HOME),[t,n]=E.useState(null),[a,r]=E.useState(null),o=x=>{n(x),e(ne.CATEGORY_LIST)},l=()=>{n(null),r(null),e(ne.HOME)},u=x=>{r(x),e(ne.ARTICLE_DETAIL)},d=()=>{r(null),e(ne.HOME)},f=()=>{e(t?ne.CATEGORY_LIST:ne.HOME)},m=()=>{switch(i){case ne.GAME_1:return s.jsx(MZ,{onBack:f});case ne.GAME_2:return s.jsx(wZ,{onBack:f});case ne.GAME_3:return s.jsx(EZ,{onBack:f});case ne.GAME_4:return s.jsx(NZ,{onBack:f});case ne.GAME_5:return s.jsx(DZ,{onBack:f});case ne.GAME_6:return s.jsx(UZ,{onBack:f});case ne.GAME_7:return s.jsx(PZ,{onBack:f});case ne.GAME_8:return s.jsx(IZ,{onBack:f});case ne.GAME_9:return s.jsx(FZ,{onBack:f});case ne.GAME_10:return s.jsx(HZ,{onBack:f});case ne.GAME_11:return s.jsx(WZ,{onBack:f});case ne.GAME_12:return s.jsx(KZ,{onBack:f});case ne.GAME_13:return s.jsx($Z,{onBack:f});case ne.GAME_14:return s.jsx(sK,{onBack:f});case ne.GAME_15:return s.jsx(aK,{onBack:f});case ne.GAME_16:return s.jsx(lK,{onBack:f});case ne.GAME_17:return s.jsx(dK,{onBack:f});case ne.GAME_18:return s.jsx(pK,{onBack:f});case ne.GAME_19:return s.jsx(vK,{onBack:f});case ne.GAME_20:return s.jsx(SK,{onBack:f});case ne.GAME_21:return s.jsx(wK,{onBack:f});case ne.GAME_22:return s.jsx(TK,{onBack:f});case ne.GAME_23:return s.jsx(NK,{onBack:f});case ne.GAME_24:return s.jsx(LK,{onBack:f});case ne.GAME_25:return s.jsx(PK,{onBack:f});case ne.GAME_26:return s.jsx(zK,{onBack:f});case ne.GAME_27:return s.jsx(GK,{onBack:f});case ne.GAME_28:return s.jsx(BK,{onBack:f});case ne.GAME_29:return s.jsx(FK,{onBack:f});case ne.GAME_30:return s.jsx(VK,{onBack:f});case ne.GAME_31:return s.jsx(HK,{onBack:f});case ne.GAME_32:return s.jsx(YK,{onBack:f});case ne.GAME_33:return s.jsx(ZK,{onBack:f});case ne.GAME_34:return s.jsx(JK,{onBack:f});case ne.GAME_35:return s.jsx(eJ,{onBack:f});case ne.GAME_36:return s.jsx(tJ,{onBack:f});case ne.GAME_37:return s.jsx(nJ,{onBack:f});case ne.GAME_38:return s.jsx(iJ,{onBack:f});case ne.GAME_39:return s.jsx(oJ,{onBack:f});case ne.GAME_40:return s.jsx(uJ,{onBack:f});case ne.GAME_41:return s.jsx(hJ,{onBack:f});case ne.GAME_42:return s.jsx(pJ,{onBack:f});case ne.GAME_43:return s.jsx(vJ,{onBack:f});case ne.GAME_44:return s.jsx(MJ,{onBack:f});case ne.GAME_45:return s.jsx(SJ,{onBack:f});case ne.GAME_46:return s.jsx(jJ,{onBack:f});case ne.GAME_47:return s.jsx(TJ,{onBack:f});case ne.GAME_48:return s.jsx(NJ,{onBack:f});case ne.GAME_49:return s.jsx(LJ,{onBack:f});case ne.GAME_50:return s.jsx(PJ,{onBack:f});case ne.GAME_51:return s.jsx(GJ,{onBack:f});case ne.GAME_52:return s.jsx(BJ,{onBack:f});case ne.GAME_53:return s.jsx(VJ,{onBack:f});case ne.GAME_54:return s.jsx(XJ,{onBack:f});case ne.GAME_55:return s.jsx(ZJ,{onBack:f});case ne.GAME_56:return s.jsx($J,{onBack:f});case ne.GAME_57:return s.jsx(nQ,{onBack:f});case ne.GAME_58:return s.jsx(aQ,{onBack:f});case ne.GAME_59:return s.jsx(rQ,{onBack:f});case ne.GAME_60:return s.jsx(lQ,{onBack:f});case ne.GAME_61:return s.jsx(uQ,{onBack:f});case ne.GAME_62:return s.jsx(hQ,{onBack:f});case ne.GAME_63:return s.jsx(xQ,{onBack:f});case ne.GAME_64:return s.jsx(vQ,{onBack:f});case ne.GAME_65:return s.jsx(bQ,{onBack:f});case ne.GAME_66:return s.jsx(_Q,{onBack:f});case ne.GAME_67:return s.jsx(jQ,{onBack:f});case ne.GAME_68:return s.jsx(AQ,{onBack:f});case ne.GAME_69:return s.jsx(NQ,{onBack:f});case ne.GAME_70:return s.jsx(LQ,{onBack:f});case ne.GAME_71:return s.jsx(PQ,{onBack:f});case ne.GAME_72:return s.jsx(IQ,{onBack:f});case ne.GAME_73:return s.jsx(BQ,{onBack:f});case ne.GAME_74:return s.jsx(VQ,{onBack:f});case ne.GAME_75:return s.jsx(qQ,{onBack:f});case ne.GAME_76:return s.jsx(XQ,{onBack:f});case ne.GAME_77:return s.jsx(WQ,{onBack:f});case ne.GAME_78:return s.jsx(ZQ,{onBack:f});case ne.GAME_79:return s.jsx(KQ,{onBack:f});case ne.GAME_80:return s.jsx(QQ,{onBack:f});case ne.GAME_81:return s.jsx(e$,{onBack:f});case ne.GAME_82:return s.jsx(n$,{onBack:f});case ne.GAME_83:return s.jsx(a$,{onBack:f});case ne.GAME_84:return s.jsx(r$,{onBack:f});case ne.GAME_85:return s.jsx(l$,{onBack:f});case ne.GAME_86:return s.jsx(u$,{onBack:f});case ne.GAME_87:return s.jsx(f$,{onBack:f});case ne.GAME_88:return s.jsx(x$,{onBack:f});case ne.GAME_89:return s.jsx(g$,{onBack:f});case ne.GAME_90:return s.jsx(y$,{onBack:f});case ne.GAME_91:return s.jsx(S$,{onBack:f});case ne.GAME_92:return s.jsx(j$,{onBack:f});case ne.GAME_93:return s.jsx(T$,{onBack:f});case ne.GAME_94:return s.jsx(A$,{onBack:f});case ne.GAME_95:return s.jsx(C$,{onBack:f});case ne.GAME_96:return s.jsx(D$,{onBack:f});case ne.GAME_97:return s.jsx(L$,{onBack:f});case ne.GAME_98:return s.jsx(O$,{onBack:f});case ne.GAME_99:return s.jsx(G$,{onBack:f});case ne.GAME_100:return s.jsx(I$,{onBack:f});case ne.GAME_101:return s.jsx(k$,{onBack:f});case ne.GAME_102:return s.jsx(V$,{onBack:f});case ne.GAME_103:return s.jsx(H$,{onBack:f});case ne.GAME_104:return s.jsx(X$,{onBack:f});case ne.GAME_105:return s.jsx(W$,{onBack:f});case ne.GAME_106:return s.jsx(Z$,{onBack:f});case ne.GAME_107:return s.jsx(K$,{onBack:f});case ne.GAME_108:return s.jsx(Q$,{onBack:f});case ne.GAME_109:return s.jsx(eee,{onBack:f});case ne.GAME_110:return s.jsx(tee,{onBack:f});case ne.GAME_111:return s.jsx(nee,{onBack:f});case ne.GAME_112:return s.jsx(see,{onBack:f});case ne.GAME_113:return s.jsx(iee,{onBack:f});case ne.GAME_114:return s.jsx(ree,{onBack:f});case ne.GAME_115:return s.jsx(lee,{onBack:f});case ne.GAME_116:return s.jsx(uee,{onBack:f});case ne.GAME_117:return s.jsx(hee,{onBack:f});case ne.GAME_118:return s.jsx(mee,{onBack:f});case ne.GAME_119:return s.jsx(xee,{onBack:f});case ne.GAME_120:return s.jsx(yee,{onBack:f});case ne.GAME_121:return s.jsx(Mee,{onBack:f});case ne.GAME_122:return s.jsx(_ee,{onBack:f});case ne.GAME_123:return s.jsx(wee,{onBack:f});case ne.GAME_124:return s.jsx(jee,{onBack:f});case ne.GAME_125:return s.jsx(Eee,{onBack:f});case ne.GAME_126:return s.jsx(Tee,{onBack:f});case ne.GAME_127:return s.jsx(Nee,{onBack:f});case ne.GAME_128:return s.jsx(Uee,{onBack:f});case ne.GAME_129:return s.jsx(Pee,{onBack:f});case ne.GAME_130:return s.jsx(Gee,{onBack:f});case ne.GAME_131:return s.jsx(Iee,{onBack:f});case ne.GAME_132:return s.jsx(kee,{onBack:f});case ne.GAME_133:return s.jsx(Bee,{onBack:f});case ne.GAME_134:return s.jsx(Hee,{onBack:f});case ne.GAME_135:return s.jsx(Xee,{onBack:f});case ne.GAME_136:return s.jsx(Zee,{onBack:f});case ne.GAME_137:return s.jsx(Kee,{onBack:f});case ne.GAME_138:return s.jsx(Jee,{onBack:f});case ne.GAME_139:return s.jsx($ee,{onBack:f});case ne.GAME_140:return s.jsx(tte,{onBack:f});case ne.GAME_141:return s.jsx(ite,{onBack:f});case ne.GAME_142:return s.jsx(rte,{onBack:f});case ne.GAME_143:return s.jsx(cte,{onBack:f});case ne.GAME_144:return s.jsx(dte,{onBack:f});case ne.GAME_145:return s.jsx(hte,{onBack:f});case ne.GAME_146:return s.jsx(pte,{onBack:f});case ne.ARTICLE_DETAIL:return a?s.jsx(vI,{articleId:a,onBack:d}):s.jsx(V2,{onSelectCategory:o,onSelectArticle:u});case ne.CATEGORY_LIST:return t?s.jsx(hI,{categoryId:t,onSelectGame:e,onBack:l}):s.jsx(V2,{onSelectCategory:o,onSelectArticle:u});case ne.HOME:default:return s.jsx(V2,{onSelectCategory:o,onSelectArticle:u})}};return s.jsx("div",{className:"w-full h-full text-slate-800 antialiased selection:bg-blue-200",children:m()})},xte=[{id:"training",label:"",emoji:""},{id:"3d",label:"",emoji:""}];function gte(){const[i,e]=E.useState("training"),[t,n]=E.useState(!0);return E.useEffect(()=>{const a=setTimeout(()=>{n(!1)},500);return()=>clearTimeout(a)},[]),t?s.jsxs("div",{className:"min-h-screen bg-stone-100 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-brand-pink via-brand-yellow to-brand-blue mb-4",children:""}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 font-bold",children:[s.jsx("div",{className:"w-2 h-2 bg-brand-pink rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-brand-yellow rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-brand-blue rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),s.jsxs("div",{className:"hidden",children:[s.jsx(u5,{}),s.jsx(fA,{})]})]}):s.jsxs("div",{className:"min-h-screen bg-stone-100 flex flex-col",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white border-b-2 border-black shadow-md",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4",children:s.jsx("div",{className:"flex justify-center gap-2 py-3",children:xte.map(a=>s.jsxs("button",{onClick:()=>e(a.id),className:`
                  px-6 py-2.5 rounded-full font-black text-base transition-all border-2 border-black
                  ${i===a.id?"bg-gradient-to-r from-brand-pink via-brand-yellow to-brand-blue text-white shadow-neo scale-105":"bg-white text-gray-600 hover:bg-gray-100 hover:scale-105"}
                `,children:[s.jsx("span",{className:"mr-2",children:a.emoji}),a.label]},a.id))})})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:i==="training"?"block":"hidden",children:s.jsx(u5,{})}),s.jsx("div",{className:i==="3d"?"block":"hidden",children:s.jsx(fA,{})})]})]})}const i6=document.getElementById("root");if(!i6)throw new Error("Could not find root element to mount to");const vte=rD.createRoot(i6);vte.render(s.jsx(Uo.StrictMode,{children:s.jsx(gte,{})}));
