<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬3å…³ - èŠ‚å¥æ¨¡ä»¿</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#e5e5f7 0%,#ffe0e3 100%);}
        .simon-area{max-width:340px;margin:30px auto;padding:20px 5px;background:#fff;border-radius:18px;box-shadow:0 2px 16px #cfd8dc80;text-align:center;}
        .simon-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:18px;justify-content:center;}
        .simon-btn{width:85px;height:85px;border-radius:18px;cursor:pointer;box-shadow:0 2px 10px #bababa;transition:.15s;outline:none;border:none;display:flex;align-items:center;justify-content:center;font-size:45px;}
        .simon-btn:active, .simon-btn.lit{filter:brightness(1.3) drop-shadow(0 0 6px #fff6);transform:scale(1.15);}
        .check-btn{width:95%;margin:20px auto 0;display:block;padding:11px;background:#ffe082;border:none;border-radius:12px;font-size:17px;font-weight:bold;color:#ad7a00;cursor:pointer;box-shadow:0 2px 6px #ffd97a;}
        .tip{margin-bottom:15px;color:#556;font-size:16px;font-weight:bold;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">èŠ‚å¥æ¨¡ä»¿ â€¢ ç¬¬3å…³</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">æ›´å¤æ‚çš„èŠ‚å¥ï¼é›†ä¸­æ³¨æ„åŠ›ï¼</div>
        <div class="simon-area">
            <div class="tip" id="simonTip">è¯·çœ‹åŠ¨ç”»...</div>
            <div class="simon-grid">
                <button class="simon-btn" id="btn0" style="background:#ffd54f;">ğŸ¥</button>
                <button class="simon-btn" id="btn1" style="background:#81d4fa;">ğŸ³</button>
                <button class="simon-btn" id="btn2" style="background:#ff8a65;">ğŸ¦Š</button>
                <button class="simon-btn" id="btn3" style="background:#c5e1a5;">ğŸ¸</button>
            </div>
            <button class="check-btn" id="checkBtn" style="display:none" onclick="checkResult()">âœ… æ£€æŸ¥ç­”æ¡ˆ</button>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2 id="resultTitle"></h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="timeUsed"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="nextLevel('game14',3)">â¡ï¸ ä¸‹ä¸€å…³</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
const sequence=[0,2,1,3,2,0];
let input=[],startTime,timerInt,playing=false;
function lightBtn(idx){let btn=document.getElementById('btn'+idx);btn.classList.add('lit');playSound('click');setTimeout(()=>btn.classList.remove('lit'),320);}
function playSeq(seq){playing=true;let tip=document.getElementById('simonTip');tip.textContent='çœ‹å¥½äº†...';seq.forEach((id,i)=>setTimeout(()=>{lightBtn(id);if(i===seq.length-1)setTimeout(()=>{tip.textContent='å¼€å§‹æ¨¡ä»¿ï¼';document.getElementById('checkBtn').style.display='block';playing=false;},400);},620*i));}
function btnClick(idx){if(playing)return;playSound('click');input.push(idx);lightBtn(idx);}
function checkResult(){let ok=input.length===sequence.length&&input.every((v,i)=>v===sequence[i]);let used=Math.floor((Date.now()-startTime)/1000),stars=3;if(!ok){stars=1;showFinal(false,used,stars);return;}if(used>22)stars=1;else if(used>15)stars=2;showFinal(true,used,stars);updateLevelProgress('game14',3,stars);}
function showFinal(ok,used,stars){showModal('resultModal');document.getElementById('resultTitle').textContent=ok?'ğŸ¶ è®°å¿†è¶…å¼ºï¼':'âŒ è¯•è¯•çœ‹';document.getElementById('resultMsg').textContent=ok?'é¡ºåºå®Œç¾ï¼':'å¤šçœ‹å‡ éåŠ¨ç”»~';document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);document.getElementById('timeUsed').textContent=`ç”¨æ—¶: ${used}ç§’`;playSound(ok?'win':'wrong');}
window.onload=function(){input=[];for(let i=0;i<4;++i)document.getElementById('btn'+i).onclick=()=>btnClick(i);playSeq(sequence);startTime=Date.now();if(timerInt)clearInterval(timerInt);timerInt=setInterval(()=>{document.getElementById('timer').textContent=`â±ï¸ ${Math.floor((Date.now()-startTime)/1000)}ç§’`;},1000);}
</script>
</body>
</html>

