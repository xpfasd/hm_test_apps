<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬3å…³ - é¡ºåºç‚¹å‡»</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#fce4ec 0%,#f3e5f5 100%);}
        .sequence-area{max-width:400px;margin:18px auto;background:#fff;border-radius:18px;box-shadow:0 2px 16px #f48fb180;padding:16px 6px;}
        .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:14px 0;}
        .cell{width:100%;aspect-ratio:1;border-radius:10px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:28px;cursor:pointer;transition:.2s;box-shadow:0 2px 8px #ddd;}
        .cell:active{transform:scale(0.88);}
        .cell.correct{background:#c8e6c9;animation:popIn .4s;}
        .cell.wrong{background:#ffccbc;animation:shake .5s;}
        .tip{text-align:center;margin:8px 0;font-size:14px;color:#666;font-weight:bold;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">é¡ºåºç‚¹å‡» â€¢ ç¬¬3å…³</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">æŒ‘æˆ˜16ä¸ªæ•°å­—ï¼æŒ‰é¡ºåºç‚¹å‡»ï¼</div>
        <div class="sequence-area">
            <div class="tip" id="tip">ç‚¹å‡»æœ€å°çš„æ•°å­—å¼€å§‹ï¼</div>
            <div class="grid" id="grid"></div>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2 id="resultTitle"></h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="timeUsed"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="nextLevel('game18',3)">â¡ï¸ ä¸‹ä¸€å…³</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
const nums=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];
let expected=1,startTime,timerInt;
function shuffle(arr){return arr.sort(()=>Math.random()-.5)}
function renderGrid(){let grid=document.getElementById('grid');grid.innerHTML='';shuffle(nums).forEach(n=>{let div=document.createElement('div');div.className='cell';div.textContent=n;div.onclick=()=>clickCell(n,div);grid.appendChild(div);});}
function clickCell(n,dom){if(n===expected){dom.classList.add('correct');playSound('correct');expected++;document.getElementById('tip').textContent=`ä¸‹ä¸€ä¸ª: ${expected}`;if(expected>16){setTimeout(()=>{let used=Math.floor((Date.now()-startTime)/1000),stars=3;if(used>28)stars=1;else if(used>20)stars=2;updateLevelProgress('game18',3,stars);document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);document.getElementById('resultTitle').textContent='ğŸ‰ é¡ºåºé«˜æ‰‹ï¼';document.getElementById('resultMsg').textContent='é¡ºåºå®Œå…¨æ­£ç¡®ï¼';document.getElementById('timeUsed').textContent=`ç”¨æ—¶: ${used}ç§’`;showModal('resultModal');playSound('win');},600);}}else{dom.classList.add('wrong');playSound('wrong');setTimeout(()=>dom.classList.remove('wrong'),500);}}
window.onload=function(){renderGrid();startTime=Date.now();if(timerInt)clearInterval(timerInt);timerInt=setInterval(()=>{document.getElementById('timer').textContent=`â±ï¸ ${Math.floor((Date.now()-startTime)/1000)}ç§’`;},1000);}
</script>
</body>
</html>

