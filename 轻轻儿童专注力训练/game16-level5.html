<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬5å…³ - æ‹–æ‹½å½’ç±»</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#e8f5e9 0%,#fff9c4 100%);}
        .classify-area{max-width:460px;margin:10px auto;background:#fff;border-radius:18px;box-shadow:0 2px 16px #c8e6c980;padding:10px 2px;}
        .categories{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin:6px 0;}
        .category-box{min-height:55px;border:3px dashed#43a047;border-radius:6px;padding:3px 1px;text-align:center;background:#f1f8e9;}
        .category-title{font-size:12px;font-weight:bold;color:#558b2f;margin-bottom:2px;}
        .items-pool{display:grid;grid-template-columns:repeat(6,1fr);gap:4px;margin-top:10px;}
        .item{width:100%;aspect-ratio:1;border-radius:5px;background:#fff;box-shadow:0 2px 8px #ddd;display:flex;align-items:center;justify-content:center;font-size:18px;cursor:move;transition:.2s;}
        .item:active{transform:scale(0.82);opacity:0.7;}
        .item.placed{opacity:0.4;cursor:not-allowed;}
        .check-btn{width:80%;margin:7px auto 0;display:block;padding:6px;background:#aed581;border:none;border-radius:8px;font-size:13px;font-weight:bold;color:#33691e;cursor:pointer;box-shadow:0 2px 2px #9ccc65;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">æ‹–æ‹½å½’ç±» â€¢ ç¬¬5å…³ ğŸ‘‘</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">ğŸ† ç»ˆææŒ‘æˆ˜ï¼è¶…å¤šemojiåˆ†ç±»ï¼</div>
        <div class="classify-area">
            <div class="categories">
                <div class="category-box"><div class="category-title">ğŸ˜Šè¡¨æƒ…</div><div class="drop-zone" id="emojiZone"></div></div>
                <div class="category-box"><div class="category-title">ğŸ¾åŠ¨ç‰©</div><div class="drop-zone" id="animalZone"></div></div>
                <div class="category-box"><div class="category-title">ğŸé£Ÿç‰©</div><div class="drop-zone" id="foodZone"></div></div>
                <div class="category-box"><div class="category-title">âš½è¿åŠ¨</div><div class="drop-zone" id="sportZone"></div></div>
                <div class="category-box"><div class="category-title">ğŸŒ¸è‡ªç„¶</div><div class="drop-zone" id="natureZone"></div></div>
                <div class="category-box"><div class="category-title">ğŸš—äº¤é€š</div><div class="drop-zone" id="transportZone"></div></div>
            </div>
            <div class="items-pool" id="itemsPool"></div>
            <button class="check-btn" onclick="checkResult()">âœ… æ£€æŸ¥ç­”æ¡ˆ</button>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2 id="resultTitle"></h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="timeUsed"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="goHome()">ğŸ  è¿”å›ä¸»é¡µ</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
const items=[{emoji:'ğŸ˜Š',cat:'emoji'},{emoji:'ğŸ¶',cat:'animal'},{emoji:'ğŸ',cat:'food'},{emoji:'âš½',cat:'sport'},{emoji:'ğŸŒ¸',cat:'nature'},{emoji:'ğŸš—',cat:'transport'},{emoji:'ğŸ˜‚',cat:'emoji'},{emoji:'ğŸ±',cat:'animal'},{emoji:'ğŸ•',cat:'food'},{emoji:'ğŸ€',cat:'sport'},{emoji:'ğŸŒ²',cat:'nature'},{emoji:'âœˆï¸',cat:'transport'},{emoji:'ğŸ¥°',cat:'emoji'},{emoji:'ğŸ°',cat:'animal'},{emoji:'ğŸ°',cat:'food'},{emoji:'ğŸ¾',cat:'sport'},{emoji:'ğŸŒ»',cat:'nature'},{emoji:'ğŸš€',cat:'transport'}];
let placements={},startTime,timerInt,dragEl=null,dragIdx=null;
function shuffle(arr){return arr.sort(()=>Math.random()-.5)}
function renderItems(){let pool=document.getElementById('itemsPool');pool.innerHTML='';shuffle(items).forEach((item,idx)=>{let div=document.createElement('div');div.className='item';div.textContent=item.emoji;div.draggable=true;div.dataset.idx=idx;div.ondragstart=(e)=>{dragEl=div;dragIdx=idx;e.dataTransfer.effectAllowed='move';};div.ondragend=()=>{dragEl=null;dragIdx=null;};pool.appendChild(div);});}
function setupDropZones(){['emojiZone','animalZone','foodZone','sportZone','natureZone','transportZone'].forEach(id=>{let zone=document.getElementById(id);zone.ondragover=(e)=>{e.preventDefault();e.dataTransfer.dropEffect='move';};zone.ondrop=(e)=>{e.preventDefault();if(dragEl){let cat=id.replace('Zone','');zone.appendChild(dragEl);dragEl.classList.add('placed');placements[dragIdx]=cat;playSound('click');}}});}
function checkResult(){let correct=0,wrong=0;items.forEach((item,idx)=>{if(placements[idx]===item.cat)correct++;else if(placements[idx])wrong++;});let used=Math.floor((Date.now()-startTime)/1000),stars=3;if(wrong>0||correct<items.length){showFinal(false,used,1);return;}if(used>45)stars=1;else if(used>30)stars=2;showFinal(true,used,stars);updateLevelProgress('game16',5,stars);}
function showFinal(ok,used,stars){showModal('resultModal');document.getElementById('resultTitle').textContent=ok?'ğŸ… åˆ†ç±»å¤§å¸ˆï¼':'ğŸ˜µ åŠ æ²¹';document.getElementById('resultMsg').textContent=ok?'å…¨éƒ¨åˆ†ç±»æ­£ç¡®ï¼Œä½ å¤ªå‰å®³äº†ï¼':'è¿˜æœ‰äº›æ²¡åˆ†å¯¹ï¼Œå†è¯•è¯•~';document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);document.getElementById('timeUsed').textContent=`ç”¨æ—¶: ${used}ç§’`;playSound(ok?'win':'wrong');}
window.onload=function(){renderItems();setupDropZones();placements={};startTime=Date.now();if(timerInt)clearInterval(timerInt);timerInt=setInterval(()=>{document.getElementById('timer').textContent=`â±ï¸ ${Math.floor((Date.now()-startTime)/1000)}ç§’`;},1000);}
</script>
</body>
</html>

