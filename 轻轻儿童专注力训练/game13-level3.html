<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬3å…³ - æ‰¾ä¸åŒ</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#fffde7 0%,#e1f5fe 100%);}
        .find-area{max-width:400px;margin:20px auto;background:#fff;border-radius:18px;box-shadow:0 2px 16px #ffe5724d;padding:18px 8px;}
        .animals-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:18px 0;}
        .animal-box{width:100%;aspect-ratio:1;border-radius:15px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:38px;cursor:pointer;transition:all .2s;box-shadow:0 1px 4px #ddd;}
        .animal-box:active{transform:scale(0.91);}
        .animal-box.correct{background:#c8e6c9;animation:bounce .6s;}
        .animal-box.wrong{background:#ffccbc;animation:shake .5s;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">æ‰¾ä¸åŒ â€¢ ç¬¬3å…³</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">æ‰¾å‡ºå”¯ä¸€ä¸åŒçš„å°åŠ¨ç‰©ï¼æœ‰è¿·æƒ‘é¡¹äº†ï¼</div>
        <div class="find-area">
            <div class="animals-grid" id="animalsGrid"></div>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2>ğŸ‰ ä½ å¾ˆæ£’ï¼</h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="timeUsed"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="nextLevel('game13',3)">â¡ï¸ ä¸‹ä¸€å…³</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
const animals=['ğŸ¦','ğŸ¦','ğŸ¯','ğŸ¦','ğŸ¦','ğŸ¦','ğŸ¯','ğŸ¦','ğŸ¦','ğŸ¦','ğŸ¦','ğŸ¦Š','ğŸ¦','ğŸ¦','ğŸ¦','ğŸ¦'];
let startTime,timerInt,diffIdx;
function shuffle(arr){return arr.sort(()=>Math.random()-.5)}
function renderAnimals(){
    const grid=document.getElementById('animalsGrid');grid.innerHTML='';
    animals.forEach((item,idx)=>{
        let div=document.createElement('div');
        div.className='animal-box';
        div.textContent=item;
        div.onclick=()=>checkAnimal(idx,div);
        grid.appendChild(div);
    });
}
function checkAnimal(idx,dom){
    if(idx===11){
        dom.classList.add('correct');playSound('correct');
        setTimeout(()=>{
            let used=Math.floor((Date.now()-startTime)/1000),stars=3;
            if(used>18)stars=1;else if(used>10)stars=2;
            updateLevelProgress('game13',3,stars);
            document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);
            document.getElementById('resultMsg').textContent='çœ¼åŠ›è¶Šæ¥è¶Šå‰å®³å•¦ï¼';
            document.getElementById('timeUsed').textContent=`ç”¨æ—¶: ${used}ç§’`;
            showModal('resultModal');
        },600);
    }else{
        dom.classList.add('wrong');playSound('wrong');
        setTimeout(()=>dom.classList.remove('wrong'),500);
    }
}
window.onload=function(){
    diffIdx=11;renderAnimals();startTime=Date.now();
    if(timerInt)clearInterval(timerInt);
    timerInt=setInterval(()=>{
        let t=Math.floor((Date.now()-startTime)/1000);
        document.getElementById('timer').textContent=`â±ï¸ ${t}ç§’`;
    },1000);
}
</script>
</body>
</html>
