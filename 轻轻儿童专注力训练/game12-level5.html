<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬5å…³ - æŒ‡å®šé¢œè‰²å¡«è‰²</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#fff3e0 0%,#e8eaf6 100%);}
        .paint-area{max-width:440px;margin:14px auto;background:#fff;border-radius:18px;box-shadow:0 2px 16px #e8c3f044;padding:10px 5px;}
        .target-color{text-align:center;margin:6px 0;font-size:13px;font-weight:bold;color:#555;}
        .color-demo{display:inline-block;width:28px;height:28px;border-radius:5px;box-shadow:0 1px 2px #ddd;vertical-align:middle;margin:0 3px;}
        .shapes-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px;margin:12px 0;}
        .shape-item{width:100%;aspect-ratio:1;border-radius:8px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;transition:all .2s;box-shadow:0 1px 1px #ddd;}
        .shape-item.painted{transform:scale(1.1);box-shadow:0 3px 7px #ff8a80;}
        .check-btn{width:80%;margin:8px auto 5px;display:block;padding:6px;background:#ffccbc;border:none;border-radius:8px;font-size:13px;font-weight:bold;color:#bf360c;cursor:pointer;box-shadow:0 2px 3px #ff8a80;}
        .check-btn:active{background:#ff8a80;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">æŒ‡å®šé¢œè‰²å¡«è‰² â€¢ ç¬¬5å…³ ğŸ‘‘</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">ğŸ† ç»ˆææŒ‘æˆ˜ï¼ç‚¹å‡»æ‰€æœ‰<strong>æ©™è‰²/çº¢è‰²</strong>çš„å°åŠ¨ç‰©ï¼</div>
        <div class="paint-area">
            <div class="target-color">ç›®æ ‡é¢œè‰²ï¼š<span class="color-demo" style="background:#ff7043"></span>æ©™çº¢è‰²</div>
            <div class="shapes-grid" id="shapesGrid"></div>
            <button class="check-btn" onclick="checkResult()">âœ… æäº¤æ£€æŸ¥</button>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2 id="resultTitle"></h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="timeUsed"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="goHome()">ğŸ  è¿”å›ä¸»é¡µ</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
const animals=[
    {emoji:'ğŸ¦€',color:'#ff7043',isTarget:true},{emoji:'ğŸ¸',color:'#81c784',isTarget:false},{emoji:'ğŸ¦',color:'#ff7043',isTarget:true},{emoji:'ğŸ‹',color:'#64b5f6',isTarget:false},{emoji:'ğŸ¦',color:'#ff7043',isTarget:true},
    {emoji:'ğŸ¢',color:'#81c784',isTarget:false},{emoji:'ğŸ¦‘',color:'#ff7043',isTarget:true},{emoji:'ğŸ¦©',color:'#f48fb1',isTarget:false},{emoji:'ğŸ™',color:'#ff7043',isTarget:true},{emoji:'ğŸ›',color:'#81c784',isTarget:false},
    {emoji:'ğŸ¦”',color:'#ff7043',isTarget:true},{emoji:'ğŸŸ',color:'#64b5f6',isTarget:false},{emoji:'ğŸ¦Š',color:'#ff7043',isTarget:true},{emoji:'ğŸ ',color:'#64b5f6',isTarget:false},{emoji:'ğŸ‚',color:'#ff7043',isTarget:true},
    {emoji:'ğŸ¦',color:'#81c784',isTarget:false},{emoji:'ğŸ”¥',color:'#ff7043',isTarget:true},{emoji:'ğŸ¥',color:'#fff176',isTarget:false},{emoji:'ğŸŒ¶ï¸',color:'#ff7043',isTarget:true},{emoji:'ğŸ·',color:'#f48fb1',isTarget:false},
];
let painted=[],startTime,timerInt;
function shuffle(arr){return arr.sort(()=>Math.random()-.5)}
function renderShapes(){const grid=document.getElementById('shapesGrid');grid.innerHTML='';animals.forEach((item,idx)=>{let div=document.createElement('div');div.className='shape-item'+(painted.includes(idx)?' painted':'');div.style.background=painted.includes(idx)?item.color:'#f5f5f5';div.innerHTML=item.emoji;div.onclick=()=>togglePaint(idx);grid.appendChild(div);});}
function togglePaint(idx){if(painted.includes(idx))painted=painted.filter(v=>v!==idx);else painted.push(idx);playSound('click');renderShapes();}
function checkResult(){let correctCnt=0,wrongCnt=0;animals.forEach((item,idx)=>{if(item.isTarget&&painted.includes(idx))correctCnt++;if(!item.isTarget&&painted.includes(idx))wrongCnt++;if(item.isTarget&&!painted.includes(idx))wrongCnt++;});let used=Math.floor((Date.now()-startTime)/1000),stars=3;if(wrongCnt>0){showFinal(false,used,1);return;}if(used>40)stars=1;else if(used>26)stars=2;showFinal(true,used,stars);updateLevelProgress('game12',5,stars);}
function showFinal(ok,used,stars){showModal('resultModal');document.getElementById('resultTitle').textContent=ok?'ğŸ… æ¶‚è‰²å¤§å¸ˆï¼':'ğŸ˜µ å¿«å®Œæˆäº†';document.getElementById('resultMsg').textContent=ok?'æ‰€æœ‰æ©™çº¢è‰²éƒ½æ¶‚å¯¹äº†ï¼Œä½ æ˜¯æ¶‚è‰²å† å†›ï¼':'è¿˜æœ‰æ©™çº¢è‰²åŠ¨ç‰©æ²¡æ¶‚æˆ–æ¶‚é”™äº†ï¼';document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);document.getElementById('timeUsed').textContent=`ç”¨æ—¶: ${used}ç§’`;playSound(ok?'win':'wrong');}
window.onload=function(){shuffle(animals);painted=[];renderShapes();startTime=Date.now();if(timerInt)clearInterval(timerInt);timerInt=setInterval(()=>{let t=Math.floor((Date.now()-startTime)/1000);document.getElementById('timer').textContent=`â±ï¸ ${t}ç§’`;},1000);}
</script>
</body>
</html>

