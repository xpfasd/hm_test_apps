<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬1å…³ - å¿«é€Ÿååº”</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#fff3e0 0%,#e1f5fe 100%);}
        .reaction-area{max-width:360px;margin:25px auto;background:#fff;border-radius:18px;box-shadow:0 2px 16px #ff980080;padding:25px 15px;text-align:center;}
        .target-zone{width:200px;height:200px;margin:20px auto;border-radius:50%;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:80px;cursor:pointer;transition:all .3s;box-shadow:0 2px 10px #ddd;}
        .target-zone.active{background:#ffeb3b;transform:scale(1.1);box-shadow:0 4px 20px #ffd600;}
        .tip{margin:15px 0;font-size:16px;color:#666;font-weight:bold;}
        .score{font-size:18px;color:#f57c00;font-weight:bold;margin-top:15px;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">å¿«é€Ÿååº” â€¢ ç¬¬1å…³</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">å½“åœ†åœˆå˜é»„æ—¶å¿«é€Ÿç‚¹å‡»ï¼</div>
        <div class="reaction-area">
            <div class="tip" id="tip">å‡†å¤‡...</div>
            <div class="target-zone" id="target">ğŸ°</div>
            <div class="score" id="score">ç‚¹å‡»æ¬¡æ•°ï¼š0/5</div>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2 id="resultTitle">âš¡ ååº”æµ‹è¯•å®Œæˆï¼</h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="avgTime"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="nextLevel('game15',1)">â¡ï¸ ä¸‹ä¸€å…³</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
let clickCnt=0,times=[],startTime,isActive=false,nextTimeout;
function activate(){
    isActive=true;startTime=Date.now();
    document.getElementById('target').classList.add('active');
    document.getElementById('tip').textContent='å¿«ç‚¹ï¼';
}
function scheduleNext(){
    nextTimeout=setTimeout(()=>{
        if(clickCnt>=5)return;
        activate();
    },Math.random()*2000+1500);
}
function targetClick(){
    if(!isActive)return;
    isActive=false;
    let rt=Date.now()-startTime;
    times.push(rt);clickCnt++;
    playSound('correct');
    document.getElementById('target').classList.remove('active');
    document.getElementById('score').textContent=`ç‚¹å‡»æ¬¡æ•°ï¼š${clickCnt}/5`;
    document.getElementById('tip').textContent='ç­‰å¾…...';
    if(clickCnt>=5){
        setTimeout(showResult,800);
    }else{
        scheduleNext();
    }
}
function showResult(){
    let avg=Math.round(times.reduce((a,b)=>a+b,0)/times.length);
    let stars=3;
    if(avg>800)stars=1;else if(avg>500)stars=2;
    updateLevelProgress('game15',1,stars);
    document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);
    document.getElementById('resultMsg').textContent=`ä½ çš„å¹³å‡ååº”é€Ÿåº¦ï¼š${avg}æ¯«ç§’`;
    document.getElementById('avgTime').textContent=stars===3?'ååº”è¶…å¿«ï¼':stars===2?'ååº”ä¸é”™ï¼':'å¤šç»ƒä¹ ä¼šæ›´å¿«å“¦~';
    showModal('resultModal');playSound('win');
}
window.onload=function(){
    document.getElementById('target').onclick=targetClick;
    scheduleNext();
}
</script>
</body>
</html>

