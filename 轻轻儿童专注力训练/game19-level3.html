<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬3å…³ - å›¾å½¢é…å¯¹</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{background:linear-gradient(135deg,#fff9c4 0%,#b2ebf2 100%);}
        .match-area{max-width:400px;margin:18px auto;background:#fff;border-radius:18px;box-shadow:0 2px 16px #fff17680;padding:16px 6px;}
        .pairs-container{display:flex;justify-content:space-around;margin:16px 0;}
        .column{display:flex;flex-direction:column;gap:10px;}
        .shape-item{width:70px;height:70px;border-radius:12px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:34px;cursor:pointer;transition:.2s;box-shadow:0 2px 8px #ddd;}
        .shape-item:active{transform:scale(0.88);}
        .shape-item.selected{background:#ffeb3b;box-shadow:0 3px 12px #ffd600;}
        .shape-item.matched{background:#c8e6c9;opacity:0.6;cursor:not-allowed;}
        .check-btn{width:85%;margin:11px auto 0;display:block;padding:8px;background:#ffecb3;border:none;border-radius:10px;font-size:15px;font-weight:bold;color:#ad7a00;cursor:pointer;box-shadow:0 2px 4px #ffd97a;}
    </style>
</head>
<body class="game-page">
<div class="container">
    <div class="game-header">
        <div class="back-btn" onclick="goHome()">â¬…ï¸</div>
        <div class="game-info"><div class="level-title">å›¾å½¢é…å¯¹ â€¢ ç¬¬3å…³</div><div class="timer" id="timer">â±ï¸ 0ç§’</div></div>
    </div>
    <div class="game-area">
        <div class="game-instruction">åŠ¨ç‰©é…å¯¹ï¼æ‰¾ç›¸åŒåŠ¨ç‰©ï¼</div>
        <div class="match-area">
            <div class="pairs-container" id="pairsContainer"></div>
            <button class="check-btn" onclick="checkResult()">âœ… æ£€æŸ¥ç­”æ¡ˆ</button>
        </div>
    </div>
</div>
<div class="modal" id="resultModal">
    <div class="modal-content"><h2 id="resultTitle"></h2>
        <div class="star-rating" id="starRating">â­â­â­</div>
        <p id="resultMsg"></p>
        <p id="timeUsed"></p>
        <div><button class="btn btn-secondary" onclick="retryLevel()">ğŸ”„ å†ç©ä¸€æ¬¡</button><button class="btn btn-primary" onclick="nextLevel('game19',3)">â¡ï¸ ä¸‹ä¸€å…³</button></div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
const shapes=['ğŸ¶','ğŸ±','ğŸ°','ğŸ¸','ğŸ»','ğŸ¦Š','ğŸ·','ğŸ¼'];
let leftSel=null,rightSel=null,matched=[],startTime,timerInt;
function shuffle(arr){return arr.sort(()=>Math.random()-.5)}
function renderPairs(){let container=document.getElementById('pairsContainer');container.innerHTML='';let leftCol=document.createElement('div');leftCol.className='column';let rightCol=document.createElement('div');rightCol.className='column';let leftShapes=shuffle([...shapes]),rightShapes=shuffle([...shapes]);leftShapes.forEach((s,i)=>{let div=document.createElement('div');div.className='shape-item';div.textContent=s;div.dataset.idx=i;div.dataset.side='left';div.onclick=()=>selectItem('left',i,div);leftCol.appendChild(div);});rightShapes.forEach((s,i)=>{let div=document.createElement('div');div.className='shape-item';div.textContent=s;div.dataset.idx=i;div.dataset.side='right';div.onclick=()=>selectItem('right',i,div);rightCol.appendChild(div);});container.appendChild(leftCol);container.appendChild(rightCol);}
function selectItem(side,idx,dom){if(dom.classList.contains('matched'))return;if(side==='left'){if(leftSel)leftSel.classList.remove('selected');leftSel=dom;leftSel.classList.add('selected');}else{if(rightSel)rightSel.classList.remove('selected');rightSel=dom;rightSel.classList.add('selected');}if(leftSel&&rightSel){if(leftSel.textContent===rightSel.textContent){leftSel.classList.add('matched');rightSel.classList.add('matched');matched.push({left:leftSel.dataset.idx,right:rightSel.dataset.idx});playSound('correct');leftSel=null;rightSel=null;}}}
function checkResult(){let used=Math.floor((Date.now()-startTime)/1000),stars=3;if(matched.length<shapes.length){showFinal(false,used,1);return;}if(used>36)stars=1;else if(used>25)stars=2;showFinal(true,used,stars);updateLevelProgress('game19',3,stars);}
function showFinal(ok,used,stars){showModal('resultModal');document.getElementById('resultTitle').textContent=ok?'ğŸ‰ é…å¯¹é«˜æ‰‹ï¼':'ğŸ˜µ å†çœ‹çœ‹';document.getElementById('resultMsg').textContent=ok?'æ‰€æœ‰åŠ¨ç‰©éƒ½é…å¯¹å¥½äº†ï¼':'è¿˜æœ‰åŠ¨ç‰©æ²¡é…å¯¹~';document.getElementById('starRating').textContent='â­'.repeat(stars)+'â˜†'.repeat(3-stars);document.getElementById('timeUsed').textContent=`ç”¨æ—¶: ${used}ç§’`;playSound(ok?'win':'wrong');}
window.onload=function(){renderPairs();startTime=Date.now();if(timerInt)clearInterval(timerInt);timerInt=setInterval(()=>{document.getElementById('timer').textContent=`â±ï¸ ${Math.floor((Date.now()-startTime)/1000)}ç§’`;},1000);}
</script>
</body>
</html>

