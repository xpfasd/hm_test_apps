<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‘æˆ˜æ¨¡å¼æµ‹è¯•</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/features.css">
    <style>
        body {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .test-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .test-info p {
            margin: 5px 0;
            color: #666;
        }
        
        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .test-btn {
            padding: 20px;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .test-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .test-btn .icon {
            font-size: 2rem;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #0f0;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .console-log {
            margin: 2px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ¯ æŒ‘æˆ˜æ¨¡å¼åŠŸèƒ½æµ‹è¯•</h1>
            <p>æµ‹è¯•æŒ‘æˆ˜æ¨¡å¼çš„å„é¡¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
        </div>
        
        <div class="test-info">
            <p><strong>æµ‹è¯•è¯´æ˜ï¼š</strong></p>
            <p>1. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¯åŠ¨ä¸åŒçš„æŒ‘æˆ˜æ¨¡å¼</p>
            <p>2. æµ‹è¯•è®¡æ—¶å™¨ã€ç­”é¢˜ã€å¾—åˆ†ã€è®°å½•ä¿å­˜ç­‰åŠŸèƒ½</p>
            <p>3. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºäº†è§£åŠŸèƒ½çŠ¶æ€</p>
            <p>4. æµ‹è¯•å®Œæˆåå¯ä»¥æŸ¥çœ‹æœ€ä½³è®°å½•æ˜¯å¦æ­£ç¡®ä¿å­˜</p>
        </div>
        
        <div class="test-buttons">
            <button class="test-btn" onclick="testOneMinuteChallenge()">
                <span class="icon">â±ï¸</span>
                <span>æµ‹è¯•ä¸€åˆ†é’ŸæŒ‘æˆ˜</span>
                <small>60ç§’é™æ—¶ç­”é¢˜</small>
            </button>
            
            <button class="test-btn" onclick="testThreeMinuteChallenge()">
                <span class="icon">â°</span>
                <span>æµ‹è¯•ä¸‰åˆ†é’ŸæŒ‘æˆ˜</span>
                <small>180ç§’é™æ—¶ç­”é¢˜</small>
            </button>
            
            <button class="test-btn" onclick="testSurvivalMode()">
                <span class="icon">ğŸ’ª</span>
                <span>æµ‹è¯•ç”Ÿå­˜æ¨¡å¼</span>
                <small>ç­”é”™å³ç»“æŸ</small>
            </button>
            
            <button class="test-btn" onclick="testRecords()">
                <span class="icon">ğŸ“Š</span>
                <span>æŸ¥çœ‹æœ€ä½³è®°å½•</span>
                <small>æ˜¾ç¤ºæ‰€æœ‰æ¨¡å¼è®°å½•</small>
            </button>
            
            <button class="test-btn" onclick="clearRecords()">
                <span class="icon">ğŸ—‘ï¸</span>
                <span>æ¸…é™¤è®°å½•</span>
                <small>é‡ç½®æ‰€æœ‰æœ€ä½³è®°å½•</small>
            </button>
            
            <button class="test-btn" onclick="testAchievements()">
                <span class="icon">ğŸ†</span>
                <span>æµ‹è¯•æˆå°±ç³»ç»Ÿ</span>
                <small>æ£€æŸ¥æˆå°±è§£é”</small>
            </button>
        </div>
        
        <!-- æŒ‘æˆ˜æ¨¡å¼é¡µå®¹å™¨ -->
        <div id="challengePage" class="page" style="display:none;"></div>
        
        <div class="console-output" id="console">
            <div class="console-log">æ§åˆ¶å°è¾“å‡ºï¼š</div>
            <div class="console-log">å‡†å¤‡å°±ç»ªï¼Œç­‰å¾…æµ‹è¯•...</div>
        </div>
    </div>
    
    <!-- å¼•å…¥JSæ–‡ä»¶ -->
    <script src="js/features.js"></script>
    
    <script>
        // æ—¥å¿—è¾“å‡ºå‡½æ•°
        function log(message) {
            const consoleEl = document.getElementById('console');
            const logEl = document.createElement('div');
            logEl.className = 'console-log';
            logEl.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleEl.appendChild(logEl);
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }
        
        // æµ‹è¯•ä¸€åˆ†é’ŸæŒ‘æˆ˜
        function testOneMinuteChallenge() {
            log('å¯åŠ¨ä¸€åˆ†é’ŸæŒ‘æˆ˜æ¨¡å¼...');
            try {
                startTimeChallenge(60);
                log('âœ… ä¸€åˆ†é’ŸæŒ‘æˆ˜æ¨¡å¼å¯åŠ¨æˆåŠŸ');
                log('å½“å‰æ¨¡å¼ï¼š' + challengeManager.mode);
                log('æŒ‘æˆ˜æ—¶é•¿ï¼š' + challengeManager.duration + 'ç§’');
            } catch (error) {
                log('âŒ é”™è¯¯ï¼š' + error.message);
            }
        }
        
        // æµ‹è¯•ä¸‰åˆ†é’ŸæŒ‘æˆ˜
        function testThreeMinuteChallenge() {
            log('å¯åŠ¨ä¸‰åˆ†é’ŸæŒ‘æˆ˜æ¨¡å¼...');
            try {
                startTimeChallenge(180);
                log('âœ… ä¸‰åˆ†é’ŸæŒ‘æˆ˜æ¨¡å¼å¯åŠ¨æˆåŠŸ');
                log('å½“å‰æ¨¡å¼ï¼š' + challengeManager.mode);
                log('æŒ‘æˆ˜æ—¶é•¿ï¼š' + challengeManager.duration + 'ç§’');
            } catch (error) {
                log('âŒ é”™è¯¯ï¼š' + error.message);
            }
        }
        
        // æµ‹è¯•ç”Ÿå­˜æ¨¡å¼
        function testSurvivalMode() {
            log('å¯åŠ¨ç”Ÿå­˜æ¨¡å¼...');
            try {
                startSurvivalChallenge();
                log('âœ… ç”Ÿå­˜æ¨¡å¼å¯åŠ¨æˆåŠŸ');
                log('å½“å‰æ¨¡å¼ï¼š' + challengeManager.mode);
                log('ç­”é”™å³ç»“æŸ');
            } catch (error) {
                log('âŒ é”™è¯¯ï¼š' + error.message);
            }
        }
        
        // æŸ¥çœ‹æœ€ä½³è®°å½•
        function testRecords() {
            log('æŸ¥çœ‹æœ€ä½³è®°å½•...');
            const best60 = localStorage.getItem('best60') || '0';
            const best180 = localStorage.getItem('best180') || '0';
            const bestSurvival = localStorage.getItem('bestSurvival') || '0';
            
            log('ä¸€åˆ†é’ŸæŒ‘æˆ˜æœ€ä½³è®°å½•ï¼š' + best60 + ' é¢˜');
            log('ä¸‰åˆ†é’ŸæŒ‘æˆ˜æœ€ä½³è®°å½•ï¼š' + best180 + ' é¢˜');
            log('ç”Ÿå­˜æ¨¡å¼æœ€ä½³è®°å½•ï¼š' + bestSurvival + ' é¢˜');
        }
        
        // æ¸…é™¤è®°å½•
        function clearRecords() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æœ€ä½³è®°å½•å—ï¼Ÿ')) {
                localStorage.removeItem('best60');
                localStorage.removeItem('best180');
                localStorage.removeItem('bestSurvival');
                log('âœ… æ‰€æœ‰è®°å½•å·²æ¸…é™¤');
                testRecords();
            }
        }
        
        // æµ‹è¯•æˆå°±ç³»ç»Ÿ
        function testAchievements() {
            log('æµ‹è¯•æˆå°±ç³»ç»Ÿ...');
            if (typeof featureManager === 'undefined') {
                log('âŒ featureManager æœªå®šä¹‰');
                log('åˆ›å»º featureManager å®ä¾‹...');
                window.featureManager = new FeatureManager();
            }
            
            const achievements = featureManager.achievements;
            log('æˆå°±æ€»æ•°ï¼š' + achievements.length);
            
            const unlockedCount = achievements.filter(a => a.unlocked).length;
            log('å·²è§£é”æˆå°±ï¼š' + unlockedCount);
            log('æœªè§£é”æˆå°±ï¼š' + (achievements.length - unlockedCount));
            
            // æŸ¥æ‰¾æŒ‘æˆ˜ç›¸å…³æˆå°±
            const challengerAch = achievements.find(a => a.id === 'challenger');
            const survivorAch = achievements.find(a => a.id === 'survivor');
            
            if (challengerAch) {
                log('æŒ‘æˆ˜è€…æˆå°±çŠ¶æ€ï¼š' + (challengerAch.unlocked ? 'å·²è§£é”' : 'æœªè§£é”'));
            }
            if (survivorAch) {
                log('ç”Ÿå­˜ä¸“å®¶æˆå°±çŠ¶æ€ï¼š' + (survivorAch.unlocked ? 'å·²è§£é”' : 'æœªè§£é”'));
            }
        }
        
        // è¿”å›é¦–é¡µå‡½æ•°ï¼ˆä¾›æŒ‘æˆ˜æ¨¡å¼ä½¿ç”¨ï¼‰
        function goHome() {
            log('è¿”å›æµ‹è¯•é¡µé¢');
            document.getElementById('challengePage').style.display = 'none';
            document.querySelector('.test-container').style.display = 'block';
        }
        
        // åˆ›å»º FeatureManager å®ä¾‹
        window.featureManager = new FeatureManager();
        log('âœ… FeatureManager å·²åˆå§‹åŒ–');
        
        // åˆå§‹åŒ–é¡µé¢
        log('âœ… æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
    </script>
</body>
</html>
